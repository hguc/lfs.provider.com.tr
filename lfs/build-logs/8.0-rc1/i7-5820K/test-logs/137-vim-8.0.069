Mon Feb 13 23:57:44 CST 2017
make[1]: Entering directory '/sources/vim80'
Starting make in the src directory.
If there are problems, cd to the src directory and run make there
cd src && make test
make[2]: Entering directory '/sources/vim80/src'
make -f Makefile vim
make[3]: Entering directory '/sources/vim80/src'
make[3]: 'vim' is up to date.
make[3]: Leaving directory '/sources/vim80/src'
if test -n "yes" -a -f po/Makefile; then \
	cd po; make -f Makefile check VIM=../vim; \
fi
make[3]: Entering directory '/sources/vim80/src/po'
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq af.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"af.po" "af.po" 5393 lines, 133397 characters
OK
[?1l>[?12l[?25h[?1049ltouch af.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq ca.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"ca.po" "ca.po" 6201 lines, 161830 characters
OK
[?1l>[?12l[?25h[?1049ltouch ca.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq cs.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"cs.po" "cs.po" 4664 lines, 111014 characters
OK
[?1l>[?12l[?25h[?1049ltouch cs.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq de.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"de.po" "de.po" 6117 lines, 156572 characters
OK
[?1l>[?12l[?25h[?1049ltouch de.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq en_GB.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"en_GB.po" "en_GB.po" 290 lines, 8951 characters
OK
[?1l>[?12l[?25h[?1049ltouch en_GB.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq eo.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"eo.po" "eo.po" 7041 lines, 181771 characters
OK
[?1l>[?12l[?25h[?1049ltouch eo.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq es.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"es.po" "es.po" 8280 lines, 203813 characters
OK
[?1l>[?12l[?25h[?1049ltouch es.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq fi.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"fi.po" "fi.po" 6959 lines, 178335 characters
OK
[?1l>[?12l[?25h[?1049ltouch fi.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq fr.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"fr.po" "fr.po" 7319 lines, 200117 characters
OK
[?1l>[?12l[?25h[?1049ltouch fr.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq ga.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"ga.po" "ga.po" 7434 lines, 193547 characters
OK
[?1l>[?12l[?25h[?1049ltouch ga.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq it.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"it.po" "it.po" 6949 lines, 179597 characters
OK
[?1l>[?12l[?25h[?1049ltouch it.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq ja.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"ja.po" "ja.po" 6990 lines, 203194 characters
OK
[?1l>[?12l[?25h[?1049ltouch ja.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq ko.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"ko.po" "ko.po" 6447 lines, 155536 characters
OK
[?1l>[?12l[?25h[?1049ltouch ko.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq ko.UTF-8.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"ko.UTF-8.po" "ko.UTF-8.po" 6447 lines, 171433 characters
OK
[?1l>[?12l[?25h[?1049ltouch ko.UTF-8.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq nb.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"nb.po" "nb.po" 6166 lines, 150557 characters
OK
[?1l>[?12l[?25h[?1049ltouch nb.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq nl.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"nl.po" "nl.po" 5852 lines, 135176 characters
OK
[?1l>[?12l[?25h[?1049ltouch nl.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq no.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"no.po" "no.po" 6166 lines, 150557 characters
OK
[?1l>[?12l[?25h[?1049ltouch no.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq pl.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"pl.po" "pl.po" 6905 lines, 175274 characters
OK
[?1l>[?12l[?25h[?1049ltouch pl.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq pt_BR.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"pt_BR.po" "pt_BR.po" 6236 lines, 160821 characters
OK
[?1l>[?12l[?25h[?1049ltouch pt_BR.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq ru.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"ru.po" "ru.po" 6939 lines, 227889 characters
OK
[?1l>[?12l[?25h[?1049ltouch ru.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq sk.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"sk.po" "sk.po" 5821 lines, 147387 characters
OK
[?1l>[?12l[?25h[?1049ltouch sk.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq sv.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"sv.po" "sv.po" 6148 lines, 149141 characters
OK
[?1l>[?12l[?25h[?1049ltouch sv.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq uk.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"uk.po" "uk.po" 7236 lines, 224452 characters
OK
[?1l>[?12l[?25h[?1049ltouch uk.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq vi.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"vi.po" "vi.po" 5196 lines, 143932 characters
OK
[?1l>[?12l[?25h[?1049ltouch vi.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq zh_CN.UTF-8.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"zh_CN.UTF-8.po" "zh_CN.UTF-8.po" 6139 lines, 147454 characters
OK
[?1l>[?12l[?25h[?1049ltouch zh_CN.UTF-8.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq zh_CN.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"zh_CN.po" "zh_CN.po" 6140 lines, 136476 characters
OK
[?1l>[?12l[?25h[?1049ltouch zh_CN.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq zh_TW.UTF-8.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"zh_TW.UTF-8.po" "zh_TW.UTF-8.po" 5282 lines, 127286 characters
OK
[?1l>[?12l[?25h[?1049ltouch zh_TW.UTF-8.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq zh_TW.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"zh_TW.po" "zh_TW.po" 5275 lines, 117353 characters
OK
[?1l>[?12l[?25h[?1049ltouch zh_TW.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq cs.cp1250.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"cs.cp1250.po" "cs.cp1250.po" 4664 lines, 111022 characters
OK
[?1l>[?12l[?25h[?1049ltouch cs.cp1250.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq ja.sjis.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"ja.sjis.po" "ja.sjis.po" 6990 lines, 179251 characters
OK
[?1l>[?12l[?25h[?1049ltouch ja.sjis.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq ja.euc-jp.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"ja.euc-jp.po" "ja.euc-jp.po" 6990 lines, 179135 characters
OK
[?1l>[?12l[?25h[?1049ltouch ja.euc-jp.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq pl.cp1250.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"pl.cp1250.po" "pl.cp1250.po" 6905 lines, 175270 characters
OK
[?1l>[?12l[?25h[?1049ltouch pl.cp1250.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq pl.UTF-8.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"pl.UTF-8.po" "pl.UTF-8.po" 6905 lines, 178060 characters
OK
[?1l>[?12l[?25h[?1049ltouch pl.UTF-8.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq ru.cp1251.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"ru.cp1251.po" "ru.cp1251.po" 6939 lines, 179582 characters
OK
[?1l>[?12l[?25h[?1049ltouch ru.cp1251.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq sk.cp1250.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"sk.cp1250.po" "sk.cp1250.po" 5821 lines, 147383 characters
OK
[?1l>[?12l[?25h[?1049ltouch sk.cp1250.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq uk.cp1251.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"uk.cp1251.po" "uk.cp1251.po" 7236 lines, 181515 characters
OK
[?1l>[?12l[?25h[?1049ltouch uk.cp1251.ck
../vim -u NONE -e -X -S check.vim -c "if error == 0 | q | endif" -c cq zh_CN.cp936.po
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[?25l[57;1H"zh_CN.cp936.po" "zh_CN.cp936.po" 6140 lines, 136487 characters
OK
[?1l>[?12l[?25h[?1049ltouch zh_CN.cp936.ck
make[3]: Leaving directory '/sources/vim80/src/po'
if test vim != vim -a ! -r vim; then \
	ln -s vim vim; \
fi
cd testdir; make -f Makefile  VIMPROG=../vim  SCRIPTSOURCE=../../runtime
make[3]: Entering directory '/sources/vim80/src/testdir'
rm -f test.log messages
rm -rf test1.failed test.out X* viminfo tiny.vim small.vim mbyte.vim mzscheme.vim lua.vim test.ok benchmark.out wrongtermsize
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test1.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test1.in" 57 lines, 2069 characters[2;1HFirst a simple test to check if the test script works.

If Vim was not compiled with the +eval feature, the small.vim script will be
set to copy the test.ok file to test.out, so that it looks like the test
succeeded.  Otherwise an empty small.vim is written.  small.vim is sourced by
tests that require the +eval feature or other features that are missing in the
small version.

If Vim was not compiled with the +windows feature, the tiny.vim script will be
set like small.vim above.  tiny.vim is sourced by tests that require the
+windows feature or other features that are missing in the tiny version.

If Vim was not compiled with the +multi_byte feature, the mbyte.vim script will
be set like small.vim above.  mbyte.vim is sourced by tests that require the
+multi_byte feature.
Similar logic is applied to the +mzscheme feature, using mzscheme.vim.
Similar logic is applied to the +lua feature, using lua.vim.

STARTTEST
:" If columns or lines are too small, create wrongtermsize.
:" (Some tests will fail. When columns and/or lines are small)
:if &lines < 24 || &columns < 80 | sp another | w! wrongtermsize | qa! | endif
:"
:" Write a single line to test.out to check if testing works at all.
:%d
athis is a test[34m^[[m:w! test.out
:" Create small.vim and tiny.vim empty, create mbyte.vim to skip the test.
0D:w! small.vim
:w! tiny.vim
ae! test.ok
w! test.out
qa!
[34m^[[m:w! mbyte.vim
:w! mzscheme.vim
:w! lua.vim
:"
:" If +multi_byte feature supported, make mbyte.vim empty.
:if has("multi_byte") | sp another | w! mbyte.vim | q | endif
:"
:" If +mzscheme feature supported, make mzscheme.vim empty.
:if has("mzscheme") | sp another | w! mzscheme.vim | q | endif
:"
:" If +lua feature supported, make lua.vim empty.
:if has("lua") | sp another | w! lua.vim | q | endif
:"
:" If +eval feature supported quit here, leaving tiny.vim and small.vim empty.
:" Otherwise write small.vim to skip the test.
:if 1 | q! | endif
:w! small.vim
:" If +windows feature not supported :sp will fail and tiny.vim will be
:" written to skip the test.
:sp another
:wq! tiny.vim
:qa!
ENDTEST[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[20;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[21;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 35 lines, 1133 characters written[21;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[21;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" If columns or lines are too small, create wrongtermsize.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" (Some tests will fail. When columns and/or lines are small)[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif &lines < 24 || &columns < 80 | sp another | w! wrongtermsize | qa! | endif[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Write a single line to test.out to check if testing works at all.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h%d[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H--No lines in buffer--[1;1H[?12l[?25h[?25lthis is a test[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 1 line, 15 characters written[1;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Create small.vim and tiny.vim empty, create mbyte.vim to skip the test.[?25l[1;14H[?12l[?25h[?25l[1;1H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! small.vim[?25l"small.vim" [57;13H[K[57;13H[New File] 1 line, 1 character written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! tiny.vim[?25l"tiny.vim" [57;12H[K[57;12H[New File] 1 line, 1 character written[1;1H[?12l[?25h[?25le! test.ok
w! test.out[2;12H[K[3;1Hqa![3;4H[K[4;1H[K[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! mbyte.vim[?25l"mbyte.vim" [57;13H[K[57;13H[New File] 4 lines, 28 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! mzscheme.vim[?25l"mzscheme.vim" [57;16H[K[57;16H[New File] 4 lines, 28 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! lua.vim[?25l"lua.vim" [57;11H[K[57;11H[New File] 4 lines, 28 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" If +multi_byte feature supported, make mbyte.vim empty.[?25l[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif has("multi_byte") | sp another | w! mbyte.vim | q | endif[?25l"another" [New File][57;21H[K[57;1H
"mbyte.vim" 0 lines, 0 characters written[1;1H[L[1;1He! test.ok[57;1H[K[4;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" If +mzscheme feature supported, make mzscheme.vim empty.[?25l[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif has("mzscheme") | sp another | w! mzscheme.vim | q | endif[?25l[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" If +lua feature supported, make lua.vim empty.[?25l[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif has("lua") | sp another | w! lua.vim | q | endif[?25l[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" If +eval feature supported quit here, leaving tiny.vim and small.vim empty.[?25l[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Otherwise write small.vim to skip the test.[?25l[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif 1 | q! | endif[?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049lrm -rf X* viminfo
rm -rf test3.failed test.ok test.out X* viminfo
cp test3.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test3.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test3.in" 2303 lines, 22649 characters[1;1H/* vim: set cin ts=4 sw=4 : */

Test for 'cindent'

STARTTEST
:so small.vim
:set nocompatible viminfo+=nviminfo modeline
:edit[16C" read modeline
/start of AUTO
=/end of AUTO
ENDTEST

/* start of AUTO matically checked vim: set ts=4 : */
{[15;9Hif (test)[16;17Hcmd1;[17;9Hcmd2;
}

{[21;9Hif (test)[22;17Hcmd1;[23;9Helse[24;17Hcmd2;
}

{[28;9Hif (test)[29;9H{[30;17Hcmd1;[31;17Hcmd2;[32;9H}
}

{[36;9Hif (test)[37;9H{[38;17Hcmd1;[39;17Helse[40;9H}
}

{[44;9Hwhile (this)[45;17Hif (test)[46;25Hcmd1;[47;9Hcmd2;
}

{[51;9Hwhile (this)[52;17Hif (test)[53;25Hcmd1;[54;17Helse[55;25Hcmd2;
}[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1H/* vim: set cin ts=4 sw=4 : */[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[5;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 5 lines, 125 characters written[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[6;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[11;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocompatible viminfo+=nviminfo modeline[?25l[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hedit                " read modeline[?25l"test3.in"[57;22H[K[57;12H2303L, 22649C[15;5Hif (test)[15;14H[K[16;9Hcmd1;[16;17H[K[17;5Hcmd2;[17;10H[K[21;5Hif (test)[21;14H[K[22;9Hcmd1;[22;17H[K[23;5Helse[23;9H[K[24;9Hcmd2;[24;17H[K[28;5Hif (test)[28;14H[K[29;5H{[29;9H[K[30;9Hcmd1;[30;17H[K[31;9Hcmd2;[31;17H[K[32;5H}[32;9H[K[36;5Hif (test)[36;14H[K[37;5H{[37;9H[K[38;9Hcmd1;[38;17H[K[39;9Helse[39;17H[K[40;5H}[40;9H[K[44;5Hwhile (this)[44;17H[K[45;9Hif (test)[45;18H[K[46;13Hcmd1;[46;25H[K[47;5Hcmd2;[47;10H[K[51;5Hwhile (this)[51;17H[K[52;9Hif (test)[52;18H[K[53;13Hcmd1;[53;25H[K[54;9Helse[54;17H[K[55;13Hcmd2;[55;25H[K[12;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hstart of AUTO[?25l[13;4H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hend of AUTO[?25l956 lines to indent...950085075065055045035025015050 lines to indent... 957 lines indented [57;20H[K[13;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[27m[23m[m[H[2J[1;5Hswitch (foo)
    {[3;9Hcase (bar):[4;13Hif (baz())[5;17Hquux();[6;13Hbreak;[7;9Hcase (shmoo):[8;13Hif (!bar)[9;13H{[10;13H}[11;9Hcase (foo1):[12;13Hswitch (bar)[13;13H{[14;17Hcase baz:[15;21Hbaz_f();[16;21Hbreak;[17;13H}[18;13Hbreak;[19;9Hdefault:[20;13Hbaz();[21;13Hbaz();[22;13Hbreak;
    }
}

/* end of AUTO */

STARTTEST
:set tw=0 wm=60 columns=80 noai fo=croq
/serious/e
a about life, the universe, and the rest[34m^[[m
ENDTEST

{

/* this is
 * a real serious important big
 * comment
 */
    /* insert " about life, the universe, and the rest" after "serious" */
}

STARTTEST
:set nocin
/comments
joabout life[34m^[[m/happens
jothere[34m^[[m/below
oline[34m^[[m/this
Ohello[34m^[[m
ENDTEST

{
    /*[54;6H* Testing for comments, without 'cin' set[55;6H*/[28;1H[?12l[?25h
[?25l[57;1H:set ff=unix cpo-=A[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 93C written[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[29;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[31;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset tw=0 wm=60 columns=80 noai fo=croq[?25l[8;57;80t[27m[23m[m[H[2J[?12l[?25h[27m[23m[m[H[2J[?25l[1;5Hswitch (foo)
    {[3;9Hcase (bar):[4;13Hif (baz())[5;17Hquux();[6;13Hbreak;[7;9Hcase (shmoo):[8;13Hif (!bar)[9;13H{[10;13H}[11;9Hcase (foo1):[12;13Hswitch (bar)[13;13H{[14;17Hcase baz:[15;21Hbaz_f();[16;21Hbreak;[17;13H}[18;13Hbreak;[19;9Hdefault:[20;13Hbaz();[21;13Hbaz();[22;13Hbreak;
    }
}

/* end of AUTO */

STARTTEST
:set tw=0 wm=60 columns=80 noai fo=croq
/serious/e
a about life, the universe, and the rest[34m^[[m
ENDTEST

{

/* this is
 * a real serious important big
 * comment
 */
    /* insert " about life, the universe, and the rest" after "serious" */
}

STARTTEST
:set nocin
/comments
joabout life[34m^[[m/happens
jothere[34m^[[m/below
oline[34m^[[m/this
Ohello[34m^[[m
ENDTEST

{
    /*[54;6H* Testing for comments, without 'cin' set[55;6H*/[32;1H[?12l[?25h[?25l[57;1H/[?12l[?25hserious/e[?25l[37;17H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;1H[K[38;56r[38;1H[3L[1;57r[37;19H[K[38;2H* about life, the
 * universe, and the
 * rest important big[40;7H[?12l[?25h[41;7H[?25l[57;1H/^STARTTEST[46;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[47;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H6L, 78C written[47;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[47;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[52;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[53;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocin[?25l[53;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hcomments[?25l[1;56r[56;1H
[1;57r[56;6H* Testing for comments, without 'cin' set[57;1H[K[56;20H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;6H*/[?12l[?25h[?25l
[1m-- INSERT --[m[57;1H[K[1;56r[56;1H
[1;57r[56;1Habout life[?12l[?25h[?25l
/[?12l[?25hhappens[?25l[1;56r[1;1H[3M[1;57r[55;1H/*
* what happens here?[57;1H[K[56;8H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H*/[?12l[?25h[?25l
[1m-- INSERT --[m[57;1H[K[1;56r[56;1H
[1;57r[56;1Hthere[?12l[?25h[?25l
/[?12l[?25hbelow[?25l[1;56r[1;1H[3M[1;57r[55;5H/*[56;8Hthe end of the comment, try inserting a line below */[57;1H[K[56;53H[?12l[?25h[?25l
[1m-- INSERT --[m[57;1H[K[1;56r[56;1H
[1;57r[56;1Hline[?12l[?25h[?25l
/[?12l[?25hthis[?25l[1;56r[1;1H[3M[1;57r[55;9H/* how about[56;25Hthis one */[57;1H[K[56;25H[?12l[?25h[?25l
[1m-- INSERT --[m[57;1H[K[56;1Hhello[56;25H[K[56;5H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;25Hthis one */[56;8H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[3M[1;57r[54;1H}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cin[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 18C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1H/vec2
==[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cin[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hvec2[?25l[1;56r[1;1H[5M[1;57r[53;1H{
    var = this + that + vec[0] * vec[0][55;23H+ vec[1] * vec[1][56;23H+ vec2[2] * vec[2];[57;1H[K[56;25H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cin[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H5L, 51C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[1;1H[4M[1;57r[53;1H:set cino=}4
/testing1
k2==/testing2
k2==[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cin[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=}4[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25htesting1[?25l[1;56r[1;1H[8M[1;57r[50;1H{[51;9Hasdf asdflkajds f;
    if (tes & ting) {[53;9Hasdf asdf asdf ;[54;9Hasdfa sdf asdf;[55;9H}
    testing1;[57;1H[K[56;5H[?12l[?25h[55;8H [?25l

/[?12l[?25htesting2[?25l[1;56r[1;1H[6M[1;57r[51;5Hif (tes & ting)
    {[53;9Hasdf asdf asdf ;[54;9Hasdfa sdf asdf;[55;9H}
    testing2;[57;1H[K[56;5H[?12l[?25h[55;8H [56;9H[?25l
/^STARTTEST[1;56r[1;1H[3M[1;57r[54;1H}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cin[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H4L, 36C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:set cino=(0,)20
/main
=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cin[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=(0,)20[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hmain[?25l[1;56r[1;1H[2M[1;57r[56;1Hmain ( int first_par, /*[57;1H[K[56;1H[?12l[?25h[?25l
19 lines to indent...20[7Cindented [57;19H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;24H* Comment for[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[21M[1;57r[36;24H* first par[37;24H*/[38;8Hint second_par /*[39;24H* Comment for[40;24H* second par[41;24H*/[42;6H)
{
    func( first_par, /*[45;23H* Comment for[46;23H* first par[47;23H*/[48;11Hsecond_par /*[49;23H* Comment for[50;23H* second par[51;23H*/[52;9H);

}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cin[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H4L, 36C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:set cino=es,n0s
/main
=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cin[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=es,n0s[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hmain[?25l[1;56r[1;1H[2M[1;57r[56;1Hmain(void)[57;1H[K[56;1H[?12l[?25h[?25l
8 lines to indent...9[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H{[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[10M[1;57r[47;5H/* Make sure that cino=X0s is not parsed like cino=Xs. */
    if (cond)[49;9Hfoo();
    else
    {[52;9Hbar();
    }
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cin[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 26C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1H:set cino=
]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cin[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=[?25l[56;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[56;1H{[57;1H[K[56;1H[?12l[?25h[?25l
11 lines to indent...12[7Cindented [57;19H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hdo[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[13M[1;57r[44;5H{[45;9Hif ()[46;9H{[47;13Hif ()[48;17Hasdf;[49;13Helse[50;17Hasdf;[51;9H}
    } while ();
    cmd;[8C/* this should go under the } */
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H]]=][[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H1L, 6C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[57;1H[K[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
8 lines to indent...9[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hif ( k() ) {[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[10M[1;57r[47;9Hl();[49;5H} else { /* Start (two words) end */[50;9Hm();
    }[53;5Hn();
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino={s,e-s[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 23C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino={s,e-s[?25l[56;1H[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
7 lines to indent...8[7Cindented [57;18H[K[56;1H    {[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hif ( k() )[57;1H[K[56;5H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[9M[1;57r[48;9H{[49;9Hl();[50;9H} else { /* Start (two words) end */[51;9Hm();[52;9H}
    n();    /* should be under the if () */
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino={s,fs[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 25C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H]]=/ foo[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino={s,fs[?25l[56;1H[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[55;1Hvoid bar(void)
{[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h foo[?25l30 lines to indent...31[7Cindented [57;19H[K[56;1H    {[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[27m[23m[m[H[2J[1;9H}[3;5Hwhile (a)[4;9H{[5;9Hfoo(&a);[6;9H}[8;9H{[9;9Hint a;[10;13H{[11;13Ha = a + 1;[12;13H}[13;9H}
    b = a;
    }

void func(void)
    {
    a = 1;[20;9H{[21;9Hb = 2;[22;9H}
    c = 3;
    d = 4;
    }
/* foo */

STARTTEST
:set cino=
/while
ohere[34m^[[m
ENDTEST

a()
{
  do {
    a = a +[38;7Ha;
  } while ( a );[8C/* add text under this line */
    if ( a )[41;7Ha;
}

STARTTEST
:set cino= com=
/comment
olabel2: b();[34m^M[mlabel3 /* post */:[34m^M[m/* pre */ label4:[34m^M[mf(/*com*/);[34m^M[mif (/*com*/)[34m^^[48;1HM[mcmd();[34m^[[m
ENDTEST

a()
{
label1:[54;13H/* hmm */[55;13H// comment
}[28;1H[?12l[?25h
[?25l[57;1H:set ff=unix cpo-=A[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 25C written[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[29;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[31;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hwhile[?25l[39;5H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;1H[K[40;56r[40;1H[L[1;57r[40;3Hhere[?12l[?25h[41;6H[?25l[57;1H/^STARTTEST[45;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[46;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 109C written[46;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[46;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[48;1H[?12l[?25h

[?25l[57;1H[K[57;1H:so! Xdotest[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino= com=[?25l[50;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hcomment[?25l[56;16H[?12l[?25h[?25l
[1m-- INSERT --[m[57;1H[K[1;56r[1;1H[6M[1;57r[51;1Hlabel2: b();
label3 /* post */:
/* pre */ label4:[54;9Hf(/*com*/);[55;9Hif (/*com*/)[56;13Hcmd();[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set comments& comments^=s:/*,m:**,ex:*/[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 53C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1H/simple
=5j[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset comments& comments^=s:/*,m:**,ex:*/[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hsimple[?25l[1;56r[1;1H[3M[1;57r[55;1H/*
  * A simple comment[57;1H[K[56;7H[?12l[?25h[?25l
5 lines to indent...6[7Cindented [57;18H[K[56;2H* A simple comment[56;20H[K[56;2H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;2H*/[57;1H[K[56;2H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[6M[1;57r[52;1H/*
** A different comment
*/

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=c0[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 70C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1H:set comments& comments-=s1:/* comments^=s0:/*
2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=c0[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset comments& comments-=s1:/* comments^=s0:/*[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
4 lines to indent...5[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[6M[1;57r[51;5H/*********[52;7HA comment.
    *********/
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=c0,C1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 73C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1H:set comments& comments-=s1:/* comments^=s0:/*
2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=c0,C1[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset comments& comments-=s1:/* comments^=s0:/*[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
4 lines to indent...5[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[6M[1;57r[51;5H/*********
    A comment.
    *********/
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 17C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=[?25l[56;1H[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
5 lines to indent...6[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hc = c1 &&[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[7M[1;57r[50;9H([51;10Hc2 ||[52;10Hc3[53;9H) && c4;
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=(s[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 23C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=(s[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
5 lines to indent...6[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hc = c1 &&[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[7M[1;57r[50;9H([51;10Hc2 ||[52;10Hc3[53;9H) && c4;
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=(s,U1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 28C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=(s,U1  [?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
5 lines to indent...6[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hc = c1 &&[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[7M[1;57r[50;9H([51;13Hc2 ||[52;13Hc3[53;9H) && c4;
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=(0[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 23C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=(0[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
4 lines to indent...5[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hif (   c1[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[6M[1;57r[51;12H&& (   c2[52;19H|| c3))[53;9Hfoo;
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=(0,w1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 28C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=(0,w1  [?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
4 lines to indent...5[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hif (   c1[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[6M[1;57r[51;9H&& (   c2[52;13H|| c3))[53;9Hfoo;
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=(s[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 23C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=(s[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
8 lines to indent...9[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hc = c1 && ([57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[10M[1;57r[47;9Hc2 ||[48;9Hc3[49;9H) && c4;
    if ([51;9Hc1 && c2[52;8H)[53;9Hfoo;
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=(s,m1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 28C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=(s,m1  [?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
8 lines to indent...9[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hc = c1 && ([57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[10M[1;57r[47;9Hc2 ||[48;9Hc3
    ) && c4;
    if ([51;9Hc1 && c2
    )[53;9Hfoo;
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=b1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 23C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=b1[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
9 lines to indent...10 lines indented [57;19H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hswitch (x)[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[11M[1;57r[46;5H{[47;9Hcase 1:[48;13Ha = b;[49;9Hbreak;[50;9Hdefault:[51;13Ha = 0;[52;9Hbreak;
    }
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=(0,W5[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 26C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=(0,W5[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
10 lines to indent...11[7Cindented [57;19H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hinvokeme([57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[12M[1;57r[45;10Hargu,[46;10Hment);
    invokeme([48;10Hargu,[49;10Hment[50;10H);
    invokeme(argu,[52;14Hment[53;13H);
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=/6[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 23C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=/6[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
3 lines to indent...4[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hstatement;[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[5M[1;57r[52;11H// comment 1[53;11H// comment 2
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 34C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1H2kdd]]/comment 1/+1
==[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=[?25l[56;1H[?12l[?25h[54;1H[?25l==[54;3H[K[55;1HENDTEST[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hvoid f()
{[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25hcomment 1/+1[?25l[1;56r[1;1H[3M[1;57r[54;5Hstatement;[55;8H// comment 1
    // comment 2[57;1H[K[56;4H[?12l[?25h[?25l    // comment 2[56;8H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=g0[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 23C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=g0[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hclass CAbc
{[57;1H[K[56;1H[?12l[?25h[?25l
6 lines to indent...7[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hint Test() { return FALSE; }[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[8M[1;57r[50;1Hpublic: // comment
    void testfall();
protected:
    void testfall();
};

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=(0,gs,hs[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 29C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=(0,gs,hs[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hclass Foo : public Bar
{[57;1H[K[56;1H[?12l[?25h[?25l
5 lines to indent...6[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hpublic:[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[7M[1;57r[50;9Hvirtual void method1(void) = 0;[51;9Hvirtual void method2(int arg1,[52;30Hint arg2,[53;30Hint arg3) = 0;
};

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=+20[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 24C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=+20[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[54;5Hvoid
foo()
{[57;1H[K[56;1H[?12l[?25h[?25l
4 lines to indent...5[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hif (a)[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[6M[1;57r[51;5H{
    } else[53;9Hasdf;
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=(0,W2s[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 27C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd]]=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=(0,W2s[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd]]=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H{[57;1H[K[56;1H[?12l[?25h[?25l
34 lines to indent...35[7Cindented [57;19H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Haverylongfunctionnamelongfunctionnameaverylongfunctionname()->asd([57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[27m[23m[m[H[2J[1;5Hfunc()->asd(asdasdf,[2;17Haverylongfunctionname([3;25Habc,[4;25Hdec)->averylongfunctionname([5;33Hasdfadsf,[6;33Hasdfasdf,[7;33Hasdfasdf,[8;33H),[9;17Hfunc(asdfadf,[10;22Hasdfasdf[11;21H),[12;17Hasdasdf[13;16H);[15;5Haverylongfunctionnameaverylongfunctionnameavery()->asd(fasdf([16;21Habc,[17;21Hdec)->asdfasdfasdf([18;29Hasdfadsf,[19;29Hasdfasdf,[20;29Hasdfasdf,[21;29H),[22;13Hfunc(asdfadf,[23;18Hasdfasdf),[24;13Hasdasdf[25;13H);
}

STARTTEST
:set cino=M1
2kdd]]=][
ENDTEST

int main ()
{
    if (cond1 &&[36;13Hcond2[37;13H)[38;9Hfoo;
}

STARTTEST
:set cino=(0,ts
2kdd2j=][
ENDTEST

void func(int a
#if defined(FOO)[48;11H, int b[49;11H, int c
#endif[51;10H)
{
}

STARTTEST
:set cino=(0[28;1H[?12l[?25h
[?25l[57;1H:set ff=unix cpo-=A[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 23C written[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[29;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=M1[?25l[31;1H[?12l[?25h[29;1H[?25l[29;56r[56;1H
[1;57r[56;1H2kdd2j=][[57;1H[K[29;1H[?12l[?25h[33;1H[?25l[57;1H4 lines to indent...5[7Cindented [57;18H[K[33;1H[?12l[?25h
   [?25l[57;1H[K[57;1H/^STARTTEST[40;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[41;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 26C written[41;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[41;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[42;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=(0,ts[?25l[43;1H[?12l[?25h[41;1H[?25l[41;56r[56;1H
[1;57r[56;1HENDTEST[57;1H[K[41;1H[?12l[?25h

[?25l[57;1H7 lines to indent...8[7Cindented [57;18H[K[43;1H[?12l[?25h
[?25l[57;1H[K[57;1H/^STARTTEST[53;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 23C written[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[54;1H[?12l[?25h[?25l


/ENDTEST/+-1[57;13H[K[57;1H[55;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=(0[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd2j=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h

[?25l
8 lines to indent...9[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hvoid[57;1H[K[56;4H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[10M[1;57r[47;1Hfunc(int a
#if defined(FOO)[49;6H, int b[50;6H, int c
#endif
    )
{
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino&[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 22C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd2j=7][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino&[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd2j=7][
ENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h

[?25l
69 lines to indent...507[8Cindented [57;19H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hvoid func(void)[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[27m[23m[m[H[2J[1;9H5, 6};[3;5Hprintf("Don't you dare indent this line incorrectly!\n");
}[6;5Hvoid
func4(a, b,[8;9Hc)
    int a;
    int b;
    int c;
{
}[15;5Hvoid
func5([17;9Hint a,[18;9Hint b)
{
}[22;5Hvoid
func6([24;9Hint a)
{
}

STARTTEST
:set cino&
:set cino+=l1
2kdd2j=][
ENDTEST

void func(void)
{
    int tab[] =
    {[38;9H1, 2, 3,[39;9H4, 5, 6};[41;5Hprintf("Indent this line correctly!\n");[43;5Hswitch (foo)
    {[45;9Hcase bar:[46;13Hprintf("bar");[47;13Hbreak;[48;9Hcase baz: {[49;13Hprintf("baz");[50;13Hbreak;[51;9H}[52;9Hcase quux:
printf("But don't break the indentation of this instruction\n");
break;
    }
}[28;1H[?12l[?25h
[?25l[57;1H:set ff=unix cpo-=A[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 35C written[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[29;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[31;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino&[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino+=l1[?25l[32;1H[?12l[?25h[30;1H[?25l[30;56r[56;1H
[1;57r[57;1H[K[30;1H[?12l[?25h

[?25l[57;1H22 lines to indent...23[7Cindented [57;19H[K[52;1H            printf("But don't break the indentation of this instruction\n");
            break;[32;1H[?12l[?25h
[?25l[57;1H[K[57;1H/^STARTTEST[1;56r[56;1H
[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino&[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 21C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd2j=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino&[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd2j=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h

[?25l
6 lines to indent...7[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hvoid func(void)[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[8M[1;57r[49;1H{
    cout << "a"[51;9H<< "b"[52;9H<< ") :"[53;9H<< "c";
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set com=s1:/*,m:*,ex:*/[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 38C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H]]3jofoo();[34m^[[m[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset com=s1:/*,m:*,ex:*/[?25l[56;1H[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[55;1Hvoid func(void)
{[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[54;5H/*[55;6H* This is a comment.[56;6H*/[?12l[?25h[?25l
[1m-- INSERT --[m[57;1H[K[1;56r[56;1H
[1;57r[56;5Hfoo();[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino&[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 21C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd2j=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino&[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd2j=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h

[?25l
8 lines to indent...9[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hvoid func(void)[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[10M[1;57r[47;1H{
    for (int i = 0; i < 10; ++i)[49;9Hif (i & 1) {[50;13Hfoo(1);[51;9H} else[52;13Hfoo(0);
    baz();
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=k2s,(0[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 27C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd3j=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=k2s,(0[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd3j=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hvoid func(void)[57;1H[K[56;1H[?12l[?25h[?25l
23 lines to indent...24[7Cindented [57;19H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H{[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[25M[1;57r[32;5Hif (condition1[33;13H&& condition2)[34;9Haction();
    function(argument1[36;14H&& argument2);[38;5Hif (c1 && (c2 ||[39;17Hc3))[40;9Hfoo;
    if (c1 &&[42;13H(c2 || c3))
    {
    }[46;5Hif (   c1[47;13H&& (      c2[48;23H|| c3))[49;9Hfoo;
    func( c1[51;11H&& (     c2[52;20H|| c3))[53;9Hfoo;
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=k2s,(s[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 27C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd3j=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=k2s,(s[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd3j=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hvoid func(void)[57;1H[K[56;1H[?12l[?25h[?25l
23 lines to indent...24[7Cindented [57;19H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H{[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[25M[1;57r[32;5Hif (condition1[33;13H&& condition2)[34;9Haction();
    function(argument1[36;9H&& argument2);[38;5Hif (c1 && (c2 ||[39;17Hc3))[40;9Hfoo;
    if (c1 &&[42;13H(c2 || c3))
    {
    }[46;5Hif (   c1[47;13H&& (      c2[48;17H|| c3))[49;9Hfoo;
    func(   c1[51;9H&& (      c2[52;13H|| c3))[53;9Hfoo;
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=k2s,(s,U1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 30C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd3j=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=k2s,(s,U1[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd3j=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hvoid func(void)[57;1H[K[56;1H[?12l[?25h[?25l
24 lines to indent...25[7Cindented [57;19H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H{[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[26M[1;57r[31;5Hif (condition1[32;13H&& condition2)[33;9Haction();
    function(argument1[35;9H&& argument2);[37;5Hif (c1 && (c2 ||[38;17Hc3))[39;9Hfoo;
    if (c1 &&[41;13H(c2 || c3))
    {
    }
    if (c123456789[45;13H&& (c22345[46;17H|| c3))[47;9Hprintf("foo\n");[49;5Hc = c1 &&[50;9H([51;13Hc2 ||[52;13Hc3[53;9H) && c4;
}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=k2s,(0,W4[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 30C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[56;1H
[1;57r[56;1H2kdd3j=][[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=k2s,(0,W4[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd3j=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hvoid func(void)[57;1H[K[56;1H[?12l[?25h[?25l
29 lines to indent...30[7Cindented [57;19H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H{[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[27m[23m[m[H[2J[1;5Hfunction(argument1[2;14H&& argument2);[4;5Hif (c1 && (c2 ||[5;17Hc3))[6;9Hfoo;
    if (c1 &&[8;13H(c2 || c3))
    {
    }
    if (c123456789[12;13H&& (c22345[13;17H|| c3))[14;9Hprintf("foo\n");[16;5Hif (   c1[17;13H&& (   c2[18;20H|| c3))[19;9Hfoo;[21;5Ha_long_line([22;9Hargument,[23;9Hargument);
    a_short_line(argument,[25;18Hargument);
}

STARTTEST
:set cino=k2s,u2
2kdd3j=][
ENDTEST

void func(void)
{
    if (condition1
    && condition2)
    action();
    function(argument1
    && argument2);[41;5Hif (c1 && (c2 ||
    c3))
    foo;
    if (c1 &&
    (c2 || c3))
    {
    }
    if (c123456789
    && (c22345
    || c3))
    printf("foo\n");
}

STARTTEST
:set cino=k2s,(0,w1
2kdd3j=][[28;1H[?12l[?25h
[?25l[57;1H:set ff=unix cpo-=A[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 27C written[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[29;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=k2s,u2[?25l[31;1H[?12l[?25h[29;1H[?25l[29;56r[56;1H
[1;57r[56;1HENDTEST[57;1H[K[29;1H[?12l[?25h


[?25l[57;1H18 lines to indent...19[7Cindented [57;19H[K[35;5H        && condition2)
        action();[38;5H        && argument2);[41;5H          c3))
        foo;[44;5H        (c2 || c3))[48;5H        && (c22345
              || c3))
        printf("foo\n");[32;1H[?12l[?25h
[?25l[57;1H[K[57;1H/^STARTTEST[53;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 30C written[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[54;1H[?12l[?25h[?25l


/ENDTEST/+-1[57;13H[K[57;1H[55;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=k2s,(0,w1[?25l[56;1H[?12l[?25h[54;1H[?25l2kdd3j=][[54;10H[K[55;1HENDTEST[55;8H[K[56;1H[K[54;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hvoid func(void)[57;1H[K[56;1H[?12l[?25h[?25l
27 lines to indent...28[7Cindented [57;19H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H{[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[27m[23m[m[H[2J[1;13H&& condition2)[2;9Haction();
    function(argument1[4;14H&& argument2);[6;5Hif (c1 && (c2 ||[7;17Hc3))[8;9Hfoo;
    if (c1 &&[10;13H(c2 || c3))
    {
    }
    if (c123456789[14;13H&& (c22345[15;17H|| c3))[16;9Hprintf("foo\n");[18;5Hif (   c1[19;13H&& (      c2[20;17H|| c3))[21;9Hfoo;
    func(   c1[23;10H&& (      c2[24;14H|| c3))[25;9Hfoo;
}

STARTTEST
:set cino=k2,(s
2kdd3j=][
ENDTEST

void func(void)
{
    if (condition1[36;7H&& condition2)[37;9Haction();
    function(argument1[39;9H&& argument2);[41;5Hif (c1 && (c2 ||[42;11Hc3))[43;9Hfoo;
    if (c1 &&[45;7H(c2 || c3))
    {
    }
}

STARTTEST
:set cino=N-s
/^NAMESPACESTART
=/^NAMESPACEEND
ENDTEST

NAMESPACESTART[28;1H[?12l[?25h
[?25l[57;1H:set ff=unix cpo-=A[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 26C written[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[29;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=k2,(s[?25l[31;1H[?12l[?25h[29;1H[?25l[29;56r[56;1H
[1;57r[56;1H/* valid namespaces with normal indent */[57;1H[K[29;1H[?12l[?25h


[?25l[57;1H14 lines to indent...15[7Cindented [57;19H[K[32;1H[?12l[?25h
[?25l[57;1H[K[57;1H/^STARTTEST[49;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 47C written[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[50;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[52;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[53;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=N-s[?25l[53;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^NAMESPACESTART[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^NAMESPACEEND[?25l61 lines to indent...5062[7Cindented [57;19H[K[55;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[27m[23m[m[H[2J[1;1H}

/* invalid namespaces use block indent */
namespace test test2 {
    111111111111111111111;
}
namespace11111111111 {
    111111111111;
}
namespace() {
    1111111111111;
}
namespace()
{
    111111111111111111;
}
namespace test test2
{
    1111111111111111111;
}
namespace111111111
{
    111111111111111111;
}
NAMESPACEEND


STARTTEST
:set cino=j1,J1
/^JSSTART
=/^JSEND
ENDTEST

JSSTART
var bar = {
foo: {
that: this,
some: ok,
},
"bar":{
a : 2,
b: "123abc",
x: 4,
"y": 5
}
}
JSEND

STARTTEST
:set cino=j1,J1
/^JSSTART
=/^JSEND
ENDTEST

JSSTART
var foo = [[28;1H[?12l[?25h
[?25l[57;1H:set ff=unix cpo-=A[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 35C written[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[29;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[31;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=j1,J1[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^JSSTART[?25l[34;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^JSEND[?25l12 lines to indent...13[7Cindented [57;19H[K[36;1H    foo: {
        that: this,
        some: ok,
    },
    "bar":{
        a : 2,
        b: "123abc",
        x: 4,
        "y": 5
    }[34;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[49;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 35C written[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[50;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[52;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[53;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=j1,J1[?25l[53;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^JSSTART[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^JSEND[?25l5 lines to indent...6[7Cindented [57;18H[K[55;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[1;56r[1;1H[7M[1;57r[50;5H1,
    2,
    3
];
JSEND

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=j1,J1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 35C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1H/^JSSTART
=/^JSEND[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=j1,J1[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^JSSTART[?25l[1;56r[1;1H[2M[1;57r[56;1HJSSTART[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^JSEND[?25l7 lines to indent...8[7Cindented [57;18H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[1;56r[1;1H[10M[1;57r[47;1Hfunction bar() {
    var foo = [[49;9H1,[50;9H2,[51;9H3
    ];
}
JSEND

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=j1,J1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 35C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1H/^JSSTART
=/^JSEND[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=j1,J1[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^JSSTART[?25l[1;56r[1;1H[2M[1;57r[56;1HJSSTART[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^JSEND[?25l58 lines to indent...509[7Cindented [57;19H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[27m[23m[m[H[2J[2;5H$.fn[class_name]=function() {[4;9Hvar _arguments=arguments;[5;9Hreturn this.each(function(){[7;13Hvar options=$(this).data(class_name+'_public');[8;13Hif (!options) {[9;17Hinit.apply(this,_arguments);[11;13H} else {[12;17Hvar method=public_method[_arguments[0]];[14;17Hif (typeof(method)!='function') {[15;21Hconsole.log(class_name+' has no method "'+_arguments[0]+'"'))[16;1H;[17;21Hreturn false;[18;17H}[19;17H_arguments[0]=options;[20;17Hmethod.apply(this,_arguments);[21;13H}[22;9H});
    }

})(jQuery);
JSEND

STARTTEST
:set cino=j1,J1
/^JSSTART
=/^JSEND
ENDTEST

JSSTART
function init(options) {
$(this).data(class_name+'_public',$.extend({},{
foo: 'bar',
bar: 2,
foobar: [
1,
2,
3
],
callback: function(){
return true;
}
}, options||{}));
}
JSEND

STARTTEST
:set cino=j1,J1
/^JSSTART
=/^JSEND
ENDTEST[28;1H[?12l[?25h
[?25l[57;1H:set ff=unix cpo-=A[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 35C written[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[29;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[31;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=j1,J1[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^JSSTART[?25l[34;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^JSEND[?25l14 lines to indent...15[7Cindented [57;19H[K[36;1H    $(this).data(class_name+'_public',$.extend({},{
        foo: 'bar',
        bar: 2,
        foobar: [
  [10C1,
  [10C2,
 [11C3
        ],
        callback: function(){
            return true;
 [7C}
    }, options||{}));[34;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[51;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 35C written[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[52;1H[?12l[?25h[?25l[57;1H/ENDTEST/+-1[57;13H[K[57;1H[54;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=j1,J1[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^JSSTART[?25l[1;56r[56;1H
[1;57r[56;1HJSSTART[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^JSEND[?25l16 lines to indent...17[7Cindented [57;19H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[1;56r[1;1H[19M[1;57r[38;1H(function($){
    function init(options) {[40;9H$(this).data(class_name+'_public',$.extend({},{[41;13Hfoo: 'bar',[42;13Hbar: 2,[43;13Hfoobar: [[44;17H1,[45;17H2,[46;17H3[47;13H],[48;13Hcallback: function(){[49;17Hreturn true;[50;13H}[51;9H}, options||{}));
    }
})(jQuery);
JSEND

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set cino=j1,J1,+2[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3L, 38C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST/+-1[57;13H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1H/^JSSTART
=/^JSEND[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HENDTEST[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cino=j1,J1,+2[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^JSSTART[?25l[1;56r[1;1H[2M[1;57r[56;1HJSSTART[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^JSEND[?25l149 lines to indent...10050 lines to indent... 150 lines indented [57;20H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[27m[23m[m[H[2J[1;7H// ],[2;7H2,[3;7H3
    ];
}

// 8
var x = [
  (function(){[10;7Hvar a,[11;7Hb,[12;7Hc,[13;7Hd,[14;7He,[15;7Hf,[16;7Hg,[17;7Hh,[18;7Hi;
  })
];

// 9
var a = [
  0 +
  5 *
  9 *
  'a',
  'b',
  0 +
  5 *
  9 *
  'c',
  'd',
  'e',
  'f',
  'g',
  'h',
  'i'
];

// 10
var a,
    b,
    c,
    d,
    e,
    f,
    g,
    h,
    i;
JSEND

STARTTEST
:g/^STARTTEST/.,/^ENDTEST/d
:1;/start of AUTO/,$wq! test.out
ENDTEST[53;1H[?12l[?25h
[?25l


:set ff=unix cpo-=A[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2L, 61C written[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[54;1H[?12l[?25h[?25l


/ENDTEST/+-1[57;13H[K[57;1H[53;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hg/^STARTTEST/.,/^ENDTEST/d[?25l221 fewer lines[57;16H[K[1;5Hvar a = [[2;7H// [[3;7H0,
      // 1
      // ],[6;7H2,
      3
    ];[8;7H[K[9;1H}[9;3H[K[10;7H[K[11;1H// 8[11;7H[K[12;1Hvar x = [
  (function(){[14;7Hvar a,[15;7Hb[16;7Hc[17;7Hd[18;7He,
      f,
      g,[21;7Hh,
      i;
  })[23;5H[K[24;1H];[24;3H[K[25;3H[K[26;1H// 9[26;5H[K[27;1Hvar a = [
  0 +[28;6H[K[29;3H5 *
  9
  'a',
  'b
  0 +[33;6H[K[34;3H5 *[34;6H[K[35;3H9 *[35;6H[K[36;4Hc
  'd
  'e',
  'f',
  'g',
  'h',
  'i'[42;6H[K[43;1H];[43;5H[K[44;5H[K[45;1H// 10[45;6H[K[46;1Hvar a
    b
    c
    d
    e,
    f,
    g,
    h,[53;7H[K[54;1H    i;[54;7H[K[55;1HJSEND[55;6H[K[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1;/start of AUTO/,$wq! test.out[?25l"test.out" [57;12H[K[57;12H[New] 2062L, 19815C written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test3 = test61; then \
#	  if diff test.out test3.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test3.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test3.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test4.failed test.ok test.out X* viminfo
cp test4.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test4.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test4.in" 34 lines, 960 characters[1;1HTest for autocommand that changes current buffer on BufEnter event.
Check if modelines are interpreted for the correct buffer.

STARTTEST
:so small.vim
:set nocompatible viminfo+=nviminfo
:au BufEnter Xxx brew
/start of
:.,/end of/w! Xxx   " write test file Xxx
:set ai modeline modelines=3
:sp Xxx[13C" split to Xxx, autocmd will do :brew
G?this is a
othis should be auto-indented[34m^[[m
:[19C" Append text with autoindent to this file
:au! BufEnter Xxx
:buf Xxx[12C" go to Xxx, no autocmd anymore
G?this is a
othis should be in column 1[34m^[[m:wq " append text without autoindent to Xxx
G:r Xxx[13C" include Xxx in the current file
:set fo+=r[10C" issue #57 do not move cursor on <c-o> when autoindent is set
Go# abcdef[34m^[[m2hi
[34m^O[md0[34m^[[mo# abcdef[34m^[[m2hi[34m^O[md0[34m^[[m:
:?startstart?,$w! test.out
:qa!
ENDTEST

startstart
start of test file Xxx
vim: set noai :[30;9Hthis is a test[31;9Hthis is a test[32;9Hthis is a test[33;9Hthis is a test
end of test file Xxx
[1m[34m~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for autocommand that changes current buffer on BufEnter event.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 20 lines, 678 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[25;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[26;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[26;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocompatible viminfo+=nviminfo[?25l[26;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufEnter Xxx brew[?25l[26;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hstart of[?25l[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,/end of/w! Xxx   " write test file Xxx[?25l"Xxx" [57;7H[K[57;7H[New] 7L, 124C written[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ai modeline modelines=3[?25l[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsp Xxx             " split to Xxx, autocmd will do :brew[?25l"Xxx" [57;7H[K[57;7H7L, 124C[28;1H[1m[7mtest4.in                                                                               [m[29;1H:au! BufEnter Xxx
:buf Xxx            " go to Xxx, no autocmd anymore
G?this is a[31;12H[K[32;1Hothis should be in column 1[34m^[[m:wq " append text without autoindent to Xxx
G:r Xxx             " include Xxx in the current file
:set fo+=r          " issue #57 do not move cursor on <c-o> when autoindent is set
Go# abcdef[34m^[[m2hi[35;16H[K[36;1H[34m^O[md0[34m^[[mo# abcdef[34m^[[m2hi[34m^O[md0[34m^[[m:[36;28H[K[37;1H:?startstart?,$w! test.out[37;27H[K[38;1H:qa![38;5H[K[39;1HENDTEST[39;8H[K[40;1H[K[41;1Hstartstart[41;11H[K[42;1Hstart of test file Xxx[42;23H[K[43;1Hvim: set noai :[43;16H[K[44;1H        this is a test[44;23H[K[45;1H        this is a test[45;23H[K[46;1H        this is a test[46;23H[K[47;1H        this is a test[47;23H[K[48;1Hend of test file Xxx[48;21H[K[56;1H[7mtest4.in                                                                               [m[57;2Htest4.in" line 1 of 34 --2%-- col 1[1;1H[?12l[?25h[?25l[1;27r[1;1H[7M[1;57r[21;1Hstart of test file Xxx
vim: set noai :[23;9Hthis is a test[24;9Hthis is a test[25;9Hthis is a test[26;9Hthis is a test
end of test file Xxx[57;1H[K[27;1H[?12l[?25h[?25l[57;1H?[?12l[?25hthis is a[?25l[26;9H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;1H[K[27;1H        this should be auto-indented[28;10H[1m[7m[+][48;55r[m[48;1H[L[1;57r[48;9Hthis should be auto-indented[56;10H[7m[+][27;36H[?12l[?25h[?25l[1;27r[m[27;1H
[1;57r[27;1Hend of test file Xxx[?12l[?25h[?25l[57;1H:[?12l[?25h                   " Append text with autoindent to this file[?25l[27;20H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau! BufEnter Xxx[?25l[27;20H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbuf Xxx            " go to Xxx, no autocmd anymore[?25l"Xxx" [57;7H[K[57;7H7L, 124C[1;1Hstart of test file Xxx[1;23H[K[2;1Hvim: set noai :[2;16H[K[3;1H        this is a test[3;23H[K[4;1H        this is a test
        this is a test[5;23H[K[6;1H [7Cthis is a test[6;23H[K[7;1Hend of test file Xxx
[1m[34m~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7mXxxt          [1;1H[?12l[?25h[7;1H[?25l[m[57;1H[K[57;1H?[?12l[?25hthis is a[?25l[6;9H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;1H[K[7;27r[7;1H[L[1;57r[7;1Hthis should be in column 1[28;5H[1m[7m[+][7;26H[?12l[?25h[?25l[57;1H[m:[?12l[?25hwq " append text without autoindent to Xxx[?25l"Xxx[57;7H[K[57;7H8L, 151C written[1;1HTest for autocommand that changes current buffer on BufEnter event.
Check if modelines are interpreted for the correct buffer.[3;9H[K[4;1HSTARTTEST[4;10H[K[5;1H:so small.vim[5;14H[K[6;1H:set nocompatible viminfo+=nviminfo
:au BufEnter Xxx brew[7;22H[K[8;1H/start of[8;10H[K[9;1H:.,/end of/w! Xxx   " write test file Xxx[9;42H[K[10;1H:set ai modeline modelines=3[10;29H[K[11;1H:sp Xxx             " split to Xxx, autocmd will do :brew[11;58H[K[12;1HG?this is a[12;12H[K[13;1Hothis should be auto-indented[34m^[[m[13;32H[K[14;1H:                   " Append text with autoindent to this file[14;63H[K[15;1H:au! BufEnter Xxx[15;18H[K[16;1H:buf Xxx            " go to Xxx, no autocmd anymore[16;52H[K[17;1HG?this is a[17;12H[K[18;1Hothis should be in column 1[34m^[[m:wq " append text without autoindent to Xxx[18;73H[K[19;1HG:r Xxx             " include Xxx in the current file[19;54H[K[20;1H:set fo+=r          " issue #57 do not move cursor on <c-o> when autoindent is set[20;83H[K[21;1HGo# abcdef[34m^[[m2hi[21;16H[K[22;1H[34m^O[md0[34m^[[mo# abcdef[34m^[[m2hi[34m^O[md0[34m^[[m:[22;28H[K[23;1H:?startstart?,$w! test.out[23;27H[K[24;1H:qa![24;5H[K[25;1HENDTEST[25;8H[K[26;1H[K[27;1Hstartstart[27;11H[K[28;1Hstart of test file Xxx[28;23H[K[29;1Hvim: set noai :[29;16H[K[30;1H        this is a test[30;23H[K[31;1H        this is a test
        this is a test[32;23H[K[33;1H        this is a test[33;23H[K[34;1H        this should be auto-indented[34;37H[K[35;1Hend of test file Xxx
[1m[34m~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [56;1H~                                                                                      [28;1H[?12l[?25h[35;1H[?25l[m[57;1H[K[57;1H:[?12l[?25hr Xxx             " include Xxx in the current file[?25l"Xxx" [57;20H[K[57;7H8L, 151C[36;1Hstart of test file Xxx[36;23H[K[37;1Hvim: set noai :[37;16H[K[38;1H        this is a test[38;23H[K[39;1H        this is a test[39;23H[K[40;1H        this is a test[40;23H[K[41;1H        this is a test[41;23H[K[42;1Hthis should be in column 1[42;27H[K[43;1Hend of test file Xxx[43;21H[K[36;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fo+=r          " issue #57 do not move cursor on <c-o> when autoindent is set[?25l[36;1H[?12l[?25h[43;1H[?25l[57;1H[1m-- INSERT --[m[57;21H[K[57;1H[K[44;1H# abcdef[44;9H[K[44;8H[?12l[?25h[?25l[57;1H[1m-- INSERT ---- (insert)- --[m[44;6H[K[45;1H# def[45;6H[K[45;3H[?12l[?25h[?25l[57;4H[1mINSERTt --[m[57;13H[K[45;1Hdef[45;4H[K[45;1Ho[?12l[?25hd[57;1H[K[?25l[45;1H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;1H[K[46;1H# abcdef[46;9H[K[46;8H[?12l[?25h[?25l[57;1H[1m-- INSERT ---- (insert)- --[46;6H[?12l[?25h[?25l[57;4HINSERTt --[m[57;13H[K[46;1Hdef[46;4H[K[46;1H:[?12l[?25hd[57;1H[K[?25l[46;1H[?12l[?25h[?25l[57;1H:[46;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h?startstart?,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New] 20L, 330C written[46;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test4 = test61; then \
#	  if diff test.out test4.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test4.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test4.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test5.failed test.ok test.out X* viminfo
cp test5.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test5.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test5.in" 29 lines, 949 characters[1;1HTest for autocommand that deletes the current buffer on BufLeave event.
Also test deleting the last buffer, should give a new, empty buffer.

STARTTEST
:so small.vim
:au BufLeave Xxx bwipe
/start of
:.,/end of/w! Xxx[15C" write test file Xxx
:sp Xxx[25C" split to Xxx
:bwipe[26C" delete buffer Xxx, now we're back here
G?this is a
othis is some more text[34m^[[m
:[31C" Append some text to this file
:?start?,$w! test.out[11C" Write current file contents
:bwipe test.out[17C" delete alternate buffer
:au bufleave test5.in bwipe
:bwipe![25C" delete current buffer, get an empty one
ithis is another test line[34m^[[m:w >>test.out
:[31C" append an extra line to the output file
:qa!
ENDTEST

start of test file Xxx
vim: set noai :[25;9Hthis is a test[26;9Hthis is a test[27;9Hthis is a test[28;9Hthis is a test
end of test file Xxx
[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for autocommand that deletes the current buffer on BufLeave event.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 16 lines, 664 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[21;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[22;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[22;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufLeave Xxx bwipe[?25l[22;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hstart of[?25l[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,/end of/w! Xxx               " write test file Xxx[?25l"Xxx" [57;7H[K[57;7H[New File] 7 lines, 124 characters written[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsp Xxx                         " split to Xxx[?25l"Xxx" [57;7H[K[57;7H7 lines, 124 characters[1;1Hstart of test file Xxx[1;23H[K[2;1Hvim: set noai :[2;16H[K[3;9Hthis is a test
        this is a test
        this is a test
        this is a test
end of test file Xxx
[1m[34m~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7mXxx                                                                                    [m[29;1Hothis is some more text[34m^[[m
:                               " Append some text to this file[30;64H[K[31;1H:?start?,$w! test.out           " Write current file contents[31;62H[K[32;1H:bwipe test.out                 " delete alternate buffer[32;58H[K[33;1H:au bufleave test5.in bwipe[33;28H[K[34;1H:bwipe!                         " delete current buffer, get an empty one[34;74H[K[35;1Hithis is another test line[34m^[[m:w >>test.out[35;42H[K[36;1H:                               " append an extra line to the output file[36;74H[K[37;1H:qa![37;5H[K[38;1HENDTEST[38;8H[K[39;1H[K[40;1Hstart of test file Xxx[40;23H[K[41;1Hvim: set noai :[41;16H[K[42;1H        this is a test[42;23H[K[43;1H        this is a test[43;23H[K[44;1H        this is a test[44;23H[K[45;1H        this is a test[45;23H[K[46;1Hend of test file Xxx[46;21H[K[56;1H[7mtest5.in                                                                               [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hbwipe                          " delete buffer Xxx, now we're back here[?25l[1;1HTest for autocommand that deletes the current buffer on BufLeave event.
Also test deleting the last buffer, should give a new, empty buffer.[3;9H[K[4;1HSTARTTEST[4;10H[K[5;1H:so small.vim[5;14H[K[6;1H:au BufLeave Xxx bwipe
/start of[7;10H[K[8;1H:.,/end of/w! Xxx               " write test file Xxx[8;54H[K[9;1H:sp Xxx                         " split to Xxx[9;47H[K[10;1H:bwipe                          " delete buffer Xxx, now we're back here[10;73H[K[11;1HG?this is a[11;12H[K[12;1Hothis is some more text[34m^[[m[12;26H[K[13;1H:                               " Append some text to this file[13;64H[K[14;1H:?start?,$w! test.out           " Write current file contents[14;62H[K[15;1H:bwipe test.out                 " delete alternate buffer[15;58H[K[16;1H:au bufleave test5.in bwipe[16;28H[K[17;1H:bwipe!                         " delete current buffer, get an empty one[17;74H[K[18;1Hithis is another test line[34m^[[m:w >>test.out[18;42H[K[19;1H:                               " append an extra line to the output file[19;74H[K[20;1H:qa![20;5H[K[21;1HENDTEST[21;8H[K[22;1H[K[23;1Hstart of test file Xxx[23;23H[K[24;1Hvim: set noai :[24;16H[K[25;1H        this is a test[25;23H[K[26;1H        this is a test[26;23H[K[27;1H        this is a test[27;23H[K[28;1H        this is a test[28;23H[K[29;1Hend of test file Xxx[29;21H[K[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [56;1H~                                                                                      [m[57;1H"test5.in" line 23 of 29 --79%-- col 1[57;39H[K[23;1H[?12l[?25h[29;1H[?25l[57;1H[K[57;1H?[?12l[?25hthis is a[?25l[28;9H[?12l[?25h[?25l[29;56r[29;1H[L[1;57r[29;1Hthis is some more text[57;1H[K[29;22H[?12l[?25h[30;20H[?25l[57;1H:[?12l[?25h                               " Append some text to this file[?25l[30;20H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h?start?,$w! test.out           " Write current file contents[?25l"test.out" [57;12H[K[57;12H[New File] 8 lines, 147 characters written[30;20H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe test.out                 " delete alternate buffer[?25l[30;20H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau bufleave test5.in bwipe[?25l[30;20H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe!                         " delete current buffer, get an empty one[?25l[1m[37m[41mError detected while processing BufLeave Auto commands for "test5.in":[m[57;71H[K[57;1H
[1m[37m[41mE89: No write since last change for buffer 1 (add ! to override)[m
[32mPress ENTER or type command to continue[?12l[?25h[m[1;1H[2L[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25lthis is another test line[?12l[?25h[?25l[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 26 characters appended[1;25H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h                               " append an extra line to the output file[?25l[1;25H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test5 = test61; then \
#	  if diff test.out test5.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test5.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test5.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test7.failed test.ok test.out X* viminfo
cp test7.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test7.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test7.in" 26 lines, 675 characters[1;1HTest for autocommand that changes the buffer list, when doing ":ball".

STARTTEST
:so small.vim
/^start of
A1[34m^[[m:.,/end of/w! Xxx1   " write test file Xxx1
:sp Xxx1
:close
$r2:.,/end of/w! Xxx2    " write test file Xxx2
:sp Xxx2
:close
$r3:.,/end of/w! Xxx3    " write test file Xxx3
:sp Xxx3
:close
:au BufReadPost Xxx2 bwipe
$r4:ball[17C" open window for all args, close Xxx2
:.,$w! test.out[10C" Write contents of this file
[34m^W^W[m:w >>test.out[8C" Append contents of second window (Xxx1)
[34m^W^W[m:/^start of/,$w >>test.out   " Append contents of last window (this file)
:qa!
ENDTEST

start of test file Xxx[24;9Hthis is a test[25;9Hthis is a test
end of test file Xxx
[1m[34m~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for autocommand that changes the buffer list, when doing ":ball".[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 17 lines, 508 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[21;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[22;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[22;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^start of[?25l[23;1H[?12l[?25h[?25l[22C1[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,/end of/w! Xxx1   " write test file Xxx1[?25l"Xxx1" [57;9H[K[57;8H[New File] 4 lines, 77 characters written[23;23H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsp Xxx1[?25l"Xxx1" [57;8H[K[57;8H4 lines, 77 characters[1;1Hstart of test file Xxx1[1;24H[K[2;9Hthis is a test
        this is a test
end of test file Xxx
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [m[28;1H[1m[7mXxx1                                                                                   [m[29;1H$r3:.,/end of/w! Xxx3    " write test file Xxx3[29;48H[K[30;1H:sp Xxx3[30;9H[K[31;1H:close[31;7H[K[32;1H:au BufReadPost Xxx2 bwipe[32;27H[K[33;1H$r4:ball                 " open window for all args, close Xxx2[33;64H[K[34;1H:.,$w! test.out          " Write contents of this file[34;55H[K[35;1H[34m^W^W[m:w >>test.out        " Append contents of second window (Xxx1)[35;67H[K[36;1H[34m^W^W[m:/^start of/,$w >>test.out   " Append contents of last window (this file)[36;78H[K[37;1H:qa![37;5H[K[38;1HENDTEST[38;8H[K[39;1H[K[40;1Hstart of test file Xxx1[40;24H[K[41;1H        this is a test[41;23H[K[42;1H        this is a test[42;23H[K[43;1Hend of test file Xxx[43;21H[K[56;1H[7mtest7.in [+]                                                                           [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hclose[?25l[1;1HTest for autocommand that changes the buffer list, when doing ":ball".[2;9H[K[3;1HSTARTTEST[3;10H[K[4;1H:so small.vim[4;14H[K[5;1H/^start of[5;11H[K[6;1HA1[34m^[[m:.,/end of/w! Xxx1   " write test file Xxx1[6;48H[K[7;1H:sp Xxx1[7;9H[K[8;1H:close[8;7H[K[9;1H$r2:.,/end of/w! Xxx2    " write test file Xxx2[9;48H[K[10;1H:sp Xxx2[10;9H[K[11;1H:close[11;7H[K[12;1H$r3:.,/end of/w! Xxx3    " write test file Xxx3[12;48H[K[13;1H:sp Xxx3[13;9H[K[14;1H:close[14;7H[K[15;1H:au BufReadPost Xxx2 bwipe[15;27H[K[16;1H$r4:ball                 " open window for all args, close Xxx2[16;64H[K[17;1H:.,$w! test.out          " Write contents of this file[17;55H[K[18;1H[34m^W^W[m:w >>test.out        " Append contents of second window (Xxx1)[18;67H[K[19;1H[34m^W^W[m:/^start of/,$w >>test.out   " Append contents of last window (this file)[19;78H[K[20;1H:qa![20;5H[K[21;1HENDTEST[21;8H[K[22;1H[K[23;1Hstart of test file Xxx1[23;24H[K[24;1H        this is a test[24;23H[K[25;1H        this is a test[25;23H[K[26;1Hend of test file Xxx[26;21H[K[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [56;1H~                                                                                      [23;23H[?12l[?25h[?25l[m2[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,/end of/w! Xxx2    " write test file Xxx2[?25l"Xxx2" [57;9H[K[57;8H[New File] 4 lines, 77 characters written[23;23H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsp Xxx2[?25l"Xxx2" [57;8H[K[57;8H4 lines, 77 characters[1;1Hstart of test file Xxx2[1;24H[K[2;9Hthis is a test
        this is a test
end of test file Xxx
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [m[28;1H[1m[7mXxx2                                                                                   [m[29;1H$r3:.,/end of/w! Xxx3    " write test file Xxx3[29;48H[K[30;1H:sp Xxx3[30;9H[K[31;1H:close[31;7H[K[32;1H:au BufReadPost Xxx2 bwipe[32;27H[K[33;1H$r4:ball                 " open window for all args, close Xxx2[33;64H[K[34;1H:.,$w! test.out          " Write contents of this file[34;55H[K[35;1H[34m^W^W[m:w >>test.out        " Append contents of second window (Xxx1)[35;67H[K[36;1H[34m^W^W[m:/^start of/,$w >>test.out   " Append contents of last window (this file)[36;78H[K[37;1H:qa![37;5H[K[38;1HENDTEST[38;8H[K[39;1H[K[40;1Hstart of test file Xxx2[40;24H[K[41;1H        this is a test[41;23H[K[42;1H        this is a test[42;23H[K[43;1Hend of test file Xxx[43;21H[K[56;1H[7mtest7.in [+]                                                                           [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hclose[?25l[1;1HTest for autocommand that changes the buffer list, when doing ":ball".[2;9H[K[3;1HSTARTTEST[3;10H[K[4;1H:so small.vim[4;14H[K[5;1H/^start of[5;11H[K[6;1HA1[34m^[[m:.,/end of/w! Xxx1   " write test file Xxx1[6;48H[K[7;1H:sp Xxx1[7;9H[K[8;1H:close[8;7H[K[9;1H$r2:.,/end of/w! Xxx2    " write test file Xxx2[9;48H[K[10;1H:sp Xxx2[10;9H[K[11;1H:close[11;7H[K[12;1H$r3:.,/end of/w! Xxx3    " write test file Xxx3[12;48H[K[13;1H:sp Xxx3[13;9H[K[14;1H:close[14;7H[K[15;1H:au BufReadPost Xxx2 bwipe[15;27H[K[16;1H$r4:ball                 " open window for all args, close Xxx2[16;64H[K[17;1H:.,$w! test.out          " Write contents of this file[17;55H[K[18;1H[34m^W^W[m:w >>test.out        " Append contents of second window (Xxx1)[18;67H[K[19;1H[34m^W^W[m:/^start of/,$w >>test.out   " Append contents of last window (this file)[19;78H[K[20;1H:qa![20;5H[K[21;1HENDTEST[21;8H[K[22;1H[K[23;1Hstart of test file Xxx2[23;24H[K[24;1H        this is a test[24;23H[K[25;1H        this is a test[25;23H[K[26;1Hend of test file Xxx[26;21H[K[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [56;1H~                                                                                      [23;23H[?12l[?25h[?25l[m3[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,/end of/w! Xxx3    " write test file Xxx3[?25l"Xxx3" [57;9H[K[57;8H[New File] 4 lines, 77 characters written[23;23H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsp Xxx3[?25l"Xxx3" [57;8H[K[57;8H4 lines, 77 characters[1;1Hstart of test file Xxx3[1;24H[K[2;9Hthis is a test
        this is a test
end of test file Xxx
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [m[28;1H[1m[7mXxx3                                                                                   [m[29;1H$r3:.,/end of/w! Xxx3    " write test file Xxx3[29;48H[K[30;1H:sp Xxx3[30;9H[K[31;1H:close[31;7H[K[32;1H:au BufReadPost Xxx2 bwipe[32;27H[K[33;1H$r4:ball                 " open window for all args, close Xxx2[33;64H[K[34;1H:.,$w! test.out          " Write contents of this file[34;55H[K[35;1H[34m^W^W[m:w >>test.out        " Append contents of second window (Xxx1)[35;67H[K[36;1H[34m^W^W[m:/^start of/,$w >>test.out   " Append contents of last window (this file)[36;78H[K[37;1H:qa![37;5H[K[38;1HENDTEST[38;8H[K[39;1H[K[40;1Hstart of test file Xxx3[40;24H[K[41;1H        this is a test[41;23H[K[42;1H        this is a test[42;23H[K[43;1Hend of test file Xxx[43;21H[K[56;1H[7mtest7.in [+]                                                                           [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hclose[?25l[1;1HTest for autocommand that changes the buffer list, when doing ":ball".[2;9H[K[3;1HSTARTTEST[3;10H[K[4;1H:so small.vim[4;14H[K[5;1H/^start of[5;11H[K[6;1HA1[34m^[[m:.,/end of/w! Xxx1   " write test file Xxx1[6;48H[K[7;1H:sp Xxx1[7;9H[K[8;1H:close[8;7H[K[9;1H$r2:.,/end of/w! Xxx2    " write test file Xxx2[9;48H[K[10;1H:sp Xxx2[10;9H[K[11;1H:close[11;7H[K[12;1H$r3:.,/end of/w! Xxx3    " write test file Xxx3[12;48H[K[13;1H:sp Xxx3[13;9H[K[14;1H:close[14;7H[K[15;1H:au BufReadPost Xxx2 bwipe[15;27H[K[16;1H$r4:ball                 " open window for all args, close Xxx2[16;64H[K[17;1H:.,$w! test.out          " Write contents of this file[17;55H[K[18;1H[34m^W^W[m:w >>test.out        " Append contents of second window (Xxx1)[18;67H[K[19;1H[34m^W^W[m:/^start of/,$w >>test.out   " Append contents of last window (this file)[19;78H[K[20;1H:qa![20;5H[K[21;1HENDTEST[21;8H[K[22;1H[K[23;1Hstart of test file Xxx3[23;24H[K[24;1H        this is a test[24;23H[K[25;1H        this is a test[25;23H[K[26;1Hend of test file Xxx[26;21H[K[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [56;1H~                                                                                      [23;23H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hau BufReadPost Xxx2 bwipe[?25l[23;23H[?12l[?25h[?25l4[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hball                 " open window for all args, close Xxx2[?25l"Xxx1"[57;23H[K[57;8H4 lines, 77 characters
"Xxx2" 4 lines, 77 characters
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h.,$w! test.out          " Write contents of this file[?25l"test.out" [57;12H[K[57;12H[New File] 4 lines, 77 characters written
[32mPress ENTER or type command to continue[?12l[?25h[27m[23m[m[H[2J[?25l[1;1H$r3:.,/end of/w! Xxx3    " write test file Xxx3
:sp Xxx3
:close
:au BufReadPost Xxx2 bwipe
$r4:ball[17C" open window for all args, close Xxx2
:.,$w! test.out[10C" Write contents of this file
[34m^W^W[m:w >>test.out[8C" Append contents of second window (Xxx1)
[34m^W^W[m:/^start of/,$w >>test.out   " Append contents of last window (this file)
:qa!
ENDTEST

start of test file Xxx4[13;9Hthis is a test[14;9Hthis is a test
end of test file Xxx
[1m[34m~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7mtest7.in [+]                                                                           [m[29;1Hstart of test file Xxx1[30;9Hthis is a test[31;9Hthis is a test
end of test file Xxx
[1m[34m~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7mXxx1                                                                                   [12;23H[?12l[?25h[28;1Htest7.in [+][m[1m[7m [m[7m                                                                           [m[56;1H[1m[7mXxx1                                                                                   [29;1H[?25l[57;1H[m:[?12l[?25hw >>test.out        " Append contents of second window (Xxx1)[?25l"test.out" [57;12H[K[57;12H4 lines, 77 characters appended[29;1H[?12l[?25h[28;1H[1m[7mtest7.in [+]                                                                           [m[56;1H[7mXxx1[m[1m[7m [m[7m                                                                                   [12;23H[?25l[m[57;1H[K[57;1H:[?12l[?25h/^start of/,$w >>test.out   " Append contents of last window (this file)[?25l[31msearch hit BOTTOM, continuing at TOP[m[57;37H[K[57;1H"test.out" [57;12H[K[57;12H4 lines, 77 characters appended[12;23H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test7 = test61; then \
#	  if diff test.out test7.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test7.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test7.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test8.failed test.ok test.out X* viminfo
cp test8.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test8.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test8.in" 46 lines, 1236 characters[1;1HTest for BufWritePre autocommand that deletes or unloads the buffer.
Test for BufUnload autocommand that unloads all other buffers.

STARTTEST
:so small.vim
:au BufWritePre Xxx1 bunload
:au BufWritePre Xxx2 bwipe
/^start of
A1[34m^[[m:.,/end of/w! Xxx1  " write test file Xxx1
$r2:.,/end of/w! Xxx2   " write test file Xxx2
:e! Xxx2[16C" edit Xxx2
:bdel test8.in[10C" delete this file from the buffer list
:e Xxx1[17C" edit Xxx1
:w[22C" write it, will unload it and give an error msg
:w! test.out[12C" Write contents of this file
:e! Xxx2[16C" start editing Xxx2
:bwipe test.out[9C" remove test.out from the buffer list
:w[22C" write it, will delete the buffer and give an error msg
:w >>test.out[11C" Append contents of this file
:au! BufWritePre
:func CloseAll()
  let i = 0
  while i <= bufnr('$')
    if i != bufnr('%') && bufloaded(i)[25;7Hexe  i . "bunload"
    endif
    let i += 1
  endwhile
endfunc
:func WriteToOut()
  edit! test.out
  $put ='VimLeave done'
  write
endfunc
:set viminfo='100,nviminfo
:au BufUnload * call CloseAll()
:au VimLeave * call WriteToOut()
:e small.vim
:sp mbyte.vim
:q
:qa!
ENDTEST

start of Xxx[45;9Htest
end of Xxx
[1m[34m~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for BufWritePre autocommand that deletes or unloads the buffer.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 37 lines, 1054 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[42;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufWritePre Xxx1 bunload[?25l[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufWritePre Xxx2 bwipe[?25l[43;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^start of[?25l[44;1H[?12l[?25h[?25l[12C1[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,/end of/w! Xxx1  " write test file Xxx1[?25l"Xxx1" [57;9H[K[57;8H[New File] 3 lines, 31 characters written[44;13H[?12l[?25h[?25l2[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,/end of/w! Xxx2   " write test file Xxx2[?25l"Xxx2" [57;9H[K[57;8H[New File] 3 lines, 31 characters written[44;13H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xxx2                " edit Xxx2[?25l"Xxx2" [57;8H[K[57;8H3 lines, 31 characters[1;1Hstart of Xxx2[1;14H[K[2;1H        test[2;13H[K[3;1Hend of Xxx
[1m[34m~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hbdel test8.in[34m^I^I[m" delete this file from the buffer list[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xxx1                 " edit Xxx1[?25l"Xxx1" [57;25H[K[57;8H3 lines, 31 characters[1;13H1[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw                      " write it, will unload it and give an error msg[?25l"Xxx2"[57;25H[K[57;8H3 lines, 31 characters
[1m[37m[41mE203: Autocommands deleted or unloaded buffer to be written[m
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! test.out            " Write contents of this file[?25l"test.out" [57;12H[K[57;12H[New File] 3 lines, 31 characters written
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25he! Xxx2                " start editing Xxx2[?25l"Xxx2" [57;8H[K[57;8H3 lines, 31 characters[1;1H[3L[1;1Hstart of Xxx2[2;9Htest
end of Xxx[57;1H[K[57;1H"Xxx2" 3 lines, 31 characters[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe test.out         " remove test.out from the buffer list[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw                      " write it, will delete the buffer and give an error msg[?25l"Xxx1"[57;25H[K[57;8H3 lines, 31 characters
[1m[37m[41mE203: Autocommands deleted or unloaded buffer to be written[m
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw >>test.out           " Append contents of this file[?25l"test.out" [57;12H[K[57;12H3 lines, 31 characters appended
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hau! BufWritePre[?25l[1;1H[3L[1;1Hstart of Xxx1[2;9Htest
end of Xxx[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hfunc CloseAll()[?25l
:  [?12l[?25h  let i = 0
[?25l:  [?12l[?25h  while i <= bufnr('$')
[?25l:    [?12l[?25h    if i != bufnr('%') && bufloaded(i)
[?25l:      [?12l[?25h      exe  i . "bunload"
[?25l:      [?12l[?25h    endif
[?25l:    [?12l[?25h    let i += 1
[?25l:    [?12l[?25h  endwhile
[?25l:  [?12l[?25hendfunc[1;1H[8L[?25l[1;1Hstart of Xxx1[2;9Htest
end of Xxx
[1m[34m~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hfunc WriteToOut()[?25l
:  [?12l[?25h  edit! test.out
[?25l:  [?12l[?25h  $put ='VimLeave done'
[?25l:  [?12l[?25h  write
[?25l:  [?12l[?25hendfunc[1;1H[4L[?25l[1;1Hstart of Xxx1[2;9Htest
end of Xxx
[1m[34m~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset viminfo='100,nviminfo[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufUnload * call CloseAll()[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau VimLeave * call WriteToOut()[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he small.vim[?25l[1m[37m[41mError detected while processing function CloseAll:[m
[33mline    4:[m
[1m[37m[41mE16: Invalid range: 0bunload[m
"small.vim" 1 line, 1 character
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hsp mbyte.vim[?25l"mbyte.vim" [57;13H[K[57;13H0 lines, 0 characters[1;1H[4L[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [m[28;1H[1m[7mmbyte.vim                                                                              [m[29;1H[K[56;1H[7msmall.vim                                                                              [m[57;1H[K[57;1H"mbyte.vim" 0 lines, 0 characters[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hq[?25l[1m[37m[41mError detected while processing function CloseAll:[m
[33mline    4:[m
[1m[37m[41mE16: Invalid range: 0bunload[m
"test.out" 6 lines, 62 characters
"test.out" 7 lines, 76 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test8 = test61; then \
#	  if diff test.out test8.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test8.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test8.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test9.failed test.ok test.out X* viminfo
cp test9.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test9.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test9.in" 12 lines, 255 characters[1;1HTest for Bufleave autocommand that deletes the buffer we are about to edit.

STARTTEST
:so small.vim
:au BufLeave test9.in bwipe yy
:e yy
:/^start of/,$w! test.out      " Write contents of this file
:qa!
ENDTEST

start of test file xx
end of test file xx
[1m[34m~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for Bufleave autocommand that deletes the buffer we are about to edit.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 5 lines, 117 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[9;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufLeave test9.in bwipe yy[?25l[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he yy[?25l[1m[37m[41mE143: Autocommands unexpectedly deleted new buffer yy[10;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h/^start of/,$w! test.out      " Write contents of this file[?25l"test.out" [57;12H[K[57;12H[New File] 2 lines, 42 characters written[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test9 = test61; then \
#	  if diff test.out test9.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test9.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test9.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test14.failed test.ok test.out X* viminfo
cp test14.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test14.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test14.in" 99 lines, 1606 characters[1;1HTests for "vaBiB", end could be wrong.
Also test ":s/pat/sub/" with different ~s in sub.
Also test for ^Vxff and ^Vo123 in Insert mode.
Also test "[m", "]m", "[M" and "]M"
Also test search()

STARTTEST
:so small.vim
/Start cursor here
vaBiBD:?Bug?,/Piece/-2w! test.out
/^- Bug
:s/u/~u~/
:s/i/~u~/
:s/o/~~~/
:.w >>test.out
:if has("ebcdic")
: let tt = "o\<C-V>193\<C-V>xc2\<C-V>o303 \<C-V>90a\<C-V>xfg\<C-V>o578\<Esc>"
:else
: let tt = "o\<C-V>65\<C-V>x42\<C-V>o103 \<C-V>33a\<C-V>xfg\<C-V>o78\<Esc>"
:endif
:exe "normal " . tt
:unlet tt
:.w >>test.out
:set vb
/^Piece
2]maA[34m^[[m:.w >>test.out
j]maB[34m^[[m:.w >>test.out
]maC[34m^[[m:.w >>test.out
[maD[34m^[[m:.w >>test.out
k2[maE[34m^[[m:.w >>test.out
3[maF[34m^[[m:.w >>test.out
]MaG[34m^[[m:.w >>test.out
j2]MaH[34m^[[m:.w >>test.out
]M]MaI[34m^[[m:.w >>test.out
2[MaJ[34m^[[m:.w >>test.out
k[MaK[34m^[[m:.w >>test.out
3[MaL[34m^[[m:.w >>test.out
:"
/^foobar
:let startline = line('.')
:call search('foobar', 'c')
:call append(line('$'), line('.') - startline)
j:call search('^$', 'c')
:call append(line('$'), line('.') - startline)
:call search('^$', 'bc')
:call append(line('$'), line('.') - startline)
/two
:call search('.', 'c')
:call append(line('$'), getline('.')[col('.') - 1:])
:"
/^substitute
:s/foo/bar/
:$put =@/
/^substitute
:keeppatterns s/asdf/xyz/
:$put =@/[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for "vaBiB", end could be wrong.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[7;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 56 lines, 1141 characters written[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[8;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[8M[1;57r[49;1H/^substitute
Y:$put =@0
/bar /e
:$put =@0
-:keeppatterns /xyz
0dn:/^search()/,$w >>test.out
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hStart cursor here[?25l[1;56r[1;1H[5M[1;57r[52;1H- Bug in "vPPPP" on this text (Webb):[53;9H{[54;17Hcmd;[55;17H{[56;25Hcmd;    /* <-- Start cursor here */[57;1H[K[56;40H[?12l[?25h[?25l[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[52;17H[7m{ 
                        cmd;    /* <-- Start cursor here */ 
                        { 
                        } 
                [m}[?12l[?25h[?25l[51;1H[7m                cmd; 
                [56;17H}[?12l[?25h[?25l[m
6 fewer lines[51;1H        }[51;10H[K[52;1H[K[53;1HPiece of Java[53;14H[K[54;1H{[54;2H[K[55;1H        tt m1 {[55;16H[K[56;1H                t1;[51;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h?Bug?,/Piece/-2w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 3 lines, 44 characters written[51;9H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^- Bug[?25l[31msearch hit BOTTOM, continuing at TOP[49;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hs/u/~u~/[?25l[49;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hs/i/~u~/[?25l[49;7Huuun "vPPPP" on this text (Webb):[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hs/o/~~~/[?25l[49;20Huuuuuuuuun this text (Webb):[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 48 characters appended[49;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif has("ebcdic")[?25l
:  [?12l[?25h: let tt = "o\<C-V>193\<C-V>xc2\<C-V>o303 \<C-V>90a\<C-V>xfg\<C-V>o578\<Esc>"
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: let tt = "o\<C-V>65\<C-V>x42\<C-V>o103 \<C-V>33a\<C-V>xfg\<C-V>o78\<Esc>"
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1H:else
: let tt = "o\<C-V>65\<C-V>x42\<C-V>o103 \<C-V>33a\<C-V>xfg\<C-V>o78\<Esc>"
:endif
:exe "normal " . tt[57;1H[K[49;1H[?12l[?25h[?25l[57;1H:[?12l[?25hexe "normal " . tt[?25l[50;56r[50;1H[L[1;57r[50;1HABC !a[34m^O[mg[34m^G[m8[57;1H[K[50;12H[?12l[?25h[?25l[57;1H:[?12l[?25hunlet tt[?25l[50;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 11 characters appended[50;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset vb[?25l[50;12H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^Piece[?25l[54;1H[?12l[?25h[56;15H[?25l{A[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 10 characters appended[56;16H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;17Ht1;[57;1H[K[56;16H[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[54;9H} e1[56;9Htt m2 {[?12l[?25h[?25l{B[?12l[?25h[?25l
:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 10 characters appended[56;16H[?12l[?25h[?25l[1;56r[1;1H[4M[1;57r[53;17Ht2;[54;9H} e2[56;9Htt m3 {[57;1H[K[56;15H[?12l[?25h[?25l{C[?12l[?25h[?25l
:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 10 characters appended[56;16H[?12l[?25h[?25l{DC[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 11 characters appended[56;16H[?12l[?25h[55;1H[48;15H[?25l{EA[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 11 characters appended[48;16H[?12l[?25h[47;1H[?25l{F[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 3 characters appended[47;2H[?12l[?25h[50;9H[?25l}G e1[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 7 characters appended[50;10H[?12l[?25h
[?25l[1;56r[1;1H[5M[1;57r[52;17Hif (x)[53;17H{[54;25Ht3;[55;17H}[56;9H} e3[57;1H[K[56;9H[?12l[?25h[?25l}H e3[?12l[?25h[?25l
:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 7 characters appended[56;10H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[57;1H[K[56;1H[?12l[?25h[?5h[?5l[?25l}I[?12l[?25h[?25l
:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 3 characters appended[56;2H[?12l[?25h[55;9H[?25l}JH e3[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 8 characters appended[55;10H[?12l[?25h[54;16H[48;9H[?25l}K e2[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 7 characters appended[48;10H[?12l[?25h[41;1H[?25l{LF[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 4 characters appended[41;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[41;2H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^foobar[?25l[1;56r[1;1H[2M[1;57r[56;1Hfoobar[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet startline = line('.')[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall search('foobar', 'c')[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append(line('$'), line('.') - startline)[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hcall search('^$', 'c')[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append(line('$'), line('.') - startline)[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall search('^$', 'bc')[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append(line('$'), line('.') - startline)[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25htwo[?25l[1;56r[1;1H[3M[1;57r[54;1Hsubstitute foo asdf

one two[57;1H[K[56;5H[?12l[?25h[?25l
:[?12l[?25hcall search('.', 'c')[?25l[56;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append(line('$'), getline('.')[col('.') - 1:])[?25l[56;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;5H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^substitute[?25l[31msearch hit BOTTOM, continuing at TOP[54;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hs/foo/bar/[?25l[54;12Hbar[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =@/[?25l[1;56r[1;1H[6M[1;57r[51;1Hsearch()
0
1
1
two
foo[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^substitute[?25l[31msearch hit BOTTOM, continuing at TOP[48;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hkeeppatterns s/asdf/xyz/[?25l[48;16Hxyz[48;19H[K[48;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =@/[?25l[1;56r[56;1H
[1;57r[56;1H^substitute[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^substitute[?25l[31msearch hit BOTTOM, continuing at TOP[47;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put =@0[?25l[1;56r[56;1H
[1;57r[56;1Hsubstitute bar xyz[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25hbar /e[?25l[56;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =@0[?25l[1;56r[56;1H
[1;57r[56;1Hsubstitute bar xyz[57;1H[K[56;1H[?12l[?25h[55;1H[?25l

:[?12l[?25hkeeppatterns /xyz[?25l[56;1H[?12l[?25h[?25l
/bar /e[57;8H[K[57;1H[56;1Hxyz[56;4H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^search()/,$w >>test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H9 lines, 58 characters appended[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test14 = test61; then \
#	  if diff test.out test14.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test14.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test14.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test15.failed test.ok test.out X* viminfo
cp test15.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test15.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test15.in" 136 lines, 2246 characters[1;1HTests for :right on text with embedded TAB.
Also test formatting a paragraph.
Also test undo after ":%s" and formatting.

STARTTEST
:so small.vim
:set tw=65

:/^\s*test for :left/,/^\s*test for :center/ left
:/^\s*test for :center/,/^\s*test for :right/ center
:/^\s*test for :right/,/^xxx/-1 right
:set fo+=tcroql tw=72
/xxxxxxxx$
0gq6kk
:set nocp viminfo+=nviminfo
:" undo/redo here to make the next undo only work on the following changes
u[34m^R[m
:map gg :.,.+2s/^/x/<CR>kk:set tw=3<CR>gqq
/^aa
ggu
:?test for :left?,$w! test.out
:qa!
ENDTEST[25;9Htest for :left[26;11Ha[13Ca[27;13Hfa[10Ca[28;11Hdfa[11Ca[29;17Hsdfa[12Ca[30;11Hasdfa[9Ca[31;17Hxasdfa[10Ca
asxxdfa[9Ca[34;9Htest for :center[35;11Ha[13Ca[36;13Hfa[10Cafd asdf[37;11Hdfa[11Ca[38;17Hsdfa[12Cafd asdf[39;11Hasdfa[9Ca[40;17Hxasdfa[10Casdfasdfasdfasdfasdf
asxxdfa[9Ca[43;9Htest for :right[44;9Ha[15Ca[45;9Hfa[14Ca[46;9Hdfa[13Ca[47;9Hsdfa[12Ca[48;9Hasdfa[11Ca[49;9Hxasdfa[10Ca[50;9Hasxxdfa[9Ca[51;9Hasxa;ofa[16Ca[52;9Hasdfaqwer[15Ca[53;9Ha[15Cax[54;9Hfa[14Cax[55;9Hdfa[13Cax[56;9Hsdfa[12Cax[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for :right on text with embedded TAB.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[5;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 17 lines, 401 characters written[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[6;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[23;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[24;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[24;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset tw=65[?25l[24;1H[?12l[?25h[25;8H[?25l[57;1H[K[57;1H:[?12l[?25h/^\s*test for :left/,/^\s*test for :center/ left[?25l[31msearch hit BOTTOM, continuing at TOP[m[57;37H[K[25;1Htest for :left[25;15H[K[26;1Ha[9C      a[26;25H[K[27;1Hfa[10C    a[27;25H[K[28;1Hdfa[7C      a[28;25H[K[29;1Hsdfa[12Ca[29;18H[K[30;1Hasdfa           a[30;25H[K[31;1Hxasdfa[10Ca[31;18H[K[34;1Htest for :cente[34;18H[K[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^\s*test for :center/,/^\s*test for :right/ center[?25l[34;1H                [8Ctest for :center[35;11H [13C a[14Ca[36;13H  [8Cfa        [8Cafd asdf[37;11H   [11C dfa[12Ca[38;17H    sdfa[8C        afd asdf[39;11H     [9C asdfa[10Ca[40;15Hxasdfa  
       [9C [7Casxxdfa[9Ca[43;9H                 test for :right[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^\s*test for :right/,/^xxx/-1 right[?25l[43;26H               [10Ctest for :right[44;9H [15C [29Ca[9Ca[45;9H  [14C [28Cfa[9Ca[46;9H   [13C [27Cdfa[9Ca[47;9H    [12C [26Csdfa[9Ca[48;9H     [11C [25Casdfa[9Ca[49;9H      [10C [24Cxasdfa[9Ca[50;9H       [9C [23Casxxdfa[9Ca[51;9H        [16C [14Casxa;ofa[9Ca[52;9H         [15C [13Casdfaqwer[9Ca[53;9H [15C  [20Ca[9Cax[54;9H  [14C  [19Cfa[9Cax[55;9H   [13C  [18Cdfa[9Cax[56;9H    [12C  [17Csdfa[9Cax[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fo+=tcroql tw=72[?25l[25;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hxxxxxxxx$[?25l[27m[23m[m[H[2J[1;46Hfa[9Caxxxo[2;45Hdfa[9Caxxxo[3;44Hsdfa[9Caxxxo[4;43Hasdfa[9Caxxxo[5;42Hxasdfa[9Caxxxo[6;41Hasxxdfa[9Caxxxo[7;40Hasxa;ofa[9Caxxxo[8;39Hasdfaqwer[9Caxxxo[9;47Ha[9Caxxxoi[10;46Hfa[9Caxxxoi[11;45Hdfa[9Caxxxoi[12;44Hsdfa[9Caxxxoi[13;43Hasdfa[9Caxxxoi[14;42Hxasdfa[9Caxxxoi[15;41Hasxxdfa[9Caxxxoi[16;40Hasxa;ofa[9Caxxxoi[17;39Hasdfaqwer[9Caxxxoi[18;47Ha[9Caxxxoik[19;46Hfa[9Caxxxoik[20;45Hdfa[9Caxxxoik[21;44Hsdfa[9Caxxxoik[22;43Hasdfa[9Caxxxoik[23;42Hxasdfa[9Caxxxoik[24;41Hasxxdfa[9Caxxxoik[25;40Hasxa;ofa[9Caxxxoik[26;39Hasdfaqwer[9Caxxxoik[27;47Ha[9Caxxxoike[28;46Hfa[9Caxxxoike[29;45Hdfa[9Caxxxoike[30;44Hsdfa[9Caxxxoike[31;43Hasdfa[9Caxxxoike[32;42Hxasdfa[9Caxxxoike[33;41Hasxxdfa[9Caxxxoike[34;40Hasxa;ofa[9Caxxxoike[35;39Hasdfaqwer[9Caxxxoike[36;47Ha[9Caxxxoikey[37;46Hfa[9Caxxxoikey[38;45Hdfa[9Caxxxoikey[39;44Hsdfa[9Caxxxoikey[40;43Hasdfa[9Caxxxoikey[41;42Hxasdfa[9Caxxxoikey[42;41Hasxxdfa[9Caxxxoikey[43;40Hasxa;ofa[9Caxxxoikey[44;39Hasdfaqwer[9Caxxxoikey

xxxxx xx xxxxxx
xxxxxxx xxxxxxxxx xxx xxxx xxxxx xxxxx xxx xx
xxxxxxxxxxxxxxxxxx xxxxx xxxx, xxxx xxxx xxxx xxxx xxx xx xx
xx xxxxxxx. xxxx xxxx.

> xx xx, xxxx xxxx xxx xxxx xxx xxxxx xxx xxx xxxxxxx xxx xxxxx
> xxxxxx xxxxxxx: xxxx xxxxxxx, xx xxxxxx xxxx xxxxxxxxxx

aa aa aa aa
bb bb bb bb
cc cc cc cc[52;50H[?12l[?25h[?25l[46;56r[56;1H
[1;57r[46;6H xx xxxxxx xxxxxxx xxxxxxxxx xxx xxxx xxxxx xxxxx xxx xx[47;62Hxx xxxxxxx.
xxxx xxxx.[48;11H[K[50;65Hxxxxxx[51;9Hx: xxxx xxxxxxx, xx xxxx[7C xxxxxxx[51;51H[K[56;1H[1m[34m~                                                                                      [51;1H[?12l[?25h[50;1H
[?25l[57;1H[m:[?12l[?25hset nocp viminfo+=nviminfo[?25l[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" undo/redo here to make the next undo only work on the following changes[?25l[51;1H[?12l[?25h[?25l[57;1H1 more line; before #1  0 seconds ago[57;38H[K[27m[23m[m[H[2J[1;1HTests for :right on text with embedded TAB.
Also test formatting a paragraph.
Also test undo after ":%s" and formatting.

STARTTEST
:so small.vim
:set tw=65

:/^\s*test for :left/,/^\s*test for :center/ left
:/^\s*test for :center/,/^\s*test for :right/ center
:/^\s*test for :right/,/^xxx/-1 right
:set fo+=tcroql tw=72
/xxxxxxxx$
0gq6kk
:set nocp viminfo+=nviminfo
:" undo/redo here to make the next undo only work on the following changes
u[34m^R[m
:map gg :.,.+2s/^/x/<CR>kk:set tw=3<CR>gqq
/^aa
ggu
:?test for :left?,$w! test.out
:qa!
ENDTEST[25;9Htest for :left[26;11Ha[13Ca[27;13Hfa[10Ca[28;11Hdfa[11Ca[29;17Hsdfa[12Ca[30;11Hasdfa[9Ca[31;17Hxasdfa[10Ca
asxxdfa[9Ca[34;9Htest for :center[35;11Ha[13Ca[36;13Hfa[10Cafd asdf[37;11Hdfa[11Ca[38;17Hsdfa[12Cafd asdf[39;11Hasdfa[9Ca[40;17Hxasdfa[10Casdfasdfasdfasdfasdf
asxxdfa[9Ca[43;9Htest for :right[44;9Ha[15Ca[45;9Hfa[14Ca[46;9Hdfa[13Ca[47;9Hsdfa[12Ca[48;9Hasdfa[11Ca[49;9Hxasdfa[10Ca[50;9Hasxxdfa[9Ca[51;9Hasxa;ofa[16Ca[52;9Hasdfaqwer[15Ca[53;9Ha[15Cax[54;9Hfa[14Cax[55;9Hdfa[13Cax[56;9Hsdfa[12Cax[25;8H[?12l[?25h[?25l[57;1H1 line less; after #1  0 seconds ago[25;1Htest for :left[25;15H[K[26;1Ha[9C      a[26;25H[K[27;1Hfa[10C    a[27;25H[K[28;1Hdfa[7C      a[28;25H[K[29;1Hsdfa[12Ca[29;18H[K[30;1Hasdfa           a[30;25H[K[31;1Hxasdfa[10Ca[31;18H[K[34;9H                test for :center[35;11H [13C a[14Ca[36;13H  [8Cfa        [8Cafd asdf[37;11H   [11C dfa[12Ca[38;17H    sdfa[8C        afd asdf[39;11H     [9C asdfa[10Ca[40;15Hxasdfa  
       [9C [7Casxxdfa[9Ca[43;9H               [27Ctest for :right[44;9H [15C [29Ca[9Ca[45;9H  [14C [28Cfa[9Ca[46;9H   [13C [27Cdfa[9Ca[47;9H    [12C [26Csdfa[9Ca[48;9H     [11C [25Casdfa[9Ca[49;9H      [10C [24Cxasdfa[9Ca[50;9H       [9C [23Casxxdfa[9Ca[51;9H        [16C [14Casxa;ofa[9Ca[52;9H         [15C [13Casdfaqwer[9Ca[53;9H [15C  [20Ca[9Cax[54;9H  [14C  [19Cfa[9Cax[55;9H   [13C  [18Cdfa[9Cax[56;9H    [12C  [17Csdfa[9Cax[25;1H[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hmap gg :.,.+2s/^/x/<CR>kk:set tw=3<CR>gqq[?25l[26;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^aa[?25l[27m[23m[m[H[2J[1;47Ha[9Caxxxo[2;46Hfa[9Caxxxo[3;45Hdfa[9Caxxxo[4;44Hsdfa[9Caxxxo[5;43Hasdfa[9Caxxxo[6;42Hxasdfa[9Caxxxo[7;41Hasxxdfa[9Caxxxo[8;40Hasxa;ofa[9Caxxxo[9;39Hasdfaqwer[9Caxxxo[10;47Ha[9Caxxxoi[11;46Hfa[9Caxxxoi[12;45Hdfa[9Caxxxoi[13;44Hsdfa[9Caxxxoi[14;43Hasdfa[9Caxxxoi[15;42Hxasdfa[9Caxxxoi[16;41Hasxxdfa[9Caxxxoi[17;40Hasxa;ofa[9Caxxxoi[18;39Hasdfaqwer[9Caxxxoi[19;47Ha[9Caxxxoik[20;46Hfa[9Caxxxoik[21;45Hdfa[9Caxxxoik[22;44Hsdfa[9Caxxxoik[23;43Hasdfa[9Caxxxoik[24;42Hxasdfa[9Caxxxoik[25;41Hasxxdfa[9Caxxxoik[26;40Hasxa;ofa[9Caxxxoik[27;39Hasdfaqwer[9Caxxxoik[28;47Ha[9Caxxxoike[29;46Hfa[9Caxxxoike[30;45Hdfa[9Caxxxoike[31;44Hsdfa[9Caxxxoike[32;43Hasdfa[9Caxxxoike[33;42Hxasdfa[9Caxxxoike[34;41Hasxxdfa[9Caxxxoike[35;40Hasxa;ofa[9Caxxxoike[36;39Hasdfaqwer[9Caxxxoike[37;47Ha[9Caxxxoikey[38;46Hfa[9Caxxxoikey[39;45Hdfa[9Caxxxoikey[40;44Hsdfa[9Caxxxoikey[41;43Hasdfa[9Caxxxoikey[42;42Hxasdfa[9Caxxxoikey[43;41Hasxxdfa[9Caxxxoikey[44;40Hasxa;ofa[9Caxxxoikey[45;39Hasdfaqwer[9Caxxxoikey

xxxxx xx xxxxxx xxxxxxx xxxxxxxxx xxx xxxx xxxxx xxxxx xxx xx
xxxxxxxxxxxxxxxxxx xxxxx xxxx, xxxx xxxx xxxx xxxx xxx xx xx xx xxxxxxx.
xxxx xxxx.

> xx xx, xxxx xxxx xxx xxxx xxx xxxxx xxx xxx xxxxxxx xxx xxxxx xxxxxx
> xxxxxxx: xxxx xxxxxxx, xx xxxxxx xxxx xxxxxxxxxx

aa aa aa aa
bb bb bb bb
cc cc cc cc[54;1H[?12l[?25h[?25l


:.,.+2s/^/x/3 substitutions on 3 lines[54;1Hxaa aa aa aa
xbb bb bb bb
xcc cc cc cc[?12l[?25h[55;1H[54;1H[?25l[57;1H[K[57;1H:set tw=3[54;1H[?12l[?25h[?25l


3 more lines[1;56r[56;1H
[1;57r[53;5H[K[54;1Haa[54;3H[K[55;1Haa[55;3H[K[56;1Haa[57;1H[K[57;1H3 more lines[56;1H[?12l[?25h[?25l
3 fewer lines; before #2  0 seconds ago[53;1Haa aa aa aa
bb bb bb bb
cc cc cc cc
[1m[34m~                                                                                      [53;1H[?12l[?25h
[?25l[m[57;1H[K[57;1H:[?12l[?25h?test for :left?,$w! test.out[?25l"test.out"[57;12H[K[57;12H[New] 111L, 2304C written[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test15 = test61; then \
#	  if diff test.out test15.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test15.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test15.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test19.failed test.ok test.out X* viminfo
cp test19.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test19.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test19.in" 33 lines, 692 characters[1;1HTests for "r<Tab>" with 'smarttab' and 'expandtab' set/not set.
Also test that dv_ works correctly

STARTTEST
:so small.vim
:set smarttab expandtab ts=8 sw=4
:" make sure that backspace works, no matter what termcap is used
:set t_kD=[34m^V[mx7f t_kb=[34m^V[mx08
/some
r[7C:set noexpandtab
/other
r
:" Test replacing with Tabs and then backspacing to undo it
0wR[21C[34m^H^H^H^[[m
:" Test replacing with Tabs
0wR[21C[34m^[[m
:" Test that copyindent works with expandtab set
:set expandtab smartindent copyindent ts=8 sw=8 sts=8
o{
x[34m^[[m:set nosol
/Second line/
fwdv_:?^start?,$w! test.out
:qa!
ENDTEST

start text[27;17Hsome test text
test text[29;17Hother test text
    a cde
    f ghi
test text
  Second line beginning with whitespace
[1m[34m~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for "r<Tab>" with 'smarttab' and 'expandtab' set/not set.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 19 lines, 447 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[24;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset smarttab expandtab ts=8 sw=4[?25l[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" make sure that backspace works, no matter what termcap is used[?25l[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset t_kD=^[34m^?[m t_kb=^[34m^H[?25l[27m[23m[m[H[2J[1;1HTests for "r<Tab>" with 'smarttab' and 'expandtab' set/not set.
Also test that dv_ works correctly

STARTTEST
:so small.vim
:set smarttab expandtab ts=8 sw=4
:" make sure that backspace works, no matter what termcap is used
:set t_kD=[34m^V[mx7f t_kb=[34m^V[mx08
/some
r[7C:set noexpandtab
/other
r
:" Test replacing with Tabs and then backspacing to undo it
0wR[21C[34m^H^H^H^[[m
:" Test replacing with Tabs
0wR[21C[34m^[[m
:" Test that copyindent works with expandtab set
:set expandtab smartindent copyindent ts=8 sw=8 sts=8
o{
x[34m^[[m:set nosol
/Second line/
fwdv_:?^start?,$w! test.out
:qa!
ENDTEST

start text[27;17Hsome test text
test text[29;17Hother test text
    a cde
    f ghi
test text
  Second line beginning with whitespace
[1m[34m~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [25;1H[?12l[?25h[?25l[57;1H[m/[?12l[?25hsome[?25l[27;17H[?12l[?25h[?25l    ome test text[27;20H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noexpandtab[?25l[27;20H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hother[?25l[29;17H[?12l[?25h[?25l    ther test text[29;20H[?12l[?25h[30;9H[?25l[57;1H[K[57;1H:[?12l[?25h" Test replacing with Tabs and then backspacing to undo it[?25l[30;9H[?12l[?25h    [?25l[?12l[?25h
   [?25l[57;1H[K[57;1H:[?12l[?25h" Test replacing with Tabs[?25l[31;4H[?12l[?25h    [?25l     [7Chi[?12l[?25h[32;9H[?25l[57;1H[K[57;1H:[?12l[?25h" Test that copyindent works with expandtab set[?25l[32;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset expandtab smartindent copyindent ts=8 sw=8 sts=8[?25l[32;9H[?12l[?25h[?25l[33;56r[33;1H[2L[1;57r[33;1H{[34;9Hx[57;1H[K[34;9H[?12l[?25h[?25l[57;1H:[?12l[?25hset nosol[?25l[34;9H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hSecond line/[?25l[57;13H[K[57;1H[35;3H[?12l[?25h[22C[?25l  with whitespace[35;18H[K[35;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h?^start?,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 10 lines, 121 characters written[35;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test19 = test61; then \
#	  if diff test.out test19.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test19.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test19.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test20.failed test.ok test.out X* viminfo
cp test20.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test20.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test20.in" 28 lines, 398 characters[1;1HTests Blockwise Visual when there are TABs before the text.
First test for undo working properly when executing commands from a register.
Also test this in an empty buffer.

STARTTEST
:so tiny.vim
G0"ay$k@au
:new
@auY:quit!
GP
/start here$
"by$[34m^V[mjjlld
/456$
[34m^V[mjj"bP
:/56$/,$-1w! test.out
:qa!
ENDTEST

123456
234567
345678

test text test tex start here[24;17Hsome text[25;17Htest text
test text

Ox[34m^[[mjAy[34m^[[mkdd
[1m[34m~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests Blockwise Visual when there are TABs before the text.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[5;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 11 lines, 107 characters written[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[6;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[17;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[18;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso tiny.vim[?25l[18;1H[?12l[?25h[28;1H[27;1H[?25l[27;56r[27;1H[L[1;57r[27;1Hx[57;1H[K[27;1H[?12l[?25h
[?25ly[?12l[?25h[27;1H[?25l[27;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [27;1H[?12l[?25h[?25l[m[57;1H2 changes; before #1  0 seconds ago[27;1H[K[27;1H[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;1H:/56$/,$-1w! test.out[29;22H[K[30;1H:qa![30;5H[K[31;1HENDTEST[31;8H[K[32;1H[K[33;1H123456[33;7H[K[34;1H234567[34;7H[K[35;1H345678[35;7H[K[36;1H[K[37;1Htest text test tex start here[37;30H[K[38;1H                some text[38;26H[K[39;1H                test text[39;26H[K[40;1Htest text[40;10H[K[41;1H[K[42;1HOx[34m^[[mjAy[34m^[[mkdd[42;13H[K[56;1H[7mtest20.in                                                                              [1;1H[?12l[?25h[?25l[1;27r[m[1;1H[L[1;57r[1;1Hx[28;11H[1m[7m[+][m[57;1H[K[1;1H[?12l[?25h
[?25ly[?12l[?25h[1;1H[?25l[1;27r[27;1H
[1;57r[27;1H[1m[34m~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H1 line less; before #1  0 seconds ago[1;1H[K[28;11H[1m[7m    [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hquit![?25l[1;1HTests Blockwise Visual when there are TABs before the text.
First test for undo working properly when executing commands from a register.[2;78H[K[3;1HAlso test this in an empty buffer.[3;35H[K[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so tiny.vim[6;13H[K[7;1HG0"ay$k@au[7;11H[K[8;1H:new[8;5H[K[9;1H@auY:quit![9;11H[K[10;1HGP[10;3H[K[11;1H/start here$[11;13H[K[12;1H"by$[34m^V[mjjlld[12;12H[K[13;1H/456$[13;6H[K[14;1H[34m^V[mjj"bP[14;8H[K[15;1H:/56$/,$-1w! test.out[15;22H[K[16;1H:qa![16;5H[K[17;1HENDTEST[17;8H[K[18;1H[K[19;1H123456[19;7H[K[20;1H234567[20;7H[K[21;1H345678[21;7H[K[22;1H[K[23;1Htest text test tex start here[23;30H[K[24;1H                some text[24;26H[K[25;1H                test text[25;26H[K[26;1Htest text[26;10H[K[27;1H[K[28;1HOx[34m^[[mjAy[34m^[[mkdd[28;13H[K[29;1H[1m[34m~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [56;1H~                                                                                      [28;1H[?12l[?25h[?25l[28;56r[m[28;1H[L[1;57r[57;1H[K[28;1H[?12l[?25h
[?25l[57;1H/[?12l[?25hstart here$[?25l[31msearch hit BOTTOM, continuing at TOP[23;20H[?12l[?25h[?25l[?12l[?25h[?25l[m[7ms[24;20H[?12l[?25h[?25le[25;20H[?12l[?25h[?25l[23;21Ht[24;21H [25;20Ht[?12l[?25h[?25l[23;22Ha[24;22Ht[25;21H [?12l[?25h[?25l[m[23;20Hrt here[23;27H[K[24;20Hext[24;23H[K[25;20Hex[25;23H[K[23;20H[?12l[?25h[24;20H[?25l[57;1H[K[57;1H/[?12l[?25h456$[?25l[31msearch hit BOTTOM, continuing at TOP[19;4H[?12l[?25h[?25l[?12l[?25h[?25l[m[7m4
[m234[?12l[?25h[?25l[7m5
[m345[?12l[?25h[?25l[?12l[?25h[?25l[19;4Hstart here56
234start here67
345start here78[19;13H[?12l[?25h[20;13H[?25l[57;1H[K[57;1H:[?12l[?25h/56$/,$-1w! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 10 lines, 106 characters written[20;13H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test20 = test61; then \
#	  if diff test.out test20.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test20.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test20.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test22.failed test.ok test.out X* viminfo
cp test22.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test22.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test22.in" 13 lines, 197 characters[1;1HTests for file with some lines ending in CTRL-M, some not[34m^M
^M[m
STARTTEST
:set ta tx
:e!
:$-3,$w! test.out
:qa!
ENDTEST

this lines ends in a[34m^M[m
this one doesn't
this one does[34m^M[m
and the last one doesn't
[1m[34m~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for file with some lines ending in CTRL-M, some not[34m^M[m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 4 lines, 38 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[8;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ta tx[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he![?25l"test22.in" 13 lines, 197 characters[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$-3,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 4 lines, 79 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test22 = test61; then \
#	  if diff test.out test22.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test22.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test22.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test23.failed test.ok test.out X* viminfo
cp test23.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test23.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test23.in" 15 lines, 282 characters[1;1HTests for complicated + argument to :edit command

STARTTEST
:$-1w! Xfile1
:$w! Xfile2
:edit +1|s/|/PIPE/|w Xfile1| e Xfile2|1 | s/\//SLASH/|w
:w! test.out
:e Xfile1
:w >> test.out
:qa!
ENDTEST

The result should be in Xfile1: "fooPIPEbar", in Xfile2: "fooSLASHbar"
foo|bar
foo/bar
[1m[34m~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for complicated + argument to :edit command[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 7 lines, 125 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[11;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$-1w! Xfile1[?25l"Xfile1" [57;10H[K[57;10H[New File] 1 line, 8 characters written[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$w! Xfile2[?25l"Xfile2" [57;10H[K[57;10H[New File] 1 line, 8 characters written[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hedit +1|s/|/PIPE/|w Xfile1| e Xfile2|1 | s/\//SLASH/|w[?25l"Xfile1" [57;10H[K[57;10H1 line, 8 characters
foo|bar
"Xfile1" 1 line, 11 characters written
"Xfile2" 1 line, 8 characters
foo/bar
"Xfile2" 1 line, 12 characters written
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 1 line, 12 characters written
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25he Xfile1[?25l"Xfile1" 1 line, 11 characters[1;1H[7L[1;1HfooPIPEbar
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [m[57;1H[K[57;1H"Xfile1" 1 line, 11 characters[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >> test.out[?25l"test.out" [57;12H[K[57;12H1 line, 11 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test23 = test61; then \
#	  if diff test.out test23.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test23.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test23.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test24.failed test.ok test.out X* viminfo
cp test24.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test24.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test24.in" 89 lines, 1301 characters[1;1HTests for regexp with backslash and other special characters inside []
Also test backslash for hex/octal numbered character.

STARTTEST
:set nocompatible viminfo+=nviminfo
/[\x]
x/[\t\]]
x/[]y]
x/[\]]
x/[y^]
x/[$y]
x/[\x61]
x/[\x60-\x64]
xj0/[\x785]
x/[\o143]
x/[\o140-\o144]
x/[\o417]
x/\%x42
x/\%o103
x/[\x00]
x
:s/[\x00-\x10]//g

:s/[\x-z]\+//

:s/[\u-z]\{2,}//

:s/\(a\)\+//

:s/\(a*\)\+//

:s/\(a*\)*//

:s/\(a\)\{2,3}/A/

:s/\(a\)\{-2,3}/A/

:s/\(a\)*\(12\)\@>/A/

:s/\(foo\)\@<!bar/A/

:s/\(an\_s\+\)\@<=file/A/

:s/^\(\h\w*\%(->\|\.\)\=\)\+=/XX/

:s/^\(\h\w*\%(->\|\.\)\=\)\+=/YY/

:s/aaa/xyz/

:s/~/bcd/

:s/~\+/BB/
:"
:?start?,$w! test.out
:qa!
ENDTEST[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for regexp with backslash and other special characters inside [][57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 51 lines, 519 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocompatible viminfo+=nviminfo[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h[\x][?25l[1;56r[1;1H[2M[1;57r[55;1Hstart
test \text test text[57;1H[K[56;6H[?12l[?25h[?25ltext test text[56;20H[K[56;6H[?12l[?25h[?25l
/[?12l[?25h[\t\]][?25l[1;56r[56;1H
[1;57r[56;1Htest    text test text[57;1H[K[56;8H[?12l[?25h[?25ltext test tex[56;20H[K[56;6H[?12l[?25h[?25l
/[?12l[?25h[]y][?25l[1;56r[56;1H
[1;57r[56;1Htest text ]test text[57;1H[K[56;11H[?12l[?25h[?25ltest text[56;20H[K[56;11H[?12l[?25h[?25l
/[?12l[?25h[\]][?25l[1;56r[56;1H
[1;57r[56;1Htest ]text test text[57;1H[K[56;6H[?12l[?25h[?25ltext test text[56;20H[K[56;6H[?12l[?25h[?25l
/[?12l[?25h[y^][?25l[1;56r[56;1H
[1;57r[56;1Htest text te^st text[57;1H[K[56;13H[?12l[?25h[?25lst text[56;20H[K[56;13H[?12l[?25h[?25l
/[?12l[?25h[$y][?25l[1;56r[56;1H
[1;57r[56;1Htest te$xt test text[57;1H[K[56;8H[?12l[?25h[?25lxt test text[56;20H[K[56;8H[?12l[?25h[?25l
/[?12l[?25h[\x61][?25l[1;56r[56;1H
[1;57r[56;1Htest taext test text  x61[57;1H[K[56;7H[?12l[?25h[?25lext test text  x61[56;25H[K[56;7H[?12l[?25h[?25l
/[?12l[?25h[\x60-\x64][?25l[1;56r[56;1H
[1;57r[56;1Htest tbext test text  x60-x64[57;1H[K[56;7H[?12l[?25h[?25lext test text  x60-x64[56;29H[K[56;7H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Htest 5text test text  x78 5[56;7H[?12l[?25h[?25l
/[?12l[?25h[\x785][?25l[56;6H[?12l[?25h[?25ltext test text  x78 5[56;27H[K[56;6H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h[\o143][?25l[1;56r[56;1H
[1;57r[56;1Htestc text test text  o143[57;1H[K[56;5H[?12l[?25h[?25l text test text  o143[56;26H[K[56;5H[?12l[?25h[?25l
/[?12l[?25h[\o140-\o144][?25l[1;56r[56;1H
[1;57r[56;1Htesdt text test text  o140-o144[57;1H[K[56;4H[?12l[?25h[?25lt text test text  o140-o14[56;31H[K[56;4H[?12l[?25h[?25l
/[?12l[?25h[\o417][?25l[1;56r[56;1H
[1;57r[56;1Htest7 text test text  o41 7[57;1H[K[56;5H[?12l[?25h[?25l text test text  o41 7[56;27H[K[56;5H[?12l[?25h[?25l
/[?12l[?25h\%x42[?25l[1;56r[56;1H
[1;57r[56;1Htest text tBest text  \%x42[57;1H[K[56;12H[?12l[?25h[?25lest text  \%x42[56;27H[K[56;12H[?12l[?25h[?25l
/[?12l[?25h\%o103[?25l[1;56r[56;1H
[1;57r[56;1Htest text teCst text  \%o103[57;1H[K[56;13H[?12l[?25h[?25lst text  \%o103[56;28H[K[56;13H[?12l[?25h[?25l
/[?12l[?25h[\x00][?25l[1;56r[56;1H
[1;57r[56;1Htest text [34m^@[mtest text  [\x00][57;1H[K[56;11H[?12l[?25h[?25ltest text  [\x00][56;28H[K[56;11H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Htest te[34m^@[mxt t[34m^D[mest t[34m^P[mext  [\x00-\x10][56;11H[?12l[?25h[?25l
:[?12l[?25hs/[\x00-\x10]//g[?25l3 substitutions on 1 line[56;8Hxt test text  [\x00-\x10][56;33H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Htest \xyztext test text  [\x-z][57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/[\x-z]\+//[?25l[56;6Htext test text  [\x-z][56;28H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Htest text tev\uyst text  [\u-z][57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/[\u-z]\{2,}//[?25l[56;13Hst text  [\u-z][56;28H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hxx aaaaa xx a[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/\(a\)\+//[?25l[56;4H xx [56;10H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hxx aaaaa xx a[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/\(a*\)\+//[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hxx aaaaa xx a[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/\(a*\)*//[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hxx aaaaa xx[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/\(a\)\{2,3}/A/[?25l[56;4HAaa xx[56;10H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hxx aaaaa xx[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/\(a\)\{-2,3}/A/[?25l[56;4HAaaa x[56;11H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hxx aaa12aa xx[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/\(a\)*\(12\)\@>/A/[?25l[56;4HAaa xx[56;10H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hxx foobar xbar xx[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/\(foo\)\@<!bar/A/[?25l[56;12HA xx[56;16H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hxx an file xx[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/\(an\_s\+\)\@<=file/A/[?25l[56;7HA xx[56;12H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hx= 9;[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/^\(\h\w*\%(->\|\.\)\=\)\+=/XX/[?25l[56;1HXX[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hhh= 77;[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/^\(\h\w*\%(->\|\.\)\=\)\+=/YY/[?25l[56;1HYY 77;[56;7H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;2Haaa[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/aaa/xyz/[?25l[56;2Hxyz [?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;2Hxyz[57;1H[K[56;2H[?12l[?25h[?25l
:[?12l[?25hs/~/bcd/[?25l[56;2Hbcd [?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;2Hbcdbcdbcd[57;1H[K[56;2H[?12l[?25h[?25l
:[?12l[?25hs/~\+/BB/[?25l[56;2HBB[56;4H[K[56;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h?start?,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New] 32L, 586C written[56;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test24 = test61; then \
#	  if diff test.out test24.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test24.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test24.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test26.failed test.ok test.out X* viminfo
cp test26.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test26.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test26.in" 44 lines, 750 characters[1;1HTest for :execute, :while and :if

STARTTEST
:so small.vim
mt:let i = 0
:while i < 12
:  let i = i + 1
:  if has("ebcdic")
:    execute "normal o" . i . "\047"
:  else
:    execute "normal o" . i . "\033"
:  endif
:  if i % 2
:    normal Ax[34m^V^[[m
:    if i == 9
:      break
:    endif
:    if i == 5
:      continue
:    else
:      let j = 9
:      while j > 0
:[8Cif has("ebcdic")
:[10Cexecute "normal" j . "a" . j . "\x27"
:[8Celse
:[10Cexecute "normal" j . "a" . j . "\x1b"
:[8Cendif
:[8Clet j = j - 1
:      endwhile
:    endif
:  endif
:  if i == 9
:    if has("ebcdic")
:      execute "normal Az\047"
:    else
:      execute "normal Az\033"
:    endif
:  endif
:endwhile
:unlet i j
:'t,$w! test.out
:qa!
ENDTEST

[1m[34m~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for :execute, :while and :if[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 39 lines, 696 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[43;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[44;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[44;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet i = 0[?25l[44;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwhile i < 12[?25l
:  [?12l[?25h:  let i = i + 1
[?25l:  [?12l[?25h:  if has("ebcdic")
[?25l:    [?12l[?25h:    execute "normal o" . i . "\047"
[?25l:    [?12l[?25h:  else
[?25l:    [?12l[?25h:    execute "normal o" . i . "\033"
[?25l:    [?12l[?25h:  endif
[?25l:  [?12l[?25h:  if i % 2
[?25l:    [?12l[?25h:    normal Ax^[34m^[[m
[?25l:    [?12l[?25h:    if i == 9
[?25l:      [?12l[?25h:      break
[?25l:      [?12l[?25h:    endif
[?25l:    [?12l[?25h:    if i == 5
[?25l:      [?12l[?25h:      continue
[?25l:      [?12l[?25h:    else
[?25l:      [?12l[?25h:      let j = 9
[?25l:      [?12l[?25h:      while j > 0
[?25l:[8C[?12l[?25h:        if has("ebcdic")
[?25l:[10C[?12l[?25h:          execute "normal" j . "a" . j . "\x27"
[?25l:[10C[?12l[?25h:        else
[?25l:[10C[?12l[?25h:          execute "normal" j . "a" . j . "\x1b"
[?25l:[10C[?12l[?25h:        endif
[?25l:[8C[?12l[?25h:        let j = j - 1
[?25l:[8C[?12l[?25h:      endwhile
[?25l:      [?12l[?25h:    endif
[?25l:    [?12l[?25h:  endif
[?25l:  [?12l[?25h:  if i == 9
[?25l:    [?12l[?25h:    if has("ebcdic")
[?25l:      [?12l[?25h:      execute "normal Az\047"
[?25l:      [?12l[?25h:    else
[?25l:      [?12l[?25h:      execute "normal Az\033"
[?25l:      [?12l[?25h:    endif
[?25l:    [?12l[?25h:  endif
[?25l:  [?12l[?25h:endwhile[1;1H[33L[?25l[1;1HTest for :execute, :while and :if

STARTTEST
:so small.vim
mt:let i = 0
:while i < 12
:  let i = i + 1
:  if has("ebcdic")
:    execute "normal o" . i . "\047"
:  else
:    execute "normal o" . i . "\033"
:  endif
:  if i % 2
:    normal Ax[34m^V^[[m
:    if i == 9
:      break
:    endif
:    if i == 5
:      continue
:    else
:      let j = 9
:      while j > 0
:[8Cif has("ebcdic")
:[10Cexecute "normal" j . "a" . j . "\x27"
:[8Celse
:[10Cexecute "normal" j . "a" . j . "\x1b"
:[8Cendif
:[8Clet j = j - 1
:      endwhile
:    endif
:  endif
:  if i == 9
:    if has("ebcdic")[45;1H1x999999999888888887777777666666555554444333221[45;48H[K[46;1H2[46;2H[K[47;1H3x999999999888888887777777666666555554444333221[47;48H[K[48;1H4[48;2H[K[49;1H5x[49;3H[K[50;1H6[50;2H[K[51;1H7x999999999888888887777777666666555554444333221[51;48H[K[52;1H8[52;2H[K[53;1H9x[53;3H[K[57;1H[K[53;2H[?12l[?25h[?25l[57;1H:[?12l[?25hunlet i j[?25l[53;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h't,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 10 lines, 159 characters written[53;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test26 = test61; then \
#	  if diff test.out test26.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test26.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test26.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test28.failed test.ok test.out X* viminfo
cp test28.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test28.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test28.in" 23 lines, 364 characters[1;1HTest for sourcing a file with CTRL-V's at the end of the line

STARTTEST
:/firstline/+1,/lastline/-1w! Xtestfile
:so Xtestfile
Gmm__1[34m^[^[[m__2[34m^[[m__3[34m^[^[[m__4[34m^[[m__5[34m^[[m:'m,$s/[34m^@[m/0/g
:'m,$w! test.out
:qa!
ENDTEST

firstline
map __1 afirst
map __2 asecond
map __3 athird
map __4 afourth
map __5 afifth
map __1 asd[34m^V[m
map __2 asd[34m^V^V[m
map __3 asd[34m^V^V[m
map __4 asd[34m^V^V^V[m
map __5 asd[34m^V^V^V[m
lastline

[1m[34m~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for sourcing a file with CTRL-V's at the end of the line[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 5 lines, 114 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[9;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/firstline/+1,/lastline/-1w! Xtestfile[?25l"Xtestfile" [57;13H[K[57;13H[New File] 10 lines, 148 characters written[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso Xtestfile[?25l[10;1H[?12l[?25h[23;1H[24;12H[?25l[23;1Hsd
map __2 asd[34m^[[m[24;14H[K[24;12H[?12l[?25h[?25l[2Csecond[?12l[?25hd  [?25lsd[34m^[[?12l[?25h^[[m  [13C[?25l[24;24Hsd[34m^@[mmap __5 asd[34m^@[?12l[?25h[?25l[m[2Cfifth[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h'm,$s/[34m^@[m/0/g[?25l[24;26H0map __5 asd0fifth[24;44H[K[24;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h'm,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 2 lines, 45 characters written[24;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test28 = test61; then \
#	  if diff test.out test28.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test28.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test28.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test29.failed test.ok test.out X* viminfo
cp test29.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test29.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test29.in" 230 lines, 4261 characters[1;1HTest for joining lines and marks in them
 in compatible and nocompatible modes
 and with 'joinspaces' set or not
 and with 'cpoptions' flag 'j' set or not

STARTTEST
:so small.vim
:set nocompatible viminfo+=nviminfo
:set nojoinspaces
:set cpoptions-=j
/firstline/
j"td/^STARTTEST/-1
PJjJjJjJjJjJjJjJjJjJjJjJjJjJj05lmx2j06lmy2k4Jy3l$p`xyl$p`yy2l$p:set cpoptions+=j
j05lmx2j06lmy2k4Jy3l$p`xyl$p`yy2l$p:set cpoptions-=j joinspaces
j"tpJjJjJjJjJjJjJjJjJjJjJjJjJjJj05lmx2j06lmy2k4Jy3l$p`xyl$p`yy2l$p:set cpoptions+=j
j05lmx2j06lmy2k4Jy3l$p`xyl$p`yy2l$p:set cpoptions-=j nojoinspaces compatible
j"tpJjJjJjJjJjJjJjJjJjJjJjJjJjJj4Jy3l$pjd/STARTTEST/-2
ENDTEST

firstline
asdfasdf.
asdf
asdfasdf.
asdf
asdfasdf.
asdf
asdfasdf.
asdf
asdfasdf.
asdf
asdfasdf.
asdf
asdfasdf.
asdf
asdfasdf
asdf
asdfasdf
asdf
asdfasdf
asdf
asdfasdf
asdf
asdfasdf
asdf
asdfasdf
asdf
asdfasdf
asdf
zx cvn.
as dfg?
hjkl iop!
ert
zx cvn.
as dfg?
hjkl iop!
ert[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for joining lines and marks in them[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[6;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 11 lines, 478 characters written[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[7;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[18;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocompatible viminfo+=nviminfo[?25l[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nojoinspaces[?25l[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpoptions-=j[?25l[19;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hfirstline/[?25l[57;11H[K[57;1H[20;1H[?12l[?25h
[?25l[57;1H[K[57;1H/[?12l[?25h^STARTTEST/-1[?25l[12C+-137 fewer lines[57;15H[K[21;1HSTARTTEST
/^{/+1
:set comments=s1:/*,mb:*,ex:*/,://
:set nojoinspaces fo=j
:set backspace=eol,start
:.,+3join
j4J[27;4H[K[28;1H:.,+2join
j3J[29;4H[K[30;1H:.,+2join
j3J[31;4H[K[32;1H:.,+2join
jj3J[33;5H[K[34;1HENDTEST[35;1H[K[36;1H{[36;2H[K[37;1H[K[38;1H/*[38;3H[K[39;1H * Make sure the previous comment leader is not removed.
 */[40;4H[K[41;1H[K[42;1H/*[42;3H[K[43;1H * Make sure the previous comment leader is not removed.
 */[44;4H[K[45;1H[K[46;1H// Should the next comment leader be left alone?
// Yes.[47;8H[K[48;1H[K[49;1H// Should the next comment leader be left alone?
// Yes.[51;1H[K[52;1H/* Here the comment leader should be left intact. */
// And so should this one.[54;1H[K[55;1H/* Here the comment leader should be left intact. */
// And so should this one.[21;1H[?12l[?25h[?25l[57;4Hmore lines[57;14H[K[21;1Hasdfasdf.
asdf[22;5H[K[23;1Hasdfasdf. [23;11H[K[24;1Hasdf[24;6H[K[25;1Hasdfasdf.  [25;12H[K[26;1Hasdf[26;5H[K[27;1Hasdfasdf.
asdf[28;5H[K[29;1Hasdfasdf.
asdf[30;5H[K[31;1Hasdfasdf.
asdf[32;5H[K[33;1Hasdfasdf.
asdf[34;5H[K[35;1Hasdfasdf
asdf
asdfasdf
asdf
asdfasdf  [39;11H[K[40;1Hasdf
asdfasdf
asdf
asdfasdf        [43;18H[K[44;1Hasdf
asdfasdf
asdf[46;5H[K[47;1Hasdfasdf
asdf
zx cvn.[49;8H[K[50;1Has dfg?
hjkl iop!
ert[52;4H[K[53;1Hzx cvn.[53;8H[K[54;1Has dfg?
hjkl iop![55;10H[K[56;1Hert[56;4H[K[21;1H[?12l[?25h[?25l[21;56r[56;1H
[1;57r[21;5Hasdf. asdf[57;1H[K[21;10H[?12l[?25h[22;10H[?25l[22;56r[56;1H
[1;57r[22;5Hasdf. asdf[56;1HSTARTTEST[22;11H[?12l[?25h[23;11H[?25l[23;56r[56;1H
[1;57r[23;5Hasdf.  asdf[56;1H/^{/+1[23;12H[?12l[?25h[24;16H[?25l[24;56r[56;1H
[1;57r[24;5Hasdf.[7Casdf[56;1H:set comments=s1:/*,mb:*,ex:*/,://[24;17H[?12l[?25h[25;16H[?25l[25;56r[56;1H
[1;57r[25;5Hasdf.[7Casdf[56;1H:set nojoinspaces fo=j[25;17H[?12l[?25h[26;17H[?25l[26;56r[56;1H
[1;57r[26;5Hasdf.[8Casdf[56;1H:set backspace=eol,start[26;18H[?12l[?25h[27;24H[?25l[27;56r[56;1H
[1;57r[27;5Hasdf.[15Casdf[56;1H:.,+3join[27;25H[?12l[?25h[28;8H[?25l[28;56r[56;1H
[1;57r[28;5Hasdf asdf[56;1Hj4J[28;9H[?12l[?25h[29;9H[?25l[29;56r[56;1H
[1;57r[29;5Hasdf asdf[56;1H:.,+2join[29;10H[?12l[?25h[30;10H[?25l[30;56r[56;1H
[1;57r[30;5Hasdf  asdf[56;1Hj3J[30;11H[?12l[?25h[31;16H[?25l[31;56r[56;1H
[1;57r[31;5Hasdf[8Casdf[56;1H:.,+2join[31;17H[?12l[?25h[32;17H[?25l[32;56r[56;1H
[1;57r[32;5Hasdf[9Casdf[56;1Hj3J[32;18H[?12l[?25h[33;16H[?25l[33;56r[56;1H
[1;57r[33;5Hasdf[8Casdf[56;1H:.,+2join[33;17H[?12l[?25h[34;24H[?25l[34;56r[56;1H
[1;57r[34;5Hasdf[16Casdf[56;1Hjj3J[34;25H[?12l[?25h[35;7Hzx cv[37;6Hhjkl i[35;7H[?25l[35;56r[35;1H[3M[1;57r[35;1Hzx cvn. as dfg? hjkl iop! ert[54;1HENDTEST

{[35;26H[?12l[?25h er[?25lt er[?12l[?25hzx cv[26C[?25lrn[?12l[?25h[35;23H[10C[?25lnop[?12l[?25h[?25l[57;1H:[?12l[?25hset cpoptions+=j[?25l[35;35H[?12l[?25h[36;7Hzx cv[38;6Hhjkl i[36;7H[?25l[36;56r[36;1H[3M[1;57r[36;1Hzx cvn. as dfg? hjkl iop! ert[55;1H/*
 * Make sure the previous comment leader is not removed.[57;1H[K[36;26H[?12l[?25h er[?25lt er[?12l[?25hzx cv[26C[?25lrn[?12l[?25h[36;23H[10C[?25lnop[?12l[?25h[?25l[57;1H:[?12l[?25hset cpoptions-=j joinspaces[?25l[36;35H[?12l[?25h
[?25l[57;1H37 more lines[57;14H[K[38;1Hasdfasdf.
asdf[39;5H[K[40;1Hasdfasdf. [40;11H[K[41;1Hasdf[41;6H[K[42;1Hasdfasdf.  [42;12H[K[43;1Hasdf[43;5H[K[44;1Hasdfasdf.
asdf[45;5H[K[46;1Hasdfasdf.
asdf[47;5H[K[48;1Hasdfasdf.
asdf[49;5H[K[50;1Hasdfasdf.
asdf[51;5H[K[52;1Hasdfasdf
asdf
asdfasdf
asdf
asdfasdf  [56;11H[K[38;1H[?12l[?25h[?25l[38;56r[56;1H
[1;57r[38;5Hasdf.  asdf[56;1Hasdf[57;1H[K[38;10H[?12l[?25h[39;10H[?25l[39;56r[56;1H
[1;57r[39;5Hasdf.  asdf[56;1Hasdfasdf[39;11H[?12l[?25h[40;11H[?25l[40;56r[56;1H
[1;57r[40;5Hasdf.  asdf[56;1Hasdf[40;12H[?12l[?25h[41;16H[?25l[41;56r[56;1H
[1;57r[41;5Hasdf.[7Casdf[56;1Hasdfasdf[41;17H[?12l[?25h[42;16H[?25l[42;56r[56;1H
[1;57r[42;5Hasdf.[7Casdf[56;1Hasdf[42;17H[?12l[?25h[43;17H[?25l[43;56r[56;1H
[1;57r[43;5Hasdf.[8Casdf[56;1Hasdfasdf[43;18H[?12l[?25h[44;24H[?25l[44;56r[56;1H
[1;57r[44;5Hasdf.[15Casdf[56;1Hasdf[44;25H[?12l[?25h[45;8H[?25l[45;56r[56;1H
[1;57r[45;5Hasdf asdf[56;1Hasdfasdf[45;9H[?12l[?25h[46;9H[?25l[46;56r[56;1H
[1;57r[46;5Hasdf asdf[56;1Hasdf[46;10H[?12l[?25h[47;10H[?25l[47;56r[56;1H
[1;57r[47;5Hasdf  asdf[56;1Hzx cvn.[47;11H[?12l[?25h[48;16H[?25l[48;56r[56;1H
[1;57r[48;5Hasdf[8Casdf[56;1Has dfg?[48;17H[?12l[?25h[49;17H[?25l[49;56r[56;1H
[1;57r[49;5Hasdf[9Casdf[56;1Hhjkl iop![49;18H[?12l[?25h[50;16H[?25l[50;56r[56;1H
[1;57r[50;5Hasdf[8Casdf[56;1Hert[50;17H[?12l[?25h[51;24H[?25l[51;56r[56;1H
[1;57r[51;5Hasdf[16Casdf[56;1Hzx cvn.[51;25H[?12l[?25h[52;7Hzx cv[54;6Hhjkl i[52;7H[?25l.  as dfg?  hjkl iop!  ert
zx cvn.
as dfg?[54;8H[K[55;1Hhjkl iop!
ert[56;4H[K[52;28H[?12l[?25h  er[?25lt  e[?12l[?25hzx cv[29C[?25len[?12l[?25h[52;25H[11C[?25lnop[?12l[?25h[?25l[57;1H:[?12l[?25hset cpoptions+=j[?25l[52;38H[?12l[?25h[53;7Hzx cv[55;6Hhjkl i[53;7H[?25l.  as dfg? hjkl iop! ert[54;1H[K[55;1HSTARTTEST
/^{/+1[53;27H[?12l[?25h er[?25lt er[?12l[?25hzx cv[27C[?25lrn[?12l[?25h[53;24H[10C[?25lnop[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpoptions-=j nojoinspaces compatible[?25l[53;36H[?12l[?25h
[?25l


37 more lines[57;14H[K[55;1Hasdfasdf.
asdf[56;5H[K[55;1H[?12l[?25h[?25l[11Casdf
asdfasdf.[55;10H[?12l[?25h[56;10H[?25l  asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hasdfasdf.[57;1H[K[56;11H[?12l[?25h[?25l asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hasdfasdf.      [?12l[?25h[?25l asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hasdfasdf.      [?12l[?25h[?25l asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hasdfasdf.[7C[?12l[?25h[?25l asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hasdfasdf.[14C[?12l[?25h[?25l asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hasdfasdf[?12l[?25h[?25lf asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hasdfasdf[?12l[?25h[?25l asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hasdfasdf [?12l[?25h[?25l asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hasdfasdf[7C[?12l[?25h[?25l asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hasdfasdf[8C[?12l[?25h[?25l asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hasdfasdf[7C[?12l[?25h[?25l asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hasdfasdf[15C[?12l[?25h[?25l asdf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hzx cvn.[?12l[?25h[?25l.  as dfg? hjkl iop! ert[56;8H[?12l[?25h[22C[?25lt  a[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hzx cvn.[?12l[?25h[?25l
/[?12l[?25hSTARTTEST/-2[?25l[11C+-24 fewer lines[57;14H[K[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[1;56r[56;1H
[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H12 lines, 147 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[12M[1;57r[45;1H:set comments=s1:/*,mb:*,ex:*/,://
:set nojoinspaces fo=j
:set backspace=eol,start
:.,+3join
j4J
:.,+2join
j3J
:.,+2join
j3J
:.,+2join
jj3J
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[1;56r[1;1H[2M[1;57r[55;1H{[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset comments=s1:/*,mb:*,ex:*/,://[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nojoinspaces fo=j[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset backspace=eol,start[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,+3join[?25l[56;1H/* Make sure the previous comment leader is not removed. */[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l/* Make sure the previous comment leader is not removed. */[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h.,+2join[?25l[56;1H// Should the next comment leader be left alone? Yes.[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l// Should the next comment leader be left alone? Yes.[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h.,+2join[?25l[56;1H/* Here the comment leader should be left intact. */ // And so should this one.[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l/* Here the comment leader should be left intact. */ // And so should this one.[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h.,+2join[?25l[56;1Hif (condition) // Remove the next comment leader! OK, I will.[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Haction();[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25lif (condition) // Remove the next comment leader! OK, I will.[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Haction();[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[3M[1;57r[54;1H}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:" Test with backspace set to the non-compatible setting[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H17 lines, 347 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[17M[1;57r[40;1H/^\d\+ this
:set cp bs=2
Avim1[34m^U^[[m
Avim2[34m^G[mu[34m^U^[[m
:set cpo-=<
:inoremap <c-u> <left><c-u>
Avim3[34m^U^[[m
:iunmap <c-u>
Avim4[34m^U^U^[[m
:" Test with backspace set to the compatible setting
:set backspace= visualbell
A vim5[34m^[[mA[34m^U^U^[[m
A vim6[34m^[[mAzwei[34m^G[mu[34m^U^[[m
:inoremap <c-u> <left><c-u>
A vim7[34m^U^U^[[m
:set compatible novisualbell
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H1 this shouldn't be deleted[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test with backspace set to the non-compatible setting[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^\d\+ this[?25l[1;56r[56;1H
[1;57r[56;1H2 this shouldn't be deleted[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset cp bs=2[?25l[56;1H[?12l[?25h[?25l[26C[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H3 this shouldn't be deleted[57;1H[K[56;27H[?12l[?25hd    [?25lvim2[?12l[?25h[?25l[56;28H[K[56;27H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H4 this should be deleted[?12l[?25h[?25l
:[?12l[?25hset cpo-=<[?25l[56;24H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hinoremap <c-u> <left><c-u>[?25l[56;24H[?12l[?25h[?25ld3[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H5 this shouldn't be deleted[57;1H[K[56;24H[?12l[?25h[?25l
:[?12l[?25hiunmap <c-u>[?25l[56;24H[?12l[?25h[?25l[56;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H6 this shouldn't be deleted[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h" Test with backspace set to the compatible setting[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset backspace= visualbell[?25l[56;1H[?12l[?25h[?25l[28Cvim5[?12l[?25h[?5h[?5l[?5h[?5l[?25l[1;56r[56;1H
[1;57r[56;1H7 this shouldn't be deleted[57;1H[K[56;27H[?12l[?25h[?25ld vim6[?12l[?25h6    [?25lzwei[?12l[?25h[?25l[56;33H[K[56;32H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H8 this shouldn't be deleted (not touched yet)[56;32H[?12l[?25h[?25l
:[?12l[?25hinoremap <c-u> <left><c-u>[?25l[56;32H[?12l[?25h[?5h[?5l[?5h[?5l[?25l[15Cvim7[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset compatible novisualbell[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[1;56r[56;1H
[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H21 lines, 356 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[21M[1;57r[36;1H:set comments=sO:*\ -,mO:*\ \ ,exO:*/
:set comments+=s1:/*,mb:*,ex:*/,://
:set comments+=s1:>#,mb:#,ex:#<,:<
:set cpoptions-=j joinspaces fo=j
:set backspace=eol,start
:.,+3join
j4J
:.,+8join
j9J
:.,+2join
j3J
:.,+2join
j3J
:.,+2join
jj3J
j:.,+2join
jj3J
j:.,+5join
j6J
oSome code![34m^M[m// Make sure backspacing does not remove this comment leader.[34m^[[m0i[34m^H^[[m
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[1;56r[1;1H[2M[1;57r[55;1H{[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset comments=sO:*\ -,mO:*\ \ ,exO:*/[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset comments+=s1:/*,mb:*,ex:*/,://[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset comments+=s1:>#,mb:#,ex:#<,:<[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpoptions-=j joinspaces fo=j[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset backspace=eol,start[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,+3join[?25l[56;1H/* Make sure the previous comment leader is not removed.  */[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l/* Make sure the previous comment leader is not removed.  */[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h.,+8join[?25l[56;1H/* List: item1 foo bar baz foo bar baz item2 foo bar baz foo bar baz */[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l/* List: item1 foo bar baz foo bar baz item2 foo bar baz foo bar baz */[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h.,+2join[?25l[56;1H// Should the next comment leader be left alone?  Yes.[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l// Should the next comment leader be left alone?  Yes.[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h.,+2join[?25l[56;1H/* Here the comment leader should be left intact. */ // And so should this one.[?12l[?25h[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l/* Here the comment leader should be left intact. */ // And so should this one.[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h.,+2join[?25l[56;1Hif (condition) // Remove the next comment leader!  OK, I will.[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Haction();[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25lif (condition) // Remove the next comment leader!  OK, I will.[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Haction();[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h.,+2join[?25l[56;1Hint i = 7 /* foo *// 3 // comment[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;2H;[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25lint i = 7 /* foo *// 3 // comment[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;2H;[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h.,+5join[?25l[56;1H># Note that the last character of the ending comment leader (left angle bracket) is a[1m[34m@                                                                                      [1;56r[m[1;1H[3M[1;57r[53;1H># Note that the last character of the ending comment leader (left angle bracket) is a  [54;1Hcomment leader itself. Make sure that this comment leader is not removed from the next  [55;1Hline #< < On this line a new comment is opened which spans 2 lines. This comment shouldd[56;1H retain its comment leader.[57;1H[K[53;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l># Note that the last character of the ending comment leader (left angle bracket) is a[1m[34m@                                                                                      [1;56r[m[1;1H[3M[1;57r[53;1H># Note that the last character of the ending comment leader (left angle bracket) is a  [54;1Hcomment leader itself. Make sure that this comment leader is not removed from the next  [55;1Hline #< < On this line a new comment is opened which spans 2 lines. This comment shouldd[56;1H retain its comment leader.[53;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1HSome code!
// Make sure backspacing does not remove this comment leader.[?12l[?25h[?25l[55;11H// Make sure backspacing does not remove this comment leader.
}[56;2H[K[55;10H[?12l[?25h
[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:g/^STARTTEST/.,/^ENDTEST/d[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3 lines, 61 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[56;19H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:?firstline?+1,$w! test.out[57;1H[K[56;19H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hg/^STARTTEST/.,/^ENDTEST/d[?25l74 fewer lines[57;15H[K[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h?firstline?+1,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 97 lines, 3018 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test29 = test61; then \
#	  if diff test.out test29.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test29.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test29.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test31.failed test.ok test.out X* viminfo
cp test31.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test31.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test31.in" 95 lines, 1832 characters[1;1HTest for commands that close windows and/or buffers:
:quit
:close
:hide
:only
:sall
:all
:ball
:buf
:edit

STARTTEST
:so small.vim
GA 1[34m^[[m:$w! Xtest1
$r2:$w! Xtest2
$r3:$w! Xtest3
:n! Xtest1 Xtest2
A 1[34m^[[m:set hidden
:" test for working :n when hidden set; write "testtext 2"
:n
:w! test.out
:" test for failing :rew when hidden not set; write "testtext 2 2"
:set nohidden
A 2[34m^[[m:rew
:w >>test.out
:" test for working :rew when hidden set; write "testtext 1 1"
:set hidden
:rew
:w >>test.out
:" test for :all keeping a buffer when it's modified; write "testtext 1 1 1"
:set nohidden
A 1[34m^[[m:sp
:n Xtest2 Xtest3
:all
:1wincmd w
:w >>test.out
:" test abandoning changed buffer, should be unloaded even when 'hidden' set
:" write "testtext 2 2" twice
:set hidden
A 1[34m^[[m:q!
:w >>test.out
:unhide
:w >>test.out
:" test ":hide" hides anyway when 'hidden' not set; write "testtext 3"
:set nohidden
A 2[34m^[[m:hide
:w >>test.out
:" test ":edit" failing in modified buffer when 'hidden' not set
:" write "testtext 3 3"
A 3[34m^[[m:e Xtest1
:w >>test.out
:" test ":edit" working in modified buffer when 'hidden' set; write "testtext 1"
:set hidden
:e Xtest1
:w >>test.out
:" test ":close" not hiding when 'hidden' not set in modified buffer;[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for commands that close windows and/or buffers:[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[12;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[13;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 80 lines, 1697 characters written[13;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[13;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[37M[1;57r[20;1H:" write "testtext 3 3 3"
:sp Xtest3
:set nohidden
A 3[34m^[[m:close
:w >>test.out
:" test ":close!" does hide when 'hidden' not set in modified buffer;
:" write "testtext 1"
A 3[34m^[[m:close!
:w >>test.out
:set nohidden
:" test ":all!" hides changed buffer; write "testtext 2 2 2"
:sp Xtest4
GA 4[34m^[[m:all!
:1wincmd w
:w >>test.out
:"
:" test ":q!" and hidden buffer.
:bw! Xtest1 Xtest2 Xtest3 Xtest4
:sp Xtest1
:wincmd w
:bw!
:set modified
:bot sp Xtest2
:set modified
:bot sp Xtest3
:set modified
:wincmd t
:hide
:q!
:w >>test.out
:q!
:w >>test.out
:q!
:call append(line('$'), "Oh, Not finished yet.")
:w >>test.out
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Htesttext[57;1H[K[56;1H[?12l[?25h[?25l[9C1[?12l[?25h[?25l
:[?12l[?25h$w! Xtest1[?25l"Xtest1" [57;10H[K[57;10H[New File] 1 line, 11 characters written[56;10H[?12l[?25h[?25l2[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$w! Xtest2[?25l"Xtest2" [57;10H[K[57;10H[New File] 1 line, 11 characters written[56;10H[?12l[?25h[?25l3[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$w! Xtest3[?25l"Xtest3" [57;10H[K[57;10H[New File] 1 line, 11 characters written[56;10H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hn! Xtest1 Xtest2[?25l"Xtest1" [57;10H[K[57;10H1 line, 11 characters[1;1Htesttext 1
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[11C1[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset hidden[?25l[1;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test for working :n when hidden set; write "testtext 2"[?25l[1;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hn[?25l"Xtest2" 1 line, 11 characters[1;10H2[1;12H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 1 line, 11 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test for failing :rew when hidden not set; write "testtext 2 2"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nohidden[?25l[1;1H[?12l[?25h[?25l[11C2[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hrew[?25l[1m[37m[41mE37: No write since last change (add ! to override)[1;12H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 13 characters appended[1;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test for working :rew when hidden set; write "testtext 1 1"[?25l[1;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset hidden[?25l[1;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hrew[?25l"Xtest1" [Modified] line 1 of 1 --100%-- col 1 (file 1 of 2)[1;10H1 1[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 13 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test for :all keeping a buffer when it's modified; write "testtext 1 1 1"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nohidden[?25l[1;1H[?12l[?25h[?25l[13C1[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsp[?25l[28;1H[1m[7mXtest1 [+]                                                                             [m[29;1Htesttext 1 1 1[29;15H[K[56;1H[7mXtest1 [+]                                                                             [1;14H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hn Xtest2 Xtest3[?25l"Xtest2" [Modified] line 1 of 1 --100%-- col 1 (file 1 of 2)[1;10H2 2[1;14H[K[28;6H[1m[7m2 [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hall[?25l"Xtest3" 1 line, 11 characters[27m[23m[m[H[2J[1;1Htesttext 1 1 1
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[7mXtest1 [+]                                                                             [m[20;1Htesttext 2 2
[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [m[37;1H[1m[7mXtest2 [+]                                                                             [m[38;1Htesttext 3
[1m[34m~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7mXtest3                                                                                 [20;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h1wincmd w[?25l[19;1H[1m[7mXtest1 [+]                                                                             [m[37;1H[7mXtest2 [+][m[1m[7m [m[7m                                                                             [1;14H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 15 characters appended[1;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test abandoning changed buffer, should be unloaded even when 'hidden' set[?25l[1;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" write "testtext 2 2" twice[?25l[1;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset hidden[?25l[1;14H[?12l[?25h[?25l1 1[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hq![?25l[27m[23m[m[H[2J[1;1Htesttext 2 2
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7mXtest2 [+]                                                                             [m[29;1Htesttext 3
[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7mXtest3                                                                                 [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 13 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hunhide[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 13 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test ":hide" hides anyway when 'hidden' not set; write "testtext 3"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nohidden[?25l[1;1H[?12l[?25h[?25l[13C2[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hhide[?25l[1;10H3[1;12H[K[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 11 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test ":edit" failing in modified buffer when 'hidden' not set[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" write "testtext 3 3"[?25l[1;1H[?12l[?25h[?25l[11C3[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xtest1[?25l[1m[37m[41mE37: No write since last change (add ! to override)[1;12H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 13 characters appended[1;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test ":edit" working in modified buffer when 'hidden' set; write "testtext 1"[?25l[1;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset hidden[?25l[1;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xtest1[?25l"Xtest1" 1 line, 11 characters[1;10H1[1;12H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 11 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test ":close" not hiding when 'hidden' not set in modified buffer;[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" write "testtext 3 3 3"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsp Xtest3[?25l"Xtest3" [Modified] line 1 of 1 --100%-- col 1 (file 2 of 2)[1;10H3 3[28;1H[1m[7mXtest3 [+]                                                                             [m[29;1Htesttext 1[29;11H[K[56;1H[7mXtest1                                                                                 [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset nohidden[?25l[1;1H[?12l[?25h[?25l[13C3[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hclose[?25l[1m[37m[41mE37: No write since last change (add ! to override)[1;14H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 15 characters appended[1;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test ":close!" does hide when 'hidden' not set in modified buffer;[?25l[1;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" write "testtext 1"[?25l[1;14H[?12l[?25h[?25l3 3[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hclose![?25l[1;10H1[1;12H[K[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 11 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nohidden[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test ":all!" hides changed buffer; write "testtext 2 2 2"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsp Xtest4[?25l"Xtest4" [New File][1;1H[K[28;1H[1m[7mXtest4                                                                                 [m[29;1Htesttext 1[29;11H[K[56;1H[7mXtest1                                                                                 [1;1H[?12l[?25h[?25l[m 4[28;8H[1m[7m[+][1;2H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hall![?25l"Xtest2" [Modified] line 1 of 1 --100%-- col 1 (file 1 of 2)
"Xtest3" [Modified] line 1 of 1 --100%-- col 1 (file 2 of 2)
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h1wincmd w[?25l[1;1H[2L[1;1Htesttext 2 2 2
[1m[34m~                                                                                      [m[28;6H[1m[7m2 [m[29;10H3 3 3 3[56;6H[7m3 [+][m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 15 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test ":q!" and hidden buffer.[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbw! Xtest1 Xtest2 Xtest3 Xtest4[?25l"test31.in"[57;13H[K[57;13H95 lines, 1832 characters
4 buffers wiped out
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hsp Xtest1[?25l"Xtest1" [57;10H[K[57;10H1 line, 11 characters[1;1H[2L[1;1Htesttext 1
[1m[34m~                                                                                      [m[28;6H[1m[7m1     [m
GA 4[34m^[[m:all![29;12H[K[30;1H:1wincmd w[30;11H[K[31;1H:w >>test.out[31;14H[K[32;1H:"[32;3H[K[33;1H:" test ":q!" and hidden buffer.[33;33H[K[34;1H:bw! Xtest1 Xtest2 Xtest3 Xtest4[34;33H[K[35;1H:sp Xtest1[35;11H[K[36;1H:wincmd w[36;10H[K[37;1H:bw![37;5H[K[38;1H:set modified[38;14H[K[39;1H:bot sp Xtest2[39;15H[K[40;1H:set modified[40;14H[K[41;1H:bot sp Xtest3[41;15H[K[42;1H:set modified[42;14H[K[43;1H:wincmd t[43;10H[K[44;1H:hide[44;6H[K[45;1H:q![45;4H[K[46;1H:w >>test.out[46;14H[K[47;1H:q![47;4H[K[48;1H:w >>test.out[48;14H[K[49;1H:q![49;4H[K[50;1H:call append(line('$'), "Oh, Not finished yet.")[50;49H[K[51;1H:w >>test.out[51;14H[K[52;1H:qa![52;5H[K[53;1HENDTEST[53;8H[K[54;1H[K[55;1Htesttext[55;9H[K[56;1H[7mtest31.in [m[57;1H[K[57;1H"Xtest1" 1 line, 11 characters[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd w[?25l[28;1H[7mXtest1[m[1m[7m [m[7m                                                                                 [m[56;1H[1m[7mtest31.in                                                                              [55;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hbw![?25l[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset modified[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbot sp Xtest2[?25l"Xtest2" [57;10H[K[57;10H1 line, 11 characters[28;1H[7mXtest1 [+]                                                                             [m[29;1Htesttext 2[29;11H[K[56;1H[1m[7mXtest2                                                                                 [29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset modified[?25l[56;8H[1m[7m[+][29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hbot sp Xtest3[?25l"Xtest3" [57;10H[K[57;10H1 line, 11 characters[27m[23m[m[H[2J[1;1Htesttext 1
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[7mXtest1 [+]                                                                             [m[20;1Htesttext 2
[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [m[37;1H[7mXtest2 [+]                                                                             [m[38;1Htesttext 3
[1m[34m~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7mXtest3                                                                                 [38;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hset modified[?25l[56;8H[1m[7m[+][38;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hwincmd t[?25l[19;1H[1m[7mXtest1 [+]                                                                             [m[56;1H[7mXtest3 [+][m[1m[7m [m[7m                                                                             [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hhide[?25l[27m[23m[m[H[2J[1;1Htesttext 2
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7mXtest2 [+]                                                                             [m[29;1Htesttext 3
[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7mXtest3 [+]                                                                             [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hq![?25l[1;10H3[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 11 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hq![?25l[1m[37m[41mE37: No write since last change[m
[1m[37m[41mE162: No write since last change for buffer "Xtest1"[m
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 11 characters appended
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hq![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test31 = test61; then \
#	  if diff test.out test31.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test31.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test31.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test33.failed test.ok test.out X* viminfo
cp test33.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test33.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test33.in" 34 lines, 616 characters[1;1HTest for 'lisp'
If the lisp feature is not enabled, this will fail!

STARTTEST
:so small.vim
:set lisp
/^(defun
=G:/^(defun/,$w! test.out
:q!
ENDTEST

(defun html-file (base)
(format nil "~(~A~).html" base))

(defmacro page (name title &rest body)
(let ((ti (gensym)))
`(with-open-file (*standard-output*
(html-file ,name)
:direction :output
:if-exists :supersede)
(let ((,ti ,title))
(as title ,ti)
(with center
(as h2 (string-upcase ,ti)))
(brs 3)
,@body))))

;;; Utilities for generating links

(defmacro with-link (dest &rest body)
`(progn
(format t "<a href=\"~A\">" (html-file ,dest))
,@body
(princ "</a>")))
[1m[34m~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for 'lisp'[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 5 lines, 63 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[10;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[11;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[11;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset lisp[?25l[11;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^(defun[?25l[12;1H[?12l[?25h[?25l[57;1H22 lines to indent...23[7Cindented [57;19H[K[13;1H  (format nil "~(~A~).html" base))


  (let ((ti (gensym)))
       `(with-open-file (*standard-output*
                 [8C(html-file ,name)
                  [7C:direction :output
                         :if-exists :supersede)
                        (let ((,ti ,title))
              [15C(as title ,ti)
            [17C(with center
                            [7C(as h2 (string-upcase ,ti)))
       [22C(brs 3)
          [19C,@body))))[31;1H  `(progn
    (format t "<a href=\"~A\">" (html-file ,dest))
    ,@body
    (princ "</a>")))[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^(defun/,$w! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 23 lines, 544 characters written[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hq![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test33 = test61; then \
#	  if diff test.out test33.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test33.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test33.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test34.failed test.ok test.out X* viminfo
cp test34.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test34.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test34.in" 87 lines, 1833 characters[1;1HTest for user functions.
Also test an <expr> mapping calling a function.
Also test that a builtin function cannot be replaced.
Also test for regression when calling arbitrary expression.

STARTTEST
:so small.vim
:function Table(title, ...)
:  let ret = a:title
:  let idx = 1
:  while idx <= a:0
:    exe "let ret = ret . a:" . idx
:    let idx = idx + 1
:  endwhile
:  return ret
:endfunction
:function Compute(n1, n2, divname)
:  if a:n2 == 0
:    return "fail"
:  endif
:  exe "let g:" . a:divname . " = ". a:n1 / a:n2
:  return "ok"
:endfunction
:func Expr1()
:  normal! v
:  return "111"
:endfunc
:func Expr2()
:  call search('XX', 'b')
:  return "222"
:endfunc
:func ListItem()
:  let g:counter += 1
:  return g:counter . '. '
:endfunc
:func ListReset()
:  let g:counter = 0
:  return ''
:endfunc
:func FuncWithRef(a)
:  unlet g:FuncRef
:  return a:a
:endfunc
:let g:FuncRef=function("FuncWithRef")
:let counter = 0
:inoremap <expr> ( ListItem()
:inoremap <expr> [ ListReset()
:imap <expr> + Expr1()
:imap <expr> * Expr2()
:let retval = "nop"
/^here
C[34m^R[m=Table("xxx", 4, "asdf")
 [34m^R[m=Compute(45, 0, "retval")
 [34m^R[m=retval
 [34m^R[m=Compute(45, 5, "retval")
 [34m^R[m=retval[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for user functions.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[6;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 78 lines, 1621 characters written[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[7;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[29M[1;57r[28;2H[34m^R[m=g:FuncRef(333)

XX+-XX
---*---
(one
(two
[(one again[34m^[[m:call append(line('$'), max([1, 2, 3]))
:call extend(g:, {'max': function('min')})
:call append(line('$'), max([1, 2, 3]))
:try
:    " Regression: the first line below used to throw ?E110: Missing ')'?
:    " Second is here just to prove that this line is correct when not skipping
:    " rhs of &&.
:    $put =(0&&(function('tr'))(1, 2, 3))
:    $put =(1&&(function('tr'))(1, 2, 3))
:catch
:    $put ='!!! Unexpected exception:'
:    $put =v:exception
:endtry
:$-9,$w! test.out
:delfunc Table
:delfunc Compute
:delfunc Expr1
:delfunc Expr2
:delfunc ListItem
:delfunc ListReset
:unlet retval counter
:q!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction Table(title, ...)[?25l
:  [?12l[?25h:  let ret = a:title
[?25l:  [?12l[?25h:  let idx = 1
[?25l:  [?12l[?25h:  while idx <= a:0
[?25l:    [?12l[?25h:    exe "let ret = ret . a:" . idx
[?25l:    [?12l[?25h:    let idx = idx + 1
[?25l:    [?12l[?25h:  endwhile
[?25l:  [?12l[?25h:  return ret
[?25l:  [?12l[?25h:endfunction[1;1H[8L[?25l[1;1H:endfunc
:func ListItem()
:  let g:counter += 1
:  return g:counter . '. '
:endfunc
:func ListReset()
:  let g:counter = 0
:  return ''[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hfunction Compute(n1, n2, divname)[?25l
:  [?12l[?25h:  if a:n2 == 0
[?25l:    [?12l[?25h:    return "fail"
[?25l:    [?12l[?25h:  endif
[?25l:  [?12l[?25h:  exe "let g:" . a:divname . " = ". a:n1 / a:n2
[?25l:  [?12l[?25h:  return "ok"
[?25l:  [?12l[?25h:endfunction[1;1H[6L[?25l[1;1H:endfunc
:func ListItem()
:  let g:counter += 1
:  return g:counter . '. '
:endfunc
:func ListReset()[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hfunc Expr1()[?25l
:  [?12l[?25h:  normal! v
[?25l:  [?12l[?25h:  return "111"
[?25l:  [?12l[?25h:endfunc[1;1H[3L[?25l[1;1H:endfunc
:func ListItem()
:  let g:counter += 1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hfunc Expr2()[?25l
:  [?12l[?25h:  call search('XX', 'b')
[?25l:  [?12l[?25h:  return "222"
[?25l:  [?12l[?25h:endfunc[1;1H[3L[?25l[1;1H:endfunc
:func ListItem()
:  let g:counter += 1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hfunc ListItem()[?25l
:  [?12l[?25h:  let g:counter += 1
[?25l:  [?12l[?25h:  return g:counter . '. '
[?25l:  [?12l[?25h:endfunc[1;1H[3L[?25l[1;1H:endfunc
:func ListItem()
:  let g:counter += 1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hfunc ListReset()[?25l
:  [?12l[?25h:  let g:counter = 0
[?25l:  [?12l[?25h:  return ''
[?25l:  [?12l[?25h:endfunc[1;1H[3L[?25l[1;1H:endfunc
:func ListItem()
:  let g:counter += 1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hfunc FuncWithRef(a)[?25l
:  [?12l[?25h:  unlet g:FuncRef
[?25l:  [?12l[?25h:  return a:a
[?25l:  [?12l[?25h:endfunc[1;1H[3L[?25l[1;1H:endfunc
:func ListItem()
:  let g:counter += 1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet g:FuncRef=function("FuncWithRef")[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet counter = 0[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hinoremap <expr> ( ListItem()[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hinoremap <expr> [ ListReset()[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25himap <expr> + Expr1()[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25himap <expr> * Expr2()[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet retval = "nop"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^here[?25l[1;56r[56;1H
[1;57r[56;1Hhere[57;1H[K[56;1H[?12l[?25h[?25lher$
=[?12l[?25hTable("xxx", 4, "asdf")[?25l[57;1H[K[57;1H=[?12l[?25hCompute(45, 0, "retval")[?25l[57;1H[K[57;1H=[?12l[?25hretval[?25l[57;1H[K[57;1H=[?12l[?25hCompute(45, 5, "retval")[?25l[57;1H[K[57;1H=[?12l[?25hretval[?25l[57;1H[K[57;1H=[?12l[?25hg:FuncRef(333)
[?25l[1m[37m[41mError detected while processing function Expr1:[m
[33mline    1:[m
[1m[37m[41mE523: Not allowed here[m
[32mPress ENTER or type command to continue[?12l[?25h[m[1;1H[4L[?25l[1;1H:  let g:counter = 0
:  return ''
:endfunc
:func FuncWithRef(a)
:  unlet g:FuncRef
:  return a:a[6;14H[K[7;2Hendfunc[7;9H[K[8;2Hlet g:FuncRef=function("FuncWithRef")
:let counter = 0[9;17H[K[10;2Hinoremap <expr> ( ListItem()
:inoremap <expr> [ ListReset()
:imap <expr> + Expr1()
:imap <expr> * Expr2()[13;23H[K[14;6Hretval = "nop"
/^he[15;7H[K[16;1HC[34m^R[m=Table("xxx", 4, "asdf")[16;28H[K[17;1H [34m^R[m=Compute(45, 0, "retval")
 [34m^R[m=retval[18;11H[K[19;1H [34m^R[m=Compute(45, 5, "retval")
 [34m^R[m=retval
 [3Cg:FuncRef(333)[21;19H[K[22;2H[K[23;1HXX+-XX[23;7H[K[24;1H---*---[24;8H[K[25;1H(one[25;5H[K[26;1H(two[26;5H[K[27;1H[(one again[34m^[[m:call append(line('$'), max([1, 2, 3]))
:call extend(g:, {'max': function('min')})
:call append(line('$'), max([1, 2, 3]))
:try
:    " Regression: the first line below used to throw ?E110: Missing ')'?
:    " Second is here just to prove that this line is correct when not skipping
:    " rhs of &&.[33;18H[K[34;2H    $put =(0&&(function('tr'))(1, 2, 3))
:    $put =(1&&(function('tr'))(1, 2, 3))
:catch[36;8H[K[37;6H$put ='!!! Unexpected exception:'[37;39H[K[38;6H$put =v:exception
:endtry[39;8H[K[40;2H$-9,$w! test.out[40;18H[K[41;2Hdelfunc Table
:delfunc Compute[42;17H[K[43;2Hdelfunc Expr1[43;15H[K[44;2Hdelfunc Expr2
:delfunc ListItem[46;10HListReset
:unlet retval counter
:q![48;4H[K[49;1HENDTEST[49;8H[K[50;1H[K[51;1Hxxx4asdf fail nop ok 9 333
XX111-XX[52;9H[K[53;1H---222---
1. one[54;7H[K[55;1H2. two[56;1H[K[57;1H[K[56;1H[?12l[?25h[?25l1. one again[?12l[?25h[?25l
:[?12l[?25hcall append(line('$'), max([1, 2, 3]))[?25l[56;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall extend(g:, {'max': function('min')})[?25l[1m[37m[41mE704: Funcref variable name must start with a capital: max[56;12H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall append(line('$'), max([1, 2, 3]))[?25l[56;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htry[?25l
:  [?12l[?25h:    " Regression: the first line below used to throw ?E110: Missing ')'?
[?25l:  [?12l[?25h:    " Second is here just to prove that this line is correct when not skipping
[?25l:  [?12l[?25h:    " rhs of &&.
[?25l:  [?12l[?25h:    $put =(0&&(function('tr'))(1, 2, 3))
[?25l:  [?12l[?25h:    $put =(1&&(function('tr'))(1, 2, 3))
[?25l:  [?12l[?25h:catch
[?25l:  [?12l[?25h:    $put ='!!! Unexpected exception:'
[?25l:  [?12l[?25h:    $put =v:exception
[?25l:  [?12l[?25h:endtry[1;1H[9L[?25l[1;1H:  unlet g:FuncRef
:  return a:a
:endfunc
:let g:FuncRef=function("FuncWithRef")
:let counter = 0
:inoremap <expr> ( ListItem()
:inoremap <expr> [ ListReset()
:imap <expr> + Expr1()
:imap <expr> * Expr2()
:let retval = "nop"[10;20H[K[11;1H/^he[11;7H[K[12;1HC[34m^R[m=Table("xxx", 4, "asdf")
 [34m^R[m=Compute(45, 0, "retval")
 [34m^R[m=retval[14;11H[K[15;1H [34m^R[m=Compute(45, 5, "retval")
 [3Cretval[16;11H[K[17;5Hg:FuncRef(333)[17;20H[K[18;2H[K[19;1HXX+-XX[19;7H[K[20;1H---*---[20;8H[K[21;1H(one[21;5H[K[22;1H(two
[(one again[34m^[[m:call append(line('$'), max([1, 2, 3]))
:call extend(g:, {'max': function('min')})
:call append(line('$'), max([1, 2, 3]))
:try
:    " Regression: the first line below used to throw ?E110: Missing ')'?
:    " Second is here just to prove that this line is correct when not skipping
:    " rhs of &&.[29;18H[K[30;2H    $put =(0&&(function('tr'))(1, 2, 3))[31;6H$put =(1&&(function('tr'))(1, 2, 3))[31;42H[K[32;2Hcatch[32;8H[K[33;6H$put ='!!! Unexpected exception:'[34;12Hv:exception[34;23H[K[35;2Hendtry[35;8H[K[36;2H$-9,$w! test.out
:delfunc Table[37;15H[K[38;2Hdelfunc Compute[38;17H[K[39;2Hdelfunc Expr1
:delfunc Expr2[40;15H[K[41;10HListItem[42;10HListReset
:unlet retval counter
:q![44;4H[K[45;1HENDTEST[45;8H[K[46;1H[K[47;1Hxxx4asdf fail nop ok 9 333
XX111-XX
---222---
1. one
2. two[51;7H[K[52;1H1. one again
3[53;2H[K[54;1H3[54;2H[K[55;1H0[55;2H[K[56;2H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$-9,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 10 lines, 81 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunc Table[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunc Compute[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunc Expr1[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunc Expr2[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunc ListItem[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunc ListReset[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hunlet retval counter[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hq![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test34 = test61; then \
#	  if diff test.out test34.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test34.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test34.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test36.failed test.ok test.out X* viminfo
cp test36.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test36.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test36.in" 108 lines, 2025 characters[1;1HTest character classes in regexp using regexpengine 0, 1, 2.

STARTTEST
/^start-here/+1
Y:s/\%#=0\d//g
p:s/\%#=1\d//g
p:s/\%#=2\d//g
p:s/\%#=0[0-9]//g
p:s/\%#=1[0-9]//g
p:s/\%#=2[0-9]//g
p:s/\%#=0\D//g
p:s/\%#=1\D//g
p:s/\%#=2\D//g
p:s/\%#=0[^0-9]//g
p:s/\%#=1[^0-9]//g
p:s/\%#=2[^0-9]//g
p:s/\%#=0\o//g
p:s/\%#=1\o//g
p:s/\%#=2\o//g
p:s/\%#=0[0-7]//g
p:s/\%#=1[0-7]//g
p:s/\%#=2[0-7]//g
p:s/\%#=0\O//g
p:s/\%#=1\O//g
p:s/\%#=2\O//g
p:s/\%#=0[^0-7]//g
p:s/\%#=1[^0-7]//g
p:s/\%#=2[^0-7]//g
p:s/\%#=0\x//g
p:s/\%#=1\x//g
p:s/\%#=2\x//g
p:s/\%#=0[0-9A-Fa-f]//g
p:s/\%#=1[0-9A-Fa-f]//g
p:s/\%#=2[0-9A-Fa-f]//g
p:s/\%#=0\X//g
p:s/\%#=1\X//g
p:s/\%#=2\X//g
p:s/\%#=0[^0-9A-Fa-f]//g
p:s/\%#=1[^0-9A-Fa-f]//g
p:s/\%#=2[^0-9A-Fa-f]//g
p:s/\%#=0\w//g
p:s/\%#=1\w//g
p:s/\%#=2\w//g
p:s/\%#=0[0-9A-Za-z_]//g
p:s/\%#=1[0-9A-Za-z_]//g
p:s/\%#=2[0-9A-Za-z_]//g
p:s/\%#=0\W//g
p:s/\%#=1\W//g
p:s/\%#=2\W//g
p:s/\%#=0[^0-9A-Za-z_]//g
p:s/\%#=1[^0-9A-Za-z_]//g
p:s/\%#=2[^0-9A-Za-z_]//g
p:s/\%#=0\h//g
p:s/\%#=1\h//g
p:s/\%#=2\h//g
p:s/\%#=0[A-Za-z_]//g[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest character classes in regexp using regexpengine 0, 1, 2.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 101 lines, 1850 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[49M[1;57r[8;1Hp:s/\%#=1[A-Za-z_]//g
p:s/\%#=2[A-Za-z_]//g
p:s/\%#=0\H//g
p:s/\%#=1\H//g
p:s/\%#=2\H//g
p:s/\%#=0[^A-Za-z_]//g
p:s/\%#=1[^A-Za-z_]//g
p:s/\%#=2[^A-Za-z_]//g
p:s/\%#=0\a//g
p:s/\%#=1\a//g
p:s/\%#=2\a//g
p:s/\%#=0[A-Za-z]//g
p:s/\%#=1[A-Za-z]//g
p:s/\%#=2[A-Za-z]//g
p:s/\%#=0\A//g
p:s/\%#=1\A//g
p:s/\%#=2\A//g
p:s/\%#=0[^A-Za-z]//g
p:s/\%#=1[^A-Za-z]//g
p:s/\%#=2[^A-Za-z]//g
p:s/\%#=0\l//g
p:s/\%#=1\l//g
p:s/\%#=2\l//g
p:s/\%#=0[a-z]//g
p:s/\%#=1[a-z]//g
p:s/\%#=2[a-z]//g
p:s/\%#=0\L//g
p:s/\%#=1\L//g
p:s/\%#=2\L//g
p:s/\%#=0[^a-z]//g
p:s/\%#=1[^a-z]//g
p:s/\%#=2[^a-z]//g
p:s/\%#=0\u//g
p:s/\%#=1\u//g
p:s/\%#=2\u//g
p:s/\%#=0[A-Z]//g
p:s/\%#=1[A-Z]//g
p:s/\%#=2[A-Z]//g
p:s/\%#=0\U//g
p:s/\%#=1\U//g
p:s/\%#=2\U//g
p:s/\%#=0[^A-Z]//g
p:s/\%#=1[^A-Z]//g
p:s/\%#=2[^A-Z]//g
p:s/\%#=0\%204l^\t...//g
p:s/\%#=1\%205l^\t...//g
p:s/\%#=2\%206l^\t...//g
:/^start-here/+1,$wq! test.out
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^start-here/+1[?25l[1;56r[1;1H[3M[1;57r[54;1Hstart-here[55;9H[34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;8H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\d//g[?25l10 substitutions on 1 line[55;29H:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;87H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\d//g[?25l10 substitutions on 1 line[55;29H:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;87H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\d//g[?25l10 substitutions on 1 line[55;29H:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;87H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[0-9]//g[?25l10 substitutions on 1 line[55;29H:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;87H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[0-9]//g[?25l10 substitutions on 1 line[55;29H:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;87H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[0-9]//g[?25l10 substitutions on 1 line[55;29H:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;87H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\D//g[?25l72 substitutions on 1 line[55;1H0123456789[55;11H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\D//g[?25l72 substitutions on 1 line[55;1H0123456789[55;11H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\D//g[?25l72 substitutions on 1 line[55;1H0123456789[55;11H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[^0-9]//g[?25l72 substitutions on 1 line[55;1H0123456789[55;11H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[^0-9]//g[?25l72 substitutions on 1 line[55;1H0123456789[55;11H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[^0-9]//g[?25l72 substitutions on 1 line[55;1H0123456789[55;11H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\o//g[?25l8 substitutions on 1 line[55;29H89:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[56;1H[56;2H[K[55;9H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;9H[34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\o//g[?25l8 substitutions on 1 line[55;29H89:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[56;1H[56;2H[K[55;9H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;9H[34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\o//g[?25l8 substitutions on 1 line[55;29H89:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[56;1H[56;2H[K[55;9H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;9H[34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[0-7]//g[?25l8 substitutions on 1 line[55;29H89:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[56;1H[56;2H[K[55;9H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;9H[34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[0-7]//g[?25l8 substitutions on 1 line[55;29H89:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[56;1H[56;2H[K[55;9H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;9H[34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[0-7]//g[?25l8 substitutions on 1 line[55;29H89:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[56;1H[56;2H[K[55;9H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;9H[34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\O//g[?25l74 substitutions on 1 line[55;1H01234567[55;9H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\O//g[?25l74 substitutions on 1 line[55;1H01234567[55;9H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\O//g[?25l74 substitutions on 1 line[55;1H01234567[55;9H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[^0-7]//g[?25l74 substitutions on 1 line[55;1H01234567[55;9H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[^0-7]//g[?25l74 substitutions on 1 line[55;1H01234567[55;9H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[^0-7]//g[?25l74 substitutions on 1 line[55;1H01234567[55;9H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\x//g[?25l22 substitutions on 1 line[55;29H:;<=>?@GHIXYZ[\]^_`ghiwxyz{|}~[34m^?~@~B~P~[[m[55;75H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\x//g[?25l22 substitutions on 1 line[55;29H:;<=>?@GHIXYZ[\]^_`ghiwxyz{|}~[34m^?~@~B~P~[[m[55;75H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\x//g[?25l22 substitutions on 1 line[55;29H:;<=>?@GHIXYZ[\]^_`ghiwxyz{|}~[34m^?~@~B~P~[[m[55;75H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[0-9A-Fa-f]//g[?25l22 substitutions on 1 line[55;29H:;<=>?@GHIXYZ[\]^_`ghiwxyz{|}~[34m^?~@~B~P~[[m[55;75H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[0-9A-Fa-f]//g[?25l22 substitutions on 1 line[55;29H:;<=>?@GHIXYZ[\]^_`ghiwxyz{|}~[34m^?~@~B~P~[[m[55;75H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[0-9A-Fa-f]//g[?25l22 substitutions on 1 line[55;29H:;<=>?@GHIXYZ[\]^_`ghiwxyz{|}~[34m^?~@~B~P~[[m[55;75H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\X//g[?25l60 substitutions on 1 line[55;1H0123456789ABCDEFabcdef[55;23H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\X//g[?25l60 substitutions on 1 line[55;1H0123456789ABCDEFabcdef[55;23H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\X//g[?25l60 substitutions on 1 line[55;1H0123456789ABCDEFabcdef[55;23H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[^0-9A-Fa-f]//g[?25l60 substitutions on 1 line[55;1H0123456789ABCDEFabcdef[55;23H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[^0-9A-Fa-f]//g[?25l60 substitutions on 1 line[55;1H0123456789ABCDEFabcdef[55;23H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[^0-9A-Fa-f]//g[?25l60 substitutions on 1 line[55;1H0123456789ABCDEFabcdef[55;23H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\w//g[?25l36 substitutions on 1 line[55;29H:;<=>?@[\]^`{|}~[34m^?~@~B~P~[[m[55;61H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\w//g[?25l36 substitutions on 1 line[55;29H:;<=>?@[\]^`{|}~[34m^?~@~B~P~[[m[55;61H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\w//g[?25l36 substitutions on 1 line[55;29H:;<=>?@[\]^`{|}~[34m^?~@~B~P~[[m[55;61H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[0-9A-Za-z_]//g[?25l36 substitutions on 1 line[55;29H:;<=>?@[\]^`{|}~[34m^?~@~B~P~[[m[55;61H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[0-9A-Za-z_]//g[?25l36 substitutions on 1 line[55;29H:;<=>?@[\]^`{|}~[34m^?~@~B~P~[[m[55;61H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[0-9A-Za-z_]//g[?25l36 substitutions on 1 line[55;29H:;<=>?@[\]^`{|}~[34m^?~@~B~P~[[m[55;61H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\W//g[?25l46 substitutions on 1 line[55;1H0123456789ABCDEFGHIXYZ_abcdefghiwxyz[55;37H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\W//g[?25l46 substitutions on 1 line[55;1H0123456789ABCDEFGHIXYZ_abcdefghiwxyz[55;37H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\W//g[?25l46 substitutions on 1 line[55;1H0123456789ABCDEFGHIXYZ_abcdefghiwxyz[55;37H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[^0-9A-Za-z_]//g[?25l46 substitutions on 1 line[55;1H0123456789ABCDEFGHIXYZ_abcdefghiwxyz[55;37H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[^0-9A-Za-z_]//g[?25l46 substitutions on 1 line[55;1H0123456789ABCDEFGHIXYZ_abcdefghiwxyz[55;37H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[^0-9A-Za-z_]//g[?25l46 substitutions on 1 line[55;1H0123456789ABCDEFGHIXYZ_abcdefghiwxyz[55;37H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\h//g[?25l26 substitutions on 1 line[55;46H[\]^`{|}~[34m^?~@~B~P~[[m[55;71H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\h//g[?25l26 substitutions on 1 line[55;46H[\]^`{|}~[34m^?~@~B~P~[[m[55;71H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\h//g[?25l26 substitutions on 1 line[55;46H[\]^`{|}~[34m^?~@~B~P~[[m[55;71H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[A-Za-z_]//g[?25l26 substitutions on 1 line[55;46H[\]^`{|}~[34m^?~@~B~P~[[m[55;71H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[A-Za-z_]//g[?25l26 substitutions on 1 line[55;46H[\]^`{|}~[34m^?~@~B~P~[[m[55;71H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[A-Za-z_]//g[?25l26 substitutions on 1 line[55;46H[\]^`{|}~[34m^?~@~B~P~[[m[55;71H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\H//g[?25l56 substitutions on 1 line[55;1HABCDEFGHIXYZ_abcdefghiwxyz[55;27H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\H//g[?25l56 substitutions on 1 line[55;1HABCDEFGHIXYZ_abcdefghiwxyz[55;27H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\H//g[?25l56 substitutions on 1 line[55;1HABCDEFGHIXYZ_abcdefghiwxyz[55;27H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[^A-Za-z_]//g[?25l56 substitutions on 1 line[55;1HABCDEFGHIXYZ_abcdefghiwxyz[55;27H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[^A-Za-z_]//g[?25l56 substitutions on 1 line[55;1HABCDEFGHIXYZ_abcdefghiwxyz[55;27H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[^A-Za-z_]//g[?25l56 substitutions on 1 line[55;1HABCDEFGHIXYZ_abcdefghiwxyz[55;27H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\a//g[?25l25 substitutions on 1 line[55;46H[\]^_`{|}~[34m^?~@~B~P~[[m[55;72H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[1;1H[2M[1;57r[54;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[55;1HP~[[m
[1m[34m~                                                                                      [m[57;1H[K[54;9H[?12l[?25h[?25l


:[?12l[?25hs/\%#=1\a//g[?25l25 substitutions on 1 line[54;46H[\]^_`{|}~[34m^?~@~B~P~[[m[54;72H[K[55;1H[1m[34m~                                                                                      [54;9H[?12l[?25h[?25l[m
        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[56;10H[K[55;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hs/\%#=2\a//g[?25l25 substitutions on 1 line[55;46H[\]^_`{|}~[34m^?~@~B~P~[[m[55;72H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[1;1H[2M[1;57r[54;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[55;1HP~[[m
[1m[34m~                                                                                      [m[57;1H[K[54;9H[?12l[?25h[?25l


:[?12l[?25hs/\%#=0[A-Za-z]//g[?25l25 substitutions on 1 line[54;46H[\]^_`{|}~[34m^?~@~B~P~[[m[54;72H[K[55;1H[1m[34m~                                                                                      [54;9H[?12l[?25h[?25l[m
        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[56;10H[K[55;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hs/\%#=1[A-Za-z]//g[?25l25 substitutions on 1 line[55;46H[\]^_`{|}~[34m^?~@~B~P~[[m[55;72H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[1;1H[2M[1;57r[54;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[55;1HP~[[m
[1m[34m~                                                                                      [m[57;1H[K[54;9H[?12l[?25h[?25l


:[?12l[?25hs/\%#=2[A-Za-z]//g[?25l25 substitutions on 1 line[54;46H[\]^_`{|}~[34m^?~@~B~P~[[m[54;72H[K[55;1H[1m[34m~                                                                                      [54;9H[?12l[?25h[?25l[m
        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[56;10H[K[55;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hs/\%#=0\A//g[?25l57 substitutions on 1 line[55;1HABCDEFGHIXYZabcdefghiwxyz[55;26H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[1;1H[2M[1;57r[54;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[55;1HP~[[m
[1m[34m~                                                                                      [m[57;1H[K[54;9H[?12l[?25h[?25l


:[?12l[?25hs/\%#=1\A//g[?25l57 substitutions on 1 line[54;1HABCDEFGHIXYZabcdefghiwxyz[54;26H[K[55;1H[1m[34m~                                                                                      [54;1H[?12l[?25h[?25l[m
        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[56;10H[K[55;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hs/\%#=2\A//g[?25l57 substitutions on 1 line[55;1HABCDEFGHIXYZabcdefghiwxyz[55;26H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[1;1H[2M[1;57r[54;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[55;1HP~[[m
[1m[34m~                                                                                      [m[57;1H[K[54;9H[?12l[?25h[?25l


:[?12l[?25hs/\%#=0[^A-Za-z]//g[?25l57 substitutions on 1 line[54;1HABCDEFGHIXYZabcdefghiwxyz[54;26H[K[55;1H[1m[34m~                                                                                      [54;1H[?12l[?25h[?25l[m
        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[56;10H[K[55;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hs/\%#=1[^A-Za-z]//g[?25l57 substitutions on 1 line[55;1HABCDEFGHIXYZabcdefghiwxyz[55;26H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[1;1H[2M[1;57r[54;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[55;1HP~[[m
[1m[34m~                                                                                      [m[57;1H[K[54;9H[?12l[?25h[?25l


:[?12l[?25hs/\%#=2[^A-Za-z]//g[?25l57 substitutions on 1 line[54;1HABCDEFGHIXYZabcdefghiwxyz[54;26H[K[55;1H[1m[34m~                                                                                      [54;1H[?12l[?25h[?25l[m
        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[56;10H[K[55;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hs/\%#=0\l//g[?25l13 substitutions on 1 line[55;64H{|}~[34m^?~@~B~P~[[m[55;84H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\l//g[?25l13 substitutions on 1 line[55;64H{|}~[34m^?~@~B~P~[[m[55;84H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\l//g[?25l13 substitutions on 1 line[55;64H{|}~[34m^?~@~B~P~[[m[55;84H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[a-z]//g[?25l13 substitutions on 1 line[55;64H{|}~[34m^?~@~B~P~[[m[55;84H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[a-z]//g[?25l13 substitutions on 1 line[55;64H{|}~[34m^?~@~B~P~[[m[55;84H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[a-z]//g[?25l13 substitutions on 1 line[55;64H{|}~[34m^?~@~B~P~[[m[55;84H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\L//g[?25l69 substitutions on 1 line[55;1Habcdefghiwxyz[55;14H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\L//g[?25l69 substitutions on 1 line[55;1Habcdefghiwxyz[55;14H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\L//g[?25l69 substitutions on 1 line[55;1Habcdefghiwxyz[55;14H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[^a-z]//g[?25l69 substitutions on 1 line[55;1Habcdefghiwxyz[55;14H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[^a-z]//g[?25l69 substitutions on 1 line[55;1Habcdefghiwxyz[55;14H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[^a-z]//g[?25l69 substitutions on 1 line[55;1Habcdefghiwxyz[55;14H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\u//g[?25l12 substitutions on 1 line[55;46H[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;85H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\u//g[?25l12 substitutions on 1 line[55;46H[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;85H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\u//g[?25l12 substitutions on 1 line[55;46H[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;85H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[A-Z]//g[?25l12 substitutions on 1 line[55;46H[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;85H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[A-Z]//g[?25l12 substitutions on 1 line[55;46H[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;85H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[A-Z]//g[?25l12 substitutions on 1 line[55;46H[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;85H[K[56;1H[1m[34m~                                                                                      [55;9H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\U//g[?25l70 substitutions on 1 line[55;1HABCDEFGHIXYZ[55;14H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\U//g[?25l70 substitutions on 1 line[55;1HABCDEFGHIXYZ[55;14H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\U//g[?25l70 substitutions on 1 line[55;1HABCDEFGHIXYZ[55;14H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0[^A-Z]//g[?25l70 substitutions on 1 line[55;1HABCDEFGHIXYZ[55;14H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1[^A-Z]//g[?25l70 substitutions on 1 line[55;1HABCDEFGHIXYZ[55;14H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2[^A-Z]//g[?25l70 substitutions on 1 line[55;1HABCDEFGHIXYZ[55;14H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=0\%204l^\t...//g[?25l[55;1H!"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;84H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=1\%205l^\t...//g[?25l[55;1H!"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;84H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H        [34m^L^M[m !"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~~[56;1HP~[[m[57;1H[K[55;9H[?12l[?25h[?25l

:[?12l[?25hs/\%#=2\%206l^\t...//g[?25l[55;1H!"#$%&'()#+'-./0123456789:;<=>?@ABCDEFGHIXYZ[\]^_`abcdefghiwxyz{|}~[34m^?~@~B~P~[[m[55;84H[K[56;1H[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h/^start-here/+1,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 99 lines, 4269 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test36 = test61; then \
#	  if diff test.out test36.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test36.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test36.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test37.failed test.ok test.out X* viminfo
cp test37.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test37.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test37.in" 116 lines, 3262 characters[1;1HTest for 'scrollbind'. <eralston@computer.org>   Do not add a line below!
STARTTEST
:so small.vim
:set noscrollbind
:set scrollopt=ver,jump
:set scrolloff=2
:set nowrap
:set noequalalways
:set splitbelow
:" TEST using two windows open to one buffer, one extra empty window
:split
:new
[34m^W[mt:
:resize 8
/^start of window 1$/
zt:
:set scrollbind
[34m^W[mj:
:resize 7
/^start of window 2$/
zt:
:set scrollbind
:" -- start of tests --
:" TEST scrolling down
L5jHyy[34m^W[mbpr0[34m^W[mtHyy[34m^W[mbpr1[34m^W[mtL6jHyy[34m^W[mbpr2[34m^W[mkHyy[34m^W[mbpr3:
:" TEST scrolling up
[34m^W[mtH4k[34m^W[mjH[34m^W[mtHyy[34m^W[mbpr4[34m^W[mkHyy[34m^W[mbpr5[34m^W[mk3k[34m^W[mtH[34m^W[mjHyy[34m^W[mbpr6[34m^W[mtHyy[34m^W[mbpr7:
:" TEST horizontal scrolling
:set scrollopt+=hor
gg"zyyG"zpG[34m^W[mt015zly$[34m^W[mbp"zpG[34m^W[mky$[34m^W[mbp"zpG:
[34m^W[mk10jH7zhg0y$[34m^W[mbp"zpG[34m^W[mtHg0y$[34m^W[mbp"zpG:
:set scrollopt-=hor
:" ****** tests using two different buffers *****
[34m^W[mt[34m^W[mj:
:close
[34m^W[mt:
:set noscrollbind
:/^start of window 2$/,/^end of window 2$/y
:new
[34m^W[mt[34m^W[mj4"zpGp:
[34m^W[mt/^start of window 1$/
zt:
:set scrollbind
[34m^W[mj:
/^start of window 2$/
zt:
:set scrollbind
:" -- start of tests --
:" TEST scrolling down
L5jHyy[34m^W[mbpr0[34m^W[mtHyy[34m^W[mbpr1[34m^W[mtL6jHyy[34m^W[mbpr2[34m^W[mkHyy[34m^W[mbpr3:
:" TEST scrolling up
[34m^W[mtH4k[34m^W[mjH[34m^W[mtHyy[34m^W[mbpr4[34m^W[mkHyy[34m^W[mbpr5[34m^W[mk3k[34m^W[mtH[34m^W[mjHyy[34m^W[mbpr6[34m^W[mtHyy[34m^W[mbpr7:
:" TEST horizontal scrolling
:set scrollopt+=hor
gg"zyyG"zpG[34m^W[mt015zly$[34m^W[mbp"zpG[34m^W[mky$[34m^W[mbp"zpG:
[34m^W[mk10jH7zhg0y$[34m^W[mbp"zpG[34m^W[mtHg0y$[34m^W[mbp"zpG:[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for 'scrollbind'. <eralston@computer.org>   Do not add a line below![57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[2;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 72 lines, 1498 characters written[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[3;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[19M[1;57r[38;1H:set scrollopt-=hor
:" TEST syncbind
[34m^W[mt:set noscb
ggL[34m^W[mj:set noscb
ggL:set scb
[34m^W[mt:set scb
G[34m^W[mjG:syncbind
Hk[34m^W[mtH[34m^W[mjHyy[34m^W[mbp[34m^W[mtyy[34m^W[mbp:
[34m^W[mt:set noscb
ggL[34m^W[mj:set noscb
ggL:set scb
[34m^W[mt:set scb
[34m^W[mtG[34m^W[mjG[34m^W[mt:syncbind
Hk[34m^W[mjH[34m^W[mtHyy[34m^W[mbp[34m^W[mt[34m^W[mjyy[34m^W[mbp:
[34m^W[mtH3k[34m^W[mjH[34m^W[mtHyy[34m^W[mbp[34m^W[mt[34m^W[mjyy[34m^W[mbp:
:" ***** done with tests *****
:w! test.out[13C" Write contents of this file
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noscrollbind[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset scrollopt=ver,jump[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset scrolloff=2[?25l[1;1H:" -- start of tests --
:" TEST scrolling down
L5jHyy[34m^W[mbpr0[34m^W[mtHyy[34m^W[mbpr1[34m^W[mtL6jHyy[34m^W[mbpr2[34m^W[mkHyy[34m^W[mbpr3:[4;19Hup[4;21H[K[5;1H[34m^W[mtH4k[2CjH[34m^W[mtHyy[34m^W[mbpr4[34m^W[mkHyy[34m^W[mbpr5[34m^W[mk3k[2CtH[34m^W[mjHyy[34m^W[mbpr6[34m^W[mtHyy[34m^W[mbpr7:[6;9Hhorizontal scrolling
:set scrollopt+=hor[7;20H[K[8;1Hgg"zyyG"zpG[34m^W[mt015zly$[34m^W[mbp"zpG[34m^W[mky$[34m^W[mbp"zpG:
[34m^W[mk10jH7zhg0y$[34m^W[mbp"zpG[34m^W[mtHg0y$[34m^W[mbp"zpG:
:set scrollopt-=hor[10;20H[K[11;1H:" ****** tests using two different buffers *****
[34m^W[mt[34m^W[mj:[12;8H[K[13;2Hclose[13;7H[K[14;4H:[14;5H[K[15;2Hset noscrollbind
:/^start of window 2$/,/^end of window 2$/y
:new[17;6H[K[18;1H[34m^W[mt[34m^W[mj4"zpGp:[18;14H[K[19;1H[34m^W[mt/^start of window 1$/
zt:[20;4H[K[21;1H:set scrollbind[21;16H[K[22;1H[34m^W[mj:
/^start of window 2$/
zt:[24;4H[K[25;1H:set scrollb[25;16H[K[26;1H:" -- start of tests --
:" TEST scrolling down
L5jHyy[34m^W[mbpr0[34m^W[mtHyy[34m^W[mbpr1[34m^W[mtL6jHyy[34m^W[mbpr2[34m^W[mkHyy[34m^W[mbpr3:[29;19Hup[29;21H[K[30;1H[34m^W[mtH4k[2CjH[34m^W[mtHyy[34m^W[mbpr4[34m^W[mkHyy[34m^W[mbpr5[34m^W[mk3k[2CtH[34m^W[mjHyy[34m^W[mbpr6[34m^W[mtHyy[34m^W[mbpr7:[31;9Hhorizontal scrolling
:set scrollopt+=hor[32;20H[K[33;1Hgg"zyyG"zpG[34m^W[mt015zly$[34m^W[mbp"zpG[34m^W[mky$[34m^W[mbp"zpG:
[34m^W[mk10jH7zhg0y$[34m^W[mbp"zpG[34m^W[mtHg0y$[34m^W[mbp"zpG:
:set scrollopt-=hor[35;20H[K[36;1H:" TEST syncbind[36;17H[K[37;1H[34m^W[mt:set noscb[37;14H[K[38;1HggL[34m^W[mj:set noscb
ggL:set scb[39;12H[K[40;1H[34m^W[mt:set scb[40;12H[K[41;1HG[34m^W[mjG:syncbind
Hk[34m^W[mtH[34m^W[mjHyy[34m^W[mbp[34m^W[mtyy[34m^W[mbp:
[34m^W[mt:set noscb[43;14H[K[44;1HggL[34m^W[mj:set noscb[44;17H[K[45;1HggL:set scb[45;12H[K[46;1H[34m^W[mt:set scb[46;12H[K[47;1H[34m^W[mtG[34m^W[mjG[34m^W[mt:syncbind
Hk[34m^W[mjH[34m^W[mtHyy[34m^W[mbp[34m^W[mt[34m^W[mjyy[34m^W[mbp:[49;4HH3k[34m^W[mjH[34m^W[mtHyy[34m^W[mbp[34m^W[mt[34m^W[mjyy[34m^W[mbp:
:" ***** done with tests *****
:w! test.out             " Write contents of this file
:qa![52;5H[K[53;1HENDTEST[53;8H[K[54;1H[K[55;1H[K[56;1Hstart of window 1[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nowrap[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noequalalways[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset splitbelow[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" TEST using two windows open to one buffer, one extra empty window[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsplit[?25l[1;1HL5jHyy[34m^W[mbpr0[34m^W[mtHyy[34m^W[mbpr1[34m^W[mtL6jHyy[34m^W[mbpr2[34m^W[mkHyy[34m^W[mbpr3:[2;19Hup[2;21H[K[3;1H[34m^W[mtH4k[2CjH[34m^W[mtHyy[34m^W[mbpr4[34m^W[mkHyy[34m^W[mbpr5[34m^W[mk3k[2CtH[34m^W[mjHyy[34m^W[mbpr6[34m^W[mtHyy[34m^W[mbpr7:[4;9Hhorizontal scrolling
:set scrollopt+=hor[5;20H[K[6;1Hgg"zyyG"zpG[34m^W[mt015zly$[34m^W[mbp"zpG[34m^W[mky$[34m^W[mbp"zpG:
[34m^W[mk10jH7zhg0y$[34m^W[mbp"zpG[34m^W[mtHg0y$[34m^W[mbp"zpG:
:set scrollopt-=hor[8;20H[K[9;1H:" TEST syncbind[9;17H[K[10;1H[34m^W[mt:set noscb[10;14H[K[11;1HggL[34m^W[mj:set noscb[11;17H[K[12;1HggL:set scb
[34m^W[mt:set scb
G[34m^W[mjG:syncbind
Hk[34m^W[mtH[34m^W[mjHyy[34m^W[mbp[34m^W[mtyy[34m^W[mbp:
[34m^W[mt:set noscb[16;14H[K[17;1HggL[34m^W[mj:set noscb
ggL:set scb[18;12H[K[19;4H:set scb[19;12H[K[20;1H[34m^W[mtG[34m^W[mjG[34m^W[mt:syncbind
Hk[34m^W[mjH[34m^W[mtHyy[34m^W[mbp[34m^W[mt[34m^W[mjyy[34m^W[mbp:[22;3HtH3k[34m^W[mjH[34m^W[mtHyy[34m^W[mbp[34m^W[mt[34m^W[mjyy[34m^W[mbp:
:" ***** done with tests *****
:w! test.out[13C" Write contents of this file
:qa![25;6H[K[26;1HENDTEST[26;8H[K[27;1H[K[28;1H[7mtest37.in                                                                              [m[29;1H[34m^W[mtH4k[34m^W[mjH[34m^W[mtHyy[34m^W[mbpr4[34m^W[mkHyy[34m^W[mbpr5[34m^W[mk3k[34m^W[mtH[34m^W[mjHyy[34m^W[mbpr6[34m^W[mtHyy[34m^W[mbpr7:
:" TEST horizontal scrolling[30;29H[K[31;2Hset scrollopt+=hor[31;20H[K[32;1Hgg"zyyG"zpG[34m^W[mt015zly$[34m^W[mbp"zpG[34m^W[mky$[34m^W[mbp"zpG:
[34m^W[mk10jH7zhg0y$[34m^W[mbp"zpG[34m^W[mtHg0y$[34m^W[mbp"zpG:[33;40H[K[34;1H:set scrollopt-=hor[34;20H[K[35;2H" TEST syncbind[35;17H[K[36;1H[34m^W[mt:set nos[36;14H[K[37;1HggL[34m^W[mj:set noscb
ggL:set scb[38;12H[K[39;1H[34m^W[mt
G[34m^W[mjG:syncbind
Hk[34m^W[mtH[34m^W[mjHyy[34m^W[mbp[34m^W[mtyy[34m^W[mbp:
[34m^W[mt:set noscb[42;14H[K[43;1HggL[34m^W[mj:set noscb
ggL:set scb[44;12H[K[45;1H[34m^W[mt[46;4HG[34m^W[mjG[34m^W[mt:syncbind
Hk[34m^W[mjH[34m^W[mtHyy[34m^W[mbp[34m^W[mt[34m^W[mjyy[34m^W[mbp:
[34m^W[mtH3k[2CjH[34m^W[mtHyy[2Cbp[34m^W[mt[34m^W[mjyy[34m^W[mbp:
:" ***** done with tests *****[49;31H[K[50;2Hw! test.out             " Write contents of this file
:qa![51;5H[K[52;1HENDTEST[53;1H[K[55;1Hstart of window 1
[1m[7mtest37.in                                                                              [53;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hnew[?25l[29;1HHk[34m^W[mtH[4Cyy[34m^W[mbp[2Ctyy[34m^W[mbp:[29;27H[K[30;1H[34m^W[mt:set noscb[30;14H[K[31;1HggL[34m^W[mj:set noscb[31;17H[K[32;3HL:set scb[32;12H[K[33;3Ht:set scb[33;12H[K[34;1H[34m^W[mtG[34m^W[mjG[34m^W[mt:syncbind
Hk[34m^W[mjH[34m^W[mtHyy[34m^W[mbp[34m^W[mt[34m^W[mjyy[34m^W[mbp:[36;4HH3k[34m^W[mjH[34m^W[mtHyy[34m^W[mbp[34m^W[mt[34m^W[mjyy[34m^W[mbp:
:" ***** done with tests *****
:w! test.out[13C" Write contents of this file
:qa![39;5H[K[40;1HENDTEST[40;8H[K[41;1H[K[42;1H[7mtest37.in                                                                              [m[43;1H[K[44;1H[1m[34m~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name] [43;1H[?12l[?25h[?25l[1;27r[m[1;1H[2M[1;57r[27;1Hstart of window 1
[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[57;1H[K[25;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hresize 8[?25l[1;5H3[15C[34m^W[mt[34m^W[mj[6C:[1;34H[K[2;4H***** done with tests *****
:w! test.out             " Write contents of this file
:qa![4;5H[K[5;1HENDTEST[5;8H[K[6;1H[K[7;1H[K[8;1Hstart of window 1
[1m[7mtest37.in                                                                              [m[10;1H:" -- start of tests --
:" TEST scrolling down
L5jHyy[34m^W[mbpr0[34m^W[mtHyy[34m^W[mbpr1[34m^W[mtL6jHyy[34m^W[mbpr2[34m^W[mkHyy[34m^W[mbpr3:
:" TEST scrolling up[13;21H[K[14;4HH4k[34m^W[mjH[34m^W[mtHyy[34m^W[mbpr4[34m^W[mkHyy[34m^W[mbpr5[34m^W[mk3k[34m^W[mtH[34m^W[mjHyy[34m^W[mbpr6[34m^W[mtHyy[34m^W[mbpr7:
:" TEST horizontal scrolling
:set scrollopt+=hor
gg"zyyG"zpG[34m^W[mt015zly$[34m^W[mbp"zpG[34m^W[mky$[34m^W[mbp"zpG:[18;3Hk10jH7zhg0y$[34m^W[mbp"zpG[34m^W[mtHg0y$[34m^W[mbp"zpG:
:set scrollopt-=hor[19;20H[K[20;1H:" TEST syncbind[20;17H[K[21;1H[34m^W[mt:set noscb[21;15H[K[22;1HggL[34m^W[mj:set noscb[22;26H[K[23;1HggL:set scb
[34m^W[mt:set scb
G[34m^W[mjG:syncbind
Hk[34m^W[mtH[34m^W[mjHyy[34m^W[mbp[34m^W[mtyy[34m^W[mbp:
[34m^W[mt:set noscb[27;14H[K[28;1HggL[34m^W[mj:set noscb[28;17H[K[29;1HggL:set scb[29;12H[K[30;9Hscb[30;12H[K[31;1H[34m^W[mtG[34m^W[mjG[34m^W[mt:syncbind
Hk[34m^W[mjH[34m^W[mtHyy[34m^W[mbp[34m^W[mt[34m^W[mjyy[34m^W[mbp:[33;4HH3k[34m^W[mjH[34m^W[mtHyy[34m^W[mbp[34m^W[mt[34m^W[mjyy[34m^W[mbp:
:" ***** done with tests *****
:w! test.out             " Write contents of this file
:qa![36;5H[K[37;1HENDTEST[37;8H[K[38;1H[K[39;1H[K[40;1Hstart of window 1
. line 01 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 01[6;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^start of window 1$/[?25l[57;21H[K[57;1H[1;8r[1;1H[2M[1;57r[7;1H. line 01 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 01
. line 02 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 02[57;1H[K[6;1H[?12l[?25h[?25l[1;8r[1;1H[3M[1;57r[6;1H. line 03 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 03
. line 04 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 04
. line 05 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 05[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset scrollbind[?25l[3;1H[?12l[?25h[9;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[42;1H[1m[7mtest37.in                                                                              [38;1H[?25l[m[57;1H[K[57;1H:[?12l[?25h[?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hresize 7[?25l[10;4H***** done with tests *****
:w! test.out             " Write contents of this file
:qa![12;5H[K[13;1HEND[13;9H[K[14;1H[K[15;1H[K[16;1Hstart of window 1[16;18H[K[17;1H[1m[7mtest37.in                                                                              [m[18;1H[K[19;1H[1m[34m~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [14;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/[?12l[?25h^start of window 2$/[?25l[57;21H[K[57;1H[10;1Hend of window 1[10;16H[K[11;1H[K[12;1H[K[13;1Hstart of window 2
. line 01 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 01
. line 02 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 02
. line 03 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 03[13;1H[?12l[?25h[?25l[10;16r[16;1H
[1;57r[16;1H. line 04 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 04[57;1H[K[12;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset scrollbind[?25l[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" -- start of tests --[?25l[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" TEST scrolling down[?25l[12;1H[?12l[?25h

[?25l[1;8r[1;1H[5M[1;57r[4;1H. line 06 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 06
. line 07 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 07
. line 08 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 08
. line 09 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 09
. line 10 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 10[10;16r[10;1H[5M[1;57r[12;1H. line 05 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 05
. line 06 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 06
. line 07 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 07
. line 08 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 08
. line 09 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 09[57;1H[K[14;1H[?12l[?25h[12;1H[17;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name]                                                                              [18;1H[?25l[m
. line 05 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 05[19;50H[K[56;11H[1m[7m[+][19;1H[?12l[?25h[?25l[m0[?12l[?25h[9;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[9;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [19;1H[?25l[m
. line 05 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 05[20;50H[K[20;1H[?12l[?25h[?25l1[?12l[?25h[9;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H


[?25l[1;8r[m[1;1H[6M[1;57r[3;1H. line 11 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 11
. line 12 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 12
. line 13 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 13
. line 14 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 14
. line 15 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 15
end of window 1[10;16r[10;1H[6M[1;57r[11;1H. line 10 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 10
. line 11 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 11
. line 12 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 12
. line 13 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 13
. line 14 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 14
. line 15 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 15[6;1H[?12l[?25h[3;1H[9;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [20;1H[?25l[m
. line 11 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 11[21;50H[K[21;1H[?12l[?25h[?25l2[?12l[?25h[17;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [12;1H[17;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [21;1H[?25l[m
. line 11 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 11[22;50H[K[22;1H[?12l[?25h[?25l3[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[22;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" TEST scrolling up[?25l[22;1H[?12l[?25h[9;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[?25l[1;8r[m[1;1H[5L[1;57r[1;1H. line 04 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 04
. line 05 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 05
. line 06 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 06
. line 07 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 07
. line 08 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 08[10;9H4[39C4[11;8H05[38C05[12;8H06[38C06[13;8H07[38C07[14;8H08[38C08[15;8H09[38C09[16;9H0[39C0[57;1H[K[4;1H[?12l[?25h[9;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7mtest37.in                                                                              [14;1H[12;1H[9;1Htest37.in                                                                              [m[17;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [4;1H[3;1H[9;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [22;1H[?25l[m
. line 06 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 06[23;50H[K[23;1H[?12l[?25h[?25l4[?12l[?25h[17;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [12;1H[17;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [23;1H[?25l[m
. line 06 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 06[24;50H[K[24;1H[?12l[?25h[?25l5[?12l[?25h[17;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [12;1H[?25l[1;8r[m[1;1H[4L[1;57r[1;1Hstart of window 1
. line 01 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 01
. line 02 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 02
. line 03 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 03[10;16r[10;1H[4L[1;57r[10;1Hstart of window 2
. line 01 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 01
. line 02 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 02
. line 03 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 03[?12l[?25h[9;1H[1m[7mtest37.in                                                                              [m[17;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [6;1H[3;1H[9;1Htest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7mtest37.in                                                                              [13;1H[12;1H[m[17;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [24;1H[?25l[m
. line 02 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 02[25;50H[K[25;1H[?12l[?25h[?25l6[?12l[?25h[9;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[9;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [25;1H[?25l[m
. line 02 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 02[26;50H[K[26;1H[?12l[?25h[?25l7[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[26;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" TEST horizontal scrolling[?25l[26;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset scrollopt+=hor[?25l[26;1H[?12l[?25h[18;1H[26;1H[?25l[27;1H[K[27;1H[?12l[?25h[9;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[?25l[m[1;1H 1[1;3H[K[2;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 01[2;35H[K[3;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 02[3;35H[K[4;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 03[4;35H[K[5;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 04[5;35H[K[6;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 05[6;35H[K[7;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 06[7;35H[K[8;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 07[8;35H[K[10;1H 2[10;3H[K[11;1HUTSRQPONMLKJIHGREDCBA9876543210 01[11;35H[K[12;1HUTSRQPONMLKJIHGREDCBA9876543210 02[12;35H[K[13;1HUTSRQPONMLKJIHGREDCBA9876543210 03[13;35H[K[14;1HUTSRQPONMLKJIHGREDCBA9876543210 04[14;35H[K[15;1HUTSRQPONMLKJIHGREDCBA9876543210 05[15;35H[K[16;1HUTSRQPONMLKJIHGREDCBA9876543210 06[16;35H[K[3;1H[?12l[?25h[9;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [27;1H[?25l[m56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 02[?12l[?25h[?25l[28;1H[K[28;1H[?12l[?25h[17;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [12;1H[17;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [28;1H[?25l[mUTSRQPONMLKJIHGREDCBA9876543210 02[?12l[?25h[?25l[29;1H[K[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[29;1H[?12l[?25h[17;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [12;1H[?25l[m[1;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 09[2;33H10[3;33H11[4;33H12[5;33H13[6;33H14[7;33H15[8;1H[K[10;1HUTSRQPONMLKJIHGREDCBA9876543210 09[11;33H10[12;33H11[13;33H12[14;33H13[15;33H14[16;33H15[13;1H[?12l[?25h[?25l[1;1H. line 09 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 09
. line 10 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 10
. line 11 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 11
. line 12 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 12
. line 13 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 13
. line 14 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 14
. line 15 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 15
end of window 1

. line 09 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 09
. line 10 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 10
. line 11 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 11
. line 12 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 12
. line 13 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 13
. line 14 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 14
. line 15 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 15[12;1H[?12l[?25h[?25l[?12l[?25h[17;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [29;1H[?25l[m. line 11 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 11[?12l[?25h[?25l[30;1H[K[30;1H[?12l[?25h[9;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;16H[9;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [30;1H[?25l[m. line 11 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 11[?12l[?25h[?25l[31;1H[K[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset scrollopt-=hor[?25l[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" ****** tests using two different buffers *****[?25l[31;1H[?12l[?25h[9;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[9;1Htest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7mtest37.in                                                                              [12;1H[?25l[m[57;1H[K[57;1H:[?12l[?25h[?25l[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hclose[?25l[9;1H[K[10;1H[K[11;1Hstart of window 2[11;18H[K[12;8H0[39C0[13;8H0[39C0[14;8H0[39C0[15;8H0[39C0[16;8H0[39C0[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noscrollbind[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^start of window 2$/,/^end of window 2$/y[?25l18 lines yanked[57;16H[K[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[8;1H[7mtest37.in                                                                              [m[10;1H[1m[34m~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [m[17;1H[1m[7m[No Name] [9;1H[?12l[?25h[8;1Htest37.in                                                                              [m[17;1H[7m[No Name][m[1m[7m [m[7m                                                                              [3;1H[8;1Htest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7m[No Name]                                                                              [9;1H[?25l[m[57;1H4 more lines[10;1H[K[11;1H[K[12;1H[K[13;1H[K[17;11H[1m[7m[+][10;1H[?12l[?25h


[?25l[m[57;1H18 more lines[14;1Hstart of window 2[14;18H[K[15;1H. line 01 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 01[15;50H[K[16;1H. line 02 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 02[16;50H[K[14;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[14;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[?25l[m[57;1H[K[57;1H/[?12l[?25h^start of window 1$/[?25l[57;21H[K[57;1H[31msearch hit BOTTOM, continuing at TOP[m[1;1HENDTEST[1;8H[K[2;1H[K[3;1H[K[4;1Hstart of window 1[4;18H[K[5;8H01[38C01[6;8H02[38C02[7;8H03[38C03[4;1H[?12l[?25h[?25l[1;7r[7;1H
[1;57r[7;1H. line 04 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 04[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset scrollbind[?25l[3;1H[?12l[?25h[8;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7m[No Name] [+]                                                                          [14;1H[?25l[m[57;1H[K[57;1H:[?12l[?25h[?25l[14;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^start of window 2$/[?25l[57;21H[K[57;1H[31msearch hit BOTTOM, continuing at TOP[14;1H[?12l[?25h[?25l[9;16r[m[9;1H[3M[1;57r[14;1H. line 03 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 03
. line 04 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 04
. line 05 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 05[57;1H[K[11;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[11;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset scrollbind[?25l[11;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" -- start of tests --[?25l[11;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" TEST scrolling down[?25l[11;1H[?12l[?25h


[?25l[1;7r[1;1H[5M[1;57r[3;1H. line 05 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 05
. line 06 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 06
. line 07 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 07
. line 08 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 08
. line 09 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 09[9;16r[9;1H[5M[1;57r[12;1H. line 06 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 06
. line 07 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 07
. line 08 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 08
. line 09 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 09
. line 10 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 10[57;1H[K[14;1H[?12l[?25h[11;1H[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [m[56;1H[1m[7m[No Name] [+]                                                                          [31;1H[?25l[m
. line 05 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 05[32;50H[K[32;1H[?12l[?25h[?25l0[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[8;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [32;1H[?25l[m
. line 05 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 05[33;50H[K[33;1H[?12l[?25h[?25l1[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H

[?25l[1;7r[m[1;1H[6M[1;57r[2;1H. line 10 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 10
. line 11 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 11
. line 12 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 12
. line 13 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 13
. line 14 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 14
. line 15 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 15[9;16r[9;1H[6M[1;57r[11;1H. line 11 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 11
. line 12 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 12
. line 13 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 13
. line 14 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 14
. line 15 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 15
. line 16 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 16[5;1H[?12l[?25h[3;1H[8;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [33;1H[?25l[m
. line 11 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 11[34;50H[K[34;1H[?12l[?25h[?25l2[?12l[?25h[17;1H[1m[7m[No Name] [+]                                                                          [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [11;1H[17;1H[No Name] [+][m[1m[7m [m[7m                                                                          [m[56;1H[1m[7m[No Name] [+]                                                                          [34;1H[?25l[m
. line 11 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 11[35;50H[K[35;1H[?12l[?25h[?25l3[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[35;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" TEST scrolling up[?25l[35;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[?25l[m[1;9H4[39C4[2;8H05[38C05[3;8H06[38C06[4;8H07[38C07[5;8H08[38C08[6;8H09[38C09[7;9H0[39C0[9;16r[9;1H[5L[1;57r[9;1H. line 04 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 04
. line 05 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 05
. line 06 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 06
. line 07 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 07
. line 08 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 08[57;1H[K[4;1H[?12l[?25h[8;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7m[No Name] [+]                                                                          [14;1H[11;1H[8;1Htest37.in                                                                              [m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [4;1H[3;1H[8;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [35;1H[?25l[m
. line 06 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 06[36;50H[K[36;1H[?12l[?25h[?25l4[?12l[?25h[17;1H[1m[7m[No Name] [+]                                                                          [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [11;1H[17;1H[No Name] [+][m[1m[7m [m[7m                                                                          [m[56;1H[1m[7m[No Name] [+]                                                                          [36;1H[?25l[m
. line 06 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 06[37;50H[K[37;1H[?12l[?25h[?25l5[?12l[?25h[17;1H[1m[7m[No Name] [+]                                                                          [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [11;1H[?25l[1;7r[m[1;1H[4L[1;57r[1;1Hstart of window 1
. line 01 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 01
. line 02 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 02
. line 03 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 03[9;16r[9;1H[4L[1;57r[9;1Hstart of window 2
. line 01 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 01
. line 02 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 02
. line 03 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 03[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [5;1H[3;1H[8;1Htest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7m[No Name] [+]                                                                          [12;1H[11;1H[m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [m[56;1H[1m[7m[No Name] [+]                                                                          [37;1H[?25l[m
. line 02 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 02[38;50H[K[38;1H[?12l[?25h[?25l6[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[8;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [38;1H[?25l[m
. line 02 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 02[39;50H[K[39;1H[?12l[?25h[?25l7[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" TEST horizontal scrolling[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset scrollopt+=hor[?25l[39;1H[?12l[?25h[18;1H[39;1H[?25l[40;1H[K[40;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[?25l[m[1;1H 1[1;3H[K[2;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 01[2;35H[K[3;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 02[3;35H[K[4;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 03[4;35H[K[5;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 04[5;35H[K[6;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 05[6;35H[K[7;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 06[7;35H[K[9;1H 2[9;3H[K[10;1HUTSRQPONMLKJIHGREDCBA9876543210 01[10;35H[K[11;1HUTSRQPONMLKJIHGREDCBA9876543210 02[11;35H[K[12;1HUTSRQPONMLKJIHGREDCBA9876543210 03[12;35H[K[13;1HUTSRQPONMLKJIHGREDCBA9876543210 04[13;35H[K[14;1HUTSRQPONMLKJIHGREDCBA9876543210 05[14;35H[K[15;1HUTSRQPONMLKJIHGREDCBA9876543210 06[15;35H[K[16;1HUTSRQPONMLKJIHGREDCBA9876543210 07[16;35H[K[3;1H[?12l[?25h[8;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [40;1H[?25l[m56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 02[?12l[?25h[?25l[41;1H[K[41;1H[?12l[?25h[17;1H[1m[7m[No Name] [+]                                                                          [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [11;1H[17;1H[No Name] [+][m[1m[7m [m[7m                                                                          [m[56;1H[1m[7m[No Name] [+]                                                                          [41;1H[?25l[mUTSRQPONMLKJIHGREDCBA9876543210 02[?12l[?25h[?25l[42;1H[K[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[42;1H[?12l[?25h[17;1H[1m[7m[No Name] [+]                                                                          [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [11;1H[?25l[m[1;1H56789ABCDEFGHIJKLMNOPQRSTUVWXYZ 09[2;33H10[3;33H11[4;33H12[5;33H13[6;33H14[7;33H15

UTSRQPONMLKJIHGREDCBA9876543210 09[10;33H10[11;33H11[12;33H12[13;33H13[14;33H14[15;33H15[16;33H16[12;1H[?12l[?25h[?25l[1;1H. line 09 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 09
. line 10 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 10
. line 11 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 11
. line 12 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 12
. line 13 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 13
. line 14 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 14
. line 15 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 15

. line 09 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 09
. line 10 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 10
. line 11 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 11
. line 12 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 12
. line 13 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 13
. line 14 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 14
. line 15 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 15
. line 16 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 16[11;1H[?12l[?25h[?25l[?12l[?25h[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [m[56;1H[1m[7m[No Name] [+]                                                                          [42;1H[?25l[m. line 11 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 11[?12l[?25h[?25l[43;1H[K[43;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;16H[8;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [43;1H[?25l[m. line 11 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ 11[?12l[?25h[?25l[44;1H[K[44;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[44;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset scrollopt-=hor[?25l[44;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" TEST syncbind[?25l[44;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[?25l[m[57;1H[K[57;1H:[?12l[?25hset noscb[?25l[3;1H[?12l[?25h[?25l[1;1HTest for 'scrollbind'. <eralston@computer.org>   Do not add a line below!
STARTTEST[2;11H[K[3;1H:so small.vim[3;14H[K[4;1H:set noscrollbind[4;18H[K[5;1H:set scrollopt=ver,jump[5;24H[K[6;1H:set scrolloff=2[6;17H[K[7;1H:set nowrap[7;12H[K[1;1H[?12l[?25h[5;1H


[7mtest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7m[No Name] [+]                                                                          [11;1H[?25l[m[57;1H[K[57;1H:[?12l[?25hset noscb[?25l[11;1H[?12l[?25h[?25l[9;1H[K[10;1H[K[11;1H[K[12;1H[K[13;1H[K[14;1Hstart of window 2[14;18H[K[15;8H01[38C01[16;8H02[38C02[9;1H[?12l[?25h[14;1H[?25l[57;1H[K[57;1H:[?12l[?25hset scb[?25l[14;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [5;1H[?25l[m[57;1H[K[57;1H:[?12l[?25hset scb[?25l[5;1H[?12l[?25h[?25l[1;1H. line 13 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 13[1;50H[K[2;1H. line 14 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 14
. line 15 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 15
. line 16 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 16
end of window 2[5;16H[K[6;1H[K[7;1Hend of test37.in (please don't delete this line)

end of window 2
[1m[34m~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [7;1H[?12l[?25h[?25l[m[1;1Hzt:[1;4H[K[2;1H:set scrollbind[2;16H[K[3;1H:" -- start of tests --[3;24H[K[4;1H:" TEST scrolling down[4;23H[K[5;1HL5jHyy[34m^W[mbpr0[34m^W[mtHyy[34m^W[mbpr1[34m^W[mtL6jHyy[34m^W[mbpr2[34m^W[mkHyy[34m^W[mbpr3:
:" TEST scrolling up
[34m^W[mtH4k[34m^W[mjH[34m^W[mtHyy[34m^W[mbpr4[34m^W[mkHyy[34m^W[mbpr5[34m^W[mk3k[34m^W[mtH[34m^W[mjHyy[34m^W[mbpr6[34m^W[mtHyy[34m^W[mbpr7:
[7mtest37.in[m[1m[7m [m[7m                                                                              [9;16r[m[9;1H[2L[1;57r[9;1H. line 15 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 15
. line 16 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 16[17;1H[1m[7m[No Name] [+]                                                                          [m[57;1H[K[11;1H[?12l[?25h[?25l[57;1H:[?12l[?25hsyncbind[?25l[11;1H[?12l[?25h[?25l[1;7r[1;1H[L[1;57r[1;1H/^start of window 2$/[9;16r[9;1H[L[1;57r[9;1H. line 14 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 14[57;1H[K[11;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [5;1H[3;1H[8;1Htest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7m[No Name] [+]                                                                          [11;1H[m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [m[56;1H[1m[7m[No Name] [+]                                                                          [44;1H[?25l[m
. line 16 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 16[45;50H[K[45;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[8;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [45;1H[?25l[m
:set scrollbind[46;16H[K[46;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[46;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[?25l[m[57;1H[K[57;1H:[?12l[?25hset noscb[?25l[3;1H[?12l[?25h[?25l[1;1HTest for 'scrollbind'. <eralston@computer.org>   Do not add a line below!
STARTTEST
:so small.vim[3;14H[K[4;2Hset noscrollbind[4;18H[K[5;2Hset scrollopt=ver,jump
:set scrolloff=2[6;17H[K[7;2Hset nowrap[7;12H[K[1;1H[?12l[?25h[5;1H


[7mtest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7m[No Name] [+]                                                                          [11;1H[?25l[m[57;1H[K[57;1H:[?12l[?25hset noscb[?25l[11;1H[?12l[?25h[?25l[9;1H[K[10;1H[K[11;1H[K[12;1H[K[13;1H[K[14;1Hstart of window 2[14;18H[K[15;1H. line 01 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 01[15;50H[K[16;1H. line 02 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 02[16;50H[K[9;1H[?12l[?25h[14;1H[?25l[57;1H[K[57;1H:[?12l[?25hset scb[?25l[14;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [5;1H[?25l[m[57;1H[K[57;1H:[?12l[?25hset scb[?25l[5;1H[?12l[?25h[?25l[1;1H. line 13 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 13[1;50H[K[2;1H. line 14 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 14
. line 15 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 15
. line 16 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 16
end of window 2[5;16H[K[6;1H[K[7;1Hend of test37.in (please don't delete this line)

end of window 2
[1m[34m~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [7;1H[?12l[?25h[?25l[m[1;1Hzt:[1;4H[K[2;1H:set scrollbind[2;16H[K[3;1H:" -- start of tests --[3;24H[K[4;1H:" TEST scrolling down[4;23H[K[5;1HL5jHyy[34m^W[mbpr0[34m^W[mtHyy[34m^W[mbpr1[34m^W[mtL6jHyy[34m^W[mbpr2[34m^W[mkHyy[34m^W[mbpr3:
:" TEST scrolling up
[34m^W[mtH4k[34m^W[mjH[34m^W[mtHyy[34m^W[mbpr4[34m^W[mkHyy[34m^W[mbpr5[34m^W[mk3k[34m^W[mtH[34m^W[mjHyy[34m^W[mbpr6[34m^W[mtHyy[34m^W[mbpr7:
[7mtest37.in[m[1m[7m [m[7m                                                                              [9;16r[m[9;1H[2L[1;57r[9;1H. line 15 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 15
. line 16 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 16[17;1H[1m[7m[No Name] [+]                                                                          [m[57;1H[K[11;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [5;1H[?25l[57;1H[m:[?12l[?25hsyncbind[?25l[5;1H[?12l[?25h[3;1H[?25l[1;7r[1;1H[L[1;57r[1;1H/^start of window 2$/[9;16r[9;1H[L[1;57r[9;1H. line 14 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 14[57;1H[K[3;1H[?12l[?25h[8;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7m[No Name] [+]                                                                          [12;1H[11;1H[8;1Htest37.in                                                                              [m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[8;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [46;1H[?25l[m
:set scrollbind[47;16H[K[47;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[8;1Htest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7m[No Name] [+]                                                                          [11;1H[m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [m[56;1H[1m[7m[No Name] [+]                                                                          [47;1H[?25l[m
. line 16 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 16[48;50H[K[48;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[48;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[?25l[1;7r[m[1;1H[4L[1;57r[1;1Hzt:
:set scrollbind
[34m^W[mj:
:resize 7[9;16r[9;1H[4L[1;57r[9;1H. line 10 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 10
. line 11 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 11
. line 12 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 12
. line 13 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 13[57;1H[K[4;1H[?12l[?25h[8;1H[7mtest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7m[No Name] [+]                                                                          [15;1H[11;1H[8;1Htest37.in                                                                              [m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [4;1H[3;1H[8;1Htest37.in[m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name] [+]                                                                          [48;1H[?25l[m
[34m^W[mj:[49;5H[K[49;1H[?12l[?25h[8;1H[1m[7mtest37.in                                                                              [m[56;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [3;1H[8;1Htest37.in[m[1m[7m [m[7m                                                                              [m[17;1H[1m[7m[No Name] [+]                                                                          [11;1H[m[17;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [m[56;1H[1m[7m[No Name] [+]                                                                          [49;1H[?25l[m
. line 12 ZYXWVUTSRQPONMLKJIHGREDCBA9876543210 12[50;50H[K[50;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" ***** done with tests *****[?25l[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! test.out             " Write contents of this file[?25l"test.out" [57;12H[K[57;12H[New File] 33 lines, 1329 characters written[56;1H[1m[7mtest.out]      [50;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test37 = test61; then \
#	  if diff test.out test37.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test37.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test37.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test38.failed test.ok test.out X* viminfo
cp test38.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test38.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test38.in" 35 lines, 455 characters[2;1HTest Virtual replace mode.

STARTTEST
:so small.vim
:" make sure that backspace works, no matter what termcap is used
:set t_kD=[34m^V[mx7f t_kb=[34m^V[mx08
ggdGa
abcdefghi
jk      lmn
    opq rst
[34m^D[muvwxyz
[34m^[[mgg:set ai
:set bs=2
gR0[34m^D[m 1
A
BCDEFGHIJ[18;9HKL
MNO
PQR[34m^[[mG:ka
o0[34m^D[m
abcdefghi
jk      lmn
    opq rst
[34m^D[muvwxyz
[34m^[[m'ajgR0[34m^D[m 1
A
BCDEFGHIJ[29;9HKL
MNO
PQR[34m^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^[[m:$
iab     cdefghi jkl[34m^[[m0gRAB......CDEFGHI.J[34m^[[mo[34m^[[m:
iabcdefghijklmnopqrst[34m^[[m0gRAB    IJKLMNO QR[34m^[[m:wq! test.out
ENDTEST

[1m[34m~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 29 lines, 407 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[34;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[35;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[35;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" make sure that backspace works, no matter what termcap is used[?25l[35;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset t_kD=^[34m^?[m t_kb=^[34m^H[?25l[27m[23m[m[H[2J[2;1HTest Virtual replace mode.

STARTTEST
:so small.vim
:" make sure that backspace works, no matter what termcap is used
:set t_kD=[34m^V[mx7f t_kb=[34m^V[mx08
ggdGa
abcdefghi
jk      lmn
    opq rst
[34m^D[muvwxyz
[34m^[[mgg:set ai
:set bs=2
gR0[34m^D[m 1
A
BCDEFGHIJ[18;9HKL
MNO
PQR[34m^[[mG:ka
o0[34m^D[m
abcdefghi
jk      lmn
    opq rst
[34m^D[muvwxyz
[34m^[[m'ajgR0[34m^D[m 1
A
BCDEFGHIJ[29;9HKL
MNO
PQR[34m^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^H^[[m:$
iab     cdefghi jkl[34m^[[m0gRAB......CDEFGHI.J[34m^[[mo[34m^[[m:
iabcdefghijklmnopqrst[34m^[[m0gRAB    IJKLMNO QR[34m^[[m:wq! test.out
ENDTEST

[1m[34m~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [35;1H[?12l[?25h[1;1H[?25l
~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [m[57;1H--No lines in buffer--[1;1H[?12l[?25h[?25l
abcdefghi[2;10H[K[3;1Hjk      lmn[3;12H[K[4;1H    opq rst[4;12H[K[5;1Huvwxyz[5;7H[K[6;1H[K[6;1H[?12l[?25h[1;1H[?25l[57;1H[K[57;1H:[?12l[?25hset ai[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset bs=2[?25l[1;1H[?12l[?25h[?25l 1
 A[2;3H[K[3;1H BCDEFGHIJ[3;11H[K[4;5H    KL[4;11H[K[5;1H        MNO[6;9HPQR[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hka[?25l[6;9H[?12l[?25h[?25l[7;1H[K[8;1Habcdefghi[8;10H[K[9;1Hjk      lmn[9;12H[K[10;1H    opq rst[10;12H[K[11;1Huvwxyz[11;7H[K[12;1H[K[12;1H[?12l[?25h[6;9H
[?25l 1[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$[?25l[12;1H[?12l[?25h[?25lab      cdefghi jkl[?12l[?25h[?25lAB......CDEFGHI.J[?12l[?25h[?25l[13;1H[K[13;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[13;1H[?12l[?25h[?25labcdefghijklmnopqrst[?12l[?25h[?25lAB      IJKLMNO QR[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwq! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 13 lines, 107 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test38 = test61; then \
#	  if diff test.out test38.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test38.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test38.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test39.failed test.ok test.out X* viminfo
cp test39.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test39.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test39.in" 118 lines, 2435 characters[2;1HTest Visual block mode commands
And test "U" in Visual mode, also on German sharp S.

#define BO_ALL      0x0001
#define BO_BS[7C0x0002
#define BO_CRSR     0x0004

STARTTEST
:so small.vim
:so mbyte.vim
:" This only works when 'encoding' is "latin1", don't depend on the environment
:set enc=latin1
/^abcde
:" Test shift-right of a block
jllll[34m^V[mjj>wll[34m^V[mjlll>
:" Test shift-left of a block
G$hhhh[34m^V[mkk<
:" Test block-insert
Gkl[34m^V[mkkkIxyz[34m^[[m
:" Test block-replace
Gllll[34m^V[mkkklllrq
:" Test block-change
G$khhh[34m^V[mhhkkcmno[34m^[[m
:$-4,$w! test.out
:" Test block-insert using cursor keys for movement
/^aaaa/
:exe ":norm! l\<C-V>jjjlllI\<Right>\<Right>  \<Esc>"
:/^aa/,/^$/w >> test.out
/xaaa$/
:exe ":norm! \<C-V>jjjI<>\<Left>p\<Esc>"
:/xaaa$/,/^$/w >> test.out
:" Test for Visual block was created with the last <C-v>$
/^A23$/
:exe ":norm! l\<C-V>j$Aab\<Esc>"
:.,/^$/w >> test.out
:" Test for Visual block was created with the middle <C-v>$ (1)
/^B23$/
:exe ":norm! l\<C-V>j$hAab\<Esc>"
:.,/^$/w >> test.out
:" Test for Visual block was created with the middle <C-v>$ (2)
/^C23$/
:exe ":norm! l\<C-V>j$hhAab\<Esc>"
:.,/^$/w >> test.out
:" Test for Visual block insert when virtualedit=all and utf-8 encoding
:set ve=all enc=utf-8
:/\t\tline
:exe ":norm! 07l\<C-V>jjIx\<Esc>"
:.,/^$/w >> test.out
:" Test for Visual block append when virtualedit=all
:exe ":norm! 012l\<C-v>jjAx\<Esc>"
:set ve= enc=latin1
:.,/^$/w >> test.out
:" gUe must uppercase a whole word, also when  changes to SS
Gothe youtueuu end[34m^[[mYpk0wgUe
:" gUfx must uppercase until x, inclusive.[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[9;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 75 lines, 2061 characters written[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[10;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:" VU must uppercase a whole line
YpkVU
:" same, when it's the last line in the buffer
YPGi111[34m^[[mVUddP
:" Uppercase two lines
Oblah di
doh dut[34m^[[mVkUj
:" Uppercase part of two lines
ddppi333[34m^[[mk0i222[34m^[[mfyllvjfuUk
:" visual replace using Enter or NL
G3o123456789[34m^[[m2k05l[34m^V[m2jr[34m^M[mG3o98765[34m^[[m2k02l[34m^V[m2jr[34m^V^M[m
G3o123456789[34m^[[m2k05l[34m^V[m2jr
G3o98765[34m^[[m2k02l[34m^V[m2jr[34m^V[m
:"
:" Test cursor position. When ve=block and Visual block mode and $gj
:set ve=block
:exe ":norm! 2k\<C-V>$gj\<Esc>"
:let cpos=getpos("'>")
:$put ='col:'.cpos[2].' off:'.cpos[3]
:"
:" block_insert when replacing spaces in front of the block with tabs
:set ts=8 sts=4 sw=4
:4,7y
Gp
:exe ":norm! f0\<C-V>2jI\<tab>\<esc>"
:/^the/,$w >> test.out
:qa!
ENDTEST[30;17Hline1[31;17Hline2[32;17Hline3

aaaaaa
bbbbbb
cccccc
dddddd

xaaa
bbbb
cccc
dddd

yaaa

bbb

A23
4567

B23
4567

C23
4567[28;1H[?12l[?25h
[?25l[57;1H:so! Xdotest[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" This only works when 'encoding' is "latin1", don't depend on the environment[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset enc=latin1[?25l[27m[23m[m[H[2J[1;1H:" VU must uppercase a whole line
YpkVU
:" same, when it's the last line in the buffer
YPGi111[34m^[[mVUddP
:" Uppercase two lines
Oblah di
doh dut[34m^[[mVkUj
:" Uppercase part of two lines
ddppi333[34m^[[mk0i222[34m^[[mfyllvjfuUk
:" visual replace using Enter or NL
G3o123456789[34m^[[m2k05l[34m^V[m2jr[34m^M[mG3o98765[34m^[[m2k02l[34m^V[m2jr[34m^V^M[m
G3o123456789[34m^[[m2k05l[34m^V[m2jr
G3o98765[34m^[[m2k02l[34m^V[m2jr[34m^V[m
:"
:" Test cursor position. When ve=block and Visual block mode and $gj
:set ve=block
:exe ":norm! 2k\<C-V>$gj\<Esc>"
:let cpos=getpos("'>")
:$put ='col:'.cpos[2].' off:'.cpos[3]
:"
:" block_insert when replacing spaces in front of the block with tabs
:set ts=8 sts=4 sw=4
:4,7y
Gp
:exe ":norm! f0\<C-V>2jI\<tab>\<esc>"
:/^the/,$w >> test.out
:qa!
ENDTEST[30;17Hline1[31;17Hline2[32;17Hline3

aaaaaa
bbbbbb
cccccc
dddddd

xaaa
bbbb
cccc
dddd

yaaa

bbb

A23
4567

B23
4567

C23
4567[29;1H[?12l[?25h[?25l[57;1H/[?12l[?25h^abcde[?25l[1;56r[56;1H
[1;57r[56;1Habcdefghijklm[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h" Test shift-right of a block[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Habcdefghijklm[57;1H[K[56;1H[?12l[?25habcd[?25l[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;5H[7me[m
abcdefghijklmabcd[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;5H[7me[m
abcdefghijklmabcd[?12l[?25h[?25l
3 lines >ed 1 time[54;5H        efghijklm
abcd        efghijklm
abcd        efghijklm[54;8H[?12l[?25h     ef[?25l[?12l[?25h[?25l[7mg[55;15H[?12l[?25h[?25l[54;16Hh[55;15Hg[?12l[?25h[?25l[54;17Hi[55;16Hh[?12l[?25h[?25l[54;18Hj[55;17Hi[?12l[?25h[?25l[m[54;15H        ghijklm[55;15H        ghijklm[54;16H[?12l[?25h[55;16H[?25l[57;1H[K[57;1H:[?12l[?25h" Test shift-left of a block[?25l[55;16H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Habcdefghijklm[57;1H[K[56;1H[?12l[?25h[12C[?25l[?12l[?25h[?25l[7mi[55;9H[?12l[?25h[?25l [54;9H[?12l[?25h[?25l[m


3 lines <ed 1 time[54;9Hef    [55;9Hefghijklm[55;18H[K[56;9Hi[54;9H[?12l[?25h[55;9H[?25l[57;1H[K[57;1H:[?12l[?25h" Test block-insert[?25l[55;9H[?12l[?25h
[55;1Ha[?25l[?12l[?25h[?25l[7mb[54;2H[?12l[?25h[?25lb[53;2H[?12l[?25h[?25lb[52;2H[?12l[?25h[?25l[m
ab
ab
ab[52;2Hxyzbcdefghijklm
axyzbcd
axyzbcd
axyzbcd[52;2H[?12l[?25h
a[?25l[57;1H[K[57;1H:[?12l[?25h" Test block-replace[?25l[53;2H[?12l[?25h


abcd[?25l[?12l[?25h[?25l[7me[55;5H[?12l[?25h[?25lb[54;5H[?12l[?25h[?25lb[53;5H[?12l[?25h[?25lb[54;6Hc[55;6Hc[56;6Hf[53;6H[?12l[?25h[?25lc[54;7Hd[55;7Hd[56;7Hg[53;7H[?12l[?25h[?25ld[54;8H [55;8H [56;8Hh[53;8H[?12l[?25h[?25l[mqqqq
axyzqqqq
axyzqqqq
abcdqqqq[53;5H[?12l[?25h
axyz[?25l[57;1H[K[57;1H:[?12l[?25h" Test block-change[?25l[54;5H[?12l[?25h

[12C[55;17H[?25l[?12l[?25h[?25l[7mj[?12l[?25h[?25li[?12l[?25h[?25l[54;12H     [55;11Hghijkl[54;11H[?12l[?25h[?25l[53;13Hef[m[54;15H  [55;11Hg[3Ckl[53;12H[?12l[?25h[?25lmno[54;12Hmno[55;12Hmno[53;14H[?12l[?25h[54;14H[?25l[57;1H[K[57;1H:[?12l[?25h$-4,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 5 lines, 108 characters written[54;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test block-insert using cursor keys for movement[?25l[54;14H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^aaaa/[?25l[57;7H[K[57;1H[31msearch hit BOTTOM, continuing at TOP[29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexe ":norm! l\<C-V>jjjlllI\<Right>\<Right>  \<Esc>"[?25l[29;4H  aaa
bbb  bbb
ccc  ccc
ddd  ddd[29;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^aa/,/^$/w >> test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H5 lines, 37 characters appended[29;4H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hxaaa$/[?25l[57;7H[K[57;1H[34;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexe ":norm! \<C-V>jjjI<>\<Left>p\<Esc>"[?25l[34;1H<p>xaaa
<p>bbbb
<p>cccc
<p>dddd[34;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/xaaa$/,/^$/w >> test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H5 lines, 33 characters appended[34;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test for Visual block was created with the last <C-v>$[?25l[34;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^A23$/[?25l[57;7H[K[57;1H[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexe ":norm! l\<C-V>j$Aab\<Esc>"[?25l[43;4Hab
4567ab[43;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,/^$/w >> test.out[?25l"test.out" [57;13H[K[57;12H3 lines, 14 characters appended[43;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test for Visual block was created with the middle <C-v>$ (1)[?25l[43;2H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^B23$/[?25l[57;7H[K[57;1H[46;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexe ":norm! l\<C-V>j$hAab\<Esc>"[?25l[46;5Hab
4567ab[46;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,/^$/w >> test.out[?25l"test.out" [57;13H[K[57;12H3 lines, 15 characters appended[46;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test for Visual block was created with the middle <C-v>$ (2)[?25l[46;2H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^C23$/[?25l[57;7H[K[57;1H[49;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexe ":norm! l\<C-V>j$hhAab\<Esc>"[?25l[49;4Hab
456ab7[49;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,/^$/w >> test.out[?25l"test.out" [57;13H[K[57;12H3 lines, 14 characters appended[49;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test for Visual block insert when virtualedit=all and utf-8 encoding[?25l[49;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ve=all enc=utf-8[?25l[27m[23m[m[H[2J[1;1HOblah di
doh dut[34m^[[mVkUj
:" Uppercase part of two lines
ddppi333[34m^[[mk0i222[34m^[[mfyllvjfuUk
:" visual replace using Enter or NL
G3o123456789[34m^[[m2k05l[34m^V[m2jr[34m^M[mG3o98765[34m^[[m2k02l[34m^V[m2jr[34m^V^M[m
G3o123456789[34m^[[m2k05l[34m^V[m2jr
G3o98765[34m^[[m2k02l[34m^V[m2jr[34m^V[m
:"
:" Test cursor position. When ve=block and Visual block mode and $gj
:set ve=block
:exe ":norm! 2k\<C-V>$gj\<Esc>"
:let cpos=getpos("'>")
:$put ='col:'.cpos[2].' off:'.cpos[3]
:"
:" block_insert when replacing spaces in front of the block with tabs
:set ts=8 sts=4 sw=4
:4,7y
Gp
:exe ":norm! f0\<C-V>2jI\<tab>\<esc>"
:/^the/,$w >> test.out
:qa!
ENDTEST[25;17Hline1[26;17Hline2[27;17Hline3

aaa  aaa
bbb  bbb
ccc  ccc
ddd  ddd

<p>xaaa
<p>bbbb
<p>cccc
<p>dddd

yaaa
[34m<bf><bf><bf>[m
bbb

A23ab
4567ab

B23 ab
4567ab

C23ab
456ab7

axyzbcdefghijklm
axyzqqqq   mno[8Cghijklm
axyzqqqqef mno[8Cghijklm
axyzqqqqefgmnoklm
abcdqqqqijklm[49;2H[?12l[?25h[?25l[57;1H:[?12l[?25h/\t\tline[?25l[31msearch hit BOTTOM, continuing at TOP[25;17H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexe ":norm! 07l\<C-V>jjIx\<Esc>"[?25l[25;8Hx[26;8Hx[27;8Hx[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.,/^$/w >> test.out[?25l"test.out" [57;13H[K[57;12H4 lines, 49 characters appended[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test for Visual block append when virtualedit=all[?25l[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexe ":norm! 012l\<C-v>jjAx\<Esc>"[?25l[25;14Hx   line1[26;14Hx   line2[27;14Hx   line3[25;10H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ve= enc=latin1[?25l[27m[23m[m[H[2J[1;1HOblah di
doh dut[34m^[[mVkUj
:" Uppercase part of two lines
ddppi333[34m^[[mk0i222[34m^[[mfyllvjfuUk
:" visual replace using Enter or NL
G3o123456789[34m^[[m2k05l[34m^V[m2jr[34m^M[mG3o98765[34m^[[m2k02l[34m^V[m2jr[34m^V^M[m
G3o123456789[34m^[[m2k05l[34m^V[m2jr
G3o98765[34m^[[m2k02l[34m^V[m2jr[34m^V[m
:"
:" Test cursor position. When ve=block and Visual block mode and $gj
:set ve=block
:exe ":norm! 2k\<C-V>$gj\<Esc>"
:let cpos=getpos("'>")
:$put ='col:'.cpos[2].' off:'.cpos[3]
:"
:" block_insert when replacing spaces in front of the block with tabs
:set ts=8 sts=4 sw=4
:4,7y
Gp
:exe ":norm! f0\<C-V>2jI\<tab>\<esc>"
:/^the/,$w >> test.out
:qa!
ENDTEST[25;8Hx     x   line1[26;8Hx     x   line2[27;8Hx     x   line3

aaa  aaa
bbb  bbb
ccc  ccc
ddd  ddd

<p>xaaa
<p>bbbb
<p>cccc
<p>dddd

yaaa

bbb

A23ab
4567ab

B23 ab
4567ab

C23ab
456ab7

axyzbcdefghijklm
axyzqqqq   mno[8Cghijklm
axyzqqqqef mno[8Cghijklm
axyzqqqqefgmnoklm
abcdqqqqijklm[25;10H[?12l[?25h[?25l[57;1H:[?12l[?25h.,/^$/w >> test.out[?25l"test.out" [57;13H[K[57;12H4 lines, 70 characters appended[25;10H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" gUe must uppercase a whole word, also when  changes to SS[?25l[25;10H[?12l[?25h[56;1H[?25l[1;56r[56;1H
[1;57r[56;1Hthe youtueuu end[57;1H[K[56;17H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hthe youtueuu end[?12l[?25h[55;1Hthe [?25lYOUTUSSEUU endthe [?12l[?25h
the [?25l
:[?12l[?25h" gUfx must uppercase until x, inclusive.[?25l[56;5H[?12l[?25h[?25l- youtuexu -[56;15H[K[56;14H[?12l[?25h- y[?25lOUSSTUSSEXu -- y[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hthe youtueuu end[57;1H[K[56;4H[?12l[?25h[?25l
:[?12l[?25h" VU must uppercase a whole line[?25l[56;4H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hthe youtueuu end[57;1H[K[56;1H[?12l[?25h[55;1H[?25lt[7mhe youtueuu end [?12l[?25h[?25l[mTHE YOUTUSSEUU END[?12l[?25h
[?25l
:[?12l[?25h" same, when it's the last line in the buffer[?25l[56;1H[?12l[?25h[?25l[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hthe youtueuu end[57;1H[K[56;1H[?12l[?25h[?25l111the youtueuu end11[?12l[?25h[?25l[7m11[m1[7mthe youtueuu end 11[?12l[?25h[?25l[m111THE YOUTUSSEUU END[?12l[?25h[?25l[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[m111THE YOUTUSSEUU END
the youtueuu end[56;18H[K[55;1H[?12l[?25h
[?25l
:[?12l[?25h" Uppercase two lines[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;1Hblah di[55;8H[K[56;1Hdoh dut[57;1H[K[56;7H[?12l[?25h[?25l[7mdoh du[mt[7m [?12l[?25h[?25l[55;1Hblah d[mi[7m [56;7Ht[55;7H[?12l[?25h[?25l[mBLAH DI[55;8H[K[56;1HDOH DUT[56;8H[K[55;7H[?12l[?25h[56;7H[?25l[1;56r[56;1H
[1;57r[56;1Hthe youtueuu end[56;7H[?12l[?25h[?25l
:[?12l[?25h" Uppercase part of two lines[?25l[56;7H[?12l[?25h[?25l[1m[34m~                                                                                      [55;1H[?12l[?25h[?25l[m
the youtueuu end[56;18H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hthe youtueuu end[57;1H[K[56;1H[?12l[?25h[?25l333the youtueuu end33[?12l[?25h[55;3H[?25l222the youtueuu end22[?12l[?25h2the yo[?25l[?12l[?25h[?25l[7mutueuu end 
333the yo[?12l[?25h[?25lut[?12l[?25h[?25l[m[55;10HUTUSSEUU END
333THE YOUTU[55;10H[?12l[?25h[54;7H[55;10H[?25l

:[?12l[?25h" visual replace using Enter or NL[?25l[55;10H[?12l[?25h
[?25l[1;56r[1;1H[3M[1;57r[54;1H123456789
123456789
123456789[57;1H[K[56;9H[?12l[?25h[54;9H12345[?25l[?12l[?25h[?25l[7m6[55;6H6[56;6H[?12l[?25h[?25l[m[54;6H[K[55;1H789[55;4H[K[56;6H[K[54;5H[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[54;1H789
12345
789[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[54;1H98765
98765
98765[?12l[?25h[54;5H98[?25l[?12l[?25h[?25l[7m7
[m98[7m7
[m98[?12l[?25h[?25l[54;3H[34m^M[m65
98[34m^M[m65
98[34m^M[m65[54;3H[?12l[?25h
98
[?25l[1;56r[1;1H[3M[1;57r[54;1H123456789
123456789
123456789[?12l[?25h[54;9H12345[?25l[?12l[?25h[?25l[7m6[55;6H6[56;6H[?12l[?25h[?25l[m[54;6H[K[55;1H789[55;4H[K[56;6H[K[54;5H[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[54;1H789
12345
789[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[54;1H98765
98765
98765[?12l[?25h[54;5H98[?25l[?12l[?25h[?25l[7m7
[m98[7m7
[m98[?12l[?25h[?25l[54;3H[34m^@[m65
98[34m^@[m65
98[34m^@[m65[54;3H[?12l[?25h[?25l


:[?12l[?25h"[?25l[54;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test cursor position. When ve=block and Visual block mode and $gj[?25l[54;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ve=block[?25l[54;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexe ":norm! 2k\<C-V>$gj\<Esc>"[?25l[53;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet cpos=getpos("'>")[?25l[53;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='col:'.cpos[2].' off:'.cpos[3][?25l[1;56r[56;1H
[1;57r[56;1Hcol:4 off:0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" block_insert when replacing spaces in front of the block with tabs[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ts=8 sts=4 sw=4[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h4,7y[?25l4 lines yanked[56;1H[?12l[?25h[?25l
4 more lines[57;13H[K[1;56r[56;1H
[1;57r[57;1H[K[57;1H4 more lines[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H#define BO_ALL      0x0001[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hexe ":norm! f0\<C-V>2jI\<tab>\<esc>"[?25l[1;56r[1;1H[2M[1;57r[54;21H    0x0001
#define BO_BS[11C0x0002
#define BO_CRSR[9C0x0004[57;1H[K[54;24H[?12l[?25h[?25l


:[?12l[?25h/^the/,$w >> test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H31 lines, 322 characters appended[54;24H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test39 = test61; then \
#	  if diff test.out test39.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test39.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test39.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test40.failed test.ok test.out X* viminfo
cp test40.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test40.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test40.in" 63 lines, 1536 characters[1;1HTest for "*Cmd" autocommands

STARTTEST
:so small.vim
:/^start/,$w! Xxx[15C" write lines below to Xxx
:au BufReadCmd XtestA 0r Xxx|$del
:e XtestA[23C" will read text of Xxd instead
:au BufWriteCmd XtestA call append(line("$"), "write")
:w[30C" will append a line to the file
:r XtestA[23C" should not read anything
:[31C" now we have:
:[31C" 1     start of Xxx
:[31C" 2[13Ctest40
:[31C" 3     end of Xxx
:[31C" 4     write
:au FileReadCmd XtestB '[r Xxx
:2r XtestB[22C" will read Xxx below line 2 instead
:[31C" 1     start of Xxx
:[31C" 2[13Ctest40
:[31C" 3     start of Xxx
:[31C" 4[13Ctest40
:[31C" 5     end of Xxx
:[31C" 6     end of Xxx
:[31C" 7     write
:au FileWriteCmd XtestC '[,']copy $
4GA1[34m^[[m
:4,5w XtestC[20C" will copy lines 4 and 5 to the end
:r XtestC[23C" should not read anything
:[31C" 1     start of Xxx
:[31C" 2[13Ctest40
:[31C" 3     start of Xxx
:[31C" 4[13Ctest401
:[31C" 5     end of Xxx
:[31C" 6     end of Xxx
:[31C" 7     write
:[31C" 8[13Ctest401
:[31C" 9     end of Xxx
:au FILEAppendCmd XtestD '[,']w! test.out
:w >>XtestD[21C" will write all lines to test.out
:$r XtestD[22C" should not read anything
:$w >>test.out[18C" append "end of Xxx" to test.out
:au BufReadCmd XtestE 0r test.out|$del
:sp XtestE[22C" split window with test.out
5Goasdf[34m^[^W^W[m:"
:au BufWriteCmd XtestE w! test.out
:wall[27C" will write other window to test.out
:[31C" 1     start of Xxx
:[31C" 2[13Ctest40
:[31C" 3     start of Xxx
:[31C" 4[13Ctest401
:[31C" 5     end of Xxx
:[31C" 6     asdf
:[31C" 7     end of Xxx
:[31C" 8     write
:[31C" 9[13Ctest401
:[31C" 10    end of Xxx[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for "*Cmd" autocommands[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 55 lines, 1455 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:[31C" 11    end of Xxx
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^start/,$w! Xxx[34m^I^I[m" write lines below to Xxx[?25l"Xxx" [57;7H[K[57;7H[New File] 3 lines, 32 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufReadCmd XtestA 0r Xxx|$del[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he XtestA[34m^I^I^I[m" will read text of Xxd instead[?25l"Xxx" [57;7H[K[57;7H3 lines, 32 characters[1;1Hstart of Xxx[1;13H[K[2;1H        test40[2;16H[K[3;1Hend of Xxx[3;33H[K[4;1H[1m[34m~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [3;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hau BufWriteCmd XtestA call append(line("$"), "write")[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[34m^I^I^I^I[m" will append a line to the file[?25l[4;1Hwrite[4;6H[K[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hr XtestA[34m^I^I^I[m" should not read anything[?25l[1m[37m[41mE484: Can't open file XtestA[m[57;29H[K[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" now we have:[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 1[34m^I[mstart of Xxx[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 2[34m^I^I[mtest40[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 3[34m^I[mend of Xxx[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 4[34m^I[mwrite[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau FileReadCmd XtestB '[r Xxx[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h2r XtestB[34m^I^I^I[m" will read Xxx below line 2 instead[?25l"Xxx" [57;7H[K[57;7H3 lines, 32 characters[3;56r[3;1H[3L[1;57r[3;1Hstart of Xxx[4;9Htest40
end of Xxx[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[34m^I^I^I^I[m" 1[34m^I[mstart of Xxx[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 2[34m^I^I[mtest40[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 3[34m^I[mstart of Xxx[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 4[34m^I^I[mtest40[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 5[34m^I[mend of Xxx[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 6[34m^I[mend of Xxx[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 7[34m^I[mwrite[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau FileWriteCmd XtestC '[,']copy $[?25l[3;1H[?12l[?25h[4;9H[?25ltest401[?12l[?25h[5;10H[?25l[57;1H[K[57;1H:[?12l[?25h4,5w XtestC[34m^I^I^I[m" will copy lines 4 and 5 to the end[?25l[8;1H        test401[8;16H[K[9;1Hend of Xxx[9;11H[K[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hr XtestC[34m^I^I^I[m" should not read anything[?25l[1m[37m[41mE484: Can't open file XtestC[m[57;29H[K[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 1[34m^I[mstart of Xxx[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 2[34m^I^I[mtest40[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 3[34m^I[mstart of Xxx[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 4[34m^I^I[mtest401[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 5[34m^I[mend of Xxx[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 6[34m^I[mend of Xxx[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 7[34m^I[mwrite[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 8[34m^I^I[mtest401[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 9[34m^I[mend of Xxx[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau FILEAppendCmd XtestD '[,']w! test.out[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XtestD[34m^I^I^I[m" will write all lines to test.out[?25l"test.out" [57;12H[K[57;12H[New File] 9 lines, 91 characters written[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XtestD[34m^I^I^I[m" should not read anything[?25l[1m[37m[41mE484: Can't open file XtestD[m[57;30H[K[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$w >>test.out[34m^I^I^I[m" append "end of Xxx" to test.out[?25l"test.out" [57;12H[K[57;12H1 line, 11 characters appended[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufReadCmd XtestE 0r test.out|$del[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsp XtestE[34m^I^I^I[m" split window with test.out[?25l"test.out" [57;12H[K[57;12H10 lines, 102 characters[10;1Hend of Xxx[10;11H[K[28;1H[1m[7mXtestE                                                                                 [m[29;1Hend of Xxx[29;11H[K[30;1Hend of Xxx[30;11H[K[31;1Hwrite[31;6H[K[32;1H        test401[32;16H[K[33;1Hend of Xxx[33;11H[K[56;1H[7mXtestA                                                                                 [10;1H[?12l[?25h[5;1H[?25l[6;27r[m[6;1H[L[1;57r[6;1Hasdf[28;8H[1m[7m[+][m[57;1H[K[6;4H[?12l[?25h[28;1H[7mXtestE [+][m[1m[7m [m[7m                                                                             [m[56;1H[1m[7mXtestA                                                                                 [33;1H[?25l[57;1H[m:[?12l[?25h"[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufWriteCmd XtestE w! test.out[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwall[34m^I^I^I^I[m" will write other window to test.out[?25l"test.out" [57;12H[K[57;12H11 lines, 107 characters written[28;8H[7m   [33;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 1[34m^I[mstart of Xxx[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 2[34m^I^I[mtest40[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 3[34m^I[mstart of Xxx[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 4[34m^I^I[mtest401[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 5[34m^I[mend of Xxx[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 6[34m^I[masdf[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 7[34m^I[mend of Xxx[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 8[34m^I[mwrite[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 9[34m^I^I[mtest401[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 10[34m^I[mend of Xxx[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[34m^I^I^I^I[m" 11[34m^I[mend of Xxx[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test40 = test61; then \
#	  if diff test.out test40.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test40.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test40.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test41.failed test.ok test.out X* viminfo
cp test41.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test41.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test41.in" 24 lines, 421 characters[1;1HTest for writing and reading a file of over 100 Kbyte

1 line: "This is the start"
3001 lines: "This is the leader"
1 line: "This is the middle"
3001 lines: "This is the trailer"
1 line: "This is the end"

STARTTEST
:%d
aThis is the start
This is the leader
This is the middle
This is the trailer
This is the end[34m^[[mkY3000p2GY3000p
:w! Xtest
:%d
:e! Xtest
:.w! test.out
3003G:.w >>test.out
6005G:.w >>test.out
:qa!
ENDTEST

[1m[34m~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for writing and reading a file of over 100 Kbyte[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[9;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 13 lines, 196 characters written[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[10;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[23;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[24;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h%d[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [m[57;1H--No lines in buffer--[1;1H[?12l[?25h[?25lThis is the start
This is the leader[2;19H[K[3;1HThis is the middle[3;19H[K[4;1HThis is the trailer[4;20H[K[5;1HThis is the end[5;16H[K[5;15H[?12l[?25h[4;15H[?25l[57;1H3000 more lines[57;16H[K[5;13Htrailer
This is the trailer[6;20H[K[7;1HThis is the trailer[7;20H[K[8;1HThis is the trailer[8;20H[K[9;1HThis is the trailer[9;20H[K[10;1HThis is the trailer[10;20H[K[11;1HThis is the trailer[11;20H[K[12;1HThis is the trailer[12;20H[K[13;1HThis is the trailer[13;20H[K[14;1HThis is the trailer[14;20H[K[15;1HThis is the trailer[15;20H[K[16;1HThis is the trailer[16;20H[K[17;1HThis is the trailer[17;20H[K[18;1HThis is the trailer[18;20H[K[19;1HThis is the trailer[19;20H[K[20;1HThis is the trailer[20;20H[K[21;1HThis is the trailer[21;20H[K[22;1HThis is the trailer[22;20H[K[23;1HThis is the trailer[23;20H[K[24;1HThis is the trailer[24;20H[K[25;1HThis is the trailer[25;20H[K[26;1HThis is the trailer[26;20H[K[27;1HThis is the trailer[27;20H[K[28;1HThis is the trailer[28;20H[K[29;1HThis is the trailer[29;20H[K[30;1HThis is the trailer[30;20H[K[31;1HThis is the trailer[31;20H[K[32;1HThis is the trailer[32;20H[K[33;1HThis is the trailer[33;20H[K[34;1HThis is the trailer[34;20H[K[35;1HThis is the trailer[35;20H[K[36;1HThis is the trailer[36;20H[K[37;1HThis is the trailer[37;20H[K[38;1HThis is the trailer[38;20H[K[39;1HThis is the trailer[39;20H[K[40;1HThis is the trailer[40;20H[K[41;1HThis is the trailer[41;20H[K[42;1HThis is the trailer[42;20H[K[43;1HThis is the trailer[43;20H[K[44;1HThis is the trailer[44;20H[K[45;1HThis is the trailer[45;20H[K[46;1HThis is the trailer[46;20H[K[47;1HThis is the trailer[47;20H[K[48;1HThis is the trailer[48;20H[K[49;1HThis is the trailer[49;20H[K[50;1HThis is the trailer[50;20H[K[51;1HThis is the trailer[51;20H[K[52;1HThis is the trailer[52;20H[K[53;1HThis is the trailer[53;20H[K[54;1HThis is the trailer[54;20H[K[55;1HThis is the trailer[55;20H[K[56;1HThis is the trailer[56;20H[K[5;1H[?12l[?25h[2;1H[?25l[3;13Hleader[4;13Hleader[4;19H[K[5;13Hleader[5;19H[K[6;13Hleader[6;19H[K[7;13Hleader[7;19H[K[8;13Hleader[8;19H[K[9;13Hleader[9;19H[K[10;13Hleader[10;19H[K[11;13Hleader[11;19H[K[12;13Hleader[12;19H[K[13;13Hleader[13;19H[K[14;13Hleader[14;19H[K[15;13Hleader[15;19H[K[16;13Hleader[16;19H[K[17;13Hleader[17;19H[K[18;13Hleader[18;19H[K[19;13Hleader[19;19H[K[20;13Hleader[20;19H[K[21;13Hleader[21;19H[K[22;13Hleader[22;19H[K[23;13Hleader[23;19H[K[24;13Hleader[24;19H[K[25;13Hleader[25;19H[K[26;13Hleader[26;19H[K[27;13Hleader[27;19H[K[28;13Hleader[28;19H[K[29;13Hleader[29;19H[K[30;13Hleader[30;19H[K[31;13Hleader[31;19H[K[32;13Hleader[32;19H[K[33;13Hleader[33;19H[K[34;13Hleader[34;19H[K[35;13Hleader[35;19H[K[36;13Hleader[36;19H[K[37;13Hleader[37;19H[K[38;13Hleader[38;19H[K[39;13Hleader[39;19H[K[40;13Hleader[40;19H[K[41;13Hleader[41;19H[K[42;13Hleader[42;19H[K[43;13Hleader[43;19H[K[44;13Hleader[44;19H[K[45;13Hleader[45;19H[K[46;13Hleader[46;19H[K[47;13Hleader[47;19H[K[48;13Hleader[48;19H[K[49;13Hleader[49;19H[K[50;13Hleader[50;19H[K[51;13Hleader[51;19H[K[52;13Hleader[52;19H[K[53;13Hleader[53;19H[K[54;13Hleader[54;19H[K[55;13Hleader[55;19H[K[56;13Hleader[56;19H[K[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hw! Xtest[?25l"Xtest" [57;9H[K[57;9H[New File] 6005 lines, 117092 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h%d[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H--No lines in buffer--[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtest[?25l"Xtest" [57;9H[K[57;9H6005 lines, 117092 characters[1;1HThis is the start
This is the leader[2;19H[K[3;1HThis is the leader[3;19H[K[4;1HThis is the leader[4;19H[K[5;1HThis is the leader[5;19H[K[6;1HThis is the leader[6;19H[K[7;1HThis is the leader[7;19H[K[8;1HThis is the leader[8;19H[K[9;1HThis is the leader[9;19H[K[10;1HThis is the leader[10;19H[K[11;1HThis is the leader[11;19H[K[12;1HThis is the leader[12;19H[K[13;1HThis is the leader[13;19H[K[14;1HThis is the leader[14;19H[K[15;1HThis is the leader[15;19H[K[16;1HThis is the leader[16;19H[K[17;1HThis is the leader[17;19H[K[18;1HThis is the leader[18;19H[K[19;1HThis is the leader[19;19H[K[20;1HThis is the leader[20;19H[K[21;1HThis is the leader[21;19H[K[22;1HThis is the leader[22;19H[K[23;1HThis is the leader[23;19H[K[24;1HThis is the leader[24;19H[K[25;1HThis is the leader[25;19H[K[26;1HThis is the leader[26;19H[K[27;1HThis is the leader[27;19H[K[28;1HThis is the leader[28;19H[K[29;1HThis is the leader[29;19H[K[30;1HThis is the leader[30;19H[K[31;1HThis is the leader[31;19H[K[32;1HThis is the leader[32;19H[K[33;1HThis is the leader[33;19H[K[34;1HThis is the leader[34;19H[K[35;1HThis is the leader[35;19H[K[36;1HThis is the leader[36;19H[K[37;1HThis is the leader[37;19H[K[38;1HThis is the leader[38;19H[K[39;1HThis is the leader[39;19H[K[40;1HThis is the leader[40;19H[K[41;1HThis is the leader[41;19H[K[42;1HThis is the leader[42;19H[K[43;1HThis is the leader[43;19H[K[44;1HThis is the leader[44;19H[K[45;1HThis is the leader[45;19H[K[46;1HThis is the leader[46;19H[K[47;1HThis is the leader[47;19H[K[48;1HThis is the leader[48;19H[K[49;1HThis is the leader[49;19H[K[50;1HThis is the leader[50;19H[K[51;1HThis is the leader[51;19H[K[52;1HThis is the leader[52;19H[K[53;1HThis is the leader[53;19H[K[54;1HThis is the leader[54;19H[K[55;1HThis is the leader[55;19H[K[56;1HThis is the leader[56;19H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 1 line, 18 characters written[1;1H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1HThis is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the leader
This is the middle
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer[28;1H[?12l[?25h[?25l[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 19 characters appended[28;1H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1HThis is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the trailer
This is the end[?12l[?25h[?25l
:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1 line, 16 characters appended[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test41 = test61; then \
#	  if diff test.out test41.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test41.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test41.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test42.failed test.ok test.out X* viminfo
cp test42.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test42.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test42.in" 130 lines, 2368 characters[1;1HTest for writing and reading a file starting with a BOM

STARTTEST
:so mbyte.vim
:set encoding=utf-8
:set fileencodings=ucs-bom,latin-1
:set ff=unix ffs=unix[11C" This changes the file for DOS and MAC
:" --- Write the test files
:/^latin-1$/+1w! Xtest0
:/^utf-8$/+1w! Xtest1
:/^utf-8-err$/+1w! Xtest2
:/^ucs-2$/+1w! Xtest3
:/^ucs-2le$/+1w! Xtest4
:" Need to add a NUL byte after the NL byte
:set bin
:e! Xtest4[22C" Ignore change from setting 'ff'
o[34m^V^@^[[m:set noeol
:w
:set ffs& nobinary[14C" Allow default test42.in format
:e #
:set ff=unix[20C" Format for files to write
:/^ucs-4$/+1w! Xtest5
:/^ucs-4le$/+1w! Xtest6
:" Need to add three NUL bytes after the NL byte
:set bin
:e! Xtest6[22C" ! for when setting 'ff' is a change
o[34m^V^@^V^@^V^@^[[m:set noeol
:w
:set nobin
:e #
:"
:" --- Check that editing a latin-1 file doesn't see a BOM
:e! Xtest0
:redir! >test.out
:set fileencoding bomb?
:redir END
:set fenc=latin-1
:w >>test.out
:set bomb fenc=latin-1
:w! Xtest0x
:"
:" --- Check utf-8
:e! Xtest1
:redir >>test.out
:set fileencoding bomb?
:redir END
:set fenc=latin-1
:w >>test.out
:set fenc=utf-8
:w! Xtest1x
:"
:" --- Check utf-8 with an error (will fall back to latin-1)
:e! Xtest2
:redir >>test.out
:set fileencoding bomb?
:redir END[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for writing and reading a file starting with a BOM[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 111 lines, 2116 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:set fileencoding bomb?
:redir END
:set fenc=latin-1
:w >>test.out
:set fenc=ucs-2le
:w! Xtest4x
:"
:" --- Check ucs-4
:e! Xtest5
:redir >>test.out
:set fileencoding bomb?
:redir END
:set fenc=latin-1
:w >>test.out
:set fenc=ucs-4
:w! Xtest5x
:"
:" --- Check ucs-4le
:e! Xtest6
:redir >>test.out
:set fileencoding bomb?
:redir END
:set fenc=latin-1
:w >>test.out
:set fenc=ucs-4le
:w! Xtest6x
:"
:" --- Check the files written with BOM
:set bin
:e! test.out
:$r Xtest0x
:$r Xtest1x
:$r Xtest2x
:$r Xtest3x
:$r Xtest4x
:$r Xtest5x
:$r Xtest6x
:set nobin ff&[15C" Write the file in default format
:w! test.out
:qa!
ENDTEST

latin-1
latin-1
utf-8
﻿utf-8
utf-8-err
﻿utf-8[34m~@[merr
ucs-2
[34m^@[mu[34m^@[mc[34m^@[ms[34m^@[m-[34m^@[m2[34m^@[m
ucs-2le
u[34m^@[mc[34m^@[ms[34m^@[m-[34m^@[m2[34m^@[ml[34m^@[me[34m^@[m
ucs-4
[34m^@^@[m[34m^@^@^@[mu[34m^@^@^@[mc[34m^@^@^@[ms[34m^@^@^@[m-[34m^@^@^@[m4[34m^@^@^@[m
ucs-4le
[34m^@^@[mu[34m^@^@^@[mc[34m^@^@^@[ms[34m^@^@^@[m-[34m^@^@^@[m4[34m^@^@^@[ml[34m^@^@^@[me[34m^@^@^@[41;1H[?12l[?25h
[?25l[57;1H[m:so! Xdotest[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset encoding=utf-8[?25l[27m[23m[m[H[2J[1;1H:set fileencoding bomb?
:redir END
:set fenc=latin-1
:w >>test.out
:set fenc=ucs-2le
:w! Xtest4x
:"
:" --- Check ucs-4
:e! Xtest5
:redir >>test.out
:set fileencoding bomb?
:redir END
:set fenc=latin-1
:w >>test.out
:set fenc=ucs-4
:w! Xtest5x
:"
:" --- Check ucs-4le
:e! Xtest6
:redir >>test.out
:set fileencoding bomb?
:redir END
:set fenc=latin-1
:w >>test.out
:set fenc=ucs-4le
:w! Xtest6x
:"
:" --- Check the files written with BOM
:set bin
:e! test.out
:$r Xtest0x
:$r Xtest1x
:$r Xtest2x
:$r Xtest3x
:$r Xtest4x
:$r Xtest5x
:$r Xtest6x
:set nobin ff&[15C" Write the file in default format
:w! test.out
:qa!
ENDTEST

latin-1
[34m<fe><fe>[mlatin-1
utf-8
[34m<feff>[mutf-8
utf-8-err
[34m<feff>[mutf-8[34m<80>[merr
ucs-2
[34m<fe><ff>^@[mu[34m^@[mc[34m^@[ms[34m^@[m-[34m^@[m2[34m^@[m
ucs-2le
[34m<ff><fe>[mu[34m^@[mc[34m^@[ms[34m^@[m-[34m^@[m2[34m^@[ml[34m^@[me[34m^@[m
ucs-4
[34m^@^@<fe><ff>^@^@^@[mu[34m^@^@^@[mc[34m^@^@^@[ms[34m^@^@^@[m-[34m^@^@^@[m4[34m^@^@^@[m
ucs-4le
[34m<ff><fe>^@^@[mu[34m^@^@^@[mc[34m^@^@^@[ms[34m^@^@^@[m-[34m^@^@^@[m4[34m^@^@^@[ml[34m^@^@^@[me[34m^@^@^@[42;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hset fileencodings=ucs-bom,latin-1[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ff=unix ffs=unix           " This changes the file for DOS and MAC[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" --- Write the test files[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^latin-1$/+1w! Xtest0[?25l"Xtest0" [57;10H[K[57;10H[New File] 1 line, 10 characters written[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^utf-8$/+1w! Xtest1[?25l"Xtest1" [57;10H[K[57;10H[New File] 1 line, 9 characters written[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^utf-8-err$/+1w! Xtest2[?25l"Xtest2" [57;10H[K[57;10H[New File] 1 line, 13 characters written[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^ucs-2$/+1w! Xtest3[?25l"Xtest3" [57;10H[K[57;10H[New File] 1 line, 14 characters written[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^ucs-2le$/+1w! Xtest4[?25l"Xtest4" [57;10H[K[57;10H[New File] 1 line, 17 characters written[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Need to add a NUL byte after the NL byte[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset bin[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtest4                      " Ignore change from setting 'ff'[?25l"Xtest4" [57;10H[K[57;10H1 line, 17 characters[1;1H[34m<ff><fe>[mu[34m^@[mc[34m^@[ms[34m^@[m-[34m^@[m2[34m^@[ml[34m^@[me[34m^@[m
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h
[?25l[m[34m^@[m[2;3H[K[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noeol[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xtest4" [Incomplete last line] 2 lines, 18 characters written[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ffs& nobinary              " Allow default test42.in format[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he #[?25l"test42.in" [converted] 130 lines, 2385 characters[1;1H:set fileencoding bomb?[1;24H[K[2;1H:redir END
:set fenc=latin-1[3;18H[K[4;1H:w >>test.out[4;14H[K[5;1H:set fenc=ucs-2le[5;18H[K[6;1H:w! Xtest4x[6;12H[K[7;1H:"[7;3H[K[8;1H:" --- Check ucs-4[8;19H[K[9;1H:e! Xtest5[9;11H[K[10;1H:redir >>test.out[10;18H[K[11;1H:set fileencoding bomb?[11;24H[K[12;1H:redir END[12;11H[K[13;1H:set fenc=latin-1[13;18H[K[14;1H:w >>test.out[14;14H[K[15;1H:set fenc=ucs-4[15;16H[K[16;1H:w! Xtest5x[16;12H[K[17;1H:"[17;3H[K[18;1H:" --- Check ucs-4le[18;21H[K[19;1H:e! Xtest6[19;11H[K[20;1H:redir >>test.out[20;18H[K[21;1H:set fileencoding bomb?[21;24H[K[22;1H:redir END[22;11H[K[23;1H:set fenc=latin-1[23;18H[K[24;1H:w >>test.out[24;14H[K[25;1H:set fenc=ucs-4le[25;18H[K[26;1H:w! Xtest6x[26;12H[K[27;1H:"[27;3H[K[28;1H:" --- Check the files written with BOM[28;40H[K[29;1H:set bin[29;9H[K[30;1H:e! test.out[30;13H[K[31;1H:$r Xtest0x[31;12H[K[32;1H:$r Xtest1x[32;12H[K[33;1H:$r Xtest2x[33;12H[K[34;1H:$r Xtest3x[34;12H[K[35;1H:$r Xtest4x[35;12H[K[36;1H:$r Xtest5x[36;12H[K[37;1H:$r Xtest6x[37;12H[K[38;1H:set nobin ff&               " Write the file in default format[38;64H[K[39;1H:w! test.out[39;13H[K[40;1H:qa![40;5H[K[41;1HENDTEST[41;8H[K[42;1H[K[43;1Hlatin-1[43;8H[K[44;1Hþ[44;2Hþ[44;3Hlatin-1[44;10H[K[45;1Hutf-8[45;6H[K[46;1Hï»¿[46;4Hutf-8[46;9H[K[47;1Hutf-8-err[47;10H[K[48;1Hï»¿[48;4Hutf-8[34m<80>[merr[48;16H[K[49;1Hucs-2[49;6H[K[50;1Hþ[50;2Hÿ[34m^@[mu[34m^@[mc[34m^@[ms[34m^@[m-[34m^@[m2[34m^@[m[50;20H[K[51;1Hucs-2le[51;8H[K[52;1Hÿþ[52;3Hu[34m^@[mc[34m^@[ms[34m^@[m-[34m^@[m2[34m^@[ml[34m^@[me[34m^@[m[52;24H[K[53;1Hucs-4[53;6H[K[54;1H[34m^@^@[mþ[54;6Hÿ[34m^@^@^@[mu[34m^@^@^@[mc[34m^@^@^@[ms[34m^@^@^@[m-[34m^@^@^@[m4[34m^@^@^@[m[54;48H[K[55;1Hucs-4le[55;8H[K[56;1Hÿþ[56;3H[34m^@^@[mu[34m^@^@^@[mc[34m^@^@^@[ms[34m^@^@^@[m-[34m^@^@^@[m4[34m^@^@^@[ml[34m^@^@^@[me[34m^@^@^@[m[56;56H[K[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ff=unix                    " Format for files to write[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^ucs-4$/+1w! Xtest5[?25l"Xtest5" [57;10H[K[57;10H[converted][New File] 1 line, 30 characters written[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^ucs-4le$/+1w! Xtest6[?25l"Xtest6" [57;10H[K[57;10H[converted][New File] 1 line, 35 characters written[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Need to add three NUL bytes after the NL byte[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset bin[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtest6                      " ! for when setting 'ff' is a change[?25l"Xtest6" [57;10H[K[57;10H1 line, 33 characters[1;1H[34m<ff><fe>^@^@[mu[34m^@^@^@[mc[34m^@^@^@[ms[34m^@^@^@[m-[34m^@^@^@[m4[34m^@^@^@[ml[34m^@^@^@[me[34m^@^@^@[m
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h
~   [?25l[m[34m^@^@^@[m[2;7H[K[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noeol[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xtest6" [Incomplete last line] 2 lines, 36 characters written[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nobin[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he #[?25l"test42.in" [converted] 130 lines, 2385 characters[1;1H:set fileencoding bomb?[1;24H[K[2;1H:redir END
:set fenc=latin-1[3;18H[K[4;1H:w >>test.out[4;14H[K[5;1H:set fenc=ucs-2le[5;18H[K[6;1H:w! Xtest4x[6;12H[K[7;1H:"[7;3H[K[8;1H:" --- Check ucs-4[8;19H[K[9;1H:e! Xtest5[9;11H[K[10;1H:redir >>test.out[10;18H[K[11;1H:set fileencoding bomb?[11;24H[K[12;1H:redir END[12;11H[K[13;1H:set fenc=latin-1[13;18H[K[14;1H:w >>test.out[14;14H[K[15;1H:set fenc=ucs-4[15;16H[K[16;1H:w! Xtest5x[16;12H[K[17;1H:"[17;3H[K[18;1H:" --- Check ucs-4le[18;21H[K[19;1H:e! Xtest6[19;11H[K[20;1H:redir >>test.out[20;18H[K[21;1H:set fileencoding bomb?[21;24H[K[22;1H:redir END[22;11H[K[23;1H:set fenc=latin-1[23;18H[K[24;1H:w >>test.out[24;14H[K[25;1H:set fenc=ucs-4le[25;18H[K[26;1H:w! Xtest6x[26;12H[K[27;1H:"[27;3H[K[28;1H:" --- Check the files written with BOM[28;40H[K[29;1H:set bin[29;9H[K[30;1H:e! test.out[30;13H[K[31;1H:$r Xtest0x[31;12H[K[32;1H:$r Xtest1x[32;12H[K[33;1H:$r Xtest2x[33;12H[K[34;1H:$r Xtest3x[34;12H[K[35;1H:$r Xtest4x[35;12H[K[36;1H:$r Xtest5x[36;12H[K[37;1H:$r Xtest6x[37;12H[K[38;1H:set nobin ff&               " Write the file in default format[38;64H[K[39;1H:w! test.out[39;13H[K[40;1H:qa![40;5H[K[41;1HENDTEST[41;8H[K[42;1H[K[43;1Hlatin-1[43;8H[K[44;1Hþ[44;2Hþ[44;3Hlatin-1[44;10H[K[45;1Hutf-8[45;6H[K[46;1Hï»¿[46;4Hutf-8[46;9H[K[47;1Hutf-8-err[47;10H[K[48;1Hï»¿[48;4Hutf-8[34m<80>[merr[48;16H[K[49;1Hucs-2[49;6H[K[50;1Hþ[50;2Hÿ[34m^@[mu[34m^@[mc[34m^@[ms[34m^@[m-[34m^@[m2[34m^@[m[50;20H[K[51;1Hucs-2le[51;8H[K[52;1Hÿþ[52;3Hu[34m^@[mc[34m^@[ms[34m^@[m-[34m^@[m2[34m^@[ml[34m^@[me[34m^@[m[52;24H[K[53;1Hucs-4[53;6H[K[54;1H[34m^@^@[mþ[54;6Hÿ[34m^@^@^@[mu[34m^@^@^@[mc[34m^@^@^@[ms[34m^@^@^@[m-[34m^@^@^@[m4[34m^@^@^@[m[54;48H[K[55;1Hucs-4le[55;8H[K[56;1Hÿþ[56;3H[34m^@^@[mu[34m^@^@^@[mc[34m^@^@^@[ms[34m^@^@^@[m-[34m^@^@^@[m4[34m^@^@^@[ml[34m^@^@^@[me[34m^@^@^@[m[56;56H[K[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" --- Check that editing a latin-1 file doesn't see a BOM[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtest0[?25l"Xtest0" [57;10H[K[57;10H[converted] 1 line, 12 characters[1;1Hþ[1;2Hþ[1;3Hlatin-1[1;10H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir! >test.out[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileencoding bomb?[?25l[57;1H[K[57;1H  fileencoding=latin1
nobomb
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[2L[1;1Hþ[1;2Hþ[1;3Hlatin-1
[1m[34m~                                                                                      [m[57;3H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset fenc=latin-1[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H[converted] 1 line, 12 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset bomb fenc=latin-1[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! Xtest0x[?25l"Xtest0x" [57;11H[K[57;11H[converted][New File] 1 line, 12 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" --- Check utf-8[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtest1[?25l"Xtest1" [57;10H[K[57;10H1 line, 9 characters[1;1Hutf-8[1;6H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir >>test.out[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileencoding bomb?[?25l[57;1H[K[57;1H  fileencoding=utf-8
  bomb
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[2L[1;1Hutf-8
[1m[34m~                                                                                      [m[57;3H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset fenc=latin-1[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H[converted] 1 line, 6 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fenc=utf-8[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! Xtest1x[?25l"Xtest1x" [57;11H[K[57;11H[New File] 1 line, 9 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" --- Check utf-8 with an error (will fall back to latin-1)[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtest2[?25l"Xtest2" [57;10H[K[57;10H[converted] 1 line, 17 characters[1;1Hï»¿[1;4Hutf-8[34m<80>[merr[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir >>test.out[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileencoding bomb?[?25l[57;1H[K[57;1H  fileencoding=latin1
nobomb
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[2L[1;1Hï»¿[1;4Hutf-8[34m<80>[merr
[1m[34m~                                                                                      [m[57;3H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset fenc=latin-1[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H[converted] 1 line, 17 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fenc=utf-8[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! Xtest2x[?25l"Xtest2x" [57;11H[K[57;11H[New File] 1 line, 17 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" --- Check ucs-2[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtest3[?25l"Xtest3" [57;10H[K[57;10H[converted] 1 line, 8 characters[1;1Hucs-2[1;6H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir >>test.out[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileencoding bomb?[?25l[57;1H[K[57;1H  fileencoding=utf-16
  bomb
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[2L[1;1Hucs-2
[1m[34m~                                                                                      [m[57;3H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset fenc=latin-1[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H[converted] 1 line, 6 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fenc=ucs-2[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! Xtest3x[?25l"Xtest3x" [57;11H[K[57;11H[converted][New File] 1 line, 8 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" --- Check ucs-2le[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtest4[?25l"Xtest4" [57;10H[K[57;10H[converted] 1 line, 10 characters[1;6Hle[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir >>test.out[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileencoding bomb?[?25l[57;1H[K[57;1H  fileencoding=utf-16le
  bomb
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[2L[1;1Hucs-2le
[1m[34m~                                                                                      [m[57;3H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset fenc=latin-1[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H[converted] 1 line, 8 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fenc=ucs-2le[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! Xtest4x[?25l"Xtest4x" [57;11H[K[57;11H[converted][New File] 1 line, 10 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" --- Check ucs-4[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtest5[?25l"Xtest5" [57;10H[K[57;10H[converted] 1 line, 10 characters[1;5H4[1;6H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir >>test.out[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileencoding bomb?[?25l[57;1H[K[57;1H  fileencoding=ucs-4
  bomb
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[2L[1;1Hucs-4
[1m[34m~                                                                                      [m[57;3H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset fenc=latin-1[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H[converted] 1 line, 6 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fenc=ucs-4[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! Xtest5x[?25l"Xtest5x" [57;11H[K[57;11H[converted][New File] 1 line, 10 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" --- Check ucs-4le[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtest6[?25l"Xtest6" [57;10H[K[57;10H[converted] 1 line, 12 characters[1;6Hle[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir >>test.out[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileencoding bomb?[?25l[57;1H[K[57;1H  fileencoding=ucs-4le
  bomb
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[2L[1;1Hucs-4le
[1m[34m~                                                                                      [m[57;3H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset fenc=latin-1[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H[converted] 1 line, 8 characters appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fenc=ucs-4le[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! Xtest6x[?25l"Xtest6x" [57;11H[K[57;11H[converted][New File] 1 line, 12 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" --- Check the files written with BOM[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset bin[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! test.out[?25l"test.out" [57;12H[K[57;12H35 lines, 275 characters[1;1H[K[2;1H[K[3;1H  fileencoding=latin1[3;22H[K[4;1Hnobomb[4;7H[K[5;1H[34m<fe><fe>[mlatin-1[5;16H[K[6;1H[K[7;1H[K[8;1H  fileencoding=utf-8[8;21H[K[9;1H  bomb[9;7H[K[10;1Hutf-8[10;6H[K[11;1H[K[12;1H[K[13;1H  fileencoding=latin1[13;22H[K[14;1Hnobomb[14;7H[K[15;1H[34m<feff>[mutf-8[34m<80>[merr[15;19H[K[16;1H[K[17;1H[K[18;1H  fileencoding=utf-16[18;22H[K[19;1H  bomb[19;7H[K[20;1Hucs-2[20;6H[K[21;1H[K[22;1H[K[23;1H  fileencoding=utf-16le[23;24H[K[24;1H  bomb[24;7H[K[25;1Hucs-2le[25;8H[K[26;1H[K[27;1H[K[28;1H  fileencoding=ucs-4[28;21H[K[29;1H  bomb[29;7H[K[30;1Hucs-4[30;6H[K[31;1H[K[32;1H[K[33;1H  fileencoding=ucs-4le[33;23H[K[34;1H  bomb[34;7H[K[35;1Hucs-4le[35;8H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r Xtest0x[?25l"Xtest0x" [57;11H[K[57;11H1 line, 10 characters[36;1H[34m<fe><fe>[mlatin-1[36;16H[K[36;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r Xtest1x[?25l"Xtest1x" [57;11H[K[57;11H1 line, 9 characters[37;1H[34m<feff>[mutf-8[37;12H[K[37;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r Xtest2x[?25l"Xtest2x" [57;11H[K[57;11H1 line, 17 characters[38;1Hï»¿[38;4Hutf-8[34m<80>[merr[38;16H[K[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r Xtest3x[?25l"Xtest3x" [57;11H[K[57;11H1 line, 14 characters[39;1H[34m<fe><ff>^@[mu[34m^@[mc[34m^@[ms[34m^@[m-[34m^@[m2[34m^@[m[39;26H[K[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r Xtest4x[?25l"Xtest4x" [57;11H[K[57;11H[Incomplete last line] 2 lines, 18 characters[40;1H[34m<ff><fe>[mu[34m^@[mc[34m^@[ms[34m^@[m-[34m^@[m2[34m^@[ml[34m^@[me[34m^@[m[40;30H[K[41;1H[34m^@[m[41;3H[K[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r Xtest5x[?25l"Xtest5x" [57;11H[K[57;11H1 line, 28 characters[42;1H[34m^@^@<fe><ff>^@^@^@[mu[34m^@^@^@[mc[34m^@^@^@[ms[34m^@^@^@[m-[34m^@^@^@[m4[34m^@^@^@[m[42;54H[K[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r Xtest6x[?25l"Xtest6x" [57;11H[K[57;11H[Incomplete last line] 2 lines, 36 characters[43;1H[34m<ff><fe>^@^@[mu[34m^@^@^@[mc[34m^@^@^@[ms[34m^@^@^@[m-[34m^@^@^@[m4[34m^@^@^@[ml[34m^@^@^@[me[34m^@^@^@[m[43;62H[K[44;1H[34m^@^@^@[m[44;7H[K[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nobin ff&               " Write the file in default format[?25l[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H44 lines, 409 characters written[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test42 = test61; then \
#	  if diff test.out test42.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test42.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test42.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test43.failed test.ok test.out X* viminfo
cp test43.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test43.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test43.in" 34 lines, 473 characters[1;1HTests for regexp with various magic settings.

STARTTEST
:so small.vim
:set nocompatible viminfo+=nviminfo
/^1
/a*b\{2}c\+/e
x/\Md\*e\{2}f\+/e
x:set nomagic
/g\*h\{2}i\+/e
x/\mj*k\{2}l\+/e
x/\vm*n{2}o+/e
x/\V^aa$
x:set magic
/\v(a)(b)\2\1\1/e
x/\V[ab]\(\[xy]\)\1
x:$
:set undolevels=100
dv?bar?
Yup:"
:?^1?,$w! test.out
:qa!
ENDTEST

1 a aa abb abbccc
2 d dd dee deefff
3 g gg ghh ghhiii
4 j jj jkk jkklll
5 m mm mnn mnnooo
6 x ^aa$ x
7 (a)(b) abbaa
8 axx [ab]xx
9 foobar

[1m[34m~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for regexp with various magic settings.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 19 lines, 268 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[23;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[24;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[24;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocompatible viminfo+=nviminfo[?25l[24;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^1[?25l[25;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25ha*b\{2}c\+/e[?25l[25;17H[?12l[?25h[?25l[25;17H[K[25;16H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\Md\*e\{2}f\+/e[?25l[26;17H[?12l[?25h[?25l[26;17H[K[26;16H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nomagic[?25l[26;16H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hg\*h\{2}i\+/e[?25l[27;17H[?12l[?25h[?25l[27;17H[K[27;16H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\mj*k\{2}l\+/e[?25l[28;17H[?12l[?25h[?25l[28;17H[K[28;16H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\vm*n{2}o+/e[?25l[29;17H[?12l[?25h[?25l[29;17H[K[29;16H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\V^aa$[?25l[30;5H[?12l[?25h[?25laa$ x[30;10H[K[30;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic[?25l[30;5H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\v(a)(b)\2\1\1/e[?25l[31;14H[?12l[?25h[?25l[31;14H[K[31;13H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\V[ab]\(\[xy]\)\1[?25l[32;7H[?12l[?25h[?25lab]x[32;12H[K[32;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$[?25l[34;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset undolevels=100[?25l[34;1H[?12l[?25h[?25l[57;1H[K[57;1H?[?12l[?25hbar?[?25l[57;5H[K[57;1H[33;6H[K[34;1H[1m[34m~                                                                                      [33;5H[?12l[?25h[?25l[m[57;1H1 more line; before #2  0 seconds ago[33;6Hbar[34;1H[K[33;6H[?12l[?25h[?25l[34;56r[34;1H[L[1;57r[34;1H9 foo[57;1H[K[34;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[34;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h?^1?,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New] 11L, 137C written[34;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test43 = test61; then \
#	  if diff test.out test43.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test43.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test43.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test44.failed test.ok test.out X* viminfo
cp test44.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test44.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test44.in" 81 lines, 1492 characters[1;1HTests for regexp with multi-byte encoding and various magic settings.
Test matchstr() with a count and multi-byte chars.
See test99 for exactly the same test with re=2.

STARTTEST
:so mbyte.vim
:set nocompatible encoding=utf-8 termencoding=latin1 viminfo+=nviminfo
:set re=1
/^1
/a*b\{2}c\+/e
x/\Md\*e\{2}f\+/e
x:set nomagic
/g\*h\{2}i\+/e
x/\mj*k\{2}l\+/e
x/\vm*n{2}o+/e
x/\V^aa$
x:set magic
/\v(a)(b)\2\1\1/e
x/\V[ab]\(\[xy]\)\1
x:" Now search for multi-byte without composing char
/ม
x:" Now search for multi-byte with composing char
/ม[34m~H[m
x:" find word by change of word class
/[34m~A[m\<[34m~B[m[34m~C[m\>[34m~A[m
x:" Test \%u, [\u] and friends
:" c
/\%u20ac
x:" d
/[\u4f7f\u5929]\+
x:" e
/\%U12345678
x:" f
/[\U1234abcd\u1234\uabcd]
x:" g
/\%d21879b
x:" j Test backwards search from a multi-byte char
/x
x?.
x:" k
:let @w=':%s#comb[i]nations#[34m~S[m[34m~D[mṣ[34m~A[mm̥[34m~D[mα[34m~D[m[34m~F[m[34m~A[m#g'
:@w
:"
:" l Test what 7.3.192 fixed
/^l
:s/ \?/ /g
:?^1?,$w! test.out
:e! test.out
G:put =matchstr(\"[34m~P[m[34m~Q[m[34m~R[m[34m~S[m\", \".\", 0, 2) " [34m~Q[m
:put =matchstr(\"[34m~P[m[34m~Q[m[34m~R[m[34m~S[m\", \"..\", 0, 2) " [34m~Q[m[34m~R[m
:put =matchstr(\"[34m~P[m[34m~Q[m[34m~R[m[34m~S[m\", \".\", 0, 0) " [34m~P[m
:put =matchstr(\"[34m~P[m[34m~Q[m[34m~R[m[34m~S[m\", \".\", 4, -1) " [34m~R[m
:new
:$put =['dog(a', 'cat(']
/(/e+
"ayn:bd![1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for regexp with multi-byte encoding and various magic settings.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[5;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 55 lines, 1023 characters written[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[6;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[5M[1;57r[52;1H:$put =''
G"ap
:w!
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocompatible encoding=utf-8 termencoding=latin1 viminfo+=nviminfo[?25l[27m[23m[m[H[2J[1;1H:set nocompatible encoding=utf-8 termencoding=latin1 viminfo+=nviminfo
:set re=1
/^1
/a*b\{2}c\+/e
x/\Md\*e\{2}f\+/e
x:set nomagic
/g\*h\{2}i\+/e
x/\mj*k\{2}l\+/e
x/\vm*n{2}o+/e
x/\V^aa$
x:set magic
/\v(a)(b)\2\1\1/e
x/\V[ab]\(\[xy]\)\1
x:" Now search for multi-byte without composing char
/
x:" Now search for multi-byte with composing char
/
x:" find word by change of word class
/?\<??\>?
x:" Test \%u, [\u] and friends
:" c
/\%u20ac
x:" d
/[\u4f7f\u5929]\+
x:" e
/\%U12345678
x:" f
/[\U1234abcd\u1234\uabcd]
x:" g
/\%d21879b
x:" j Test backwards search from a multi-byte char
/x
x?.
x:" k
:let @w=':%s#comb[i]nations#[35;30Hm[35;33H#g'
:@w
:"
:" l Test what 7.3.192 fixed
/^l
:s/ \?/ /g
:?^1?,$w! test.out
:e! test.out
G:put =matchstr(\"\", \".\", 0, 2) " 
:put =matchstr(\"\", \"..\", 0, 2) " 
:put =matchstr(\"\", \".\", 0, 0) " 
:put =matchstr(\"\", \".\", 4, -1) " 
:new
:$put =['dog(a', 'cat(']
/(/e+
"ayn:bd!
:$put =''
G"ap
:w!
:qa!
ENDTEST
[?12l[?25h[?25l
:[?12l[?25hset re=1[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^1[?25l[1;56r[56;1H
[1;57r[56;1H1 a aa abb abbccc[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25ha*b\{2}c\+/e[?25l[56;17H[?12l[?25h[?25l[56;17H[K[56;16H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\Md\*e\{2}f\+/e[?25l[1;56r[56;1H
[1;57r[56;1H2 d dd dee deefff[57;1H[K[56;17H[?12l[?25h[?25l[56;17H[K[56;16H[?12l[?25h[?25l
:[?12l[?25hset nomagic[?25l[56;16H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hg\*h\{2}i\+/e[?25l[1;56r[56;1H
[1;57r[56;1H3 g gg ghh ghhiii[57;1H[K[56;17H[?12l[?25h[?25l[56;17H[K[56;16H[?12l[?25h[?25l
/[?12l[?25h\mj*k\{2}l\+/e[?25l[1;56r[56;1H
[1;57r[56;1H4 j jj jkk jkklll[57;1H[K[56;17H[?12l[?25h[?25l[56;17H[K[56;16H[?12l[?25h[?25l
/[?12l[?25h\vm*n{2}o+/e[?25l[1;56r[56;1H
[1;57r[56;1H5 m mm mnn mnnooo[57;1H[K[56;17H[?12l[?25h[?25l[56;17H[K[56;16H[?12l[?25h[?25l
/[?12l[?25h\V^aa$[?25l[1;56r[56;1H
[1;57r[56;1H6 x ^aa$ x[57;1H[K[56;5H[?12l[?25h[?25laa$ x[56;10H[K[56;5H[?12l[?25h[?25l
:[?12l[?25hset magic[?25l[56;5H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\v(a)(b)\2\1\1/e[?25l[1;56r[56;1H
[1;57r[56;1H7 (a)(b) abbaa[57;1H[K[56;14H[?12l[?25h[?25l[56;14H[K[56;13H[?12l[?25h[?25l
/[?12l[?25h\V[ab]\(\[xy]\)\1[?25l[1;56r[56;1H
[1;57r[56;1H8 axx [ab]xx[57;1H[K[56;7H[?12l[?25h[?25lab]x[56;12H[K[56;7H[?12l[?25h[?25l
:[?12l[?25h" Now search for multi-byte without composing char[?25l[56;7H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H9 x x[57;1H[K[56;8H[?12l[?25h[?25lx[56;9H[K[56;8H[?12l[?25h[?25l
:[?12l[?25h" Now search for multi-byte with composing char[?25l[56;8H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Ha x x[57;1H[K[56;8H[?12l[?25h[?25lx[56;9H[K[56;8H[?12l[?25h[?25l
:[?12l[?25h" find word by change of word class[?25l[56;8H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h?\<??\>?[?25l[1;56r[56;1H
[1;57r[56;1Hb ????[57;1H[K[56;3H[?12l[?25h[?25l???[56;9H[K[56;3H[?12l[?25h[?25l
:[?12l[?25h" Test \%u, [\u] and friends[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" c[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\%u20ac[?25l[1;56r[56;1H
[1;57r[56;1Hc x [56;7Hx[57;1H[K[56;6H[?12l[?25h[?25lx[56;7H[K[56;6H[?12l[?25h[?25l
:[?12l[?25h" d[?25l[56;6H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h[\u4f7f\u5929]\+[?25l[1;56r[56;1H
[1;57r[56;1Hd ??x[57;1H[K[56;3H[?12l[?25h[?25l?x [56;7H[K[56;3H[?12l[?25h[?25l
:[?12l[?25h" e[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\%U12345678[?25l[1;56r[56;1H
[1;57r[56;1He y[57;1H[K[56;3H[?12l[?25h[?25ly[56;4H[K[56;3H[?12l[?25h[?25l
:[?12l[?25h" f[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h[\U1234abcd\u1234\uabcd][?25l[1;56r[56;1H
[1;57r[56;1Hf z[57;1H[K[56;3H[?12l[?25h[?25lz[56;4H[K[56;3H[?12l[?25h[?25l
:[?12l[?25h" g[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\%d21879b[?25l[1;56r[56;1H
[1;57r[56;1Hg a?bb[57;1H[K[56;4H[?12l[?25h[?25lbb[56;6H[K[56;4H[?12l[?25h[?25l
:[?12l[?25h" j Test backwards search from a multi-byte char[?25l[56;4H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hx[?25l[1;56r[56;1H
[1;57r[56;1Hj 0123[56;8Hx[57;1H[K[56;8H[?12l[?25h[?25l[56;8H[K[56;7H[?12l[?25h[?25l
?[?12l[?25h.[?25l[56;6H[?12l[?25h[?25l[56;7H[K[56;6H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" k[?25l[56;6H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet @w=':%s#comb[i]nations#[57;30H[57;30Hmmm[57;33H[57;33H[57;33H[1C#g'[?25l[56;6H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h@w[?25l[1;56r[56;1H
[1;57r[56;1Hk [56;4Hm[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" l Test what 7.3.192 fixed[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^l[?25l[1;56r[56;1H
[1;57r[56;1Hl  [56;7H[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/ \?/ /g[?25l5 substitutions on 1 line[56;1H l   [56;10H[56;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h?^1?,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New] 19L, 250C written[56;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! test.out[?25l"test.out" [57;12H[K[57;12H19L, 250C[1;1H1 a aa abb abbcc[1;17H[K[2;1H2 d dd dee deeff
3 g gg ghh ghhii
4 j jj jkk jkkll
5 m mm mnn mnnoo[5;17H[K[6;1H6 x aa$ x
7 (a)(b) abba
8 axx ab]xx
9 x x[9;9H[K[10;1Ha x x
b ???[11;9H[K[12;1Hc x x[12;7H[K[13;1Hd ?x
e y
f z[15;5H[K[16;1Hg abb[16;6H[K[17;1Hj 012[18;1Hk [18;4Hm[19;1H l   [19;9H [19;11H[K[20;1H[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[19;2H[?25l[m[57;1H[K[57;1H:[?12l[?25hput =matchstr(\"\", \".\", 0, 2) " [?25l[20;1H[20;2H[K[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hput =matchstr(\"\", \"..\", 0, 2) " [?25l[21;1H[21;3H[K[21;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hput =matchstr(\"\", \".\", 0, 0) " [?25l[22;1H[22;2H[K[22;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hput =matchstr(\"\", \".\", 4, -1) " [?25l[23;1H[23;2H[K[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;1Hc x x[29;7H[K[30;1Hd ?x[30;6H[K[31;1He y[31;4H[K[32;1Hf z[32;4H[K[33;1Hg abb[33;6H[K[34;1Hj 012[34;7H[K[35;1Hk [35;4Hm[35;7H[K[36;1H l   [36;9H [36;11H[K[37;1H[37;2H[K[38;1H[38;3H[K[39;1H[39;2H[K[40;1H[40;2H[K[56;1H[7mtest.out [+]                                                                           [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put =['dog(a', 'cat('][?25l[2;1Hdog(a[2;6H[K[3;1Hcat([3;5H[K[28;11H[1m[7m[+][3;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/[?12l[?25h(/e+[?25l/(/e+1[3;4H[?12l[?25h[?25l[57;1H[31msearch hit BOTTOM, continuing at TOP[2;5H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hbd![?25l[1;1H1 a aa abb abbcc
2 d dd dee deeff
3 g gg ghh ghhii
4 j jj jkk jkkll[4;17H[K[5;1H5 m mm mnn mnnoo[5;17H[K[6;1H6 x aa$ x[6;10H[K[7;1H7 (a)(b) abba[7;14H[K[8;1H8 axx ab]xx[8;12H[K[9;1H9 x x[9;9H[K[10;1Ha x x[10;9H[K[11;1Hb ???[11;9H[K[12;1Hc x x[12;7H[K[13;1Hd ?x[13;6H[K[14;1He y[14;4H[K[15;1Hf z[15;4H[K[16;1Hg abb[16;6H[K[17;1Hj 012[17;7H[K[18;1Hk [18;4Hm[18;7H[K[19;1H l   [19;9H [19;11H[K[20;1H[20;2H[K[21;1H[21;3H[K[22;1H[22;2H[K[23;1H[23;2H[K[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [56;1H~                                                                                      [23;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[24;1H[K[24;1H[?12l[?25h[?25la
cat([25;5H[K[24;1H[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hw![?25l"test.out" 25L, 271C written[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test44 = test61; then \
#	  if diff test.out test44.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test44.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test44.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test45.failed test.ok test.out X* viminfo
cp test45.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test45.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test45.in" 90 lines, 1953 characters[1;1HTests for folding. vim: set ft=vim :

STARTTEST
:so small.vim
:" We also need the +syntax feature here.
:if !has("syntax")
   e! test.ok
   w! test.out
   qa!
:endif
:" basic test if a fold can be created, opened, moving to the end and closed
/^1
zf2j:call append("$", "manual " . getline(foldclosed(".")))
zo:call append("$", foldclosed("."))
]z:call append("$", getline("."))
zc:call append("$", getline(foldclosed(".")))
:" test folding with markers.
:set fdm=marker fdl=1 fdc=3
/^5
:call append("$", "marker " . foldlevel("."))
[z:call append("$", foldlevel("."))
jo{{ [34m^[[mr{jj:call append("$", foldlevel("."))
kYpj:call append("$", foldlevel("."))
:" test folding with indent
:set fdm=indent sw=2
/^2 b
i  [34m^[[mjI    [34m^[[m:call append("$", "indent " . foldlevel("."))
k:call append("$", foldlevel("."))
:" test syntax folding
:set fdm=syntax fdl=0
:syn region Hup start="dd" end="ii" fold contains=Fd1,Fd2,Fd3
:syn region Fd1 start="ee" end="ff" fold contained
:syn region Fd2 start="gg" end="hh" fold contained
:syn region Fd3 start="commentstart" end="commentend" fold contained
Gzk:call append("$", "folding " . getline("."))
k:call append("$", getline("."))
jAcommentstart  [34m^[[mAcommentend[34m^[[m:set fdl=1
3j:call append("$", getline("."))
:set fdl=0
zO[34m^L[mj:call append("$", getline("."))
:" test expression folding
:fun Flvl()
  let l = getline(v:lnum)
  if l =~ "bb$"
    return 2
  elseif l =~ "gg$"
    return "s1"
  elseif l =~ "ii$"
    return ">2"
  elseif l =~ "kk$"
    return "0"
  endif
  return "="
endfun
:set fdm=expr fde=Flvl()
/bb$[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for folding. vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 73 lines, 1820 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[21M[1;57r[36;1H:call append("$", "expr " . foldlevel("."))
/hh$
:call append("$", foldlevel("."))
/ii$
:call append("$", foldlevel("."))
/kk$
:call append("$", foldlevel("."))
:/^last/+1,$w! test.out
:delfun Flvl
:new
iTest fdm=indent and :move bug END
line2[48;9HTest fdm=indent START[49;9Hline3[50;9Hline4[34m^[[m
:set fdm=indent
:1m1
2jzc:m0
:%w >> test.out
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" We also need the +syntax feature here.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !has("syntax")[?25l
:  [?12l[?25h   e! test.ok
[?25l:  [?12l[?25h   w! test.out
[?25l:  [?12l[?25h   qa!
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1HkYpj:call append("$", foldlevel("."))
:" test folding with indent
:set fdm=indent sw=2
/^2 b[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h" basic test if a fold can be created, opened, moving to the end and closed[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^1[?25l[1;56r[56;1H
[1;57r[56;1H1 aa[57;1H[K[56;1H[?12l[?25h[?25l[34m[47m+--  3 lines: 1 aa---------------------------------------------------------------------[56;1H[?12l[?25h[?25l
[m:[?12l[?25hcall append("$", "manual " . getline(foldclosed(".")))[?25l[56;1H[?12l[?25h[?25l1 aa[56;5H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append("$", foldclosed("."))[?25l[56;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1H2 bb
3 cc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hcall append("$", getline("."))[?25l[56;1H[?12l[?25h[?25l[54;1H[34m[47m+--  3 lines: 1 aa---------------------------------------------------------------------[m[55;1H4 dd {{{
5 ee {{{ }}}[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append("$", getline(foldclosed(".")))[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test folding with markers.[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fdm=marker fdl=1 fdc=3[?25l[1;1H[34m[47m   [m/^2 b
[34m[47m   [mi  [34m^[[mjI    [34m^[[m:call append("$", "indent " . foldlevel("."))
[34m[47m   [mk:call append("$", foldlevel("."))
[34m[47m   [m:" test syntax folding
[34m[47m   [m:set fdm=syntax fdl=0
[34m[47m   [m:syn region Hup start="dd" end="ii" fold contains=Fd1,Fd2,Fd3
[34m[47m   [m:syn region Fd1 start="ee" end="ff" fold contained
[34m[47m   [m:syn region Fd2 start="gg" end="hh" fold contained
[34m[47m   [m:syn region Fd3 start="commentstart" end="commentend" fold contained
[34m[47m   [mGzk:call append("$", "folding " . getline("."))
[34m[47m   [mk:call append("$", getline("."))
[34m[47m   [mjAcommentstart  [34m^[[mAcommentend[34m^[[m:set fdl=1
[34m[47m   [m3j:call append("$", getline("."))
[34m[47m   [m:set fdl=0
[34m[47m   [mzO[34m^L[mj:call append("$", getline("."))
[34m[47m   [m:" test expression folding
[34m[47m   [m:fun Flvl()
[34m[47m   [m  let l = getline(v:lnum)
[34m[47m   [m  if l =~ "bb$"
[34m[47m   [m    return 2
[34m[47m   [m  elseif l =~ "gg$"
[34m[47m   [m    return "s1"
[34m[47m   [m  elseif l =~ "ii$"
[34m[47m   [m    return ">2"
[34m[47m   [m  elseif l =~ "kk$"
[34m[47m   [m    return "0"
[34m[47m   [m  endif
[34m[47m   [m  return "="
[34m[47m   [mendfun
[34m[47m   [m:set fdm=expr fde=Flvl()
[34m[47m   [m/bb$
[34m[47m   [m:call append("$", "expr " . foldlevel("."))
[34m[47m   [m/hh$
[34m[47m   [m:call append("$", foldlevel("."))
[34m[47m   [m/ii$
[34m[47m   [m:call append("$", foldlevel("."))
[34m[47m   [m/kk$
[34m[47m   [m:call append("$", foldlevel("."))
[34m[47m   [m:/^last/+1,$w! test.out
[34m[47m   [m:delfun Flvl
[34m[47m   [m:new
[34m[47m   [miTest fdm=indent and :move bug END
[34m[47m   [mline2
[34m[47m   [m        Test fdm=indent START
[34m[47m   [m        line3
[34m[47m   [m        line4[34m^[[m
[34m[47m   [m:set fdm=indent
[34m[47m   [m:1m1
[34m[47m   [m2jzc:m0
[34m[47m   [m:%w >> test.out
[34m[47m   [m:qa!
[34m[47m   [mENDTEST
[34m[47m   
   [m1 aa[54;8H[K[55;1H[34m[47m   [m2 bb[55;8H[K[56;1H[34m[47m   [m3 cc[56;8H[K[56;4H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^5[?25l[1;4Hk:call append("$", foldlevel("."))[2;4H:" test syntax folding[2;26H[K[3;4H:set fdm=syntax fdl=0[3;25H[K[4;5Hsyn region Hup start="dd" end="ii" fold contains=Fd1,Fd2,Fd3[5;6Hyn region Fd1 start="ee" end="ff" fold contained[6;16HFd2[8Cgg[7Chh[14Ced[6;54H[K[7;18H3[8Ccommentstart" end="commentend" fold contained[8;4HGzk:call append("$", "folding " . getline("."))[8;51H[K[9;4Hk:call append("$", getline("."))[9;36H[K[10;4HjAcommentstart  [34m^[[mAcommentend[34m^[[m:set fdl=1[10;45H[K[11;4H3j:call append("$", getline("."))[12;4H:set fdl=0[12;14H[K[13;4HzO[34m^L[mj:call append("$", getline("."))[14;5H" test expression folding[15;4H:fun Flvl()[15;15H[K[16;4H  let l = getline(v:lnum)[16;29H[K[17;4H  if l =~ "bb$"[18;6H  return 2[18;16H[K[19;6Helseif l =~ "gg$"[20;15H"s1"[21;19Hii[22;16H>2[23;19Hkk[24;16H0"[24;18H[K[25;7Hndif[25;11H[K[26;6Hreturn "=[26;16H[K[27;4Hendfun[27;10H[K[28;4H:set fdm=expr fde=Flvl()[29;4H/bb$[29;8H[K[30;5Hcall append("$", "expr " . foldlevel("."))[31;5Hhh[32;22Hfoldlevel("."))[32;37H[K[33;5Hii[35;5Hkk[37;4H:/^last/+1,$w! test.out[38;5Hdelfun Flvl[38;16H[K[39;5Hnew[39;8H[K[40;4HiTest fdm=indent and :move bug END[41;4Hline2[42;4H        Test fdm=indent START[42;33H[K[43;4H        line3[44;12Hline4[34m^[[m[44;19H[K[45;4H:set fdm=indent[46;4H:1m1[46;12H[K[47;4H2jzc:m0[47;11H[K[48;5H%w >> test.out[49;4H:qa![49;8H[K[50;4HENDTEST[50;11H[K[51;4H[K[52;4H1 aa[52;8H[K[53;4H2 bb[54;4H3 cc
[34m[47m-[m[2C4 dd {{{
[34m[47m|-[m[1C5 ee {{{ }}}[56;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append("$", "marker " . foldlevel("."))[?25l[56;4H[?12l[?25h[55;4H[?25l[57;1H[K[57;1H:[?12l[?25hcall append("$", foldlevel("."))[?25l[55;4H[?12l[?25h[56;4H[?25l[1;56r[56;1H
[1;57r[56;1H[34m[47m|  [m{{[57;1H[K[56;6H[?12l[?25h[?25l[56;2H[34m[47m-[m[3C{[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[34m[47m|| [m6 ff }}}[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[34m[47m|  [m7 gg[?12l[?25h[?25l
:[?12l[?25hcall append("$", foldlevel("."))[?25l[56;6H[?12l[?25h[55;6H[?25l[56;4H6 ff }}}[56;4H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[34m[47m   [m7 gg[57;1H[K[56;4H[?12l[?25h[?25l
:[?12l[?25hcall append("$", foldlevel("."))[?25l[56;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test folding with indent[?25l[56;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fdm=indent sw=2[?25l[12;1H[34m[47m-
|
|-
|
|-
|
|-
|
|-
|
|[38;1H-+[m[1C[34m[47m+---  3 lines: Test fdm=indent START------------------------------------------------[m[39;4H:set fdm=indent[40;4H:1m1[40;12H[K[41;4H2jzc:m0[41;11H[K[42;5H%w >> test.out[43;4H:qa![43;8H[K[44;4HENDTEST[44;11H[K[45;4H[K[46;4H1 aa[46;8H[K[47;4H2 bb[48;4H3 cc[49;4H4 dd {{{[50;4H5 ee {{{ }}}
[34m[47m [m[2C{{{[51;7H[K[52;1H[34m[47m  [m[1C6 ff }}}[52;13H[K[53;1H[34m[47m  [m[1C6 ff }}}
[34m[47m  [m[1C7 gg[54;9H[K[55;1H[34m[47m [m[2C8 hh[55;9H[K[56;4H9 ii[54;4H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^2 b[?25l[31msearch hit BOTTOM, continuing at TOP[47;4H[?12l[?25h[?25l[m[34m[47m-[m[2C  2 bb[?12l[?25h[48;5H[?25l[34m[47m|-[m[1C    3 cc[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append("$", "indent " . foldlevel("."))[?25l[48;7H[?12l[?25h[47;7H[?25l[57;1H[K[57;1H:[?12l[?25hcall append("$", foldlevel("."))[?25l[47;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test syntax folding[?25l[47;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fdm=syntax fdl=0[?25l[12;1H[34m[47m 
 
  
 
  
 
  
 
  
 
 [38;1H  [m[1C        Test fdm=indent START[38;33H[K[39;4H        line3[39;17H[K[40;4H        line4[34m^[[m[41;4H:set fdm=indent[42;5H1m1[42;8H[K[43;4H2jzc:m0[44;4H:%w >> test.out[45;4H:qa![46;4HENDTEST
[34m[47m [m[47;6H[K[48;1H[34m[47m  [m[1C1 aa[48;8H[K[49;4H  2 bb[49;10H[K[50;4H    3 cc[50;13H[K[51;4H4 dd {{{[52;4H5 ee {{{ }}}[53;4H{{{[53;7H[K[54;4H6 ff }}}[55;4H6 ff }}}[56;4H7 gg[49;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsyn region Hup start="dd" end="ii" fold contains=Fd1,Fd2,Fd3[?25l[51;1H[34m[47m+[m[2C[34m[47m+--  8 lines: 4 dd -----------------------------------------------------------------[m[52;4Ha jj[52;9H[K[53;4Hb kk[54;4Hlast[54;9H[K[55;4Hmanual 1 aa[56;4H-1[56;6H[K[49;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsyn region Fd1 start="ee" end="ff" fold contained[?25l[49;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsyn region Fd2 start="gg" end="hh" fold contained[?25l[49;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsyn region Fd3 start="commentstart" end="commentend" fold contained[?25l[49;7H[?12l[?25h[?25l[1;56r[1;1H[8M[1;57r[49;1H[34m[47m   [m3 cc
[34m[47m   [m1 aa
[34m[47m   [mmarker 2
[34m[47m   [m1
[34m[47m   [m1
[34m[47m   [m0
[34m[47m   [mindent 2
[34m[47m   [m1[57;1H[K[56;4H[?12l[?25h[43;4H[?25l[57;1H:[?12l[?25hcall append("$", "folding " . getline("."))[?25l[43;4H[?12l[?25h[42;4H[?25l[57;1H[K[57;1H:[?12l[?25hcall append("$", getline("."))[?25l[42;4H[?12l[?25h[43;4H[?25l[34m[47m--[m[1C4 dd {{{commentstart  [43;26H[K[44;1H[34m[47m||[m[1C5 ee {{{ }}}
[34m[47m||[m[1C{{{[45;7H[K[46;1H[34m[47m||[m[1C6 ff }}}
[34m[47m||[m[1C6 ff }}}[47;13H[K[48;1H[34m[47m||[m[1C7 gg
[34m[47m||[m[1C8 hh
[34m[47m||[m[1C9 ii
[34m[47m||[m[1Ca jj[51;8H[K[52;1H[34m[47m||[m[1Cb kk
[34m[47m||[m[1Clast
[34m[47m||[m[1Cmanual 1 aa
[34m[47m||[m[1C-1[55;6H[K[56;1H[34m[47m||[m[1C3 cc[43;25H[?12l[?25h[?25l[43;2H[34m[47m [m[23Ccommentend[44;2H[34m[47m-[47;2H 
|-

| 
  
  
  
  
  
  [43;35H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset fdl=1[?25l[44;2H[34m[47m+[m[1C[34m[47m+---  3 lines: 5 ee ----------------------------------------------------------------[m[45;2H[34m[47m [m[1C6 ff }}}[46;2H[34m[47m+[m[1C[34m[47m+---  2 lines: 7 gg-----------------------------------------------------------------[m[47;4H9 ii[47;9H[K[48;1H[34m[47m  [m[1Ca jj
[34m[47m  [m[1Cb kk
[34m[47m [m[2Clast[51;4Hmanual 1 aa[52;4H-1[52;6H[K[53;4H3 cc[54;4H1 aa[54;8H[K[55;4Hmarker 2[56;4H1[56;6H[K[43;35H[?12l[?25h[46;4H[?25l[57;1H[K[57;1H:[?12l[?25hcall append("$", getline("."))[?25l[46;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fdl=0[?25l[43;1H[34m[47m+[m[2C[34m[47m+--  8 lines: 4 dd commentstart  commentend-----------------------------------------[m[44;1H[34m[47m  [m[1Ca jj[44;8H[K[45;1H[34m[47m [m[2Cb kk[45;9H[K[46;1H[34m[47m  [m[1Clast[46;8H[K[47;1H[34m[47m [m[2Cmanual 1 aa[48;4H-1[48;6H[K[49;4H3 cc[50;4H1 aa[51;6Hrker 2[51;13H[K[52;4H1[52;5H[K[53;4H1[53;6H[K[54;4H0[54;6H[K[55;4Hindent[43;4H[?12l[?25h[?25l[34m[47m-[m[2C4 dd {{{commentstart  commentend[43;36H[K[44;1H[34m[47m|-[m[1C5 ee {{{ }}}
[34m[47m||[m[1C{{{[45;7H[K[46;1H[34m[47m||[m[1C6 ff }}}
[34m[47m|[m[2C6 ff }}}[47;13H[K[48;1H[34m[47m|-[m[1C7 gg
[34m[47m||[m[1C8 hh
[34m[47m|[m[2C9 ii[51;4Ha jj[51;8H[K[52;4Hb kk[53;4Hlast[54;4Hmanual 1 aa[55;4H-1[55;6H[K[56;4H3 cc[48;7H[?12l[?25h[27m[23m[m[H[2J[?25l[1;1H[34m[47m   [mzO[34m^L[mj:call append("$", getline("."))
[34m[47m   [m:" test expression folding
[34m[47m   [m:fun Flvl()
[34m[47m   [m  let l = getline(v:lnum)
[34m[47m   [m  if l =~ "bb$"
[34m[47m   [m    return 2
[34m[47m   [m  elseif l =~ "gg$"
[34m[47m   [m    return "s1"
[34m[47m   [m  elseif l =~ "ii$"
[34m[47m   [m    return ">2"
[34m[47m   [m  elseif l =~ "kk$"
[34m[47m   [m    return "0"
[34m[47m   [m  endif
[34m[47m   [m  return "="
[34m[47m   [mendfun
[34m[47m   [m:set fdm=expr fde=Flvl()
[34m[47m   [m/bb$
[34m[47m   [m:call append("$", "expr " . foldlevel("."))
[34m[47m   [m/hh$
[34m[47m   [m:call append("$", foldlevel("."))
[34m[47m   [m/ii$
[34m[47m   [m:call append("$", foldlevel("."))
[34m[47m   [m/kk$
[34m[47m   [m:call append("$", foldlevel("."))
[34m[47m   [m:/^last/+1,$w! test.out
[34m[47m   [m:delfun Flvl
[34m[47m   [m:new
[34m[47m   [miTest fdm=indent and :move bug END
[34m[47m   [mline2
[34m[47m   [m[8CTest fdm=indent START
[34m[47m   [m[8Cline3
[34m[47m   [m[8Cline4[34m^[[m
[34m[47m   [m:set fdm=indent
[34m[47m   [m:1m1
[34m[47m   [m2jzc:m0
[34m[47m   [m:%w >> test.out
[34m[47m   [m:qa!
[34m[47m   [mENDTEST
[34m[47m   
   [m1 aa
[34m[47m   [m  2 bb
[34m[47m   [m    3 cc
[34m[47m-  [m4 dd {{{commentstart  commentend
[34m[47m|- [m5 ee {{{ }}}
[34m[47m|| [m{{{
[34m[47m|| [m6 ff }}}
[34m[47m|  [m6 ff }}}
[34m[47m|- [m7 gg
[34m[47m|| [m8 hh
[34m[47m|  [m9 ii
[34m[47m   [ma jj
[34m[47m   [mb kk
[34m[47m   [mlast
[34m[47m   [mmanual 1 aa
[34m[47m   [m-1
[34m[47m   [m3 cc[48;7H[?12l[?25h[49;4H[?25l[57;1H:[?12l[?25hcall append("$", getline("."))[?25l[49;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test expression folding[?25l[49;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfun Flvl()[?25l
:  [?12l[?25h  let l = getline(v:lnum)
[?25l:  [?12l[?25h  if l =~ "bb$"
[?25l:    [?12l[?25h    return 2
[?25l:    [?12l[?25h  elseif l =~ "gg$"
[?25l:    [?12l[?25h    return "s1"
[?25l:    [?12l[?25h  elseif l =~ "ii$"
[?25l:    [?12l[?25h    return ">2"
[?25l:    [?12l[?25h  elseif l =~ "kk$"
[?25l:    [?12l[?25h    return "0"
[?25l:    [?12l[?25h  endif
[?25l:  [?12l[?25h  return "="
[?25l:  [?12l[?25hendfun[1;1H[12L[?25l[1;1H[34m[47m   [mzO[34m^L[mj:call append("$", getline("."))
[34m[47m   [m:" test expression folding
[34m[47m   [m:fun Flvl()
[34m[47m   [m  let l = getline(v:lnum)
[34m[47m   [m  if l =~ "bb$"
[34m[47m   [m    return 2
[34m[47m   [m  elseif l =~ "gg$"
[34m[47m   [m    return "s1"
[34m[47m   [m  elseif l =~ "ii$"
[34m[47m   [m    return ">2"
[34m[47m   [m  elseif l =~ "kk$"
[34m[47m   [m    return "0"[57;1H[K[49;4H[?12l[?25h[?25l[57;1H:[?12l[?25hset fdm=expr fde=Flvl()[?25l[41;1H[34m[47m+[m[2C[34m[47m+-- 11 lines: 2 bb------------------------------------------------------------------[m[42;4Hb kk[42;8H[K[43;1H[34m[47m [m[2Clast[43;9H[K[44;1H[34m[47m  [m[1Cmanual 1 aa[44;15H[K[45;1H[34m[47m  [m[1C-1[45;6H[K[46;1H[34m[47m  [m[1C3 cc[46;9H[K[47;1H[34m[47m [m[2C1 aa[47;9H[K[48;1H[34m[47m  [m[1Cmarker 2
[34m[47m  [m[1C1[49;6H[K[50;1H[34m[47m [m[2C1[50;6H[K[51;4H0[51;6H[K[52;4Hindent 2[53;4H1[53;5H[K[54;1H[34m[47m+[m[2C[34m[47m+--  4 lines: folding 9 ii----------------------------------------------------------[m[55;4H[1m[34m~                                                                                   [56;4H~                                                                                   [41;4H[?12l[?25h[?25l[m[57;1H[K[57;1H/[?12l[?25hbb$[?25l[31msearch hit BOTTOM, continuing at TOP[m[41;1H[34m[47m--[m[1C  2 bb[41;10H[K[42;1H[34m[47m||[m[1C    3 cc
[34m[47m||[m[1C4 dd {{{commentstart  commentend
[34m[47m||[m[1C5 ee {{{ }}}
[34m[47m||[m[1C{{{
[34m[47m||[m[1C6 ff }}}
[34m[47m||[m[1C6 ff }}}
[34m[47m||[m[1C7 gg[48;8H[K[49;1H[34m[47m|[m[2C8 hh
[34m[47m|+[m[1C[34m[47m+---  2 lines: 9 ii-----------------------------------------------------------------[m[51;4Hb kk[52;4Hlast[52;8H[K[53;4Hmanual 1 aa
[34m[47m [m[2C-1[54;6H[K[55;4H3 cc[55;8H[K[56;4H1 aa[56;8H[K[41;8H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append("$", "expr " . foldlevel("."))[?25l[41;8H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hhh$[?25l[49;6H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append("$", foldlevel("."))[?25l[49;6H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hii$[?25l[50;2H[34m[47m-[m[1C9 ii[50;8H[K[51;1H[34m[47m||[m[1Ca jj[52;4Hb kk[53;4Hlast[53;8H[K[54;4Hmanual 1 aa[55;4H-1[55;6H[K[56;4H3 cc[50;6H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append("$", foldlevel("."))[?25l[50;6H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hkk$[?25l[52;6H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append("$", foldlevel("."))[?25l[52;6H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^last/+1,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 18 lines, 96 characters written[52;6H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfun Flvl[?25l[52;6H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;4H[K[2;4H[1m[34m~                                                                                   [3;4H~                                                                                   [4;4H~                                                                                   [5;4H~                                                                                   [6;4H~                                                                                   [7;4H~                                                                                   [8;4H~                                                                                   [9;4H~                                                                                   [10;4H~                                                                                   [11;4H~                                                                                   [12;4H~                                                                                   [13;4H~                                                                                   [14;4H~                                                                                   [15;4H~                                                                                   [16;4H~                                                                                   [17;4H~                                                                                   [18;4H~                                                                                   [19;4H~                                                                                   [20;4H~                                                                                   [21;4H~                                                                                   [22;4H~                                                                                   [23;4H~                                                                                   [24;4H~                                                                                   [25;4H~                                                                                   [26;4H~                                                                                   [27;4H~                                                                                   [m[28;1H[1m[7m[No Name]                                                                              [m[29;4H:new[29;8H[K[30;4HiTest fdm=indent and :move bug END[31;4Hline2[31;12H[K[32;12HTest fdm=indent START[33;4H        line3[33;17H[K[34;4H        line4[34m^[[m[35;4H:set fdm=indent[36;5H1m1[36;8H[K[37;4H2jzc:m0[38;4H:%w >> test.out[39;4H:qa![40;4HENDTEST
[34m[47m  [m[41;6H[K[42;1H[34m[47m  [m[1C1 aa[42;8H[K[43;1H[34m[47m--[m[1C  2 bb[43;10H[K[44;4H    3 cc[44;13H[K[45;4H4 dd {{{commentstart  commentend[46;4H5 ee {{{ }}}[47;4H{{{[47;7H[K[48;4H6 ff }}}[49;2H[34m[47m|[m[1C6 ff }}}[50;2H[34m[47m|[m[1C7 gg[51;2H[34m[47m [m[1C8 hh
[34m[47m|-[m[1C9 ii
[34m[47m||[m[1Ca jj[54;4Hb kk[54;8H[K[55;4Hlast
[7mtest45.in [+]                                                                          [1;4H[?12l[?25h[?25l[mTest fdm=indent and :move bug END[2;4Hline2[2;9H[K[3;4H        Test fdm=indent START[3;33H[K[4;4H        line3[4;17H[K[5;4H        line4[5;17H[K[28;11H[1m[7m[+][5;16H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset fdm=indent[?25l[3;1H[34m[47m+[m[2C[34m[47m+--  3 lines: Test fdm=indent START-------------------------------------------------[m[4;4H[1m[34m~                                                                                   [5;4H~                                                                                   [3;4H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h1m1[?25l[1;4H[?12l[?25h[3;4H[?25l[57;1H[K[57;1H:[?12l[?25hm0[?25l3 lines moved[1;1H[34m[47m+[m[2C[34m[47m+--  3 lines: Test fdm=indent START-------------------------------------------------[m[2;4HTest fdm=indent and :move bug END
[34m[47m [m[2Cline2[3;9H[K[1;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h%w >> test.out[?25l"test.out" [57;12H[K[57;12H5 lines, 77 characters appended[28;1H[1m[7mtest.out [+]]  [1;4H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test45 = test61; then \
#	  if diff test.out test45.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test45.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test45.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test48.failed test.ok test.out X* viminfo
cp test48.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test48.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test48.in" 83 lines, 1658 characters[1;1HThis is a test of 'virtualedit'.

STARTTEST
:so small.vim
:set noswf
:set ve=all
-dgg
:"
:"   Insert "keyword keyw", ESC, C CTRL-N, shows "keyword ykeyword".
:"    Repeating CTRL-N fixes it. (Mary Ellen Foster)
2/w
C[34m^N^[[m
:"
:"   Using "C" then then <CR> moves the last remaining character to the next
:"    line.  (Mary Ellen Foster)
j^/are
C[34m^M[mare belong to vim[34m^[[m
:"
:"   When past the end of a line that ends in a single character "b" skips
:"    that word.
^$15lbC7[34m^[[m
:"
:"   Make sure 'i' works
$4li<-- should be 3 ' '[34m^[[m
:"
:"   Make sure 'C' works
$4lC<-- should be 3 ' '[34m^[[m
:"
:"   Make sure 'a' works
$4la<-- should be 4 ' '[34m^[[m
:"
:"   Make sure 'A' works
$4lA<-- should be 0 ' '[34m^[[m
:"
:"   Make sure 'D' works
$4lDi<-- 'D' should be intact[34m^[[m
:"
:"   Test for yank bug reported by Mark Waggoner.
:set ve=block
^2w[34m^V[m3jyGp
:"
:" Test "r" beyond the end of the line
:set ve=all
/^"r"
$5lrxa<-- should be 'x'[34m^[[m
:"
:" Test "r" on a tab
:" Note that for this test, 'ts' must be 8 (the default).
^5lrxA<-- should be '  x  '[34m^[[m
:"
:"   Test to make sure 'x' can delete control characters
:set display=uhex
^xxxxxxi[This line should contain only the text between the brackets.][34m^[[m
:set display=
:"
:"   Test for ^Y/^E due to bad w_virtcol value, reported by[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HThis is a test of 'virtualedit'.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 61 lines, 1442 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[9M[1;57r[48;1H:"   Roy <royl@netropolis.net>.
^O[34m^[[m3li[34m^E^[[m4li[34m^E^[[m4li[34m^E[m   <-- should show the name of a noted text editor[34m^[[m
^o[34m^[[m4li[34m^Y^[[m4li[34m^Y^[[m4li[34m^Y[m   <-- and its version number[34m^[[m-dd
:"
:" Test for yanking and pasting using the small delete register
gg/^foo
dewve"-p
:wq! test.out
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hfoo, bar[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noswf[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ve=all[?25l[56;1H[?12l[?25h[55;1H[?25l

65 fewer lines[1;1Hfoo, bar
keyword keyw
all your base are belong to us
1 2 3 4 5 6[4;12H[K[5;1H'i'[5;7H[K[6;1H'C'[6;4H[K[7;1H'a'[7;4H[K[8;1H'A'
'D'[9;6H[K[10;1Hthis is a test[10;15H[K[11;1Hthis is a test
this is a test
"r"[13;6H[K[14;1H"r"    [14;9H[K[15;1Ha[34m^V[mb[34m^M[msd
abcv6efi.him0kl[16;16H[K[17;1H[K[18;1H[K[19;1H[1m[34m~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h
[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"   Insert "keyword keyw", ESC, C CTRL-N, shows "keyword ykeyword".[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    Repeating CTRL-N fixes it. (Mary Ellen Foster)[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hw[?25l[2;12H[?12l[?25h[?25l$[57;1H[32mScanning tags.[mThe only match[2;16H[57;1H[K[2;12Hword[?12l[?25h[3;15H[?25l[57;1H:[?12l[?25h"[?25l[3;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"   Using "C" then then <CR> moves the last remaining character to the next[?25l[3;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    line.  (Mary Ellen Foster)[?25l[3;15H[?12l[?25h[4;15H[?25l[57;1H[K[57;1H/[?12l[?25hare[?25l[31msearch hit BOTTOM, continuing at TOP[3;15H[?12l[?25h[?25l[m[15C$[3;15H[K[4;1Hare belong to vim
1 2 3 4 5 6
'i
'C
'a
'A
'D'[10;4H[K[13;1Hthis is a test

"r"     
a[34m^V[mb[34m^M[msd[16;9H[K[17;1Habcv6efi.him0kl[19;1H[K[4;17H[?12l[?25h[5;17H[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[5;17H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"   When past the end of a line that ends in a single character "b" skips[?25l[5;17H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    that word.[?25l[5;17H[?12l[?25h[10C[15C[5;11H[?25l$7[?12l[?25h[6;11H[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[6;11H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"   Make sure 'i' works[?25l[6;11H[?12l[?25h'i'   [?25l<-- should be 3 ' '[?12l[?25h[7;25H[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[7;25H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"   Make sure 'C' works[?25l[7;25H[?12l[?25h'C'   [?25l$<-- should be 3 ' '[?12l[?25h[8;25H[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[8;25H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"   Make sure 'a' works[?25l[8;25H[?12l[?25h'a'   [?25l <-- should be 4 ' '[?12l[?25h[9;26H[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[9;26H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"   Make sure 'A' works[?25l[9;26H[?12l[?25h'A'   [?25l<-- should be 0 ' '[?12l[?25h[10;22H[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[10;22H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"   Make sure 'D' works[?25l[10;22H[?12l[?25h'D'   [?25l<-- 'D' should be intact[?12l[?25h[11;30H[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[11;30H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"   Test for yank bug reported by Mark Waggoner.[?25l[11;30H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ve=block[?25l[11;14H[?12l[?25h[8C[?25l[?12l[?25h[?25l[7ma[12;9Ha[13;9Ha[14;9H[?12l[?25h[?25l[m[11;9Ha[12;9Ha[13;9Ha[57;1Hblock of 4 lines yanked[11;9H[?12l[?25h[19;1H[?25l[57;1H3 more lines[57;13H[K[19;1Ha
a[20;2H[K[21;1Ha[21;2H[K[22;1H [22;2H[K[19;1H[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test "r" beyond the end of the line[?25l[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ve=all[?25l[20;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^"r"[?25l[31msearch hit BOTTOM, continuing at TOP[14;1H[?12l[?25h[m"r"    [?25lx[?12l[?25h[?25lx<-- should be 'x'[?12l[?25h[15;25H[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[15;25H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test "r" on a tab[?25l[15;25H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Note that for this test, 'ts' must be 8 (the default).[?25l[15;25H[?12l[?25h"r"  [?25lx[?12l[?25h[?25lx  <-- should be '  x  '[?12l[?25h[16;29H[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[16;29H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"   Test to make sure 'x' can delete control characters[?25l[16;29H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset display=uhex[?25l[16;2H[34m<16>[mb[34m<0d>[msd[20C[?12l[?25h[?25l[34m<16>[mb[34m<0d>[msd[16;12H[K[16;1H[?12l[?25h[?25lb[34m<0d>[msd[16;8H[K[16;1H[?12l[?25h[?25l[34m<0d>[msd[16;7H[K[16;1H[?12l[?25h[?25lsd[16;3H[K[16;1H[?12l[?25h[?25ld[16;2H[K[16;1H[?12l[?25h[?25l[16;1H[K[16;1H[?12l[?25h[?25l[This line should contain only the text between the brackets.][?12l[?25h[17;62H[?25l[57;1H[K[57;1H:[?12l[?25hset display=[?25l[17;62H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[17;62H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"   Test for ^Y/^E due to bad w_virtcol value, reported by[?25l[17;62H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"   Roy <royl@netropolis.net>.[?25l[17;62H[?12l[?25h[?25l[17;56r[17;1H[L[1;57r[57;1H[K[17;1H[?12l[?25h   [?25lv[?12l[?25hv   [?25li[?12l[?25hi   [?25lm   <-- should show the name of a noted text editor[?12l[?25h[18;62H[?25l[19;56r[19;1H[L[1;57r[19;1H[?12l[?25h    [?25l6[?12l[?25h6   [?25l.[?12l[?25h.   [?25l0   <-- and its version number[?12l[?25h[18;1H[?25l[18;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [18;5H[?12l[?25h
[m    [?25l[57;1H:[?12l[?25h"[?25l[19;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test for yanking and pasting using the small delete register[?25l[19;5H[?12l[?25h[1;1H[?25l[57;1H[K[57;1H/[?12l[?25h^foo[?25l[31msearch hit BOTTOM, continuing at TOP[1;1H[?12l[?25h[?25l[m, bar[1;6H[K[1;1H[?12l[?25h, [?25l[?12l[?25h[?25l[7mba[?12l[?25h[?25l[?12l[?25h[?25l[mfoo[?12l[?25h
keyw[?25l[57;1H[K[57;1H:[?12l[?25hwq! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 23 lines, 479 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test48 = test61; then \
#	  if diff test.out test48.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test48.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test48.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test51.failed test.ok test.out X* viminfo
cp test51.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test51.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test51.in" 36 lines, 809 characters[1;1HTests for ":highlight". vim: set ft=vim :

STARTTEST
:so small.vim
:" basic test if ":highlight" doesn't crash
:highlight
:hi Search
:" test setting colors.
:" test clearing one color and all doesn't generate error or warning
:hi NewGroup term=bold cterm=italic ctermfg=DarkBlue ctermbg=Grey gui= guifg=#00ff00 guu[11;1Hibg=Cyan
:hi Group2 term= cterm=
:hi Group3 term=underline cterm=bold
:redir! >test.out
:hi NewGroup
:hi Group2
:hi Group3
:hi clear NewGroup
:hi NewGroup
:hi Group2
:hi Group2 NONE
:hi Group2
:hi clear
:hi Group3
:hi Crash term='asdf
:redir END
:" filter ctermfg and ctermbg, the numbers depend on the terminal
:e! test.out
:%s/ctermfg=\d*/ctermfg=2/
:%s/ctermbg=\d*/ctermbg=3/
:" filter out possibly translated error message
:%s/E475: [^:]*:/E475:/
:" fix the fileformat
:set ff&
:wq!
ENDTEST

[1m[34m~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for ":highlight". vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 31 lines, 747 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[36;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[37;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[37;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" basic test if ":highlight" doesn't crash[?25l[37;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hhighlight[?25l
SpecialKey     [34mxxx[m [34mterm=[mbold [34mctermfg=[m4 [34mguifg=[mBlue
EndOfBuffer    [1m[34mxxx[m [34mlinks to[m NonText
NonText[8C[1m[34mxxx[m [34mterm=[mbold [34mcterm=[mbold [34mctermfg=[m4 [34mgui=[mbold [34mguifg=[mBlue
Directory      [34mxxx[m [34mterm=[mbold [34mctermfg=[m4 [34mguifg=[mBlue
ErrorMsg[7C[1m[37m[41mxxx[m [34mterm=[mstandout [34mcterm=[mbold [34mctermfg=[m7 [34mctermbg=[m1 [34mguifg=[mWhite [34mguibg=[mRed
IncSearch      [7mxxx[m [34mterm=[mreverse [34mcterm=[mreverse [34mgui=[mreverse
Search[9C[30m[43mxxx[m [34mterm=[mreverse [34mctermfg=[m0 [34mctermbg=[m3 [34mguibg=[mYellow
MoreMsg[8C[32mxxx[m [34mterm=[mbold [34mctermfg=[m2 [34mgui=[mbold [34mguifg=[mSeaGreen
ModeMsg[8C[1mxxx[m [34mterm=[mbold [34mcterm=[mbold [34mgui=[mbold
LineNr[9C[33mxxx[m [34mterm=[munderline [34mctermfg=[m3 [34mguifg=[mBrown
CursorLineNr   [33mxxx[m [34mterm=[mbold [34mctermfg=[m3 [34mgui=[mbold [34mguifg=[mBrown
Question[7C[32mxxx[m [34mterm=[mstandout [34mctermfg=[m2 [34mgui=[mbold [34mguifg=[mSeaGreen
StatusLine     [1m[7mxxx[m [34mterm=[mbold,reverse [34mcterm=[mbold,reverse [34mgui=[mbold,reverse
StatusLineNC   [7mxxx[m [34mterm=[mreverse [34mcterm=[mreverse [34mgui=[mreverse
VertSplit      [7mxxx[m [34mterm=[mreverse [34mcterm=[mreverse [34mgui=[mreverse
Title[10C[35mxxx[m [34mterm=[mbold [34mctermfg=[m5 [34mgui=[mbold [34mguifg=[mMagenta
Visual[9C[7mxxx[m [34mterm=[mreverse [34mcterm=[mreverse [34mguibg=[mLightGrey
VisualNOS      xxx cleared
WarningMsg     [31mxxx[m [34mterm=[mstandout [34mctermfg=[m1 [34mguifg=[mRed
WildMenu[7C[30m[43mxxx[m [34mterm=[mstandout [34mctermfg=[m0 [34mctermbg=[m3 [34mguifg=[mBlack [34mguibg=[mYellow
Folded[9C[34m[47mxxx[m [34mterm=[mstandout [34mctermfg=[m4 [34mctermbg=[m7 [34mguifg=[mDarkBlue [34mguibg=[mLightGrey
FoldColumn     [34m[47mxxx[m [34mterm=[mstandout [34mctermfg=[m4 [34mctermbg=[m7 [34mguifg=[mDarkBlue [34mguibg=[mGrey
DiffAdd[8C[44mxxx[m [34mterm=[mbold [34mctermbg=[m4 [34mguibg=[mLightBlue
DiffChange     [45mxxx[m [34mterm=[mbold [34mctermbg=[m5 [34mguibg=[mLightMagenta
DiffDelete     [1m[34m[46mxxx[m [34mterm=[mbold [34mcterm=[mbold [34mctermfg=[m4 [34mctermbg=[m6 [34mgui=[mbold [34mguifg=[mBlue
[19C[34mguibg=[mLightCyan
DiffText[7C[1m[41mxxx[m [34mterm=[mreverse [34mcterm=[mbold [34mctermbg=[m1 [34mgui=[mbold [34mguibg=[mRed
SignColumn     [34m[47mxxx[m [34mterm=[mstandout [34mctermfg=[m4 [34mctermbg=[m7 [34mguifg=[mDarkBlue [34mguibg=[mGrey
Conceal[8C[37m[40mxxx[m [34mctermfg=[m7 [34mctermbg=[m0 [34mguifg=[mLightGrey [34mguibg=[mDarkGrey
SpellBad[7C[41mxxx[m [34mterm=[mreverse [34mctermbg=[m1 [34mgui=[mundercurl [34mguisp=[mRed
SpellCap[7C[44mxxx[m [34mterm=[mreverse [34mctermbg=[m4 [34mgui=[mundercurl [34mguisp=[mBlue
SpellRare      [45mxxx[m [34mterm=[mreverse [34mctermbg=[m5 [34mgui=[mundercurl [34mguisp=[mMagenta
SpellLocal     [46mxxx[m [34mterm=[munderline [34mctermbg=[m6 [34mgui=[mundercurl [34mguisp=[mDarkCyan
Pmenu[10C[30m[45mxxx[m [34mctermfg=[m0 [34mctermbg=[m5 [34mguibg=[mLightMagenta
PmenuSel[7C[30m[47mxxx[m [34mctermfg=[m0 [34mctermbg=[m7 [34mguibg=[mGrey
PmenuSbar      [47mxxx[m [34mctermbg=[m7 [34mguibg=[mGrey
PmenuThumb     [40mxxx[m [34mctermbg=[m0 [34mguibg=[mBlack
TabLine[8C[4m[30m[47mxxx[m [34mterm=[munderline [34mcterm=[munderline [34mctermfg=[m0 [34mctermbg=[m7 [34mgui=[munderline
[19C[34mguibg=[mLightGrey
TabLineSel     [1mxxx[m [34mterm=[mbold [34mcterm=[mbold [34mgui=[mbold
TabLineFill    [7mxxx[m [34mterm=[mreverse [34mcterm=[mreverse [34mgui=[mreverse
CursorColumn   [47mxxx[m [34mterm=[mreverse [34mctermbg=[m7 [34mguibg=[mGrey90
CursorLine     [4mxxx[m [34mterm=[munderline [34mcterm=[munderline [34mguibg=[mGrey90
ColorColumn    [41mxxx[m [34mterm=[mreverse [34mctermbg=[m1 [34mguibg=[mLightRed
MatchParen     [46mxxx[m [34mterm=[mreverse [34mctermbg=[m6 [34mguibg=[mCyan
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hhi Search[?25l
Search[9C[30m[43mxxx[m [34mterm=[mreverse [34mctermfg=[m0 [34mctermbg=[m3 [34mguibg=[mYellow
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h" test setting colors.[?25l[1;1H[48L[1;1HTests for ":highlight". vim: set ft=vim :

STARTTEST
:so small.vim
:" basic test if ":highlight" doesn't crash
:highlight
:hi Search
:" test setting colors.
:" test clearing one color and all doesn't generate error or warning
:hi NewGroup term=bold cterm=italic ctermfg=DarkBlue ctermbg=Grey gui= guifg=#00ff00 guu[11;1Hibg=Cyan
:hi Group2 term= cterm=
:hi Group3 term=underline cterm=bold
:redir! >test.out
:hi NewGroup
:hi Group2
:hi Group3
:hi clear NewGroup
:hi NewGroup
:hi Group2
:hi Group2 NONE
:hi Group2
:hi clear
:hi Group3
:hi Crash term='asdf
:redir END
:" filter ctermfg and ctermbg, the numbers depend on the terminal
:e! test.out
:%s/ctermfg=\d*/ctermfg=2/
:%s/ctermbg=\d*/ctermbg=3/
:" filter out possibly translated error message
:%s/E475: [^:]*:/E475:/
:" fix the fileformat
:set ff&
:wq!
ENDTEST

[1m[34m~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [m[57;1H[K[37;1H[?12l[?25h[?25l[57;1H:[?12l[?25h" test clearing one color and all doesn't generate error or warning[?25l[37;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hhi NewGroup term=bold cterm=italic ctermfg=DarkBlue ctermbg=Grey gui= guifg=#00ff00 g
[56;87Hu[57;1Hibg=Cyan[?25l[56;1H[1m[37m[41mE418: Illegal value: guifg=#00ff00[m[56;35H[K[57;1H[K[57;1H[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hhi Group2 term= cterm=[?25l[1m[37m[41mE418: Illegal value: cterm=[m
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hhi Group3 term=underline cterm=bold[?25l[1;1H[2L[1;1HTests for ":highlight". vim: set ft=vim :[57;1H[K[37;1H[?12l[?25h[?25l[57;1H:[?12l[?25hredir! >test.out[?25l[37;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hhi NewGroup[?25l
NewGroup[7C[3m[34m[47mxxx[23m[m [34mterm=[mbold [34mcterm=[mitalic [34mctermfg=[m4 [34mctermbg=[m7
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hhi Group2[?25l
Group2[9Cxxx cleared
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hhi Group3[?25l
Group3[9C[1mxxx[m [34mterm=[munderline [34mcterm=[mbold
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hhi clear NewGroup[?25l[1;1H[6L[1;1HTests for ":highlight". vim: set ft=vim :

STARTTEST
:so small.vim
:" basic test if ":highlight" doesn't crash
:highlight[57;1H[K[37;1H[?12l[?25h[?25l[57;1H:[?12l[?25hhi NewGroup[?25l
NewGroup[7Cxxx cleared
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hhi Group2[?25l
Group2[9Cxxx cleared
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hhi Group2 NONE[?25l[1;1H[4L[1;1HTests for ":highlight". vim: set ft=vim :

STARTTEST
:so small.vim[57;1H[K[37;1H[?12l[?25h[?25l[57;1H:[?12l[?25hhi Group2[?25l
Group2[9Cxxx cleared
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hhi clear[?25l[27m[23m[m[H[2J[1;1HTests for ":highlight". vim: set ft=vim :

STARTTEST
:so small.vim
:" basic test if ":highlight" doesn't crash
:highlight
:hi Search
:" test setting colors.
:" test clearing one color and all doesn't generate error or warning
:hi NewGroup term=bold cterm=italic ctermfg=DarkBlue ctermbg=Grey gui= guifg=#00ff00 guu[11;1Hibg=Cyan
:hi Group2 term= cterm=
:hi Group3 term=underline cterm=bold
:redir! >test.out
:hi NewGroup
:hi Group2
:hi Group3
:hi clear NewGroup
:hi NewGroup
:hi Group2
:hi Group2 NONE
:hi Group2
:hi clear
:hi Group3
:hi Crash term='asdf
:redir END
:" filter ctermfg and ctermbg, the numbers depend on the terminal
:e! test.out
:%s/ctermfg=\d*/ctermfg=2/
:%s/ctermbg=\d*/ctermbg=3/
:" filter out possibly translated error message
:%s/E475: [^:]*:/E475:/
:" fix the fileformat
:set ff&
:wq!
ENDTEST

[1m[34m~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [37;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hhi Group3[?25l
Group3[9Cxxx cleared
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hhi Crash term='asdf[?25l[1m[37m[41mE475: Invalid argument: term='asdf[m
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[3L[1;1HTests for ":highlight". vim: set ft=vim :

STARTTEST[57;1H[K[37;1H[?12l[?25h[?25l[57;1H:[?12l[?25h" filter ctermfg and ctermbg, the numbers depend on the terminal[?25l[37;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! test.out[?25l"test.out" [57;12H[K[57;12H20 lines, 289 characters[1;1H[K[3;1HNewGroup       xxx term=bold cterm=italic ctermfg=4 ctermbg=7[4;1H[K[5;1HGroup2         xxx cleared[5;27H[K[6;1H[K[7;1HGroup3         xxx term=underline cterm=bold[8;1H[K[9;1H[K[10;1HNewGroup       xxx cleared[10;27H[K[11;1H[K[12;1HGroup2         xxx cleared[13;1H[K[14;1H[K[15;1HGroup2         xxx cleared[16;1H[K[17;1H[K[18;1HGroup3         xxx cleared[19;1H[K[20;1HE475: Invalid argument: term='asdf
[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h%s/ctermfg=\d*/ctermfg=2/[?25l[3;51H2[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h%s/ctermbg=\d*/ctermbg=3/[?25l[3;61H3[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" filter out possibly translated error message[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h%s/E475: [^:]*:/E475:/[?25l[20;7Hterm='asdf[20;17H[K[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" fix the fileformat[?25l[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ff&[?25l[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwq![?25l"test.out" 20 lines, 271 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test51 = test61; then \
#	  if diff test.out test51.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test51.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test51.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test53.failed test.ok test.out X* viminfo
cp test53.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test53.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test53.in" 75 lines, 1763 characters[1;1HTests for string and html text objects. vim: set ft=vim :

Note that the end-of-line moves the cursor to the next test line.

Also test match() and matchstr()

STARTTEST
:so small.vim
/^start:/
da"
0va'a'rx
02f`da`
0fXdi"
03f'vi'ry
:set quoteescape=+*-
di`
$F"va"oha"i"rz
:"
/^<begin
jfXdit
0fXdit
fXdat
0fXdat
dit
:"
:put =matchstr(\"abcd\", \".\", 0, 2) " b
:put =matchstr(\"abcd\", \"..\", 0, 2) " bc
:put =matchstr(\"abcd\", \".\", 2, 0) " c (zero and negative -> first match)
:put =matchstr(\"abcd\", \".\", 0, -1) " a
:put =match(\"abcd\", \".\", 0, 5) " -1
:put =match(\"abcd\", \".\", 0, -1) " 0
:put =match('abc', '.', 0, 1) " 0
:put =match('abc', '.', 0, 2) " 1
:put =match('abc', '.', 0, 3) " 2
:put =match('abc', '.', 0, 4) " -1
:put =match('abc', '.', 1, 1) " 1
:put =match('abc', '.', 2, 1) " 2
:put =match('abc', '.', 3, 1) " -1
:put =match('abc', '$', 0, 1) " 3
:put =match('abc', '$', 0, 2) " -1
:put =match('abc', '$', 1, 1) " 3
:put =match('abc', '$', 2, 1) " 3
:put =match('abc', '$', 3, 1) " 3
:put =match('abc', '$', 4, 1) " -1
:put =match('abc', '\zs', 0, 1) " 0
:put =match('abc', '\zs', 0, 2) " 1
:put =match('abc', '\zs', 0, 3) " 2
:put =match('abc', '\zs', 0, 4) " 3
:put =match('abc', '\zs', 0, 5) " -1
:put =match('abc', '\zs', 1, 1) " 1
:put =match('abc', '\zs', 2, 1) " 2
:put =match('abc', '\zs', 3, 1) " 3
:put =match('abc', '\zs', 4, 1) " -1
:/^start:/,/^end:/wq! test.out
ENDTEST[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for string and html text objects. vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[7;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 47 lines, 1237 characters written[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[8;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[55;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^start:/[?25l[57;9H[K[57;1H[1;56r[56;1H
[1;57r[56;1Hstart: "wo\"rd\\" foo[57;1H[K[56;1H[?12l[?25h[?25l[7Cfo[56;11H[K[56;8H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H'foo' 'bar' 'piep'[56;8H[?12l[?25h[?25l[?12l[?25h[?25l[7m'foo'[?12l[?25h[?25l 'bar'[?12l[?25h[?25l[mxxxxxxxxxxxx[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hbla bla `quote` blah[?12l[?25h[14C[?25lblah[56;13H[K[56;9H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hout " in "noXno"[56;9H[?12l[?25h[12C[?25l"[56;12H[K[56;11H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H"'" 'blah' rep 'buh'[56;11H[?12l[?25h[9C[?25l[?12l[?25h[?25l'[7m rep[?12l[?25h[?25l[myyyyy[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hbla `s*`d-`+++`l**` b`la[56;11H[?12l[?25h[?25l
:[?12l[?25hset quoteescape=+*-[?25l[56;11H[?12l[?25h[?25l` b`la[56;12H[K[56;6H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hvoo "nah" sdf " asdf" sdf " sdf" sd[57;1H[K[56;6H[?12l[?25h[29C[?25l[?12l[?25h[?25l[7m" sdf"[?12l[?25h[?25l[m"[5C[7m [56;27H[?12l[?25h[?25l"[?12l[?25h[?25l[56;16H asdf" sdf [56;15H[?12l[?25h[?25l[56;7Hah" sdf "[mvoo "[?12l[?25h[?25lzzzzzzzzzzzzzzzzzzzzzzzzzzzzvoo "[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^<begin[?25l[1;56r[56;1H
[1;57r[56;1H<begin>[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H-<b>asdf<i>Xasdf</i>asdf</b>-[?12l[?25h[11C[?25l</i>asdf</b>-[56;25H[K[56;12H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H-<b>asdX<i>a<i />sdf</i>asdf</b>-[56;12H[?12l[?25h[7C[?25l</b>-[56;10H[K[56;5H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H-<b>asdf<i>Xasdf</i>asdf</b>--<b>[?12l[?25h[7C[?25lasdf</b>-[56;18H[K[56;9H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H-<b>asdX<i>as<b />df</i>asdf</b>-[56;9H[?12l[?25h[7C[?25l--[56;3H[K[56;2H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H-<b>-[?12l[?25h[?25l<b></b>[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H</begin>[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hput =matchstr(\"abcd\", \".\", 0, 2) " b[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =matchstr(\"abcd\", \"..\", 0, 2) " bc[?25l[1;56r[56;1H
[1;57r[56;1Hbc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =matchstr(\"abcd\", \".\", 2, 0) " c (zero and negative -> first match)[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =matchstr(\"abcd\", \".\", 0, -1) " a[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match(\"abcd\", \".\", 0, 5) " -1[?25l[1;56r[56;1H
[1;57r[56;1H-1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match(\"abcd\", \".\", 0, -1) " 0[?25l[1;56r[56;1H
[1;57r[56;1H0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '.', 0, 1) " 0[?25l[1;56r[56;1H
[1;57r[56;1H0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '.', 0, 2) " 1[?25l[1;56r[56;1H
[1;57r[56;1H1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '.', 0, 3) " 2[?25l[1;56r[56;1H
[1;57r[56;1H2[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '.', 0, 4) " -1[?25l[1;56r[56;1H
[1;57r[56;1H-1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '.', 1, 1) " 1[?25l[1;56r[56;1H
[1;57r[56;1H1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '.', 2, 1) " 2[?25l[1;56r[56;1H
[1;57r[56;1H2[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '.', 3, 1) " -1[?25l[1;56r[56;1H
[1;57r[56;1H-1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '$', 0, 1) " 3[?25l[1;56r[56;1H
[1;57r[56;1H3[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '$', 0, 2) " -1[?25l[1;56r[56;1H
[1;57r[56;1H-1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '$', 1, 1) " 3[?25l[1;56r[56;1H
[1;57r[56;1H3[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '$', 2, 1) " 3[?25l[1;56r[56;1H
[1;57r[56;1H3[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '$', 3, 1) " 3[?25l[1;56r[56;1H
[1;57r[56;1H3[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '$', 4, 1) " -1[?25l[1;56r[56;1H
[1;57r[56;1H-1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '\zs', 0, 1) " 0[?25l[1;56r[56;1H
[1;57r[56;1H0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '\zs', 0, 2) " 1[?25l[1;56r[56;1H
[1;57r[56;1H1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '\zs', 0, 3) " 2[?25l[1;56r[56;1H
[1;57r[56;1H2[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '\zs', 0, 4) " 3[?25l[1;56r[56;1H
[1;57r[56;1H3[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '\zs', 0, 5) " -1[?25l[1;56r[56;1H
[1;57r[56;1H-1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '\zs', 1, 1) " 1[?25l[1;56r[56;1H
[1;57r[56;1H1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '\zs', 2, 1) " 2[?25l[1;56r[56;1H
[1;57r[56;1H2[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '\zs', 3, 1) " 3[?25l[1;56r[56;1H
[1;57r[56;1H3[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =match('abc', '\zs', 4, 1) " -1[?25l[1;56r[56;1H
[1;57r[56;1H-1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^start:/,/^end:/wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 45 lines, 284 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test53 = test61; then \
#	  if diff test.out test53.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test53.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test53.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test55.failed test.ok test.out X* viminfo
cp test55.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test55.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test55.in" 586 lines, 12256 characters[1;1HTests for List and Dictionary types.     vim: set ft=vim :

STARTTEST
:so small.vim
:fun Test(...)
:lang C
:" Creating List directly with different types
:let l = [1, 'as''d', [1, 2, function("strlen")], {'a': 1},]
:$put =string(l)
:$put =string(l[-1])
:$put =string(l[-4])
:try
:  $put =string(l[-5])
:catch
:  $put =v:exception[:14]
:endtry
:" List slices
:$put =string(l[:])
:$put =string(l[1:])
:$put =string(l[:-2])
:$put =string(l[0:8])
:$put =string(l[8:-1])
:"
:" List identity
:let ll = l
:let lx = copy(l)
:try
:  $put =(l == ll) . (l isnot ll) . (l is ll) . (l == lx) . (l is lx) . (l isnot lx)
:catch
:  $put =v:exception
:endtry
:"
:" Creating Dictionary directly with different types
:let d = {001: 'asd', 'b': [1, 2, function('strlen')], -1: {'a': 1},}
:$put =string(d) . d.1
:$put =string(sort(keys(d)))
:$put =string (values(d))
:for [key, val] in items(d)
:  $put =key . ':' . string(val)
:  unlet key val
:endfor
:call extend  (d, {3:33, 1:99})
:call extend(d, {'b':'bbb', 'c':'ccc'}, "keep")
:try
:  call extend(d, {3:333,4:444}, "error")
:catch
:  $put =v:exception[:15] . v:exception[-1:-1]
:endtry
:$put =string(d)
:call filter(d, 'v:key =~ ''[ac391]''')
:$put =string(d)
:"
:" Dictionary identity
:let dd = d
:let dx = copy(d)
:try[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for List and Dictionary types.     vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 580 lines, 12170 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:$put =(d != deepcopy(d))
:"
:" compare complex recursively linked list and dict
:let l = []
:call add(l, l)
:let dict4 = {"l": l}
:call add(dict4.l, dict4)
:let lcopy = deepcopy(l)
:let dict4copy = deepcopy(dict4)
:$put =(l == lcopy)
:$put =(dict4 == dict4copy)
:"
:" Pass the same List to extend()
:let l = [1, 2, 3, 4, 5]
:call extend(l, l)
:$put =string(l)
:"
:" Pass the same Dict to extend()
:let d = { 'a': {'b': 'B'}}
:call extend(d, d)
:$put =string(d)
:"
:" Pass the same Dict to extend() with "error"
:try
:  call extend(d, d, "error")
:catch
:  $put =v:exception[:15] . v:exception[-1:-1]
:endtry
:$put =string(d)
:"
:" test for range assign
:let l = [0]
:let l[:] = [1, 2]
:$put =string(l)
:endfun
:"
:call Test(1, 2, [3, 4], {5: 6})  " This may take a while
:"
:delfunc Test
:unlet dict
:call garbagecollect(1)
:"
:" test for patch 7.3.637
:let a = 'No error caught'
:try|foldopen|catch|let a = matchstr(v:exception,'^[^ ]*')|endtry
o[34m^R[m=a[34m^M^[[m:"
:lang C
:redir => a
:try|foobar|catch|let a = matchstr(v:exception,'^[^ ]*')|endtry
:redir END
o[34m^R[m=a[34m^M^[[m:"
:"
:/^start:/,$wq! test.out
ENDTEST

start:[54;1H[?12l[?25h
[?25l

:so! Xdotest[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfun Test(...)[?25l
:  [?12l[?25h:lang C
[?25l:  [?12l[?25h:" Creating List directly with different types
[?25l:  [?12l[?25h:let l = [1, 'as''d', [1, 2, function("strlen")], {'a': 1},]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25h:$put =string(l[-1])
[?25l:  [?12l[?25h:$put =string(l[-4])
[?25l:  [?12l[?25h:try
[?25l:    [?12l[?25h:  $put =string(l[-5])
[?25l:    [?12l[?25h:catch
[?25l:    [?12l[?25h:  $put =v:exception[:14]
[?25l:    [?12l[?25h:endtry
[?25l:  [?12l[?25h:" List slices
[?25l:  [?12l[?25h:$put =string(l[:])
[?25l:  [?12l[?25h:$put =string(l[1:])
[?25l:  [?12l[?25h:$put =string(l[:-2])
[?25l:  [?12l[?25h:$put =string(l[0:8])
[?25l:  [?12l[?25h:$put =string(l[8:-1])
[?25l:  [?12l[?25h:"
[?25l:  [?12l[?25h:" List identity
[?25l:  [?12l[?25h:let ll = l
[?25l:  [?12l[?25h:let lx = copy(l)
[?25l:  [?12l[?25h:try
[?25l:    [?12l[?25h:  $put =(l == ll) . (l isnot ll) . (l is ll) . (l == lx) . (l is lx) . (l isnot 
[56;87Hl[57;1Hx)
[?25l:    [?12l[?25h:catch
[?25l:    [?12l[?25h:  $put =v:exception
[?25l:    [?12l[?25h:endtry
[?25l:  [?12l[?25h:"
[?25l:  [?12l[?25h:" Creating Dictionary directly with different types
[?25l:  [?12l[?25h:let d = {001: 'asd', 'b': [1, 2, function('strlen')], -1: {'a': 1},}
[?25l:  [?12l[?25h:$put =string(d) . d.1
[?25l:  [?12l[?25h:$put =string(sort(keys(d)))
[?25l:  [?12l[?25h:$put =string (values(d))
[?25l:  [?12l[?25h:for [key, val] in items(d)
[?25l:    [?12l[?25h:  $put =key . ':' . string(val)
[?25l:    [?12l[?25h:  unlet key val
[?25l:    [?12l[?25h:endfor
[?25l:  [?12l[?25h:call extend  (d, {3:33, 1:99})
[?25l:  [?12l[?25h:call extend(d, {'b':'bbb', 'c':'ccc'}, "keep")
[?25l:  [?12l[?25h:try
[?25l:    [?12l[?25h:  call extend(d, {3:333,4:444}, "error")
[?25l:    [?12l[?25h:catch
[?25l:    [?12l[?25h:  $put =v:exception[:15] . v:exception[-1:-1]
[?25l:    [?12l[?25h:endtry
[?25l:  [?12l[?25h:$put =string(d)
[?25l:  [?12l[?25h:call filter(d, 'v:key =~ ''[ac391]''')
[?25l:  [?12l[?25h:$put =string(d)
[?25l:  [?12l[?25h:"
[?25l:  [?12l[?25h:" Dictionary identity
[?25l:  [?12l[?25h:let dd = d
[?25l:  [?12l[?25h:let dx = copy(d)
[?25l:  [?12l[?25h:try
[?25l:    [?12l[?25h:  $put =(d == dd) . (d isnot dd) . (d is dd) . (d == dx) . (d is dx) . (d isnot 
[56;87Hd[57;1Hx)
[?25l:    [?12l[?25h:catch
[?25l:    [?12l[?25h:  $put =v:exception
[?25l:    [?12l[?25h:endtry
[?25l:  [?12l[?25h:"
[?25l:  [?12l[?25h:"
[?25l:  [?12l[?25h:" removing items with :unlet
[?25l:  [?12l[?25h:unlet l[2]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25h:let l = range(8)
[?25l:  [?12l[?25h:try
[?25l:    [?12l[?25h:unlet l[:3]
[?25l:    [?12l[?25h:unlet l[1:]
[?25l:    [?12l[?25h:catch
[?25l:    [?12l[?25h:$put =v:exception
[?25l:    [?12l[?25h:endtry
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25h:"
[?25l:  [?12l[?25h:unlet d.c
[?25l:  [?12l[?25h:unlet d[-1]
[?25l:  [?12l[?25h:$put =string(d)
[?25l:  [?12l[?25h:"
[?25l:  [?12l[?25h:" removing items out of range: silently skip items that don't exist
[?25l:  [?12l[?25hlet l = [0, 1, 2, 3]
[?25l:  [?12l[?25h:unlet l[2:1]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25hlet l = [0, 1, 2, 3]
[?25l:  [?12l[?25h:unlet l[2:2]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25hlet l = [0, 1, 2, 3]
[?25l:  [?12l[?25h:unlet l[2:3]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25hlet l = [0, 1, 2, 3]
[?25l:  [?12l[?25h:unlet l[2:4]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25hlet l = [0, 1, 2, 3]
[?25l:  [?12l[?25h:unlet l[2:5]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25hlet l = [0, 1, 2, 3]
[?25l:  [?12l[?25h:unlet l[-1:2]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25hlet l = [0, 1, 2, 3]
[?25l:  [?12l[?25h:unlet l[-2:2]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25hlet l = [0, 1, 2, 3]
[?25l:  [?12l[?25h:unlet l[-3:2]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25hlet l = [0, 1, 2, 3]
[?25l:  [?12l[?25h:unlet l[-4:2]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25hlet l = [0, 1, 2, 3]
[?25l:  [?12l[?25h:unlet l[-5:2]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25hlet l = [0, 1, 2, 3]
[?25l:  [?12l[?25h:unlet l[-6:2]
[?25l:  [?12l[?25h:$put =string(l)
[?25l:  [?12l[?25h:"
[?25l:  [?12l[?25h:" assignment to a list
[?25l:  [?12l[?25h:let l = [0, 1, 2, 3]
[?25l:  [?12l[?25h:let [va, vb] = l[2:3]
[?25l:  [?12l[?25h:$put =va
[?25l:  [?12l[?25h:$put =vb
[?25l:  [?12l[?25h:try
[?25l:    [?12l[?25h:  let [va, vb] = l
[?25l:    [?12l[?25h:catch
[?25l:    [?12l[?25h:  $put =v:exception[:14]
[?25l:    [?12l[?25h:endtry
[?25l:  [?12l[?25h:try
[?25l:    [?12l[?25h:  let [va, vb] = l[1:1]
[?25l:    [?12l[?25h:catch
[?25l:    [?12l[?25h:  $put =v:exception[:14]
[?25l:    [?12l[?25h:endtry
[?25l:  [?12l[?25h:"
[?25l:  [?12l[?25h:" manipulating a big Dictionary (hashtable.c has a border of 1000 entries)
[?25l:  [?12l[?25h:let d = {}
[?25l:  [?12l[?25h:for i in range(1500)
[?25l:    [?12l[?25h: let d[i] = 3000 - i
[?25l:    [?12l[?25h:endfor
[?25l:  [?12l[?25h:$put =d[0] . ' ' . d[100] . ' ' . d[999] . ' ' . d[1400] . ' ' . d[1499]
[?25l:  [?12l[?25h:try
[?25l:    [?12l[?25h:  let n = d[1500]
[?25l:    [?12l[?25h:catch
[?25l:    [?12l[?25h:  $put =substitute(v:exception, '\v(.{14}).*( \d{4}).*', '\1\2', '')
[?25l:    [?12l[?25h:endtry
[?25l:  [?12l[?25h:" lookup each items
[?25l:  [?12l[?25h:for i in range(1500)
[?25l:    [?12l[?25h: if d[i] != 3000 - i
[?25l:      [?12l[?25h:  $put =d[i]
[?25l:      [?12l[?25h: endif
[?25l:    [?12l[?25h:endfor
[?25l:  [?12l[?25h: let i += 1
[?25l:  [?12l[?25h:" delete even items
[?25l:  [?12l[?25h:while i >= 2
[?25l:    [?12l[?25h: let i -= 2
[?25l:    [?12l[?25h: unlet d[i]
[?25l:    [?12l[?25h:endwhile
[?25l:  [?12l[?25h:$put =get(d, 1500 - 100, 'NONE') . ' ' . d[1]
[?25l:  [?12l[?25h:" delete odd items, checking value, one intentionally wrong
[?25l:  [?12l[?25h:let d[33] = 999
[?25l:  [?12l[?25h:let i = 1
[?25l:  [?12l[?25h:while i < 1500
[?25l:    [?12l[?25h: if d[i] != 3000 - i
[?25l:      [?12l[?25h:  $put =i . '=' . d[i]
[?25l:      [?12l[?25h: else
[?25l:      [?12l[?25h:  unlet d[i]
[?25l:      [?12l[?25h: endif
[?25l:    [?12l[?25h: let i += 2
[?25l:    [?12l[?25h:endwhile
[?25l:  [?12l[?25h:$put =string(d)  " must be almost empty now
[?25l:  [?12l[?25h:unlet d
[?25l:  [?12l[?25h:"
[?25l:  [?12l[?25h:" Dictionary function
[?25l:  [?12l[?25h:let dict = {}
[?25l:  [?12l[?25h:func dict.func(a) dict
[?25l:    [?12l[?25h:  $put =a:a . len(self.data)
[?25l:    [?12l[?25h:endfunc
[?25l:    [?12l[?25h:let dict.data = [1,2,3]
[?25l:    [?12l[?25h:call dict.func("len: ")
[?25l:    [?12l[?25h:let x = dict.func("again: ")
[?25l:    [?12l[?25h:let Fn = dict.func
[?25l:    [?12l[?25h:call Fn('xxx')
[?25l:    [?12l[?25h:" 
[?25l:    [?12l[?25h:" Function in script-local List or Dict
[?25l:    [?12l[?25h:let g:dict = {}
[?25l:    [?12l[?25h:function g:dict.func() dict
[?25l:      [?12l[?25h:  $put ='g:dict.func'.self.foo[1].self.foo[0]('asdf')
[?25l:      [?12l[?25h:endfunc
[?25l:      [?12l[?25h:let g:dict.foo = ['-', 2, 3]
[?25l:      [?12l[?25h:call insert(g:dict.foo, function('strlen'))
[?25l:      [?12l[?25h:call g:dict.func()
[?25l:      [?12l[?25h:" 
[?25l:      [?12l[?25h:" Nasty: remove func from Dict that's being called (works)
[?25l:      [?12l[?25h:let d = {1:1}
[?25l:      [?12l[?25h:func d.func(a)
[?25l:[8C[?12l[?25h:  return "a:". a:a
[?25l:[8C[?12l[?25h:endfunc
[?25l:[8C[?12l[?25h:$put =d.func(string(remove(d, 'func')))
[?25l:[8C[?12l[?25h:"
[?25l:[8C[?12l[?25h:" Nasty: deepcopy() dict that refers to itself (fails when noref used)
[?25l:[8C[?12l[?25h:let d = {1:1, 2:2}
[?25l:[8C[?12l[?25h:let l = [4, d, 6]
[?25l:[8C[?12l[?25h:let d[3] = l
[?25l:[8C[?12l[?25h:let dc = deepcopy(d)
[?25l:[8C[?12l[?25h:try
[?25l:[10C[?12l[?25h:  let dc = deepcopy(d, 1)
[?25l:[10C[?12l[?25h:catch
[?25l:[10C[?12l[?25h:  $put =v:exception[:14]
[?25l:[10C[?12l[?25h:endtry
[?25l:[8C[?12l[?25h:let l2 = [0, l, l, 3]
[?25l:[8C[?12l[?25h:let l[1] = l2
[?25l:[8C[?12l[?25h:let l3 = deepcopy(l2)
[?25l:[8C[?12l[?25h:$put ='same list: ' . (l3[1] is l3[2])
[?25l:[8C[?12l[?25h:"
[?25l:[8C[?12l[?25h:" Locked variables
[?25l:[8C[?12l[?25h:for depth in range(5)
[?25l:[10C[?12l[?25h:  $put ='depth is ' . depth
[?25l:[10C[?12l[?25h:  for u in range(3)
[?25l:[12C[?12l[?25h:    unlet l
[?25l:[12C[?12l[?25h:    let l = [0, [1, [2, 3]], {4: 5, 6: {7: 8}}]
[?25l:[12C[?12l[?25h:    exe "lockvar " . depth . " l"
[?25l:[12C[?12l[?25h:    if u == 1
[?25l:[14C[?12l[?25h:      exe "unlockvar l"
[?25l:[14C[?12l[?25h:    elseif u == 2
[?25l:[14C[?12l[?25h:      exe "unlockvar " . depth . " l"
[?25l:[14C[?12l[?25h:    endif
[?25l:[12C[?12l[?25h:    let ps = islocked("l").islocked("l[1]").islocked("l[1][1]").islocked
[56;87H([57;1H"l[1][1][0]").'-'.islocked("l[2]").islocked("l[2]['6']").islocked("l[2]['6'][7]")
[?25l:[12C[?12l[?25h:    $put =ps
[?25l:[12C[?12l[?25h:    let ps = ''
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      let l[1][1][0] = 99
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      let l[1][1] = [99]
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      let l[1] = [99]
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      let l[2]['6'][7] = 99
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      let l[2][6] = {99: 99}
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      let l[2] = {99: 99}
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      let l = [99]
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    $put =ps
[?25l:[12C[?12l[?25h:  endfor
[?25l:[10C[?12l[?25h:endfor
[?25l:[8C[?12l[?25h:"
[?25l:[8C[?12l[?25h:" Unletting locked variables
[?25l:[8C[?12l[?25h:$put ='Unletting:'
[?25l:[8C[?12l[?25h:for depth in range(5)
[?25l:[10C[?12l[?25h:  $put ='depth is ' . depth
[?25l:[10C[?12l[?25h:  for u in range(3)
[?25l:[12C[?12l[?25h:    unlet l
[?25l:[12C[?12l[?25h:    let l = [0, [1, [2, 3]], {4: 5, 6: {7: 8}}]
[?25l:[12C[?12l[?25h:    exe "lockvar " . depth . " l"
[?25l:[12C[?12l[?25h:    if u == 1
[?25l:[14C[?12l[?25h:      exe "unlockvar l"
[?25l:[14C[?12l[?25h:    elseif u == 2
[?25l:[14C[?12l[?25h:      exe "unlockvar " . depth . " l"
[?25l:[14C[?12l[?25h:    endif
[?25l:[12C[?12l[?25h:    let ps = islocked("l").islocked("l[1]").islocked("l[1][1]").islocked
[56;87H([57;1H"l[1][1][0]").'-'.islocked("l[2]").islocked("l[2]['6']").islocked("l[2]['6'][7]")
[?25l:[12C[?12l[?25h:    $put =ps
[?25l:[12C[?12l[?25h:    let ps = ''
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      unlet l[2]['6'][7]
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      unlet l[2][6]
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      unlet l[2]
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      unlet l[1][1][0]
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      unlet l[1][1]
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      unlet l[1]
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    try
[?25l:[14C[?12l[?25h:      unlet l
[?25l:[14C[?12l[?25h:      let ps .= 'p'
[?25l:[14C[?12l[?25h:    catch
[?25l:[14C[?12l[?25h:      let ps .= 'F'
[?25l:[14C[?12l[?25h:    endtry
[?25l:[12C[?12l[?25h:    $put =ps
[?25l:[12C[?12l[?25h:  endfor
[?25l:[10C[?12l[?25h:endfor
[?25l:[8C[?12l[?25h:"
[?25l:[8C[?12l[?25h:" Locked variables and :unlet or list / dict functions
[?25l:[8C[?12l[?25h:$put ='Locks and commands or functions:'
[?25l:[8C[?12l[?25h:"
[?25l:[8C[?12l[?25h:$put ='No :unlet after lock on dict:'
[?25l:[8C[?12l[?25h:unlet! d
[?25l:[8C[?12l[?25h:let d = {'a': 99, 'b': 100}
[?25l:[8C[?12l[?25h:lockvar 1 d
[?25l:[8C[?12l[?25h:try
[?25l:[10C[?12l[?25h:  unlet d.a
[?25l:[10C[?12l[?25h:  $put ='did :unlet'
[?25l:[10C[?12l[?25h:catch
[?25l:[10C[?12l[?25h:  $put =v:exception[:16]
[?25l:[10C[?12l[?25h:endtry
[?25l:[8C[?12l[?25h:$put =string(d)
[?25l:[8C[?12l[?25h:"
[?25l:[8C[?12l[?25h:$put =':unlet after lock on dict item:'
[?25l:[8C[?12l[?25h:unlet! d
[?25l:[8C[?12l[?25h:let d = {'a': 99, 'b': 100}
[?25l:[8C[?12l[?25h:lockvar d.a
[?25l:[8C[?12l[?25h:try
[?25l:[10C[?12l[?25h:  unlet d.a
[?25l:[10C[?12l[?25h:  $put ='did :unlet'
[?25l:[10C[?12l[?25h:catch
[?25l:[10C[?12l[?25h:  $put =v:exception[:16]
[?25l:[10C[?12l[?25h:endtry
[?25l:[8C[?12l[?25h:$put =string(d)
[?25l:[8C[?12l[?25h:"
[?25l:[8C[?12l[?25h:$put ='filter() after lock on dict item:'
[?25l:[8C[?12l[?25h:unlet! d
[?25l:[8C[?12l[?25h:let d = {'a': 99, 'b': 100}
[?25l:[8C[?12l[?25h:lockvar d.a
[?25l:[8C[?12l[?25h:try
[?25l:[10C[?12l[?25h:  call filter(d, 'v:key != "a"')
[?25l:[10C[?12l[?25h:  $put ='did filter()'
[?25l:[10C[?12l[?25h:catch
[?25l:[10C[?12l[?25h:  $put =v:exception[:16]
[?25l:[10C[?12l[?25h:endtry
[?25l:[8C[?12l[?25h:$put =string(d)
[?25l:[8C[?12l[?25h:"
[?25l:[8C[?12l[?25h:$put ='map() after lock on dict:'
[?25l:[8C[?12l[?25h:unlet! d
[?25l:[8C[?12l[?25h:let d = {'a': 99, 'b': 100}
[?25l:[8C[?12l[?25h:lockvar 1 d
[?25l:[8C[?12l[?25h:try
[?25l:[10C[?12l[?25h:  call map(d, 'v:val + 200')
[?25l:[10C[?12l[?25h:  $put ='did map()'
[?25l:[10C[?12l[?25h:catch
[?25l:[10C[?12l[?25h:  $put =v:exception[:16]
[?25l:[10C[?12l[?25h:endtry
[?25l:[8C[?12l[?25h:$put =string(d)
[?25l:[8C[?12l[?25h:"
[?25l:[8C[?12l[?25h:$put ='No extend() after lock on dict item:'
[?25l:[8C[?12l[?25h:unlet! d
[?25l:[8C[?12l[?25h:let d = {'a': 99, 'b': 100}
[?25l:[8C[?12l[?25h:lockvar d.a
[?25l:[8C[?12l[?25h:try
[?25l:[10C[?12l[?25h:  $put =string(extend(d, {'a': 123}))
[?25l:[10C[?12l[?25h:  $put ='did extend()'
[?25l:[10C[?12l[?25h:catch
[?25l:[10C[?12l[?25h:  $put =v:exception[:14]
[?25l:[10C[?12l[?25h:endtry
[?25l:[8C[?12l[?25h:$put =string(d)
[?25l:[8C[?12l[?25h:"
[?25l:[8C[?12l[?25h:$put ='No remove() of write-protected scope-level variable:'
[?25l:[8C[?12l[?25h:fun! Tfunc(this_is_a_loooooooooong_parameter_name)
[?25l:[10C[?12l[?25h:  try
[?25l:[12C[?12l[?25h:    $put =string(remove(a:, 'this_is_a_loooooooooong_parameter_name'))
[?25l:[12C[?12l[?25h:    $put ='did remove()'
[?25l:[12C[?12l[?25h:  catch
[?25l:[12C[?12l[?25h:    $put =v:exception[:14]
[?25l:[12C[?12l[?25h:  endtry
[?25l:[10C[?12l[?25h:endfun
[?25l:[10C[?12l[?25h:call Tfunc('testval')
[?25l:[10C[?12l[?25h:"
[?25l:[10C[?12l[?25h:$put ='No extend() of write-protected scope-level variable:'
[?25l:[10C[?12l[?25h:fun! Tfunc(this_is_a_loooooooooong_parameter_name)
[?25l:[12C[?12l[?25h:  try
[?25l:[14C[?12l[?25h:    $put =string(extend(a:, {'this_is_a_loooooooooong_parameter_name':
1234}))
[?25l:[14C[?12l[?25h:    $put ='did extend()'
[?25l:[14C[?12l[?25h:  catch
[?25l:[14C[?12l[?25h:    $put =v:exception[:14]
[?25l:[14C[?12l[?25h:  endtry
[?25l:[12C[?12l[?25h:endfun
[?25l:[12C[?12l[?25h:call Tfunc('testval')
[?25l:[12C[?12l[?25h:"
[?25l:[12C[?12l[?25h:$put ='No :unlet of variable in locked scope:'
[?25l:[12C[?12l[?25h:let b:testvar = 123
[?25l:[12C[?12l[?25h:lockvar 1 b:
[?25l:[12C[?12l[?25h:try
[?25l:[14C[?12l[?25h:  unlet b:testvar
[?25l:[14C[?12l[?25h:  $put ='b:testvar was :unlet: '. (!exists('b:testvar'))
[?25l:[14C[?12l[?25h:catch
[?25l:[14C[?12l[?25h:  $put =v:exception[:16]
[?25l:[14C[?12l[?25h:endtry
[?25l:[12C[?12l[?25h:unlockvar 1 b:
[?25l:[12C[?12l[?25h:unlet! b:testvar
[?25l:[12C[?12l[?25h:"
[?25l:[12C[?12l[?25h:$put ='No :let += of locked list variable:'
[?25l:[12C[?12l[?25h:let l = ['a', 'b', 3]
[?25l:[12C[?12l[?25h:lockvar 1 l
[?25l:[12C[?12l[?25h:try
[?25l:[14C[?12l[?25h:  let l += ['x']
[?25l:[14C[?12l[?25h:  $put ='did :let +='
[?25l:[14C[?12l[?25h:catch
[?25l:[14C[?12l[?25h:  $put =v:exception[:14]
[?25l:[14C[?12l[?25h:endtry
[?25l:[12C[?12l[?25h:$put =string(l)
[?25l:[12C[?12l[?25h:"
[?25l:[12C[?12l[?25h:unlet l
[?25l:[12C[?12l[?25h:let l = [1, 2, 3, 4]
[?25l:[12C[?12l[?25h:lockvar! l
[?25l:[12C[?12l[?25h:$put =string(l)
[?25l:[12C[?12l[?25h:unlockvar l[1]
[?25l:[12C[?12l[?25h:unlet l[0:1]
[?25l:[12C[?12l[?25h:$put =string(l)
[?25l:[12C[?12l[?25h:unlet l[1:2]
[?25l:[12C[?12l[?25h:$put =string(l)
[?25l:[12C[?12l[?25h:unlockvar l[1]
[?25l:[12C[?12l[?25h:let l[0:1] = [0, 1]
[?25l:[12C[?12l[?25h:$put =string(l)
[?25l:[12C[?12l[?25h:let l[1:2] = [0, 1]
[?25l:[12C[?12l[?25h:$put =string(l)
[?25l:[12C[?12l[?25h:unlet l
[?25l:[12C[?12l[?25h:" :lockvar/islocked() triggering script autoloading
[?25l:[12C[?12l[?25h:set rtp+=./sautest
[?25l:[12C[?12l[?25h:lockvar g:footest#x
[?25l:[12C[?12l[?25h:unlockvar g:footest#x
[?25l:[12C[?12l[?25h:$put ='locked g:footest#x:'.islocked('g:footest#x')
[?25l:[12C[?12l[?25h:$put ='exists g:footest#x:'.exists('g:footest#x')
[?25l:[12C[?12l[?25h:$put ='g:footest#x: '.g:footest#x
[?25l:[12C[?12l[?25h:"
[?25l:[12C[?12l[?25h:" a:000 function argument
[?25l:[12C[?12l[?25h:" first the tests that should fail
[?25l:[12C[?12l[?25h:try
[?25l:[14C[?12l[?25h:  let a:000 = [1, 2]
[?25l:[14C[?12l[?25h:catch
[?25l:[14C[?12l[?25h:  $put ='caught a:000'
[?25l:[14C[?12l[?25h:endtry
[?25l:[12C[?12l[?25h:try
[?25l:[14C[?12l[?25h:  let a:000[0] = 9
[?25l:[14C[?12l[?25h:catch
[?25l:[14C[?12l[?25h:  $put ='caught a:000[0]'
[?25l:[14C[?12l[?25h:endtry
[?25l:[12C[?12l[?25h:try
[?25l:[14C[?12l[?25h:  let a:000[2] = [9, 10]
[?25l:[14C[?12l[?25h:catch
[?25l:[14C[?12l[?25h:  $put ='caught a:000[2]'
[?25l:[14C[?12l[?25h:endtry
[?25l:[12C[?12l[?25h:try
[?25l:[14C[?12l[?25h:  let a:000[3] = {9: 10}
[?25l:[14C[?12l[?25h:catch
[?25l:[14C[?12l[?25h:  $put ='caught a:000[3]'
[?25l:[14C[?12l[?25h:endtry
[?25l:[12C[?12l[?25h:" now the tests that should pass
[?25l:[12C[?12l[?25h:try
[?25l:[14C[?12l[?25h:  let a:000[2][1] = 9
[?25l:[14C[?12l[?25h:  call extend(a:000[2], [5, 6])
[?25l:[14C[?12l[?25h:  let a:000[3][5] = 8
[?25l:[14C[?12l[?25h:  let a:000[3]['a'] = 12
[?25l:[14C[?12l[?25h:  $put =string(a:000)
[?25l:[14C[?12l[?25h:catch
[?25l:[14C[?12l[?25h:  $put ='caught ' . v:exception
[?25l:[14C[?12l[?25h:endtry
[?25l:[12C[?12l[?25h:"
[?25l:[12C[?12l[?25h:" reverse(), sort(), uniq()
[?25l:[12C[?12l[?25h:let l = ['-0', 'A11', 2, 2, 'xaaa', 4, 'foo', 'foo6', 'foo', [0, 1, 2], 
[56;87H'[57;1Hx8', [0, 1, 2], 1.5]
[?25l:[12C[?12l[?25h:$put =string(uniq(copy(l)))
[?25l:[12C[?12l[?25h:$put =string(reverse(l))
[?25l:[12C[?12l[?25h:$put =string(reverse(reverse(l)))
[?25l:[12C[?12l[?25h:$put =string(sort(l))
[?25l:[12C[?12l[?25h:$put =string(reverse(sort(l)))
[?25l:[12C[?12l[?25h:$put =string(sort(reverse(sort(l))))
[?25l:[12C[?12l[?25h:$put =string(uniq(sort(l)))
[?25l:[12C[?12l[?25h:let l=[7, 9, 'one', 18, 12, 22, 'two', 10.0e-16, -1, 'three', 0xff, 0.22
[56;87H,[57;1H 'four']
[?25l:[12C[?12l[?25h:$put =string(sort(copy(l), 'n'))
[?25l:[12C[?12l[?25h:let l=[7, 9, 18, 12, 22, 10.0e-16, -1, 0xff, 0, -0, 0.22, 'bar', 'BAR', 
[56;87H'[57;1HBar', 'Foo', 'FOO', 'foo', 'FOOBAR', {}, []]
[?25l:[12C[?12l[?25h:$put =string(sort(copy(l), 1))
[?25l:[12C[?12l[?25h:$put =string(sort(copy(l), 'i'))
[?25l:[12C[?12l[?25h:$put =string(sort(copy(l)))
[?25l:[12C[?12l[?25h:"
[?25l:[12C[?12l[?25h:" splitting a string to a List
[?25l:[12C[?12l[?25h:$put =string(split('  aa  bb '))
[?25l:[12C[?12l[?25h:$put =string(split('  aa  bb  ', '\W\+', 0))
[?25l:[12C[?12l[?25h:$put =string(split('  aa  bb  ', '\W\+', 1))
[?25l:[12C[?12l[?25h:$put =string(split('  aa  bb  ', '\W', 1))
[?25l:[12C[?12l[?25h:$put =string(split(':aa::bb:', ':', 0))
[?25l:[12C[?12l[?25h:$put =string(split(':aa::bb:', ':', 1))
[?25l:[12C[?12l[?25h:$put =string(split('aa,,bb, cc,', ',\s*', 1))
[?25l:[12C[?12l[?25h:$put =string(split('abc', '\zs'))
[?25l:[12C[?12l[?25h:$put =string(split('abc', '\zs', 1))
[?25l:[12C[?12l[?25h:"
[?25l:[12C[?12l[?25h:" compare recursively linked list and dict
[?25l:[12C[?12l[?25h:let l = [1, 2, 3, 4]
[?25l:[12C[?12l[?25h:let d = {'1': 1, '2': l, '3': 3}
[?25l:[12C[?12l[?25h:let l[1] = d
[?25l:[12C[?12l[?25h:$put =(l == l)
[?25l:[12C[?12l[?25h:$put =(d == d)
[?25l:[12C[?12l[?25h:$put =(l != deepcopy(l))
[?25l:[12C[?12l[?25h:$put =(d != deepcopy(d))
[?25l:[12C[?12l[?25h:"
[?25l:[12C[?12l[?25h:" compare complex recursively linked list and dict
[?25l:[12C[?12l[?25h:let l = []
[?25l:[12C[?12l[?25h:call add(l, l)
[?25l:[12C[?12l[?25h:let dict4 = {"l": l}
[?25l:[12C[?12l[?25h:call add(dict4.l, dict4)
[?25l:[12C[?12l[?25h:let lcopy = deepcopy(l)
[?25l:[12C[?12l[?25h:let dict4copy = deepcopy(dict4)
[?25l:[12C[?12l[?25h:$put =(l == lcopy)
[?25l:[12C[?12l[?25h:$put =(dict4 == dict4copy)
[?25l:[12C[?12l[?25h:"
[?25l:[12C[?12l[?25h:" Pass the same List to extend()
[?25l:[12C[?12l[?25h:let l = [1, 2, 3, 4, 5]
[?25l:[12C[?12l[?25h:call extend(l, l)
[?25l:[12C[?12l[?25h:$put =string(l)
[?25l:[12C[?12l[?25h:"
[?25l:[12C[?12l[?25h:" Pass the same Dict to extend()
[?25l:[12C[?12l[?25h:let d = { 'a': {'b': 'B'}}
[?25l:[12C[?12l[?25h:call extend(d, d)
[?25l:[12C[?12l[?25h:$put =string(d)
[?25l:[12C[?12l[?25h:"
[?25l:[12C[?12l[?25h:" Pass the same Dict to extend() with "error"
[?25l:[12C[?12l[?25h:try
[?25l:[14C[?12l[?25h:  call extend(d, d, "error")
[?25l:[14C[?12l[?25h:catch
[?25l:[14C[?12l[?25h:  $put =v:exception[:15] . v:exception[-1:-1]
[?25l:[14C[?12l[?25h:endtry
[?25l:[12C[?12l[?25h:$put =string(d)
[?25l:[12C[?12l[?25h:"
[?25l:[12C[?12l[?25h:" test for range assign
[?25l:[12C[?12l[?25h:let l = [0]
[?25l:[12C[?12l[?25h:let l[:] = [1, 2]
[?25l:[12C[?12l[?25h:$put =string(l)
[?25l:[12C[?12l[?25h:endfun[27m[23m[m[H[2J[?25l[1;1H:$put =(d != deepcopy(d))
:"
:" compare complex recursively linked list and dict
:let l = []
:call add(l, l)
:let dict4 = {"l": l}
:call add(dict4.l, dict4)
:let lcopy = deepcopy(l)
:let dict4copy = deepcopy(dict4)
:$put =(l == lcopy)
:$put =(dict4 == dict4copy)
:"
:" Pass the same List to extend()
:let l = [1, 2, 3, 4, 5]
:call extend(l, l)
:$put =string(l)
:"
:" Pass the same Dict to extend()
:let d = { 'a': {'b': 'B'}}
:call extend(d, d)
:$put =string(d)
:"
:" Pass the same Dict to extend() with "error"
:try
:  call extend(d, d, "error")
:catch
:  $put =v:exception[:15] . v:exception[-1:-1]
:endtry
:$put =string(d)
:"
:" test for range assign
:let l = [0]
:let l[:] = [1, 2]
:$put =string(l)
:endfun
:"
:call Test(1, 2, [3, 4], {5: 6})  " This may take a while
:"
:delfunc Test
:unlet dict
:call garbagecollect(1)
:"
:" test for patch 7.3.637
:let a = 'No error caught'
:try|foldopen|catch|let a = matchstr(v:exception,'^[^ ]*')|endtry
o[34m^R[m=a[34m^M^[[m:"
:lang C
:redir => a
:try|foobar|catch|let a = matchstr(v:exception,'^[^ ]*')|endtry
:redir END
o[34m^R[m=a[34m^M^[[m:"
:"
:/^start:/,$wq! test.out
ENDTEST

start:[55;1H[?12l[?25h[?25l

:[?12l[?25h"[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Test(1, 2, [3, 4], {5: 6})  " This may take a while[?25l[1m[37m[41mError detected while processing function Test:[m[57;47H[K[57;1H
[33mline   76:[m
[1m[37m[41mE684: list index out of range: 1[m
[33mline   91:[m
[1m[37m[41mE684: list index out of range: 2[m
[33mline  271:[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[1m[37m[41mE108: No such variable: "l"[m
[33mline  441:[m
[1m[37m[41mE741: Value is locked: l[0:1][m
[33mline  443:[m
[1m[37m[41mE741: Value is locked: l[1:2][m
[33mline  446:[m
[1m[37m[41mE741: Value is locked: l[0:1] = [0, 1][m
[33mline  448:[m
[1m[37m[41mE741: Value is locked: l[1:2] = [0, 1][m
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[28L[1;1HNo remove() of write-protected scope-level variable:
Vim(put):E795:
No extend() of write-protected scope-level variable:
Vim(put):E742:
No :unlet of variable in locked scope:
Vim(unlet):E741:
No :let += of locked list variable:
Vim(let):E741:
['a', 'b', 3]
[1, 2, 3, 4]
[1, 2, 3, 4]
[1, 2, 3, 4]
[1, 2, 3, 4]
[1, 2, 3, 4]
locked g:footest#x:-1
exists g:footest#x:0
g:footest#x: 1
caught a:000
caught a:000[0]
caught a:000[2]
caught a:000[3]
[1, 2, [3, 9, 5, 6], {'a': 12, '5': 8}]
['-0', 'A11', 2, 'xaaa', 4, 'foo', 'foo6', 'foo', [0, 1, 2], 'x8', [0, 1, 2], 1.5]
[1.5, [0, 1, 2], 'x8', [0, 1, 2], 'foo', 'foo6', 'foo', 4, 'xaaa', 2, 2, 'A11', '-0']
[1.5, [0, 1, 2], 'x8', [0, 1, 2], 'foo', 'foo6', 'foo', 4, 'xaaa', 2, 2, 'A11', '-0']
['-0', 'A11', 'foo', 'foo', 'foo6', 'x8', 'xaaa', 1.5, 2, 2, 4, [0, 1, 2], [0, 1, 2]]
[[0, 1, 2], [0, 1, 2], 4, 2, 2, 1.5, 'xaaa', 'x8', 'foo6', 'foo', 'foo', 'A11', '-0']
['-0', 'A11', 'foo', 'foo', 'foo6', 'x8', 'xaaa', 1.5, 2, 2, 4, [0, 1, 2], [0, 1, 2]]
['-0', 'A11', 'foo', 'foo6', 'x8', 'xaaa', 1.5, 2, 4, [0, 1, 2]]
[-1, 'one', 'two', 'three', 'four', 1.0e-15, 0.22, 7, 9, 12, 18, 22, 255]
['bar', 'BAR', 'Bar', 'Foo', 'FOO', 'foo', 'FOOBAR', -1, 0, 0, 0.22, 1.0e-15, 12, 18, 22[32;1H2, 255, 7, 9, [], {}]
['bar', 'BAR', 'Bar', 'Foo', 'FOO', 'foo', 'FOOBAR', -1, 0, 0, 0.22, 1.0e-15, 12, 18, 22[34;1H2, 255, 7, 9, [], {}]
['BAR', 'Bar', 'FOO', 'FOOBAR', 'Foo', 'bar', 'foo', -1, 0, 0, 0.22, 1.0e-15, 12, 18, 22[36;1H2, 255, 7, 9, [], {}]
['aa', 'bb'][37;13H[K[38;1H['aa', 'bb']
['', 'aa', 'bb', '']
['', '', 'aa', '', 'bb', '', '']
['aa', '', 'bb'][41;17H[K[42;1H['', 'aa', '', 'bb', '']
['aa', '', 'bb', 'cc', '']
['a', 'b', 'c'][44;16H[K[45;1H['', 'a', '', 'b', '', 'c', ''][45;32H[K[46;1H1[46;2H[K[47;1H1[47;2H[K[48;1H0[48;2H[K[49;1H0[49;2H[K[50;1H1[50;2H[K[51;1H1[51;2H[K[52;1H[1, 2, 3, 4, 5, 1, 2, 3, 4, 5]
{'a': {'b': 'B'}}[53;18H[K[54;1HVim(call):E737: a
{'a': {'b': 'B'}}
[1, 2][57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hdelfunc Test[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hunlet dict[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall garbagecollect(1)[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test for patch 7.3.637[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet a = 'No error caught'[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htry|foldopen|catch|let a = matchstr(v:exception,'^[^ ]*')|endtry[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H=[?12l[?25ha[?25l[1;56r[56;1H
[1;57r[56;1HVim(foldopen):E490:[57;1H[K[56;19H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;19H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlang C[?25l[56;19H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir => a[?25l[56;19H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htry|foobar|catch|let a = matchstr(v:exception,'^[^ ]*')|endtry[?25l[1m[37m[41mError detected while processing :[m[57;34H[K[57;1H
[1m[37m[41mE492: Not an editor command: foobar|catch|let a = matchstr(v:exception,'^[^ ]*')|endtr[m
[56;87H[1m[37m[41my[m[57;1H
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[3L[1;1HVim(put):E795:
No extend() of write-protected scope-level variable:
Vim(put):E742:[57;1H[K[56;19H[?12l[?25h[?25l
=[?12l[?25ha[?25l[1;56r[1;1H[5M[1;57r[54;1HError detected while processing :
E492: Not an editor command: foobar|catch|let a = matchstr(v:exception,'^[^ ]*')|endtry[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^start:/,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 197 lines, 3821 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test55 = test61; then \
#	  if diff test.out test55.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test55.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test55.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test56.failed test.ok test.out X* viminfo
cp test56.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test56.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test56.in" 21 lines, 457 characters[1;1HTest for script-local function.     vim: set ft=vim :

STARTTEST
:so small.vim
:"
:set nocp viminfo+=nviminfo
:/^start:/+1,/^end:/-1w! Xtest.vim
:source Xtest.vim
_x
:$-1,$wq! test.out
ENDTEST

start:
fun <SID>DoLast()
  call append(line('$'), "last line")
endfun
fun s:DoNothing()
  call append(line('$'), "nothing line")
endfun
nnoremap <buffer> _x    :call <SID>DoNothing()<bar>call <SID>DoLast()<bar>delfunc <SID>>[21;1HDoNothing<bar>delfunc <SID>DoLast<cr>
end:
[1m[34m~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for script-local function.     vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 7 lines, 120 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[11;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocp viminfo+=nviminfo[?25l[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^start:/+1,/^end:/-1w! Xtest.vim[?25l"Xtest.vim" [57;13H[K[57;13H[New] 7L, 251C written[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsource Xtest.vim[?25l[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:call <SNR>4_DoNothing()|call <SNR>4_DoLast()|delfunc <SNR>4_DoNothing|delfunc <SNR>4_
[56;87HD[57;1HoLast[32mPress ENTER or type command to continue[?12l[?25h[m[1;1H[L[?25l[1;1HTest for script-local function.     vim: set ft=vim :[23;1Hnothing line[23;13H[K[24;1Hlast line[24;10H[K[57;1H[K[12;1H[?12l[?25h[?25l[57;1H:[?12l[?25h$-1,$wq! test.out[?25l"test.out" [57;12H[K[57;12H[New] 2L, 23C written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test56 = test61; then \
#	  if diff test.out test56.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test56.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test56.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test57.failed test.ok test.out X* viminfo
cp test57.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test57.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test57.in" 545 lines, 4110 characters[1;1HTests for :sort command.     vim: set ft=vim :

STARTTEST
:so small.vim
:"
:/^t01:/+1,/^t02/-1sort
:/^t02:/+1,/^t03/-1sort n
:/^t03:/+1,/^t04/-1sort x
:/^t04:/+1,/^t05/-1sort u
:/^t05:/+1,/^t06/-1sort!
:/^t06:/+1,/^t07/-1sort! n
:/^t07:/+1,/^t08/-1sort! u
:/^t08:/+1,/^t09/-1sort o
:/^t09:/+1,/^t10/-1sort! x
:/^t10:/+1,/^t11/-1sort/./
:/^t11:/+1,/^t12/-1sort/../
:/^t12:/+1,/^t13/-1sort/../u
:/^t13:/+1,/^t14/-1sort/./n
:/^t14:/+1,/^t15/-1sort/./r
:/^t15:/+1,/^t16/-1sort/../r
:/^t16:/+1,/^t17/-1sort/./rn
:/^t17:/+1,/^t18/-1sort/\d/
:/^t18:/+1,/^t19/-1sort/\d/r
:/^t19:/+1,/^t20/-1sort/\d/n
:/^t20:/+1,/^t21/-1sort/\d/rn
:/^t21:/+1,/^t22/-1sort/\d\d/
:/^t22:/+1,/^t23/-1sort/\d\d/n
:/^t23:/+1,/^t24/-1sort/\d\d/x
:/^t24:/+1,/^t25/-1sort/\d\d/r
:/^t25:/+1,/^t26/-1sort/\d\d/rn
:/^t26:/+1,/^t27/-1sort/\d\d/rx
:/^t27:/+1,/^t28/-1sort no
:/^t28:/+1,/^t29/-1sort b
:/^t29:/+1,/^t30/-1sort b
:/^t30:/+1,/^t31/-1sort f
:/^t01:/,$wq! test.out
ENDTEST

t01: alphebetical
abc
ab
a
a321
a123
a122
b321
b123
c123d
 123b
c321d
b322b
b321
b321b


t02: numeric[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for :sort command.     vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 33 lines, 920 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[37;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^t01:/+1,/^t02/-1sort[?25l[40;1H[K[41;1H[K[42;1H 123b[43;2H[K[44;4H2
a123
a
ab[47;3H[K[48;1Habc[48;4H[K[49;1Hb[49;5H[K[50;1Hb[50;5H[K[51;4H1[51;5H[K[52;5Hb
b322
c123d
c321d[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^t02:/+1,/^t03/-1sort n[?25l[1;56r[56;1H
[1;57r[56;1Habc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t03:/+1,/^t04/-1sort x[?25l[1;56r[1;1H[21M[1;57r[36;1Hab
a[41;1H-24
x-22
0
a122
a123
b123
c123d
 123b
a321
b321
c321d
b321
b321b
b322b
t03: hexadecimal[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t04:/+1,/^t05/-1sort u[?25l[1;56r[1;1H[17M[1;57r[41;1Ha
ab
abc
 123b
a122
a123
a321
b123
b321
b321
b321b
b322b
c123d
c321d
t04: alpha, unique[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t05:/+1,/^t06/-1sort![?25l[1;56r[1;1H[15M[1;57r[42;2H123b
a
a122
a123
a321
ab
abc
b123
b321
b321b
b322b
c123d
c321d
t05: alpha, reverse
c321d[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t06:/+1,/^t07/-1sort! n        [?25l[1;56r[1;1H[17M[1;57r[40;1Hc123d
b322b
b321b
b321
b321
b123
abc
ab
a321
a123
a122
a
 123b


t06: numeric, reverse
b322b[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t07:/+1,/^t08/-1sort! u[?25l[1;56r[1;1H[17M[1;57r[40;1Hb321b
b321
c321d
b321
a321
 123b
c123d
b123
a123
a122


a
ab
abc
t07: unique, reverse
c321d[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t08:/+1,/^t09/-1sort o         [?25l[1;56r[1;1H[15M[1;57r[42;1Hc123d
b322b
b321b
b321
b123
abc
ab
a321
a123
a122
a
 123b

t08: octal
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t09:/+1,/^t10/-1sort! x        [?25l[1;56r[1;1H[17M[1;57r[40;1Hab
a


a122
a123
b123
c123d
 123b
a321
b321
c321d
b321
b321b
b322b
t09: reverse, hexadecimal
c321d[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t10:/+1,/^t11/-1sort/./        [?25l[1;56r[1;1H[17M[1;57r[40;1Hc123d
b322b
b321b
b321
b321
b123
a321
a123
a122
 123b
abc
ab
a


t10: alpha, skip first character
a[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t11:/+1,/^t12/-1sort/../       [?25l[1;56r[1;1H[17M[1;57r[42;1Ha122
a123
b123
 123b
c123d
a321
b321
b321
b321b
c321d
b322b
ab
abc
t11: alpha, skip first 2 characters
ab[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t12:/+1,/^t13/-1sort/../u[?25l[1;56r[1;1H[17M[1;57r[40;1Ha


a321
b321
b321
b321b
c321d
a122
b322b
a123
b123
 123b
c123d
abc
t12: alpha, unique, skip first 2 characters
ab[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t13:/+1,/^t14/-1sort/./n[?25l[1;56r[1;1H[15M[1;57r[42;1Ha

a321
b321
b321b
c321d
a122
b322b
a123
b123
 123b
c123d
abc
t13: numeric, skip first character
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t14:/+1,/^t15/-1sort/./r[?25l[1;56r[1;1H[17M[1;57r[40;1Hab
a


a122
a123
b123
c123d
 123b
a321
b321
c321d
b321
b321b
b322b
t14: alpha, sort on first character[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t15:/+1,/^t16/-1sort/../r[?25l[1;56r[1;1H[17M[1;57r[41;2H123b
abc
ab
a
a321
a123
a122
b321
b123
b322b
b321
b321b
c123d
c321d
t15: alpha, sort on first 2 characters
a[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t16:/+1,/^t17/-1sort/./rn[?25l[1;56r[1;1H[17M[1;57r[42;2H123b
a123
a122
a321
abc
ab
b123
b321
b322b
b321
b321b
c123d
c321d
t16: numeric, sort on first character
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t17:/+1,/^t18/-1sort/\d/[?25l[1;56r[1;1H[17M[1;57r[40;1Hab
a
a321
a123
a122
b321
b123
c123d
 123b
c321d
b322b
b321
b321b


t17: alpha, skip past first digit
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t18:/+1,/^t19/-1sort/\d/r[?25l[1;56r[1;1H[17M[1;57r[40;1Hab
a


a321
b321
b321
b321b
c321d
a122
b322b
a123
b123
 123b
c123d
t18: alpha, sort on first digit
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t19:/+1,/^t20/-1sort/\d/n[?25l[1;56r[1;1H[17M[1;57r[40;1Hab
a


a123
a122
b123
c123d
 123b
a321
b321
c321d
b322b
b321
b321b
t19: numeric, skip past first digit
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t20:/+1,/^t21/-1sort/\d/rn[?25l[1;56r[1;1H[17M[1;57r[40;1Hab
a


a321
b321
c321d
b321
b321b
a122
b322b
a123
b123
c123d
 123b
t20: numeric, sort on first digit
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t21:/+1,/^t22/-1sort/\d\d/[?25l[1;56r[1;1H[17M[1;57r[40;1Hab
a


a123
a122
b123
c123d
 123b
a321
b321
c321d
b322b
b321
b321b
t21: alpha, skip past first 2 digits
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t22:/+1,/^t23/-1sort/\d\d/n[?25l[1;56r[1;1H[17M[1;57r[40;1Hab
a


a321
b321
b321
b321b
c321d
a122
b322b
a123
b123
 123b
c123d
t22: numeric, skip past first 2 digits
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t23:/+1,/^t24/-1sort/\d\d/x[?25l[1;56r[1;1H[17M[1;57r[40;1Hab
a


a321
b321
c321d
b321
b321b
a122
b322b
a123
b123
c123d
 123b
t23: hexadecimal, skip past first 2 digits
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t24:/+1,/^t25/-1sort/\d\d/r[?25l[1;56r[1;1H[17M[1;57r[40;1Hab
a


a321
b321
b321
a122
a123
b123
b321b
c321d
b322b
 123b
c123d
t24: alpha, sort on first 2 digits
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t25:/+1,/^t26/-1sort/\d\d/rn[?25l[1;56r[1;1H[17M[1;57r[40;1Hab
a


a123
a122
b123
c123d
 123b
a321
b321
c321d
b322b
b321
b321b
t25: numeric, sort on first 2 digits
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t26:/+1,/^t27/-1sort/\d\d/rx[?25l[1;56r[1;1H[17M[1;57r[40;1Hab
a


a123
a122
b123
c123d
 123b
a321
b321
c321d
b322b
b321
b321b
t26: hexadecimal, sort on first 2 digits
abc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t27:/+1,/^t28/-1sort no[?25l[1m[37m[41mE474: Invalid argument[m[57;23H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^t28:/+1,/^t29/-1sort b[?25l[27m[23m[m[H[2J[1;1Hb123
c123d
 123b
a321
b321
c321d
b322b
b321
b321b
t27: wrong arguments
abc
ab
a
a321
a123
a122
b321
b123
c123d
 123b
c321d
b322b
b321
b321b


t28: binary


0b000000
0b001000
0b010000
0b100000
0b100010
0b100010
0b100100
0b101000
0b101000
0b101001
0b101001
0b101010
0b101100
0b111000
t29: binary with leading characters
0b100010
0b010000
 0b101001
b0b101100
0b100010
 0b100100
a0b001000
0b101000
0b101000
a0b101001
ab0b100000
0b101010[28;1H[?12l[?25h[?25l[57;1H:[?12l[?25h/^t29:/+1,/^t30/-1sort b[?25l[45;1H[K[46;1H[K[47;1H0b0000[47;9H[K[48;1Ha0b0010
0b01000
ab0b100000
0b10001[51;9H[K[52;5H001
 0b100100
0b1010[54;9H[K[55;1H0b10[55;9H[K[56;1H 0b101001[45;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^t30:/+1,/^t31/-1sort f[?25l[1;56r[1;1H[6M[1;57r[51;1Ha0b101001
0b101010
b0b101100
b0b111000
t30: float[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^t01:/,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 501 lines, 3105 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test57 = test61; then \
#	  if diff test.out test57.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test57.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test57.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test60.failed test.ok test.out X* viminfo
cp test60.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test60.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test60.in" 601 lines, 13116 characters[1;1HTests for the exists() and has() functions.  vim: set ft=vim ts=8 sw=2 :

STARTTEST
:so small.vim
:function! RunTest(str, result)
    if exists(a:str) == a:result[7;9Hecho "OK"
    else[9;9Hecho "FAILED: Checking for " . a:str
    endif
endfunction
:function! TestExists()
    augroup myagroup[14;9Hautocmd! BufEnter[7C*.my     echo "myfile edited"[15;9Hautocmd! FuncUndefined  UndefFun exec "fu UndefFun()\nendfu"
    augroup END
    set rtp+=./sautest[19;5Hlet test_cases = [][21;5H" valid autocmd group
    let test_cases += [['#myagroup', 1]]
    " valid autocmd group with garbage
    let test_cases += [['#myagroup+b', 0]]
    " Valid autocmd group and event
    let test_cases += [['#myagroup#BufEnter', 1]]
    " Valid autocmd group, event and pattern
    let test_cases += [['#myagroup#BufEnter#*.my', 1]]
    " Valid autocmd event
    let test_cases += [['#BufEnter', 1]]
    " Valid autocmd event and pattern
    let test_cases += [['#BufEnter#*.my', 1]]
    " Non-existing autocmd group or event
    let test_cases += [['#xyzagroup', 0]]
    " Non-existing autocmd group and valid autocmd event
    let test_cases += [['#xyzagroup#BufEnter', 0]]
    " Valid autocmd group and event with no matching pattern
    let test_cases += [['#myagroup#CmdwinEnter', 0]]
    " Valid autocmd group and non-existing autocmd event
    let test_cases += [['#myagroup#xyzacmd', 0]]
    " Valid autocmd group and event and non-matching pattern
    let test_cases += [['#myagroup#BufEnter#xyzpat', 0]]
    " Valid autocmd event and non-matching pattern
    let test_cases += [['#BufEnter#xyzpat', 0]]
    " Empty autocmd group, event and pattern
    let test_cases += [['###', 0]]
    " Empty autocmd group and event or empty event and pattern
    let test_cases += [['##', 0]]
    " Valid autocmd event
    let test_cases += [['##FileReadCmd', 1]]
    " Non-existing autocmd event
    let test_cases += [['##MySpecialCmd', 0]][54;5H" Existing and working option (long form)
    let test_cases += [['&textwidth', 1]]
    " Existing and working option (short form)[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for the exists() and has() functions.  vim: set ft=vim ts=8 sw=2 :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 596 lines, 13023 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;9Hecho "OK"
    else[3;9Hecho "FAILED"
    endif[6;5H" Function arguments
    function TestFuncArg(func_arg, ...)[8;9Hecho 'a:func_arg: 1'[9;9Hif exists('a:func_arg')[10;13Hecho "OK"[11;9Helse[12;13Hecho "FAILED"[13;9Hendif[15;9Hecho 'a:non_exists_arg: 0'[16;9Hif !exists('a:non_exists_arg')[17;13Hecho "OK"[18;9Helse[19;13Hecho "FAILED"[20;9Hendif[22;9Hecho 'a:1: 1'[23;9Hif exists('a:1')[24;13Hecho "OK"[25;9Helse[26;13Hecho "FAILED"[27;9Hendif[29;9Hecho 'a:2: 0'[30;9Hif !exists('a:2')[31;13Hecho "OK"[32;9Helse[33;13Hecho "FAILED"[34;9Hendif
    endfunction[37;5Hcall TestFuncArg("arg1", "arg2")[39;5Hecho ' g:footest#x =' g:footest#x
    echo '   footest#F()' footest#F()
    echo 'UndefFun()' UndefFun()[43;5Hredir END
endfunction
:call TestExists()
:"
:delfunc TestExists
:delfunc RunTest
:delfunc TestFuncArg
:edit! test.out
:set ff=unix
:w
:qa!
:while getchar(1) | call getchar() | endwhile
ENDTEST[?12l[?25h
[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! RunTest(str, result)[?25l
:  [?12l[?25h    if exists(a:str) == a:result
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED: Checking for " . a:str
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25hendfunction[1;1H[6L[?25l[1;9Hecho "OK"
    else[3;9Hecho "FAILED"
    endif[6;5H" Function arguments[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hfunction! TestExists()[?25l
:  [?12l[?25h    augroup myagroup
[?25l:  [?12l[?25h[34m^I[mautocmd! BufEnter       *.my     echo "myfile edited"
[?25l:  [?12l[?25h[34m^I[mautocmd! FuncUndefined  UndefFun exec "fu UndefFun()\nendfu"
[?25l:  [?12l[?25h    augroup END
[?25l:  [?12l[?25h    set rtp+=./sautest
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    let test_cases = []
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " valid autocmd group
[?25l:  [?12l[?25h    let test_cases += [['#myagroup', 1]]
[?25l:  [?12l[?25h    " valid autocmd group with garbage
[?25l:  [?12l[?25h    let test_cases += [['#myagroup+b', 0]]
[?25l:  [?12l[?25h    " Valid autocmd group and event
[?25l:  [?12l[?25h    let test_cases += [['#myagroup#BufEnter', 1]]
[?25l:  [?12l[?25h    " Valid autocmd group, event and pattern
[?25l:  [?12l[?25h    let test_cases += [['#myagroup#BufEnter#*.my', 1]]
[?25l:  [?12l[?25h    " Valid autocmd event
[?25l:  [?12l[?25h    let test_cases += [['#BufEnter', 1]]
[?25l:  [?12l[?25h    " Valid autocmd event and pattern
[?25l:  [?12l[?25h    let test_cases += [['#BufEnter#*.my', 1]]
[?25l:  [?12l[?25h    " Non-existing autocmd group or event
[?25l:  [?12l[?25h    let test_cases += [['#xyzagroup', 0]]
[?25l:  [?12l[?25h    " Non-existing autocmd group and valid autocmd event
[?25l:  [?12l[?25h    let test_cases += [['#xyzagroup#BufEnter', 0]]
[?25l:  [?12l[?25h    " Valid autocmd group and event with no matching pattern
[?25l:  [?12l[?25h    let test_cases += [['#myagroup#CmdwinEnter', 0]]
[?25l:  [?12l[?25h    " Valid autocmd group and non-existing autocmd event
[?25l:  [?12l[?25h    let test_cases += [['#myagroup#xyzacmd', 0]]
[?25l:  [?12l[?25h    " Valid autocmd group and event and non-matching pattern
[?25l:  [?12l[?25h    let test_cases += [['#myagroup#BufEnter#xyzpat', 0]]
[?25l:  [?12l[?25h    " Valid autocmd event and non-matching pattern
[?25l:  [?12l[?25h    let test_cases += [['#BufEnter#xyzpat', 0]]
[?25l:  [?12l[?25h    " Empty autocmd group, event and pattern
[?25l:  [?12l[?25h    let test_cases += [['###', 0]]
[?25l:  [?12l[?25h    " Empty autocmd group and event or empty event and pattern
[?25l:  [?12l[?25h    let test_cases += [['##', 0]]
[?25l:  [?12l[?25h    " Valid autocmd event
[?25l:  [?12l[?25h    let test_cases += [['##FileReadCmd', 1]]
[?25l:  [?12l[?25h    " Non-existing autocmd event
[?25l:  [?12l[?25h    let test_cases += [['##MySpecialCmd', 0]]
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing and working option (long form)
[?25l:  [?12l[?25h    let test_cases += [['&textwidth', 1]]
[?25l:  [?12l[?25h    " Existing and working option (short form)
[?25l:  [?12l[?25h    let test_cases += [['&tw', 1]]
[?25l:  [?12l[?25h    " Existing and working option with garbage
[?25l:  [?12l[?25h    let test_cases += [['&tw-', 0]]
[?25l:  [?12l[?25h    " Global option
[?25l:  [?12l[?25h    let test_cases += [['&g:errorformat', 1]]
[?25l:  [?12l[?25h    " Local option
[?25l:  [?12l[?25h    let test_cases += [['&l:errorformat', 1]]
[?25l:  [?12l[?25h    " Negative form of existing and working option (long form)
[?25l:  [?12l[?25h    let test_cases += [['&nojoinspaces', 0]]
[?25l:  [?12l[?25h    " Negative form of existing and working option (short form)
[?25l:  [?12l[?25h    let test_cases += [['&nojs', 0]]
[?25l:  [?12l[?25h    " Non-existing option
[?25l:  [?12l[?25h    let test_cases += [['&myxyzoption', 0]]
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing and working option (long form)
[?25l:  [?12l[?25h    let test_cases += [['+incsearch', 1]]
[?25l:  [?12l[?25h    " Existing and working option with garbage
[?25l:  [?12l[?25h    let test_cases += [['+incsearch!1', 0]]
[?25l:  [?12l[?25h    " Existing and working option (short form)
[?25l:  [?12l[?25h    let test_cases += [['+is', 1]]
[?25l:  [?12l[?25h    " Existing option that is hidden.
[?25l:  [?12l[?25h    let test_cases += [['+autoprint', 0]]
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing environment variable
[?25l:  [?12l[?25h    let $EDITOR_NAME = 'Vim Editor'
[?25l:  [?12l[?25h    let test_cases += [['$EDITOR_NAME', 1]]
[?25l:  [?12l[?25h    " Non-existing environment variable
[?25l:  [?12l[?25h    let test_cases += [['$NON_ENV_VAR', 0]]
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Valid internal function
[?25l:  [?12l[?25h    let test_cases += [['*bufnr', 1]]
[?25l:  [?12l[?25h    " Valid internal function with ()
[?25l:  [?12l[?25h    let test_cases += [['*bufnr()', 1]]
[?25l:  [?12l[?25h    " Non-existing internal function
[?25l:  [?12l[?25h    let test_cases += [['*myxyzfunc', 0]]
[?25l:  [?12l[?25h    " Valid internal function with garbage
[?25l:  [?12l[?25h    let test_cases += [['*bufnr&6', 0]]
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Valid user defined function
[?25l:  [?12l[?25h    let test_cases += [['*TestExists', 1]]
[?25l:  [?12l[?25h    " Non-existing user defined function
[?25l:  [?12l[?25h    let test_cases += [['*MyxyzFunc', 0]]
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Function that may be created by FuncUndefined event
[?25l:  [?12l[?25h    let test_cases += [['*UndefFun', 0]]
[?25l:  [?12l[?25h    " Function that may be created by script autoloading
[?25l:  [?12l[?25h    let test_cases += [['*footest#F', 0]]
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    redir! > test.out
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    for [test_case, result] in test_cases
[?25l:    [?12l[?25h        echo test_case . ": " . result
[?25l:    [?12l[?25h        call RunTest(test_case, result)
[?25l:    [?12l[?25h    endfor
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Valid internal command (full match)
[?25l:  [?12l[?25h    echo ':edit: 2'
[?25l:  [?12l[?25h    if exists(':edit') == 2
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Valid internal command (full match) with garbage
[?25l:  [?12l[?25h    echo ':edit/a: 0'
[?25l:  [?12l[?25h    if exists(':edit/a') == 0
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Valid internal command (partial match)
[?25l:  [?12l[?25h    echo ':q: 1'
[?25l:  [?12l[?25h    if exists(':q') == 1
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing internal command
[?25l:  [?12l[?25h    echo ':invalidcmd: 0'
[?25l:  [?12l[?25h    if !exists(':invalidcmd')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " User defined command (full match)
[?25l:  [?12l[?25h    command! MyCmd :echo 'My command'
[?25l:  [?12l[?25h    echo ':MyCmd: 2'
[?25l:  [?12l[?25h    if exists(':MyCmd') == 2
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " User defined command (partial match)
[?25l:  [?12l[?25h    command! MyOtherCmd :echo 'Another command'
[?25l:  [?12l[?25h    echo ':My: 3'
[?25l:  [?12l[?25h    if exists(':My') == 3
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Command modifier
[?25l:  [?12l[?25h    echo ':rightbelow: 2'
[?25l:  [?12l[?25h    if exists(':rightbelow') == 2
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing user defined command (full match)
[?25l:  [?12l[?25h    delcommand MyCmd
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    echo ':MyCmd: 0'
[?25l:  [?12l[?25h    if !exists(':MyCmd')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing user defined command (partial match)
[?25l:  [?12l[?25h    delcommand MyOtherCmd
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    echo ':My: 0'
[?25l:  [?12l[?25h    if !exists(':My')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Valid local variable
[?25l:  [?12l[?25h    let local_var = 1
[?25l:  [?12l[?25h    echo 'local_var: 1'
[?25l:  [?12l[?25h    if exists('local_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Valid local variable with garbage
[?25l:  [?12l[?25h    let local_var = 1
[?25l:  [?12l[?25h    echo 'local_var%n: 0'
[?25l:  [?12l[?25h    if !exists('local_var%n')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing local variable
[?25l:  [?12l[?25h    unlet local_var
[?25l:  [?12l[?25h    echo 'local_var: 0'
[?25l:  [?12l[?25h    if !exists('local_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing autoload variable that may be autoloaded
[?25l:  [?12l[?25h    echo 'footest#x: 0'
[?25l:  [?12l[?25h    if !exists('footest#x')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Valid local list
[?25l:  [?12l[?25h    let local_list = ["blue", "orange"]
[?25l:  [?12l[?25h    echo 'local_list: 1'
[?25l:  [?12l[?25h    if exists('local_list')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Valid local list item
[?25l:  [?12l[?25h    echo 'local_list[1]: 1'
[?25l:  [?12l[?25h    if exists('local_list[1]')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Valid local list item with garbage
[?25l:  [?12l[?25h    echo 'local_list[1]+5: 0'
[?25l:  [?12l[?25h    if !exists('local_list[1]+5')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Invalid local list item
[?25l:  [?12l[?25h    echo 'local_list[2]: 0'
[?25l:  [?12l[?25h    if !exists('local_list[2]')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing local list
[?25l:  [?12l[?25h    unlet local_list
[?25l:  [?12l[?25h    echo 'local_list: 0'
[?25l:  [?12l[?25h    if !exists('local_list')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Valid local dictionary
[?25l:  [?12l[?25h    let local_dict = {"xcord":100, "ycord":2}
[?25l:  [?12l[?25h    echo 'local_dict: 1'
[?25l:  [?12l[?25h    if exists('local_dict')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing local dictionary
[?25l:  [?12l[?25h    unlet local_dict
[?25l:  [?12l[?25h    echo 'local_dict: 0'
[?25l:  [?12l[?25h    if !exists('local_dict')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing local curly-brace variable
[?25l:  [?12l[?25h    let str = "local"
[?25l:  [?12l[?25h    let curly_{str}_var = 1
[?25l:  [?12l[?25h    echo 'curly_' . str . '_var: 1'
[?25l:  [?12l[?25h    if exists('curly_{str}_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing local curly-brace variable
[?25l:  [?12l[?25h    unlet curly_{str}_var
[?25l:  [?12l[?25h    echo 'curly_' . str . '_var: 0'
[?25l:  [?12l[?25h    if !exists('curly_{str}_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing global variable
[?25l:  [?12l[?25h    let g:global_var = 1
[?25l:  [?12l[?25h    echo 'g:global_var: 1'
[?25l:  [?12l[?25h    if exists('g:global_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing global variable with garbage
[?25l:  [?12l[?25h    echo 'g:global_var-n: 1'
[?25l:  [?12l[?25h    if !exists('g:global_var-n')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing global variable
[?25l:  [?12l[?25h    unlet g:global_var
[?25l:  [?12l[?25h    echo 'g:global_var: 0'
[?25l:  [?12l[?25h    if !exists('g:global_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing global list
[?25l:  [?12l[?25h    let g:global_list = ["blue", "orange"]
[?25l:  [?12l[?25h    echo 'g:global_list: 1'
[?25l:  [?12l[?25h    if exists('g:global_list')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing global list
[?25l:  [?12l[?25h    unlet g:global_list
[?25l:  [?12l[?25h    echo 'g:global_list: 0'
[?25l:  [?12l[?25h    if !exists('g:global_list')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing global dictionary
[?25l:  [?12l[?25h    let g:global_dict = {"xcord":100, "ycord":2}
[?25l:  [?12l[?25h    echo 'g:global_dict: 1'
[?25l:  [?12l[?25h    if exists('g:global_dict')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing global dictionary
[?25l:  [?12l[?25h    unlet g:global_dict
[?25l:  [?12l[?25h    echo 'g:global_dict: 0'
[?25l:  [?12l[?25h    if !exists('g:global_dict')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing global curly-brace variable
[?25l:  [?12l[?25h    let str = "global"
[?25l:  [?12l[?25h    let g:curly_{str}_var = 1
[?25l:  [?12l[?25h    echo 'g:curly_' . str . '_var: 1'
[?25l:  [?12l[?25h    if exists('g:curly_{str}_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing global curly-brace variable
[?25l:  [?12l[?25h    unlet g:curly_{str}_var
[?25l:  [?12l[?25h    echo 'g:curly_' . str . '_var: 0'
[?25l:  [?12l[?25h    if !exists('g:curly_{str}_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing window variable
[?25l:  [?12l[?25h    echo 'w:window_var: 1'
[?25l:  [?12l[?25h    let w:window_var = 1
[?25l:  [?12l[?25h    if exists('w:window_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing window variable
[?25l:  [?12l[?25h    unlet w:window_var
[?25l:  [?12l[?25h    echo 'w:window_var: 0'
[?25l:  [?12l[?25h    if !exists('w:window_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing window list
[?25l:  [?12l[?25h    let w:window_list = ["blue", "orange"]
[?25l:  [?12l[?25h    echo 'w:window_list: 1'
[?25l:  [?12l[?25h    if exists('w:window_list')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing window list
[?25l:  [?12l[?25h    unlet w:window_list
[?25l:  [?12l[?25h    echo 'w:window_list: 0'
[?25l:  [?12l[?25h    if !exists('w:window_list')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing window dictionary
[?25l:  [?12l[?25h    let w:window_dict = {"xcord":100, "ycord":2}
[?25l:  [?12l[?25h    echo 'w:window_dict: 1'
[?25l:  [?12l[?25h    if exists('w:window_dict')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing window dictionary
[?25l:  [?12l[?25h    unlet w:window_dict
[?25l:  [?12l[?25h    echo 'w:window_dict: 0'
[?25l:  [?12l[?25h    if !exists('w:window_dict')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing window curly-brace variable
[?25l:  [?12l[?25h    let str = "window"
[?25l:  [?12l[?25h    let w:curly_{str}_var = 1
[?25l:  [?12l[?25h    echo 'w:curly_' . str . '_var: 1'
[?25l:  [?12l[?25h    if exists('w:curly_{str}_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing window curly-brace variable
[?25l:  [?12l[?25h    unlet w:curly_{str}_var
[?25l:  [?12l[?25h    echo 'w:curly_' . str . '_var: 0'
[?25l:  [?12l[?25h    if !exists('w:curly_{str}_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing buffer variable
[?25l:  [?12l[?25h    echo 'b:buffer_var: 1'
[?25l:  [?12l[?25h    let b:buffer_var = 1
[?25l:  [?12l[?25h    if exists('b:buffer_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing buffer variable
[?25l:  [?12l[?25h    unlet b:buffer_var
[?25l:  [?12l[?25h    echo 'b:buffer_var: 0'
[?25l:  [?12l[?25h    if !exists('b:buffer_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing buffer list
[?25l:  [?12l[?25h    let b:buffer_list = ["blue", "orange"]
[?25l:  [?12l[?25h    echo 'b:buffer_list: 1'
[?25l:  [?12l[?25h    if exists('b:buffer_list')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing buffer list
[?25l:  [?12l[?25h    unlet b:buffer_list
[?25l:  [?12l[?25h    echo 'b:buffer_list: 0'
[?25l:  [?12l[?25h    if !exists('b:buffer_list')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing buffer dictionary
[?25l:  [?12l[?25h    let b:buffer_dict = {"xcord":100, "ycord":2}
[?25l:  [?12l[?25h    echo 'b:buffer_dict: 1'
[?25l:  [?12l[?25h    if exists('b:buffer_dict')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing buffer dictionary
[?25l:  [?12l[?25h    unlet b:buffer_dict
[?25l:  [?12l[?25h    echo 'b:buffer_dict: 0'
[?25l:  [?12l[?25h    if !exists('b:buffer_dict')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing buffer curly-brace variable
[?25l:  [?12l[?25h    let str = "buffer"
[?25l:  [?12l[?25h    let b:curly_{str}_var = 1
[?25l:  [?12l[?25h    echo 'b:curly_' . str . '_var: 1'
[?25l:  [?12l[?25h    if exists('b:curly_{str}_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing buffer curly-brace variable
[?25l:  [?12l[?25h    unlet b:curly_{str}_var
[?25l:  [?12l[?25h    echo 'b:curly_' . str . '_var: 0'
[?25l:  [?12l[?25h    if !exists('b:curly_{str}_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Script-local tests
[?25l:  [?12l[?25h    source test60.vim
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Existing Vim internal variable
[?25l:  [?12l[?25h    echo 'v:version: 1'
[?25l:  [?12l[?25h    if exists('v:version')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Non-existing Vim internal variable
[?25l:  [?12l[?25h    echo 'v:non_exists_var: 0'
[?25l:  [?12l[?25h    if !exists('v:non_exists_var')
[?25l:    [?12l[?25h[34m^I[mecho "OK"
[?25l:    [?12l[?25h    else
[?25l:    [?12l[?25h[34m^I[mecho "FAILED"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h    " Function arguments
[?25l:  [?12l[?25h    function TestFuncArg(func_arg, ...)
[?25l:    [?12l[?25h        echo 'a:func_arg: 1'
[?25l:    [?12l[?25h        if exists('a:func_arg')
[?25l:      [?12l[?25h            echo "OK"
[?25l:      [?12l[?25h        else
[?25l:      [?12l[?25h            echo "FAILED"
[?25l:      [?12l[?25h        endif
[?25l:    [?12l[?25h
[?25l:    [?12l[?25h        echo 'a:non_exists_arg: 0'
[?25l:    [?12l[?25h        if !exists('a:non_exists_arg')
[?25l:      [?12l[?25h            echo "OK"
[?25l:      [?12l[?25h        else
[?25l:      [?12l[?25h            echo "FAILED"
[?25l:      [?12l[?25h        endif
[?25l:    [?12l[?25h
[?25l:    [?12l[?25h        echo 'a:1: 1'
[?25l:    [?12l[?25h        if exists('a:1')
[?25l:      [?12l[?25h            echo "OK"
[?25l:      [?12l[?25h        else
[?25l:      [?12l[?25h            echo "FAILED"
[?25l:      [?12l[?25h        endif
[?25l:    [?12l[?25h
[?25l:    [?12l[?25h        echo 'a:2: 0'
[?25l:    [?12l[?25h        if !exists('a:2')
[?25l:      [?12l[?25h            echo "OK"
[?25l:      [?12l[?25h        else
[?25l:      [?12l[?25h            echo "FAILED"
[?25l:      [?12l[?25h        endif
[?25l:    [?12l[?25h    endfunction
[?25l:    [?12l[?25h
[?25l:    [?12l[?25h    call TestFuncArg("arg1", "arg2")
[?25l:    [?12l[?25h
[?25l:    [?12l[?25h    echo ' g:footest#x =' g:footest#x
[?25l:    [?12l[?25h    echo '   footest#F()' footest#F()
[?25l:    [?12l[?25h    echo 'UndefFun()' UndefFun()
[?25l:    [?12l[?25h
[?25l:    [?12l[?25h    redir END
[?25l:    [?12l[?25hendfunction[27m[23m[m[H[2J[?25l[1;9Hecho "OK"
    else[3;9Hecho "FAILED"
    endif[6;5H" Function arguments
    function TestFuncArg(func_arg, ...)[8;9Hecho 'a:func_arg: 1'[9;9Hif exists('a:func_arg')[10;13Hecho "OK"[11;9Helse[12;13Hecho "FAILED"[13;9Hendif[15;9Hecho 'a:non_exists_arg: 0'[16;9Hif !exists('a:non_exists_arg')[17;13Hecho "OK"[18;9Helse[19;13Hecho "FAILED"[20;9Hendif[22;9Hecho 'a:1: 1'[23;9Hif exists('a:1')[24;13Hecho "OK"[25;9Helse[26;13Hecho "FAILED"[27;9Hendif[29;9Hecho 'a:2: 0'[30;9Hif !exists('a:2')[31;13Hecho "OK"[32;9Helse[33;13Hecho "FAILED"[34;9Hendif
    endfunction[37;5Hcall TestFuncArg("arg1", "arg2")[39;5Hecho ' g:footest#x =' g:footest#x
    echo '   footest#F()' footest#F()
    echo 'UndefFun()' UndefFun()[43;5Hredir END
endfunction
:call TestExists()
:"
:delfunc TestExists
:delfunc RunTest
:delfunc TestFuncArg
:edit! test.out
:set ff=unix
:w
:qa!
:while getchar(1) | call getchar() | endwhile
ENDTEST
[?12l[?25h[?25l
:[?12l[?25hcall TestExists()[?25l#myagroup: 1[57;13H[K[57;1H
OK
#myagroup+b: 0
OK
#myagroup#BufEnter: 1
OK
#myagroup#BufEnter#*.my: 1
OK
#BufEnter: 1
OK
#BufEnter#*.my: 1
OK
#xyzagroup: 0
OK
#xyzagroup#BufEnter: 0
OK
#myagroup#CmdwinEnter: 0
OK
#myagroup#xyzacmd: 0
OK
#myagroup#BufEnter#xyzpat: 0
OK
#BufEnter#xyzpat: 0
OK
###: 0
OK
##: 0
OK
##FileReadCmd: 1
OK
##MySpecialCmd: 0
OK
&textwidth: 1
OK
&tw: 1
OK
&tw-: 0
OK
&g:errorformat: 1
OK
&l:errorformat: 1
OK
&nojoinspaces: 0
OK
&nojs: 0
OK
&myxyzoption: 0
OK
+incsearch: 1
OK
+incsearch!1: 0
OK
+is: 1
OK
+autoprint: 0
OK
$EDITOR_NAME: 1
OK
$NON_ENV_VAR: 0
OK
*bufnr: 1
OK
*bufnr(): 1
OK
*myxyzfunc: 0
OK
*bufnr&6: 0
OK
*TestExists: 1
OK
*MyxyzFunc: 0
OK
*UndefFun: 0
OK
*footest#F: 0
OK
:edit: 2
OK
:edit/a: 0
OK
:q: 1
OK
:invalidcmd: 0
OK
:MyCmd: 2
OK
:My: 3
OK
:rightbelow: 2
OK
:MyCmd: 0
OK
:My: 0
OK
local_var: 1
OK
local_var%n: 0
OK
local_var: 0
OK
footest#x: 0
OK
local_list: 1
OK
local_list[1]: 1
OK
local_list[1]+5: 0
OK
local_list[2]: 0
OK
local_list: 0
OK
local_dict: 1
OK
local_dict: 0
OK
curly_local_var: 1
OK
curly_local_var: 0
OK
g:global_var: 1
OK
g:global_var-n: 1
OK
g:global_var: 0
OK
g:global_list: 1
OK
g:global_list: 0
OK
g:global_dict: 1
OK
g:global_dict: 0
OK
g:curly_global_var: 1
OK
g:curly_global_var: 0
OK
w:window_var: 1
OK
w:window_var: 0
OK
w:window_list: 1
OK
w:window_list: 0
OK
w:window_dict: 1
OK
w:window_dict: 0
OK
w:curly_window_var: 1
OK
w:curly_window_var: 0
OK
b:buffer_var: 1
OK
b:buffer_var: 0
OK
b:buffer_list: 1
OK
b:buffer_list: 0
OK
b:buffer_dict: 1
OK
b:buffer_dict: 0
OK
b:curly_buffer_var: 1
OK
b:curly_buffer_var: 0
OK
s:script_var: 1
OK
s:script_var: 0
OK
s:script_list: 1
OK
s:script_list: 0
OK
s:script_dict: 1
OK
s:script_dict: 0
OK
s:curly_script_var: 1
OK
s:curly_script_var: 0
OK
*s:my_script_func: 1
OK
*s:my_script_func: 0
OK
v:version: 1
OK
v:non_exists_var: 0
OK
a:func_arg: 1
OK
a:non_exists_arg: 0
OK
a:1: 1
OK
a:2: 0
OK
 g:footest#x = 1
   footest#F() 0
UndefFun() 0
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[27m[23m[m[H[2J[1;9Hecho "OK"
    else[3;9Hecho "FAILED"
    endif[6;5H" Function arguments
    function TestFuncArg(func_arg, ...)[8;9Hecho 'a:func_arg: 1'[9;9Hif exists('a:func_arg')[10;13Hecho "OK"[11;9Helse[12;13Hecho "FAILED"[13;9Hendif[15;9Hecho 'a:non_exists_arg: 0'[16;9Hif !exists('a:non_exists_arg')[17;13Hecho "OK"[18;9Helse[19;13Hecho "FAILED"[20;9Hendif[22;9Hecho 'a:1: 1'[23;9Hif exists('a:1')[24;13Hecho "OK"[25;9Helse[26;13Hecho "FAILED"[27;9Hendif[29;9Hecho 'a:2: 0'[30;9Hif !exists('a:2')[31;13Hecho "OK"[32;9Helse[33;13Hecho "FAILED"[34;9Hendif
    endfunction[37;5Hcall TestFuncArg("arg1", "arg2")[39;5Hecho ' g:footest#x =' g:footest#x
    echo '   footest#F()' footest#F()
    echo 'UndefFun()' UndefFun()[43;5Hredir END
endfunction
:call TestExists()
:"
:delfunc TestExists
:delfunc RunTest
:delfunc TestFuncArg
:edit! test.out
:set ff=unix
:w
:qa!
:while getchar(1) | call getchar() | endwhile
ENDTEST
[?12l[?25h[?25l
:[?12l[?25hdelfunc TestExists[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunc RunTest[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunc TestFuncArg[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hedit! test.out[?25l"test.out" [57;12H[K[57;12H[Incomplete last line] 206 lines, 1940 characters[1;9H[K[2;1H#myagroup: 1
OK[3;9H[K[4;1H#myagroup+b: 0
OK
#myagroup#BufEnter: 1[6;22H[K[7;1HOK[7;5H[K[8;1H#myagroup#BufEnter#*.my: 1[8;27H[K[9;1HOK[9;9H[K[10;1H#BufEnter: 1[10;13H[K[11;1HOK[11;9H[K[12;1H#BufEnter#*.my: 1[12;18H[K[13;1HOK[13;9H[K[14;1H#xyzagroup: 0
OK[15;9H[K[16;1H#xyzagroup#BufEnter: 0[16;23H[K[17;1HOK[17;13H[K[18;1H#myagroup#CmdwinEnter: 0
OK[19;13H[K[20;1H#myagroup#xyzacmd: 0
OK
#myagroup#BufEnter#xyzpat: 0
OK[23;9H[K[24;1H#BufEnter#xyzpat: 0[24;20H[K[25;1HOK[25;9H[K[26;1H###: 0[26;13H[K[27;1HOK[27;9H[K[28;1H##: 0
OK[29;9H[K[30;1H##FileReadCmd: 1[30;17H[K[31;1HOK[31;13H[K[32;1H##MySpecialCmd: 0
OK[33;13H[K[34;1H&textwidth: 1
OK[35;5H[K[36;1H&tw: 1
OK[37;5H[K[38;1H&tw-: 0
OK[39;5H[K[40;1H&g:errorformat: 1[40;18H[K[41;1HOK[41;5H[K[42;1H&l:errorformat: 1
OK[43;5H[K[44;1H&nojoinspaces: 0
OK[45;3H[K[46;1H&nojs: 0
OK[47;3H[K[48;1H&myxyzoption: 0[48;16H[K[49;1HOK[49;3H[K[50;1H+incsearch: 1[50;14H[K[51;1HOK[51;3H[K[52;1H+incsearch!1: 0
OK[53;3H[K[54;1H+is: 1[54;8H[K[55;1HOK[55;3H[K[56;1H+autoprint: 0[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ff=unix[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"test.out" 206 lines, 1941 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test60 = test61; then \
#	  if diff test.out test60.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test60.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test60.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test64.failed test.ok test.out X* viminfo
cp test64.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test64.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test64.in" 654 lines, 27565 characters[1;1HTest for regexp patterns without multi-byte support.
See test95 for multi-byte tests.

A pattern that gives the expected result produces OK, so that we know it was
actually tried.

STARTTEST
:so small.vim
:" tl is a List of Lists with:
:"    regexp engine
:"    regexp pattern
:"    text to test the pattern on
:"    expected match (optional)
:"    expected submatch 1 (optional)
:"    expected submatch 2 (optional)
:"    etc.
:"  When there is no match use only the first two items.
:let tl = []
:"
:""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
:"""" Previously written tests """"""""""""""""""""""""""""""""
:""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
:"
:call add(tl, [2, 'ab', 'aab', 'ab'])
:call add(tl, [2, 'b', 'abcdef', 'b'])
:call add(tl, [2, 'bc*', 'abccccdef', 'bcccc'])
:call add(tl, [2, 'bc\{-}', 'abccccdef', 'b'])
:call add(tl, [2, 'bc\{-}\(d\)', 'abccccdef', 'bccccd', 'd'])
:call add(tl, [2, 'bc*', 'abbdef', 'b'])
:call add(tl, [2, 'c*', 'ccc', 'ccc'])
:call add(tl, [2, 'bc*', 'abdef', 'b'])
:call add(tl, [2, 'c*', 'abdef', ''])
:call add(tl, [2, 'bc\+', 'abccccdef', 'bcccc'])
:call add(tl, [2, 'bc\+', 'abdef']) "no match
:"
:"operator \|
:call add(tl, [2, 'a\|ab', 'cabd', 'a']) "alternation is ordered
:"
:call add(tl, [2, 'c\?', 'ccb', 'c'])
:call add(tl, [2, 'bc\?', 'abd', 'b'])
:call add(tl, [2, 'bc\?', 'abccd', 'bc'])
:"
:call add(tl, [2, '\va{1}', 'ab', 'a'])
:"
:call add(tl, [2, '\va{2}', 'aa', 'aa'])
:call add(tl, [2, '\va{2}', 'caad', 'aa'])
:call add(tl, [2, '\va{2}', 'aba'])
:call add(tl, [2, '\va{2}', 'ab'])
:call add(tl, [2, '\va{2}', 'abaa', 'aa'])
:call add(tl, [2, '\va{2}', 'aaa', 'aa'])
:"
:call add(tl, [2, '\vb{1}', 'abca', 'b'])
:call add(tl, [2, '\vba{2}', 'abaa', 'baa'])
:call add(tl, [2, '\vba{3}', 'aabaac'])
:"
:call add(tl, [2, '\v(ab){1}', 'ab', 'ab', 'ab'])[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for regexp patterns without multi-byte support.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[7;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 621 lines, 27090 characters written[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[8;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:put
o-1-[34m^[[m:set re=1
:call Postest()
:put
o-2-[34m^[[m:set re=2
:call Postest()
:put
:"
:" start and end of buffer
/\%^
yeGo[34m^[[mp:"
50%/\%^..
yeGo[34m^[[mpA END[34m^[[m:"
50%/\%$
"ayb20gg/..\%$
"bybGo[34m^[[m"apo[34m^[[m"bp:"
:"
:" Check for detecting error
:set regexpengine=2
:for pat in [' \ze*', ' \zs*']
:  try
:    let l = matchlist('x x', pat)
:    $put ='E888 NOT detected for ' . pat
:  catch
:    $put ='E888 detected for ' . pat
:  endtry
:endfor
:"
:""""" Write the results """""""""""""
:/\%#=1^Results/,$wq! test.out
ENDTEST

Substitute here:
<T="">Ta 5</Title>
<T="">Ac 7</Title>

Behind:
asdfasd<yyy
xxstart1
asdfasd<yy
xxxstart2
asdfasd<yy
xxstart3

Visual:
thexe the thexethe
andaxand andaxand
oooxofor foroxooo
oooxofor foroxooo

Marks:
asdfSasdfsadfEasdf
asdfSas
dfsadfEasdf

Results of test64:[31;1H[?12l[?25h
[?25l[57;1H:so! Xdotest[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" tl is a List of Lists with:[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    regexp engine[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    regexp pattern[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    text to test the pattern on[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    expected match (optional)[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    expected submatch 1 (optional)[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    expected submatch 2 (optional)[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    etc.[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"  When there is no match use only the first two items.[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet tl = [][?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Previously written tests """"""""""""""""""""""""""""""""[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'ab', 'aab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'b', 'abcdef', 'b'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'bc*', 'abccccdef', 'bcccc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'bc\{-}', 'abccccdef', 'b'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'bc\{-}\(d\)', 'abccccdef', 'bccccd', 'd'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'bc*', 'abbdef', 'b'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'c*', 'ccc', 'ccc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'bc*', 'abdef', 'b'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'c*', 'abdef', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'bc\+', 'abccccdef', 'bcccc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'bc\+', 'abdef']) "no match[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"operator \|[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\|ab', 'cabd', 'a']) "alternation is ordered[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'c\?', 'ccb', 'c'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'bc\?', 'abd', 'b'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'bc\?', 'abccd', 'bc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va{1}', 'ab', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va{2}', 'aa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va{2}', 'caad', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va{2}', 'aba'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va{2}', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va{2}', 'abaa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va{2}', 'aaa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\vb{1}', 'abca', 'b'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\vba{2}', 'abaa', 'baa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\vba{3}', 'aabaac'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){1}', 'ab', 'ab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){1}', 'dabc', 'ab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){1}', 'acb'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){0,2}', 'acb', "", ""])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){0,2}', 'ab', 'ab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){1,2}', 'ab', 'ab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){1,2}', 'ababc', 'abab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){2,4}', 'ababcab', 'abab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){2,4}', 'abcababa', 'abab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){2}', 'abab', 'abab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){2}', 'cdababe', 'abab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){2}', 'abac'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab){2}', 'abacabab', 'abab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v((ab){2}){2}', 'abababab', 'abababab', 'abab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v((ab){2}){2}', 'abacabababab', 'abababab', 'abab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{1}){1}', 'a', 'a', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{2}){1}', 'aa', 'aa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{2}){1}', 'aaac', 'aa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{2}){1}', 'daaac', 'aa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{1}){2}', 'daaac', 'aa', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{1}){2}', 'aaa', 'aa', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{2})+', 'adaac', 'aa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{2})+', 'aa', 'aa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{2}){1}', 'aa', 'aa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{1}){2}', 'aa', 'aa', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{1}){1}', 'a', 'a', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{2}){2}', 'aaaa', 'aaaa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{2}){2}', 'aaabaaaa', 'aaaa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a+){2}', 'dadaac', 'aa', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{3}){2}', 'aaaaaaa', 'aaaaaa', 'aaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{1,2}){2}', 'daaac', 'aaa', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{1,3}){2}', 'daaaac', 'aaaa', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{1,3}){2}', 'daaaaac', 'aaaaa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{1,3}){3}', 'daac'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{1,2}){2}', 'dac'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a+)+', 'daac', 'aa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a+)+', 'aaa', 'aaa', 'aaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a+){1,2}', 'aaa', 'aaa', 'aaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a+)(a+)', 'aaa', 'aaa', 'aa', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{3})+', 'daaaac', 'aaa', 'aaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a|b|c)+', 'aacb', 'aacb', 'b'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a|b|c){2}', 'abcb', 'ab', 'b'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(abc){2}', 'abcabd', ])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(abc){2}', 'abdabcabc','abcabc', 'abc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a*', 'cc', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a*)+', 'cc', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v((ab)+)+', 'ab', 'ab', 'ab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(((ab)+)+)+', 'ab', 'ab', 'ab', 'ab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(((ab)+)+)+', 'dababc', 'abab', 'abab', 'abab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{0,2})+', 'cc', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a*)+', '', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v((a*)+)+', '', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v((ab)*)+', '', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va{1,3}', 'aab', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va{2,3}', 'abaa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v((ab)+|c*)+', 'abcccaba', 'abcccab', '', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{2})|(b{3})', 'bbabbbb', 'bbb', '', 'bbb'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va{2}|b{2}', 'abab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a)+|(c)+', 'bbacbaacbbb', 'a', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\vab{2,3}c', 'aabbccccccccccccc', 'abbc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\vab{2,3}c', 'aabbbccccccccccccc', 'abbbc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\vab{2,3}cd{2,3}e', 'aabbbcddee', 'abbbcdde'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va(bc){2}d', 'aabcbfbc' ])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va*a{2}', 'a', ])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va*a{2}', 'aa', 'aa' ])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va*a{2}', 'aaa', 'aaa' ])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va*a{2}', 'bbbabcc', ])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va*b*|a*c*', 'a', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\va{1}b{1}|a{1}b{1}', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"submatches[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a)', 'ab', 'a', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a)(b)', 'ab', 'ab', 'a', 'b'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(ab)(b)(c)', 'abbc', 'abbc', 'ab', 'b', 'c'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v((a)(b))', 'ab', 'ab', 'ab', 'a', 'b'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a)|(b)', 'ab', 'a', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a*)+', 'aaaa', 'aaaa', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x', 'abcdef'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h""""" Simple tests """""""""""""""""""""""""""""""""""""""""""[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Search single groups[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'ab', 'aab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'ab', 'baced'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'ab', '                    ab           ', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Search multi-modifiers[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x*', 'xcd', 'x'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x*', 'xxxxxxxxxxxxxxxxsofijiojgf', 'xxxxxxxxxxxxxxxx'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" empty match is good[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x*', 'abcdoij', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" no match here[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x\+', 'abcdoin'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x\+', 'abcdeoijdfxxiuhfij', 'xx'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x\+', 'xxxxx', 'xxxxx'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x\+', 'abc x siufhiush xxxxxxxxx', 'x'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x\=', 'x sdfoij', 'x'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x\=', 'abc sfoij', '']) " empty match is good[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x\=', 'xxxxxxxxx c', 'x'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x\?', 'x sdfoij', 'x'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" empty match is good[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x\?', 'abc sfoij', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'x\?', 'xxxxxxxxxx c', 'x'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{0,0}', 'abcdfdoij', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" same thing as 'a?'[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{0,1}', 'asiubid axxxaaa', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" same thing as 'a\{0,1}'[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{1,0}', 'asiubid axxxaaa', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{3,6}', 'aa siofuh'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{3,6}', 'aaaaa asfoij afaa', 'aaaaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{3,6}', 'aaaaaaaa', 'aaaaaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{0}', 'asoiuj', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{2}', 'aaaa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{2}', 'iuash fiusahfliusah fiushfilushfi uhsaifuh askfj nasfvius 
[56;87Ha[57;1Hfg aaaa sfiuhuhiushf', 'aa'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, 'a\{2}', 'abcdefghijklmnopqrestuvwxyz1234567890'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" same thing as 'a*'[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{0,}', 'oij sdigfusnf', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{0,}', 'aaaaa aa', 'aaaaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{2,}', 'sdfiougjdsafg'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{2,}', 'aaaaasfoij ', 'aaaaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{5,}', 'xxaaaaxxx '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{5,}', 'xxaaaaaxxx ', 'aaaaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{,0}', 'oidfguih iuhi hiu aaaa', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{,5}', 'abcd', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{,5}', 'aaaaaaaaaa', 'aaaaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" leading star as normal char when \{} follows[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^*\{4,}$', '***'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^*\{4,}$', '****', '****'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^*\{4,}$', '*****', '*****'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" same thing as 'a*'[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{}', 'bbbcddiuhfcd', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{}', 'aaaaioudfh coisf jda', 'aaaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-0,0}', 'abcdfdoij', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" anti-greedy version of 'a?'[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-0,1}', 'asiubid axxxaaa', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-3,6}', 'aa siofuh'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-3,6}', 'aaaaa asfoij afaa', 'aaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-3,6}', 'aaaaaaaa', 'aaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-0}', 'asoiuj', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-2}', 'aaaa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-2}', 'abcdefghijklmnopqrestuvwxyz1234567890'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-0,}', 'oij sdigfusnf', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-0,}', 'aaaaa aa', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-2,}', 'sdfiougjdsafg'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-2,}', 'aaaaasfoij ', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-,0}', 'oidfguih iuhi hiu aaaa', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-,5}', 'abcd', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-,5}', 'aaaaaaaaaa', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" anti-greedy version of 'a*'[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-}', 'bbbcddiuhfcd', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-}', 'aaaaioudfh coisf jda', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test groups of characters and submatches[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(abc\)*', 'abcabcabc', 'abcabcabc', 'abc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(ab\)\+', 'abababaaaaa', 'ababab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(abaaaaa\)*cd', 'cd', 'cd', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(test1\)\? \(test2\)\?', 'test1 test3', 'test1 ', 'test1', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(test1\)\= \(test2\) \(test4443\)\=', ' test2 test4443 yupiiiiiiii
[56;87Hi[57;1Hii', ' test2 test4443', '', 'test2', 'test4443'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, '\(\(sub1\) hello \(sub 2\)\)', 'asterix sub1 hello sub 2 obelix', '
[56;87Hs[57;1Hub1 hello sub 2', 'sub1 hello sub 2', 'sub1', 'sub 2'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, '\(\(\(yyxxzz\)\)\)', 'abcdddsfiusfyyzzxxyyxxzz', 'yyxxzz', 'yyxxzz'
[56;87H,[57;1H 'yyxxzz', 'yyxxzz'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, '\v((ab)+|c+)+', 'abcccaba', 'abcccab', 'ab', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v((ab)|c*)+', 'abcccaba', 'abcccab', '', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a(c*)+b)+', 'acbababaaa', 'acbabab', 'ab', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a|b*)+', 'aaaa', 'aaaa', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\p*', 'aá [34m^I[m', 'aá '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test greedy-ness and lazy-ness[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-2,7}','aaaaaaaaaaaaa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{-2,7}x','aaaaaaaaax', 'aaaaaaax'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{2,7}','aaaaaaaaaaaaaaaaaaaa', 'aaaaaaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\{2,7}x','aaaaaaaaax', 'aaaaaaax'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\vx(.{-,8})yz(.*)','xayxayzxayzxayz','xayxayzxayzxayz','ayxa','xayz
[56;87Hx[57;1Hayz'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, '\vx(.*)yz(.*)','xayxayzxayzxayz','xayxayzxayzxayz', 'ayxayzxayzxa',
[56;87H'[57;1H'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{1,2}){-2,3}','aaaaaaa','aaaa','aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a{-1,3})+', 'aa', 'aa', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^\s\{-}\zs\( x\|x$\)', ' x', ' x', ' x'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^\s\{-}\zs\(x\| x$\)', ' x', ' x', ' x'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^\s\{-}\ze\(x\| x$\)', ' x', '', ' x'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^\(\s\{-}\)\(x\| x$\)', ' x', ' x', '', ' x'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test Character classes[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\d\+e\d\d','test 10e23 fd','10e23'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test collections and character range [][?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v[a]', 'abcd', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a[bcd]', 'abcd', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a[b-d]', 'acbd', 'ac'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[a-d][e-f][x-x]d', 'cexdxx', 'cexd'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v[[:alpha:]]+', 'abcdefghijklmnopqrstuvwxyz6','abcdefghijklmnopqrs
[56;87Ht[57;1Huvwxyz'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, '[[:alpha:]\+]', '6x8','x'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^abc]\+','abcabcabc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^abc]','defghiasijvoinasoiunbvb','d'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^abc]\+','ddddddda','ddddddd'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^a-d]\+','aaaAAAZIHFNCddd','AAAZIHFNC'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[a-f]*','iiiiiiii',''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[a-f]*','abcdefgh','abcdef'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^a-f]\+','abcdefgh','gh'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[a-c]\{-3,6}','abcabc','abc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^[:alpha:]]\+','abcccadfoij7787ysf287yrnccdu','7787'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[-a]', '-', '-'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[a-]', '-', '-'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[a-f]*\c','ABCDEFGH','ABCDEF'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[abc][xyz]\c','-af-AF-BY--','BY'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" filename regexp[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[-./[:alnum:]_~]\+', 'log13.file', 'log13.file'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" special chars[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[\]\^\-\\]\+', '\^\\\-\---^', '\^\\\-\---^'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" collation elem[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[[.a.]]\+', 'aa', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" middle of regexp[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'abc[0-9]*ddd', 'siuhabc ii'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'abc[0-9]*ddd', 'adf abc44482ddd oijs', 'abc44482ddd'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\_[0-9]\+', 'asfi9888u', '9888'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[0-9\n]\+', 'asfi9888u', '9888'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\_[0-9]\+', "asfi\n9888u", "\n9888"])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\_f', "  \na ", "\n"])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\_f\+', "  \na ", "\na"])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[0-9A-Za-z-_.]\+', " @0_a.A-{ ", "0_a.A-"])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Test start/end of line, start/end of file[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^a.', "a_\nb ", "a_"])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^a.', "b a \na_"])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '.a$', " a\n "])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '.a$', " a b\n_a", "_a"])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%^a.', "a a\na", "a "])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%^a', " a \na "])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '.a\%$', " a\n "])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '.a\%$', " a\n_a", "_a"])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Test recognition of character classes[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[0-7]\+', 'x0123456789x', '01234567'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^0-7]\+', '0a;X+% 897', 'a;X+% 89'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[0-9]\+', 'x0123456789x', '0123456789'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^0-9]\+', '0a;X+% 9', 'a;X+% '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[0-9a-fA-F]\+', 'x0189abcdefg', '0189abcdef'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^0-9A-Fa-f]\+', '0189g;X+% ab', 'g;X+% '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[a-z_A-Z0-9]\+', ';+aso_SfOij ', 'aso_SfOij'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^a-z_A-Z0-9]\+', 'aSo_;+% sfOij', ';+% '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[a-z_A-Z]\+', '0abyz_ABYZ;', 'abyz_ABYZ'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^a-z_A-Z]\+', 'abAB_09;+% yzYZ', '09;+% '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[a-z]\+', '0abcxyz1', 'abcxyz'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[a-z]\+', 'AabxyzZ', 'abxyz'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^a-z]\+', 'a;X09+% x', ';X09+% '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^a-z]\+', 'abX0;%yz', 'X0;%'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[a-zA-Z]\+', '0abABxzXZ9', 'abABxzXZ'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^a-zA-Z]\+', 'ab09_;+ XZ', '09_;+ '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[A-Z]\+', 'aABXYZz', 'ABXYZ'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^A-Z]\+', 'ABx0;%YZ', 'x0;%'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[a-z]\+\c', '0abxyzABXYZ;', 'abxyzABXYZ'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[A-Z]\+\c', '0abABxzXZ9', 'abABxzXZ'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\c[^a-z]\+', 'ab09_;+ XZ', '09_;+ '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\c[^A-Z]\+', 'ab09_;+ XZ', '09_;+ '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\C[^A-Z]\+', 'ABCOIJDEOIFNSD jsfoij sa', ' jsfoij sa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Tests for \z features[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" match ends at \ze[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'xx \ze test', 'xx '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'abc\zeend', 'oij abcend', 'abc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'aa\zebb\|aaxx', ' aabb ', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'aa\zebb\|aaxx', ' aaxx ', 'aaxx'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'aabb\|aa\zebb', ' aabb ', 'aabb'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'aa\zebb\|aaebb', ' aabb ', 'aa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" match starts at \zs[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'abc\zsdd', 'ddabcddxyzt', 'dd'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'aa \zsax', ' ax'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'abc \zsmatch\ze abc', 'abc abc abc match abc abc', 'match'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a \zsif .*){2}', 'a if then a if last', 'if last', 'a if last'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\>\zs.', 'aword. ', '.'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\s\+\ze\[/\|\s\zs\s\+', 'is   [a t', '  '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Tests for \@= and \& features[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'abc\@=', 'abc', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'abc\@=cd', 'abcd', 'abcd'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'abc\@=', 'ababc', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" will never match, no matter the input text[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'abcd\@=e', 'abcd'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" will never match[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'abcd\@=e', 'any text in here ... '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(abc)@=..', 'xabcd', 'ab', 'abc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(.*John\)\@=.*Bob', 'here is John, and here is B'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(John.*\)\@=.*Bob', 'John is Bobs friend', 'John is Bob', 'John is
Bobs friend'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, '\<\S\+\())\)\@=', '$((i=i+1))', 'i=i+1', '))'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '.*John\&.*Bob', 'here is John, and here is B'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '.*John\&.*Bob', 'John is Bobs friend', 'John is Bob'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(test1)@=.*yep', 'this is a test1, yep it is', 'test1, yep', 'tes
[56;87Ht[57;1H1'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, 'foo\(bar\)\@!', 'foobar'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'foo\(bar\)\@!', 'foo bar', 'foo'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'if \(\(then\)\@!.\)*$', ' if then else'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'if \(\(then\)\@!.\)*$', ' if else ', 'if else ', ' '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(foo\)\@!bar', 'foobar', 'bar'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(foo\)\@!...bar', 'foobar'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^\%(.*bar\)\@!.*\zsfoo', ' bar foo '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^\%(.*bar\)\@!.*\zsfoo', ' foo bar '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^\%(.*bar\)\@!.*\zsfoo', ' foo xxx ', 'foo'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[ ]\@!\p\%([ ]\@!\p\)*:', 'implicit mappings:', 'mappings:'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[ ]\@!\p\([ ]\@!\p\)*:', 'implicit mappings:', 'mappings:', 's'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'm\k\+_\@=\%(_\@!\k\)\@<=\k\+e', 'mx__xe', 'mx__xe'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%(\U\@<=S\k*\|S\l\)R', 'SuR', 'SuR'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Combining different tests and features[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[[:alpha:]]\{-2,6}', '787abcdiuhsasiuhb4', 'ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '', 'abcd', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(())', 'any possible text', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v%(ab(xyz)c)', '   abxyzc ', 'abxyzc', 'xyz'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(test|)empty', 'tesempty', 'empty', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v(a|aa)(a|aa)', 'aaa', 'aa', 'a', 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" \%u and friends[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%d32', 'yes no', ' '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%o40', 'yes no', ' '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%x20', 'yes no', ' '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%u0020', 'yes no', ' '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%U00000020', 'yes no', ' '])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%d0', "yes\x0ano", "\x0a"])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h""""" \%[abc][?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'foo\%[bar]', 'fobar'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'foo\%[bar]', 'foobar', 'foobar'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'foo\%[bar]', 'fooxx', 'foo'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'foo\%[bar]', 'foobxx', 'foob'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'foo\%[bar]', 'foobaxx', 'fooba'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'foo\%[bar]', 'foobarxx', 'foobar'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'foo\%[bar]x', 'foobxx', 'foobx'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'foo\%[bar]x', 'foobarxx', 'foobarx'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%[bar]x', 'barxx', 'barx'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%[bar]x', 'bxx', 'bx'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%[bar]x', 'xxx', 'x'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'b\%[[ao]r]', 'bar bor', 'bar'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'b\%[[]]r]', 'b]r bor', 'b]r'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '@\%[\w\-]*', '<http://john.net/pandoc/>[@pandoc]', '@pandoc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Alternatives, must use first longest match[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'goo\|go', 'google', 'goo'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\<goo\|\<go', 'google', 'goo'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\<goo\|go', 'google', 'goo'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Back references[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(\i\+\) \1', ' abc abc', 'abc abc', 'abc'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(\i\+\) \1', 'xgoo goox', 'goo goo', 'goo'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(a\)\(b\)\(c\)\(dd\)\(e\)\(f\)\(g\)\(h\)\(i\)\1\2\3\4\5\6\7\8\9', 
[56;87H'[57;1Hxabcddefghiabcddefghix', 'abcddefghiabcddefghi', 'a', 'b', 'c', 'dd', 'e', 'f', 'g', '
[56;87Hh[57;1H', 'i'])[?25l[1;1H[2L[1;1H:put
o-1-[34m^[[m:set re=1[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, '\(\d*\)a \1b', ' a b ', 'a b', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^.\(.\).\_..\1.', "aaa\naaa\nb", "aaa\naaa", 'a'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^.*\.\(.*\)/.\+\(\1\)\@<!$', 'foo.bat/foo.com', 'foo.bat/foo.com', 
[56;87H'[57;1Hbat'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, '^.*\.\(.*\)/.\+\(\1\)\@<!$', 'foo.bat/foo.bat'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^.*\.\(.*\)/.\+\(\1\)\@<=$', 'foo.bat/foo.bat', 'foo.bat/foo.bat', 
[56;87H'[57;1Hbat', 'bat'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, '\\\@<!\${\(\d\+\%(:.\{-}\)\?\\\@<!\)}', '2013-06-27${0}', '${0}', '
[56;87H0[57;1H'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall add(tl, [2, '^\(a*\)\1$', 'aaaaaaaa', 'aaaaaaaa', 'aaaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^\(a\{-2,}\)\1\+$', 'aaaaaaaaa', 'aaaaaaaaa', 'aaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Look-behind with limit[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '<\@<=span.', 'xxspanxx<spanyyy', 'spany'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '<\@1<=span.', 'xxspanxx<spanyyy', 'spany'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '<\@2<=span.', 'xxspanxx<spanyyy', 'spany'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(<<\)\@<=span.', 'xxspanxxxx<spanxx<<spanyyy', 'spany', '<<'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(<<\)\@1<=span.', 'xxspanxxxx<spanxx<<spanyyy'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(<<\)\@2<=span.', 'xxspanxxxx<spanxx<<spanyyy', 'spany', '<<'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(foo\)\@<!bar.', 'xx foobar1 xbar2 xx', 'bar2'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" look-behind match in front of a zero-width item[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v\C%(<Last Changed:\s+)@<=.*$', '" test header'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v\C%(<Last Changed:\s+)@<=.*$', '" Last Changed: 1970', '1970'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(foo\)\@<=\>', 'foobar'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(foo\)\@<=\>', 'barfoo', '', 'foo'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(foo\)\@<=.*', 'foobar', 'bar', 'foo'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" complicated look-behind match[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(r\@<=\|\w\@<!\)\/', 'x = /word/;', '/'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^[a-z]\+\ze \&\(asdf\)\@<!', 'foo bar', 'foo'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h""""" \@>[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(a*\)\@>a', 'aaaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(a*\)\@>b', 'aaab', 'aaab', 'aaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^\(.\{-}b\)\@>.', '  abcbd', '  abc', '  ab'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(.\{-}\)\(\)\@>$', 'abc', 'abc', 'abc', ''])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" TODO: BT engine does not restore submatch after failure[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [1, '\(a*\)\@>a\|a\+', 'aaaa', 'aaaa'])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" "\_" prepended negated collection matches EOL[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\_[^8-9]\+', "asfi\n9888", "asfi\n"])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\_[^a]\+', "asfi\n9888", "sfi\n9888"])[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Requiring lots of states.[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}', " 123456
[56;87H7[57;1H8-1234-1234-1234-123456789012 ", "12345678-1234-1234-1234-123456789012", "1234-"])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Skip adding state twice[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=', "#if FOO", "#if", 
[56;87H'[57;1H FOO'])[?25l[1;1H[L[1;1H:put[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h""" Test \%V atom[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\%>70vGesamt', 'Jean-Michel Charlier & Victor Hubinon\Gesamtausgabe
[Salleck]    Buck Danny {Jean-Michel Charlier & Victor Hubinon}\Gesamtausgabe', 'Gesam
[56;87Ht[57;1H'])[?25l[1;1H[2L[1;1H:put
o-1-[34m^[[m:set re=1[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Run the tests[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor t in tl[?25l
:  [?12l[?25h:  let re = t[0]
[?25l:  [?12l[?25h:  let pat = t[1]
[?25l:  [?12l[?25h:  let text = t[2]
[?25l:  [?12l[?25h:  let matchidx = 3
[?25l:  [?12l[?25h:  for engine in [0, 1, 2]
[?25l:    [?12l[?25h:    if engine == 2 && re == 0 || engine == 1 && re == 1
[?25l:      [?12l[?25h:      continue
[?25l:      [?12l[?25h:    endif
[?25l:    [?12l[?25h:    let &regexpengine = engine
[?25l:    [?12l[?25h:    try
[?25l:      [?12l[?25h:      let l = matchlist(text, pat)
[?25l:      [?12l[?25h:    catch
[?25l:      [?12l[?25h:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\
[56;87H"[57;1H, caused an exception: \"' . v:exception . '\"'
[?25l:      [?12l[?25h:    endtry
[?25l:    [?12l[?25h:" check the match itself
[?25l:    [?12l[?25h:    if len(l) == 0 && len(t) > matchidx
[?25l:      [?12l[?25h:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\
[56;87H"[57;1H, did not match, expected: \"' . t[matchidx] . '\"'
[?25l:      [?12l[?25h:    elseif len(l) > 0 && len(t) == matchidx
[?25l:      [?12l[?25h:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\
[56;87H"[57;1H, match: \"' . l[0] . '\", expected no match'
[?25l:      [?12l[?25h:    elseif len(t) > matchidx && l[0] != t[matchidx]
[?25l:      [?12l[?25h:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\
[56;87H"[57;1H, match: \"' . l[0] . '\", expected: \"' . t[matchidx] . '\"'
[?25l:      [?12l[?25h:    else
[?25l:      [?12l[?25h:      $put ='OK ' . engine . ' - ' . pat
[?25l:      [?12l[?25h:    endif
[?25l:    [?12l[?25h:    if len(l) > 0
[?25l:      [?12l[?25h:"   check all the nine submatches
[?25l:      [?12l[?25h:      for i in range(1, 9)
[?25l:[8C[?12l[?25h:        if len(t) <= matchidx + i
[?25l:[10C[?12l[?25h:          let e = ''
[?25l:[10C[?12l[?25h:        else
[?25l:[10C[?12l[?25h:          let e = t[matchidx + i]
[?25l:[10C[?12l[?25h:        endif
[?25l:[8C[?12l[?25h:        if l[i] != e
[?25l:[10C[?12l[?25h:          $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . t
[56;87He[57;1Hxt . '\", submatch ' . i . ': \"' . l[i] . '\", expected: \"' . e . '\"'
[?25l:[10C[?12l[?25h:        endif
[?25l:[8C[?12l[?25h:      endfor
[?25l:      [?12l[?25h:      unlet i
[?25l:      [?12l[?25h:    endif
[?25l:    [?12l[?25h:  endfor
[?25l:  [?12l[?25h:endfor[1;1H[45L[?25l[1;1HOK 0 - \(<<\)\@2<=span.
OK 1 - \(<<\)\@2<=span.
OK 2 - \(<<\)\@2<=span.
OK 0 - \(foo\)\@<!bar.
OK 1 - \(foo\)\@<!bar.
OK 2 - \(foo\)\@<!bar.
OK 0 - \v\C%(<Last Changed:\s+)@<=.*$
OK 1 - \v\C%(<Last Changed:\s+)@<=.*$
OK 2 - \v\C%(<Last Changed:\s+)@<=.*$
OK 0 - \v\C%(<Last Changed:\s+)@<=.*$
OK 1 - \v\C%(<Last Changed:\s+)@<=.*$
OK 2 - \v\C%(<Last Changed:\s+)@<=.*$
OK 0 - \(foo\)\@<=\>
OK 1 - \(foo\)\@<=\>
OK 2 - \(foo\)\@<=\>
OK 0 - \(foo\)\@<=\>
OK 1 - \(foo\)\@<=\>
OK 2 - \(foo\)\@<=\>
OK 0 - \(foo\)\@<=.*
OK 1 - \(foo\)\@<=.*
OK 2 - \(foo\)\@<=.*
OK 0 - \(r\@<=\|\w\@<!\)\/
OK 1 - \(r\@<=\|\w\@<!\)\/
OK 2 - \(r\@<=\|\w\@<!\)\/
OK 0 - ^[a-z]\+\ze \&\(asdf\)\@<!
OK 1 - ^[a-z]\+\ze \&\(asdf\)\@<!
OK 2 - ^[a-z]\+\ze \&\(asdf\)\@<!
OK 0 - \(a*\)\@>a
OK 1 - \(a*\)\@>a
OK 2 - \(a*\)\@>a
OK 0 - \(a*\)\@>b
OK 1 - \(a*\)\@>b
OK 2 - \(a*\)\@>b
OK 0 - ^\(.\{-}b\)\@>.
OK 1 - ^\(.\{-}b\)\@>.
OK 2 - ^\(.\{-}b\)\@>.
OK 0 - \(.\{-}\)\(\)\@>$
OK 1 - \(.\{-}\)\(\)\@>$
OK 2 - \(.\{-}\)\(\)\@>$
OK 0 - \(a*\)\@>a\|a\+
OK 2 - \(a*\)\@>a\|a\+
OK 0 - \_[^8-9]\+
OK 1 - \_[^8-9]\+
OK 2 - \_[^8-9]\+
OK 0 - \_[^a]\+
OK 1 - \_[^a]\+[46;16H[K[47;1HOK 2 - \_[^a]\+[47;16H[K[48;1HOK 0 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 1 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 2 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 0 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 1 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 2 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 0 - \%>70vGesamt
OK 1 - \%>70vGesamt
OK 2 - \%>70vGesamt[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet t tl e l[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""""" multi-line tests """"""""""""""""""""[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet tl = [][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" back references[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '^.\(.\).\_..\1.', ['aaa', 'aaa', 'b'], ['XX', 'b']])[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\v.*\/(.*)\n.*\/\1$', ['./Dir1/Dir2/zyxwvuts.txt', './Dir1/Dir2/abc
[56;87Hd[57;1Hefgh.bat', '', './Dir1/Dir2/file1.txt', './OtherDir1/OtherDir2/file1.txt'], ['./Dir1/D
[56;87Hi[57;1Hr2/zyxwvuts.txt', './Dir1/Dir2/abcdefgh.bat', '', 'XX']])[?25l[1;1H[2L[1;1HOK 0 - \(<<\)\@2<=span.
OK 1 - \(<<\)\@2<=span.[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" line breaks[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\S.*\nx', ['abc', 'def', 'ghi', 'xjk', 'lmn'], ['abc', 'def', 'XXjk
[56;87H'[57;1H, 'lmn']])[?25l[1;1H[L[1;1HOK 0 - \(<<\)\@2<=span.[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Check that \_[0-9] matching EOL does not break a following \>[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3
[56;87H\[57;1H}\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>', ['', 'localnet/192.168.0
[56;87H.[57;1H1', ''], ['', 'localnet/XX', '']])[?25l[1;1H[2L[1;1HOK 0 - \(<<\)\@2<=span.
OK 1 - \(<<\)\@2<=span.[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Check a pattern with a line break and ^ and $[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\n^b$\n^c', ['a', 'b', 'c'], ['XX']])[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\(^.\+\n\)\1', [' dog', ' dog', 'asdf'], ['XXasdf']])[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Run the multi-line tests[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='multi-line tests'[?25l[1;56r[56;1H
[1;57r[56;1Hmulti-line tests[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hfor t in tl[?25l
:  [?12l[?25h:  let re = t[0]
[?25l:  [?12l[?25h:  let pat = t[1]
[?25l:  [?12l[?25h:  let before = t[2]
[?25l:  [?12l[?25h:  let after = t[3]
[?25l:  [?12l[?25h:  for engine in [0, 1, 2]
[?25l:    [?12l[?25h:    if engine == 2 && re == 0 || engine == 1 && re ==1
[?25l:      [?12l[?25h:      continue
[?25l:      [?12l[?25h:    endif
[?25l:    [?12l[?25h:    let &regexpengine = engine
[?25l:    [?12l[?25h:    new
[?25l:    [?12l[?25h:    call setline(1, before)
[?25l:    [?12l[?25h:    exe '%s/' . pat . '/XX/'
[?25l:    [?12l[?25h:    let result = getline(1, '$')
[?25l:    [?12l[?25h:    q!
[?25l:    [?12l[?25h:    if result != after
[?25l:      [?12l[?25h:      $put ='ERROR: pat: \"' . pat . '\", text: \"' . string(before) . '\", ex
[56;87Hp[57;1Hected: \"' . string(after) . '\", got: \"' . string(result) . '\"'
[?25l:      [?12l[?25h:    else
[?25l:      [?12l[?25h:      $put ='OK ' . engine . ' - ' . pat
[?25l:      [?12l[?25h:    endif
[?25l:    [?12l[?25h:  endfor
[?25l:  [?12l[?25h:endfor[1;1H[22L[?25l[1;1HOK 1 - \(r\@<=\|\w\@<!\)\/
OK 2 - \(r\@<=\|\w\@<!\)\/
OK 0 - ^[a-z]\+\ze \&\(asdf\)\@<!
OK 1 - ^[a-z]\+\ze \&\(asdf\)\@<!
OK 2 - ^[a-z]\+\ze \&\(asdf\)\@<!
OK 0 - \(a*\)\@>a
OK 1 - \(a*\)\@>a
OK 2 - \(a*\)\@>a
OK 0 - \(a*\)\@>b
OK 1 - \(a*\)\@>b
OK 2 - \(a*\)\@>b
OK 0 - ^\(.\{-}b\)\@>.
OK 1 - ^\(.\{-}b\)\@>.
OK 2 - ^\(.\{-}b\)\@>.
OK 0 - \(.\{-}\)\(\)\@>$
OK 1 - \(.\{-}\)\(\)\@>$
OK 2 - \(.\{-}\)\(\)\@>$
OK 0 - \(a*\)\@>a\|a\+
OK 2 - \(a*\)\@>a\|a\+
OK 0 - \_[^8-9]\+
OK 1 - \_[^8-9]\+
OK 2 - \_[^8-9]\+
OK 0 - \_[^a]\+[23;16H[K[24;4H1 - \_[^a[24;16H[K[25;4H2 - \_[^a[25;16H[K[26;4H0 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 1 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 2 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 0 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 1 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 2 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 0 - \%>70vGesamt
OK 1 - \%>70vGesamt[33;20H[K[34;4H2 - \%>70vGesamt[34;20H[K[35;1Hmulti-line tests[35;17H[K[36;8H^.\(.\).\_..\1.[36;23H[K[37;8H^.\(.\).\_..\1.[37;23H[K[38;8H^.\(.\).\_..\1.[38;23H[K[39;9Hv.*\/(.*)\n.*\/\1$
OK 1 - \v.*\/(.*)\n.*\/\1$
OK 2 - \v.*\/(.*)\n.*\/\1$
OK 0 - \S.*\nx[42;15H[K[43;4H1 - \S.*\nx[43;15H[K[44;4H2 - \S.*\nx[44;15H[K[45;4H0 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][46;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 1 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][48;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>[48;48H[K[49;8H\<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][50;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>[50;48H[K[51;4H0 - a\n^b$\n^c[51;18H[K[52;4H1 - a\n^b$\n^c[52;18H[K[53;4H2 - a\n^b$\n^c[53;18H[K[54;4H0 - \(^.\+\n\)\1
OK 1 - \(^.\+\n\)\1
OK 2 - \(^.\+\n\)\1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet t tl[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Check that using a pattern on two lines doesn't get messed up by using[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" matchstr() with \ze in between.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset re=0[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^Substitute here[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H:call Postest()
:put
:"
:" start and end of buffer
/\%^
yeGo[34m^[[mp:"
50%/\%^..
yeGo[34m^[[mpA END[34m^[[m:"
50%/\%$
"ayb20gg/..\%$
"bybGo[34m^[[m"apo[34m^[[m"bp:"
:"
:" Check for detecting error
:set regexpengine=2
:for pat in [' \ze*', ' \zs*']
:  try
:    let l = matchlist('x x', pat)
:    $put ='E888 NOT detected for ' . pat
:  catch
:    $put ='E888 detected for ' . pat
:  endtry
:endfor
:"
:""""" Write the results """""""""""""
:/\%#=1^Results/,$wq! test.out
ENDTEST

Substitute here:
<T="">Ta 5</Title>
<T="">Ac 7</Title>

Behind:
asdfasd<yyy
xxstart1
asdfasd<yy
xxxstart2
asdfasd<yy
xxstart3

Visual:
thexe the thexethe
andaxand andaxand
oooxofor foroxooo
oooxofor foroxooo

Marks:
asdfSasdfsadfEasdf
asdfSas
dfsadfEasdf

Results of test64:
OK 0 - ab
OK 1 - ab
OK 2 - ab
OK 0 - b
OK 1 - b
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h.+1,.+2s/""/\='"'.matchstr(getline("."), '\d\+\ze<').'"'[?25l[29;5H5">Ta 5</Title>
<T="7">Ac 7</Title>[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^Substitute here[?25l[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h.+1,.+2yank[?25l[28;1H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1HOK 1 - \(r\@<=\|\w\@<!\)\/
OK 2 - \(r\@<=\|\w\@<!\)\/
OK 0 - ^[a-z]\+\ze \&\(asdf\)\@<!
OK 1 - ^[a-z]\+\ze \&\(asdf\)\@<!
OK 2 - ^[a-z]\+\ze \&\(asdf\)\@<!
OK 0 - \(a*\)\@>a
OK 1 - \(a*\)\@>a
OK 2 - \(a*\)\@>a
OK 0 - \(a*\)\@>b
OK 1 - \(a*\)\@>b
OK 2 - \(a*\)\@>b
OK 0 - ^\(.\{-}b\)\@>.
OK 1 - ^\(.\{-}b\)\@>.
OK 2 - ^\(.\{-}b\)\@>.
OK 0 - \(.\{-}\)\(\)\@>$
OK 1 - \(.\{-}\)\(\)\@>$
OK 2 - \(.\{-}\)\(\)\@>$
OK 0 - \(a*\)\@>a\|a\+
OK 2 - \(a*\)\@>a\|a\+
OK 0 - \_[^8-9]\+
OK 1 - \_[^8-9]\+
OK 2 - \_[^8-9]\+
OK 0 - \_[^a]\+
OK 1 - \_[^a]\+
OK 2 - \_[^a]\+
OK 0 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 1 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 2 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 0 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 1 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 2 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 0 - \%>70vGesamt
OK 1 - \%>70vGesamt
OK 2 - \%>70vGesamt
multi-line tests
OK 0 - ^.\(.\).\_..\1.
OK 1 - ^.\(.\).\_..\1.
OK 2 - ^.\(.\).\_..\1.
OK 0 - \v.*\/(.*)\n.*\/\1$
OK 1 - \v.*\/(.*)\n.*\/\1$
OK 2 - \v.*\/(.*)\n.*\/\1$
OK 0 - \S.*\nx
OK 1 - \S.*\nx
OK 2 - \S.*\nx
OK 0 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][46;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 1 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][48;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 2 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][50;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 0 - a\n^b$\n^c
OK 1 - a\n^b$\n^c
OK 2 - a\n^b$\n^c
OK 0 - \(^.\+\n\)\1
OK 1 - \(^.\+\n\)\1
OK 2 - \(^.\+\n\)\1[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H<T="5">Ta 5</Title>[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Check a pattern with a look beind crossing a line boundary[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^Behind:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H/\%^
yeGo[34m^[[mp:"
50%/\%^..
yeGo[34m^[[mpA END[34m^[[m:"
50%/\%$
"ayb20gg/..\%$
"bybGo[34m^[[m"apo[34m^[[m"bp:"
:"
:" Check for detecting error
:set regexpengine=2
:for pat in [' \ze*', ' \zs*']
:  try
:    let l = matchlist('x x', pat)
:    $put ='E888 NOT detected for ' . pat
:  catch
:    $put ='E888 detected for ' . pat
:  endtry
:endfor
:"
:""""" Write the results """""""""""""
:/\%#=1^Results/,$wq! test.out
ENDTEST

Substitute here:
<T="5">Ta 5</Title>
<T="7">Ac 7</Title>

Behind:
asdfasd<yyy
xxstart1
asdfasd<yy
xxxstart2
asdfasd<yy
xxstart3

Visual:
thexe the thexethe
andaxand andaxand
oooxofor foroxooo
oooxofor foroxooo

Marks:
asdfSasdfsadfEasdf
asdfSas
dfsadfEasdf

Results of test64:
OK 0 - ab
OK 1 - ab
OK 2 - ab
OK 0 - b
OK 1 - b
OK 2 - b
OK 0 - bc*
OK 1 - bc*
OK 2 - bc*
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/[?12l[?25h\(<\_[xy]\+\)\@3<=start[?25l[34;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.yank[?25l[34;3H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1HOK 1 - ^[a-z]\+\ze \&\(asdf\)\@<!
OK 2 - ^[a-z]\+\ze \&\(asdf\)\@<!
OK 0 - \(a*\)\@>a
OK 1 - \(a*\)\@>a
OK 2 - \(a*\)\@>a
OK 0 - \(a*\)\@>b
OK 1 - \(a*\)\@>b
OK 2 - \(a*\)\@>b
OK 0 - ^\(.\{-}b\)\@>.
OK 1 - ^\(.\{-}b\)\@>.
OK 2 - ^\(.\{-}b\)\@>.
OK 0 - \(.\{-}\)\(\)\@>$
OK 1 - \(.\{-}\)\(\)\@>$
OK 2 - \(.\{-}\)\(\)\@>$
OK 0 - \(a*\)\@>a\|a\+
OK 2 - \(a*\)\@>a\|a\+
OK 0 - \_[^8-9]\+
OK 1 - \_[^8-9]\+
OK 2 - \_[^8-9]\+
OK 0 - \_[^a]\+
OK 1 - \_[^a]\+
OK 2 - \_[^a]\+
OK 0 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 1 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 2 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 0 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 1 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 2 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 0 - \%>70vGesamt
OK 1 - \%>70vGesamt
OK 2 - \%>70vGesamt
multi-line tests
OK 0 - ^.\(.\).\_..\1.
OK 1 - ^.\(.\).\_..\1.
OK 2 - ^.\(.\).\_..\1.
OK 0 - \v.*\/(.*)\n.*\/\1$
OK 1 - \v.*\/(.*)\n.*\/\1$
OK 2 - \v.*\/(.*)\n.*\/\1$
OK 0 - \S.*\nx
OK 1 - \S.*\nx
OK 2 - \S.*\nx
OK 0 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][43;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 1 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][45;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 2 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][47;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 0 - a\n^b$\n^c
OK 1 - a\n^b$\n^c
OK 2 - a\n^b$\n^c
OK 0 - \(^.\+\n\)\1
OK 1 - \(^.\+\n\)\1
OK 2 - \(^.\+\n\)\1

<T="5">Ta 5</Title>
<T="7">Ac 7</Title>[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hxxstart3[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Check matching Visual area[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^Visual:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H:" Check for detecting error
:set regexpengine=2
:for pat in [' \ze*', ' \zs*']
:  try
:    let l = matchlist('x x', pat)
:    $put ='E888 NOT detected for ' . pat
:  catch
:    $put ='E888 detected for ' . pat
:  endtry
:endfor
:"
:""""" Write the results """""""""""""
:/\%#=1^Results/,$wq! test.out
ENDTEST

Substitute here:
<T="5">Ta 5</Title>
<T="7">Ac 7</Title>

Behind:
asdfasd<yyy
xxstart1
asdfasd<yy
xxxstart2
asdfasd<yy
xxstart3

Visual:
thexe the thexethe
andaxand andaxand
oooxofor foroxooo
oooxofor foroxooo

Marks:
asdfSasdfsadfEasdf
asdfSas
dfsadfEasdf

Results of test64:
OK 0 - ab
OK 1 - ab
OK 2 - ab
OK 0 - b
OK 1 - b
OK 2 - b
OK 0 - bc*
OK 1 - bc*
OK 2 - bc*
OK 0 - bc\{-}
OK 1 - bc\{-}
OK 2 - bc\{-}
OK 0 - bc\{-}\(d\)
OK 1 - bc\{-}\(d\)
OK 2 - bc\{-}\(d\)
OK 0 - bc*
OK 1 - bc*
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h
[mthe[?25l[?12l[?25h[?25l[7mxe the the[?12l[?25h[?25l[m[57;1H[K[57;1H:'<,'>[?12l[?25hs/\%Ve/E/g[?25l3 substitutions on 1 line[29;4HxE thE thE[?12l[?25h
[?25la[7mndaxand andaxand [?12l[?25h[?25l[m[57;1H[K[57;1H:'<,'>[?12l[?25hs/\%Va/A/g[?25l6 substitutions on 1 line[30;1HAndAxAnd AndAxAnd[30;18H[K[30;1H[?12l[?25h
ooo[?25l[?12l[?25h[?25l[7mxofor foro[?12l[?25h[?25lx
[mooo[7mxofor foro[?12l[?25h[?25l[m[57;1H[K[57;1H:'<,'>[?12l[?25hs/\%Vo/O/g[?25l8 substitutions on 2 lines[31;4HxOfOr fOrOx
oooxOfOr fOrO[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^Visual/+1,/^Visual/+4yank[?25l[31msearch hit BOTTOM, continuing at TOP[m4 lines yanked[57;15H[K[32;1H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1HOK 0 - \(a*\)\@>a
OK 1 - \(a*\)\@>a
OK 2 - \(a*\)\@>a
OK 0 - \(a*\)\@>b
OK 1 - \(a*\)\@>b
OK 2 - \(a*\)\@>b
OK 0 - ^\(.\{-}b\)\@>.
OK 1 - ^\(.\{-}b\)\@>.
OK 2 - ^\(.\{-}b\)\@>.
OK 0 - \(.\{-}\)\(\)\@>$
OK 1 - \(.\{-}\)\(\)\@>$
OK 2 - \(.\{-}\)\(\)\@>$
OK 0 - \(a*\)\@>a\|a\+
OK 2 - \(a*\)\@>a\|a\+
OK 0 - \_[^8-9]\+
OK 1 - \_[^8-9]\+
OK 2 - \_[^8-9]\+
OK 0 - \_[^a]\+
OK 1 - \_[^a]\+
OK 2 - \_[^a]\+
OK 0 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 1 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 2 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 0 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 1 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 2 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 0 - \%>70vGesamt
OK 1 - \%>70vGesamt
OK 2 - \%>70vGesamt
multi-line tests
OK 0 - ^.\(.\).\_..\1.
OK 1 - ^.\(.\).\_..\1.
OK 2 - ^.\(.\).\_..\1.
OK 0 - \v.*\/(.*)\n.*\/\1$
OK 1 - \v.*\/(.*)\n.*\/\1$
OK 2 - \v.*\/(.*)\n.*\/\1$
OK 0 - \S.*\nx
OK 1 - \S.*\nx
OK 2 - \S.*\nx
OK 0 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][41;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 1 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][43;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 2 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][45;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 0 - a\n^b$\n^c
OK 1 - a\n^b$\n^c
OK 2 - a\n^b$\n^c
OK 0 - \(^.\+\n\)\1
OK 1 - \(^.\+\n\)\1
OK 2 - \(^.\+\n\)\1

<T="5">Ta 5</Title>
<T="7">Ac 7</Title>

xxstart3[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
4 more lines[1;56r[56;1H
[1;57r[56;1HthexE thE thExethe[57;1H[K[57;1H4 more lines[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Check matching marks[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^Marks:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H:  catch
:    $put ='E888 detected for ' . pat
:  endtry
:endfor
:"
:""""" Write the results """""""""""""
:/\%#=1^Results/,$wq! test.out
ENDTEST

Substitute here:
<T="5">Ta 5</Title>
<T="7">Ac 7</Title>

Behind:
asdfasd<yyy
xxstart1
asdfasd<yy
xxxstart2
asdfasd<yy
xxstart3

Visual:
thexE thE thExethe
AndAxAnd AndAxAnd
oooxOfOr fOrOxooo
oooxOfOr fOrOxooo

Marks:
asdfSasdfsadfEasdf
asdfSas
dfsadfEasdf

Results of test64:
OK 0 - ab
OK 1 - ab
OK 2 - ab
OK 0 - b
OK 1 - b
OK 2 - b
OK 0 - bc*
OK 1 - bc*
OK 2 - bc*
OK 0 - bc\{-}
OK 1 - bc\{-}
OK 2 - bc\{-}
OK 0 - bc\{-}\(d\)
OK 1 - bc\{-}\(d\)
OK 2 - bc\{-}\(d\)
OK 0 - bc*
OK 1 - bc*
OK 2 - bc*
OK 0 - c*
OK 1 - c*
OK 2 - c*
OK 0 - bc*
OK 1 - bc*
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h
[masdf[9C[?25l[57;1H[K[57;1H:[?12l[?25h.-4,.+6s/.\%>'s.*\%<'e../here/[?25l[29;5Hhereasdf[29;13H[K[29;1H[?12l[?25h
asdf
dfsadfsadf[?25l[57;1H[K[57;1H:[?12l[?25h.-4,.+6s/.\%>'s\_.*\%<'e../again/[?25l[30;56r[56;1H
[1;57r[30;1Hasdfagainasdf[56;1HOK 2 - bc*[57;1H[K[30;1H[?12l[?25h[?25l[57;1H:[?12l[?25h/^Marks:/+1,/^Marks:/+3yank[?25l[31msearch hit BOTTOM, continuing at TOP[m3 lines yanked[57;15H[K[30;1H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1HOK 2 - \(a*\)\@>b
OK 0 - ^\(.\{-}b\)\@>.
OK 1 - ^\(.\{-}b\)\@>.
OK 2 - ^\(.\{-}b\)\@>.
OK 0 - \(.\{-}\)\(\)\@>$
OK 1 - \(.\{-}\)\(\)\@>$
OK 2 - \(.\{-}\)\(\)\@>$
OK 0 - \(a*\)\@>a\|a\+
OK 2 - \(a*\)\@>a\|a\+
OK 0 - \_[^8-9]\+
OK 1 - \_[^8-9]\+
OK 2 - \_[^8-9]\+
OK 0 - \_[^a]\+
OK 1 - \_[^a]\+
OK 2 - \_[^a]\+
OK 0 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 1 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 2 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 0 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 1 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 2 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 0 - \%>70vGesamt
OK 1 - \%>70vGesamt
OK 2 - \%>70vGesamt
multi-line tests
OK 0 - ^.\(.\).\_..\1.
OK 1 - ^.\(.\).\_..\1.
OK 2 - ^.\(.\).\_..\1.
OK 0 - \v.*\/(.*)\n.*\/\1$
OK 1 - \v.*\/(.*)\n.*\/\1$
OK 2 - \v.*\/(.*)\n.*\/\1$
OK 0 - \S.*\nx
OK 1 - \S.*\nx
OK 2 - \S.*\nx
OK 0 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][36;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 1 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][38;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 2 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][40;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 0 - a\n^b$\n^c
OK 1 - a\n^b$\n^c
OK 2 - a\n^b$\n^c
OK 0 - \(^.\+\n\)\1
OK 1 - \(^.\+\n\)\1
OK 2 - \(^.\+\n\)\1

<T="5">Ta 5</Title>
<T="7">Ac 7</Title>

xxstart3

thexE thE thExethe
AndAxAnd AndAxAnd
oooxOfOr fOrOxooo
oooxOfOr fOrOxooo[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
3 more lines[1;56r[56;1H
[1;57r[56;1Hasdfhereasdf[57;1H[K[57;1H3 more lines[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Check patterns matching cursor position.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunc! Postest()[?25l
:  [?12l[?25h new
[?25l:  [?12l[?25h call setline(1, ['ffooooo', 'boboooo', 'zoooooo', 'koooooo', 'moooooo', "\t\t\tfoo
[56;87H"[57;1H, 'abababababababfoo', 'bababababababafoo', '********_', '        xxxxxxxxxxxx    xxxx
xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx xx xxxx xxxxxxxx xxxx xxxxxx
[56;87Hx[57;1Hxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxx xxxxxx
[56;87Hx[57;1Hx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxxxxxxx xx xxx
[56;87Hx[57;1Hx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxxx  xxxxxxx
[56;87Hx[57;1Hxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx xxx xxxxxx xxxxx xxxxx xx xx
[56;87Hx[57;1Hxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx xxxxx xxx xxxxxxx xxxxxxxxxx
[56;87Hx[57;1Hxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxxx xxxxx'])
[?25l:  [?12l[?25h call setpos('.', [0, 1, 0, 0])
[?25l:  [?12l[?25h s/\%>3c.//g
[?25l:  [?12l[?25h call setpos('.', [0, 2, 4, 0])
[?25l:  [?12l[?25h s/\%#.*$//g
[?25l:  [?12l[?25h call setpos('.', [0, 3, 0, 0])
[?25l:  [?12l[?25h s/\%<3c./_/g
[?25l:  [?12l[?25h %s/\%4l\%>5c./_/g
[?25l:  [?12l[?25h %s/\%6l\%>25v./_/g
[?25l:  [?12l[?25h %s/\%>6l\%3c./!/g
[?25l:  [?12l[?25h %s/\%>7l\%12c./?/g
[?25l:  [?12l[?25h %s/\%>7l\%<9l\%>5v\%<8v./#/g
[?25l:  [?12l[?25h $s/\%(|\u.*\)\@<=[^|\t]\+$//ge
[?25l:  [?12l[?25h 1,$yank
[?25l:  [?12l[?25h quit!
[?25l:  [?12l[?25hendfunc[1;1H[25L[?25l[1;1HOK 1 - ^\(.\{-}b\)\@>.
OK 2 - ^\(.\{-}b\)\@>.
OK 0 - \(.\{-}\)\(\)\@>$
OK 1 - \(.\{-}\)\(\)\@>$
OK 2 - \(.\{-}\)\(\)\@>$
OK 0 - \(a*\)\@>a\|a\+
OK 2 - \(a*\)\@>a\|a\+
OK 0 - \_[^8-9]\+
OK 1 - \_[^8-9]\+
OK 2 - \_[^8-9]\+
OK 0 - \_[^a]\+
OK 1 - \_[^a]\+
OK 2 - \_[^a]\+
OK 0 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 1 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 2 - [0-9a-zA-Z]\{8}-\([0-9a-zA-Z]\{4}-\)\{3}[0-9a-zA-Z]\{12}
OK 0 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 1 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 2 - ^\%(\%(^\s*#\s*if\>\|#\s*if\)\)\(\%>1c.*$\)\@=
OK 0 - \%>70vGesamt
OK 1 - \%>70vGesamt
OK 2 - \%>70vGesamt
multi-line tests
OK 0 - ^.\(.\).\_..\1.
OK 1 - ^.\(.\).\_..\1.[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hasdfagainasdf
[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H-0-[?12l[?25h[?25l
:[?12l[?25hset re=0[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Postest()[?25l4 substitutions on 4 lines
10 lines yanked
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hput[?25l10 more lines
[32mPress ENTER or type command to continue[?12l[?25h[m[1;1H[3L[?25l[1;1HOK 1 - \%>70vGesamt
OK 2 - \%>70vGesamt
multi-line tests
OK 0 - ^.\(.\).\_..\1.
OK 1 - ^.\(.\).\_..\1.
OK 2 - ^.\(.\).\_..\1.
OK 0 - \v.*\/(.*)\n.*\/\1$
OK 1 - \v.*\/(.*)\n.*\/\1$
OK 2 - \v.*\/(.*)\n.*\/\1$
OK 0 - \S.*\nx[10;15H[K[11;4H1 - \S.*\nx[11;15H[K[12;4H2 - \S.*\nx[12;15H[K[13;4H0 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][14;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>[14;48H[K[15;8H\<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][16;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>[16;48H[K[17;4H2 - \<\(\(25\_[0-5]\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\.\)\{3\}\(25\_[0-5]][18;1H\|2\_[0-4]\_[0-9]\|\_[01]\?\_[0-9]\_[0-9]\?\)\>
OK 0 - a\n^b$\n^c[19;18H[K[20;1HOK 1 - a\n^b$\n^c
OK 2 - a\n^b$\n^c[21;18H[K[22;4H0 - \(^.\+\n\)\1[22;20H[K[23;4H1 - \(^.\+\n\)\1[23;20H[K[24;4H2 - \(^.\+\n\)\1[24;20H[K[25;1H[K[26;1H<T="5">Ta 5</Title>[26;20H[K[27;1H<T="7">Ac 7</Title>[28;1H[K[29;1Hxxstart3[29;9H[K[30;1H[K[31;1HthexE thE thExethe[31;19H[K[32;1HAndAxAnd AndAxAnd[32;18H[K[33;1HoooxOfOr fOrOxooo[33;18H[K[34;1HoooxOfOr fOrOxooo[34;18H[K[35;1H[K[36;1Hasdfhereasdf[36;13H[K[37;1Hasdfagainasdf[37;14H[K[38;1H[K[39;1H-0-[39;4H[K[40;1Hffo[40;4H[K[41;1Hbob[41;4H[K[42;1H__ooooo
koooo__[43;8H[K[44;1Hmoooooo[44;8H[K[45;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_[48;11H[K[49;1H  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [50;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[51;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [52;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[53;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [54;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [55;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[56;1Hxx xxxxx[57;1H[K[49;3H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H-1-[?12l[?25h[?25l
:[?12l[?25hset re=1[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Postest()[?25l4 substitutions on 4 lines
10 lines yanked
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hput[?25l10 more lines
[32mPress ENTER or type command to continue[?12l[?25h[m[1;1H[3L[?25l[1;1HOK 0 - a\n^b$\n^c
OK 1 - a\n^b$\n^c
OK 2 - a\n^b$\n^c
OK 0 - \(^.\+\n\)\1[4;20H[K[5;4H1 - \(^.\+\n\)\1[5;20H[K[6;4H2 - \(^.\+\n\)\1[6;20H[K[7;1H[K[8;1H<T="5">Ta 5</Title>[8;20H[K[9;1H<T="7">Ac 7</Title>[10;1H[K[11;1Hxxstart3[11;9H[K[12;1H[K[13;1HthexE thE thExethe[13;19H[K[14;1HAndAxAnd AndAxAnd[14;18H[K[15;1HoooxOfOr fOrOxooo[15;18H[K[16;1HoooxOfOr fOrOxooo[16;18H[K[17;1H[K[18;1Hasdfhereasdf[18;13H[K[19;1Hasdfagainasdf[19;14H[K[20;1H[K[21;1H-0-[21;4H[K[22;1Hffo[22;4H[K[23;1Hbob[23;4H[K[24;1H__ooooo
koooo__[25;8H[K[26;1Hmoooooo[26;8H[K[27;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_[30;11H[K[31;1H  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [32;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[33;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [34;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[35;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [36;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [37;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[38;1Hxx xxxxx
-1-
ffo
bob[41;4H[K[42;1H__ooooo
koooo__
moooooo[44;25H[K[45;1H                 [7Cf__
ab!bababababab
ba!ab##abab?bafoo
**!*****_[48;10H[K[49;1H  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx [24Cxxxx xxxxx [7C  [50;1Hxx xxxx [9Cx[12Cxxx xxx xxx[8Cxxxxxx xx xxxxxx [10C xxxxxxxxxxx[51;1Hxxxxxx xxxxxxxxx  xxx xxx[9Cxxxxxx xxxx xxx x[11C [13Cxxxxx xxxx  [52;1Hxxxxxxxxx xx[7Cxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[53;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx [7C xxx xxx [15Cx  xxxx  [54;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx x[10Cx xxxx xx[7C xxxxxx xxxxxx  [55;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[56;1Hxx xxxxx[57;1H[K[49;3H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H-2-[?12l[?25h[?25l
:[?12l[?25hset re=2[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Postest()[?25l4 substitutions on 4 lines
10 lines yanked
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hput[?25l10 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[3L[1;1Hasdfagainasdf

-0-
ffo[4;4H[K[5;1Hbob[5;4H[K[6;1H__ooooo
koooo__[7;8H[K[8;1Hmoooooo[8;8H[K[9;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_[12;11H[K[13;1H  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [14;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[15;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [16;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[17;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [18;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [19;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[20;1Hxx xxxxx
-1-
ffo
bob[23;4H[K[24;1H__ooooo
koooo__
moooooo[26;25H[K[27;1H                 [7Cf__
ab!bababababab
ba!ab##abab?bafoo
**!*****_[30;10H[K[31;1H  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx [24Cxxxx xxxxx [7C  [32;1Hxx xxxx [9Cx[12Cxxx xxx xxx[8Cxxxxxx xx xxxxxx [10C xxxxxxxxxxx[33;1Hxxxxxx xxxxxxxxx  xxx xxx[9Cxxxxxx xxxx xxx x[11C [13Cxxxxx xxxx  [34;1Hxxxxxxxxx xx[7Cxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[35;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx [7C xxx xxx [15Cx  xxxx  [36;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx x[10Cx xxxx xx[7C xxxxxx xxxxxx  [37;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[38;1Hxx xxxxx
-2-
ffo
bob[41;4H[K[42;1H__ooooo
koooo__
moooooo[44;25H[K[45;1H                 [7Cf__
ab!bababababab
ba!ab##abab?bafoo
**!*****_[48;10H[K[49;1H  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx [24Cxxxx xxxxx [7C  [50;1Hxx xxxx [9Cx[12Cxxx xxx xxx[8Cxxxxxx xx xxxxxx [10C xxxxxxxxxxx[51;1Hxxxxxx xxxxxxxxx  xxx xxx[9Cxxxxxx xxxx xxx x[11C [13Cxxxxx xxxx  [52;1Hxxxxxxxxx xx[7Cxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[53;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx [7C xxx xxx [15Cx  xxxx  [54;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx x[10Cx xxxx xx[7C xxxxxx xxxxxx  [55;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[56;1Hxx xxxxx[57;1H[K[49;3H[?12l[?25h[?25l[57;1H:[?12l[?25h" start and end of buffer[?25l[49;3H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\%^[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1HTest for regexp patterns without multi-byte support.
See test95 for multi-byte tests.

A pattern that gives the expected result produces OK, so that we know it was
actually tried.

STARTTEST
:so small.vim
:" tl is a List of Lists with:
:"    regexp engine
:"    regexp pattern
:"    text to test the pattern on
:"    expected match (optional)
:"    expected submatch 1 (optional)
:"    expected submatch 2 (optional)
:"    etc.
:"  When there is no match use only the first two items.
:let tl = []
:"
:""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
:"""" Previously written tests """"""""""""""""""""""""""""""""
:""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
:"
:call add(tl, [2, 'ab', 'aab', 'ab'])
:call add(tl, [2, 'b', 'abcdef', 'b'])
:call add(tl, [2, 'bc*', 'abccccdef', 'bcccc'])
:call add(tl, [2, 'bc\{-}', 'abccccdef', 'b'])
:call add(tl, [2, 'bc\{-}\(d\)', 'abccccdef', 'bccccd', 'd'])
:call add(tl, [2, 'bc*', 'abbdef', 'b'])
:call add(tl, [2, 'c*', 'ccc', 'ccc'])
:call add(tl, [2, 'bc*', 'abdef', 'b'])
:call add(tl, [2, 'c*', 'abdef', ''])
:call add(tl, [2, 'bc\+', 'abccccdef', 'bcccc'])
:call add(tl, [2, 'bc\+', 'abdef']) "no match
:"
:"operator \|
:call add(tl, [2, 'a\|ab', 'cabd', 'a']) "alternation is ordered
:"
:call add(tl, [2, 'c\?', 'ccb', 'c'])
:call add(tl, [2, 'bc\?', 'abd', 'b'])
:call add(tl, [2, 'bc\?', 'abccd', 'bc'])
:"
:call add(tl, [2, '\va{1}', 'ab', 'a'])
:"
:call add(tl, [2, '\va{2}', 'aa', 'aa'])
:call add(tl, [2, '\va{2}', 'caad', 'aa'])
:call add(tl, [2, '\va{2}', 'aba'])
:call add(tl, [2, '\va{2}', 'ab'])
:call add(tl, [2, '\va{2}', 'abaa', 'aa'])
:call add(tl, [2, '\va{2}', 'aaa', 'aa'])
:"
:call add(tl, [2, '\vb{1}', 'abca', 'b'])
:call add(tl, [2, '\vba{2}', 'abaa', 'baa'])
:call add(tl, [2, '\vba{3}', 'aabaac'])
:"
:call add(tl, [2, '\v(ab){1}', 'ab', 'ab', 'ab'])
[31msearch hit BOTTOM, continuing at TOP[1;1H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1Hasdfagainasdf

-0-
ffo
bob
__ooooo
koooo__
moooooo[9;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [14;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[15;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [16;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[17;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [18;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [19;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[20;1Hxx xxxxx
-1-
ffo
bob
__ooooo
koooo__
moooooo[27;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [32;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[33;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [34;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[35;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [36;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [37;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[38;1Hxx xxxxx
-2-
ffo
bob
__ooooo
koooo__
moooooo[45;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [50;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[51;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [52;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[53;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [54;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [55;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[56;1Hxx xxxxx[49;3H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25lTest[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;4H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1HOK 1 - \v(a|b|c)+
OK 2 - \v(a|b|c)+
OK 0 - \v(a|b|c){2}
OK 1 - \v(a|b|c){2}
OK 2 - \v(a|b|c){2}
OK 0 - \v(abc){2}
OK 1 - \v(abc){2}
OK 2 - \v(abc){2}
OK 0 - \v(abc){2}
OK 1 - \v(abc){2}
OK 2 - \v(abc){2}
OK 0 - a*
OK 1 - a*
OK 2 - a*
OK 0 - \v(a*)+
OK 1 - \v(a*)+
OK 2 - \v(a*)+
OK 0 - \v((ab)+)+
OK 1 - \v((ab)+)+
OK 2 - \v((ab)+)+
OK 0 - \v(((ab)+)+)+
OK 1 - \v(((ab)+)+)+
OK 2 - \v(((ab)+)+)+
OK 0 - \v(((ab)+)+)+
OK 1 - \v(((ab)+)+)+
OK 2 - \v(((ab)+)+)+
OK 0 - \v(a{0,2})+
OK 1 - \v(a{0,2})+
OK 2 - \v(a{0,2})+
OK 0 - \v(a*)+
OK 1 - \v(a*)+
OK 2 - \v(a*)+
OK 0 - \v((a*)+)+
OK 1 - \v((a*)+)+
OK 2 - \v((a*)+)+
OK 0 - \v((ab)*)+
OK 1 - \v((ab)*)+
OK 2 - \v((ab)*)+
OK 0 - \va{1,3}
OK 1 - \va{1,3}
OK 2 - \va{1,3}
OK 0 - \va{2,3}
OK 1 - \va{2,3}
OK 2 - \va{2,3}
OK 0 - \v((ab)+|c*)+
OK 1 - \v((ab)+|c*)+
OK 2 - \v((ab)+|c*)+
OK 0 - \v(a{2})|(b{3})
OK 1 - \v(a{2})|(b{3})
OK 2 - \v(a{2})|(b{3})
OK 0 - \va{2}|b{2}
OK 1 - \va{2}|b{2}
OK 2 - \va{2}|b{2}
OK 0 - \v(a)+|(c)+
OK 1 - \v(a)+|(c)+
OK 2 - \v(a)+|(c)+[28;1H[?12l[?25h[?25l[57;1H/[?12l[?25h\%^..[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1HTest for regexp patterns without multi-byte support.
See test95 for multi-byte tests.

A pattern that gives the expected result produces OK, so that we know it was
actually tried.

STARTTEST
:so small.vim
:" tl is a List of Lists with:
:"    regexp engine
:"    regexp pattern
:"    text to test the pattern on
:"    expected match (optional)
:"    expected submatch 1 (optional)
:"    expected submatch 2 (optional)
:"    etc.
:"  When there is no match use only the first two items.
:let tl = []
:"
:""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
:"""" Previously written tests """"""""""""""""""""""""""""""""
:""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
:"
:call add(tl, [2, 'ab', 'aab', 'ab'])
:call add(tl, [2, 'b', 'abcdef', 'b'])
:call add(tl, [2, 'bc*', 'abccccdef', 'bcccc'])
:call add(tl, [2, 'bc\{-}', 'abccccdef', 'b'])
:call add(tl, [2, 'bc\{-}\(d\)', 'abccccdef', 'bccccd', 'd'])
:call add(tl, [2, 'bc*', 'abbdef', 'b'])
:call add(tl, [2, 'c*', 'ccc', 'ccc'])
:call add(tl, [2, 'bc*', 'abdef', 'b'])
:call add(tl, [2, 'c*', 'abdef', ''])
:call add(tl, [2, 'bc\+', 'abccccdef', 'bcccc'])
:call add(tl, [2, 'bc\+', 'abdef']) "no match
:"
:"operator \|
:call add(tl, [2, 'a\|ab', 'cabd', 'a']) "alternation is ordered
:"
:call add(tl, [2, 'c\?', 'ccb', 'c'])
:call add(tl, [2, 'bc\?', 'abd', 'b'])
:call add(tl, [2, 'bc\?', 'abccd', 'bc'])
:"
:call add(tl, [2, '\va{1}', 'ab', 'a'])
:"
:call add(tl, [2, '\va{2}', 'aa', 'aa'])
:call add(tl, [2, '\va{2}', 'caad', 'aa'])
:call add(tl, [2, '\va{2}', 'aba'])
:call add(tl, [2, '\va{2}', 'ab'])
:call add(tl, [2, '\va{2}', 'abaa', 'aa'])
:call add(tl, [2, '\va{2}', 'aaa', 'aa'])
:"
:call add(tl, [2, '\vb{1}', 'abca', 'b'])
:call add(tl, [2, '\vba{2}', 'abaa', 'baa'])
:call add(tl, [2, '\vba{3}', 'aabaac'])
:"
:call add(tl, [2, '\v(ab){1}', 'ab', 'ab', 'ab'])
[31msearch hit BOTTOM, continuing at TOP[1;1H[?12l[?25h[?25l[27m[23m[m[H[2J[2;1H-0-
ffo
bob
__ooooo
koooo__
moooooo[8;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [13;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[14;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [15;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[16;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [17;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [18;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[19;1Hxx xxxxx
-1-
ffo
bob
__ooooo
koooo__
moooooo[26;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [31;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[32;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [33;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[34;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [35;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [36;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[37;1Hxx xxxxx
-2-
ffo
bob
__ooooo
koooo__
moooooo[44;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [49;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[50;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [51;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[52;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [53;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [54;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[55;1Hxx xxxxx
Test[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25lTest[?12l[?25h[?25lt END[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;8H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1HOK 2 - \v(a|b|c)+
OK 0 - \v(a|b|c){2}
OK 1 - \v(a|b|c){2}
OK 2 - \v(a|b|c){2}
OK 0 - \v(abc){2}
OK 1 - \v(abc){2}
OK 2 - \v(abc){2}
OK 0 - \v(abc){2}
OK 1 - \v(abc){2}
OK 2 - \v(abc){2}
OK 0 - a*
OK 1 - a*
OK 2 - a*
OK 0 - \v(a*)+
OK 1 - \v(a*)+
OK 2 - \v(a*)+
OK 0 - \v((ab)+)+
OK 1 - \v((ab)+)+
OK 2 - \v((ab)+)+
OK 0 - \v(((ab)+)+)+
OK 1 - \v(((ab)+)+)+
OK 2 - \v(((ab)+)+)+
OK 0 - \v(((ab)+)+)+
OK 1 - \v(((ab)+)+)+
OK 2 - \v(((ab)+)+)+
OK 0 - \v(a{0,2})+
OK 1 - \v(a{0,2})+
OK 2 - \v(a{0,2})+
OK 0 - \v(a*)+
OK 1 - \v(a*)+
OK 2 - \v(a*)+
OK 0 - \v((a*)+)+
OK 1 - \v((a*)+)+
OK 2 - \v((a*)+)+
OK 0 - \v((ab)*)+
OK 1 - \v((ab)*)+
OK 2 - \v((ab)*)+
OK 0 - \va{1,3}
OK 1 - \va{1,3}
OK 2 - \va{1,3}
OK 0 - \va{2,3}
OK 1 - \va{2,3}
OK 2 - \va{2,3}
OK 0 - \v((ab)+|c*)+
OK 1 - \v((ab)+|c*)+
OK 2 - \v((ab)+|c*)+
OK 0 - \v(a{2})|(b{3})
OK 1 - \v(a{2})|(b{3})
OK 2 - \v(a{2})|(b{3})
OK 0 - \va{2}|b{2}
OK 1 - \va{2}|b{2}
OK 2 - \va{2}|b{2}
OK 0 - \v(a)+|(c)+
OK 1 - \v(a)+|(c)+
OK 2 - \v(a)+|(c)+
OK 0 - \vab{2,3}c[28;1H[?12l[?25h[?25l[57;1H/[?12l[?25h\%$[?25l[27m[23m[m[H[2J[1;1H-0-
ffo
bob
__ooooo
koooo__
moooooo[7;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [12;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[13;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [14;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[15;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [16;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [17;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[18;1Hxx xxxxx
-1-
ffo
bob
__ooooo
koooo__
moooooo[25;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [30;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[31;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [32;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[33;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [34;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [35;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[36;1Hxx xxxxx
-2-
ffo
bob
__ooooo
koooo__
moooooo[43;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [48;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[49;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [50;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[51;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [52;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [53;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[54;1Hxx xxxxx
Test
Test END[?12l[?25h[?25l[27m[23m[m[H[2J[1;1HTest for regexp patterns without multi-byte support.
See test95 for multi-byte tests.

A pattern that gives the expected result produces OK, so that we know it was
actually tried.

STARTTEST
:so small.vim
:" tl is a List of Lists with:
:"    regexp engine
:"    regexp pattern
:"    text to test the pattern on
:"    expected match (optional)
:"    expected submatch 1 (optional)
:"    expected submatch 2 (optional)
:"    etc.
:"  When there is no match use only the first two items.
:let tl = []
:"
:""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
:"""" Previously written tests """"""""""""""""""""""""""""""""
:""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
:"
:call add(tl, [2, 'ab', 'aab', 'ab'])
:call add(tl, [2, 'b', 'abcdef', 'b'])
:call add(tl, [2, 'bc*', 'abccccdef', 'bcccc'])
:call add(tl, [2, 'bc\{-}', 'abccccdef', 'b'])
:call add(tl, [2, 'bc\{-}\(d\)', 'abccccdef', 'bccccd', 'd'])
:call add(tl, [2, 'bc*', 'abbdef', 'b'])
:call add(tl, [2, 'c*', 'ccc', 'ccc'])
:call add(tl, [2, 'bc*', 'abdef', 'b'])
:call add(tl, [2, 'c*', 'abdef', ''])
:call add(tl, [2, 'bc\+', 'abccccdef', 'bcccc'])
:call add(tl, [2, 'bc\+', 'abdef']) "no match
:"
:"operator \|
:call add(tl, [2, 'a\|ab', 'cabd', 'a']) "alternation is ordered
:"
:call add(tl, [2, 'c\?', 'ccb', 'c'])
:call add(tl, [2, 'bc\?', 'abd', 'b'])
:call add(tl, [2, 'bc\?', 'abccd', 'bc'])
:"
:call add(tl, [2, '\va{1}', 'ab', 'a'])
:"
:call add(tl, [2, '\va{2}', 'aa', 'aa'])
:call add(tl, [2, '\va{2}', 'caad', 'aa'])
:call add(tl, [2, '\va{2}', 'aba'])
:call add(tl, [2, '\va{2}', 'ab'])
:call add(tl, [2, '\va{2}', 'abaa', 'aa'])
:call add(tl, [2, '\va{2}', 'aaa', 'aa'])
:"
:call add(tl, [2, '\vb{1}', 'abca', 'b'])
:call add(tl, [2, '\vba{2}', 'abaa', 'baa'])
:call add(tl, [2, '\vba{3}', 'aabaac'])
:"
:call add(tl, [2, '\v(ab){1}', 'ab', 'ab', 'ab'])[20;1H[?12l[?25h[?25l[57;1H/[?12l[?25h..\%$[?25l[27m[23m[m[H[2J[1;1H-0-
ffo
bob
__ooooo
koooo__
moooooo[7;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [12;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[13;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [14;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[15;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [16;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [17;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[18;1Hxx xxxxx
-1-
ffo
bob
__ooooo
koooo__
moooooo[25;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [30;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[31;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [32;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[33;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [34;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [35;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[36;1Hxx xxxxx
-2-
ffo
bob
__ooooo
koooo__
moooooo[43;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [48;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[49;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [50;1Hxxxxxxxxx xxxxxxxxxxx xx xxxxx xxx xxxxxxxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx x xxxxxxxxx[51;1Hx xx xxxxxx xxxxxxx  xxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxx xxx xxxxxxxx xxxxxxx  xxxx  [52;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [53;1Hxxxxx xxx xxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxx  xxxxxxxxxx xxxx xx xxxxxxxx xxx xxxxxxxxxx[54;1Hxx xxxxx
Test
Test END[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25lEN[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25lE[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Check for detecting error[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset regexpengine=2[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor pat in [' \ze*', ' \zs*'][?25l
:  [?12l[?25h:  try
[?25l:    [?12l[?25h:    let l = matchlist('x x', pat)
[?25l:    [?12l[?25h:    $put ='E888 NOT detected for ' . pat
[?25l:    [?12l[?25h:  catch
[?25l:    [?12l[?25h:    $put ='E888 detected for ' . pat
[?25l:    [?12l[?25h:  endtry
[?25l:  [?12l[?25h:endfor[1;1H[7L[?25l[1;1Hkoooo__
moooooo[3;25Hf__
ab!babababababfoo
ba!ab##abab?bafoo
**!*****_
  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [8;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[9;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [10;1Hxxxxxxxxx xxxxxxx[7C xxxxx xxx xxxxxxxx xxxxxx xxx x[9Cx[12C [7Cxx[11;1Hx xx xxxxxx xxxxxxx  x[8Cx[8C xxxxxxx xxxxxxx xxx xxx xxxxxxxx [7C  xxxx  [12;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [13;1Hxxxxx xxx xxxxxxx xxx[13C xxxxxxxxx  xx[7Cx xxxx xx [7Cx xxx xxxxxxxxxx[14;1Hxx x[14;9H[K[15;1H-1-[15;4H[K[16;1Hffo[16;4H[K[17;1Hbob
__ooooo
koooo__
mo
       [17Cf__
ab!babababababfoo
ba!ab##abab?bafoo[23;25H[K[24;1H**!*****_[24;10H[K[25;1H  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [26;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[27;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [28;1Hxxxxxxxxx xxxxxxx[7C xxxxx xxx xxxxxxxx xxxxxx xxx x[9Cx[12C [7Cxx[29;1Hx xx xxxxxx xxxxxxx  x[8Cx[8C xxxxxxx xxxxxxx xxx xxx xxxxxxxx [7C  xxxx  [30;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [31;1Hxxxxx xxx xxxxxxx xxx[13C xxxxxxxxx  xx[7Cx xxxx xx [7Cx xxx xxxxxxxxxx[32;1Hxx x[32;9H[K[33;1H-2-[33;4H[K[34;1Hffo[34;4H[K[35;1Hbob
__ooooo
koooo__
mo
       [17Cf__
ab!babababababfoo
ba!ab##abab?bafoo[41;25H[K[42;1H**!*****_[42;10H[K[43;1H  !     xxx?xxxxxxxx    xxxx xxxxxx xxxxxxx x xxxxxxxxx xx xxxxxx xxxxxx xxxxx xxxxxxx  [44;1Hxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xxxxxxx xxxxxxxxx xx xxxxxx xx xxxxxxx xxxxxxxxxxx[45;1Hxxxxxx xxxxxxxxx  xxx xxxxxxxx xxxxxxxxx xxxx xxx xxxx xxx xxx xxxxx xxxxxxxxxxxx xxxx  [46;1Hxxxxxxxxx xxxxxxx[7C xxxxx xxx xxxxxxxx xxxxxx xxx x[9Cx[12C [7Cxx[47;1Hx xx xxxxxx xxxxxxx  x[8Cx[8C xxxxxxx xxxxxxx xxx xxx xxxxxxxx [7C  xxxx  [48;1Hxxx xxxxxx xxxxx xxxxx xx xxxxxx xxxxxxx xxx xxxxxxxxxxxx xxxx xxxxxxxxx xxxxxx xxxxxx  [49;1Hxxxxx xxx xxxxxxx xxx[13C xxxxxxxxx  xx[7Cx xxxx xx [7Cx xxx xxxxxxxxxx[50;1Hxx x[50;9H[K[51;1HTest[51;5H[K[52;1HTest END
EN[53;3H[K[54;1HE[54;2H[K[55;2H888 detected for  \ze*
E888 detected for  \zs*[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h""""" Write the results """""""""""""[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/\%#=1^Results/,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 1107 lines, 22167 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test64 = test61; then \
#	  if diff test.out test64.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test64.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test64.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test65.failed test.ok test.out X* viminfo
cp test65.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test65.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test65.in" 95 lines, 2153 characters[1;1HTest for floating point and logical operators.

STARTTEST
:so small.vim
:if !has("float")
:  e! test.ok
:  wq! test.out
:endif
:"
:$put =printf('%f', 123.456)
:$put =printf('%e', 123.456)
:$put =printf('%g', 123.456)
:" check we don't crash on division by zero
:echo 1.0 / 0.0
:$put ='+='
:let v = 1.234
:let v += 6.543
:$put =printf('%g', v)
:let v = 1.234
:let v += 5
:$put =printf('%g', v)
:let a = 5
:let a += 3.333
:$put =string(a)
:$put ='=='
:let v = 1.234
:$put =v == 1.234
:$put =v == 1.2341
:$put ='add-subtract'
:$put =printf('%g', 4 + 1.234)
:$put =printf('%g', 1.234 - 8)
:$put ='mult-div'
:$put =printf('%g', 4 * 1.234)
:$put =printf('%g', 4.0 / 1234)
:$put ='dict'
:$put =string({'x': 1.234, 'y': -2.0e20})
:$put ='list'
:$put =string([-123.4, 2.0e-20])
:$put ='abs'
:$put =printf('%d', abs(1456))
:$put =printf('%d', abs(-4))
:$put =printf('%d', abs([1, 2, 3]))
:$put =printf('%g', abs(14.56))
:$put =printf('%g', abs(-54.32))
:$put ='ceil'
:$put =printf('%g', ceil(1.456))
:$put =printf('%g', ceil(-5.456))
:$put =printf('%g', ceil(-4.000))
:$put ='floor'
:$put =printf('%g', floor(1.856))
:$put =printf('%g', floor(-5.456))
:$put =printf('%g', floor(4.0))
:$put ='log10'
:$put =printf('%g', log10(1000))
:$put =printf('%g', log10(0.01000))
:$put ='pow'[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for floating point and logical operators.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 89 lines, 2067 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[37M[1;57r[20;1H:$put =printf('%g', pow(3, 3.0))
:$put =printf('%g', pow(2, 16))
:$put ='round'
:$put =printf('%g', round(0.456))
:$put =printf('%g', round(4.5))
:$put =printf('%g', round(-4.50))
:$put ='sqrt'
:$put =printf('%g', sqrt(100))
:echo sqrt(-4.01)
:$put ='str2float'
:$put =printf('%g', str2float('1e40'))
:$put ='trunc'
:$put =printf('%g', trunc(1.456))
:$put =printf('%g', trunc(-5.456))
:$put =printf('%g', trunc(4.000))
:$put ='float2nr'
:$put =float2nr(123.456)
:$put =float2nr(-123.456)
:$put ='AND'
:$put =and(127, 127)
:$put =and(127, 16)
:$put =and(127, 128)
:$put ='OR'
:$put =or(16, 7)
:$put =or(8, 7)
:$put =or(0, 123)
:$put ='XOR'
:$put =xor(127, 127)
:$put =xor(127, 16)
:$put =xor(127, 128)
:$put ='invert'
:$put =and(invert(127), 65535)
:$put =and(invert(16), 65535)
:$put =and(invert(128), 65535)
:$put =invert(1.0)
:/^Results/,$wq! test.out
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !has("float")[?25l
:  [?12l[?25h:  e! test.ok
[?25l:  [?12l[?25h:  wq! test.out
[?25l:  [?12l[?25h:endif[1;1H[3L[?25l[1;1H:$put ='abs'
:$put =printf('%d', abs(1456))
:$put =printf('%d', abs(-4))[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =printf('%f', 123.456)[?25l[1;56r[1;1H[2M[1;57r[55;1HResults of test65:
123.456000[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%e', 123.456)[?25l[1;56r[56;1H
[1;57r[56;1H1.234560e+02[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', 123.456)[?25l[1;56r[56;1H
[1;57r[56;1H123.456[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h" check we don't crash on division by zero[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hecho 1.0 / 0.0[?25linf[57;4H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='+='[?25l[1;56r[56;1H
[1;57r[56;1H+=[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet v = 1.234[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet v += 6.543[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =printf('%g', v)[?25l[1;56r[56;1H
[1;57r[56;1H7.777[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet v = 1.234[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet v += 5[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =printf('%g', v)[?25l[1;56r[56;1H
[1;57r[56;1H6.234[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet a = 5[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet a += 3.333[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =string(a)[?25l[1;56r[56;1H
[1;57r[56;1H8.333[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='=='[?25l[1;56r[56;1H
[1;57r[56;1H==[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet v = 1.234[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =v == 1.234[?25l[1;56r[56;1H
[1;57r[56;1H1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =v == 1.2341[?25l[1;56r[56;1H
[1;57r[56;1H0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='add-subtract'[?25l[1;56r[56;1H
[1;57r[56;1Hadd-subtract[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', 4 + 1.234)[?25l[1;56r[56;1H
[1;57r[56;1H5.234[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', 1.234 - 8)[?25l[1;56r[56;1H
[1;57r[56;1H-6.766[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='mult-div'[?25l[1;56r[56;1H
[1;57r[56;1Hmult-div[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', 4 * 1.234)[?25l[1;56r[56;1H
[1;57r[56;1H4.936[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', 4.0 / 1234)[?25l[1;56r[56;1H
[1;57r[56;1H0.003241[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='dict'[?25l[1;56r[56;1H
[1;57r[56;1Hdict[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string({'x': 1.234, 'y': -2.0e20})[?25l[1;56r[56;1H
[1;57r[56;1H{'x': 1.234, 'y': -2.0e20}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='list'[?25l[1;56r[56;1H
[1;57r[56;1Hlist[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string([-123.4, 2.0e-20])[?25l[1;56r[56;1H
[1;57r[56;1H[-123.4, 2.0e-20][57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='abs'[?25l[1;56r[56;1H
[1;57r[56;1Habs[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%d', abs(1456))[?25l[1;56r[56;1H
[1;57r[56;1H1456[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%d', abs(-4))[?25l[1;56r[56;1H
[1;57r[56;1H4[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%d', abs([1, 2, 3]))[?25l[1m[37m[41mE745: Using a List as a Number[m[57;32H[K[1;56r[56;1H
[1;57r[56;1H-1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', abs(14.56))[?25l[1;56r[56;1H
[1;57r[56;1H14.56[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', abs(-54.32))[?25l[1;56r[56;1H
[1;57r[56;1H54.32[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='ceil'[?25l[1;56r[56;1H
[1;57r[56;1Hceil[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', ceil(1.456))[?25l[1;56r[56;1H
[1;57r[56;1H2.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', ceil(-5.456))[?25l[1;56r[56;1H
[1;57r[56;1H-5.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', ceil(-4.000))[?25l[1;56r[56;1H
[1;57r[56;1H-4.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='floor'[?25l[1;56r[56;1H
[1;57r[56;1Hfloor[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', floor(1.856))[?25l[1;56r[56;1H
[1;57r[56;1H1.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', floor(-5.456))[?25l[1;56r[56;1H
[1;57r[56;1H-6.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', floor(4.0))[?25l[1;56r[56;1H
[1;57r[56;1H4.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='log10'[?25l[1;56r[56;1H
[1;57r[56;1Hlog10[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', log10(1000))[?25l[1;56r[56;1H
[1;57r[56;1H3.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', log10(0.01000))[?25l[1;56r[56;1H
[1;57r[56;1H-2.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='pow'[?25l[1;56r[56;1H
[1;57r[56;1Hpow[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', pow(3, 3.0))[?25l[1;56r[56;1H
[1;57r[56;1H27.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', pow(2, 16))[?25l[1;56r[56;1H
[1;57r[56;1H65536.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='round'[?25l[1;56r[56;1H
[1;57r[56;1Hround[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', round(0.456))[?25l[1;56r[56;1H
[1;57r[56;1H0.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', round(4.5))[?25l[1;56r[56;1H
[1;57r[56;1H5.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', round(-4.50))[?25l[1;56r[56;1H
[1;57r[56;1H-5.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='sqrt'[?25l[1;56r[56;1H
[1;57r[56;1Hsqrt[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', sqrt(100))[?25l[1;56r[56;1H
[1;57r[56;1H10.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hecho sqrt(-4.01)[?25lnan[57;4H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='str2float'[?25l[1;56r[56;1H
[1;57r[56;1Hstr2float[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', str2float('1e40'))[?25l[1;56r[56;1H
[1;57r[56;1H1.0e40[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='trunc'[?25l[1;56r[56;1H
[1;57r[56;1Htrunc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', trunc(1.456))[?25l[1;56r[56;1H
[1;57r[56;1H1.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', trunc(-5.456))[?25l[1;56r[56;1H
[1;57r[56;1H-5.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =printf('%g', trunc(4.000))[?25l[1;56r[56;1H
[1;57r[56;1H4.0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='float2nr'[?25l[1;56r[56;1H
[1;57r[56;1Hfloat2nr[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =float2nr(123.456)[?25l[1;56r[56;1H
[1;57r[56;1H123[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =float2nr(-123.456)[?25l[1;56r[56;1H
[1;57r[56;1H-123[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='AND'[?25l[1;56r[56;1H
[1;57r[56;1HAND[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =and(127, 127)[?25l[1;56r[56;1H
[1;57r[56;1H127[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =and(127, 16)[?25l[1;56r[56;1H
[1;57r[56;1H16[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =and(127, 128)[?25l[1;56r[56;1H
[1;57r[56;1H0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='OR'[?25l[1;56r[56;1H
[1;57r[56;1HOR[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =or(16, 7)[?25l[1;56r[56;1H
[1;57r[56;1H23[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =or(8, 7)[?25l[1;56r[56;1H
[1;57r[56;1H15[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =or(0, 123)[?25l[1;56r[56;1H
[1;57r[56;1H123[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='XOR'[?25l[1;56r[56;1H
[1;57r[56;1HXOR[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =xor(127, 127)[?25l[1;56r[56;1H
[1;57r[56;1H0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =xor(127, 16)[?25l[1;56r[56;1H
[1;57r[56;1H111[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =xor(127, 128)[?25l[1;56r[56;1H
[1;57r[56;1H255[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='invert'[?25l[1;56r[56;1H
[1;57r[56;1Hinvert[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =and(invert(127), 65535)[?25l[1;56r[56;1H
[1;57r[56;1H65408[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =and(invert(16), 65535)[?25l[1;56r[56;1H
[1;57r[56;1H65519[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =and(invert(128), 65535)[?25l[1;56r[56;1H
[1;57r[56;1H65407[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =invert(1.0)[?25l[1m[37m[41mE805: Using a Float as a Number[1;56r[m[56;1H
[1;57r[56;1H0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^Results/,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 73 lines, 430 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test65 = test61; then \
#	  if diff test.out test65.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test65.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test65.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test66.failed test.ok test.out X* viminfo
cp test66.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test66.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test66.in" 33 lines, 509 characters[2;1HTest for visual block shift and tab characters.

STARTTEST
:so small.vim
/^one
fe[34m^V[m4jR[34m^[[mugvr1:'<,'>w! test.out
/^abcdefgh
[34m^V[m4jI    [34m^[[mj<<11|D
7|a[13C[34m^[[m
7|a[16C[34m^[[m
7|a[13C[34m^[[m4k13|[34m^V[m4j<
:$-5,$w >> test.out
:$-4,$s/\s\+//g
[34m^V[m4kI    [34m^[[mj<<
7|a[13C[34m^[[m
7|a[37C[34m^[[m
7|a[21C[34m^[[m4k13|[34m^V[m4j3<
:$-4,$w >> test.out
:qa!
ENDTEST

one two three
one two three
one two three
one two three
one two three

abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
[1m[34m~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 16 lines, 234 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[21;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[22;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[22;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^one[?25l[23;1H[?12l[?25hon[?25l[?12l[?25h[?25l[7me
[mon[7me
[mon[7me
[mon[7me
[mon[?12l[?25h[?25l[57;1H4 fewer lines[23;56r[23;1H[4M[1;57r[23;1H[K[53;1H[1m[34m~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H[K[57;1H4 fewer lines[23;1H[?12l[?25h[?25l[57;3Hmore lines; before #1  0 seconds ago[24;56r[24;1H[4L[1;57r[23;1Hone two three
one two three
one two three
one two three
one two three[57;1H[K[24;1H[?12l[?25h[?25l[23;3H[7me
[mon[7me
[mon[7me
[mon[7me
[mon[?12l[?25h[?25l[23;3H1
on1
on1
on1
on1[23;3H[?12l[?25h[?25l[57;1H:[?12l[?25h'<,'>w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 5 lines, 70 characters written[23;3H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^abcdefgh[?25l[29;1H[?12l[?25h[?25l[?12l[?25h[?25l[7ma
a
a
a
[?12l[?25h[?25l[m[29;1Ha
a
a
a[29;1H    abcdefghijklmnopqrstuvwxyz
    abcdefghijklmnopqrstuvwxyz
    abcdefghijklmnopqrstuvwxyz
    abcdefghijklmnopqrstuvwxyz
    abcdefghijklmnopqrstuvwxyz[29;1H[?12l[?25h
[?25labcdefghijklmnopqrstuvwxyz[30;27H[K[30;1H[?12l[?25h[10C[?25l[30;11H[K[30;10H[?12l[?25h[31;10H[?25lc         defghijklmnopqrstuvwxyz[31;16H[?12l[?25h[32;16H[32;7H[?25lc            defghijklmnopqrstuvwxyz[32;19H[?12l[?25h[33;19H[33;7H[?25lc         defghijklmnopqrstuvwxyz[33;16H[?12l[?25h[29;16H[?25l[?12l[?25h[?25l[7mi[31;13H [32;13H [33;13H[?12l[?25h[?25l[m[57;1H5 lines <ed 1 time[29;13Hi[31;13Hdefghijklmnopqrstuvwxyz[31;36H[K[32;13Hdefghijklmnopqrstuvwxyz[32;36H[K[33;13Hdefghijklmnopqrstuvwxyz[33;36H[K[29;13H[?12l[?25h[30;10H[?25l[57;1H[K[57;1H:[?12l[?25h$-5,$w >> test.out[?25l"test.out"[57;12H[K[57;12H6 lines, 151 characters appended[30;10H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$-4,$s/\s\+//g[?25l7 substitutions on 4 lines[29;1Habcdefghijklmnopqrstuvwxyz[29;27H[K[31;1Habcdefghijklmnopqrstuvwxyz[31;27H[K[32;1Habcdefghijklmnopqrstuvwxyz[32;27H[K[33;1Habcdefghijklmnopqrstuvwxyz[33;27H[K[33;1H[?12l[?25h[?25l[?12l[?25h[?25l[30;1H[7ma
a
a
a[29;1H[?12l[?25h[?25l[m
a
a
a
a[29;1H    abcdefghijklmnopqrstuvwxyz
    abcdefghij
    abcdefghijklmnopqrstuvwxyz
    abcdefghijklmnopqrstuvwxyz
    abcdefghijklmnopqrstuvwxyz[29;1H[?12l[?25h
[?25labcdefghij[30;11H[K[30;1H[?12l[?25h
    ab[?25lc         defghijklmnopqrstuvwxyz[31;16H[?12l[?25h[32;16H[32;7H[?25lc                       [10Cdefghijklmnopqrstuvwxyz[32;40H[?12l[?25h[33;30H[33;7H[?25lc                 defghijklmnopqrstuvwxyz[33;24H[?12l[?25h[29;24H[29;13H[?25l[?12l[?25h[?25l[7mi[31;13H [32;13H [33;13H[?12l[?25h[?25l[m[57;1H5 lines <ed 3 times[57;20H[K[29;13Hi[31;13Hdefghijklmnopqrstuvwxyz[31;36H[K[32;13H    defghijklmnopqrstuvwxyz[32;41H[K[33;13Hdefghijklmnopqrstuvwxyz[33;36H[K[29;13H[?12l[?25h[30;10H[?25l[57;1H[K[57;1H:[?12l[?25h$-4,$w >> test.out[?25l"test.out"[57;12H[K[57;12H5 lines, 147 characters appended[30;10H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test66 = test61; then \
#	  if diff test.out test66.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test66.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test66.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test67.failed test.ok test.out X* viminfo
cp test67.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test67.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test67.in" 33 lines, 1110 characters[1;1HTest that groups and patterns are tested correctly when calling exists() for
autocommands.

STARTTEST
:so small.vim
:let results=[]
:augroup auexists
:augroup END
:call add(results, "##BufEnter: " . exists("##BufEnter"))
:call add(results, "#BufEnter: " . exists("#BufEnter"))
:au BufEnter * let g:entered=1
:call add(results, "#BufEnter: " . exists("#BufEnter"))
:call add(results, "#auexists#BufEnter: " . exists("#auexists#BufEnter"))
:augroup auexists
:au BufEnter * let g:entered=1
:augroup END
:call add(results, "#auexists#BufEnter: " . exists("#auexists#BufEnter"))
:call add(results, "#BufEnter#*.test: " . exists("#BufEnter#*.test"))
:au BufEnter *.test let g:entered=1
:call add(results, "#BufEnter#*.test: " . exists("#BufEnter#*.test"))
:edit testfile.test
:call add(results, "#BufEnter#<buffer>: " . exists("#BufEnter#<buffer>"))
:au BufEnter <buffer> let g:entered=1
:call add(results, "#BufEnter#<buffer>: " . exists("#BufEnter#<buffer>"))
:edit testfile2.test
:call add(results, "#BufEnter#<buffer>: " . exists("#BufEnter#<buffer>"))
:e! test.out
:call append(0, results)
:$d
:w
:qa!
ENDTEST

[1m[34m~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest that groups and patterns are tested correctly when calling exists() for[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 27 lines, 999 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[32;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet results=[][?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25haugroup auexists[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25haugroup END[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(results, "##BufEnter: " . exists("##BufEnter"))[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(results, "#BufEnter: " . exists("#BufEnter"))[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufEnter * let g:entered=1[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(results, "#BufEnter: " . exists("#BufEnter"))[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(results, "#auexists#BufEnter: " . exists("#auexists#BufEnter"))[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25haugroup auexists[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufEnter * let g:entered=1[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25haugroup END[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(results, "#auexists#BufEnter: " . exists("#auexists#BufEnter"))[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(results, "#BufEnter#*.test: " . exists("#BufEnter#*.test"))[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufEnter *.test let g:entered=1[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(results, "#BufEnter#*.test: " . exists("#BufEnter#*.test"))[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hedit testfile.test[?25l"testfile.test" [New File][1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(results, "#BufEnter#<buffer>: " . exists("#BufEnter#<buffer>"))[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufEnter <buffer> let g:entered=1[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(results, "#BufEnter#<buffer>: " . exists("#BufEnter#<buffer>"))[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hedit testfile2.test[?25l"testfile2.test" [New File][1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(results, "#BufEnter#<buffer>: " . exists("#BufEnter#<buffer>"))[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! test.out[?25l"test.out" [New File][1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append(0, results)[?25l[1;56r[1;1H[10L[1;57r[1;1H##BufEnter: 1
#BufEnter: 0
#BufEnter: 1
#auexists#BufEnter: 0
#auexists#BufEnter: 1
#BufEnter#*.test: 0
#BufEnter#*.test: 1
#BufEnter#<buffer>: 0
#BufEnter#<buffer>: 1
#BufEnter#<buffer>: 0[57;1H[K[11;1H[?12l[?25h[?25l[57;1H:[?12l[?25h$d[?25l[11;1H[1m[34m~                                                                                      [10;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw[?25l"test.out" [New File] 10 lines, 190 characters written[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test67 = test61; then \
#	  if diff test.out test67.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test67.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test67.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test68.failed test.ok test.out X* viminfo
cp test68.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test68.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test68.in" 131 lines, 1004 characters[1;1HTest for text formatting.

Results of test68:

STARTTEST
:so small.vim
/^{/+1
:set noai tw=2 fo=t
gRa b[34m^[[m
ENDTEST

{


}

STARTTEST
/^{/+1
:set ai tw=2 fo=tw
gqgqjjllab[34m^[[m
ENDTEST

{
a  b

a
}

STARTTEST
/^{/+1
:set tw=3 fo=t
gqgqo
a [34m^V^A^[[m
ENDTEST

{
a [34m^A[m
}

STARTTEST
/^{/+1
:set tw=2 fo=tcq1 comments=:#
gqgqjgqgqo
a b
#a b[34m^[[m
ENDTEST

{
a b
#a b
}

STARTTEST
/^{/+1
:set tw=5 fo=tcn comments=:#
A b[34m^[[mjA b[34m^[[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for text formatting.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[5;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 4 lines, 48 characters written[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[6;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[10;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[11;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[11;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[13;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noai tw=2 fo=t[?25l[13;1H[?12l[?25h[?25la
b[?12l[?25h
[?25l[57;1H[K[57;1H/^STARTTEST[17;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[18;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3 lines, 38 characters written[18;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[18;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[21;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[22;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[24;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ai tw=2 fo=tw[?25l[24;1H[?12l[?25h[?25l[25;56r[25;1H[L[1;57r[24;4H[K[25;1Hb[57;1H[K[25;1H[?12l[?25h

a [?25l[28;56r[28;1H[L[1;57r[28;1Hb[?12l[?25h
[?25l[57;1H/^STARTTEST[31;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H4 lines, 34 characters written[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[32;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[36;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[37;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset tw=3 fo=t[?25l[39;1H[?12l[?25h[?25l[40;56r[40;1H[L[1;57r[39;3H[K[40;1H[34m^A[m[57;1H[K[40;1H[?12l[?25h

  [?25l[41;56r[41;1H[3L[1;57r[42;1Ha
[34m^A[?12l[?25h
[?25l[57;1H[m/^STARTTEST[46;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[47;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H5 lines, 58 characters written[47;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[47;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[52;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[53;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset tw=2 fo=tcq1 comments=:#[?25l[55;1H[?12l[?25h
[?25l[1;56r[1;1H[3M[1;57r[55;1Ha b
#a b[57;1H[K[56;4H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3 lines, 46 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:set tw=5 fo=tcn comments=:#
A b[34m^[[mjA b[34m^[[m
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[1;56r[1;1H[2M[1;57r[55;1H{
  1 a[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset tw=5 fo=tcn comments=:#[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hb[57;1H[K[56;5H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H# 1 a[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H#   b[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+3[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3 lines, 35 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:set tw=5 fo=t2a si
i  [34m^[[mA_[34m^[[m
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+3[?25l[1;56r[1;1H[4M[1;57r[53;1H{

  x a
  b[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset tw=5 fo=t2a si[?25l[56;1H[?12l[?25h[?25l    b[?12l[?25h[?25l b_[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;5Hc[57;1H[K[56;5H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[4M[1;57r[54;1H}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3 lines, 40 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:set tw=5 fo=qn comments=:#
gwap
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[1;56r[1;1H[2M[1;57r[55;1H{
# 1 a b[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset tw=5 fo=qn comments=:#[?25l[56;1H[?12l[?25h[?25l[56;7H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H#   b[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[3M[1;57r[54;1H}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3 lines, 40 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:set tw=5 fo=q2 comments=:#
gwap
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[1;56r[1;1H[2M[1;57r[55;1H{
# x[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset tw=5 fo=q2 comments=:#[?25l[56;1H[?12l[?25h[?25l# x a[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H#   b[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[3M[1;57r[54;1H}

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+2[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3 lines, 26 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:set tw& fo=a
I^^[34m^[[m
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+2[?25l[1;56r[1;1H[3M[1;57r[54;1H{
   1aa
   2bb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset tw& fo=a[?25l[56;1H[?12l[?25h[?25l[54;3H1aa ^^2bb }[55;4H[K[56;1HSTARTTEST[54;8H[?12l[?25h
[?25l[57;1H[K[57;1H/^STARTTEST[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/mno pqr/[57;1H[K[56;1H[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3 lines, 69 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:setl tw=20 fo=an12wcq comments=s1:/*,mb:*,ex:*/
A vwx yz[34m^[[m
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hmno pqr/[?25l[57;9H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1H/* abc def ghi jkl
 *    mno pqr stu[57;1H[K[56;7H[?12l[?25h[?25l
:[?12l[?25hsetl tw=20 fo=an12wcq comments=s1:/*,mb:*,ex:*/[?25l[56;7H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;2H*    vwx yz[57;1H[K[56;12H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;2H*/[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^#/[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3 lines, 47 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:setl tw=12 fo=tqnc comments=:#
A foobar[34m^[[m
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^#/[?25l[57;4H[K[57;1H[1;56r[56;1H
[1;57r[56;1H# 1 xxxxx[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hsetl tw=12 fo=tqnc comments=:#[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H#   foobar[57;1H[K[56;10H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[56;1H
[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:g/^STARTTEST/.,/^ENDTEST/d[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2 lines, 56 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[56;19H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:1;/^Results/,$wq! test.out[57;1H[K[56;19H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hg/^STARTTEST/.,/^ENDTEST/d[?25l63 fewer lines[57;15H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h1;/^Results/,$wq! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 77 lines, 281 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test68 = test61; then \
#	  if diff test.out test68.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test68.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test68.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test69.failed test.ok test.out X* viminfo
cp test69.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test69.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test69.in" 192 lines, 2185 characters[1;1HTest for multi-byte text formatting.
Also test, that 'mps' with multibyte chars works.
And test "ra" on multi-byte characters.
Also test byteidx() and byteidxcomp()

STARTTEST
:so mbyte.vim
:set encoding=utf-8
ENDTEST

Results of test69:

STARTTEST
/^{/+1
:set tw=2 fo=t
gqgqjgqgqo
ＸＹＺ
abc ＸＹＺ[34m^[[m
ENDTEST

{
ＸＹＺ
abc ＸＹＺ
}

STARTTEST
/^{/+1
:set tw=1 fo=tm
gqgqjgqgqjgqgqjgqgqjgqgqo
Ｘ
Ｘa
Ｘ a
ＸＹ
Ｘ Ｙ[34m^[[m
ENDTEST

{
Ｘ
Ｘa
Ｘ a
ＸＹ
Ｘ Ｙ
}

STARTTEST
/^{/+1
:set tw=2 fo=tm
gqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqo
Ｘ
Ｘa
Ｘ a
ＸＹ
Ｘ Ｙ
aＸ
abＸ
abcＸ[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for multi-byte text formatting.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[6;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 2 lines, 34 characters written[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[7;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[9;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset encoding=utf-8[?25l[27m[23m[m[H[2J[1;1HTest for multi-byte text formatting.
Also test, that 'mps' with multibyte chars works.
And test "ra" on multi-byte characters.
Also test byteidx() and byteidxcomp()

STARTTEST
:so mbyte.vim
:set encoding=utf-8
ENDTEST

Results of test69:

STARTTEST
/^{/+1
:set tw=2 fo=t
gqgqjgqgqo
ＸＹＺ
abc ＸＹＺ[34m^[[m
ENDTEST

{
ＸＹＺ
abc ＸＹＺ
}

STARTTEST
/^{/+1
:set tw=1 fo=tm
gqgqjgqgqjgqgqjgqgqjgqgqo
Ｘ
Ｘa
Ｘ a
ＸＹ
Ｘ Ｙ[34m^[[m
ENDTEST

{
Ｘ
Ｘa
Ｘ a
ＸＹ
Ｘ Ｙ
}

STARTTEST
/^{/+1
:set tw=2 fo=tm
gqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqo
Ｘ
Ｘa
Ｘ a
ＸＹ
Ｘ Ｙ
aＸ
abＸ
abcＸ[10;1H[?12l[?25h[?25l[57;1H/^STARTTEST[13;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[14;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H5 lines, 58 characters written[14;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[14;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[19;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[20;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[22;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset tw=2 fo=t[?25l[22;1H[?12l[?25h
[?25l[24;56r[24;1H[L[1;57r[23;5H[K[24;1HＸＹＺ[57;1H[K[24;1H[?12l[?25h[?25l[25;56r[25;1H[2L[1;57r[26;1H[?12l[?25h[?25lＸ[?12l[?25h[?25lＹ[?12l[?25h[?25l[27;56r[27;1H[L[1;57r[26;5HＺ
abc [?12l[?25h[?25l[28;56r[28;1H[L[1;57r[28;1HＸ[?12l[?25h[?25lＹ[?12l[?25h[?25lＺ[?12l[?25h
[?25l[57;1H/^STARTTEST[31;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H8 lines, 80 characters written[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[32;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[40;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[41;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset tw=1 fo=tm[?25l[43;1H[?12l[?25h
[?25l[45;56r[45;1H[L[1;57r[44;3H[K[45;1Ha[57;1H[K[45;1H[?12l[?25h
[?25l[47;56r[47;1H[L[1;57r[46;4H[K[47;1Ha[?12l[?25h
[?25l[49;56r[49;1H[L[1;57r[48;3H[K[49;1HＹ[?12l[?25h
[?25l[51;56r[51;1H[L[1;57r[50;4H[K[51;1HＹ[?12l[?25h[?25l[52;56r[52;1H[2L[1;57r[53;1H[?12l[?25h[?25l[54;56r[54;1H[L[1;57r[53;1HＸ
[?12l[?25h[?25lＸ
a
[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[54;1HＸ
a
[?12l[?25h[?25lＸ[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1HＹ
[?12l[?25h[?25lＸ [?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＹ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H13 lines, 140 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[13M[1;57r[44;1H:set tw=2 fo=tm
gqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqo
Ｘ
Ｘa
Ｘ a
ＸＹ
Ｘ Ｙ
aＸ
abＸ
abcＸ
abＸ c
abＸＹ[34m^[[m
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[1;56r[1;1H[2M[1;57r[55;1H{
Ｘ[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset tw=2 fo=tm[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸa[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;3H[K[56;1Ha[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸ a[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;4H[K[56;1Ha[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸＹ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;3H[K[56;1HＹ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸ Ｙ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;4H[K[56;1HＹ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HaＸ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1HＸ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HabＸ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;3H[K[56;1HＸ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HabcＸ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;4H[K[56;1HＸ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HabＸ c[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[54;3H[K[55;1HＸ
c[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HabＸＹ[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[54;3H[K[55;1HＸ
Ｙ[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;1HＸ
[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[54;1HＸ
a
[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[54;1HＸ
a
[?12l[?25h[?25lＸ[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1HＹ
[?12l[?25h[?25lＸ [?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1HＹ
a[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1HＸ
ab[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1HＸ
abc[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1HＸ
ab[?12l[?25h[?25l[1;56r[1;1H[3M[1;57r[54;1HＸ
c
ab[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＹ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H5 lines, 47 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[5M[1;57r[52;1H:set ai tw=2 fo=tm
gqgqjgqgqo
Ｘ
Ｘa[34m^[[m
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[1;56r[1;1H[2M[1;57r[55;1H{
  Ｘ[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset ai tw=2 fo=tm[?25l[56;1H[?12l[?25h  [?25l[1;56r[56;1H
[1;57r[56;3HＸa[57;1H[K[56;3H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;5H[K[56;3Ha[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[56;3H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;3HＸ
  [?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;3HＸ
  a[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H5 lines, 53 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[5M[1;57r[52;1H:set noai tw=2 fo=tm
gqgqjgqgqo
  Ｘ
  Ｘa[34m^[[m
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[1;56r[1;1H[2M[1;57r[55;1H{
  Ｘ[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset noai tw=2 fo=tm[?25l[56;1H[?12l[?25h  [?25l[1;56r[56;1H
[1;57r[56;3HＸa[57;1H[K[56;3H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;5H[K[56;1Ha[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[56;3H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;3HＸ
  [?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;3HＸ
a[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H13 lines, 169 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[13M[1;57r[44;1H:set tw=2 fo=cqm comments=n:Ｘ
gqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqjgqgqo
Ｘ
Ｘa
ＸaＹ
ＸＹ
ＸＹＺ
Ｘ Ｙ
Ｘ ＹＺ
ＸＸ
ＸＸa
ＸＸＹ[34m^[[m
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[1;56r[1;1H[2M[1;57r[55;1H{
Ｘ[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset tw=2 fo=cqm comments=n:Ｘ[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸa[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸaＹ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;4H[K[56;1HＸＹ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸＹ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸＹＺ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;5H[K[56;1HＸＺ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸ Ｙ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸ ＹＺ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;6H[K[56;1HＸ Ｚ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸＸ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸＸa[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HＸＸＹ[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;1HＸ
[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;1HＸa
[?12l[?25h[?25lＸa[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1HＸＹ
[?12l[?25h[?25lＸ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;3HＹ
[?12l[?25h[?25lＸ[?12l[?25h[?25lＹ[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1HＸＺ
[?12l[?25h[?25lＸ [?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;4HＹ
[?12l[?25h[?25lＸ [?12l[?25h[?25lＹ[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1HＸ Ｚ
[?12l[?25h[?25lＸ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;3HＸ
[?12l[?25h[?25lＸ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;3HＸa
[?12l[?25h[?25lＸ[?12l[?25h[?25lＸ[?12l[?25h[?25lＹ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3 lines, 30 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:set tw=2 fo=tm
RＸa[34m^[[m
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[1;56r[1;1H[2M[1;57r[55;1H{[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset tw=2 fo=tm[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[55;1HＸ
a[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^{/+1[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3 lines, 34 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:set mps+=[34m^V[mu2018:[34m^V[mu2019
d%
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^{/+1[?25l[1;56r[1;1H[2M[1;57r[55;1H{
‘[56;3Htwo three ’[56;15Hfour[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset mps+=^‘[57;12H:^’[57;14H[?25l[56;1H[?12l[?25h[?25l four[56;7H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H}[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[56;1H
[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^ra test[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2 lines, 16 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1HjVjra
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^ra test[?25l[1;56r[56;1H
[1;57r[56;1Hra test[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hａbbａ[?12l[?25h[?25l[2C[7mbbａ [?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;1H[7mａ[m
ａ[7mａb [?12l[?25h[?25l[m[55;1Haaaa[55;5H[K[56;1Haaa[7m [m[56;4H[K[55;1H[?12l[?25h
[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set whichwrap+=h[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H4 lines, 43 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[4M[1;57r[53;1H/^x
dh
:set whichwrap-=h
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset whichwrap+=h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^x[?25l[1;56r[1;1H[2M[1;57r[55;1Há[56;1Hx[57;1H[K[56;1H[?12l[?25h[?25l[55;2Hx[56;1H[K[55;2H[?12l[?25h
[?25l
:[?12l[?25hset whichwrap-=h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[1;56r[56;1H
[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:let a = '.é[56;13H.' " one char of two bytes[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H9 lines, 548 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[13M[1;57r[44;1H:let b = '.é.' " normal e with composing char
/^byteidx
:put =string([byteidx(a, 0), byteidx(a, 1), byteidx(a, 2), byteidx(a, 3), byteidx(a, 4))[47;1H])
:put =string([byteidx(b, 0), byteidx(b, 1), byteidx(b, 2), byteidx(b, 3), byteidx(b, 4))[49;1H])
/^byteidxcomp
:put =string([byteidxcomp(a, 0), byteidxcomp(a, 1), byteidxcomp(a, 2), byteidxcomp(a, 33[52;1H), byteidxcomp(a, 4)])
:let b = '.é.'
:put =string([byteidxcomp(b, 0), byteidxcomp(b, 1), byteidxcomp(b, 2), byteidxcomp(b, 33[55;1H), byteidxcomp(b, 4), byteidxcomp(b, 5)])
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet a = '.é[57;13H.' " one char of two bytes[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet b = '.eé.' " normal e with composing char[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^byteidx[?25l[1;56r[56;1H
[1;57r[56;1Hbyteidx[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =string([byteidx(a, 0), byteidx(a, 1), byteidx(a, 2), byteidx(a, 3), byteidx(a, 4
[56;87H)[57;1H])[?25l[1;1H[L[1;1HSTARTTEST
/^{/+1[2;7H[K[3;1H:set tw=2 fo=tm
RＸa[34m^[[m[4;7H[K[5;1HENDTEST[6;1H[K[7;1H{
Ｘ
a 
}[11;1H[K[12;1HSTARTTEST
/^{/+1[13;7H[K[14;1H:set mps+=[34m^V[mu2018:[34m^V[mu2019
d%[15;3H[K[16;1HENDTEST[17;1H[K[18;1H{
 four
}[20;2H[K[21;1HSTARTTEST
/^ra test
jVjra[23;6H[K[24;1HENDTEST[25;1H[K[26;1Hra test
aaaa[27;5H[K[28;4H[K[29;1H[K[30;1HSTARTTEST
:set whichwrap+=h
/^x[32;4H[K[33;1Hdh[33;3H[K[34;1H:set whichwrap-=h
ENDTEST[35;8H[K[36;1H[K[37;1Há[37;2Hx[38;1H[K[39;1HSTARTTEST
:let a = '.é[40;13H.' " one char of two bytes[41;6Hb = '.é.' " normal e with composing char
/^byteidx[42;10H[K[43;1H:put =string([byteidx(a, 0), byteidx(a, 1), byteidx(a, 2), byteidx(a, 3), byteidx(a, 4))[44;1H])[44;3H[K[45;1H:put =string([byteidx(b, 0), byteidx(b, 1), byteidx(b, 2), byteidx(b, 3), byteidx(b, 4))[46;1H])[46;3H[K[47;1H/^byteidxcomp
:put =string([byteidxcomp(a, 0), byteidxcomp(a, 1), byteidxcomp(a, 2), byteidxcomp(a, 33[49;1H), byteidxcomp(a, 4)])[49;23H[K[50;1H:let b = '.é.'[50;15H[K[51;2Hput =string([byteidxcomp(b, 0), byteidxcomp(b, 1), byteidxcomp(b, 2), byteidxcomp(b, 33[52;1H), byteidxcomp(b, 4), byteidxcomp(b, 5)])[52;42H[K[53;1HENDTEST[53;8H[K[54;1H[K[55;1Hbyteidx
[0, 1, 3, 4, -1][57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =string([byteidx(b, 0), byteidx(b, 1), byteidx(b, 2), byteidx(b, 3), byteidx(b, 4
[56;87H)[57;1H])[?25l[1;1H[L[1;1H/^{/+1
:set tw=2 fo=tm
RＸa[34m^[[m[3;7H[K[4;1HENDTEST[5;1H[K[6;1H{
Ｘ
a 
}[10;1H[K[11;1HSTARTTEST
/^{/+1[12;7H[K[13;1H:set mps+=[34m^V[mu2018:[34m^V[mu2019
d%[14;3H[K[15;1HENDTEST[16;1H[K[17;1H{
 four
}[19;2H[K[20;1HSTARTTEST
/^ra test
jVjra[22;6H[K[23;1HENDTEST[24;1H[K[25;1Hra test
aaaa[26;5H[K[27;4H[K[28;1H[K[29;1HSTARTTEST
:set whichwrap+=h
/^x[31;4H[K[32;1Hdh[32;3H[K[33;1H:set whichwrap-=h
ENDTEST[34;8H[K[35;1H[K[36;1Há[36;2Hx[37;1H[K[38;1HSTARTTEST
:let a = '.é[39;13H.' " one char of two bytes[40;6Hb = '.é.' " normal e with composing char
/^byteidx[41;10H[K[42;1H:put =string([byteidx(a, 0), byteidx(a, 1), byteidx(a, 2), byteidx(a, 3), byteidx(a, 4))[43;1H])[43;3H[K[44;1H:put =string([byteidx(b, 0), byteidx(b, 1), byteidx(b, 2), byteidx(b, 3), byteidx(b, 4))[45;1H])[45;3H[K[46;1H/^byteidxcomp
:put =string([byteidxcomp(a, 0), byteidxcomp(a, 1), byteidxcomp(a, 2), byteidxcomp(a, 33[48;1H), byteidxcomp(a, 4)])[48;23H[K[49;1H:let b = '.é.'[49;15H[K[50;2Hput =string([byteidxcomp(b, 0), byteidxcomp(b, 1), byteidxcomp(b, 2), byteidxcomp(b, 33[51;1H), byteidxcomp(b, 4), byteidxcomp(b, 5)])[51;42H[K[52;1HENDTEST[52;8H[K[53;1H[K[54;1Hbyteidx
[0, 1, 3, 4, -1][56;8H4, 5[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^byteidxcomp[?25l[1;56r[56;1H
[1;57r[56;1Hbyteidxcomp[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hput =string([byteidxcomp(a, 0), byteidxcomp(a, 1), byteidxcomp(a, 2), byteidxcomp(a, 
[56;87H3[57;1H), byteidxcomp(a, 4)])[?25l[1;1H[L[1;1HRＸa[34m^[[m
ENDTEST[3;1H[K[4;1H{
Ｘ
a 
}[8;1H[K[9;1HSTARTTEST
/^{/+1[10;7H[K[11;1H:set mps+=[34m^V[mu2018:[34m^V[mu2019
d%[12;3H[K[13;1HENDTEST[14;1H[K[15;1H{
 four
}[17;2H[K[18;1HSTARTTEST
/^ra test
jVjra[20;6H[K[21;1HENDTEST[22;1H[K[23;1Hra test
aaaa[24;5H[K[25;4H[K[26;1H[K[27;1HSTARTTEST
:set whichwrap+=h
/^x[29;4H[K[30;1Hdh[30;3H[K[31;1H:set whichwrap-=h
ENDTEST[32;8H[K[33;1H[K[34;1Há[34;2Hx[35;1H[K[36;1HSTARTTEST
:let a = '.é[37;13H.' " one char of two bytes[38;6Hb = '.é.' " normal e with composing char
/^byteidx[39;10H[K[40;1H:put =string([byteidx(a, 0), byteidx(a, 1), byteidx(a, 2), byteidx(a, 3), byteidx(a, 4))[41;1H])[41;3H[K[42;1H:put =string([byteidx(b, 0), byteidx(b, 1), byteidx(b, 2), byteidx(b, 3), byteidx(b, 4))[43;1H])[43;3H[K[44;1H/^byteidxcomp
:put =string([byteidxcomp(a, 0), byteidxcomp(a, 1), byteidxcomp(a, 2), byteidxcomp(a, 33[46;1H), byteidxcomp(a, 4)])[46;23H[K[47;1H:let b = '.é.'[47;15H[K[48;2Hput =string([byteidxcomp(b, 0), byteidxcomp(b, 1), byteidxcomp(b, 2), byteidxcomp(b, 33[49;1H), byteidxcomp(b, 4), byteidxcomp(b, 5)])[49;42H[K[50;1HENDTEST[50;8H[K[51;1H[K[52;1Hbyteidx
[0, 1, 3, 4, -1][54;8H4, 5
byteidxcomp[55;12H[K[56;1H[0, 1, 3, 4, -1][57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet b = '.eé.'[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hput =string([byteidxcomp(b, 0), byteidxcomp(b, 1), byteidxcomp(b, 2), byteidxcomp(b, 
[56;87H3[57;1H), byteidxcomp(b, 4), byteidxcomp(b, 5)])[?25l[1;1H[L[1;1HENDTEST[2;1H[K[3;1H{
Ｘ
a 
}[7;1H[K[8;1HSTARTTEST
/^{/+1[9;7H[K[10;1H:set mps+=[34m^V[mu2018:[34m^V[mu2019
d%[11;3H[K[12;1HENDTEST[13;1H[K[14;1H{
 four
}[16;2H[K[17;1HSTARTTEST
/^ra test
jVjra[19;6H[K[20;1HENDTEST[21;1H[K[22;1Hra test
aaaa[23;5H[K[24;4H[K[25;1H[K[26;1HSTARTTEST
:set whichwrap+=h
/^x[28;4H[K[29;1Hdh[29;3H[K[30;1H:set whichwrap-=h
ENDTEST[31;8H[K[32;1H[K[33;1Há[33;2Hx[34;1H[K[35;1HSTARTTEST
:let a = '.é[36;13H.' " one char of two bytes[37;6Hb = '.é.' " normal e with composing char
/^byteidx[38;10H[K[39;1H:put =string([byteidx(a, 0), byteidx(a, 1), byteidx(a, 2), byteidx(a, 3), byteidx(a, 4))[40;1H])[40;3H[K[41;1H:put =string([byteidx(b, 0), byteidx(b, 1), byteidx(b, 2), byteidx(b, 3), byteidx(b, 4))[42;1H])[42;3H[K[43;1H/^byteidxcomp
:put =string([byteidxcomp(a, 0), byteidxcomp(a, 1), byteidxcomp(a, 2), byteidxcomp(a, 33[45;1H), byteidxcomp(a, 4)])[45;23H[K[46;1H:let b = '.é.'[46;15H[K[47;2Hput =string([byteidxcomp(b, 0), byteidxcomp(b, 1), byteidxcomp(b, 2), byteidxcomp(b, 33[48;1H), byteidxcomp(b, 4), byteidxcomp(b, 5)])[48;42H[K[49;1HENDTEST[49;8H[K[50;1H[K[51;1Hbyteidx
[0, 1, 3, 4, -1][53;8H4, 5
byteidxcomp[54;12H[K[55;1H[0, 1, 3, 4, -1][56;8H2, 4, 5, -1][57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H/^substitute[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2 lines, 75 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1H:let y = substitute('１２３', '\zs', 'a', 'g')    | put =y
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^substitute[?25l[1;56r[56;1H
[1;57r[56;1Hsubstitute[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('１２３', '\zs', 'a', 'g')    | put =y[?25l[1;56r[56;1H
[1;57r[56;1Ha１a２a３a[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:g/^STARTTEST/.,/^ENDTEST/d[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H2 lines, 56 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[56;19H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:1;/^Results/,$wq! test.out[57;1H[K[56;19H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hg/^STARTTEST/.,/^ENDTEST/d[?25l104 fewer lines[57;16H[K[1;1HＸＹ
ＸＹ
ＸＹ[3;5H[K[4;1HＸＺ
Ｘ Ｙ[5;6H[K[6;1HＸ Ｙ[6;6H[K[7;1HＸ Ｚ
ＸＸ[8;5H[K[9;1HＸＸa
ＸＸＹ[10;7H[K[11;1H[K[12;1HＸ[12;3H[K[13;1HＸa
Ｘa[14;4H[K[15;1HＸＹ[15;6H[K[16;1HＸＹ
ＸＹ
ＸＺ[18;6H[K[19;1HＸ Ｙ[19;6H[K[20;1HＸ Ｙ
Ｘ Ｚ
ＸＸ
ＸＸa[23;6H[K[24;1HＸＸＹ[24;8H[K[25;1H}[25;2H[K[26;1H[K[27;1H[K[28;1H{[28;2H[K[29;1HＸ[29;3H[K[30;1Ha[30;2H[K[31;1H}[31;2H[K[32;1H[K[33;1H[K[34;1H{[34;2H[K[35;1H four[35;6H[K[36;1H}[36;2H[K[37;1H[K[38;1Hra test
aaaa[39;5H[K[40;1Haaa[40;5H[K[41;1H[K[42;1H[K[43;1Há[43;2Hx[43;3H[K[44;1H[K[46;1Hbyteidx[46;8H[K[47;1H[0, 1, 3, 4, -1]
[0, 1, 4, 5, -1][48;17H[K[49;1Hbyteidxcomp
[0, 1, 3, 4, -1]
[0, 1, 2, 4, 5, -1][52;1H[K[54;1Hsubstitute
a１a２a３a[55;11H[K[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1;/^Results/,$wq! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 166 lines, 730 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test69 = test61; then \
#	  if diff test.out test69.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test69.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test69.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test70.failed test.ok test.out X* viminfo
cp test70.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test70.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test70.in" 63 lines, 1501 characters[1;1HSmoke test for MzScheme interface and mzeval() function

STARTTEST
:so mzscheme.vim
:set nocompatible viminfo+=nviminfo
:function! MzRequire()
:redir => l:mzversion
:mz (version)
:redir END
:if strpart(l:mzversion, 1, 1) < "4"
:" MzScheme versions < 4.x:
:mz (require (prefix vim- vimext))
:else
:" newer versions:
:mz (require (prefix-in vim- 'vimext))
:mz (require r5rs)
:endif
:endfunction
:silent call MzRequire()
:mz (define l '("item0" "dictionary with list OK" "item2"))
:mz (define h (make-hash))
:mz (hash-set! h "list" l)
/^1
:" change buffer contents
:mz (vim-set-buff-line (vim-eval "line('.')") "1 changed line 1")
:" scalar test
:let tmp_string = mzeval('"string"')
:let tmp_1000 = mzeval('1000')
:if tmp_string . tmp_1000 == "string1000"
:let scalar_res = "OK"
:else
:let scalar_res = "FAILED"
:endif
:call append(search("^1"), "scalar test " . scalar_res)
:" dictionary containing a list
:let tmp = mzeval("h")["list"][1]
:/^2/put =tmp
:" circular list (at the same time test lists containing lists)
:mz (set-car! (cddr l) l)
:let l2 = mzeval("h")["list"]
:if l2[2] == l2
:let res = "OK"
:else
:let res = "FAILED: " . l2[2]
:endif
:call setline(search("^3"), "circular test " . res)
:" funcrefs
:mz (define vim:max (vim-eval "function('max')"))
:mz (define m (vim:max '(1 100 8)))
:let m = mzeval('m')
:if m == 100
:let fref_res = "OK"
:else
:let fref_res = "FAILED: " . m
:end
:call append(line('$'), 'funcrefs '. fref_res)[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HSmoke test for MzScheme interface and mzeval() function[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 55 lines, 1398 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[3M[1;57r[54;1H:?^1?,$w! test.out
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mzscheme.vim[?25l"test.ok" [57;11H[K[57;11H6 lines, 94 characters
"test.out" [New File] 6 lines, 94 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test70 = test61; then \
#	  if diff test.out test70.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test70.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test70.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test73.failed test.ok test.out X* viminfo
cp test73.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test73.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test73.in" 169 lines, 3647 characters[1;1HTests for find completion.

STARTTEST
:so small.vim
:" Do all test in a separate window to avoid E211 when we recursively
:" delete the Xfind directory during cleanup
:"
:" This will cause a few errors, do it silently.
:set visualbell
:set nocp viminfo+=nviminfo
:"
:" On windows a stale "Xfind" directory may exist, remove it so that
:" we start from a clean state.
:call delete("Xfind", "rf")
:new
:let cwd=getcwd()
:let test_out = cwd . '/test.out'
:call mkdir('Xfind')
:cd Xfind
:set path=
:find
:exec "w! " . test_out
:close
:new
:set path=.
:find
:exec "w >>" . test_out
:close
:new
:set path=.,,
:find
:exec "w >>" . test_out
:close
:new
:set path=./**
:find
:exec "w >>" . test_out
:close
:new
:" We shouldn't find any file at this point, test.out must be empty.
:call mkdir('in')
:cd in
:call mkdir('path')
:exec "cd " . cwd
:e Xfind/file.txt
SHoly Grail[34m^[[m:w
:e Xfind/in/file.txt
SJimmy Hoffa[34m^[[m:w
:e Xfind/in/stuff.txt
SAnother Holy Grail[34m^[[m:w
:e Xfind/in/path/file.txt
SE.T.[34m^[[m:w
:set path=Xfind/**
:find file
:exec "w >>" . test_out
:find file[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for find completion.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 164 lines, 3600 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1HSVoyager 2[34m^[[m:w
:exec "set path=" . cwd . "/Xfind/**"
:find voyager
:exec "w >>" . test_out
:find voyager
:exec "w >>" . test_out
:"
:" When current directory is .../foo/y/bar they should be shortened to (in
:" order of appearance):
:"
:"    ./voyager.txt
:"    x/bar/voyager.txt
:cd foo
:cd y
:cd bar
:find voyager
:exec "w >> " . test_out
:find voyager
:exec "w >> " . test_out
:" Check the opposite too:
:cd ..
:cd ..
:cd x
:cd bar
:find voyager
:exec "w >> " . test_out
:find voyager
:exec "w >> " . test_out
:" Check for correct handling of shorten_fname()'s behavior on windows
:exec "cd " . cwd . "/Xfind/in"
:find file
:exec "w >>" . test_out
:" Test for relative to current buffer 'path' item
:exec "cd " . cwd . "/Xfind/"
:set path=./path
:" Open the file where Jimmy Hoffa is found
:e in/file.txt
:" Find the file containing 'E.T.' in the Xfind/in/path directory
:find file
:exec "w >>" . test_out
:"
:" Test that completion works when path=.,,
:"
:set path=.,,
:" Open Jimmy Hoffa file
:e in/file.txt
:exec "w >>" . test_out
:" Search for the file containing Holy Grail in same directory as in/path.txt
:find stu
:exec "w >>" . test_out
:q
:exec "cd " . cwd
:call delete("Xfind", "rf")
:qa!
ENDTEST[?12l[?25h
[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Do all test in a separate window to avoid E211 when we recursively[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" delete the Xfind directory during cleanup[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" This will cause a few errors, do it silently.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset visualbell[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocp viminfo+=nviminfo[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" On windows a stale "Xfind" directory may exist, remove it so that[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" we start from a clean state.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall delete("Xfind", "rf")[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;2Hexec "cd " . cwd . "/Xfind/in"[29;32H[K[30;2Hfind file      [30;17H[K[31;2Hexec "w >>" . test_out
:" Test for relative to current buffer 'path' item
:exec "cd " . cwd . "/Xfind/"[33;30H[K[34;2Hset path=./path[34;17H[K[35;2H" Open the file where Jimmy Hoffa is found
:e in/file.txt[36;15H[K[37;2H" Find the file containing 'E.T.' in the Xfind/in/path directory
:find file      [38;18H[K[39;2Hexec "w >>" . test_out
:"[40;3H[K[41;4HTest that completion works when path=.,,[42;4H[K[43;2Hset path=.,,
:" Open Jimmy Hoffa file
:e in/file.txt[45;15H[K[46;3Hxec "w >>" . test_out
:" Search for the file containing Holy Grail in same directory as in/path.txt
:find stu       [48;17H[K[49;2Hexec "w >>" . test_out
:q[50;3H[K[51;2Hexec "cd " . cwd
:call delete("Xfind", "rf")
:qa![53;5H[K[54;1HENDTEST[55;1H[K[56;1H[7mtest73.in                                                                              [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet cwd=getcwd()[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet test_out = cwd . '/test.out'[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall mkdir('Xfind')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd Xfind[?25l/sources/vim80/src/testdir/Xfind[56;1H[7m/sources/vim80/src/testdir/test73.in[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset path=[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind ...[?25l[57;7H[K[57;7H[?5h[?5l[?12l[?25h[?25l[1m[37m[41mE345: Can't find file "" in path[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w! " . test_out[?25l"/sources/vim80/src/testdir/test.out" [New] 0L, 0C written[28;1H[1m[7m/sources/vim80/src/testdir/test.out[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hclose[?25l[1;1HSVoyager 2[34m^[[m:w
:exec "set path=" . cwd . "/Xfind/**"[2;38H[K[3;1H:find voyager   [3;17H[K[4;1H:exec "w >>" . test_out[4;24H[K[5;1H:find voyager           [5;25H[K[6;1H:exec "w >>" . test_out[6;24H[K[7;1H:"[7;3H[K[8;1H:" When current directory is .../foo/y/bar they should be shortened to (in[8;75H[K[9;1H:" order of appearance):[9;25H[K[10;1H:"[10;3H[K[11;1H:"    ./voyager.txt[11;20H[K[12;1H:"    x/bar/voyager.txt[12;24H[K[13;1H:cd foo[13;8H[K[14;1H:cd y[14;6H[K[15;1H:cd bar[15;8H[K[16;1H:find voyager   [16;17H[K[17;1H:exec "w >> " . test_out[17;25H[K[18;1H:find voyager           [18;25H[K[19;1H:exec "w >> " . test_out[19;25H[K[20;1H:" Check the opposite too:[20;27H[K[21;1H:cd ..[21;7H[K[22;1H:cd ..[22;7H[K[23;1H:cd x[23;6H[K[24;1H:cd bar[24;8H[K[25;1H:find voyager   [25;17H[K[26;1H:exec "w >> " . test_out[26;25H[K[27;1H:find voyager           [27;25H[K[28;1H:exec "w >> " . test_out[28;25H[K[29;2H" Check for correct handling of shorten_fname()'s behavior on windows
:exec "cd " . cwd . "/Xfind/in"
:find file      [31;17H[K[32;2Hexec "w >>" . test_out[32;25H[K[33;2H" Test for relative to current buffer 'path' item
:exec "cd " . cwd . "/Xfind/"
:set path=./path[35;18H[K[36;2H" Open the file where Jimmy Hoffa is found
:e in/file.txt[37;15H[K[38;2H" Find the file containing 'E.T.' in the Xfind/in/path directory
:find file      [39;17H[K[40;2Hexec "w >>" . test_out[41;4H[K[42;4HTest that completion works when path=.,,
:"[43;3H[K[44;2Hset path=.,,[44;15H[K[45;2H" Open Jimmy Hoffa file
:e in/file.txt[46;16H[K[47;2Hexec "w >>" . test_out[47;24H[K[48;2H" Search for the file containing Holy Grail in same directory as in/path.txt
:find stu       [49;17H[K[50;2Hexec "w >>" . test_out
:q[51;3H[K[52;2Hexec "cd " . cwd[52;18H[K[53;2Hcall delete("Xfind", "rf")
:qa![54;5H[K[55;1HENDTEST[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;2Hexec "cd " . cwd . "/Xfind/in"[29;32H[K[30;2Hfind file      [30;17H[K[31;2Hexec "w >>" . test_out
:" Test for relative to current buffer 'path' item
:exec "cd " . cwd . "/Xfind/"[33;30H[K[34;2Hset path=./path[34;17H[K[35;2H" Open the file where Jimmy Hoffa is found
:e in/file.txt[36;15H[K[37;2H" Find the file containing 'E.T.' in the Xfind/in/path directory
:find file      [38;18H[K[39;2Hexec "w >>" . test_out
:"[40;3H[K[41;4HTest that completion works when path=.,,[42;4H[K[43;2Hset path=.,,
:" Open Jimmy Hoffa file
:e in/file.txt[45;15H[K[46;3Hxec "w >>" . test_out
:" Search for the file containing Holy Grail in same directory as in/path.txt
:find stu       [48;17H[K[49;2Hexec "w >>" . test_out
:q[50;3H[K[51;2Hexec "cd " . cwd
:call delete("Xfind", "rf")
:qa![53;5H[K[54;1HENDTEST[55;1H[K[56;1H[7m/sources/vim80/src/testdir/test73.in                                                   [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset path=.[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind ...[?25l[57;7H[K[57;7H[?5h[?5l[?12l[?25h[?25l[1m[37m[41mE32: No file name[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 0L, 0C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hclose[?25l[1;1HSVoyager 2[34m^[[m:w
:exec "set path=" . cwd . "/Xfind/**"[2;38H[K[3;1H:find voyager   [3;17H[K[4;1H:exec "w >>" . test_out[4;24H[K[5;1H:find voyager           [5;25H[K[6;1H:exec "w >>" . test_out[6;24H[K[7;1H:"[7;3H[K[8;1H:" When current directory is .../foo/y/bar they should be shortened to (in[8;75H[K[9;1H:" order of appearance):[9;25H[K[10;1H:"[10;3H[K[11;1H:"    ./voyager.txt[11;20H[K[12;1H:"    x/bar/voyager.txt[12;24H[K[13;1H:cd foo[13;8H[K[14;1H:cd y[14;6H[K[15;1H:cd bar[15;8H[K[16;1H:find voyager   [16;17H[K[17;1H:exec "w >> " . test_out[17;25H[K[18;1H:find voyager           [18;25H[K[19;1H:exec "w >> " . test_out[19;25H[K[20;1H:" Check the opposite too:[20;27H[K[21;1H:cd ..[21;7H[K[22;1H:cd ..[22;7H[K[23;1H:cd x[23;6H[K[24;1H:cd bar[24;8H[K[25;1H:find voyager   [25;17H[K[26;1H:exec "w >> " . test_out[26;25H[K[27;1H:find voyager           [27;25H[K[28;1H:exec "w >> " . test_out[28;25H[K[29;2H" Check for correct handling of shorten_fname()'s behavior on windows
:exec "cd " . cwd . "/Xfind/in"
:find file      [31;17H[K[32;2Hexec "w >>" . test_out[32;25H[K[33;2H" Test for relative to current buffer 'path' item
:exec "cd " . cwd . "/Xfind/"
:set path=./path[35;18H[K[36;2H" Open the file where Jimmy Hoffa is found
:e in/file.txt[37;15H[K[38;2H" Find the file containing 'E.T.' in the Xfind/in/path directory
:find file      [39;17H[K[40;2Hexec "w >>" . test_out[41;4H[K[42;4HTest that completion works when path=.,,
:"[43;3H[K[44;2Hset path=.,,[44;15H[K[45;2H" Open Jimmy Hoffa file
:e in/file.txt[46;16H[K[47;2Hexec "w >>" . test_out[47;24H[K[48;2H" Search for the file containing Holy Grail in same directory as in/path.txt
:find stu       [49;17H[K[50;2Hexec "w >>" . test_out
:q[51;3H[K[52;2Hexec "cd " . cwd[52;18H[K[53;2Hcall delete("Xfind", "rf")
:qa![54;5H[K[55;1HENDTEST[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;2Hexec "cd " . cwd . "/Xfind/in"[29;32H[K[30;2Hfind file      [30;17H[K[31;2Hexec "w >>" . test_out
:" Test for relative to current buffer 'path' item
:exec "cd " . cwd . "/Xfind/"[33;30H[K[34;2Hset path=./path[34;17H[K[35;2H" Open the file where Jimmy Hoffa is found
:e in/file.txt[36;15H[K[37;2H" Find the file containing 'E.T.' in the Xfind/in/path directory
:find file      [38;18H[K[39;2Hexec "w >>" . test_out
:"[40;3H[K[41;4HTest that completion works when path=.,,[42;4H[K[43;2Hset path=.,,
:" Open Jimmy Hoffa file
:e in/file.txt[45;15H[K[46;3Hxec "w >>" . test_out
:" Search for the file containing Holy Grail in same directory as in/path.txt
:find stu       [48;17H[K[49;2Hexec "w >>" . test_out
:q[50;3H[K[51;2Hexec "cd " . cwd
:call delete("Xfind", "rf")
:qa![53;5H[K[54;1HENDTEST[55;1H[K[56;1H[7m/sources/vim80/src/testdir/test73.in                                                   [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset path=.,,[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind ...[?25l[57;7H[K[57;7H[?5h[?5l[?12l[?25h[?25l[1m[37m[41mE32: No file name[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 0L, 0C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hclose[?25l[1;1HSVoyager 2[34m^[[m:w
:exec "set path=" . cwd . "/Xfind/**"[2;38H[K[3;1H:find voyager   [3;17H[K[4;1H:exec "w >>" . test_out[4;24H[K[5;1H:find voyager           [5;25H[K[6;1H:exec "w >>" . test_out[6;24H[K[7;1H:"[7;3H[K[8;1H:" When current directory is .../foo/y/bar they should be shortened to (in[8;75H[K[9;1H:" order of appearance):[9;25H[K[10;1H:"[10;3H[K[11;1H:"    ./voyager.txt[11;20H[K[12;1H:"    x/bar/voyager.txt[12;24H[K[13;1H:cd foo[13;8H[K[14;1H:cd y[14;6H[K[15;1H:cd bar[15;8H[K[16;1H:find voyager   [16;17H[K[17;1H:exec "w >> " . test_out[17;25H[K[18;1H:find voyager           [18;25H[K[19;1H:exec "w >> " . test_out[19;25H[K[20;1H:" Check the opposite too:[20;27H[K[21;1H:cd ..[21;7H[K[22;1H:cd ..[22;7H[K[23;1H:cd x[23;6H[K[24;1H:cd bar[24;8H[K[25;1H:find voyager   [25;17H[K[26;1H:exec "w >> " . test_out[26;25H[K[27;1H:find voyager           [27;25H[K[28;1H:exec "w >> " . test_out[28;25H[K[29;2H" Check for correct handling of shorten_fname()'s behavior on windows
:exec "cd " . cwd . "/Xfind/in"
:find file      [31;17H[K[32;2Hexec "w >>" . test_out[32;25H[K[33;2H" Test for relative to current buffer 'path' item
:exec "cd " . cwd . "/Xfind/"
:set path=./path[35;18H[K[36;2H" Open the file where Jimmy Hoffa is found
:e in/file.txt[37;15H[K[38;2H" Find the file containing 'E.T.' in the Xfind/in/path directory
:find file      [39;17H[K[40;2Hexec "w >>" . test_out[41;4H[K[42;4HTest that completion works when path=.,,
:"[43;3H[K[44;2Hset path=.,,[44;15H[K[45;2H" Open Jimmy Hoffa file
:e in/file.txt[46;16H[K[47;2Hexec "w >>" . test_out[47;24H[K[48;2H" Search for the file containing Holy Grail in same directory as in/path.txt
:find stu       [49;17H[K[50;2Hexec "w >>" . test_out
:q[51;3H[K[52;2Hexec "cd " . cwd[52;18H[K[53;2Hcall delete("Xfind", "rf")
:qa![54;5H[K[55;1HENDTEST[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;2Hexec "cd " . cwd . "/Xfind/in"[29;32H[K[30;2Hfind file      [30;17H[K[31;2Hexec "w >>" . test_out
:" Test for relative to current buffer 'path' item
:exec "cd " . cwd . "/Xfind/"[33;30H[K[34;2Hset path=./path[34;17H[K[35;2H" Open the file where Jimmy Hoffa is found
:e in/file.txt[36;15H[K[37;2H" Find the file containing 'E.T.' in the Xfind/in/path directory
:find file      [38;18H[K[39;2Hexec "w >>" . test_out
:"[40;3H[K[41;4HTest that completion works when path=.,,[42;4H[K[43;2Hset path=.,,
:" Open Jimmy Hoffa file
:e in/file.txt[45;15H[K[46;3Hxec "w >>" . test_out
:" Search for the file containing Holy Grail in same directory as in/path.txt
:find stu       [48;17H[K[49;2Hexec "w >>" . test_out
:q[50;3H[K[51;2Hexec "cd " . cwd
:call delete("Xfind", "rf")
:qa![53;5H[K[54;1HENDTEST[55;1H[K[56;1H[7m/sources/vim80/src/testdir/test73.in                                                   [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset path=./**[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind ...[?25l[57;7H[K[57;7H[?5h[?5l[?12l[?25h[?25l[1m[37m[41mE32: No file name[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 0L, 0C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hclose[?25l[1;1HSVoyager 2[34m^[[m:w
:exec "set path=" . cwd . "/Xfind/**"[2;38H[K[3;1H:find voyager   [3;17H[K[4;1H:exec "w >>" . test_out[4;24H[K[5;1H:find voyager           [5;25H[K[6;1H:exec "w >>" . test_out[6;24H[K[7;1H:"[7;3H[K[8;1H:" When current directory is .../foo/y/bar they should be shortened to (in[8;75H[K[9;1H:" order of appearance):[9;25H[K[10;1H:"[10;3H[K[11;1H:"    ./voyager.txt[11;20H[K[12;1H:"    x/bar/voyager.txt[12;24H[K[13;1H:cd foo[13;8H[K[14;1H:cd y[14;6H[K[15;1H:cd bar[15;8H[K[16;1H:find voyager   [16;17H[K[17;1H:exec "w >> " . test_out[17;25H[K[18;1H:find voyager           [18;25H[K[19;1H:exec "w >> " . test_out[19;25H[K[20;1H:" Check the opposite too:[20;27H[K[21;1H:cd ..[21;7H[K[22;1H:cd ..[22;7H[K[23;1H:cd x[23;6H[K[24;1H:cd bar[24;8H[K[25;1H:find voyager   [25;17H[K[26;1H:exec "w >> " . test_out[26;25H[K[27;1H:find voyager           [27;25H[K[28;1H:exec "w >> " . test_out[28;25H[K[29;2H" Check for correct handling of shorten_fname()'s behavior on windows
:exec "cd " . cwd . "/Xfind/in"
:find file      [31;17H[K[32;2Hexec "w >>" . test_out[32;25H[K[33;2H" Test for relative to current buffer 'path' item
:exec "cd " . cwd . "/Xfind/"
:set path=./path[35;18H[K[36;2H" Open the file where Jimmy Hoffa is found
:e in/file.txt[37;15H[K[38;2H" Find the file containing 'E.T.' in the Xfind/in/path directory
:find file      [39;17H[K[40;2Hexec "w >>" . test_out[41;4H[K[42;4HTest that completion works when path=.,,
:"[43;3H[K[44;2Hset path=.,,[44;15H[K[45;2H" Open Jimmy Hoffa file
:e in/file.txt[46;16H[K[47;2Hexec "w >>" . test_out[47;24H[K[48;2H" Search for the file containing Holy Grail in same directory as in/path.txt
:find stu       [49;17H[K[50;2Hexec "w >>" . test_out
:q[51;3H[K[52;2Hexec "cd " . cwd[52;18H[K[53;2Hcall delete("Xfind", "rf")
:qa![54;5H[K[55;1HENDTEST[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;2Hexec "cd " . cwd . "/Xfind/in"[29;32H[K[30;2Hfind file      [30;17H[K[31;2Hexec "w >>" . test_out
:" Test for relative to current buffer 'path' item
:exec "cd " . cwd . "/Xfind/"[33;30H[K[34;2Hset path=./path[34;17H[K[35;2H" Open the file where Jimmy Hoffa is found
:e in/file.txt[36;15H[K[37;2H" Find the file containing 'E.T.' in the Xfind/in/path directory
:find file      [38;18H[K[39;2Hexec "w >>" . test_out
:"[40;3H[K[41;4HTest that completion works when path=.,,[42;4H[K[43;2Hset path=.,,
:" Open Jimmy Hoffa file
:e in/file.txt[45;15H[K[46;3Hxec "w >>" . test_out
:" Search for the file containing Holy Grail in same directory as in/path.txt
:find stu       [48;17H[K[49;2Hexec "w >>" . test_out
:q[50;3H[K[51;2Hexec "cd " . cwd
:call delete("Xfind", "rf")
:qa![53;5H[K[54;1HENDTEST[55;1H[K[56;1H[7m/sources/vim80/src/testdir/test73.in                                                   [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h" We shouldn't find any file at this point, test.out must be empty.[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall mkdir('in')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd in[?25l/sources/vim80/src/testdir/Xfind/in[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall mkdir('path')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexec "cd " . cwd[?25l/sources/vim80/src/testdir[56;1H[7mtest73.in                           [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25he Xfind/file.txt[?25l"Xfind/file.txt" [New File][28;1H[1m[7mXfind/file.txt[1;1H[?12l[?25h[?25l[m[57;1H[1m-- INSERT --[m[57;13H[K[57;1H[K[1;1HHoly Grail[28;16H[1m[7m[+][1;10H[?12l[?25h[?25l[57;1H[m:[?12l[?25hw[?25l"Xfind/file.txt" [New] 1L, 11C written[28;16H[1m[7m    [1;10H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25he Xfind/in/file.txt[?25l"Xfind/in/file.txt" [New File][1;1H[K[28;7H[1m[7min/file.txt[1;1H[?12l[?25h[?25l[m[57;1H[1m-- INSERT --[m[57;13H[K[57;1H[K[1;1HJimmy Hoffa[28;19H[1m[7m[+][1;11H[?12l[?25h[?25l[57;1H[m:[?12l[?25hw[?25l"Xfind/in/file.txt" [New] 1L, 12C written[28;19H[1m[7m    [1;11H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25he Xfind/in/stuff.txt[?25l"Xfind/in/stuff.txt" [New File][1;1H[K[28;10H[1m[7mstuff.txt[1;1H[?12l[?25h[?25l[m[57;1H[1m-- INSERT --[m[57;13H[K[57;1H[K[1;1HAnother Holy Grail[28;20H[1m[7m[+][1;18H[?12l[?25h[?25l[57;1H[m:[?12l[?25hw[?25l"Xfind/in/stuff.txt" [New] 1L, 19C written[28;20H[1m[7m    [1;18H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25he Xfind/in/path/file.txt[?25l"Xfind/in/path/file.txt" [New File][1;1H[K[28;10H[1m[7mpath/file.txt[1;1H[?12l[?25h[?25l[m[57;1H[1m-- INSERT --[m[57;13H[K[57;1H[K[1;1HE.T.[28;24H[1m[7m[+][1;4H[?12l[?25h[?25l[57;1H[m:[?12l[?25hw[?25l"Xfind/in/path/file.txt" [New] 1L, 5C written[28;24H[1m[7m    [1;4H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset path=Xfind/**[?25l[1;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind file...[?25l[57;7H./Xfind/file.txt[?5h[?5l[?12l[?25h[?25l"Xfind/file.txt" [57;18H[K[57;18H1L, 11C[1;1HHoly Grail[28;7H[1m[7mfile.txtf         [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 11C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind file...[?25l[57;7H./Xfind/file.txt[?5h[?5l[?12l[?25h...[?25l[57;7Hin/file.txt[57;18H[K[57;18H[?12l[?25h[?25l"Xfind/in/file.txt" 1L, 12C[1;1HJimmy Hoffa[28;7H[1m[7min/file.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 12C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind file...[?25l[57;7H./Xfind/file.txt[?5h[?5l[?12l[?25h...[?25l[57;7Hin/file.txt[57;18H[K[57;18H[?12l[?25h...[?25l[57;7Hpath/file.txt[57;20H[K[57;20H[?12l[?25h[?25l"Xfind/in/path/file.txt" 1L, 5C[1;1HE.T.[1;5H[K[28;10H[1m[7mpath/file.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 5C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Rerun the previous three find completions, using fullpath in 'path'[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexec "set path=" . cwd . "/Xfind/**"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind file...[?25l[57;7H./Xfind/file.txt[?5h[?5l[?12l[?25h[?25l"Xfind/file.txt" [57;18H[K[57;18H1L, 11C[1;1HHoly Grail[28;7H[1m[7mfile.txtf         [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" .  test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 11C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind file...[?25l[57;7H./Xfind/file.txt[?5h[?5l[?12l[?25h...[?25l[57;7Hin/file.txt[57;18H[K[57;18H[?12l[?25h[?25l"Xfind/in/file.txt" 1L, 12C[1;1HJimmy Hoffa[28;7H[1m[7min/file.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 12C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind file...[?25l[57;7H./Xfind/file.txt[?5h[?5l[?12l[?25h...[?25l[57;7Hin/file.txt[57;18H[K[57;18H[?12l[?25h...[?25l[57;7Hpath/file.txt[57;20H[K[57;20H[?12l[?25h[?25l"Xfind/in/path/file.txt" 1L, 5C[1;1HE.T.[1;5H[K[28;10H[1m[7mpath/file.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 5C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Same steps again, using relative and fullpath items that point to the same[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" recursive location.[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" This is to test that there are no duplicates in the completion list.[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexec "set path+=Xfind/**"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind file...[?25l[57;7H./Xfind/file.txt[?5h[?5l[?12l[?25h[?25l"Xfind/file.txt" [57;18H[K[57;18H1L, 11C[1;1HHoly Grail[28;7H[1m[7mfile.txtf         [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" .  test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 11C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind file...[?25l[57;7H./Xfind/file.txt[?5h[?5l[?12l[?25h...[?25l[57;7Hin/file.txt[57;18H[K[57;18H[?12l[?25h[?25l"Xfind/in/file.txt" 1L, 12C[1;1HJimmy Hoffa[28;7H[1m[7min/file.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 12C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind file...[?25l[57;7H./Xfind/file.txt[?5h[?5l[?12l[?25h...[?25l[57;7Hin/file.txt[57;18H[K[57;18H[?12l[?25h...[?25l[57;7Hpath/file.txt[57;20H[K[57;20H[?12l[?25h[?25l"Xfind/in/path/file.txt" 1L, 5C[1;1HE.T.[1;5H[K[28;10H[1m[7mpath/file.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 5C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind file...[?25l[57;7H./Xfind/file.txt[?5h[?5l[?12l[?25h...[?25l[57;7Hin/file.txt[57;18H[K[57;18H[?12l[?25h[?25l"Xfind/in/file.txt" 1L, 12C[1;1HJimmy Hoffa[28;10H[1m[7mfile.txte      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h" Test find completion for directory of current buffer, which at this point[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" is Xfind/in/file.txt.[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset path=.[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind st...[?25luff.txt[?12l[?25h[?25l"Xfind/in/stuff.txt" 1L, 19C[1;1HAnother Holy Grail[28;10H[1m[7mstuff.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" .  test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 19C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test find completion for empty path item ",," which is the current directory[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd Xfind[?25l/sources/vim80/src/testdir/Xfind[28;1H[1m[7min/stuff.txtf       [m[56;1H[7m/sources/vim80/src/testdir/test73.in[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset path=,,[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind f...[?25lile.txt[?12l[?25h...[?25l[57;15H[K[57;15H[?12l[?25h[?25l"file.txt" [57;12H[K[57;12H1L, 11C[1;1HHoly Grail[1;11H[K[28;1H[1m[7mfile.txt.     [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 11C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test shortening of[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    foo/x/bar/voyager.txt[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    foo/y/bar/voyager.txt[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" When current directory is above foo/ they should be shortened to (in order[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" of appearance):[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    x/bar/voyager.txt[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    y/bar/voyager.txt[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall mkdir('foo')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd foo[?25l/sources/vim80/src/testdir/Xfind/foo[28;1H[1m[7m/sources/vim80/src/testdir/Xfind/file.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall mkdir('x')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall mkdir('y')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd x[?25l/sources/vim80/src/testdir/Xfind/foo/x[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall mkdir('bar')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd ..[?25l/sources/vim80/src/testdir/Xfind/foo[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd y[?25l/sources/vim80/src/testdir/Xfind/foo/y[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall mkdir('bar')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd ..[?25l/sources/vim80/src/testdir/Xfind/foo[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd ..[?25l/sources/vim80/src/testdir/Xfind[28;1H[1m[7mfile.txt/                                  [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h" We should now be in the Xfind directory[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he foo/x/bar/voyager.txt[?25l"foo/x/bar/voyager.txt" [New File][1;1H[K[28;2H[1m[7moo/x/bar/voyager.txt[1;1H[?12l[?25h[?25l[m[57;1H[1m-- INSERT --[m[57;13H[K[57;1H[K[1;1HVoyager 1[28;23H[1m[7m[+][1;9H[?12l[?25h[?25l[57;1H[m:[?12l[?25hw[?25l"foo/x/bar/voyager.txt" [New] 1L, 10C written[28;23H[1m[7m    [1;9H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25he foo/y/bar/voyager.txt[?25l"foo/y/bar/voyager.txt" [New File][1;1H[K[28;5H[1m[7my/[1;1H[?12l[?25h[?25l[m[57;1H[1m-- INSERT --[m[57;13H[K[57;1H[K[1;1HVoyager 2[28;23H[1m[7m[+][1;9H[?12l[?25h[?25l[57;1H[m:[?12l[?25hw[?25l"foo/y/bar/voyager.txt" [New] 1L, 10C written[28;23H[1m[7m    [1;9H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "set path=" . cwd . "/Xfind/**"[?25l[1;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind voyager...[?25l[57;7Hx/bar/voyager.txt[?5h[?5l[?12l[?25h[?25l"foo/x/bar/voyager.txt" 1L, 10C[1;9H1[28;5H[1m[7mx/[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 10C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind voyager...[?25l[57;7Hx/bar/voyager.txt[?5h[?5l[?12l[?25h...[?25l[57;7Hy[57;24H[K[57;24H[?12l[?25h[?25l"foo/y/bar/voyager.txt" 1L, 10C[1;9H2[28;5H[1m[7my/[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 10C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" When current directory is .../foo/y/bar they should be shortened to (in[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" order of appearance):[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    ./voyager.txt[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    x/bar/voyager.txt[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd foo[?25l/sources/vim80/src/testdir/Xfind/foo[28;1H[1m[7my/bar/voyager.txt.     [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcd y[?25l/sources/vim80/src/testdir/Xfind/foo/y[28;1H[1m[7mbar/voyager.txt   [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcd bar[?25l/sources/vim80/src/testdir/Xfind/foo/y/bar[28;1H[1m[7mvoyager.txt.     [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hfind voyager...[?25l[57;7H./voyager.txt[?5h[?5l[?12l[?25h[?25l"voyager.txt" [57;15H[K[57;15H1L, 10C[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexec "w >> " . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 10C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind voyager...[?25l[57;7H./voyager.txt[?5h[?5l[?12l[?25h...[?25l[57;7Hx/bar/voyager.txt[?12l[?25h[?25l"/sources/vim80/src/testdir/Xfind/foo/x/bar/voyager.txt" 1L, 10C[1;9H1[28;1H[1m[7m/sources/vim80/src/testdir/Xfind/foo/x/bar/voyager.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >> " . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 10C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Check the opposite too:[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd ..[?25l/sources/vim80/src/testdir/Xfind/foo/y[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd ..[?25l/sources/vim80/src/testdir/Xfind/foo[28;1H[1m[7mx/bar/voyager.txtc                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcd x[?25l/sources/vim80/src/testdir/Xfind/foo/x[28;1H[1m[7mbar/voyager.txt   [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcd bar[?25l/sources/vim80/src/testdir/Xfind/foo/x/bar[28;1H[1m[7mvoyager.txt.     [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hfind voyager...[?25l[57;7H./voyager.txt[?5h[?5l[?12l[?25h[?25l"voyager.txt" [57;15H[K[57;15H1L, 10C[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexec "w >> " . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 10C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind voyager...[?25l[57;7H./voyager.txt[?5h[?5l[?12l[?25h...[?25l[57;7Hy/bar/voyager.txt[?12l[?25h[?25l"/sources/vim80/src/testdir/Xfind/foo/y/bar/voyager.txt" 1L, 10C[1;9H2[28;1H[1m[7m/sources/vim80/src/testdir/Xfind/foo/y/bar/voyager.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >> " . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 10C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Check for correct handling of shorten_fname()'s behavior on windows[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexec "cd " . cwd . "/Xfind/in"[?25l/sources/vim80/src/testdir/Xfind/in[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind file...[?25l[57;7H./file.txt[?5h[?5l[?12l[?25h[?25l"file.txt" [57;12H[K[57;12H1L, 12C[1;1HJimmy Hoffa[28;1H[1m[7mfile.txt/                                               [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 12C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test for relative to current buffer 'path' item[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexec "cd " . cwd . "/Xfind/"[?25l/sources/vim80/src/testdir/Xfind[28;1H[1m[7min/file.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset path=./path[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Open the file where Jimmy Hoffa is found[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he in/file.txt[?25l"in/file.txt" 1L, 12C[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Find the file containing 'E.T.' in the Xfind/in/path directory[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind file...[?25ltxt[?12l[?25h[?25l"in/path/file.txt" 1L, 5C[1;1HE.T.[1;5H[K[28;4H[1m[7mpath/file.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 5C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test that completion works when path=.,,[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset path=.,,[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Open Jimmy Hoffa file[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he in/file.txt[?25l"in/file.txt" 1L, 12C[1;1HJimmy Hoffa[28;4H[1m[7mfile.txte      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 12C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Search for the file containing Holy Grail in same directory as in/path.txt[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfind stu...[?25lff.txt[?12l[?25h[?25l"in/stuff.txt" 1L, 19C[1;1HAnother Holy Grail[28;4H[1m[7mstuff.txt[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexec "w >>" . test_out[?25l"/sources/vim80/src/testdir/test.out" 1L, 19C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hq[?25l[1;1HSVoyager 2[34m^[[m:w[1;15H[K[2;1H:exec "set path=" . cwd . "/Xfind/**"[2;38H[K[3;1H:find voyager   [3;17H[K[4;1H:exec "w >>" . test_out[4;24H[K[5;1H:find voyager           [5;25H[K[6;1H:exec "w >>" . test_out[6;24H[K[7;1H:"[7;3H[K[8;1H:" When current directory is .../foo/y/bar they should be shortened to (in[8;75H[K[9;1H:" order of appearance):[9;25H[K[10;1H:"[10;3H[K[11;1H:"    ./voyager.txt[11;20H[K[12;1H:"    x/bar/voyager.txt[12;24H[K[13;1H:cd foo[13;8H[K[14;1H:cd y[14;6H[K[15;1H:cd bar[15;8H[K[16;1H:find voyager   [16;17H[K[17;1H:exec "w >> " . test_out[17;25H[K[18;1H:find voyager           [18;25H[K[19;1H:exec "w >> " . test_out[19;25H[K[20;1H:" Check the opposite too:[20;27H[K[21;1H:cd ..[21;7H[K[22;1H:cd ..[22;7H[K[23;1H:cd x[23;6H[K[24;1H:cd bar[24;8H[K[25;1H:find voyager   [25;17H[K[26;1H:exec "w >> " . test_out[26;25H[K[27;1H:find voyager           [27;25H[K[28;1H:exec "w >> " . test_out[28;25H[K[29;2H" Check for correct handling of shorten_fname()'s behavior on windows
:exec "cd " . cwd . "/Xfind/in"
:find file      [31;17H[K[32;2Hexec "w >>" . test_out[32;25H[K[33;2H" Test for relative to current buffer 'path' item
:exec "cd " . cwd . "/Xfind/"
:set path=./path[35;18H[K[36;2H" Open the file where Jimmy Hoffa is found
:e in/file.txt[37;15H[K[38;2H" Find the file containing 'E.T.' in the Xfind/in/path directory
:find file      [39;17H[K[40;2Hexec "w >>" . test_out[41;4H[K[42;4HTest that completion works when path=.,,
:"[43;3H[K[44;2Hset path=.,,[44;15H[K[45;2H" Open Jimmy Hoffa file
:e in/file.txt[46;16H[K[47;2Hexec "w >>" . test_out[47;24H[K[48;2H" Search for the file containing Holy Grail in same directory as in/path.txt
:find stu       [49;17H[K[50;2Hexec "w >>" . test_out
:q[51;3H[K[52;2Hexec "cd " . cwd[52;18H[K[53;2Hcall delete("Xfind", "rf")
:qa![54;5H[K[55;1HENDTEST[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexec "cd " . cwd[?25l/sources/vim80/src/testdir[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall delete("Xfind", "rf")[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test73 = test61; then \
#	  if diff test.out test73.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test73.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test73.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test75.failed test.ok test.out X* viminfo
cp test75.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test75.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test75.in" 41 lines, 1000 characters[1;1HTests for maparg().
Also test utf8 map with a 0x80 byte.

STARTTEST
:so small.vim
:so mbyte.vim
:set cpo-=<
:set encoding=utf8
:" Test maparg() with a string result
:map foo<C-V> is<F4>foo
:vnoremap <script> <buffer> <expr> <silent> bar isbar
:call append('$', maparg('foo<C-V>'))
:call append('$', string(maparg('foo<C-V>', '', 0, 1)))
:call append('$', string(maparg('bar', '', 0, 1)))
:map <buffer> <nowait> foo bar
:call append('$', string(maparg('foo', '', 0, 1)))
:"
:map abc x<char-114>x
:call append('$', maparg('abc'))
:map abc y<S-char-114>y
:call append('$', maparg('abc'))
:"
Go[34m^[[m:"
:" Outside of the range, minimum
:inoremap <Char-0x1040> a
:execute "normal a\u1040\<Esc>"
:" Inside of the range, minimum
:inoremap <Char-0x103f> b
:execute "normal a\u103f\<Esc>"
:" Inside of the range, maximum
:inoremap <Char-0xf03f> c
:execute "normal a\uf03f\<Esc>"
:" Outside of the range, maximum
:inoremap <Char-0xf040> d
:execute "normal a\uf040\<Esc>"
:"
:/^eof/+1,$w! test.out
:qa!
ENDTEST

eof
[1m[34m~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for maparg().[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 34 lines, 919 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[39;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo-=<[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset encoding=utf8[?25l[27m[23m[m[H[2J[1;1HTests for maparg().
Also test utf8 map with a 0x80 byte.

STARTTEST
:so small.vim
:so mbyte.vim
:set cpo-=<
:set encoding=utf8
:" Test maparg() with a string result
:map foo<C-V> is<F4>foo
:vnoremap <script> <buffer> <expr> <silent> bar isbar
:call append('$', maparg('foo<C-V>'))
:call append('$', string(maparg('foo<C-V>', '', 0, 1)))
:call append('$', string(maparg('bar', '', 0, 1)))
:map <buffer> <nowait> foo bar
:call append('$', string(maparg('foo', '', 0, 1)))
:"
:map abc x<char-114>x
:call append('$', maparg('abc'))
:map abc y<S-char-114>y
:call append('$', maparg('abc'))
:"
Go[34m^[[m:"
:" Outside of the range, minimum
:inoremap <Char-0x1040> a
:execute "normal a\u1040\<Esc>"
:" Inside of the range, minimum
:inoremap <Char-0x103f> b
:execute "normal a\u103f\<Esc>"
:" Inside of the range, maximum
:inoremap <Char-0xf03f> c
:execute "normal a\uf03f\<Esc>"
:" Outside of the range, maximum
:inoremap <Char-0xf040> d
:execute "normal a\uf040\<Esc>"
:"
:/^eof/+1,$w! test.out
:qa!
ENDTEST

eof
[1m[34m~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [40;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h" Test maparg() with a string result[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap foo<C-V> is<F4>foo[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hvnoremap <script> <buffer> <expr> <silent> bar isbar[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append('$', maparg('foo<C-V>'))[?25l[42;1His<F4>foo[42;10H[K[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append('$', string(maparg('foo<C-V>', '', 0, 1)))[?25l[43;1H{'silent': 0, 'noremap': 0, 'lhs': 'foo<C-V>', 'mode': ' ', 'nowait': 0, 'expr': 0, 'sii[44;1Hd': 0, 'rhs': 'is<F4>foo', 'buffer': 0}[44;40H[K[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append('$', string(maparg('bar', '', 0, 1)))[?25l[45;1H{'silent': 1, 'noremap': 1, 'lhs': 'bar', 'mode': 'v', 'nowait': 0, 'expr': 1, 'sid': 00[46;1H, 'rhs': 'isbar', 'buffer': 1}[46;31H[K[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap <buffer> <nowait> foo bar[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append('$', string(maparg('foo', '', 0, 1)))[?25l[47;1H{'silent': 0, 'noremap': 0, 'lhs': 'foo', 'mode': ' ', 'nowait': 1, 'expr': 0, 'sid': 00[48;1H, 'rhs': 'bar', 'buffer': 1}[48;29H[K[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap abc x<char-114>x[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append('$', maparg('abc'))[?25l[49;1Hxrx[49;4H[K[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap abc y<S-char-114>y[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append('$', maparg('abc'))[?25l[50;1HyRy[50;4H[K[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[40;1H[?12l[?25h[50;1H[?25l[51;1H[K[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Outside of the range, minimum[?25l[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hinoremap <Char-0x1040> a[?25l[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexecute "normal a\u1040\<Esc>"[?25l[51;1Ha[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Inside of the range, minimum[?25l[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hinoremap <Char-0x103f> b[?25l[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexecute "normal a\u103f\<Esc>"[?25l[51;2Hb[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Inside of the range, maximum[?25l[51;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hinoremap <Char-0xf03f> c[?25l[51;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexecute "normal a\uf03f\<Esc>"[?25l[51;3Hc[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Outside of the range, maximum[?25l[51;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hinoremap <Char-0xf040> d[?25l[51;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexecute "normal a\uf040\<Esc>"[?25l[51;4Hd[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[51;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^eof/+1,$w! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 7 lines, 384 characters written[51;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test75 = test61; then \
#	  if diff test.out test75.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test75.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test75.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test77.failed test.ok test.out X* viminfo
cp test77.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test77.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test77.in" 30 lines, 719 characters[1;1HInserts 2 million lines with consecutive integers starting from 1
(essentially, the output of GNU's seq 1 2000000), writes them to Xtest
and writes its cksum to test.out.

We need 2 million lines to trigger a call to mf_hash_grow().  If it would mess
up the lines the checksum would differ.

cksum is part of POSIX and so should be available on most Unixes.
If it isn't available then the test will be skipped.

STARTTEST
:so small.vim
:if !executable("cksum")
: e! test.ok
: w! test.out
: qa!
:endif
:set fileformat=unix undolevels=-1
ggdG
:let i = 1
:while i <= 2000000 | call append(i, range(i, i + 99)) | let i += 100 | endwhile
ggdd
:w! Xtest
:r !cksum Xtest
:s/\s/ /g
:set fileformat&
:.w! test.out
:qa!
ENDTEST

[1m[34m~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HInserts 2 million lines with consecutive integers starting from 1[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[11;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 17 lines, 288 characters written[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[12;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[29;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !executable("cksum")[?25l
:  [?12l[?25h: e! test.ok
[?25l:  [?12l[?25h: w! test.out
[?25l:  [?12l[?25h: qa!
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1HInserts 2 million lines with consecutive integers starting from 1
(essentially, the output of GNU's seq 1 2000000), writes them to Xtest
and writes its cksum to test.out.[57;1H[K[30;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset fileformat=unix undolevels=-1[?25l[30;1H[?12l[?25h[1;1H[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [m[57;1H--No lines in buffer--[57;23H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet i = 1[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwhile i <= 2000000 | call append(i, range(i, i + 99)) | let i += 100 | endwhile[?25l[2;1H1[2;2H[K[3;1H2[3;2H[K[4;1H3[4;2H[K[5;1H4[5;2H[K[6;1H5[6;2H[K[7;1H6[7;2H[K[8;1H7[8;2H[K[9;1H8[9;2H[K[10;1H9[10;2H[K[11;1H10[11;3H[K[12;1H11[12;3H[K[13;1H12[13;3H[K[14;1H13[14;3H[K[15;1H14[15;3H[K[16;1H15[16;3H[K[17;1H16[17;3H[K[18;1H17[18;3H[K[19;1H18[19;3H[K[20;1H19[20;3H[K[21;1H20[21;3H[K[22;1H21[22;3H[K[23;1H22[23;3H[K[24;1H23[24;3H[K[25;1H24[25;3H[K[26;1H25[26;3H[K[27;1H26[27;3H[K[28;1H27[28;3H[K[29;1H28[29;3H[K[30;1H29[30;3H[K[31;1H30[31;3H[K[32;1H31[32;3H[K[33;1H32[33;3H[K[34;1H33[34;3H[K[35;1H34[35;3H[K[36;1H35[36;3H[K[37;1H36[37;3H[K[38;1H37[38;3H[K[39;1H38[39;3H[K[40;1H39[40;3H[K[41;1H40[41;3H[K[42;1H41[42;3H[K[43;1H42[43;3H[K[44;1H43[44;3H[K[45;1H44[45;3H[K[46;1H45[46;3H[K[47;1H46[47;3H[K[48;1H47[48;3H[K[49;1H48[49;3H[K[50;1H49[50;3H[K[51;1H50[51;3H[K[52;1H51[52;3H[K[53;1H52[53;3H[K[54;1H53[54;3H[K[55;1H54[55;3H[K[56;1H55[56;3H[K[1;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H56[57;1H[K[1;1H[?12l[?25h
[?25l[57;1H:[?12l[?25hw! Xtest[?25l"Xtest" [57;9H[K[57;9H[New File] 2000000 lines, 14888896 characters written[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hr !cksum Xtest[?25l[?12l[?25h[27m[23m[m[H[2J[?25l[1;1H1
2
3678979763 14888896 Xtest
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25hs/\s/ /g[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformat&[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 1 line, 26 characters written[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test77 = test61; then \
#	  if diff test.out test77.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test77.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test77.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test79.failed test.ok test.out X* viminfo
cp test79.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test79.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test79.in" 255 lines, 3381 characters[1;1HTest for *sub-replace-special* and *sub-replace-expression* on :substitute.
Test for submatch() on :substitue.
Test for *:s%* on :substitute.
Test for :s replacing \n with  line break.

STARTTEST
:so small.vim
ENDTEST

Results of test71:

STARTTEST
:set magic
:set cpo&
/^TEST/
j:s/A/&&/
j:s/B/\&/
j:s/C\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)/\0\9\8\7\6\5\4\3\2\1/
j:s/D/d/
j:s/E/~/
j:s/F/\~/
j:s/G/\ugg/
j:s/H/\Uh\Eh/
j:s/I/\lII/
j:s/J/\LJ\EJ/
j:s/K/\Uk\ek/
j:s/L/[34m^V^M[m/
j:s/M/\r/
j:s/N/\[34m^V^M[m/
j:s/O/\n/
j:s/P/\b/
j:s/Q/\t/
j:s/R/\\/
j:s/S/\c/
j:s/T/[34m^V^@[m/
j:s/U/\L\uuUu\l\EU/
j:s/V/\U\lVvV\u\Ev/
ENDTEST

TEST_1:
A
B
C123456789
D
E
F
G
H
I
J
K
lLl
mMm
nNn
oOo
pPp[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for *sub-replace-special* and *sub-replace-expression* on :substitute.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[6;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 1 line, 14 characters written[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[7;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[8;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[12;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[13;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H25 lines, 347 characters written[13;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[13;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[38;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^TEST/[?25l[57;7H[K[57;1H[40;1H[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/A/&&/[?25l[41;2HA[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/B/\&/[?25l[42;1H&[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/C\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)/\0\9\8\7\6\5\4\3\2\1/[?25l[43;11H987654321[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/D/d/[?25l[44;1Hd[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/E/~/[?25l[45;1Hd[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/F/\~/[?25l[46;1H~[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/G/\ugg/[?25l[47;2Hg[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/H/\Uh\Eh/[?25l[48;2Hh[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/I/\lII/[?25l[49;1HiI[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/J/\LJ\EJ/[?25l[50;1HjJ[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/K/\Uk\ek/[?25l[51;2Hk[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/L/^[34m^M[m/[?25l[53;56r[53;1H[L[1;57r[52;2H[K[53;1Hl[57;1H[K[53;1H[?12l[?25h
[?25l


:[?12l[?25hs/M/\r/[?25l[54;2H[K[55;1Hm[55;2H[K[56;1HnNn[55;1H[?12l[?25h
[?25l[57;1H[K[57;1H:[?12l[?25hs/N/\^[34m^M[m/[?25l[56;2H[34m^M[mn[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HoOo[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/O/\n/[?25l[56;2H[34m^@[mo[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HpPp[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/P/\b/[?25l[56;2H[34m^H[mp[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HqQq[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/Q/\t/[?25l[56;2H       q[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HrRr[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/R/\\/[?25l[56;2H\[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HsSs[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/S/\c/[?25l[56;2Hc[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HtTt[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/T/^[34m^@[m/[?25l[56;2H[34m^@[mt[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HU[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/U/\L\uuUu\l\EU/[?25l[56;2HuuU[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HV[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/V/\U\lVvV\u\Ev/[?25l[56;1HvVVv[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set nomagic[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H25 lines, 351 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[25M[1;57r[32;1H:set cpo&
/^TEST/
j:s/A/&&/
j:s/B/\&/
j:s/\mC\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)/\0\9\8\7\6\5\4\3\2\1/
j:s/D/d/
j:s/E/~/
j:s/F/\~/
j:s/G/\ugg/
j:s/H/\Uh\Eh/
j:s/I/\lII/
j:s/J/\LJ\EJ/
j:s/K/\Uk\ek/
j:s/L/[34m^V^M[m/
j:s/M/\r/
j:s/N/\[34m^V^M[m/
j:s/O/\n/
j:s/P/\b/
j:s/Q/\t/
j:s/R/\\/
j:s/S/\c/
j:s/T/[34m^V^@[m/
j:s/U/\L\uuUu\l\EU/
j:s/V/\U\lVvV\u\Ev/
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nomagic[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^TEST/[?25l[57;7H[K[57;1H[1;56r[56;1H
[1;57r[56;1HTEST_2:[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HA[?12l[?25h[?25l
:[?12l[?25hs/A/&&/[?25l[56;1H&&[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HB[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/B/\&/[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HC123456789[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/\mC\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)/\0\9\8\7\6\5\4\3\2\1/[?25l[56;11H987654321[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HD[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/D/d/[?25l[56;1Hd[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HE[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/E/~/[?25l[56;1H~[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HF[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/F/\~/[?25l[56;1H~[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HG[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/G/\ugg/[?25l[56;2Hg[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HH[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/H/\Uh\Eh/[?25l[56;2Hh[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HI[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/I/\lII/[?25l[56;1HiI[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HJ[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/J/\LJ\EJ/[?25l[56;1HjJ[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HK[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/K/\Uk\ek/[?25l[56;2Hk[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HlLl[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/L/^[34m^M[m/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hl[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HmMm[?12l[?25h[?25l
:[?12l[?25hs/M/\r/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hm[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HnNn[?12l[?25h[?25l
:[?12l[?25hs/N/\^[34m^M[m/[?25l[56;2H[34m^M[mn[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HoOo[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/O/\n/[?25l[56;2H[34m^@[mo[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HpPp[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/P/\b/[?25l[56;2H[34m^H[mp[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HqQq[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/Q/\t/[?25l[56;2H       q[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HrRr[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/R/\\/[?25l[56;2H\[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HsSs[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/S/\c/[?25l[56;2Hc[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HtTt[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/T/^[34m^@[m/[?25l[56;2H[34m^@[mt[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HU[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/U/\L\uuUu\l\EU/[?25l[56;2HuuU[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HV[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/V/\U\lVvV\u\Ev/[?25l[56;1HvVVv[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set magic&[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H15 lines, 203 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[15M[1;57r[42;1H:set cpo&
/^TEST/
j:s/A/\='\'/
j:s/B/\='\\'/
j:s/C/\='[34m^V^M[m'/
j:s/D/\='\[34m^V^M[m'/
j:s/E/\='\\[34m^V^M[m'/
j:s/F/\='\r'/
j:s/G/\='[34m^V^@[m'/
j:s/H/\='\[34m^V^@[m'/
j:s/I/\='\\[34m^V^@[m'/
j:s/J/\='\n'/
j:s/K/\="\r"/
j:s/L/\="\n"/
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^TEST/[?25l[57;7H[K[57;1H[1;56r[56;1H
[1;57r[56;1HTEST_3:[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HaAa[?12l[?25h[?25l
:[?12l[?25hs/A/\='\'/[?25l[56;2H\[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HbBb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/B/\='\\'/[?25l[56;2H\\b[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HcCc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/C/\='^[34m^M[m'/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hc[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HdDd[?12l[?25h[?25l
:[?12l[?25hs/D/\='\^[34m^M[m'/[?25l[1;56r[56;1H
[1;57r[55;2H\[55;3H[K[56;1Hd[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HeEe[?12l[?25h[?25l
:[?12l[?25hs/E/\='\\^[34m^M[m'/[?25l[1;56r[56;1H
[1;57r[55;2H\\
e[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HfFf[?12l[?25h[?25l
:[?12l[?25hs/F/\='\r'/[?25l[56;2H\rf[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HgGg[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/G/\='^[34m^@[m'/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hg[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HhHh[?12l[?25h[?25l
:[?12l[?25hs/H/\='\^[34m^@[m'/[?25l[1;56r[56;1H
[1;57r[55;2H\[55;3H[K[56;1Hh[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HiIi[?12l[?25h[?25l
:[?12l[?25hs/I/\='\\^[34m^@[m'/[?25l[1;56r[56;1H
[1;57r[55;2H\\
i[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HjJj[?12l[?25h[?25l
:[?12l[?25hs/J/\='\n'/[?25l[56;2H\nj[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HkKk[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/K/\="\r"/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hk[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HlLl[?12l[?25h[?25l
:[?12l[?25hs/L/\="\n"/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hl[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set magic&[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H15 lines, 611 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[15M[1;57r[42;1H:set cpo&
/^TEST/
j:s/A/\=substitute(submatch(0), '.', '\', '')/
j:s/B/\=substitute(submatch(0), '.', '\\', '')/
j:s/C/\=substitute(submatch(0), '.', '[34m^V^M[m', '')/
j:s/D/\=substitute(submatch(0), '.', '\[34m^V^M[m', '')/
j:s/E/\=substitute(submatch(0), '.', '\\[34m^V^M[m', '')/
j:s/F/\=substitute(submatch(0), '.', '\r', '')/
j:s/G/\=substitute(submatch(0), '.', '[34m^V^@[m', '')/
j:s/H/\=substitute(submatch(0), '.', '\[34m^V^@[m', '')/
j:s/I/\=substitute(submatch(0), '.', '\\[34m^V^@[m', '')/
j:s/J/\=substitute(submatch(0), '.', '\n', '')/
j:s/K/\=substitute(submatch(0), '.', "\r", '')/
j:s/L/\=substitute(submatch(0), '.', "\n", '')/
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^TEST/[?25l[57;7H[K[57;1H[1;56r[56;1H
[1;57r[56;1HTEST_4:[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HaAa[?12l[?25h[?25l
:[?12l[?25hs/A/\=substitute(submatch(0), '.', '\', '')/[?25l[56;2H\[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HbBb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/B/\=substitute(submatch(0), '.', '\\', '')/[?25l[56;2H\[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HcCc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/C/\=substitute(submatch(0), '.', '^[34m^M[m', '')/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hc[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HdDd[?12l[?25h[?25l
:[?12l[?25hs/D/\=substitute(submatch(0), '.', '\^[34m^M[m', '')/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hd[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HeEe[?12l[?25h[?25l
:[?12l[?25hs/E/\=substitute(submatch(0), '.', '\\^[34m^M[m', '')/[?25l[1;56r[56;1H
[1;57r[55;2H\[55;3H[K[56;1He[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HfFf[?12l[?25h[?25l
:[?12l[?25hs/F/\=substitute(submatch(0), '.', '\r', '')/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hf[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HgGg[?12l[?25h[?25l
:[?12l[?25hs/G/\=substitute(submatch(0), '.', '^[34m^@[m', '')/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hg[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HhHh[?12l[?25h[?25l
:[?12l[?25hs/H/\=substitute(submatch(0), '.', '\^[34m^@[m', '')/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hh[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HiIi[?12l[?25h[?25l
:[?12l[?25hs/I/\=substitute(submatch(0), '.', '\\^[34m^@[m', '')/[?25l[1;56r[56;1H
[1;57r[55;2H\[55;3H[K[56;1Hi[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HjJj[?12l[?25h[?25l
:[?12l[?25hs/J/\=substitute(submatch(0), '.', '\n', '')/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hj[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HkKk[?12l[?25h[?25l
:[?12l[?25hs/K/\=substitute(submatch(0), '.', "\r", '')/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hk[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HlLl[?12l[?25h[?25l
:[?12l[?25hs/L/\=substitute(submatch(0), '.', "\n", '')/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1Hl[57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set magic&[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H5 lines, 445 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[9M[1;57r[48;1H:set cpo&
/^TEST/
j:s/A\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)/\=submatch(0) . submatch(9) . submatt[51;1Hch(8) . submatch(7) . submatch(6) . submatch(5) . submatch(4) . submatch(3) . submatch(([52;1H2) . submatch(1)/
j:s/B\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)/\=string([submatch(0, 1), submatch(99[54;1H, 1), submatch(8, 1), submatch(7, 1), submatch(6, 1), submatch(5, 1), submatch(4, 1), ss[55;1Hubmatch(3, 1), submatch(2, 1), submatch(1, 1)])/
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^TEST/[?25l[57;7H[K[57;1H[1;56r[56;1H
[1;57r[56;1HTEST_5:[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HA123456789[?12l[?25h[?25l
:[?12l[?25hs/A\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)/\=submatch(0) . submatch(9) . submat
[56;87Hc[57;1Hh(8) . submatch(7) . submatch(6) . submatch(5) . submatch(4) . submatch(3) . submatch(
[56;87H2[57;1H) . submatch(1)/[?25l[1;1H[2L[1;1HSTARTTEST
:set magic&[56;11H987654321[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HB123456789[?12l[?25h[?25l
:[?12l[?25hs/B\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)/\=string([submatch(0, 1), submatch(9
[56;87H,[57;1H 1), submatch(8, 1), submatch(7, 1), submatch(6, 1), submatch(5, 1), submatch(4, 1), s
[56;87Hu[57;1Hbmatch(3, 1), submatch(2, 1), submatch(1, 1)])/[?25l[1;1H[2L[1;1H:set magic&
:set cpo&[56;1H[['B123456789'], ['9'], ['8'], ['7'], ['6'], ['5'], ['4'], ['3'], ['2'], ['1']][57;1H[K[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set magic&[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H8 lines, 80 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[8M[1;57r[49;1H/^TEST/
:set cpo+=/
j:s/A/a/
j:s/B/%/
:set cpo-=/
j:s/C/c/
j:s/D/%/
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^TEST/[?25l[57;7H[K[57;1H[1;56r[56;1H
[1;57r[56;1HTEST_6:[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset cpo+=/[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HA[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/A/a/[?25l[56;1Ha[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HB[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/B/%/[?25l[56;1Ha[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo-=/[?25l[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HC[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/C/c/[?25l[56;1Hc[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HD[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/D/%/[?25l[56;1H%[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[1;56r[1;1H[2M[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:set magic&[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H11 lines, 303 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[11M[1;57r[46;1H:set cpo&
/^TEST_7/
j:s/A./\=submatch(0)/
j:s/B./\=submatch(0)/
j:s/C./\=strtrans(string(submatch(0, 1)))/
j:s/D.\nD/\=strtrans(string(submatch(0, 1)))/
j:s/E\_.\{-}E/\=strtrans(string(submatch(0, 1)))/
/^Q$
:s/Q[^\n]Q/\=submatch(0)."foobar"/
:" Avoid :s error breaks dotest map on Windows.
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^TEST_7/[?25l[57;9H[K[57;1H[1;56r[56;1H
[1;57r[56;1HTEST_7:[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HA[34m^M[mA[?12l[?25h[?25l
:[?12l[?25hs/A./\=submatch(0)/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1HA[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HB[34m^@[mB[?12l[?25h[?25l
:[?12l[?25hs/B./\=submatch(0)/[?25l[1;56r[56;1H
[1;57r[55;2H[K[56;1HB[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HC[34m^@[mC[?12l[?25h[?25l
:[?12l[?25hs/C./\=strtrans(string(submatch(0, 1)))/[?25l[56;1H['C^@']C[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HD[34m^@[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/D.\nD/\=strtrans(string(submatch(0, 1)))/[?25l[56;1H['D^@', 'D'][?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HE[34m^@[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/E\_.\{-}E/\=strtrans(string(submatch(0, 1)))/[?25l[56;1H['E^@', '^@', '^@', '^@', '^@E'][?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^Q$[?25l[1;56r[56;1H
[1;57r[56;1HQ[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/Q[^\n]Q/\=submatch(0)."foobar"/[?25l[1m[37m[41mE486: Pattern not found: Q[^\n]Q[m[57;33H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Avoid :s error breaks dotest map on Windows.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[1;56r[1;1H[3M[1;57r[54;1HQ

STARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:function! TitleString()[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H8 lines, 177 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[8M[1;57r[49;3Hlet check = 'foo' =~ 'bar'
  return ""
endfunction
:set titlestring=%{TitleString()}
:/^test_one/s/.*/\="foo\nbar"/
:/^test_two/s/.*/\="foo\nbar"/c
y
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! TitleString()[?25l
:  [?12l[?25h  let check = 'foo' =~ 'bar'
[?25l:  [?12l[?25h  return ""
[?25l:  [?12l[?25hendfunction[1;1H[3L[?25l[1;1HA123456789987654321
[['B123456789'], ['9'], ['8'], ['7'], ['6'], ['5'], ['4'], ['3'], ['2'], ['1']][57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset titlestring=%{TitleString()}[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^test_one/s/.*/\="foo\nbar"/[?25l[1;56r[1;1H[2M[1;57r[55;1Hfoo
bar[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^test_two/s/.*/\="foo\nbar"/c[?25l[1;56r[56;1H
[1;57r[56;1H[7mtest_two[m[57;1H[K[57;1H[32mreplace with \="foo\nbar" (y/n/a/q/l/^E/^Y)?[?12l[?25h[?25l[m[57;1H[K[57;1H[1;56r[56;1H
[1;57r[55;1Hfoo[55;4H[K[56;1Hbar[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
/^STARTTEST[1;56r[56;1H
[1;57r[56;1HSTARTTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:g/^STARTTEST/.,/^ENDTEST/d[?12l[?25h[?25l
:set ff=unix cpo-=A[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H3 lines, 72 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H[?12l[?25h[?25l
/ENDTEST[57;10H[K[57;1H[56;19H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H:1;/^Results/,$wq! test.out[57;1H[K[56;19H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hg/^STARTTEST/.,/^ENDTEST/d[?25l136 fewer lines[57;16H[K[1;1H[K[2;1H[K[3;1HTEST_4:[3;8H[K[4;1Ha\a[4;4H[K[5;1Hb\b[5;4H[K[6;1Hc
c[7;2H[K[8;1Hd
d
e\
e
f
f[13;2H[K[14;1Hg[14;2H[K[15;1Hg[15;2H[K[16;1Hh[16;2H[K[17;1Hh[17;2H[K[18;1Hi\[18;3H[K[19;1Hi[19;2H[K[20;2H[K[21;2H[K[22;1Hk[22;2H[K[23;1Hk[23;2H[K[24;1Hl[24;2H[K[25;1Hl[25;2H[K[27;1H[K[28;1HTEST_5:
A123456789987654321
[['B123456789'], ['9'], ['8'], ['7'], ['6'], ['5'], ['4'], ['3'], ['2'], ['1']][31;1H[K[32;1H[K[33;1HTEST_6:[33;9H[K[34;1Ha[34;2H[K[35;1Ha
c
%[38;1H[K[39;1H[K[40;1HTEST_7:[40;8H[K[41;1HA[41;3H[K[42;1HA[42;2H[K[43;1HB[43;2H[K[44;1HB[44;2H[K[45;1H['C^@']C[45;9H[K[46;1H['D^@', 'D']
['E^@', '^@', '^@', '^@', '^@E']
Q
Q[49;2H[K[50;1H[K[51;1H[K[52;1Hfoo
bar
foo[54;4H[K[55;1Hbar[55;4H[K[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1;/^Results/,$wq! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 134 lines, 574 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test79 = test61; then \
#	  if diff test.out test79.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test79.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test79.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test80.failed test.ok test.out X* viminfo
cp test80.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test80.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test80.in" 201 lines, 6298 characters[1;1HTest for *sub-replace-special* and *sub-replace-expression* on substitute().
Test for submatch() on substitute().
Test for *:s%* on :substitute.

STARTTEST
:so small.vim
ENDTEST

TEST_1:

STARTTEST
:set magic
:set cpo&
:$put =\"\n\nTEST_1:\"
:$put =substitute('A', 'A', '&&', '')
:$put =substitute('B', 'B', '\&', '')
:$put =substitute('C123456789', 'C\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\0\99[18;1H\8\7\6\5\4\3\2\1', '')
:$put =substitute('D', 'D', 'd', '')
:$put =substitute('E', 'E', '~', '')
:$put =substitute('F', 'F', '\~', '')
:$put =substitute('G', 'G', '\ugg', '')
:$put =substitute('H', 'H', '\Uh\Eh', '')
:$put =substitute('I', 'I', '\lII', '')
:$put =substitute('J', 'J', '\LJ\EJ', '')
:$put =substitute('K', 'K', '\Uk\ek', '')
:$put =substitute('lLl', 'L', '[34m^V^M[m', '')
:$put =substitute('mMm', 'M', '\r', '')
:$put =substitute('nNn', 'N', '\[34m^V^M[m', '')
:$put =substitute('oOo', 'O', '\n', '')
:$put =substitute('pPp', 'P', '\b', '')
:$put =substitute('qQq', 'Q', '\t', '')
:$put =substitute('rRr', 'R', '\\', '')
:$put =substitute('sSs', 'S', '\c', '')
:$put =substitute('uUu', 'U', \"\n\", '')
:$put =substitute('vVv', 'V', \"\b\", '')
:$put =substitute('wWw', 'W', \"\\\", '')
:$put =substitute('xXx', 'X', \"\r\", '')
:$put =substitute('Y', 'Y', '\L\uyYy\l\EY', '')
:$put =substitute('Z', 'Z', '\U\lZzZ\u\Ez', '')
/^TEST_2
ENDTEST

TEST_2:

STARTTEST
:set nomagic
:set cpo&
:$put =\"\n\nTEST_2:\"
:$put =substitute('A', 'A', '&&', '')
:$put =substitute('B', 'B', '\&', '')
:$put =substitute('C123456789', 'C\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\0\99[53;1H\8\7\6\5\4\3\2\1', '')
:$put =substitute('D', 'D', 'd', '')
:$put =substitute('E', 'E', '~', '')
:$put =substitute('F', 'F', '\~', '')[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for *sub-replace-special* and *sub-replace-expression* on substitute().[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[5;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 1 line, 14 characters written[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[6;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[7;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[8;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[11;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H29 lines, 1142 characters written[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[12;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[42;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic[?25l[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =\"\n\nTEST_1:\"[?25l3 more lines[57;13H[K[27m[23m[m[H[2J[1;1H/^TEST_8
ENDTEST

TEST_8:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_8:\"
:$put =',,X'
:s/\(^\|,\)\ze\(,\|X\)/\1N/g
:$put =',,Y'
:s/\(^\|,\)\ze\(,\|Y\)/\1N/gc
a:$put =',,Z'
:s/\(^\|,\)\ze\(,\|Z\)/\1N/gc
yy/^TEST_9:
ENDTEST

TEST_9:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_9:\"
:$put ='xxx'
:s/x/X/gc
yyq/^TEST_10:
ENDTEST

TEST_10:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_10:\"
:let y = substitute('123', '\zs', 'a', 'g')[13C| $put =y
:let y = substitute('123', '\zs.', 'a', 'g')[12C| $put =y
:let y = substitute('123', '.\zs', 'a', 'g')[12C| $put =y
:let y = substitute('123', '\ze', 'a', 'g')[13C| $put =y
:let y = substitute('123', '\ze.', 'a', 'g')[12C| $put =y
:let y = substitute('123', '.\ze', 'a', 'g')[12C| $put =y
:let y = substitute('123', '1\|\ze', 'a', 'g')[10C| $put =y
:let y = substitute('123', '1\zs\|[23]', 'a', 'g')      | $put =y
/^TEST_11
ENDTEST

TEST_11:

STARTTEST
:/^Results/,$wq! test.out
ENDTEST

Results of test72:


TEST_1:
3 more lines[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =substitute('A', 'A', '&&', '')[?25l[1;56r[56;1H
[1;57r[56;1HAA[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('B', 'B', '\&', '')[?25l[1;56r[56;1H
[1;57r[56;1H&[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('C123456789', 'C\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\0\
[56;87H9[57;1H\8\7\6\5\4\3\2\1', '')[?25l[1;1H[L[1;1HTEST_8:[2;1H[K[3;1HSTARTTEST
:set magic&[5;6Hcpo&[5;10H[K[6;2H$put =\"\n\nTEST_8:\"[7;8H',,X'[7;13H[K[8;2Hs/\(^\|,\)\ze\(,\|X\)/\1N/g
:$put =',,Y'[9;13H[K[10;2Hs/\(^\|,\)\ze\(,\|Y\)/\1N/gc
a:$put =',,Z'[11;14H[K[12;1H:s/\(^\|,\)\ze\(,\|Z\)/\1N/gc
yy/^TEST_9:[13;12H[K[14;1HENDTEST[14;8H[K[15;1H[K[16;1HTEST_9:[17;1H[K[18;1HSTARTTEST
:set magic&[20;6Hcpo&[20;10H[K[21;2H$put =\"\n\nTEST_9:\"[22;8H'xxx'[22;13H[K[23;2Hs/x/X/gc[23;10H[K[24;1Hyyq/^TEST_10:
ENDTEST[25;8H[K[26;1H[K[27;1HTEST_10:[28;1H[K[29;1HSTARTTEST
:set magic&[31;6Hcpo&[31;10H[K[32;2H$put =\"\n\nTEST_10:\"
:let y = substitute('123', '\zs', 'a', 'g')[13C| $put =y[34;32H.', 'a', 'g')[35;29H.\zs[36;29H\ze', 'a', 'g') [37;32H.', 'a', 'g')[38;29H.\ze[39;29H1\|\ze', 'a', 'g')[40;31Hzs\|[23]', 'a', 'g')
/^TEST_11[41;10H[K[42;1HENDTEST[42;8H[K[43;1H[K[44;1HTEST_11:[45;1H[K[46;1HSTARTTEST
:/^Results/,$wq! test.out
ENDTEST[48;8H[K[49;1H[K[50;1HResults of test72:[51;1H[K[53;1HTEST_1:
AA[54;3H[K[55;1H&[55;2H[K[56;1HC123456789987654321[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('D', 'D', 'd', '')[?25l[1;56r[56;1H
[1;57r[56;1Hd[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('E', 'E', '~', '')[?25l[1;56r[56;1H
[1;57r[56;1H~[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('F', 'F', '\~', '')[?25l[1;56r[56;1H
[1;57r[56;1H~[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('G', 'G', '\ugg', '')[?25l[1;56r[56;1H
[1;57r[56;1HGg[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('H', 'H', '\Uh\Eh', '')[?25l[1;56r[56;1H
[1;57r[56;1HHh[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('I', 'I', '\lII', '')[?25l[1;56r[56;1H
[1;57r[56;1HiI[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('J', 'J', '\LJ\EJ', '')[?25l[1;56r[56;1H
[1;57r[56;1HjJ[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('K', 'K', '\Uk\ek', '')[?25l[1;56r[56;1H
[1;57r[56;1HKk[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('lLl', 'L', '^[34m^M[m', '')[?25l[1;56r[56;1H
[1;57r[56;1Hl[34m^M[ml[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('mMm', 'M', '\r', '')[?25l[1;56r[56;1H
[1;57r[56;1Hm[34m^M[mm[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('nNn', 'N', '\^[34m^M[m', '')[?25l[1;56r[56;1H
[1;57r[56;1Hn[34m^M[mn[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('oOo', 'O', '\n', '')[?25l[1;56r[1;1H[2M[1;57r[55;1Ho
o[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('pPp', 'P', '\b', '')[?25l[1;56r[56;1H
[1;57r[56;1Hp[34m^H[mp[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('qQq', 'Q', '\t', '')[?25l[1;56r[56;1H
[1;57r[56;1Hq[7Cq[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('rRr', 'R', '\\', '')[?25l[1;56r[56;1H
[1;57r[56;1Hr\r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('sSs', 'S', '\c', '')[?25l[1;56r[56;1H
[1;57r[56;1Hscs[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('uUu', 'U', \"\n\", '')[?25l[1;56r[1;1H[2M[1;57r[55;1Hu
u[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('vVv', 'V', \"\b\", '')[?25l[1;56r[56;1H
[1;57r[56;1Hv[34m^H[mv[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('wWw', 'W', \"\\\", '')[?25l[1;56r[56;1H
[1;57r[56;1Hw\w[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('xXx', 'X', \"\r\", '')[?25l[1;56r[56;1H
[1;57r[56;1Hx[34m^M[mx[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('Y', 'Y', '\L\uyYy\l\EY', '')[?25l[1;56r[56;1H
[1;57r[56;1HYyyY[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('Z', 'Z', '\U\lZzZ\u\Ez', '')[?25l[1;56r[56;1H
[1;57r[56;1HzZZz[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^TEST_2[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H:$put =substitute('C123456789', 'C\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\0\99[2;1H\8\7\6\5\4\3\2\1', '')
:$put =substitute('D', 'D', 'd', '')
:$put =substitute('E', 'E', '~', '')
:$put =substitute('F', 'F', '\~', '')
:$put =substitute('G', 'G', '\ugg', '')
:$put =substitute('H', 'H', '\Uh\Eh', '')
:$put =substitute('I', 'I', '\lII', '')
:$put =substitute('J', 'J', '\LJ\EJ', '')
:$put =substitute('K', 'K', '\Uk\ek', '')
:$put =substitute('lLl', 'L', '[34m^V^M[m', '')
:$put =substitute('mMm', 'M', '\r', '')
:$put =substitute('nNn', 'N', '\[34m^V^M[m', '')
:$put =substitute('oOo', 'O', '\n', '')
:$put =substitute('pPp', 'P', '\b', '')
:$put =substitute('qQq', 'Q', '\t', '')
:$put =substitute('rRr', 'R', '\\', '')
:$put =substitute('sSs', 'S', '\c', '')
:$put =substitute('uUu', 'U', \"\n\", '')
:$put =substitute('vVv', 'V', \"\b\", '')
:$put =substitute('wWw', 'W', \"\\\", '')
:$put =substitute('xXx', 'X', \"\r\", '')
:$put =substitute('Y', 'Y', '\L\uyYy\l\EY', '')
:$put =substitute('Z', 'Z', '\U\lZzZ\u\Ez', '')
/^TEST_2
ENDTEST

TEST_2:

STARTTEST
:set nomagic
:set cpo&
:$put =\"\n\nTEST_2:\"
:$put =substitute('A', 'A', '&&', '')
:$put =substitute('B', 'B', '\&', '')
:$put =substitute('C123456789', 'C\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\0\99[37;1H\8\7\6\5\4\3\2\1', '')
:$put =substitute('D', 'D', 'd', '')
:$put =substitute('E', 'E', '~', '')
:$put =substitute('F', 'F', '\~', '')
:$put =substitute('G', 'G', '\ugg', '')
:$put =substitute('H', 'H', '\Uh\Eh', '')
:$put =substitute('I', 'I', '\lII', '')
:$put =substitute('J', 'J', '\LJ\EJ', '')
:$put =substitute('K', 'K', '\Uk\ek', '')
:$put =substitute('lLl', 'L', '[34m^V^M[m', '')
:$put =substitute('mMm', 'M', '\r', '')
:$put =substitute('nNn', 'N', '\[34m^V^M[m', '')
:$put =substitute('oOo', 'O', '\n', '')
:$put =substitute('pPp', 'P', '\b', '')
:$put =substitute('qQq', 'Q', '\t', '')
:$put =substitute('rRr', 'R', '\\', '')
:$put =substitute('sSs', 'S', '\c', '')
:$put =substitute('tTt', 'T', \"\r\", '')
:$put =substitute('uUu', 'U', \"\n\", '')
:$put =substitute('vVv', 'V', \"\b\", '')
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/^STARTTEST[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H29 lines, 1144 characters written[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[31;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[5M[1;57r[52;1H:$put =substitute('wWw', 'W', \"\\\", '')
:$put =substitute('X', 'X', '\L\uxXx\l\EX', '')
:$put =substitute('Y', 'Y', '\U\lYyY\u\Ey', '')
/^TEST_3
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nomagic[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =\"\n\nTEST_2:\"[?25l3 more lines[57;13H[K[27m[23m[m[H[2J[2;1HSTARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_10:\"
:let y = substitute('123', '\zs', 'a', 'g')[13C| $put =y
:let y = substitute('123', '\zs.', 'a', 'g')[12C| $put =y
:let y = substitute('123', '.\zs', 'a', 'g')[12C| $put =y
:let y = substitute('123', '\ze', 'a', 'g')[13C| $put =y
:let y = substitute('123', '\ze.', 'a', 'g')[12C| $put =y
:let y = substitute('123', '.\ze', 'a', 'g')[12C| $put =y
:let y = substitute('123', '1\|\ze', 'a', 'g')[10C| $put =y
:let y = substitute('123', '1\zs\|[23]', 'a', 'g')      | $put =y
/^TEST_11
ENDTEST

TEST_11:

STARTTEST
:/^Results/,$wq! test.out
ENDTEST

Results of test72:


TEST_1:
AA
&
C123456789987654321
d
~
~
Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[34m^M[mm
n[34m^M[mn
o
o
p[34m^H[mp
q[7Cq
r\r
scs
u
u
v[34m^H[mv
w\w
x[34m^M[mx
YyyY
zZZz


TEST_2:
3 more lines[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =substitute('A', 'A', '&&', '')[?25l[1;56r[56;1H
[1;57r[56;1HAA[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('B', 'B', '\&', '')[?25l[1;56r[56;1H
[1;57r[56;1H&[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('C123456789', 'C\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\0\
[56;87H9[57;1H\8\7\6\5\4\3\2\1', '')[?25l[1;1H[L[1;1H:set cpo&
:$put =\"\n\nTEST_10:\"
:let y = substitute('123', '\zs', 'a', 'g')[13C| $put =y[4;32H.', 'a', 'g')[5;29H.\zs[6;29H\ze', 'a', 'g') [7;32H.', 'a', 'g')[8;29H.\ze[9;29H1\|\ze', 'a', 'g')[10;31Hzs\|[23]', 'a', 'g')
/^TEST_11[11;10H[K[12;1HENDTEST[12;8H[K[13;1H[K[14;1HTEST_11:[15;1H[K[16;1HSTARTTEST
:/^Results/,$wq! test.out
ENDTEST[18;8H[K[19;1H[K[20;1HResults of test72:[21;1H[K[23;1HTEST_1:
AA[24;3H[K[25;1H&[25;2H[K[26;1HC123456789987654321
d[27;2H[K[28;1H~

Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[2Cm
n[2Cn
o[38;2H[K[40;1Hp[34m^H[mp
q       q
r\r[42;9H[K[43;1Hscs
u[44;2H[K[46;1Hv[34m^H[mv
w\w[47;4H[K[48;1Hx[34m^M[mx
YyyY
zZZz[51;1H[K[53;1HTEST_2:
AA[54;3H[K[55;1H&[55;2H[K[56;1HC123456789987654321[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('D', 'D', 'd', '')[?25l[1;56r[56;1H
[1;57r[56;1Hd[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('E', 'E', '~', '')[?25l[1;56r[56;1H
[1;57r[56;1H~[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('F', 'F', '\~', '')[?25l[1;56r[56;1H
[1;57r[56;1H~[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('G', 'G', '\ugg', '')[?25l[1;56r[56;1H
[1;57r[56;1HGg[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('H', 'H', '\Uh\Eh', '')[?25l[1;56r[56;1H
[1;57r[56;1HHh[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('I', 'I', '\lII', '')[?25l[1;56r[56;1H
[1;57r[56;1HiI[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('J', 'J', '\LJ\EJ', '')[?25l[1;56r[56;1H
[1;57r[56;1HjJ[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('K', 'K', '\Uk\ek', '')[?25l[1;56r[56;1H
[1;57r[56;1HKk[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('lLl', 'L', '^[34m^M[m', '')[?25l[1;56r[56;1H
[1;57r[56;1Hl[34m^M[ml[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('mMm', 'M', '\r', '')[?25l[1;56r[56;1H
[1;57r[56;1Hm[34m^M[mm[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('nNn', 'N', '\^[34m^M[m', '')[?25l[1;56r[56;1H
[1;57r[56;1Hn[34m^M[mn[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('oOo', 'O', '\n', '')[?25l[1;56r[1;1H[2M[1;57r[55;1Ho
o[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('pPp', 'P', '\b', '')[?25l[1;56r[56;1H
[1;57r[56;1Hp[34m^H[mp[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('qQq', 'Q', '\t', '')[?25l[1;56r[56;1H
[1;57r[56;1Hq[7Cq[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('rRr', 'R', '\\', '')[?25l[1;56r[56;1H
[1;57r[56;1Hr\r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('sSs', 'S', '\c', '')[?25l[1;56r[56;1H
[1;57r[56;1Hscs[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('tTt', 'T', \"\r\", '')[?25l[1;56r[56;1H
[1;57r[56;1Ht[34m^M[mt[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('uUu', 'U', \"\n\", '')[?25l[1;56r[1;1H[2M[1;57r[55;1Hu
u[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('vVv', 'V', \"\b\", '')[?25l[1;56r[56;1H
[1;57r[56;1Hv[34m^H[mv[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('wWw', 'W', \"\\\", '')[?25l[1;56r[56;1H
[1;57r[56;1Hw\w[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('X', 'X', '\L\uxXx\l\EX', '')[?25l[1;56r[56;1H
[1;57r[56;1HXxxX[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('Y', 'Y', '\U\lYyY\u\Ey', '')[?25l[1;56r[56;1H
[1;57r[56;1HyYYy[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^TEST_3[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H:$put =substitute('C123456789', 'C\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\0\99[2;1H\8\7\6\5\4\3\2\1', '')
:$put =substitute('D', 'D', 'd', '')
:$put =substitute('E', 'E', '~', '')
:$put =substitute('F', 'F', '\~', '')
:$put =substitute('G', 'G', '\ugg', '')
:$put =substitute('H', 'H', '\Uh\Eh', '')
:$put =substitute('I', 'I', '\lII', '')
:$put =substitute('J', 'J', '\LJ\EJ', '')
:$put =substitute('K', 'K', '\Uk\ek', '')
:$put =substitute('lLl', 'L', '[34m^V^M[m', '')
:$put =substitute('mMm', 'M', '\r', '')
:$put =substitute('nNn', 'N', '\[34m^V^M[m', '')
:$put =substitute('oOo', 'O', '\n', '')
:$put =substitute('pPp', 'P', '\b', '')
:$put =substitute('qQq', 'Q', '\t', '')
:$put =substitute('rRr', 'R', '\\', '')
:$put =substitute('sSs', 'S', '\c', '')
:$put =substitute('tTt', 'T', \"\r\", '')
:$put =substitute('uUu', 'U', \"\n\", '')
:$put =substitute('vVv', 'V', \"\b\", '')
:$put =substitute('wWw', 'W', \"\\\", '')
:$put =substitute('X', 'X', '\L\uxXx\l\EX', '')
:$put =substitute('Y', 'Y', '\U\lYyY\u\Ey', '')
/^TEST_3
ENDTEST

TEST_3:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_3:\"
:let y = substitute('aAa', 'A', '\="\\"', '')[11C| $put =y
:let y = substitute('bBb', 'B', '\="\\\\"', '')[9C| $put =y
:let y = substitute('cCc', 'C', '\="[34m^V^M[m"', '')[9C| $put =y
:let y = substitute('dDd', 'D', '\="\\[34m^V^M[m"', '')[7C| $put =y
:let y = substitute('eEe', 'E', '\="\\\\[34m^V^M[m"', '')     | $put =y
:let y = substitute('fFf', 'F', '\="\\r"', '')[10C| $put =y
:let y = substitute('jJj', 'J', '\="\\n"', '')[10C| $put =y
:let y = substitute('kKk', 'K', '\="\r"', '')[11C| $put =y
:let y = substitute('lLl', 'L', '\="\n"', '')[11C| $put =y
/^TEST_4
ENDTEST

TEST_4:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_4:\"
:let y = substitute('aAa', 'A', '\=substitute(submatch(0), ".", "\\", "")', '')[7C||[53;1H $put =y
:let y = substitute('bBb', 'B', '\=substitute(submatch(0), ".", "\\\\", "")', '')     ||[55;1H $put =y
:let y = substitute('cCc', 'C', '\=substitute(submatch(0), ".", "[34m^V^M[m", "")', '')     |[56;1H[1m[34m@                                                                                      [m[57;1H[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/^STARTTEST[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[56;1H:let y = substitute('cCc', 'C', '\=substitute(submatch(0), ".", "[34m^V^M[m", "")', '')     |[56;1H[1m[34m@                                                                                      [31;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H13 lines, 642 characters written[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[56;1H:let y = substitute('cCc', 'C', '\=substitute(submatch(0), ".", "[34m^V^M[m", "")', '')     |[56;1H[1m[34m@                                                                                      [31;1H[?12l[?25h[?25l[m[57;1H/ENDTEST[57;10H[K[57;1H[44;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[45;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[45;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[56;1H:let y = substitute('cCc', 'C', '\=substitute(submatch(0), ".", "[34m^V^M[m", "")', '')     |[56;1H[1m[34m@                                                                                      [45;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put =\"\n\nTEST_3:\"[?25l3 more lines[57;13H[K[27m[23m[m[H[2J[1;1H~
~
Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[34m^M[mm
n[34m^M[mn
o
o
p[34m^H[mp
q[7Cq
r\r
scs
u
u
v[34m^H[mv
w\w
x[34m^M[mx
YyyY
zZZz


TEST_2:
AA
&
C123456789987654321
d
~
~
Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[34m^M[mm
n[34m^M[mn
o
o
p[34m^H[mp
q[7Cq
r\r
scs
t[34m^M[mt
u
u
v[34m^H[mv
w\w
XxxX
yYYy


TEST_3:
3 more lines[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet y = substitute('aAa', 'A', '\="\\"', '')           | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Ha\a[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('bBb', 'B', '\="\\\\"', '')         | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Hb\\b[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('cCc', 'C', '\="^[34m^M[m"', '')         | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Hc[34m^M[mc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('dDd', 'D', '\="\\^[34m^M[m"', '')       | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Hd\[34m^M[md[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('eEe', 'E', '\="\\\\^[34m^M[m"', '')     | $put =y[?25l[1;56r[56;1H
[1;57r[56;1He\\[34m^M[me[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('fFf', 'F', '\="\\r"', '')          | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Hf\rf[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('jJj', 'J', '\="\\n"', '')          | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Hj\nj[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('kKk', 'K', '\="\r"', '')           | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Hk[34m^M[mk[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('lLl', 'L', '\="\n"', '')           | $put =y[?25l[1;56r[1;1H[2M[1;57r[55;1Hl
l[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^TEST_4[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H:$put =substitute('tTt', 'T', \"\r\", '')
:$put =substitute('uUu', 'U', \"\n\", '')
:$put =substitute('vVv', 'V', \"\b\", '')
:$put =substitute('wWw', 'W', \"\\\", '')
:$put =substitute('X', 'X', '\L\uxXx\l\EX', '')
:$put =substitute('Y', 'Y', '\U\lYyY\u\Ey', '')
/^TEST_3
ENDTEST

TEST_3:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_3:\"
:let y = substitute('aAa', 'A', '\="\\"', '')[11C| $put =y
:let y = substitute('bBb', 'B', '\="\\\\"', '')[9C| $put =y
:let y = substitute('cCc', 'C', '\="[34m^V^M[m"', '')[9C| $put =y
:let y = substitute('dDd', 'D', '\="\\[34m^V^M[m"', '')[7C| $put =y
:let y = substitute('eEe', 'E', '\="\\\\[34m^V^M[m"', '')     | $put =y
:let y = substitute('fFf', 'F', '\="\\r"', '')[10C| $put =y
:let y = substitute('jJj', 'J', '\="\\n"', '')[10C| $put =y
:let y = substitute('kKk', 'K', '\="\r"', '')[11C| $put =y
:let y = substitute('lLl', 'L', '\="\n"', '')[11C| $put =y
/^TEST_4
ENDTEST

TEST_4:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_4:\"
:let y = substitute('aAa', 'A', '\=substitute(submatch(0), ".", "\\", "")', '')[7C||[35;1H $put =y
:let y = substitute('bBb', 'B', '\=substitute(submatch(0), ".", "\\\\", "")', '')     ||[37;1H $put =y
:let y = substitute('cCc', 'C', '\=substitute(submatch(0), ".", "[34m^V^M[m", "")', '')     ||[39;1H $put =y
:let y = substitute('dDd', 'D', '\=substitute(submatch(0), ".", "\\[34m^V^M[m", "")', '')   ||[41;1H $put =y
:let y = substitute('eEe', 'E', '\=substitute(submatch(0), ".", "\\\\[34m^V^M[m", "")', '') ||[43;1H $put =y
:let y = substitute('fFf', 'F', '\=substitute(submatch(0), ".", "\\r", "")', '')      ||[45;1H $put =y
:let y = substitute('jJj', 'J', '\=substitute(submatch(0), ".", "\\n", "")', '')      ||[47;1H $put =y
:let y = substitute('kKk', 'K', '\=substitute(submatch(0), ".", "\r", "")', '')[7C||[49;1H $put =y
:let y = substitute('lLl', 'L', '\=substitute(submatch(0), ".", "\n", "")', '')[7C||[51;1H $put =y
/^TEST_5
ENDTEST

TEST_5:

[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/^STARTTEST[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H13 lines, 912 characters written[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[31;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[53;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =\"\n\nTEST_4:\"[?25l3 more lines[57;13H[K[27m[23m[m[H[2J[1;1Hq[7Cq
r\r
scs
u
u
v[34m^H[mv
w\w
x[34m^M[mx
YyyY
zZZz


TEST_2:
AA
&
C123456789987654321
d
~
~
Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[34m^M[mm
n[34m^M[mn
o
o
p[34m^H[mp
q[7Cq
r\r
scs
t[34m^M[mt
u
u
v[34m^H[mv
w\w
XxxX
yYYy


TEST_3:
a\a
b\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf
j\nj
k[34m^M[mk
l
l


TEST_4:
3 more lines[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet y = substitute('aAa', 'A', '\=substitute(submatch(0), ".", "\\", "")', '')       
[56;87H|[57;1H $put =y[?25l[1;1H[L[1;1Hr\r
scs
u[3;2H[K[5;1Hv[34m^H[mv
w\w[6;4H[K[7;1Hx[34m^M[mx
YyyY
zZZz[10;1H[K[12;1HTEST_2:
AA[13;3H[K[14;1H&[14;2H[K[15;1HC123456789987654321
d[16;2H[K[17;1H~

Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[2Cm
n[2Cn
o[27;2H[K[29;1Hp[34m^H[mp
q       q
r\r[31;9H[K[32;1Hscs
t[34m^M[mt
u[34;2H[K[36;1Hv[34m^H[mv
w\w[37;4H[K[38;1HXxxX
yYYy[40;1H[K[42;1HTEST_3:
a\a[43;4H[K[44;1Hb\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf[48;5H[K[49;1Hj\nj
k[34m^M[mk
l[51;2H[K[53;1H[K[55;1HTEST_4:
a\a[56;4H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('bBb', 'B', '\=substitute(submatch(0), ".", "\\\\", "")', '')     
[56;87H|[57;1H $put =y[?25l[1;1H[L[1;1Hscs
u[2;2H[K[4;1Hv[34m^H[mv
w\w[5;4H[K[6;1Hx[34m^M[mx
YyyY
zZZz[9;1H[K[11;1HTEST_2:
AA[12;3H[K[13;1H&[13;2H[K[14;1HC123456789987654321
d[15;2H[K[16;1H~

Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[2Cm
n[2Cn
o[26;2H[K[28;1Hp[34m^H[mp
q       q
r\r[30;9H[K[31;1Hscs
t[34m^M[mt
u[33;2H[K[35;1Hv[34m^H[mv
w\w[36;4H[K[37;1HXxxX
yYYy[39;1H[K[41;1HTEST_3:
a\a[42;4H[K[43;1Hb\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf[47;5H[K[48;1Hj\nj
k[34m^M[mk
l[50;2H[K[52;1H[K[54;1HTEST_4:
a\a[55;4H[K[56;1Hb\b[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('cCc', 'C', '\=substitute(submatch(0), ".", "^[34m^M[m", "")', '')     | 
[56;87H$[57;1Hput =y[?25l[1;1H[L[1;1Hu

v[34m^H[mv
w\w[4;4H[K[5;1Hx[34m^M[mx
YyyY
zZZz[8;1H[K[10;1HTEST_2:
AA[11;3H[K[12;1H&[12;2H[K[13;1HC123456789987654321
d[14;2H[K[15;1H~

Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[2Cm
n[2Cn
o[25;2H[K[27;1Hp[34m^H[mp
q       q
r\r[29;9H[K[30;1Hscs
t[34m^M[mt
u[32;2H[K[34;1Hv[34m^H[mv
w\w[35;4H[K[36;1HXxxX
yYYy[38;1H[K[40;1HTEST_3:
a\a[41;4H[K[42;1Hb\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf[46;5H[K[47;1Hj\nj
k[34m^M[mk
l[49;2H[K[51;1H[K[53;1HTEST_4:
a\a[54;4H[K[55;1Hb\b
c[34m^M[mc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('dDd', 'D', '\=substitute(submatch(0), ".", "\\^[34m^M[m", "")', '')   | 
[56;87H$[57;1Hput =y[?25l[1;1H[L[1;1Hu
v[34m^H[mv
w\w[3;4H[K[4;1Hx[34m^M[mx
YyyY
zZZz[7;1H[K[9;1HTEST_2:
AA[10;3H[K[11;1H&[11;2H[K[12;1HC123456789987654321
d[13;2H[K[14;1H~

Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[2Cm
n[2Cn
o[24;2H[K[26;1Hp[34m^H[mp
q       q
r\r[28;9H[K[29;1Hscs
t[34m^M[mt
u[31;2H[K[33;1Hv[34m^H[mv
w\w[34;4H[K[35;1HXxxX
yYYy[37;1H[K[39;1HTEST_3:
a\a[40;4H[K[41;1Hb\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf[45;5H[K[46;1Hj\nj
k[34m^M[mk
l[48;2H[K[50;1H[K[52;1HTEST_4:
a\a[53;4H[K[54;1Hb\b
c[34m^M[mc
d[2Cd[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('eEe', 'E', '\=substitute(submatch(0), ".", "\\\\^[34m^M[m", "")', '') | 
[56;87H$[57;1Hput =y[?25l[1;1H[L[1;1Hv[34m^H[mv
w\w[2;4H[K[3;1Hx[34m^M[mx
YyyY
zZZz[6;1H[K[8;1HTEST_2:
AA[9;3H[K[10;1H&[10;2H[K[11;1HC123456789987654321
d[12;2H[K[13;1H~

Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[2Cm
n[2Cn
o[23;2H[K[25;1Hp[34m^H[mp
q       q
r\r[27;9H[K[28;1Hscs
t[34m^M[mt
u[30;2H[K[32;1Hv[34m^H[mv
w\w[33;4H[K[34;1HXxxX
yYYy[36;1H[K[38;1HTEST_3:
a\a[39;4H[K[40;1Hb\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf[44;5H[K[45;1Hj\nj
k[34m^M[mk
l[47;2H[K[49;1H[K[51;1HTEST_4:
a\a[52;4H[K[53;1Hb\b
c[34m^M[mc
d[2Cd
e\[34m^M[me[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('fFf', 'F', '\=substitute(submatch(0), ".", "\\r", "")', '')      
[56;87H|[57;1H $put =y[?25l[1;1H[L[1;1Hw\w
x[34m^M[mx
YyyY
zZZz[5;1H[K[7;1HTEST_2:
AA[8;3H[K[9;1H&[9;2H[K[10;1HC123456789987654321
d[11;2H[K[12;1H~

Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[2Cm
n[2Cn
o[22;2H[K[24;1Hp[34m^H[mp
q       q
r\r[26;9H[K[27;1Hscs
t[34m^M[mt
u[29;2H[K[31;1Hv[34m^H[mv
w\w[32;4H[K[33;1HXxxX
yYYy[35;1H[K[37;1HTEST_3:
a\a[38;4H[K[39;1Hb\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf[43;5H[K[44;1Hj\nj
k[34m^M[mk
l[46;2H[K[48;1H[K[50;1HTEST_4:
a\a[51;4H[K[52;1Hb\b
c[34m^M[mc
d[2Cd
e\[34m^M[me
f[34m^M[mf[56;5H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('jJj', 'J', '\=substitute(submatch(0), ".", "\\n", "")', '')      
[56;87H|[57;1H $put =y[?25l[1;1H[L[1;1HYyyY
zZZz[3;1H[K[4;1H[K[5;1HTEST_2:
AA
&[7;2H[K[8;1HC123456789987654321
d
~[10;2H[K[11;1H~
Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[34m^M[mm
n[2Cn
o[20;2H[K[21;1Ho[21;2H[K[22;1Hp[34m^H[mp
q[7Cq
r\r[24;4H[K[25;1Hscs[25;9H[K[26;1Ht[34m^M[mt
u[27;2H[K[28;1Hu[28;2H[K[29;1Hv[34m^H[mv
w\w
XxxX
yYYy[33;1H[K[34;1H[K[35;1HTEST_3:
a\a
b\\b[37;5H[K[38;1Hc[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf[41;5H[K[42;1Hj\nj[42;5H[K[43;1Hk[34m^M[mk
l[44;2H[K[45;1Hl[45;2H[K[46;1H[K[47;1H[K[48;1HTEST_4:
a\a
b\b[50;4H[K[51;1Hc[34m^M[mc
d[34m^M[md
e\[34m^M[me
f[2Cf
j[55;2H[K[56;1Hj[56;2H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('kKk', 'K', '\=substitute(submatch(0), ".", "\r", "")', '')       
[56;87H|[57;1H $put =y[?25l[1;1H[L[1;1HzZZz[2;1H[K[4;1HTEST_2:
AA[5;3H[K[6;1H&[6;2H[K[7;1HC123456789987654321
d[8;2H[K[9;1H~

Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[2Cm
n[2Cn
o[19;2H[K[21;1Hp[34m^H[mp
q       q
r\r[23;9H[K[24;1Hscs
t[34m^M[mt
u[26;2H[K[28;1Hv[34m^H[mv
w\w[29;4H[K[30;1HXxxX
yYYy[32;1H[K[34;1HTEST_3:
a\a[35;4H[K[36;1Hb\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf[40;5H[K[41;1Hj\nj
k[34m^M[mk
l[43;2H[K[45;1H[K[47;1HTEST_4:
a\a[48;4H[K[49;1Hb\b
c[34m^M[mc
d[2Cd
e\[34m^M[me
f[34m^M[mf[53;5H[K[54;1Hj[54;2H[K[56;1Hk[34m^M[mk[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('lLl', 'L', '\=substitute(submatch(0), ".", "\n", "")', '')       
[56;87H|[57;1H $put =y[?25l[1;1H[L[2;1HTEST_2:
AA
&[4;2H[K[5;1HC123456789987654321
d
~[7;2H[K[8;1H~
Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[34m^M[mm
n[2Cn
o[17;2H[K[18;1Ho[18;2H[K[19;1Hp[34m^H[mp
q[7Cq
r\r[21;4H[K[22;1Hscs[22;9H[K[23;1Ht[34m^M[mt
u[24;2H[K[25;1Hu[25;2H[K[26;1Hv[34m^H[mv
w\w
XxxX
yYYy[30;1H[K[31;1H[K[32;1HTEST_3:
a\a
b\\b[34;5H[K[35;1Hc[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf[38;5H[K[39;1Hj\nj[39;5H[K[40;1Hk[34m^M[mk
l[41;2H[K[42;1Hl[42;2H[K[43;1H[K[44;1H[K[45;1HTEST_4:
a\a
b\b[47;4H[K[48;1Hc[34m^M[mc
d[34m^M[md
e\[34m^M[me
f[2Cf
j[52;2H[K[53;1Hj[53;2H[K[54;1Hk[34m^M[mk
l
l[56;2H[K[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^TEST_5[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1HTEST_4:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_4:\"
:let y = substitute('aAa', 'A', '\=substitute(submatch(0), ".", "\\", "")', '')[7C||[8;1H $put =y
:let y = substitute('bBb', 'B', '\=substitute(submatch(0), ".", "\\\\", "")', '')     ||[10;1H $put =y
:let y = substitute('cCc', 'C', '\=substitute(submatch(0), ".", "[34m^V^M[m", "")', '')     ||[12;1H $put =y
:let y = substitute('dDd', 'D', '\=substitute(submatch(0), ".", "\\[34m^V^M[m", "")', '')   ||[14;1H $put =y
:let y = substitute('eEe', 'E', '\=substitute(submatch(0), ".", "\\\\[34m^V^M[m", "")', '') ||[16;1H $put =y
:let y = substitute('fFf', 'F', '\=substitute(submatch(0), ".", "\\r", "")', '')      ||[18;1H $put =y
:let y = substitute('jJj', 'J', '\=substitute(submatch(0), ".", "\\n", "")', '')      ||[20;1H $put =y
:let y = substitute('kKk', 'K', '\=substitute(submatch(0), ".", "\r", "")', '')[7C||[22;1H $put =y
:let y = substitute('lLl', 'L', '\=substitute(submatch(0), ".", "\n", "")', '')[7C||[24;1H $put =y
/^TEST_5
ENDTEST

TEST_5:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_5:\"
:$put =substitute('A123456789', 'A\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\=suu[35;1Hbmatch(0) . submatch(9) . submatch(8) . submatch(7) . submatch(6) . submatch(5) . submaa[36;1Htch(4) . submatch(3) . submatch(2) . submatch(1)', '')
:$put =substitute('A123456789', 'A\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\=stt[38;1Hring([submatch(0, 1), submatch(9, 1), submatch(8, 1), submatch(7, 1), submatch(6, 1), ss[39;1Hubmatch(5, 1), submatch(4, 1), submatch(3, 1), submatch(2, 1), submatch(1, 1)])', '')
/^TEST_6
ENDTEST

TEST_6:

STARTTEST
:set magic&
:$put =\"\n\nTEST_6:\"
:set cpo+=/
:$put =substitute('A', 'A', 'a', '')
:$put =substitute('B', 'B', '%', '')
:set cpo-=/
:$put =substitute('C', 'C', 'c', '')
:$put =substitute('D', 'D', '%', '')
/^TEST_7
ENDTEST

[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/^STARTTEST[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H6 lines, 543 characters written[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[31;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[41;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =\"\n\nTEST_5:\"[?25l3 more lines[57;13H[K[27m[23m[m[H[2J[1;1H&
C123456789987654321
d
~
~
Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[34m^M[mm
n[34m^M[mn
o
o
p[34m^H[mp
q[7Cq
r\r
scs
t[34m^M[mt
u
u
v[34m^H[mv
w\w
XxxX
yYYy


TEST_3:
a\a
b\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf
j\nj
k[34m^M[mk
l
l


TEST_4:
a\a
b\b
c[34m^M[mc
d[34m^M[md
e\[34m^M[me
f[34m^M[mf
j
j
k[34m^M[mk
l
l


TEST_5:
3 more lines[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =substitute('A123456789', 'A\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\=s
[56;87Hu[57;1Hbmatch(0) . submatch(9) . submatch(8) . submatch(7) . submatch(6) . submatch(5) . subm
[56;87Ha[57;1Htch(4) . submatch(3) . submatch(2) . submatch(1)', '')[?25l[1;1H[2L[1;1HC123456789987654321
d
~

Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[2Cm
n[2Cn
o[13;2H[K[15;1Hp[34m^H[mp
q       q
r\r[17;9H[K[18;1Hscs
t[34m^M[mt
u[20;2H[K[22;1Hv[34m^H[mv
w\w[23;4H[K[24;1HXxxX
yYYy[26;1H[K[28;1HTEST_3:
a\a[29;4H[K[30;1Hb\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf[34;5H[K[35;1Hj\nj
k[34m^M[mk
l[37;2H[K[39;1H[K[41;1HTEST_4:
a\a[42;4H[K[43;1Hb\b
c[34m^M[mc
d[2Cd
e\[34m^M[me
f[34m^M[mf[47;5H[K[48;1Hj[48;2H[K[50;1Hk[34m^M[mk
l[51;2H[K[53;1H[K[55;1HTEST_5:
A123456789987654321[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('A123456789', 'A\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\=s
[56;87Ht[57;1Hring([submatch(0, 1), submatch(9, 1), submatch(8, 1), submatch(7, 1), submatch(6, 1), 
[56;87Hs[57;1Hubmatch(5, 1), submatch(4, 1), submatch(3, 1), submatch(2, 1), submatch(1, 1)])', '')[?25l[1;1H[2L[1;1Hd
~

Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[2Cm
n[2Cn
o[12;2H[K[14;1Hp[34m^H[mp
q       q
r\r[16;9H[K[17;1Hscs
t[34m^M[mt
u[19;2H[K[21;1Hv[34m^H[mv
w\w[22;4H[K[23;1HXxxX
yYYy[25;1H[K[27;1HTEST_3:
a\a[28;4H[K[29;1Hb\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf[33;5H[K[34;1Hj\nj
k[34m^M[mk
l[36;2H[K[38;1H[K[40;1HTEST_4:
a\a[41;4H[K[42;1Hb\b
c[34m^M[mc
d[2Cd
e\[34m^M[me
f[34m^M[mf[46;5H[K[47;1Hj[47;2H[K[49;1Hk[34m^M[mk
l[50;2H[K[52;1H[K[54;1HTEST_5:
A123456789987654321
[['A123456789'], ['9'], ['8'], ['7'], ['6'], ['5'], ['4'], ['3'], ['2'], ['1']][57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^TEST_6[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H:let y = substitute('eEe', 'E', '\=substitute(submatch(0), ".", "\\\\[34m^V^M[m", "")', '') ||[2;1H $put =y
:let y = substitute('fFf', 'F', '\=substitute(submatch(0), ".", "\\r", "")', '')      ||[4;1H $put =y
:let y = substitute('jJj', 'J', '\=substitute(submatch(0), ".", "\\n", "")', '')      ||[6;1H $put =y
:let y = substitute('kKk', 'K', '\=substitute(submatch(0), ".", "\r", "")', '')[7C||[8;1H $put =y
:let y = substitute('lLl', 'L', '\=substitute(submatch(0), ".", "\n", "")', '')[7C||[10;1H $put =y
/^TEST_5
ENDTEST

TEST_5:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_5:\"
:$put =substitute('A123456789', 'A\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\=suu[21;1Hbmatch(0) . submatch(9) . submatch(8) . submatch(7) . submatch(6) . submatch(5) . submaa[22;1Htch(4) . submatch(3) . submatch(2) . submatch(1)', '')
:$put =substitute('A123456789', 'A\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\=stt[24;1Hring([submatch(0, 1), submatch(9, 1), submatch(8, 1), submatch(7, 1), submatch(6, 1), ss[25;1Hubmatch(5, 1), submatch(4, 1), submatch(3, 1), submatch(2, 1), submatch(1, 1)])', '')
/^TEST_6
ENDTEST

TEST_6:

STARTTEST
:set magic&
:$put =\"\n\nTEST_6:\"
:set cpo+=/
:$put =substitute('A', 'A', 'a', '')
:$put =substitute('B', 'B', '%', '')
:set cpo-=/
:$put =substitute('C', 'C', 'c', '')
:$put =substitute('D', 'D', '%', '')
/^TEST_7
ENDTEST

TEST_7:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_7:\"
:$put =substitute('A[34m^V^M[mA', 'A.', '\=submatch(0)', '')
:$put =substitute(\"B\nB\", 'B.', '\=submatch(0)', '')
:$put =substitute(\"B\nB\", 'B.', '\=string(submatch(0, 1))', '')
:$put =substitute('-bb', '\zeb', 'a', 'g')
:$put =substitute('-bb', '\ze', 'c', 'g')
/^TEST_8
ENDTEST

[31msearch hit BOTTOM, continuing at TOP[29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/^STARTTEST[31;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H9 lines, 216 characters written[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[32;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[41;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =\"\n\nTEST_6:\"[?25l3 more lines[57;13H[K[27m[23m[m[H[2J[1;1HGg
Hh
iI
jJ
Kk
l[34m^M[ml
m[34m^M[mm
n[34m^M[mn
o
o
p[34m^H[mp
q[7Cq
r\r
scs
t[34m^M[mt
u
u
v[34m^H[mv
w\w
XxxX
yYYy


TEST_3:
a\a
b\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf
j\nj
k[34m^M[mk
l
l


TEST_4:
a\a
b\b
c[34m^M[mc
d[34m^M[md
e\[34m^M[me
f[34m^M[mf
j
j
k[34m^M[mk
l
l


TEST_5:
A123456789987654321
[['A123456789'], ['9'], ['8'], ['7'], ['6'], ['5'], ['4'], ['3'], ['2'], ['1']]


TEST_6:
3 more lines[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo+=/[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =substitute('A', 'A', 'a', '')[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('B', 'B', '%', '')[?25l[1;56r[56;1H
[1;57r[56;1H%[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset cpo-=/[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =substitute('C', 'C', 'c', '')[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('D', 'D', '%', '')[?25l[1;56r[56;1H
[1;57r[56;1H%[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^TEST_7[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1HSTARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_5:\"
:$put =substitute('A123456789', 'A\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\=suu[6;1Hbmatch(0) . submatch(9) . submatch(8) . submatch(7) . submatch(6) . submatch(5) . submaa[7;1Htch(4) . submatch(3) . submatch(2) . submatch(1)', '')
:$put =substitute('A123456789', 'A\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)\(.\)', '\=stt[9;1Hring([submatch(0, 1), submatch(9, 1), submatch(8, 1), submatch(7, 1), submatch(6, 1), ss[10;1Hubmatch(5, 1), submatch(4, 1), submatch(3, 1), submatch(2, 1), submatch(1, 1)])', '')
/^TEST_6
ENDTEST

TEST_6:

STARTTEST
:set magic&
:$put =\"\n\nTEST_6:\"
:set cpo+=/
:$put =substitute('A', 'A', 'a', '')
:$put =substitute('B', 'B', '%', '')
:set cpo-=/
:$put =substitute('C', 'C', 'c', '')
:$put =substitute('D', 'D', '%', '')
/^TEST_7
ENDTEST

TEST_7:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_7:\"
:$put =substitute('A[34m^V^M[mA', 'A.', '\=submatch(0)', '')
:$put =substitute(\"B\nB\", 'B.', '\=submatch(0)', '')
:$put =substitute(\"B\nB\", 'B.', '\=string(submatch(0, 1))', '')
:$put =substitute('-bb', '\zeb', 'a', 'g')
:$put =substitute('-bb', '\ze', 'c', 'g')
/^TEST_8
ENDTEST

TEST_8:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_8:\"
:$put =',,X'
:s/\(^\|,\)\ze\(,\|X\)/\1N/g
:$put =',,Y'
:s/\(^\|,\)\ze\(,\|Y\)/\1N/gc
a:$put =',,Z'
:s/\(^\|,\)\ze\(,\|Z\)/\1N/gc
yy/^TEST_9:
ENDTEST

[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/^STARTTEST[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H9 lines, 313 characters written[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[31;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[40;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[41;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[41;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[41;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =\"\n\nTEST_7:\"[?25l3 more lines[57;13H[K[27m[23m[m[H[2J[1;1Hn[34m^M[mn
o
o
p[34m^H[mp
q[7Cq
r\r
scs
t[34m^M[mt
u
u
v[34m^H[mv
w\w
XxxX
yYYy


TEST_3:
a\a
b\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf
j\nj
k[34m^M[mk
l
l


TEST_4:
a\a
b\b
c[34m^M[mc
d[34m^M[md
e\[34m^M[me
f[34m^M[mf
j
j
k[34m^M[mk
l
l


TEST_5:
A123456789987654321
[['A123456789'], ['9'], ['8'], ['7'], ['6'], ['5'], ['4'], ['3'], ['2'], ['1']]


TEST_6:
a
%
c
%


TEST_7:
3 more lines[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =substitute('A^[34m^M[mA', 'A.', '\=submatch(0)', '')[?25l[1;56r[56;1H
[1;57r[56;1HA[34m^M[mA[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute(\"B\nB\", 'B.', '\=submatch(0)', '')[?25l[1;56r[1;1H[2M[1;57r[55;1HB
B[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute(\"B\nB\", 'B.', '\=string(submatch(0, 1))', '')[?25l[1;56r[1;1H[2M[1;57r[55;1H['B
']B[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('-bb', '\zeb', 'a', 'g')[?25l[1;56r[56;1H
[1;57r[56;1H-abab[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =substitute('-bb', '\ze', 'c', 'g')[?25l[1;56r[56;1H
[1;57r[56;1Hc-cbcbc[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^TEST_8[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[2;1HSTARTTEST
:set magic&
:$put =\"\n\nTEST_6:\"
:set cpo+=/
:$put =substitute('A', 'A', 'a', '')
:$put =substitute('B', 'B', '%', '')
:set cpo-=/
:$put =substitute('C', 'C', 'c', '')
:$put =substitute('D', 'D', '%', '')
/^TEST_7
ENDTEST

TEST_7:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_7:\"
:$put =substitute('A[34m^V^M[mA', 'A.', '\=submatch(0)', '')
:$put =substitute(\"B\nB\", 'B.', '\=submatch(0)', '')
:$put =substitute(\"B\nB\", 'B.', '\=string(submatch(0, 1))', '')
:$put =substitute('-bb', '\zeb', 'a', 'g')
:$put =substitute('-bb', '\ze', 'c', 'g')
/^TEST_8
ENDTEST

TEST_8:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_8:\"
:$put =',,X'
:s/\(^\|,\)\ze\(,\|X\)/\1N/g
:$put =',,Y'
:s/\(^\|,\)\ze\(,\|Y\)/\1N/gc
a:$put =',,Z'
:s/\(^\|,\)\ze\(,\|Z\)/\1N/gc
yy/^TEST_9:
ENDTEST

TEST_9:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_9:\"
:$put ='xxx'
:s/x/X/gc
yyq/^TEST_10:
ENDTEST

TEST_10:

STARTTEST
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/^STARTTEST[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H10 lines, 186 characters written[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[31;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[41;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =\"\n\nTEST_8:\"[?25l3 more lines[57;13H[K[27m[23m[m[H[2J[1;1Hv[34m^H[mv
w\w
XxxX
yYYy


TEST_3:
a\a
b\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf
j\nj
k[34m^M[mk
l
l


TEST_4:
a\a
b\b
c[34m^M[mc
d[34m^M[md
e\[34m^M[me
f[34m^M[mf
j
j
k[34m^M[mk
l
l


TEST_5:
A123456789987654321
[['A123456789'], ['9'], ['8'], ['7'], ['6'], ['5'], ['4'], ['3'], ['2'], ['1']]


TEST_6:
a
%
c
%


TEST_7:
A[34m^M[mA
B
B
['B
']B
-abab
c-cbcbc


TEST_8:
3 more lines[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =',,X'[?25l[1;56r[56;1H
[1;57r[56;1H,,X[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/\(^\|,\)\ze\(,\|X\)/\1N/g[?25l[56;1HN,,NX[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =',,Y'[?25l[1;56r[56;1H
[1;57r[56;1H,,Y[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/\(^\|,\)\ze\(,\|Y\)/\1N/gc[?25l[56;1H[7m,[m
[32mreplace with \1N (y/n/a/q/l/^E/^Y)?[?12l[?25h[?25l[m[57;1H[K[57;1H[56;1HN,,NY[?12l[?25h[?25l
:[?12l[?25h$put =',,Z'[?25l[1;56r[56;1H
[1;57r[56;1H,,Z[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/\(^\|,\)\ze\(,\|Z\)/\1N/gc[?25l[56;1H[7m,[m
[32mreplace with \1N (y/n/a/q/l/^E/^Y)?[?12l[?25h[?25l[m[57;1H[K[57;1H[56;1HN,[7m,[mZ
[32mreplace with \1N (y/n/a/q/l/^E/^Y)?[?12l[?25h[?25l[m[57;1H[K[57;1H[56;3H,NZ[?12l[?25h[?25l
/[?12l[?25h^TEST_9:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1HSTARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_7:\"
:$put =substitute('A[34m^V^M[mA', 'A.', '\=submatch(0)', '')
:$put =substitute(\"B\nB\", 'B.', '\=submatch(0)', '')
:$put =substitute(\"B\nB\", 'B.', '\=string(submatch(0, 1))', '')
:$put =substitute('-bb', '\zeb', 'a', 'g')
:$put =substitute('-bb', '\ze', 'c', 'g')
/^TEST_8
ENDTEST

TEST_8:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_8:\"
:$put =',,X'
:s/\(^\|,\)\ze\(,\|X\)/\1N/g
:$put =',,Y'
:s/\(^\|,\)\ze\(,\|Y\)/\1N/gc
a:$put =',,Z'
:s/\(^\|,\)\ze\(,\|Z\)/\1N/gc
yy/^TEST_9:
ENDTEST

TEST_9:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_9:\"
:$put ='xxx'
:s/x/X/gc
yyq/^TEST_10:
ENDTEST

TEST_10:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_10:\"
:let y = substitute('123', '\zs', 'a', 'g')[13C| $put =y
:let y = substitute('123', '\zs.', 'a', 'g')[12C| $put =y
:let y = substitute('123', '.\zs', 'a', 'g')[12C| $put =y
:let y = substitute('123', '\ze', 'a', 'g')[13C| $put =y
:let y = substitute('123', '\ze.', 'a', 'g')[12C| $put =y
:let y = substitute('123', '.\ze', 'a', 'g')[12C| $put =y
:let y = substitute('123', '1\|\ze', 'a', 'g')[10C| $put =y
:let y = substitute('123', '1\zs\|[23]', 'a', 'g')      | $put =y
/^TEST_11
ENDTEST

TEST_11:
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/^STARTTEST[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H6 lines, 82 characters written[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[31;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[37;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =\"\n\nTEST_9:\"[?25l3 more lines[57;13H[K[27m[23m[m[H[2J[1;1HTEST_3:
a\a
b\\b
c[34m^M[mc
d\[34m^M[md
e\\[34m^M[me
f\rf
j\nj
k[34m^M[mk
l
l


TEST_4:
a\a
b\b
c[34m^M[mc
d[34m^M[md
e\[34m^M[me
f[34m^M[mf
j
j
k[34m^M[mk
l
l


TEST_5:
A123456789987654321
[['A123456789'], ['9'], ['8'], ['7'], ['6'], ['5'], ['4'], ['3'], ['2'], ['1']]


TEST_6:
a
%
c
%


TEST_7:
A[34m^M[mA
B
B
['B
']B
-abab
c-cbcbc


TEST_8:
N,,NX
N,,NY
N,,NZ


TEST_9:
3 more lines[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='xxx'[?25l[1;56r[56;1H
[1;57r[56;1Hxxx[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/x/X/gc[?25l[56;1H[7mx[m
[32mreplace with X (y/n/a/q/l/^E/^Y)?[?12l[?25h[?25l[m[57;1H[K[57;1H[56;1HX[7mx[m
[32mreplace with X (y/n/a/q/l/^E/^Y)?[?12l[?25h[?25l[m[57;1H[K[57;1H[56;2HX[7mx[m
[32mreplace with X (y/n/a/q/l/^E/^Y)?[?12l[?25h[?25l[m[57;1H[K[57;1H[56;3Hx[?12l[?25h[?25l
/[?12l[?25h^TEST_10:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[2;1HTEST_8:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_8:\"
:$put =',,X'
:s/\(^\|,\)\ze\(,\|X\)/\1N/g
:$put =',,Y'
:s/\(^\|,\)\ze\(,\|Y\)/\1N/gc
a:$put =',,Z'
:s/\(^\|,\)\ze\(,\|Z\)/\1N/gc
yy/^TEST_9:
ENDTEST

TEST_9:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_9:\"
:$put ='xxx'
:s/x/X/gc
yyq/^TEST_10:
ENDTEST

TEST_10:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_10:\"
:let y = substitute('123', '\zs', 'a', 'g')[13C| $put =y
:let y = substitute('123', '\zs.', 'a', 'g')[12C| $put =y
:let y = substitute('123', '.\zs', 'a', 'g')[12C| $put =y
:let y = substitute('123', '\ze', 'a', 'g')[13C| $put =y
:let y = substitute('123', '\ze.', 'a', 'g')[12C| $put =y
:let y = substitute('123', '.\ze', 'a', 'g')[12C| $put =y
:let y = substitute('123', '1\|\ze', 'a', 'g')[10C| $put =y
:let y = substitute('123', '1\zs\|[23]', 'a', 'g')      | $put =y
/^TEST_11
ENDTEST

TEST_11:

STARTTEST
:/^Results/,$wq! test.out
ENDTEST

Results of test72:


TEST_1:
AA
&
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/^STARTTEST[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H12 lines, 584 characters written[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[31;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[43;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[44;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic&[?25l[44;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&[?25l[44;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =\"\n\nTEST_10:\"[?25l3 more lines[57;13H[K[27m[23m[m[H[2J[1;1Hd\[34m^M[md
e\\[34m^M[me
f\rf
j\nj
k[34m^M[mk
l
l


TEST_4:
a\a
b\b
c[34m^M[mc
d[34m^M[md
e\[34m^M[me
f[34m^M[mf
j
j
k[34m^M[mk
l
l


TEST_5:
A123456789987654321
[['A123456789'], ['9'], ['8'], ['7'], ['6'], ['5'], ['4'], ['3'], ['2'], ['1']]


TEST_6:
a
%
c
%


TEST_7:
A[34m^M[mA
B
B
['B
']B
-abab
c-cbcbc


TEST_8:
N,,NX
N,,NY
N,,NZ


TEST_9:
XXx


TEST_10:
3 more lines[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet y = substitute('123', '\zs', 'a', 'g')             | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Ha1a2a3a[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('123', '\zs.', 'a', 'g')            | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Haaa[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('123', '.\zs', 'a', 'g')            | $put =y[?25l[1;56r[56;1H
[1;57r[56;1H1a2a3a[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('123', '\ze', 'a', 'g')             | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Ha1a2a3a[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('123', '\ze.', 'a', 'g')            | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Ha1a2a3[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('123', '.\ze', 'a', 'g')            | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Haaa[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('123', '1\|\ze', 'a', 'g')          | $put =y[?25l[1;56r[56;1H
[1;57r[56;1Haa2a3a[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet y = substitute('123', '1\zs\|[23]', 'a', 'g')      | $put =y[?25l[1;56r[56;1H
[1;57r[56;1H1aaa[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^TEST_11[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[2;1HSTARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_9:\"
:$put ='xxx'
:s/x/X/gc
yyq/^TEST_10:
ENDTEST

TEST_10:

STARTTEST
:set magic&
:set cpo&
:$put =\"\n\nTEST_10:\"
:let y = substitute('123', '\zs', 'a', 'g')[13C| $put =y
:let y = substitute('123', '\zs.', 'a', 'g')[12C| $put =y
:let y = substitute('123', '.\zs', 'a', 'g')[12C| $put =y
:let y = substitute('123', '\ze', 'a', 'g')[13C| $put =y
:let y = substitute('123', '\ze.', 'a', 'g')[12C| $put =y
:let y = substitute('123', '.\ze', 'a', 'g')[12C| $put =y
:let y = substitute('123', '1\|\ze', 'a', 'g')[10C| $put =y
:let y = substitute('123', '1\zs\|[23]', 'a', 'g')      | $put =y
/^TEST_11
ENDTEST

TEST_11:

STARTTEST
:/^Results/,$wq! test.out
ENDTEST

Results of test72:


TEST_1:
AA
&
C123456789987654321
d
~
~
Gg
Hh
iI
jJ
Kk
l[34m^M[ml
m[34m^M[mm
n[34m^M[mn
o
o
p[34m^H[mp
q[7Cq
r\r
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/^STARTTEST[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H1 line, 26 characters written[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[31;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[32;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^Results/,$wq! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 131 lines, 617 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test80 = test61; then \
#	  if diff test.out test80.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test80.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test80.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test82.failed test.ok test.out X* viminfo
cp test82.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test82.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test82.in" 103 lines, 3166 characters[1;1HTests for case-insensitive UTF-8 comparisons (utf_strnicmp() in mbyte.c)
Also test "g~ap".

STARTTEST
:so small.vim
:if !has("multi_byte")
: e! test.ok
: w! test.out
: qa!
:endif
:set enc=utf8
ggdG:
:
:function! Ch(a, op, b, expected)
:  if eval(printf('"%s" %s "%s"', a:a, a:op, a:b)) != a:expected
:    call append(line('$'), printf('"%s" %s "%s" should return %d', a:a, a:op, a:b, a:ee[17;1Hxpected))
:  else
:    let b:passed += 1
:  endif
:endfunction
:
:function! Chk(a, b, result)
:  if a:result == 0
:    call Ch(a:a, '==?', a:b, 1)
:    call Ch(a:a, '!=?', a:b, 0)
:    call Ch(a:a, '<=?', a:b, 1)
:    call Ch(a:a, '>=?', a:b, 1)
:    call Ch(a:a, '<?', a:b, 0)
:    call Ch(a:a, '>?', a:b, 0)
:  elseif a:result > 0
:    call Ch(a:a, '==?', a:b, 0)
:    call Ch(a:a, '!=?', a:b, 1)
:    call Ch(a:a, '<=?', a:b, 0)
:    call Ch(a:a, '>=?', a:b, 1)
:    call Ch(a:a, '<?', a:b, 0)
:    call Ch(a:a, '>?', a:b, 1)
:  else
:    call Ch(a:a, '==?', a:b, 0)
:    call Ch(a:a, '!=?', a:b, 1)
:    call Ch(a:a, '<=?', a:b, 1)
:    call Ch(a:a, '>=?', a:b, 0)
:    call Ch(a:a, '<?', a:b, 1)
:    call Ch(a:a, '>?', a:b, 0)
:  endif
:endfunction
:
:function! Check(a, b, result)
:  call Chk(a:a, a:b, a:result)
:  call Chk(a:b, a:a, -a:result)
:endfunction
:
:function! LT(a, b)
:  call Check(a:a, a:b, -1)
:endfunction
:[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for case-insensitive UTF-8 comparisons (utf_strnicmp() in mbyte.c)[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 97 lines, 3055 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:
:function! GT(a, b)
:  call Check(a:a, a:b, 1)
:endfunction
:
:function! EQ(a, b)
:  call Check(a:a, a:b, 0)
:endfunction
:
:let b:passed=0
:call EQ('', '')
:call LT('', 'a')
:call EQ('abc', 'abc')
:call EQ('Abc', 'abC')
:call LT('ab', 'abc')
:call LT('AB', 'abc')
:call LT('ab', 'aBc')
:call EQ('\xd0\xb9\xd1\x86\xd1\x83\xd0\xba\xd0\xb5\xd0\xbd', '\xd0\xb9\xd0\xa6\xd0\xa3\\[19;1Hxd0\xba\xd0\x95\xd0\xbd')
:call LT('\xd0\xb9\xd1\x86\xd1\x83\xd0\xba\xd0\xb5\xd0\xbd', '\xd0\xaf\xd1\x86\xd1\x83\\[21;1Hxd0\xba\xd0\xb5\xd0\xbd')
:call EQ('\xe2\x84\xaa', 'k')
:call LT('\xe2\x84\xaa', 'kkkkkk')
:call EQ('\xe2\x84\xaa\xe2\x84\xaa\xe2\x84\xaa', 'kkk')
:call LT('kk', '\xe2\x84\xaa\xe2\x84\xaa\xe2\x84\xaa')
:call EQ('\xe2\x84\xaa\xe2\x84\xa6k\xe2\x84\xaak\xcf\x89', 'k\xcf\x89\xe2\x84\xaakk\xe22[27;1H\x84\xa6')
:call EQ('Abc\x80', 'AbC\x80')
:call LT('Abc\x80', 'AbC\x81')
:call LT('Abc', 'AbC\x80')
:call LT('abc\x80DEF', 'abc\x80def')  " case folding stops at the first bad character
:call LT('\xc3XYZ', '\xc3xyz')
:call EQ('\xef\xbc\xba', '\xef\xbd\x9a')  " FF3A (upper), FF5A (lower)
:call GT('\xef\xbc\xba', '\xef\xbc\xff')  " first string is ok and equals \xef\xbd\x9a  [35;1Hafter folding, second string is illegal and was left unchanged, then the strings were bb[36;1Hytewise compared
:call LT('\xc3', '\xc3\x83')
:call EQ('\xc3\xa3xYz', '\xc3\x83XyZ')
:for n in range(0x60, 0xFF) | call LT(printf('xYz\x%.2X', n-1), printf('XyZ\x%.2X', n)))[40;1H | endfor
:for n in range(0x80, 0xBF) | call EQ(printf('xYz\xc2\x%.2XUvW', n), printf('XyZ\xc2\x%%[42;1H.2XuVw', n)) | endfor
:for n in range(0xC0, 0xFF) | call LT(printf('xYz\xc2\x%.2XUvW', n), printf('XyZ\xc2\x%%[44;1H.2XuVw', n)) | endfor
:call append(0, printf('%d checks passed', b:passed))
:"
:" test that g~ap changes one paragraph only.
:new
iabcd

defg[34m^[[mgg0g~ap:let lns = getline(1,3)
:q!
:call append(line('$'), lns)
:"
:wq! test.out
ENDTEST[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !has("multi_byte")[?25l
:  [?12l[?25h: e! test.ok
[?25l:  [?12l[?25h: w! test.out
[?25l:  [?12l[?25h: qa!
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1H:function! GT(a, b)
:  call Check(a:a, a:b, 1)
:endfunction
:[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset enc=utf8[?25l[27m[23m[m[H[2J[1;1H:function! GT(a, b)
:  call Check(a:a, a:b, 1)
:endfunction
:
:function! EQ(a, b)
:  call Check(a:a, a:b, 0)
:endfunction
:
:let b:passed=0
:call EQ('', '')
:call LT('', 'a')
:call EQ('abc', 'abc')
:call EQ('Abc', 'abC')
:call LT('ab', 'abc')
:call LT('AB', 'abc')
:call LT('ab', 'aBc')
:call EQ('\xd0\xb9\xd1\x86\xd1\x83\xd0\xba\xd0\xb5\xd0\xbd', '\xd0\xb9\xd0\xa6\xd0\xa3\\[18;1Hxd0\xba\xd0\x95\xd0\xbd')
:call LT('\xd0\xb9\xd1\x86\xd1\x83\xd0\xba\xd0\xb5\xd0\xbd', '\xd0\xaf\xd1\x86\xd1\x83\\[20;1Hxd0\xba\xd0\xb5\xd0\xbd')
:call EQ('\xe2\x84\xaa', 'k')
:call LT('\xe2\x84\xaa', 'kkkkkk')
:call EQ('\xe2\x84\xaa\xe2\x84\xaa\xe2\x84\xaa', 'kkk')
:call LT('kk', '\xe2\x84\xaa\xe2\x84\xaa\xe2\x84\xaa')
:call EQ('\xe2\x84\xaa\xe2\x84\xa6k\xe2\x84\xaak\xcf\x89', 'k\xcf\x89\xe2\x84\xaakk\xe22[26;1H\x84\xa6')
:call EQ('Abc\x80', 'AbC\x80')
:call LT('Abc\x80', 'AbC\x81')
:call LT('Abc', 'AbC\x80')
:call LT('abc\x80DEF', 'abc\x80def')  " case folding stops at the first bad character
:call LT('\xc3XYZ', '\xc3xyz')
:call EQ('\xef\xbc\xba', '\xef\xbd\x9a')  " FF3A (upper), FF5A (lower)
:call GT('\xef\xbc\xba', '\xef\xbc\xff')  " first string is ok and equals \xef\xbd\x9a  [34;1Hafter folding, second string is illegal and was left unchanged, then the strings were bb[35;1Hytewise compared
:call LT('\xc3', '\xc3\x83')
:call EQ('\xc3\xa3xYz', '\xc3\x83XyZ')
:for n in range(0x60, 0xFF) | call LT(printf('xYz\x%.2X', n-1), printf('XyZ\x%.2X', n)))[39;1H | endfor
:for n in range(0x80, 0xBF) | call EQ(printf('xYz\xc2\x%.2XUvW', n), printf('XyZ\xc2\x%%[41;1H.2XuVw', n)) | endfor
:for n in range(0xC0, 0xFF) | call LT(printf('xYz\xc2\x%.2XUvW', n), printf('XyZ\xc2\x%%[43;1H.2XuVw', n)) | endfor
:call append(0, printf('%d checks passed', b:passed))
:"
:" test that g~ap changes one paragraph only.
:new
iabcd

defg[34m^[[mgg0g~ap:let lns = getline(1,3)
:q!
:call append(line('$'), lns)
:"
:wq! test.out
ENDTEST
[?12l[?25h[?25l[27m[23m[m[H[2J[1;1HTests for case-insensitive UTF-8 comparisons (utf_strnicmp() in mbyte.c)
Also test "g~ap".

STARTTEST
:so small.vim
:if !has("multi_byte")
: e! test.ok
: w! test.out
: qa!
:endif
:set enc=utf8
ggdG:
:
:function! Ch(a, op, b, expected)
:  if eval(printf('"%s" %s "%s"', a:a, a:op, a:b)) != a:expected
:    call append(line('$'), printf('"%s" %s "%s" should return %d', a:a, a:op, a:b, a:ee[17;1Hxpected))
:  else
:    let b:passed += 1
:  endif
:endfunction
:
:function! Chk(a, b, result)
:  if a:result == 0
:    call Ch(a:a, '==?', a:b, 1)
:    call Ch(a:a, '!=?', a:b, 0)
:    call Ch(a:a, '<=?', a:b, 1)
:    call Ch(a:a, '>=?', a:b, 1)
:    call Ch(a:a, '<?', a:b, 0)
:    call Ch(a:a, '>?', a:b, 0)
:  elseif a:result > 0
:    call Ch(a:a, '==?', a:b, 0)
:    call Ch(a:a, '!=?', a:b, 1)
:    call Ch(a:a, '<=?', a:b, 0)
:    call Ch(a:a, '>=?', a:b, 1)
:    call Ch(a:a, '<?', a:b, 0)
:    call Ch(a:a, '>?', a:b, 1)
:  else
:    call Ch(a:a, '==?', a:b, 0)
:    call Ch(a:a, '!=?', a:b, 1)
:    call Ch(a:a, '<=?', a:b, 1)
:    call Ch(a:a, '>=?', a:b, 0)
:    call Ch(a:a, '<?', a:b, 1)
:    call Ch(a:a, '>?', a:b, 0)
:  endif
:endfunction
:
:function! Check(a, b, result)
:  call Chk(a:a, a:b, a:result)
:  call Chk(a:b, a:a, -a:result)
:endfunction
:
:function! LT(a, b)
:  call Check(a:a, a:b, -1)
:endfunction
:[1;1H[?12l[?25h[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H--No lines in buffer--[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! Ch(a, op, b, expected)[?25l
:  [?12l[?25h:  if eval(printf('"%s" %s "%s"', a:a, a:op, a:b)) != a:expected
[?25l:    [?12l[?25h:    call append(line('$'), printf('"%s" %s "%s" should return %d', a:a, a:op, a:
[56;87Hb[57;1H, a:expected))
[?25l:    [?12l[?25h:  else
[?25l:    [?12l[?25h:    let b:passed += 1
[?25l:    [?12l[?25h:  endif
[?25l:  [?12l[?25h:endfunction[1;1H[7L[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! Chk(a, b, result)[?25l
:  [?12l[?25h:  if a:result == 0
[?25l:    [?12l[?25h:    call Ch(a:a, '==?', a:b, 1)
[?25l:    [?12l[?25h:    call Ch(a:a, '!=?', a:b, 0)
[?25l:    [?12l[?25h:    call Ch(a:a, '<=?', a:b, 1)
[?25l:    [?12l[?25h:    call Ch(a:a, '>=?', a:b, 1)
[?25l:    [?12l[?25h:    call Ch(a:a, '<?', a:b, 0)
[?25l:    [?12l[?25h:    call Ch(a:a, '>?', a:b, 0)
[?25l:    [?12l[?25h:  elseif a:result > 0
[?25l:    [?12l[?25h:    call Ch(a:a, '==?', a:b, 0)
[?25l:    [?12l[?25h:    call Ch(a:a, '!=?', a:b, 1)
[?25l:    [?12l[?25h:    call Ch(a:a, '<=?', a:b, 0)
[?25l:    [?12l[?25h:    call Ch(a:a, '>=?', a:b, 1)
[?25l:    [?12l[?25h:    call Ch(a:a, '<?', a:b, 0)
[?25l:    [?12l[?25h:    call Ch(a:a, '>?', a:b, 1)
[?25l:    [?12l[?25h:  else
[?25l:    [?12l[?25h:    call Ch(a:a, '==?', a:b, 0)
[?25l:    [?12l[?25h:    call Ch(a:a, '!=?', a:b, 1)
[?25l:    [?12l[?25h:    call Ch(a:a, '<=?', a:b, 1)
[?25l:    [?12l[?25h:    call Ch(a:a, '>=?', a:b, 0)
[?25l:    [?12l[?25h:    call Ch(a:a, '<?', a:b, 1)
[?25l:    [?12l[?25h:    call Ch(a:a, '>?', a:b, 0)
[?25l:    [?12l[?25h:  endif
[?25l:  [?12l[?25h:endfunction[1;1H[23L[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! Check(a, b, result)[?25l
:  [?12l[?25h:  call Chk(a:a, a:b, a:result)
[?25l:  [?12l[?25h:  call Chk(a:b, a:a, -a:result)
[?25l:  [?12l[?25h:endfunction[1;1H[3L[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! LT(a, b)[?25l
:  [?12l[?25h:  call Check(a:a, a:b, -1)
[?25l:  [?12l[?25h:endfunction[1;1H[2L[?25l[2;1H[1m[34m~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! GT(a, b)[?25l
:  [?12l[?25h:  call Check(a:a, a:b, 1)
[?25l:  [?12l[?25h:endfunction[1;1H[2L[?25l[2;1H[1m[34m~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! EQ(a, b)[?25l
:  [?12l[?25h:  call Check(a:a, a:b, 0)
[?25l:  [?12l[?25h:endfunction[1;1H[2L[?25l[2;1H[1m[34m~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet b:passed=0[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall EQ('', '')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall LT('', 'a')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall EQ('abc', 'abc')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall EQ('Abc', 'abC')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall LT('ab', 'abc')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall LT('AB', 'abc')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall LT('ab', 'aBc')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall EQ('\xd0\xb9\xd1\x86\xd1\x83\xd0\xba\xd0\xb5\xd0\xbd', '\xd0\xb9\xd0\xa6\xd0\xa3
[56;87H\[57;1Hxd0\xba\xd0\x95\xd0\xbd')[?25l[1;1H[L[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall LT('\xd0\xb9\xd1\x86\xd1\x83\xd0\xba\xd0\xb5\xd0\xbd', '\xd0\xaf\xd1\x86\xd1\x83
[56;87H\[57;1Hxd0\xba\xd0\xb5\xd0\xbd')[?25l[1;1H[L[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall EQ('\xe2\x84\xaa', 'k')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall LT('\xe2\x84\xaa', 'kkkkkk')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall EQ('\xe2\x84\xaa\xe2\x84\xaa\xe2\x84\xaa', 'kkk')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall LT('kk', '\xe2\x84\xaa\xe2\x84\xaa\xe2\x84\xaa')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall EQ('\xe2\x84\xaa\xe2\x84\xa6k\xe2\x84\xaak\xcf\x89', 'k\xcf\x89\xe2\x84\xaakk\xe
[56;87H2[57;1H\x84\xa6')[?25l[1;1H[L[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall EQ('Abc\x80', 'AbC\x80')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall LT('Abc\x80', 'AbC\x81')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall LT('Abc', 'AbC\x80')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall LT('abc\x80DEF', 'abc\x80def')  " case folding stops at the first bad character[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall LT('\xc3XYZ', '\xc3xyz')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall EQ('\xef\xbc\xba', '\xef\xbd\x9a')  " FF3A (upper), FF5A (lower)[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall GT('\xef\xbc\xba', '\xef\xbc\xff')  " first string is ok and equals \xef\xbd\x9a
after folding, second string is illegal and was left unchanged, then the strings were 
[56;87Hb[57;1Hytewise compared[?25l[1;1H[2L[2;1H[1m[34m~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall LT('\xc3', '\xc3\x83')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall EQ('\xc3\xa3xYz', '\xc3\x83XyZ')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor n in range(0x60, 0xFF) | call LT(printf('xYz\x%.2X', n-1), printf('XyZ\x%.2X', n)
[56;87H)[57;1H | endfor[?25l[1;1H[L[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hfor n in range(0x80, 0xBF) | call EQ(printf('xYz\xc2\x%.2XUvW', n), printf('XyZ\xc2\x
[56;87H%[57;1H.2XuVw', n)) | endfor[?25l[1;1H[L[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hfor n in range(0xC0, 0xFF) | call LT(printf('xYz\xc2\x%.2XUvW', n), printf('XyZ\xc2\x
[56;87H%[57;1H.2XuVw', n)) | endfor[?25l[1;1H[L[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall append(0, printf('%d checks passed', b:passed))[?25l[1;56r[1;1H[L[1;57r[1;1H3732 checks passed[57;1H[K[2;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test that g~ap changes one paragraph only.[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;1H3732 checks passed[29;19H[K[30;1H[K[56;1H[7mtest82.in [+]                                                                          [1;1H[?12l[?25h[?25l[mabcd[2;1H[K[3;1Hdefg[3;5H[K[28;11H[1m[7m[+][3;4H[?12l[?25h[1;1H[?25l[mABCD[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet lns = getline(1,3)[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hq![?25l[1;1H3732 checks passed

[1m[34m~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [56;1H~                                                                                      [2;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall append(line('$'), lns)[?25l[3;1HABCD[3;5H[K[4;1H[K[5;1Hdefg[5;5H[K[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwq! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 5 lines, 31 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test82 = test61; then \
#	  if diff test.out test82.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test82.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test82.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test84.failed test.ok test.out X* viminfo
cp test84.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test84.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test84.in" 35 lines, 786 characters[1;1HTests for curswant not changing when setting an option

STARTTEST
:so small.vim
:/^start target options$/+1,/^end target options$/-1 yank
:let target_option_names = split(@0)
:function TestCurswant(option_name)
:  normal! ggf8j
:  let curswant_before = winsaveview().curswant
:  execute 'let' '&'.a:option_name '=' '&'.a:option_name
:  let curswant_after = winsaveview().curswant
:  return [a:option_name, curswant_before, curswant_after]
:endfunction
:
:new
:put =['1234567890', '12345']
:1 delete _
:let result = []
:for option_name in target_option_names
:  call add(result, TestCurswant(option_name))
:endfor
:
:new
:put =map(copy(result), 'join(v:val, '' '')')
:1 delete _
:write test.out
:
:qall!
ENDTEST

start target options[32;9Htabstop[33;9Htimeoutlen[34;9Httimeoutlen
end target options
[1m[34m~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for curswant not changing when setting an option[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 25 lines, 637 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[29;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^start target options$/+1,/^end target options$/-1 yank[?25l3 lines yanked[57;15H[K[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet target_option_names = split(@0)[?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction TestCurswant(option_name)[?25l
:  [?12l[?25h:  normal! ggf8j
[?25l:  [?12l[?25h:  let curswant_before = winsaveview().curswant
[?25l:  [?12l[?25h:  execute 'let' '&'.a:option_name '=' '&'.a:option_name
[?25l:  [?12l[?25h:  let curswant_after = winsaveview().curswant
[?25l:  [?12l[?25h:  return [a:option_name, curswant_before, curswant_after]
[?25l:  [?12l[?25h:endfunction[1;1H[6L[?25l[1;1HTests for curswant not changing when setting an option

STARTTEST
:so small.vim
:/^start target options$/+1,/^end target options$/-1 yank
:let target_option_names = split(@0)[57;1H[K[30;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;1H:put =['1234567890', '12345']
:1 delete _
:let result = [][31;17H[K[32;1H:for option_name in target_option_names
:  call add(result, TestCurswant(option_name))
:endfor[34;9H[K[35;1H:[35;2H[K[36;1H:new[36;5H[K[37;1H:put =map(copy(result), 'join(v:val, '' '')')[37;46H[K[38;1H:1 delete _[38;12H[K[39;1H:write test.out[39;16H[K[40;1H:[40;2H[K[41;1H:qall![41;7H[K[42;1HENDTEST[42;8H[K[43;1H[K[44;1Hstart target options[44;21H[K[45;1H        tabstop[45;16H[K[46;1H        timeoutlen[46;19H[K[47;1H        ttimeoutlen[47;20H[K[48;1Hend target options[48;19H[K[56;1H[7mtest84.in                                                                              [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hput =['1234567890', '12345'][?25l[2;1H1234567890[2;11H[K[3;1H12345[3;6H[K[28;11H[1m[7m[+][3;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h1 delete _[?25l[1;27r[27;1H
[1;57r[27;1H[1m[34m~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hlet result = [][?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor option_name in target_option_names[?25l
:  [?12l[?25h:  call add(result, TestCurswant(option_name))
[?25l:  [?12l[?25h:endfor[1;1H[2L[?25l[1;1H1234567890
12345[57;1H[K[2;5H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[1m[7m[No Name]                                                                              [m[20;1H1234567890
12345
[1m[34m~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [m[38;1H[7m[No Name] [+]                                                                          [m[39;1H:endfor
:
:new
:put =map(copy(result), 'join(v:val, '' '')')
:1 delete _
:write test.out
:
:qall!
ENDTEST

start target options[50;9Htabstop[51;9Htimeoutlen[52;9Httimeoutlen
end target options
[1m[34m~                                                                                      [55;1H~                                                                                      [m[56;1H[7mtest84.in                                                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hput =map(copy(result), 'join(v:val, '' '')')[?25l3 more lines[57;13H[K[2;1Htabstop 7 4[2;12H[K[3;1Htimeoutlen 7 7[3;15H[K[4;1Httimeoutlen 7 7[4;16H[K[19;11H[1m[7m[+][4;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h1 delete _[?25l[1;18r[18;1H
[1;57r[18;1H[1m[34m~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hwrite test.out[?25l"test.out" [57;12H[K[57;12H[New File] 3 lines, 43 characters written[19;1H[1m[7mtest.out]      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqall![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test84 = test61; then \
#	  if diff test.out test84.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test84.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test84.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test88.failed test.ok test.out X* viminfo
cp test88.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test88.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test88.in" 99 lines, 1449 characters[1;1Hvim: set ft=vim

Tests for correct display (cursor column position) with +conceal and
tabulators.

STARTTEST
:so small.vim
:if !has('conceal')
   e! test.ok
   wq! test.out
:endif
:" Conceal settings.
:set conceallevel=2
:set concealcursor=nc
:syntax match test /|/ conceal
:" Save current cursor position. Only works in <expr> mode, can't be used
:" with :normal because it moves the cursor to the command line. Thanks to ZyX
:" <zyx.vim@gmail.com> for the idea to use an <expr> mapping.
:let positions = []
:nnoremap <expr> GG ":let positions += ['".screenrow().":".screencol()."']\n"
:" Start test.
/^start:
:normal ztj
GGk
:" We should end up in the same column when running these commands on the two
:" lines.
:normal ft
GGk
:normal $
GGk
:normal 0j
GGk
:normal ft
GGk
:normal $
GGk
:normal 0j0j
GGk
:" Same for next test block.
:normal ft
GGk
:normal $
GGk
:normal 0j
GGk
:normal ft
GGk
:normal $
GGk
:normal 0j0j
GGk
:" And check W with multiple tabs and conceals in a line.
:normal W
GGk
:normal W
GGk[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1Hvim: set ft=vim[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[6;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 82 lines, 1216 characters written[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[7;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[33M[1;57r[24;1H:normal W
GGk
:normal $
GGk
:normal 0j
GGk
:normal W
GGk
:normal W
GGk
:normal W
GGk
:normal $
GGk
:set lbr
:normal $
GGk
:set list listchars=tab:>-
:normal 0
GGk
:normal W
GGk
:normal W
GGk
:normal W
GGk
:normal $
GGk
:" Display result.
:call append('$', 'end:')
:call append('$', positions)
:/^end/,$wq! test.out
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !has('conceal')[?25l
:  [?12l[?25h   e! test.ok
[?25l:  [?12l[?25h   wq! test.out
[?25l:  [?12l[?25h:endif[1;1H[3L[?25l[1;1H:normal $
GGk
:normal 0j0j[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h" Conceal settings.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset conceallevel=2[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset concealcursor=nc[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsyntax match test /|/ conceal[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Save current cursor position. Only works in <expr> mode, can't be used[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" with :normal because it moves the cursor to the command line. Thanks to ZyX[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" <zyx.vim@gmail.com> for the idea to use an <expr> mapping.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet positions = [][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnnoremap <expr> GG ":let positions += ['".screenrow().":".screencol()."']\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Start test.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^start:[?25l[1;56r[56;1H
[1;57r[56;1Hstart:[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hnormal ztj[?25l[27m[23m[m[H[2J[1;1Hstart:
.concealed.     text
concealed[7Ctext[5;9H.concealed.     text[6;9Hconcealed[7Ctext

.a.     .b.     .c.     .d.
a[7Cb[7Cc[7Cd
[1m[34m~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [2;1H[?12l[?25h[?25l[57;1H[m:let positions += ['2:1'][2;1H[?12l[?25h[1;1H[2;1H[?25l[57;1H[K[57;1H:[?12l[?25h" We should end up in the same column when running these commands on the two[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" lines.[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnormal ft[?25l[2;17H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['2:17'][2;17H[?12l[?25h[1;6H[2;17H[?25l[57;1H[K[57;1H:[?12l[?25hnormal $[?25l[2;20H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['2:20'][2;20H[?12l[?25h[1;6H[2;20H[?25l[57;1H[K[57;1H:[?12l[?25hnormal 0j[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['3:1'][3;1H[?12l[?25h[2;1H[3;1H[?25l[57;1H[K[57;1H:[?12l[?25hnormal ft[?25l[3;17H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['3:17'][3;17H[?12l[?25h[2;17H[3;17H[?25l[57;1H[K[57;1H:[?12l[?25hnormal $[?25l[3;20H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['3:20'][3;20H[?12l[?25h[2;20H[3;20H[?25l[57;1H[K[57;1H:[?12l[?25hnormal 0j0j[?25l[5;8H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['5:8'][5;8H[?12l[?25h[4;1H[5;8H[?25l[57;1H[K[57;1H:[?12l[?25h" Same for next test block.[?25l[5;8H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnormal ft[?25l[5;25H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['5:25'][5;25H[?12l[?25h[4;1H[5;25H[?25l[57;1H[K[57;1H:[?12l[?25hnormal $[?25l[5;28H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['5:28'][5;28H[?12l[?25h[4;1H[5;28H[?25l[57;1H[K[57;1H:[?12l[?25hnormal 0j[?25l[6;8H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['6:8'][6;8H[?12l[?25h[5;8H[6;8H[?25l[57;1H[K[57;1H:[?12l[?25hnormal ft[?25l[6;25H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['6:25'][6;25H[?12l[?25h[5;25H[6;25H[?25l[57;1H[K[57;1H:[?12l[?25hnormal $[?25l[6;28H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['6:28'][6;28H[?12l[?25h[5;28H[6;28H[?25l[57;1H[K[57;1H:[?12l[?25hnormal 0j0j[?25l[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['8:1'][8;1H[?12l[?25h[7;1H[8;1H[?25l[57;1H[K[57;1H:[?12l[?25h" And check W with multiple tabs and conceals in a line.[?25l[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnormal W[?25l[8;9H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['8:9'][8;9H[?12l[?25h[7;1H[8;9H[?25l[57;1H[K[57;1H:[?12l[?25hnormal W[?25l[8;17H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['8:17'][8;17H[?12l[?25h[7;1H[8;17H[?25l[57;1H[K[57;1H:[?12l[?25hnormal W[?25l[8;25H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['8:25'][8;25H[?12l[?25h[7;1H[8;25H[?25l[57;1H[K[57;1H:[?12l[?25hnormal $[?25l[8;27H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['8:27'][8;27H[?12l[?25h[7;1H[8;27H[?25l[57;1H[K[57;1H:[?12l[?25hnormal 0j[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['9:1'][9;1H[?12l[?25h[8;1H[9;1H[?25l[57;1H[K[57;1H:[?12l[?25hnormal W[?25l[9;9H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['9:9'][9;9H[?12l[?25h[8;9H[9;9H[?25l[57;1H[K[57;1H:[?12l[?25hnormal W[?25l[9;17H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['9:17'][9;17H[?12l[?25h[8;17H[9;17H[?25l[57;1H[K[57;1H:[?12l[?25hnormal W[?25l[9;25H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['9:25'][9;25H[?12l[?25h[8;25H[9;25H[?25l[57;1H[K[57;1H:[?12l[?25hnormal $[?25l[9;26H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['9:26'][9;26H[?12l[?25h[8;27H[9;26H[?25l[57;1H[K[57;1H:[?12l[?25hset lbr[?25l[9;26H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnormal $[?25l[9;26H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['9:26'][9;26H[?12l[?25h[8;27H[9;26H[?25l[57;1H[K[57;1H:[?12l[?25hset list listchars=tab:>-[?25l[3;10H[34m>------

>-------[11C>----
>-------[9C>------[8;4H>----[m.b.[34m>----[m.c.[34m>----
[ma[34m>------[mb[34m>------[mc[34m>------[9;26H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hnormal 0[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['9:1'][9;1H[?12l[?25h[8;1H[9;1H[?25l[57;1H[K[57;1H:[?12l[?25hnormal W[?25l[9;9H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['9:9'][9;9H[?12l[?25h[8;9H[9;9H[?25l[57;1H[K[57;1H:[?12l[?25hnormal W[?25l[9;17H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['9:17'][9;17H[?12l[?25h[8;17H[9;17H[?25l[57;1H[K[57;1H:[?12l[?25hnormal W[?25l[9;25H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['9:25'][9;25H[?12l[?25h[8;25H[9;25H[?25l[57;1H[K[57;1H:[?12l[?25hnormal $[?25l[9;26H[?12l[?25h[?25l[57;1H[K[57;1H:let positions += ['9:26'][9;26H[?12l[?25h[8;27H[9;26H[?25l[57;1H[K[57;1H:[?12l[?25h" Display result.[?25l[9;26H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append('$', 'end:')[?25l[10;1Hend:[10;5H[K[9;26H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append('$', positions)[?25l[11;1H2:1[11;4H[K[12;1H2:17[12;5H[K[13;1H2:20[13;5H[K[14;1H3:1[14;4H[K[15;1H3:17[15;5H[K[16;1H3:20[16;5H[K[17;1H5:8[17;4H[K[18;1H5:25[18;5H[K[19;1H5:28[19;5H[K[20;1H6:8[20;4H[K[21;1H6:25[21;5H[K[22;1H6:28[22;5H[K[23;1H8:1[23;4H[K[24;1H8:9[24;4H[K[25;1H8:17[25;5H[K[26;1H8:25[26;5H[K[27;1H8:27[27;5H[K[28;1H9:1[28;4H[K[29;1H9:9[29;4H[K[30;1H9:17[30;5H[K[31;1H9:25[31;5H[K[32;1H9:26[32;5H[K[33;1H9:26[33;5H[K[34;1H9:1[34;4H[K[35;1H9:9[35;4H[K[36;1H9:17[36;5H[K[37;1H9:25[37;5H[K[38;1H9:26[38;5H[K[9;26H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^end/,$wq! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 29 lines, 135 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test88 = test61; then \
#	  if diff test.out test88.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test88.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test88.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test90.failed test.ok test.out X* viminfo
cp test90.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test90.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test90.in" 53 lines, 1204 characters[1;1HTests for sha256() function.    vim: set ft=vim et ts=2 sw=2 :

STARTTEST
:so small.vim
:if !has('cryptv') || !exists('*sha256')
   e! test.ok
   wq! test.out
:endif
:"
:let testcase='test for empty string: '
:if sha256("") ==# 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855'
: let res='ok'
:else
: let res='ng'
:endif
:$put =testcase.res
:"
:let testcase='test for 1 char: '
:if sha256("a") ==# 'ca978112ca1bbdcafac231b39a23dc4da786eff8147c4e72b9807785afee48bb'
: let res='ok'
:else
: let res='ng'
:endif
:$put =testcase.res
:"
:let testcase='test for 3 chars: '
:if sha256("abc") ==# 'ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015add[28;1H'
: let res='ok'
:else
: let res='ng'
:endif
:$put =testcase.res
:"
:let testcase='test for contains meta char: '
:if sha256("foo\nbar") ==# '807eff6267f3f926a21d234f7b0cf867a86f47e07a532f15e8cc39ed1100[37;1Hca776'
: let res='ok'
:else
: let res='ng'
:endif
:$put =testcase.res
:"
:let testcase='test for contains non-ascii char: '
:if sha256("\xde\xad\xbe\xef") ==# '5f78c33274e43fa9de5659265c1d917e25c03722dcb0b8d27dbb[46;1H8d5feaa813953'
: let res='ok'
:else
: let res='ng'
:endif
:$put =testcase.res
:"
:/^start:/,$wq! test.out
ENDTEST

start:[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for sha256() function.    vim: set ft=vim et ts=2 sw=2 :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 47 lines, 1114 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[54;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !has('cryptv') || !exists('*sha256')[?25l
:  [?12l[?25h   e! test.ok
[?25l:  [?12l[?25h   wq! test.out
[?25l:  [?12l[?25h:endif[1;1H[3L[?25l[1;1HTests for sha256() function.    vim: set ft=vim et ts=2 sw=2 :

STARTTEST[57;1H[K[55;1H[?12l[?25h[?25l

:[?12l[?25h"[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet testcase='test for empty string: '[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif sha256("") ==# 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855'[?25l
:  [?12l[?25h: let res='ok'
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: let res='ng'
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1HTests for sha256() function.    vim: set ft=vim et ts=2 sw=2 :

STARTTEST
:so small.vim[57;1H[K[55;1H[?12l[?25h[?25l

:[?12l[?25h$put =testcase.res[?25l[1;56r[56;1H
[1;57r[56;1Htest for empty string: ok[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet testcase='test for 1 char: '[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif sha256("a") ==# 'ca978112ca1bbdcafac231b39a23dc4da786eff8147c4e72b9807785afee48bb'[?25l
:  [?12l[?25h: let res='ok'
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: let res='ng'
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[2;1HSTARTTEST
:so small.vim
:if !has('cryptv') || !exists('*sha256')[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =testcase.res[?25l[1;56r[56;1H
[1;57r[56;1Htest for 1 char: ok[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet testcase='test for 3 chars: '[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif sha256("abc") ==# 'ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015a
[56;87Hd[57;1H'[?25l[57;1H[K[57;1H:  [?12l[?25h: let res='ok'
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: let res='ng'
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1HSTARTTEST
:so small.vim
:if !has('cryptv') || !exists('*sha256')
   e! test.ok[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =testcase.res[?25l[1;56r[56;1H
[1;57r[56;1Htest for 3 chars: ok[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet testcase='test for contains meta char: '[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif sha256("foo\nbar") ==# '807eff6267f3f926a21d234f7b0cf867a86f47e07a532f15e8cc39ed11
[56;87H0[57;1Hca776'[?25l[57;1H[K[57;1H:  [?12l[?25h: let res='ok'
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: let res='ng'
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1H:so small.vim
:if !has('cryptv') || !exists('*sha256')
   e! test.ok
   wq! test.out[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =testcase.res[?25l[1;56r[56;1H
[1;57r[56;1Htest for contains meta char: ok[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet testcase='test for contains non-ascii char: '[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif sha256("\xde\xad\xbe\xef") ==# '5f78c33274e43fa9de5659265c1d917e25c03722dcb0b8d27d
[56;87Hb[57;1H8d5feaa813953'[?25l[57;1H[K[57;1H:  [?12l[?25h: let res='ok'
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: let res='ng'
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1H:if !has('cryptv') || !exists('*sha256')
   e! test.ok
   wq! test.out
:endif[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =testcase.res[?25l[1;56r[56;1H
[1;57r[56;1Htest for contains non-ascii char: ok[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^start:/,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 6 lines, 143 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test90 = test61; then \
#	  if diff test.out test90.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test90.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test90.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test91.failed test.ok test.out X* viminfo
cp test91.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test91.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test91.in" 116 lines, 3240 characters[1;1HTests for getbufvar(), getwinvar(), gettabvar() and gettabwinvar().
vim: set ft=vim :

STARTTEST
:so small.vim
:so mbyte.vim
:"
:" Use strings to test for memory leaks.
:" First, check that in an empty window, gettabvar() returns the correct value
:let t:testvar='abcd'
:$put =string(gettabvar(1,'testvar'))
:$put =string(gettabvar(1,'testvar'))
:" Test for getbufvar()
:let b:var_num = '1234'
:let def_num = '5678'
:$put =string(getbufvar(1, 'var_num'))
:$put =string(getbufvar(1, 'var_num', def_num))
:$put =string(getbufvar(1, ''))
:$put =string(getbufvar(1, '', def_num))
:unlet b:var_num
:$put =string(getbufvar(1, 'var_num', def_num))
:$put =string(getbufvar(1, ''))
:$put =string(getbufvar(1, '', def_num))
:$put =string(getbufvar(9, ''))
:$put =string(getbufvar(9, '', def_num))
:unlet def_num
:$put =string(getbufvar(1, '&autoindent'))
:$put =string(getbufvar(1, '&autoindent', 1))
:"
:" Open new window with forced option values
:set fileformats=unix,dos
:new ++ff=dos ++bin ++enc=iso-8859-2
:let otherff = getbufvar(bufnr('%'), '&fileformat')
:let otherbin = getbufvar(bufnr('%'), '&bin')
:let otherfenc = getbufvar(bufnr('%'), '&fenc')
:close
:$put =otherff
:$put =string(otherbin)
:$put =otherfenc
:unlet otherff otherbin otherfenc
:" test for getwinvar()
:let w:var_str = "Dance"
:let def_str = "Chance"
:$put =string(getwinvar(1, 'var_str'))
:$put =string(getwinvar(1, 'var_str', def_str))
:$put =string(getwinvar(1, ''))
:$put =string(getwinvar(1, '', def_str))
:unlet w:var_str
:$put =string(getwinvar(1, 'var_str', def_str))
:$put =string(getwinvar(1, ''))
:$put =string(getwinvar(1, '', def_str))
:$put =string(getwinvar(9, ''))
:$put =string(getwinvar(9, '', def_str))
:$put =string(getwinvar(1, '&nu'))
:$put =string(getwinvar(1, '&nu',  1))
:unlet def_str[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for getbufvar(), getwinvar(), gettabvar() and gettabwinvar().[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 109 lines, 3127 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:let t:var_list = [1, 2, 3]
:let t:other = 777
:let def_list = [4, 5, 6, 7]
:tabrewind
:$put =string(gettabvar(3, 'var_list'))
:$put =string(gettabvar(3, 'var_list', def_list))
:$put =string(gettabvar(3, ''))
:$put =string(gettabvar(3, '', def_list))
:tablast
:unlet t:var_list
:tabrewind
:$put =string(gettabvar(3, 'var_list', def_list))
:$put =string(gettabvar(9, ''))
:$put =string(gettabvar(9, '', def_list))
:$put =string(gettabvar(3, '&nu'))
:$put =string(gettabvar(3, '&nu', def_list))
:unlet def_list
:tabonly
:"
:" test for gettabwinvar()
:tabnew
:tabnew
:tabprev
:split
:split
:wincmd w
:vert split
:wincmd w
:let w:var_dict = {'dict': 'tabwin'}
:let def_dict = {'dict2': 'newval'}
:wincmd b
:tabrewind
:$put =string(gettabwinvar(2, 3, 'var_dict'))
:$put =string(gettabwinvar(2, 3, 'var_dict', def_dict))
:$put =string(gettabwinvar(2, 3, ''))
:$put =string(gettabwinvar(2, 3, '', def_dict))
:tabnext
:3wincmd w
:unlet w:var_dict
:tabrewind
:$put =string(gettabwinvar(2, 3, 'var_dict', def_dict))
:$put =string(gettabwinvar(2, 3, ''))
:$put =string(gettabwinvar(2, 3, '', def_dict))
:$put =string(gettabwinvar(2, 9, ''))
:$put =string(gettabwinvar(2, 9, '', def_dict))
:$put =string(gettabwinvar(9, 3, ''))
:$put =string(gettabwinvar(9, 3, '', def_dict))
:unlet def_dict
:$put =string(gettabwinvar(2, 3, '&nux'))
:$put =string(gettabwinvar(2, 3, '&nux', 1))
:tabonly
:"
:/^start/,$wq! test.out
ENDTEST

start:[54;1H[?12l[?25h
[?25l

:so! Xdotest[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Use strings to test for memory leaks.[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" First, check that in an empty window, gettabvar() returns the correct value[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet t:testvar='abcd'[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =string(gettabvar(1,'testvar'))[?25l[1;56r[56;1H
[1;57r[56;1H'abcd'[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabvar(1,'testvar'))[?25l[1;56r[56;1H
[1;57r[56;1H'abcd'[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h" Test for getbufvar()[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet b:var_num = '1234'[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet def_num = '5678'[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =string(getbufvar(1, 'var_num'))[?25l[1;56r[56;1H
[1;57r[56;1H'1234'[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getbufvar(1, 'var_num', def_num))[?25l[1;56r[56;1H
[1;57r[56;1H'1234'[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getbufvar(1, ''))[?25l[1;56r[56;1H
[1;57r[56;1H{'var_num': '1234'}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getbufvar(1, '', def_num))[?25l[1;56r[56;1H
[1;57r[56;1H{'var_num': '1234'}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet b:var_num[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =string(getbufvar(1, 'var_num', def_num))[?25l[1;56r[56;1H
[1;57r[56;1H'5678'[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getbufvar(1, ''))[?25l[1;56r[56;1H
[1;57r[56;1H{}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getbufvar(1, '', def_num))[?25l[1;56r[56;1H
[1;57r[56;1H{}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getbufvar(9, ''))[?25l[1;56r[56;1H
[1;57r[56;1H''[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getbufvar(9, '', def_num))[?25l[1;56r[56;1H
[1;57r[56;1H'5678'[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet def_num[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =string(getbufvar(1, '&autoindent'))[?25l[1;56r[56;1H
[1;57r[56;1H0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getbufvar(1, '&autoindent', 1))[?25l[1;56r[56;1H
[1;57r[56;1H0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Open new window with forced option values[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=unix,dos[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew ++ff=dos ++bin ++enc=iso-8859-2[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;36H, def_dict))[30;31H9, ''))[30;38H[K[31;36H, def_dict))[32;28H9, 3, ''))[32;38H[K[33;36H, def_dict))
:unlet def_dict[34;16H[K[35;2H$put =string(gettabwinvar(2, 3, '&nux'))[36;40H, 1))
:tabonly[37;9H[K[38;2H"[38;3H[K[39;2H/^start/,$wq! test.out
ENDTEST[40;8H[K[41;1H[K[42;1Hstart:
'abcd'

'1234

{'var_num': '1234'}

'5678'[49;7H[K[50;1H{}[50;3H[K[52;1H''
'5678'
0[54;2H[K[56;1H[7mtest91.in [+]                                                                          [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet otherff = getbufvar(bufnr('%'), '&fileformat')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet otherbin = getbufvar(bufnr('%'), '&bin')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet otherfenc = getbufvar(bufnr('%'), '&fenc')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hclose[?25l[1;1H:$put =string(gettabvar(9, '', def_list))
:$put =string(gettabvar(3, '&nu'))[2;35H[K[3;1H:$put =string(gettabvar(3, '&nu', def_list))[3;45H[K[4;1H:unlet def_list[4;16H[K[5;1H:tabonly[5;9H[K[6;1H:"[6;3H[K[7;1H:" test for gettabwinvar()[7;27H[K[8;1H:tabnew[8;8H[K[9;1H:tabnew[9;8H[K[10;1H:tabprev[10;9H[K[11;1H:split[11;7H[K[12;1H:split[12;7H[K[13;1H:wincmd w[13;10H[K[14;1H:vert split[14;12H[K[15;1H:wincmd w[15;10H[K[16;1H:let w:var_dict = {'dict': 'tabwin'}[16;37H[K[17;1H:let def_dict = {'dict2': 'newval'}[17;36H[K[18;1H:wincmd b[18;10H[K[19;1H:tabrewind[19;11H[K[20;1H:$put =string(gettabwinvar(2, 3, 'var_dict'))[20;46H[K[21;1H:$put =string(gettabwinvar(2, 3, 'var_dict', def_dict))[21;56H[K[22;1H:$put =string(gettabwinvar(2, 3, ''))[22;38H[K[23;1H:$put =string(gettabwinvar(2, 3, '', def_dict))[23;48H[K[24;1H:tabnext[24;9H[K[25;1H:3wincmd w[25;11H[K[26;1H:unlet w:var_dict[26;18H[K[27;1H:tabrewind[27;11H[K[28;1H:$put =string(gettabwinvar(2, 3, 'var_dict', def_dict))[28;56H[K[29;36H))[29;38H[K[30;31H3, '', def_dict))[31;36H))[31;38H[K[32;28H2, 9, '', def_dict))[33;36H))[33;38H[K[34;2H$put =string(gettabwinvar(9, 3, '', def_dict))
:unlet def_dict[35;16H[K[36;40H))[36;42H[K[37;2H$put =string(gettabwinvar(2, 3, '&nux', 1))
:tabonly
:"[39;3H[K[40;1H:/^start/,$wq! test.out
ENDTEST[42;1H[K[43;1Hstart:

'abcd

'1234'[47;7H[K[49;1H{'var_num': '1234'}
'5678'

{}
''[53;3H[K[54;1H'5678'

0[56;2H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =otherff[?25l[1;56r[56;1H
[1;57r[56;1Hdos[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(otherbin)[?25l[1;56r[56;1H
[1;57r[56;1H1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =otherfenc[?25l[1;56r[56;1H
[1;57r[56;1Hiso-8859-2[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet otherff otherbin otherfenc[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test for getwinvar()[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet w:var_str = "Dance"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet def_str = "Chance"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =string(getwinvar(1, 'var_str'))[?25l[1;56r[56;1H
[1;57r[56;1H'Dance'[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getwinvar(1, 'var_str', def_str))[?25l[1;56r[56;1H
[1;57r[56;1H'Dance'[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getwinvar(1, ''))[?25l[1;56r[56;1H
[1;57r[56;1H{'var_str': 'Dance'}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getwinvar(1, '', def_str))[?25l[1;56r[56;1H
[1;57r[56;1H{'var_str': 'Dance'}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet w:var_str[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =string(getwinvar(1, 'var_str', def_str))[?25l[1;56r[56;1H
[1;57r[56;1H'Chance'[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getwinvar(1, ''))[?25l[1;56r[56;1H
[1;57r[56;1H{}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getwinvar(1, '', def_str))[?25l[1;56r[56;1H
[1;57r[56;1H{}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getwinvar(9, ''))[?25l[1;56r[56;1H
[1;57r[56;1H''[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getwinvar(9, '', def_str))[?25l[1;56r[56;1H
[1;57r[56;1H'Chance'[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getwinvar(1, '&nu'))[?25l[1;56r[56;1H
[1;57r[56;1H0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(getwinvar(1, '&nu',  1))[?25l[1;56r[56;1H
[1;57r[56;1H0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet def_str[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test for gettabvar()[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htabnew[?25l[27m[23m[m[H[2J[1;1H[4m[30m[47m + test91.in [m[1m [No Name] [m[7m                                                               [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [2;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25htabnew[?25l[27m[23m[m[H[2J[1;1H[4m[30m[47m + test91.in  [No Name] [m[1m [No Name] [m[7m                                                    [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [2;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet t:var_list = [1, 2, 3][?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet t:other = 777[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet def_list = [4, 5, 6, 7][?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htabrewind[?25l[27m[23m[m[H[2J[1;1H[1m + test91.in [m[4m[30m[47m [No Name]  [No Name] [m[7m                                                    [m[1;87H[4m[30m[47mX[m[2;1H:let w:var_dict = {'dict': 'tabwin'}
:let def_dict = {'dict2': 'newval'}
:wincmd b
:tabrewind
:$put =string(gettabwinvar(2, 3, 'var_dict'))
:$put =string(gettabwinvar(2, 3, 'var_dict', def_dict))
:$put =string(gettabwinvar(2, 3, ''))
:$put =string(gettabwinvar(2, 3, '', def_dict))
:tabnext
:3wincmd w
:unlet w:var_dict
:tabrewind
:$put =string(gettabwinvar(2, 3, 'var_dict', def_dict))
:$put =string(gettabwinvar(2, 3, ''))
:$put =string(gettabwinvar(2, 3, '', def_dict))
:$put =string(gettabwinvar(2, 9, ''))
:$put =string(gettabwinvar(2, 9, '', def_dict))
:$put =string(gettabwinvar(9, 3, ''))
:$put =string(gettabwinvar(9, 3, '', def_dict))
:unlet def_dict
:$put =string(gettabwinvar(2, 3, '&nux'))
:$put =string(gettabwinvar(2, 3, '&nux', 1))
:tabonly
:"
:/^start/,$wq! test.out
ENDTEST

start:
'abcd'
'abcd'
'1234'
'1234'
{'var_num': '1234'}
{'var_num': '1234'}
'5678'
{}
{}
''
'5678'
0
0
dos
1
iso-8859-2
'Dance'
'Dance'
{'var_str': 'Dance'}
{'var_str': 'Dance'}
'Chance'
{}
{}
''
'Chance'
0
0[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabvar(3, 'var_list'))[?25l[2;56r[56;1H
[1;57r[56;1H[1, 2, 3][57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabvar(3, 'var_list', def_list))[?25l[2;56r[56;1H
[1;57r[56;1H[1, 2, 3][57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabvar(3, ''))[?25l[2;56r[56;1H
[1;57r[56;1H{'var_list': [1, 2, 3], 'other': 777}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabvar(3, '', def_list))[?25l[2;56r[56;1H
[1;57r[56;1H{'var_list': [1, 2, 3], 'other': 777}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25htablast[?25l[27m[23m[m[H[2J[1;1H[4m[30m[47m + test91.in  [No Name] [m[1m [No Name] [m[7m                                                    [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [2;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hunlet t:var_list[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htabrewind[?25l[27m[23m[m[H[2J[1;1H[1m + test91.in [m[4m[30m[47m [No Name]  [No Name] [m[7m                                                    [m[1;87H[4m[30m[47mX[m[2;1H:$put =string(gettabwinvar(2, 3, 'var_dict'))
:$put =string(gettabwinvar(2, 3, 'var_dict', def_dict))
:$put =string(gettabwinvar(2, 3, ''))
:$put =string(gettabwinvar(2, 3, '', def_dict))
:tabnext
:3wincmd w
:unlet w:var_dict
:tabrewind
:$put =string(gettabwinvar(2, 3, 'var_dict', def_dict))
:$put =string(gettabwinvar(2, 3, ''))
:$put =string(gettabwinvar(2, 3, '', def_dict))
:$put =string(gettabwinvar(2, 9, ''))
:$put =string(gettabwinvar(2, 9, '', def_dict))
:$put =string(gettabwinvar(9, 3, ''))
:$put =string(gettabwinvar(9, 3, '', def_dict))
:unlet def_dict
:$put =string(gettabwinvar(2, 3, '&nux'))
:$put =string(gettabwinvar(2, 3, '&nux', 1))
:tabonly
:"
:/^start/,$wq! test.out
ENDTEST

start:
'abcd'
'abcd'
'1234'
'1234'
{'var_num': '1234'}
{'var_num': '1234'}
'5678'
{}
{}
''
'5678'
0
0
dos
1
iso-8859-2
'Dance'
'Dance'
{'var_str': 'Dance'}
{'var_str': 'Dance'}
'Chance'
{}
{}
''
'Chance'
0
0
[1, 2, 3]
[1, 2, 3]
{'var_list': [1, 2, 3], 'other': 777}
{'var_list': [1, 2, 3], 'other': 777}[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabvar(3, 'var_list', def_list))[?25l[2;56r[56;1H
[1;57r[56;1H[4, 5, 6, 7][57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabvar(9, ''))[?25l[2;56r[56;1H
[1;57r[56;1H''[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabvar(9, '', def_list))[?25l[2;56r[56;1H
[1;57r[56;1H[4, 5, 6, 7][57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabvar(3, '&nu'))[?25l[2;56r[56;1H
[1;57r[56;1H''[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabvar(3, '&nu', def_list))[?25l[2;56r[56;1H
[1;57r[56;1H[4, 5, 6, 7][57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet def_list[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htabonly[?25l[1;1H:tabnext[1;9H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" test for gettabwinvar()[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htabnew[?25l[27m[23m[m[H[2J[1;1H[4m[30m[47m + test91.in [m[1m [No Name] [m[7m                                                               [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [2;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25htabnew[?25l[27m[23m[m[H[2J[1;1H[4m[30m[47m + test91.in  [No Name] [m[1m [No Name] [m[7m                                                    [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [2;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25htabprev[?25l[27m[23m[m[H[2J[1;1H[4m[30m[47m + test91.in [m[1m [No Name] [m[4m[30m[47m [No Name] [m[7m                                                    [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [2;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hsplit[?25l[1;15H[1m[35m2[m[1mN o[No Name] [m[4m[30m[47m [No Name] [m[49C[7m [m[1;87H[4m[30m[47mX[m[29;1H[1m[7m[No Name]                                                                              [m[30;1H[K[56;1H[7m[No Name]                                                                              [2;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H[4m[30m[47m + test91.in [m[1m [m[1m[35m3[m[1m [No Name] [m[4m[30m[47m [No Name] [m[7m                                                  [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [m[20;1H[1m[7m[No Name]                                                                              [m[22;1H[1m[34m~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [m[38;1H[7m[No Name]                                                                              [m[40;1H[1m[34m~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7m[No Name]                                                                              [2;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hwincmd w[?25l[20;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[38;1H[1m[7m[No Name]                                                                              [m[1;87H[7m [m[1;87H[4m[30m[47mX[21;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hvert split[?25l[1;15H[1m[35m4[m[1m [m[70C[7m [m[1;87H[4m[30m[47mX[m[21;44H[7m|[22;44H|[23;44H|[24;44H|[25;44H|[26;44H|[27;44H|[28;44H|[29;44H|[30;44H|[31;44H|[32;44H|[33;44H|[34;44H|[35;44H|[36;44H|[37;44H|[m[22;45H[1m[34m~[23;45H~[24;45H~[25;45H~[26;45H~[27;45H~[28;45H~[29;45H~[30;45H~[31;45H~[32;45H~[33;45H~[34;45H~[35;45H~[36;45H~[37;45H~[m[38;45H[7m[No Name]                                  [21;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hwincmd w[?25l[38;1H[7m[No Name][m[1m[7m [m[7m                                   [m[1m[7m[No Name]                                  [m[1;87H[7m [m[1;87H[4m[30m[47mX[21;45H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet w:var_dict = {'dict': 'tabwin'}[?25l[21;45H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet def_dict = {'dict2': 'newval'}[?25l[21;45H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd b[?25l[38;45H[7m[No Name][m[1m[7m [m[7m                                  [m[56;1H[1m[7m[No Name]                                                                              [m[1;87H[7m [m[1;87H[4m[30m[47mX[39;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25htabrewind[?25l[27m[23m[m[H[2J[1;1H[1m + test91.in [m[4m[30m[47m [m[4m[35m[47m4[m[4m[30m[47m [No Name]  [No Name] [m[7m                                                  [m[1;87H[4m[30m[47mX[m[2;1H:3wincmd w
:unlet w:var_dict
:tabrewind
:$put =string(gettabwinvar(2, 3, 'var_dict', def_dict))
:$put =string(gettabwinvar(2, 3, ''))
:$put =string(gettabwinvar(2, 3, '', def_dict))
:$put =string(gettabwinvar(2, 9, ''))
:$put =string(gettabwinvar(2, 9, '', def_dict))
:$put =string(gettabwinvar(9, 3, ''))
:$put =string(gettabwinvar(9, 3, '', def_dict))
:unlet def_dict
:$put =string(gettabwinvar(2, 3, '&nux'))
:$put =string(gettabwinvar(2, 3, '&nux', 1))
:tabonly
:"
:/^start/,$wq! test.out
ENDTEST

start:
'abcd'
'abcd'
'1234'
'1234'
{'var_num': '1234'}
{'var_num': '1234'}
'5678'
{}
{}
''
'5678'
0
0
dos
1
iso-8859-2
'Dance'
'Dance'
{'var_str': 'Dance'}
{'var_str': 'Dance'}
'Chance'
{}
{}
''
'Chance'
0
0
[1, 2, 3]
[1, 2, 3]
{'var_list': [1, 2, 3], 'other': 777}
{'var_list': [1, 2, 3], 'other': 777}
[4, 5, 6, 7]
''
[4, 5, 6, 7]
''
[4, 5, 6, 7][?12l[?25h[?25l
:[?12l[?25h$put =string(gettabwinvar(2, 3, 'var_dict'))[?25l[2;56r[56;1H
[1;57r[56;1H{'dict': 'tabwin'}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabwinvar(2, 3, 'var_dict', def_dict))[?25l[2;56r[56;1H
[1;57r[56;1H{'dict': 'tabwin'}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabwinvar(2, 3, ''))[?25l[2;56r[56;1H
[1;57r[56;1H{'var_dict': {'dict': 'tabwin'}}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabwinvar(2, 3, '', def_dict))[?25l[2;56r[56;1H
[1;57r[56;1H{'var_dict': {'dict': 'tabwin'}}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25htabnext[?25l[27m[23m[m[H[2J[1;1H[4m[30m[47m + test91.in [m[1m [m[1m[35m4[m[1m [No Name] [m[4m[30m[47m [No Name] [m[7m                                                  [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [m[20;1H[7m[No Name]                                                                              [21;44H|[22;44H|[23;44H|[24;44H|[25;44H|[26;44H|[27;44H|[28;44H|[29;44H|[30;44H|[31;44H|[32;44H|[33;44H|[34;44H|[35;44H|[36;44H|[37;44H|[m[22;1H[1m[34m~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          [m
[7m[No Name]                                   [m[22;45H[1m[34m~                                          [23;45H~                                          [24;45H~                                          [25;45H~                                          [26;45H~                                          [27;45H~                                          [28;45H~                                          [29;45H~                                          [30;45H~                                          [31;45H~                                          [32;45H~                                          [33;45H~                                          [34;45H~                                          [35;45H~                                          [36;45H~                                          [37;45H~                                          [m[38;45H[7m[No Name]                                  [m[40;1H[1m[34m~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name]                                                                              [39;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h3wincmd w[?25l[38;45H[1m[7m[No Name]                                  [m[56;1H[7m[No Name][m[1m[7m [m[7m                                                                              [1;87H [m[1;87H[4m[30m[47mX[21;45H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hunlet w:var_dict[?25l[21;45H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htabrewind[?25l[27m[23m[m[H[2J[1;1H[1m + test91.in [m[4m[30m[47m [m[4m[35m[47m4[m[4m[30m[47m [No Name]  [No Name] [m[7m                                                  [m[1;87H[4m[30m[47mX[m[2;1H:$put =string(gettabwinvar(2, 3, ''))
:$put =string(gettabwinvar(2, 3, '', def_dict))
:$put =string(gettabwinvar(2, 9, ''))
:$put =string(gettabwinvar(2, 9, '', def_dict))
:$put =string(gettabwinvar(9, 3, ''))
:$put =string(gettabwinvar(9, 3, '', def_dict))
:unlet def_dict
:$put =string(gettabwinvar(2, 3, '&nux'))
:$put =string(gettabwinvar(2, 3, '&nux', 1))
:tabonly
:"
:/^start/,$wq! test.out
ENDTEST

start:
'abcd'
'abcd'
'1234'
'1234'
{'var_num': '1234'}
{'var_num': '1234'}
'5678'
{}
{}
''
'5678'
0
0
dos
1
iso-8859-2
'Dance'
'Dance'
{'var_str': 'Dance'}
{'var_str': 'Dance'}
'Chance'
{}
{}
''
'Chance'
0
0
[1, 2, 3]
[1, 2, 3]
{'var_list': [1, 2, 3], 'other': 777}
{'var_list': [1, 2, 3], 'other': 777}
[4, 5, 6, 7]
''
[4, 5, 6, 7]
''
[4, 5, 6, 7]
{'dict': 'tabwin'}
{'dict': 'tabwin'}
{'var_dict': {'dict': 'tabwin'}}
{'var_dict': {'dict': 'tabwin'}}[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabwinvar(2, 3, 'var_dict', def_dict))[?25l[2;56r[56;1H
[1;57r[56;1H{'dict2': 'newval'}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabwinvar(2, 3, ''))[?25l[2;56r[56;1H
[1;57r[56;1H{}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabwinvar(2, 3, '', def_dict))[?25l[2;56r[56;1H
[1;57r[56;1H{}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabwinvar(2, 9, ''))[?25l[2;56r[56;1H
[1;57r[56;1H''[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabwinvar(2, 9, '', def_dict))[?25l[2;56r[56;1H
[1;57r[56;1H{'dict2': 'newval'}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabwinvar(9, 3, ''))[?25l[2;56r[56;1H
[1;57r[56;1H''[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabwinvar(9, 3, '', def_dict))[?25l[2;56r[56;1H
[1;57r[56;1H{'dict2': 'newval'}[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet def_dict[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =string(gettabwinvar(2, 3, '&nux'))[?25l[2;56r[56;1H
[1;57r[56;1H''[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =string(gettabwinvar(2, 3, '&nux', 1))[?25l[2;56r[56;1H
[1;57r[56;1H1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25htabonly[?25l[1;1H:$put =string(gettabwinvar(2, 3, '&nux', 1))[1;45H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^start/,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 50 lines, 530 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test91 = test61; then \
#	  if diff test.out test91.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test91.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test91.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test92.failed test.ok test.out X* viminfo
cp test92.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test92.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test92.in" 48 lines, 852 characters[1;1Hvim: set ft=vim fenc=utf-8:

Tests if :mksession saves cursor columns correctly in presence of tab and
multibyte characters when fileencoding=utf-8.

STARTTEST
:so mbyte.vim
:if !has('mksession')
:  e! test.ok
:  wq! test.out
:endif
:set sessionoptions=buffers splitbelow fileencoding=utf-8
/^start:
:vsplit
j16|:split
j16|:split
j16|:split
j8|:split
j8|:split
j16|:split
j16|:split
j16|:wincmd l
/^start:
:set nowrap
j16|3zl:split
j016|3zl:split
j016|3zl:split
j08|3zl:split
j08|3zl:split
j016|3zl:split
j016|3zl:split
j016|3zl:split
:mksession! test.out
:new test.out
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d
:w! test.out
:qa!
ENDTEST

start:
no multibyte chAracter[42;9Hone leaDing tab
    four leadinG spaces
two[13Cconsecutive tabs
two     tabs    in one line
one [34m~@[m multibyteCharacter
a [34m~@~\[mb[34m~@~][m two multiByte characters
[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters
[1m[34m~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1Hvim: set ft=vim fenc=utf-8:[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[6;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 31 lines, 467 characters written[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[7;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[38;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !has('mksession')[?25l
:  [?12l[?25h:  e! test.ok
[?25l:  [?12l[?25h:  wq! test.out
[?25l:  [?12l[?25h:endif[1;1H[3L[?25l[1;1Hvim: set ft=vim fenc=utf-8:

Tests if :mksession saves cursor columns correctly in presence of tab and[57;1H[K[39;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset sessionoptions=buffers splitbelow fileencoding=utf-8[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^start:[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hvsplit[?25l[1;1H                           [16C[7m|[m
Tests if :mksession saves cursor columns co[7m|[m
rrectly in presence of tab and             [7m|[4;44H|[m
8.[41C[7m|[m
         [34C[7m|[m
STARTTEST    [30C[7m|[m
:so mbyte.vim        [22C[7m|[m
:if !has('mksession')[22C[7m|[m
:  e! test.ok  [28C[7m|[m
:  wq! test.out[28C[7m|[m
:endif                                     [7m|[m
:set sessionoptions=buffers splitbelow file[7m|[m
encoding=utf-8[29C[7m|[m
/^start:  [33C[7m|[m
:vsplit   [33C[7m|[17;44H|[m
j16|:split[33C[7m|[m
j16|:split[33C[7m|[m
j8|:split [33C[7m|[m
j8|:split [33C[7m|[m[22;6Hsplit   [30C[7m|[m
j16|:split[33C[7m|[m
j16|:wincmd l[30C[7m|[m
/^start:     [30C[7m|[m
:set nowrap   [29C[7m|[m
j16|3zl:split [29C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
j08|3zl:split [29C[7m|[m
j08|3zl:split [29C[7m|[32;44H|[m
j016|3zl:split      [23C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out                       [7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[m
                      [21C[7m|[m
start:                 [20C[7m|[m
no multibyte chAracter [20C[7m|[m
        one leaDing tab         [11C[7m|[m
    four leadinG spaces    [16C[7m|[m
two             consecutive tabs[11C[7m|[m
two     tabs    in one line                [7m|[m
one [34m~@[m multibyteCharacter                [7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|[m
[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[7m|[51;44H|[52;44H|[53;44H|[54;44H|[55;44H|[m
[1m[7mtest92.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;46Hrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=utf-[5;45H8.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[12;51H[K[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=utf-8[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone [34m~@[m multibyteCharacter[49;45Ha [34m~@~\[mb[34m~@~][m two multiByte characters[49;83H[K[50;45H[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[51;45H[1m[34m~[52;45H~[53;45H~[54;45H~[55;45H~[m[56;45H[7mtest92.in [+]                              [42;1H[?12l[?25h
[15C[?25l[m[57;1H[K[57;1H:[?12l[?25hsplit[?25l[1;1Hj16|:split
j16|:split                                 
j16|:wincmd l                 
/^start:                                   
:set nowrap
j16|3zl:split
j016|3zl:split
j016|3zl:split
j08|3zl:split        
j08|3zl:split
j016|3zl:split 
j016|3zl:split
j016|3zl:split                             
:mksession! test.out
:new test.out
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d
:w! test.out
:qa!      
ENDTEST   
         
start:   
no multibyte chAracter
        one leaDing tab
    four leadinG spaces
two     [8Cconsecutive tabs
two     tabs    in one line
one [34m~@[m multibyteCharacter
[7mtest92.in [+]                              [m
j16|:split    
j16|:split   
j16|:wincmd l
/^start:      
:set nowrap   
j16|3zl:split 
j016|3zl:split      
j016|3zl:split
j08|3zl:split                         
j08|3zl:split
j016|3zl:split
j016|3zl:split
j016|3zl:split
:mksession! test.out
:new test.out         
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d
:w! test.out           
:qa![12C                
ENDTEST                    
                           
start:                                
no multibyte chAracter                     
        one leaDing tab                    
    four leadinG spaces                    
two             consecutive tabs           
two     tabs    in one line                
one [34m~@[m multibyteCharacter                [50;16H[?12l[?25h[51;16H[?25l[57;1H[K[57;1H:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1Hj016|3zl:split[29C[7m|[m
j08|3zl:split[30C[7m|[m
j08|3zl:split[30C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[13;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[16;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
j08|3zl:split[30C[7m|[m
j08|3zl:split[30C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[31;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[34;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
j016|3zl:split[29C[7m|[m
j08|3zl:split[30C[7m|[m
j08|3zl:split[30C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[50;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[53;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
[1m[7mtest92.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;45Hrrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=utf-[5;45H8.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=utf-8[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone [34m~@[m multibyteCharacter[49;45Ha [34m~@~\[mb[34m~@~][m two multiByte characters[50;45H[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[51;45H[1m[34m~                                          [52;45H~                                          [53;45H~                                          [54;45H~                                          [55;45H~                                          [m[56;45H[7mtest92.in [+]                              [53;16H[?12l[?25h[54;16H[?25l


[m:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1Hj016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[9;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[12;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[23;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[26;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[37;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[40;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[51;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[54;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
[1m[7mtest92.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;45Hrrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=utf-[5;45H8.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=utf-8[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone [34m~@[m multibyteCharacter[49;45Ha [34m~@~\[mb[34m~@~][m two multiByte characters[50;45H[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[51;45H[1m[34m~                                          [52;45H~                                          [53;45H~                                          [54;45H~                                          [55;45H~                                          [m[56;45H[7mtest92.in [+]                              [55;16H[?12l[?25h[?25l[m[43;1Hj016|3zl:split                             
:mksession! test.out                       
:new test.out                              
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     
:w! test.out                               
:qa!                                       
ENDTEST                                    
                                           
start:                                     
no multibyte chAracter                     
        one leaDing tab                    
    four leadinG spaces                    
                                           two[13Cconsecutive tabs[55;16H[?12l[?25h[55;8H[?25l

:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[7;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[10;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[17;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[20;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[28;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[38;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[41;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[49;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[52;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
[1m[7mtest92.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;45Hrrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=utf-[5;45H8.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=utf-8[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone [34m~@[m multibyteCharacter[49;45Ha [34m~@~\[mb[34m~@~][m two multiByte characters[50;45H[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[51;45H[1m[34m~                                          [52;45H~                                          [53;45H~                                          [54;45H~                                          [55;45H~                                          [m[56;45H[7mtest92.in [+]                              [54;8H[?12l[?25h[55;8H[?25l

[m:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[5;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[8;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[14;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[17;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[31;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[34;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
ENDTEST[36C[7m|[39;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[42;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test92.in [+]                              |[m
ENDTEST[36C[7m|[48;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[51;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
[1m[7mtest92.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;45Hrrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=utf-[5;45H8.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=utf-8[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone [34m~@[m multibyteCharacter[49;45Ha [34m~@~\[mb[34m~@~][m two multiByte characters[50;45H[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[51;45H[1m[34m~                                          [52;45H~                                          [53;45H~                                          [54;45H~                                          [55;45H~                                          [m[56;45H[7mtest92.in [+]                              [54;8H[?12l[?25h[55;8H[8C[?25l

[m:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[7;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[12;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[15;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[19;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[22;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[m
ENDTEST[36C[7m|[26;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[29;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[33;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[36;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test92.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|
test92.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[50;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|[m
[1m[7mtest92.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;45Hrrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=utf-[5;45H8.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=utf-8[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone [34m~@[m multibyteCharacter[49;45Ha [34m~@~\[mb[34m~@~][m two multiByte characters[50;45H[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[51;45H[1m[34m~                                          [52;45H~                                          [53;45H~                                          [54;45H~                                          [55;45H~                                          [m[56;45H[7mtest92.in [+]                              [54;16H[?12l[?25h[55;16H[?25l

[m:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test92.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test92.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|
test92.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|
test92.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|[m
[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[7m|[m
[1m[7mtest92.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;45Hrrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=utf-[5;45H8.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=utf-8[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone [34m~@[m multibyteCharacter[49;45Ha [34m~@~\[mb[34m~@~][m two multiByte characters[50;45H[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[51;45H[1m[34m~                                          [52;45H~                                          [53;45H~                                          [54;45H~                                          [55;45H~                                          [m[56;45H[7mtest92.in [+]                              [54;16H[?12l[?25h[55;16H[?25l

[m:[?12l[?25hwincmd l[?25l[56;1H[7mtest92.in [+][m[1m[7m [m[7m                               [m[1m[7mtest92.in [+]                              [42;45H[?12l[?25h[?25l[m[57;1H[K[57;1H/[?12l[?25h^start:[?25l[31msearch hit BOTTOM, continuing at TOP[42;45H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset nowrap[?25l[3;45Hmultibyte characters when fileencoding=utf-[4;45H[K[5;45HSTARTTEST[6;45H:so mbyte.vim[7;45H:if !has('mksession')[8;46H  e! test.ok[9;46H  wq! test.out[9;60H[K[10;46Hendif[10;51H[K[11;46Hset sessionoptions=buffers splitbelow file[12;45H/^start:[13;46Hvsplit[13;52H[K[14;45Hj16|:split[14;55H[K[15;45Hj16|:split[16;45Hj16|:split[17;46H8|:split[17;54H[K[18;46H8|:split[18;54H[K[20;46H16|:split[21;46H16|:wincmd l[22;45H/^start:[22;53H[K[23;45H:set nowrap[24;49H3zl:split[25;45Hj016|3zl:split[26;45Hj016|3zl:split[27;46H08[28;47H8|3zl:split[28;58H[K[30;47H16|3zl:split[31;47H16|3zl:split[32;45H:mksession! test.out[33;45H:new test.out[33;58H[K[34;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[35;46Hw! test.out[35;57H[K[36;46Hqa![36;50H[K[37;45HENDTEST[37;52H[K[38;45H[K[39;45Hstart:[40;45Hno multibyte chAracter[41;53Hone leaDing tab[42;45H    four leadinG spaces[43;45Htwo             consecutive tabs[44;45Htwo     tabs    in one line[45;45Hone [34m~@[m multibyteCharacter[46;45Ha [34m~@~\[mb[34m~@~][m two multiByte characters[47;45H[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[48;45H[1m[34m~                                          [49;45H~                                          [50;45H~                                          [39;45H[?12l[?25h[40;45H[15C[?25l[m[2;45Hts if :mksession saves cursor columns corre[3;45Htibyte characters when fileencoding=utf-8.[3;87H[K[5;45HRTTES[5;51H[K[6;45H mbyte.vim[6;55H[K[7;45H !has('mksession')[7;63H[K[8;45He! test.ok[8;55H[K[9;45Hwq! test.out[9;57H[K[10;45Hdif[10;48H[K[11;45Ht sessionoptions=buffers splitbelow fileenc[12;45Htart:[12;50H[K[13;45Hplit[13;49H[K[14;45H|:split[14;52H[K[15;45H|:split[15;52H[K[16;45H|:split[16;52H[K[17;45H:split[17;51H[K[18;45H:split[18;51H[K[19;45H|:split[19;52H[K[20;45H|:split[20;52H[K[21;45H|:wincmd l[21;55H[K[22;45Htart:[22;50H[K[23;45Ht nowrap[23;53H[K[24;45H|3zl:split[24;55H[K[25;45H6|3zl:split[25;56H[K[26;45H6|3zl:split[26;56H[K[27;45H|3zl:split[27;55H[K[28;45H|3zl:split[28;55H[K[29;45H6|3zl:split[29;56H[K[30;45H6|3zl:split[30;56H[K[31;45H6|3zl:split[31;56H[K[32;45Hsession! test.out[32;62H[K[33;45Hw test.out[33;55H[K[34;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[34;80H[K[35;45H test.out[35;54H[K[36;45H![36;46H[K[37;45HTES[37;49H[K[39;45Hrt:[39;48H[K[40;45Hmultibyte chAracter[40;64H[K[41;50Hone leaDing tab[41;65H[K[42;46Hfour leadinG spaces[42;65H[K[43;45H   [10Cconsecutive tabs[43;74H[K[44;45H     tabs    in one line[44;69H[K[45;45H [34m~@[m multibyteCharacter[45;69H[K[46;45H[34m~@~\[mb[34m~@~][m two multiByte characters[46;80H[K[47;45H[34m~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[47;85H[K[40;57H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsplit[?25l[1;45H|:wincmd l[2;46Hart:[2;51H[K[3;46H nowrap[3;53H[K[4;45H|3zl:split[5;45H6|3zl:split[6;45H6|3zl:split[7;45H|3zl:split[7;55H[K[8;45H|3zl:split[9;45H6|3zl:split[9;56H[K[10;45H6|3zl:split[11;45H6|3zl:split[11;56H[K[12;45Hsession! test.out[13;45Hw test.out[14;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[15;45H test.out[16;45H![16;46H[K[17;45HTEST[17;49H[K[18;45H[K[19;45Hrt:[19;48H[K[20;45Hmultibyte chAracter[21;45H     one leaDing tab[22;45H four leadinG spaces[23;45H             consecutive tabs[24;45H     tabs    in one line[25;45H [34m~@[m multibyteCharacter[26;45H[34m~@~\[mb[34m~@~][m two multiByte characters[27;45H[34m~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[28;45H[7mtest92.in [+]                              [m[29;45H|:wincmd l[29;55H[K[30;45Htart:[30;50H[K[31;45Ht nowra[31;53H[K[32;45H|3zl:spli[32;55H[K[33;45H6|3zl:split[34;45H6|3zl:split[34;56H[K[35;45H|3zl:split[36;45H|3zl:split[37;45H6|3zl:split[38;45H6|3zl:split[39;45H6|3zl:split[40;45Hsession! test.ou[40;62H[K[41;45Hw test.out[41;55H[K[42;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[43;46Htest.out[43;58H[K[44;45H![44;50H[K[45;45HTEST[45;49H[K[46;45H[K[47;45Hrt:[47;48H[K[48;45Hmultibyte chAracter[48;64H[K[49;45H     one leaDing tab[49;65H[K[50;45H four leadinG spaces[50;65H[K[51;45H             consecutive tabs[51;74H[K[52;45H     tabs    in one line[52;69H[K[53;45H [34m~@[m multibyteCharacter[53;69H[K[54;45H[34m~@~\[mb[34m~@~][m two multiByte characters[54;80H[K[55;45H[34m~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[55;85H[K[48;57H[?12l[?25h[49;57H[?25l[29;45Hj16|:wincmd l[30;45H/^start:[31;45H:set nowrap[32;45Hj16|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45Hj08|3zl:split[36;45Hj08|3zl:split[37;45Hj016|3zl:split[38;45Hj016|3zl:split[39;45Hj016|3zl:split[40;45H:mksession! test.out[41;45H:new test.out[42;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[43;45H:w! test.out[44;45H:qa![45;45HENDTEST[47;45Hstart:[48;45Hno multibyte chAracter[49;50H   one leaDing tab[50;46H   four leadinG spaces[51;45Htwo[10C   consecutive tabs[52;45Htwo     tabs    in one line[53;45Hone [34m~@[m multibyteCharacter[54;45Ha [34m~@~\[mb[34m~@~][m two multiByte characters[55;45H[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[49;52H[?12l[?25h[8C[?25l[29;45H|:wincmd l[29;55H[K[30;45Htart:[30;50H[K[31;45Ht nowrap[31;53H[K[32;45H|3zl:split[32;55H[K[33;45H6|3zl:split[33;56H[K[34;45H6|3zl:split[34;56H[K[35;45H|3zl:split[35;55H[K[36;45H|3zl:split[36;55H[K[37;45H6|3zl:split[37;56H[K[38;45H6|3zl:split[38;56H[K[39;45H6|3zl:split[39;56H[K[40;45Hsession! test.out[40;62H[K[41;45Hw test.out[41;55H[K[42;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[42;80H[K[43;45H test.out[43;54H[K[44;45H![44;46H[K[45;45HTES[45;49H[K[47;45Hrt:[47;48H[K[48;45Hmultibyte chAracter[48;64H[K[49;50Hone leaDing tab[49;65H[K[50;46Hfour leadinG spaces[50;65H[K[51;45H   [10Cconsecutive tabs[51;74H[K[52;45H     tabs    in one line[52;69H[K[53;45H [34m~@[m multibyteCharacter[53;69H[K[54;45H[34m~@~\[mb[34m~@~][m two multiByte characters[54;80H[K[55;45H[34m~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[55;85H[K[49;57H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test92.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test92.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|
test92.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|
test92.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|[m
[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[7m|
test92.in [+]                               [m[1;45H|3zl:split[2;45H|3zl:split[3;45H6|3zl:split[4;45H6|3zl:split[5;45H6|3zl:split[6;45Hsession! test.out[7;45Hw test.out[8;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[9;46Htest.out[10;45H![11;45HTEST[13;45Hrt:[14;45Hmultibyte chAracter[15;50Hone leaDing tab[16;46Hfour leadinG spaces[17;58Hconsecutive tabs[18;50Htabs    in one line[19;45H[7mtest92.in [+]                              [m[20;45H|3zl:split[21;45H6|3zl:split[22;45H6|3zl:split[23;45H6|3zl:split[24;45Hsession! test.out[25;45Hw test.out[26;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[27;46Htest.out[28;45H![29;45HTEST[31;45Hrt:[32;45Hmultibyte chAracter[33;50Hone leaDing tab[34;46Hfour leadinG spaces[35;58Hconsecutive tabs[36;50Htabs    in one line[37;45H[7mtest92.in [+]                              [m[38;45H|3zl:split[39;45H|3zl:split[40;45H6|3zl:split[41;45H6|3zl:split[42;45H6|3zl:split[43;45Hsession! test.out[44;45Hw test.out[45;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[46;46Htest.out[47;45H![48;45HTEST[50;45Hrt:[51;45Hmultibyte chAracter[52;50Hone leaDing tab[53;46Hfour leadinG spaces[54;58Hconsecutive tabs[55;50Htabs    in one line[56;45H[1m[7mtest92.in [+]                              [52;57H[?12l[?25h[53;57H[?25l[m[38;45Hj08|3zl:split[39;45Hj08|3zl:split[40;45Hj016|3zl:split[41;45Hj016|3zl:split[42;45Hj016|3zl:split[43;45H:mksession! test.out[44;45H:new test.out[45;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[46;45H:w! test.out[47;45H:qa![48;45HENDTEST[50;45Hstart:[51;45Hno multibyte chAracter[52;50H   one leaDing tab[53;46H   four leadinG spaces[54;45Htwo[10C   consecutive tabs[55;45Htwo     tabs    in one line[53;45H[?12l[?25h[15C[?25l[38;45H|3zl:split[38;55H[K[39;45H|3zl:split[39;55H[K[40;45H6|3zl:split[40;56H[K[41;45H6|3zl:split[41;56H[K[42;45H6|3zl:split[42;56H[K[43;45Hsession! test.out[43;62H[K[44;45Hw test.out[44;55H[K[45;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[45;80H[K[46;45H test.out[46;54H[K[47;45H![47;46H[K[48;45HTES[48;49H[K[50;45Hrt:[50;48H[K[51;45Hmultibyte chAracter[51;64H[K[52;50Hone leaDing tab[52;65H[K[53;46Hfour leadinG spaces[53;65H[K[54;45H   [10Cconsecutive tabs[54;74H[K[55;45H     tabs    in one line[55;69H[K[53;57H[?12l[?25h[?25l[57;1H:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test92.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test92.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|
test92.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|
test92.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|[m
[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[7m|
test92.in [+]                               [m[1;45H6|3zl:split[2;45Hsession! test.out[3;45Hw test.out[4;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[5;46Htest.out[6;45H![7;45HTEST[9;45Hrt:[10;45Hmultibyte chAracter[11;50Hone leaDing tab[12;46Hfour leadinG spaces[13;58Hconsecutive tabs[14;45H[7mtest92.in [+]                              [m[15;45H6|3zl:split[16;45Hsession! test.out[17;45Hw test.out[18;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[19;46Htest.out[20;45H![21;45HTEST[23;45Hrt:[24;45Hmultibyte chAracter[25;50Hone leaDing tab[26;46Hfour leadinG spaces[27;58Hconsecutive tabs[28;45H[7mtest92.in [+]                              [m[29;45H6|3zl:split[30;45Hsession! test.out[31;45Hw test.out[32;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[33;46Htest.out[34;45H![35;45HTEST[37;45Hrt:[38;45Hmultibyte chAracter[39;50Hone leaDing tab[40;46Hfour leadinG spaces[41;58Hconsecutive tabs[42;45H[7mtest92.in [+]                              [m[43;45Hsession! test.out[44;45Hw test.out[45;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[46;46Htest.out[47;45H![48;45HTEST[50;45Hrt:[51;45Hmultibyte chAracter[52;50Hone leaDing tab[53;46Hfour leadinG spaces[54;58Hconsecutive tabs[55;50Htabs    in one line[56;45H[1m[7mtest92.in [+]                              [53;57H[?12l[?25h[54;57H[?25l[m[43;45H:mksession! test.out[44;45H:new test.out[45;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[46;45H:w! test.out[47;45H:qa![48;45HENDTEST[50;45Hstart:[51;45Hno multibyte chAracter[52;50H   one leaDing tab[53;46H   four leadinG spaces[54;45Htwo[10C   consecutive tabs[55;45Htwo     tabs    in one line[54;45H[?12l[?25h[7C[?25l[43;45Hsession! test.out[43;62H[K[44;45Hw test.out[44;55H[K[45;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[45;80H[K[46;45H test.out[46;54H[K[47;45H![47;46H[K[48;45HTES[48;49H[K[50;45Hrt:[50;48H[K[51;45Hmultibyte chAracter[51;64H[K[52;50Hone leaDing tab[52;65H[K[53;46Hfour leadinG spaces[53;65H[K[54;45H   [10Cconsecutive tabs[54;74H[K[55;45H     tabs    in one line[55;69H[K[54;49H[?12l[?25h[?25l


:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test92.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test92.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|
test92.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|
test92.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|[m
[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[7m|
test92.in [+]                               [m[1;45Hw test.out[2;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[3;46Htest.out[4;45H![5;45HTEST[7;45Hrt:[8;45Hmultibyte chAracter[9;50Hone leaDing tab[10;46Hfour leadinG spaces[11;45H[7mtest92.in [+]                              [m[12;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[13;46Htest.out[14;45H![15;45HTEST[17;45Hrt:[18;45Hmultibyte chAracter[19;50Hone leaDing tab[20;46Hfour leadinG spaces[21;58Hconsecutive tabs[22;45H[7mtest92.in [+]                              [m[23;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[24;46Htest.out[25;45H![26;45HTEST[28;45Hrt:[29;45Hmultibyte chAracter[30;50Hone leaDing tab[31;46Hfour leadinG spaces[32;58Hconsecutive tabs[33;45H[7mtest92.in [+]                              [m[34;46Htest.out[35;45H![36;45HTEST[38;45Hrt:[39;45Hmultibyte chAracter[40;50Hone leaDing tab[41;46Hfour leadinG spaces[42;58Hconsecutive tabs[43;50Htabs    in one line[44;45H[7mtest92.in [+]                              [m[45;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[46;46Htest.out[47;45H![48;45HTEST[50;45Hrt:[51;45Hmultibyte chAracter[52;50Hone leaDing tab[53;46Hfour leadinG spaces[54;58Hconsecutive tabs[55;50Htabs    in one line[56;45H[1m[7mtest92.in [+]                              [54;49H[?12l[?25h[55;49H[?25l[m[45;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[46;45H:w! test.out[47;45H:qa![48;45HENDTEST[50;45Hstart:[51;45Hno multibyte chAracter[52;50H   one leaDing tab[53;46H   four leadinG spaces[54;45Htwo[10C   consecutive tabs[55;45Htwo     tabs    in one line[55;45H[?12l[?25h[7C[?25l[45;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[45;80H[K[46;45H test.out[46;54H[K[47;45H![47;46H[K[48;45HTES[48;49H[K[50;45Hrt:[50;48H[K[51;45Hmultibyte chAracter[51;64H[K[52;50Hone leaDing tab[52;65H[K[53;46Hfour leadinG spaces[53;65H[K[54;45H   [10Cconsecutive tabs[54;74H[K[55;45H     tabs    in one line[55;69H[K[55;49H[?12l[?25h[?25l

:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test92.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test92.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|
test92.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|
test92.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|[m
[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[7m|
test92.in [+]                               [m[1;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[2;46Htest.out[3;45H![4;45HTEST[6;45Hrt:[7;45Hmultibyte chAracter[8;50Hone leaDing tab[9;45H[7mtest92.in [+]                              [m[10;46Htest.out[11;45H![12;45HTEST[14;45Hrt:[15;45Hmultibyte chAracter[16;50Hone leaDing tab[17;46Hfour leadinG spaces[18;45H[7mtest92.in [+]                              [m[19;46Htest.out[20;45H![21;45HTEST[23;45Hrt:[24;45Hmultibyte chAracter[25;50Hone leaDing tab[26;46Hfour leadinG spaces[27;45H[7mtest92.in [+]                              [m[28;46Htest.out[29;45H![30;45HTEST[32;45Hrt:[33;45Hmultibyte chAracter[34;50Hone leaDing tab[35;46Hfour leadinG spaces[36;58Hconsecutive tabs[37;45H[7mtest92.in [+]                              [m[38;45HTEST[40;45Hrt:[41;45Hmultibyte chAracter[42;50Hone leaDing tab[43;46Hfour leadinG spaces[44;58Hconsecutive tabs[45;50Htabs    in one line[46;45H[7mtest92.in [+]                              [m[47;45HTEST[49;45Hrt:[50;45Hmultibyte chAracter[51;50Hone leaDing tab[52;46Hfour leadinG spaces[53;58Hconsecutive tabs[54;50Htabs    in one line[55;46H[34m~@[m multibyteCharacter[56;45H[1m[7mtest92.in [+]                              [54;49H[?12l[?25h[55;49H[?25l[m[47;45HENDTEST[49;45Hstart:[50;45Hno multibyte chAracter[51;50H   one leaDing tab[52;46H   four leadinG spaces[53;45Htwo[10C   consecutive tabs[54;45Htwo     tabs    in one line[55;45Hone [34m~@[m multibyteCharacter[55;45H[?12l[?25h[15C[?25l[47;45HTES[47;49H[K[49;45Hrt:[49;48H[K[50;45Hmultibyte chAracter[50;64H[K[51;50Hone leaDing tab[51;65H[K[52;46Hfour leadinG spaces[52;65H[K[53;45H   [10Cconsecutive tabs[53;74H[K[54;45H     tabs    in one line[54;69H[K[55;45H [34m~@[m multibyteCharacter[55;69H[K[55;57H[?12l[?25h[?25l

:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test92.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test92.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|
test92.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|
test92.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|[m
[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[7m|
test92.in [+]                               [m[1;46Htest.out[2;45H![3;45HTEST[5;45Hrt:[6;45Hmultibyte chAracter[7;50Hone leaDing tab[8;45H[7mtest92.in [+]                              [m[9;45H![10;45HTEST[12;45Hrt:[13;45Hmultibyte chAracter[14;50Hone leaDing tab[15;46Hfour leadinG spaces[16;45H[7mtest92.in [+]                              [m[17;45H![18;45HTEST[20;45Hrt:[21;45Hmultibyte chAracter[22;50Hone leaDing tab[23;46Hfour leadinG spaces[24;45H[7mtest92.in [+]                              [m[25;45HTEST[27;45Hrt:[28;45Hmultibyte chAracter[29;50Hone leaDing tab[30;46Hfour leadinG spaces[31;58Hconsecutive tabs[32;45H[7mtest92.in [+]                              [m[34;45Hrt:[35;45Hmultibyte chAracter[36;50Hone leaDing tab[37;46Hfour leadinG spaces[38;58Hconsecutive tabs[39;50Htabs    in one line[40;45H[7mtest92.in [+]                              [m[41;45Hrt:[42;45Hmultibyte chAracter[43;50Hone leaDing tab[44;46Hfour leadinG spaces[45;58Hconsecutive tabs[46;50Htabs    in one line[47;46H[34m~@[m multibyteCharacter[48;45H[7mtest92.in [+]                              [m[49;45Hmultibyte chAracter[50;50Hone leaDing tab[51;46Hfour leadinG spaces[52;58Hconsecutive tabs[53;50Htabs    in one line[54;46H[34m~@[m multibyteCharacter[55;45H[34m~@~\[mb[34m~@~][m two multiByte characters[56;45H[1m[7mtest92.in [+]                              [54;57H[?12l[?25h[55;57H[?25l[m[49;45Hno multibyte chAracter[50;50H   one leaDing tab[51;46H   four leadinG spaces[52;45Htwo[10C   consecutive tabs[53;45Htwo     tabs    in one line[54;45Hone [34m~@[m multibyteCharacter[55;45Ha [34m~@~\[mb[34m~@~][m two multiByte characters[55;45H[?12l[?25h[15C[?25l[49;45Hmultibyte chAracter[49;64H[K[50;50Hone leaDing tab[50;65H[K[51;46Hfour leadinG spaces[51;65H[K[52;45H   [10Cconsecutive tabs[52;74H[K[53;45H     tabs    in one line[53;69H[K[54;45H [34m~@[m multibyteCharacter[54;69H[K[55;45H[34m~@~\[mb[34m~@~][m two multiByte characters[55;80H[K[55;57H[?12l[?25h[?25l

:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test92.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test92.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|
test92.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|
test92.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|[m
[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[7m|
test92.in [+]                               [m[1;45H![2;45HTEST[4;45Hrt:[5;45Hmultibyte chAracter[6;50Hone leaDing tab[7;45H[7mtest92.in [+]                              [m[8;45HTEST[10;45Hrt:[11;45Hmultibyte chAracter[12;50Hone leaDing tab[13;46Hfour leadinG spaces[14;45H[7mtest92.in [+]                              [m[15;45HTEST[17;45Hrt:[18;45Hmultibyte chAracter[19;50Hone leaDing tab[20;46Hfour leadinG spaces[21;45H[7mtest92.in [+]                              [m[23;45Hrt:[24;45Hmultibyte chAracter[25;50Hone leaDing tab[26;46Hfour leadinG spaces[27;58Hconsecutive tabs[28;45H[7mtest92.in [+]                              [m[29;45Hrt:[30;45Hmultibyte chAracter[31;50Hone leaDing tab[32;46Hfour leadinG spaces[33;58Hconsecutive tabs[34;50Htabs    in one line[35;45H[7mtest92.in [+]                              [m[36;45Hmultibyte chAracter[37;50Hone leaDing tab[38;46Hfour leadinG spaces[39;58Hconsecutive tabs[40;50Htabs    in one line[41;46H[34m~@[m multibyteCharacter[42;45H[7mtest92.in [+]                              [m[43;50Hone leaDing tab[44;46Hfour leadinG spaces[45;58Hconsecutive tabs[46;50Htabs    in one line[47;46H[34m~@[m multibyteCharacter[48;45H[34m~@~\[mb[34m~@~][m two multiByte characters[49;45H[7mtest92.in [+]                              [m[50;46Hfour leadinG spaces[51;58Hconsecutive tabs[52;50Htabs    in one line[53;46H[34m~@[m multibyteCharacter[54;45H[34m~@~\[mb[34m~@~][m two multiByte characters[55;45H[34m~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[56;45H[1m[7mtest92.in [+]                              [54;57H[?12l[?25h[55;57H[?25l[m[50;46H   four leadinG spaces[51;45Htwo[10C   consecutive tabs[52;45Htwo     tabs    in one line[53;45Hone [34m~@[m multibyteCharacter[54;45Ha [34m~@~\[mb[34m~@~][m two multiByte characters[55;45H[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[55;45H[?12l[?25h[15C[?25l[50;46Hfour leadinG spaces[50;65H[K[51;45H   [10Cconsecutive tabs[51;74H[K[52;45H     tabs    in one line[52;69H[K[53;45H [34m~@[m multibyteCharacter[53;69H[K[54;45H[34m~@~\[mb[34m~@~][m two multiByte characters[54;80H[K[55;45H[34m~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[55;85H[K[55;57H[?12l[?25h[?25l

:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test92.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test92.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|
test92.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|
test92.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|[m
[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[7m|
test92.in [+]                               [m[1;45H![2;45HTEST[4;45Hrt:[5;45Hmultibyte chAracter[6;45H[7mtest92.in [+]                              [m[7;45HTEST[9;45Hrt:[10;45Hmultibyte chAracter[11;50Hone leaDing tab[12;45H[7mtest92.in [+]                              [m[14;45Hrt:[15;45Hmultibyte chAracter[16;50Hone leaDing tab[17;46Hfour leadinG spaces[18;45H[7mtest92.in [+]                              [m[19;45Hrt:[20;45Hmultibyte chAracter[21;50Hone leaDing tab[22;46Hfour leadinG spaces[23;58Hconsecutive tabs[24;45H[7mtest92.in [+]                              [m[25;45Hmultibyte chAracter[26;50Hone leaDing tab[27;46Hfour leadinG spaces[28;58Hconsecutive tabs[29;50Htabs    in one line[30;45H[7mtest92.in [+]                              [m[31;50Hone leaDing tab[32;46Hfour leadinG spaces[33;58Hconsecutive tabs[34;50Htabs    in one line[35;46H[34m~@[m multibyteCharacter[36;45H[7mtest92.in [+]                              [m[37;50Hone leaDing tab[38;46Hfour leadinG spaces[39;58Hconsecutive tabs[40;50Htabs    in one line[41;46H[34m~@[m multibyteCharacter[42;45H[34m~@~\[mb[34m~@~][m two multiByte characters[43;45H[7mtest92.in [+]                              [m[44;58Hconsecutive tabs[45;50Htabs    in one line[46;46H[34m~@[m multibyteCharacter[47;45H[34m~@~\[mb[34m~@~][m two multiByte characters[48;45H[34m~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[49;45H[7mtest92.in [+]                              [m[50;58Hconsecutive tabs[51;50Htabs    in one line[52;46H[34m~@[m multibyteCharacter[53;45H[34m~@~\[mb[34m~@~][m two multiByte characters[54;45H[34m~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[55;45H[1m[34m~                                          [m[56;45H[1m[7mtest92.in [+]                              [54;57H[?12l[?25h[?25l


[m:[?12l[?25hmksession! test.out[?25l[54;57H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew test.out[?25l"test.out" [57;12H[K[57;12H282 lines, 5375 characters[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test92.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test92.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test92.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test92.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test92.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|
test92.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|
test92.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one [34m~@[m multibyteCharacter[16C[7m|[m
a [34m~@~\[mb[34m~@~][m two multiByte characters     [7m|[m
[34m~@~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[7m|
test92.in [+]                               [m[1;45H![2;45HTEST[4;45Hrt:[5;45Hmultibyte chAracter[6;45H[7mtest92.in [+]                              [m[7;45HTEST[9;45Hrt:[10;45Hmultibyte chAracter[11;50Hone leaDing tab[12;45H[7mtest92.in [+]                              [m[13;45Hrt:[14;45Hmultibyte chAracter[15;50Hone leaDing tab[16;46Hfour leadinG spaces[17;45H[7mtest92.in [+]                              [m[18;45Hrt:[19;45Hmultibyte chAracter[20;50Hone leaDing tab[21;46Hfour leadinG spaces[22;58Hconsecutive tabs[23;45H[7mtest92.in [+]                              [m[24;50Hone leaDing tab[25;46Hfour leadinG spaces[26;58Hconsecutive tabs[27;50Htabs    in one line[28;45H[7mtest92.in [+]                              [m[29;50Hone leaDing tab[30;46Hfour leadinG spaces[31;58Hconsecutive tabs[32;50Htabs    in one line[33;46H[34m~@[m multibyteCharacter[34;45H[7mtest92.in [+]                              [m[35;58Hconsecutive tabs[36;50Htabs    in one line[37;46H[34m~@[m multibyteCharacter[38;45H[34m~@~\[mb[34m~@~][m two multiByte characters[39;45H[7mtest92.in [+]                              [m[40;58Hconsecutive tabs[41;50Htabs    in one line[42;46H[34m~@[m multibyteCharacter[43;45H[34m~@~\[mb[34m~@~][m two multiByte characters[44;45H[34m~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[45;45H[7mtest92.in [+]                              [m[46;50Htabs    in one line[47;46H[34m~@[m multibyteCharacter[48;45H[34m~@~\[mb[34m~@~][m two multiByte characters[49;45H[34m~\[mc[34m~@~][m1[34m~B[m three mulTibyte characters[50;45H[7mtest92.in [+]                              [m[51;45Hlet SessionLoad = 1[52;45Hif !&cp | set cp | endif[53;45Hlet s:so_save = &so | let s:siso_save = &si[54;45Hlet v:this_session=expand("<sfile>:p")[55;45Hsilent only[56;45H[1m[7mtest.out                                   [51;45H[?12l[?25h[?25l[57;1H[m:[?12l[?25hv/\(^ *normal! 0\|^ *exe 'normal!\)/d[?25l256 fewer lines[57;17H[K[51;45H  normal! 016|[51;59H[K[52;45H  exe 'normal! ' . s:c . '|zs' . 16 . '|'[53;45H  normal! 016|[53;59H[K[54;45H  exe 'normal! ' . s:c . '|zs' . 16 . '|'[55;45H  normal! 016|[56;54H[1m[7m[+][55;47H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H26 lines, 611 characters written[56;54H[1m[7m    [55;47H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test92 = test61; then \
#	  if diff test.out test92.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test92.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test92.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test93.failed test.ok test.out X* viminfo
cp test93.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test93.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test93.in" 48 lines, 843 characters[1;1Hvim: set ft=vim fenc=latin1:

Tests if :mksession saves cursor columns correctly in presence of tab and
multibyte characters when fileencoding=latin1.

STARTTEST
:so mbyte.vim
:if !has('mksession')
:  e! test.ok
:  wq! test.out
:endif
:set sessionoptions=buffers splitbelow fileencoding=latin1
/^start:
:vsplit
j16|:split
j16|:split
j16|:split
j8|:split
j8|:split
j16|:split
j16|:split
j16|:wincmd l
/^start:
:set nowrap
j16|3zl:split
j016|3zl:split
j016|3zl:split
j08|3zl:split
j08|3zl:split
j016|3zl:split
j016|3zl:split
j016|3zl:split
:mksession! test.out
:new test.out
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d
:w! test.out
:qa!
ENDTEST

start:
no multibyte chAracter[42;9Hone leaDing tab
    four leadinG spaces
two[13Cconsecutive tabs
two     tabs    in one line
one  multibyteCharacter
a   two multiByte characters
A  three mulTibyte characters
[1m[34m~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1Hvim: set ft=vim fenc=latin1:[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[6;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 31 lines, 468 characters written[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[7;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[38;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !has('mksession')[?25l
:  [?12l[?25h:  e! test.ok
[?25l:  [?12l[?25h:  wq! test.out
[?25l:  [?12l[?25h:endif[1;1H[3L[?25l[1;1Hvim: set ft=vim fenc=latin1:

Tests if :mksession saves cursor columns correctly in presence of tab and[57;1H[K[39;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset sessionoptions=buffers splitbelow fileencoding=latin1[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^start:[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hvsplit[?25l[1;1H                            [15C[7m|[m
Tests if :mksession saves cursor columns co[7m|[m
rrectly in presence of tab and             [7m|[4;44H|[m
n1.[40C[7m|[m
         [34C[7m|[m
STARTTEST    [30C[7m|[m
:so mbyte.vim        [22C[7m|[m
:if !has('mksession')[22C[7m|[m
:  e! test.ok  [28C[7m|[m
:  wq! test.out[28C[7m|[m
:endif                                     [7m|[m
:set sessionoptions=buffers splitbelow file[7m|[m
encoding=latin1[28C[7m|[m
/^start:  [33C[7m|[m
:vsplit   [33C[7m|[17;44H|[m
j16|:split[33C[7m|[m
j16|:split[33C[7m|[m
j8|:split [33C[7m|[m
j8|:split [33C[7m|[m[22;6Hsplit   [30C[7m|[m
j16|:split[33C[7m|[m
j16|:wincmd l[30C[7m|[m
/^start:     [30C[7m|[m
:set nowrap   [29C[7m|[m
j16|3zl:split [29C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
j08|3zl:split [29C[7m|[m
j08|3zl:split [29C[7m|[32;44H|[m
j016|3zl:split      [23C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out                       [7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[m
                      [21C[7m|[m
start:                 [20C[7m|[m
no multibyte chAracter [20C[7m|[m
        one leaDing tab         [11C[7m|[m
    four leadinG spaces    [16C[7m|[m
two             consecutive tabs[11C[7m|[m
two     tabs    in one line   [13C[7m|[m
one  multibyteCharacter        [11C[7m|[m
a   two multiByte characters             [7m|[m
A  three mulTibyte characters           [7m|[51;44H|[52;44H|[53;44H|[54;44H|[55;44H|[m
[1m[7mtest93.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;46Hrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=lati[5;45Hn1.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[12;51H[K[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=latin1[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone  multibyteCharacter[49;45Ha   two multiByte characters[49;75H[K[50;45HA  three mulTibyte characters[50;77H[K[51;45H[1m[34m~[52;45H~[53;45H~[54;45H~[55;45H~[m[56;45H[7mtest93.in [+]                              [42;1H[?12l[?25h
[15C[?25l[m[57;1H[K[57;1H:[?12l[?25hsplit[?25l[1;1Hj16|:split
j16|:split                                 
j16|:wincmd l                 
/^start:                                   
:set nowrap
j16|3zl:split
j016|3zl:split
j016|3zl:split
j08|3zl:split        
j08|3zl:split
j016|3zl:split 
j016|3zl:split
j016|3zl:split                             
:mksession! test.out
:new test.out
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d
:w! test.out
:qa!      
ENDTEST   
         
start:   
no multibyte chAracter
        one leaDing tab
    four leadinG spaces
two     [8Cconsecutive tabs
two     tabs    in one line
one  multibyteCharacter
[7mtest93.in [+]                              [m
j16|:split    
j16|:split   
j16|:wincmd l
/^start:      
:set nowrap   
j16|3zl:split 
j016|3zl:split      
j016|3zl:split
j08|3zl:split                         
j08|3zl:split
j016|3zl:split
j016|3zl:split
j016|3zl:split
:mksession! test.out
:new test.out         
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d
:w! test.out           
:qa![12C                
ENDTEST                    
                        
start:                        
no multibyte chAracter          
        one leaDing tab                    
    four leadinG spaces                    
two             consecutive tabs           
two     tabs    in one line                
one  multibyteCharacter                   [50;16H[?12l[?25h[51;16H[?25l[57;1H[K[57;1H:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1Hj016|3zl:split[29C[7m|[m
j08|3zl:split[30C[7m|[m
j08|3zl:split[30C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[13;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[16;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
j08|3zl:split[30C[7m|[m
j08|3zl:split[30C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[31;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[34;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
j016|3zl:split[29C[7m|[m
j08|3zl:split[30C[7m|[m
j08|3zl:split[30C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[50;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[53;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
[1m[7mtest93.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;45Hrrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=lati[5;45Hn1.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=latin1[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone  multibyteCharacter[49;45Ha   two multiByte characters[50;45HA  three mulTibyte characters[51;45H[1m[34m~                                          [52;45H~                                          [53;45H~                                          [54;45H~                                          [55;45H~                                          [m[56;45H[7mtest93.in [+]                              [53;16H[?12l[?25h[54;16H[?25l


[m:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1Hj016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[9;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[12;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[23;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[26;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[37;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[40;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[m
j016|3zl:split[29C[7m|[m
j016|3zl:split[29C[7m|[m
:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[51;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[54;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
[1m[7mtest93.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;45Hrrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=lati[5;45Hn1.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=latin1[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone  multibyteCharacter[49;45Ha   two multiByte characters[50;45HA  three mulTibyte characters[51;45H[1m[34m~                                          [52;45H~                                          [53;45H~                                          [54;45H~                                          [55;45H~                                          [m[56;45H[7mtest93.in [+]                              [55;16H[?12l[?25h[?25l[m[43;1Hj016|3zl:split                             
:mksession! test.out                       
:new test.out                              
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     
:w! test.out                               
:qa!                                       
ENDTEST                                    
                                           
start:                                     
no multibyte chAracter                     
        one leaDing tab                    
    four leadinG spaces                    
                                           two[13Cconsecutive tabs[55;16H[?12l[?25h[55;8H[?25l

:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:mksession! test.out[23C[7m|[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[7;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[10;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[17;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[20;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[m
:new test.out[30C[7m|[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[28;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[38;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[41;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[49;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[52;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
[1m[7mtest93.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;45Hrrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=lati[5;45Hn1.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=latin1[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone  multibyteCharacter[49;45Ha   two multiByte characters[50;45HA  three mulTibyte characters[51;45H[1m[34m~                                          [52;45H~                                          [53;45H~                                          [54;45H~                                          [55;45H~                                          [m[56;45H[7mtest93.in [+]                              [54;8H[?12l[?25h[55;8H[?25l

[m:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[5;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[8;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
:v/\(^ *normal! 0\|^ *exe 'normal!\)/d     [7m|[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[14;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[17;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[31;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[34;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
ENDTEST[36C[7m|[39;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[42;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test93.in [+]                              |[m
ENDTEST[36C[7m|[48;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[51;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
[1m[7mtest93.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;45Hrrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=lati[5;45Hn1.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=latin1[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone  multibyteCharacter[49;45Ha   two multiByte characters[50;45HA  three mulTibyte characters[51;45H[1m[34m~                                          [52;45H~                                          [53;45H~                                          [54;45H~                                          [55;45H~                                          [m[56;45H[7mtest93.in [+]                              [54;8H[?12l[?25h[55;8H[8C[?25l

[m:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[7;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[12;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[15;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[19;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[22;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[m
ENDTEST[36C[7m|[26;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[29;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[33;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[36;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test93.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|
test93.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[50;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|[m
[1m[7mtest93.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;45Hrrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=lati[5;45Hn1.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=latin1[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone  multibyteCharacter[49;45Ha   two multiByte characters[50;45HA  three mulTibyte characters[51;45H[1m[34m~                                          [52;45H~                                          [53;45H~                                          [54;45H~                                          [55;45H~                                          [m[56;45H[7mtest93.in [+]                              [54;16H[?12l[?25h[55;16H[?25l

[m:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test93.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test93.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|
test93.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|
test93.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|[m
A  three mulTibyte characters[11C[7m|[m
[1m[7mtest93.in [+]                               [m[2;45HTests if :mksession saves cursor columns co[3;45Hrrectly in presence of tab and[4;45Hmultibyte characters when fileencoding=lati[5;45Hn1.[7;45HSTARTTEST[8;45H:so mbyte.vim[9;45H:if !has('mksession')[10;45H:  e! test.ok[11;45H:  wq! test.out[12;45H:endif[13;45H:set sessionoptions=buffers splitbelow file[14;45Hencoding=latin1[15;45H/^start:[16;45H:vsplit[17;45Hj16|:split[18;45Hj16|:split[19;45Hj16|:split[20;45Hj8|:split[21;45Hj8|:split[22;45Hj16|:split[23;45Hj16|:split[24;45Hj16|:wincmd l[25;45H/^start:[26;45H:set nowrap[27;45Hj16|3zl:split[28;45Hj016|3zl:split[29;45Hj016|3zl:split[30;45Hj08|3zl:split[31;45Hj08|3zl:split[32;45Hj016|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45H:mksession! test.out[36;45H:new test.out[37;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[38;45H:w! test.out[39;45H:qa![40;45HENDTEST[42;45Hstart:[43;45Hno multibyte chAracter[44;53Hone leaDing tab[45;49Hfour leadinG spaces[46;45Htwo[13Cconsecutive tabs[47;45Htwo     tabs    in one line[48;45Hone  multibyteCharacter[49;45Ha   two multiByte characters[50;45HA  three mulTibyte characters[51;45H[1m[34m~                                          [52;45H~                                          [53;45H~                                          [54;45H~                                          [55;45H~                                          [m[56;45H[7mtest93.in [+]                              [54;16H[?12l[?25h[55;16H[?25l

[m:[?12l[?25hwincmd l[?25l[56;1H[7mtest93.in [+][m[1m[7m [m[7m                               [m[1m[7mtest93.in [+]                              [42;45H[?12l[?25h[?25l[m[57;1H[K[57;1H/[?12l[?25h^start:[?25l[31msearch hit BOTTOM, continuing at TOP[42;45H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset nowrap[?25l[3;45Hmultibyte characters when fileencoding=lati[4;45H[K[5;45HSTARTTEST[6;45H:so mbyte.vim[7;45H:if !has('mksession')[8;46H  e! test.ok[9;46H  wq! test.out[9;60H[K[10;46Hendif[10;51H[K[11;46Hset sessionoptions=buffers splitbelow file[12;45H/^start:[13;46Hvsplit[13;52H[K[14;45Hj16|:split[14;55H[K[15;45Hj16|:split[16;45Hj16|:split[17;46H8|:split[17;54H[K[18;46H8|:split[18;54H[K[20;46H16|:split[21;46H16|:wincmd l[22;45H/^start:[22;53H[K[23;45H:set nowrap[24;49H3zl:split[25;45Hj016|3zl:split[26;45Hj016|3zl:split[27;46H08[28;47H8|3zl:split[28;58H[K[30;47H16|3zl:split[31;47H16|3zl:split[32;45H:mksession! test.out[33;45H:new test.out[33;58H[K[34;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[35;46Hw! test.out[35;57H[K[36;46Hqa![36;50H[K[37;45HENDTEST[37;52H[K[38;45H[K[39;45Hstart:[40;45Hno multibyte chAracter[41;53Hone leaDing tab[42;45H    four leadinG spaces[43;45Htwo             consecutive tabs[44;45Htwo     tabs    in one line[45;45Hone  multibyteCharacter[46;45Ha   two multiByte characters[46;75H[K[47;45HA  three mulTibyte characters[48;45H[1m[34m~                                          [49;45H~                                          [50;45H~                                          [39;45H[?12l[?25h[40;45H[15C[?25l[m[2;45Hts if :mksession saves cursor columns corre[3;45Htibyte characters when fileencoding=latin1.[5;45HRTTES[5;51H[K[6;45H mbyte.vim[6;55H[K[7;45H !has('mksession')[7;63H[K[8;45He! test.ok[8;55H[K[9;45Hwq! test.out[9;57H[K[10;45Hdif[10;48H[K[11;45Ht sessionoptions=buffers splitbelow fileenc[12;45Htart:[12;50H[K[13;45Hplit[13;49H[K[14;45H|:split[14;52H[K[15;45H|:split[15;52H[K[16;45H|:split[16;52H[K[17;45H:split[17;51H[K[18;45H:split[18;51H[K[19;45H|:split[19;52H[K[20;45H|:split[20;52H[K[21;45H|:wincmd l[21;55H[K[22;45Htart:[22;50H[K[23;45Ht nowrap[23;53H[K[24;45H|3zl:split[24;55H[K[25;45H6|3zl:split[25;56H[K[26;45H6|3zl:split[26;56H[K[27;45H|3zl:split[27;55H[K[28;45H|3zl:split[28;55H[K[29;45H6|3zl:split[29;56H[K[30;45H6|3zl:split[30;56H[K[31;45H6|3zl:split[31;56H[K[32;45Hsession! test.out[32;62H[K[33;45Hw test.out[33;55H[K[34;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[34;80H[K[35;45H test.out[35;54H[K[36;45H![36;46H[K[37;45HTES[37;49H[K[39;45Hrt:[39;48H[K[40;45Hmultibyte chAracter[40;64H[K[41;50Hone leaDing tab[41;65H[K[42;46Hfour leadinG spaces[42;65H[K[43;45H   [10Cconsecutive tabs[43;74H[K[44;45H     tabs    in one line[44;69H[K[45;45H  multibyteCharacter[45;66H[K[46;45H  two multiByte characters[46;72H[K[47;45H  three mulTibyte characters[47;74H[K[40;57H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsplit[?25l[1;45H|:wincmd l[2;46Hart:[2;51H[K[3;46H nowrap[3;53H[K[4;45H|3zl:split[5;45H6|3zl:split[6;45H6|3zl:split[7;45H|3zl:split[7;55H[K[8;45H|3zl:split[9;45H6|3zl:split[9;56H[K[10;45H6|3zl:split[11;45H6|3zl:split[11;56H[K[12;45Hsession! test.out[13;45Hw test.out[14;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[15;45H test.out[16;45H![16;46H[K[17;45HTEST[17;49H[K[18;45H[K[19;45Hrt:[19;48H[K[20;45Hmultibyte chAracter[21;45H     one leaDing tab[22;45H four leadinG spaces[23;45H             consecutive tabs[24;45H     tabs    in one line[25;45H  multibyteCharacter[26;45H  two multiByte characters[27;45H  three mulTibyte characters[28;45H[7mtest93.in [+]                              [m[29;45H|:wincmd l[29;55H[K[30;45Htart:[30;50H[K[31;45Ht nowra[31;53H[K[32;45H|3zl:spli[32;55H[K[33;45H6|3zl:split[34;45H6|3zl:split[34;56H[K[35;45H|3zl:split[36;45H|3zl:split[37;45H6|3zl:split[38;45H6|3zl:split[39;45H6|3zl:split[40;45Hsession! test.ou[40;62H[K[41;45Hw test.out[41;55H[K[42;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[43;46Htest.out[43;58H[K[44;45H![44;50H[K[45;45HTEST[45;49H[K[46;45H[K[47;45Hrt:[47;48H[K[48;45Hmultibyte chAracter[48;64H[K[49;45H     one leaDing tab[49;65H[K[50;45H four leadinG spaces[50;65H[K[51;45H             consecutive tabs[51;74H[K[52;45H     tabs    in one line[52;69H[K[53;45H  multibyteCharacter[53;66H[K[54;45H  two multiByte characters[54;72H[K[55;45H  three mulTibyte characters[55;74H[K[48;57H[?12l[?25h[49;57H[?25l[29;45Hj16|:wincmd l[30;45H/^start:[31;45H:set nowrap[32;45Hj16|3zl:split[33;45Hj016|3zl:split[34;45Hj016|3zl:split[35;45Hj08|3zl:split[36;45Hj08|3zl:split[37;45Hj016|3zl:split[38;45Hj016|3zl:split[39;45Hj016|3zl:split[40;45H:mksession! test.out[41;45H:new test.out[42;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[43;45H:w! test.out[44;45H:qa![45;45HENDTEST[47;45Hstart:[48;45Hno multibyte chAracter[49;50H   one leaDing tab[50;46H   four leadinG spaces[51;45Htwo[10C   consecutive tabs[52;45Htwo     tabs    in one line[53;45Hone  multibyteCharacter[54;45Ha   two multiByte characters[55;45HA  three mulTibyte characters[49;52H[?12l[?25h[8C[?25l[29;45H|:wincmd l[29;55H[K[30;45Htart:[30;50H[K[31;45Ht nowrap[31;53H[K[32;45H|3zl:split[32;55H[K[33;45H6|3zl:split[33;56H[K[34;45H6|3zl:split[34;56H[K[35;45H|3zl:split[35;55H[K[36;45H|3zl:split[36;55H[K[37;45H6|3zl:split[37;56H[K[38;45H6|3zl:split[38;56H[K[39;45H6|3zl:split[39;56H[K[40;45Hsession! test.out[40;62H[K[41;45Hw test.out[41;55H[K[42;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[42;80H[K[43;45H test.out[43;54H[K[44;45H![44;46H[K[45;45HTES[45;49H[K[47;45Hrt:[47;48H[K[48;45Hmultibyte chAracter[48;64H[K[49;50Hone leaDing tab[49;65H[K[50;46Hfour leadinG spaces[50;65H[K[51;45H   [10Cconsecutive tabs[51;74H[K[52;45H     tabs    in one line[52;69H[K[53;45H  multibyteCharacter[53;66H[K[54;45H  two multiByte characters[54;72H[K[55;45H  three mulTibyte characters[55;74H[K[49;57H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test93.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test93.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|
test93.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|
test93.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|[m
A  three mulTibyte characters[11C[7m|
test93.in [+]                               [m[1;45H|3zl:split[2;45H|3zl:split[3;45H6|3zl:split[4;45H6|3zl:split[5;45H6|3zl:split[6;45Hsession! test.out[7;45Hw test.out[8;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[9;46Htest.out[10;45H![11;45HTEST[13;45Hrt:[14;45Hmultibyte chAracter[15;50Hone leaDing tab[16;46Hfour leadinG spaces[17;58Hconsecutive tabs[18;50Htabs    in one line[19;45H[7mtest93.in [+]                              [m[20;45H|3zl:split[21;45H6|3zl:split[22;45H6|3zl:split[23;45H6|3zl:split[24;45Hsession! test.out[25;45Hw test.out[26;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[27;46Htest.out[28;45H![29;45HTEST[31;45Hrt:[32;45Hmultibyte chAracter[33;50Hone leaDing tab[34;46Hfour leadinG spaces[35;58Hconsecutive tabs[36;50Htabs    in one line[37;45H[7mtest93.in [+]                              [m[38;45H|3zl:split[39;45H|3zl:split[40;45H6|3zl:split[41;45H6|3zl:split[42;45H6|3zl:split[43;45Hsession! test.out[44;45Hw test.out[45;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[46;46Htest.out[47;45H![48;45HTEST[50;45Hrt:[51;45Hmultibyte chAracter[52;50Hone leaDing tab[53;46Hfour leadinG spaces[54;58Hconsecutive tabs[55;50Htabs    in one line[56;45H[1m[7mtest93.in [+]                              [52;57H[?12l[?25h[53;57H[?25l[m[38;45Hj08|3zl:split[39;45Hj08|3zl:split[40;45Hj016|3zl:split[41;45Hj016|3zl:split[42;45Hj016|3zl:split[43;45H:mksession! test.out[44;45H:new test.out[45;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[46;45H:w! test.out[47;45H:qa![48;45HENDTEST[50;45Hstart:[51;45Hno multibyte chAracter[52;50H   one leaDing tab[53;46H   four leadinG spaces[54;45Htwo[10C   consecutive tabs[55;45Htwo     tabs    in one line[53;45H[?12l[?25h[15C[?25l[38;45H|3zl:split[38;55H[K[39;45H|3zl:split[39;55H[K[40;45H6|3zl:split[40;56H[K[41;45H6|3zl:split[41;56H[K[42;45H6|3zl:split[42;56H[K[43;45Hsession! test.out[43;62H[K[44;45Hw test.out[44;55H[K[45;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[45;80H[K[46;45H test.out[46;54H[K[47;45H![47;46H[K[48;45HTES[48;49H[K[50;45Hrt:[50;48H[K[51;45Hmultibyte chAracter[51;64H[K[52;50Hone leaDing tab[52;65H[K[53;46Hfour leadinG spaces[53;65H[K[54;45H   [10Cconsecutive tabs[54;74H[K[55;45H     tabs    in one line[55;69H[K[53;57H[?12l[?25h[?25l[57;1H:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test93.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test93.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|
test93.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|
test93.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|[m
A  three mulTibyte characters[11C[7m|
test93.in [+]                               [m[1;45H6|3zl:split[2;45Hsession! test.out[3;45Hw test.out[4;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[5;46Htest.out[6;45H![7;45HTEST[9;45Hrt:[10;45Hmultibyte chAracter[11;50Hone leaDing tab[12;46Hfour leadinG spaces[13;58Hconsecutive tabs[14;45H[7mtest93.in [+]                              [m[15;45H6|3zl:split[16;45Hsession! test.out[17;45Hw test.out[18;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[19;46Htest.out[20;45H![21;45HTEST[23;45Hrt:[24;45Hmultibyte chAracter[25;50Hone leaDing tab[26;46Hfour leadinG spaces[27;58Hconsecutive tabs[28;45H[7mtest93.in [+]                              [m[29;45H6|3zl:split[30;45Hsession! test.out[31;45Hw test.out[32;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[33;46Htest.out[34;45H![35;45HTEST[37;45Hrt:[38;45Hmultibyte chAracter[39;50Hone leaDing tab[40;46Hfour leadinG spaces[41;58Hconsecutive tabs[42;45H[7mtest93.in [+]                              [m[43;45Hsession! test.out[44;45Hw test.out[45;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[46;46Htest.out[47;45H![48;45HTEST[50;45Hrt:[51;45Hmultibyte chAracter[52;50Hone leaDing tab[53;46Hfour leadinG spaces[54;58Hconsecutive tabs[55;50Htabs    in one line[56;45H[1m[7mtest93.in [+]                              [53;57H[?12l[?25h[54;57H[?25l[m[43;45H:mksession! test.out[44;45H:new test.out[45;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[46;45H:w! test.out[47;45H:qa![48;45HENDTEST[50;45Hstart:[51;45Hno multibyte chAracter[52;50H   one leaDing tab[53;46H   four leadinG spaces[54;45Htwo[10C   consecutive tabs[55;45Htwo     tabs    in one line[54;45H[?12l[?25h[7C[?25l[43;45Hsession! test.out[43;62H[K[44;45Hw test.out[44;55H[K[45;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[45;80H[K[46;45H test.out[46;54H[K[47;45H![47;46H[K[48;45HTES[48;49H[K[50;45Hrt:[50;48H[K[51;45Hmultibyte chAracter[51;64H[K[52;50Hone leaDing tab[52;65H[K[53;46Hfour leadinG spaces[53;65H[K[54;45H   [10Cconsecutive tabs[54;74H[K[55;45H     tabs    in one line[55;69H[K[54;49H[?12l[?25h[?25l


:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test93.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test93.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|
test93.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|
test93.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|[m
A  three mulTibyte characters[11C[7m|
test93.in [+]                               [m[1;45Hw test.out[2;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[3;46Htest.out[4;45H![5;45HTEST[7;45Hrt:[8;45Hmultibyte chAracter[9;50Hone leaDing tab[10;46Hfour leadinG spaces[11;45H[7mtest93.in [+]                              [m[12;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[13;46Htest.out[14;45H![15;45HTEST[17;45Hrt:[18;45Hmultibyte chAracter[19;50Hone leaDing tab[20;46Hfour leadinG spaces[21;58Hconsecutive tabs[22;45H[7mtest93.in [+]                              [m[23;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[24;46Htest.out[25;45H![26;45HTEST[28;45Hrt:[29;45Hmultibyte chAracter[30;50Hone leaDing tab[31;46Hfour leadinG spaces[32;58Hconsecutive tabs[33;45H[7mtest93.in [+]                              [m[34;46Htest.out[35;45H![36;45HTEST[38;45Hrt:[39;45Hmultibyte chAracter[40;50Hone leaDing tab[41;46Hfour leadinG spaces[42;58Hconsecutive tabs[43;50Htabs    in one line[44;45H[7mtest93.in [+]                              [m[45;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[46;46Htest.out[47;45H![48;45HTEST[50;45Hrt:[51;45Hmultibyte chAracter[52;50Hone leaDing tab[53;46Hfour leadinG spaces[54;58Hconsecutive tabs[55;50Htabs    in one line[56;45H[1m[7mtest93.in [+]                              [54;49H[?12l[?25h[55;49H[?25l[m[45;45H:v/\(^ *normal! 0\|^ *exe 'normal!\)/d[46;45H:w! test.out[47;45H:qa![48;45HENDTEST[50;45Hstart:[51;45Hno multibyte chAracter[52;50H   one leaDing tab[53;46H   four leadinG spaces[54;45Htwo[10C   consecutive tabs[55;45Htwo     tabs    in one line[55;45H[?12l[?25h[7C[?25l[45;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[45;80H[K[46;45H test.out[46;54H[K[47;45H![47;46H[K[48;45HTES[48;49H[K[50;45Hrt:[50;48H[K[51;45Hmultibyte chAracter[51;64H[K[52;50Hone leaDing tab[52;65H[K[53;46Hfour leadinG spaces[53;65H[K[54;45H   [10Cconsecutive tabs[54;74H[K[55;45H     tabs    in one line[55;69H[K[55;49H[?12l[?25h[?25l

:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test93.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test93.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|
test93.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|
test93.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|[m
A  three mulTibyte characters[11C[7m|
test93.in [+]                               [m[1;45H\(^ *normal! 0\|^ *exe 'normal!\)/d[2;46Htest.out[3;45H![4;45HTEST[6;45Hrt:[7;45Hmultibyte chAracter[8;50Hone leaDing tab[9;45H[7mtest93.in [+]                              [m[10;46Htest.out[11;45H![12;45HTEST[14;45Hrt:[15;45Hmultibyte chAracter[16;50Hone leaDing tab[17;46Hfour leadinG spaces[18;45H[7mtest93.in [+]                              [m[19;46Htest.out[20;45H![21;45HTEST[23;45Hrt:[24;45Hmultibyte chAracter[25;50Hone leaDing tab[26;46Hfour leadinG spaces[27;45H[7mtest93.in [+]                              [m[28;46Htest.out[29;45H![30;45HTEST[32;45Hrt:[33;45Hmultibyte chAracter[34;50Hone leaDing tab[35;46Hfour leadinG spaces[36;58Hconsecutive tabs[37;45H[7mtest93.in [+]                              [m[38;45HTEST[40;45Hrt:[41;45Hmultibyte chAracter[42;50Hone leaDing tab[43;46Hfour leadinG spaces[44;58Hconsecutive tabs[45;50Htabs    in one line[46;45H[7mtest93.in [+]                              [m[47;45HTEST[49;45Hrt:[50;45Hmultibyte chAracter[51;50Hone leaDing tab[52;46Hfour leadinG spaces[53;58Hconsecutive tabs[54;50Htabs    in one line[55;46H multibyteCharacter[56;45H[1m[7mtest93.in [+]                              [54;49H[?12l[?25h[55;49H[?25l[m[47;45HENDTEST[49;45Hstart:[50;45Hno multibyte chAracter[51;50H   one leaDing tab[52;46H   four leadinG spaces[53;45Htwo[10C   consecutive tabs[54;45Htwo     tabs    in one line[55;45Hone  multibyteCharacter[55;45H[?12l[?25h[15C[?25l[47;45HTES[47;49H[K[49;45Hrt:[49;48H[K[50;45Hmultibyte chAracter[50;64H[K[51;50Hone leaDing tab[51;65H[K[52;46Hfour leadinG spaces[52;65H[K[53;45H   [10Cconsecutive tabs[53;74H[K[54;45H     tabs    in one line[54;69H[K[55;45H  multibyteCharacter[55;66H[K[55;57H[?12l[?25h[?25l

:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test93.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test93.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|
test93.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|
test93.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|[m
A  three mulTibyte characters[11C[7m|
test93.in [+]                               [m[1;46Htest.out[2;45H![3;45HTEST[5;45Hrt:[6;45Hmultibyte chAracter[7;50Hone leaDing tab[8;45H[7mtest93.in [+]                              [m[9;45H![10;45HTEST[12;45Hrt:[13;45Hmultibyte chAracter[14;50Hone leaDing tab[15;46Hfour leadinG spaces[16;45H[7mtest93.in [+]                              [m[17;45H![18;45HTEST[20;45Hrt:[21;45Hmultibyte chAracter[22;50Hone leaDing tab[23;46Hfour leadinG spaces[24;45H[7mtest93.in [+]                              [m[25;45HTEST[27;45Hrt:[28;45Hmultibyte chAracter[29;50Hone leaDing tab[30;46Hfour leadinG spaces[31;58Hconsecutive tabs[32;45H[7mtest93.in [+]                              [m[34;45Hrt:[35;45Hmultibyte chAracter[36;50Hone leaDing tab[37;46Hfour leadinG spaces[38;58Hconsecutive tabs[39;50Htabs    in one line[40;45H[7mtest93.in [+]                              [m[41;45Hrt:[42;45Hmultibyte chAracter[43;50Hone leaDing tab[44;46Hfour leadinG spaces[45;58Hconsecutive tabs[46;50Htabs    in one line[47;46H multibyteCharacter[48;45H[7mtest93.in [+]                              [m[49;45Hmultibyte chAracter[50;50Hone leaDing tab[51;46Hfour leadinG spaces[52;58Hconsecutive tabs[53;50Htabs    in one line[54;46H multibyteCharacter[55;45H  two multiByte characters[56;45H[1m[7mtest93.in [+]                              [54;57H[?12l[?25h[55;57H[?25l[m[49;45Hno multibyte chAracter[50;50H   one leaDing tab[51;46H   four leadinG spaces[52;45Htwo[10C   consecutive tabs[53;45Htwo     tabs    in one line[54;45Hone  multibyteCharacter[55;45Ha   two multiByte characters[55;45H[?12l[?25h[15C[?25l[49;45Hmultibyte chAracter[49;64H[K[50;50Hone leaDing tab[50;65H[K[51;46Hfour leadinG spaces[51;65H[K[52;45H   [10Cconsecutive tabs[52;74H[K[53;45H     tabs    in one line[53;69H[K[54;45H  multibyteCharacter[54;66H[K[55;45H  two multiByte characters[55;72H[K[55;57H[?12l[?25h[?25l

:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test93.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test93.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|
test93.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|
test93.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|[m
A  three mulTibyte characters[11C[7m|
test93.in [+]                               [m[1;45H![2;45HTEST[4;45Hrt:[5;45Hmultibyte chAracter[6;50Hone leaDing tab[7;45H[7mtest93.in [+]                              [m[8;45HTEST[10;45Hrt:[11;45Hmultibyte chAracter[12;50Hone leaDing tab[13;46Hfour leadinG spaces[14;45H[7mtest93.in [+]                              [m[15;45HTEST[17;45Hrt:[18;45Hmultibyte chAracter[19;50Hone leaDing tab[20;46Hfour leadinG spaces[21;45H[7mtest93.in [+]                              [m[23;45Hrt:[24;45Hmultibyte chAracter[25;50Hone leaDing tab[26;46Hfour leadinG spaces[27;58Hconsecutive tabs[28;45H[7mtest93.in [+]                              [m[29;45Hrt:[30;45Hmultibyte chAracter[31;50Hone leaDing tab[32;46Hfour leadinG spaces[33;58Hconsecutive tabs[34;50Htabs    in one line[35;45H[7mtest93.in [+]                              [m[36;45Hmultibyte chAracter[37;50Hone leaDing tab[38;46Hfour leadinG spaces[39;58Hconsecutive tabs[40;50Htabs    in one line[41;46H multibyteCharacter[42;45H[7mtest93.in [+]                              [m[43;50Hone leaDing tab[44;46Hfour leadinG spaces[45;58Hconsecutive tabs[46;50Htabs    in one line[47;46H multibyteCharacter[48;45H  two multiByte characters[49;45H[7mtest93.in [+]                              [m[50;46Hfour leadinG spaces[51;58Hconsecutive tabs[52;50Htabs    in one line[53;46H multibyteCharacter[54;45H  two multiByte characters[55;45H  three mulTibyte characters[56;45H[1m[7mtest93.in [+]                              [54;57H[?12l[?25h[55;57H[?25l[m[50;46H   four leadinG spaces[51;45Htwo[10C   consecutive tabs[52;45Htwo     tabs    in one line[53;45Hone  multibyteCharacter[54;45Ha   two multiByte characters[55;45HA  three mulTibyte characters[55;45H[?12l[?25h[15C[?25l[50;46Hfour leadinG spaces[50;65H[K[51;45H   [10Cconsecutive tabs[51;74H[K[52;45H     tabs    in one line[52;69H[K[53;45H  multibyteCharacter[53;66H[K[54;45H  two multiByte characters[54;72H[K[55;45H  three mulTibyte characters[55;74H[K[55;57H[?12l[?25h[?25l

:[?12l[?25hsplit[?25l[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test93.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test93.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|
test93.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|
test93.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|[m
A  three mulTibyte characters[11C[7m|
test93.in [+]                               [m[1;45H![2;45HTEST[4;45Hrt:[5;45Hmultibyte chAracter[6;45H[7mtest93.in [+]                              [m[7;45HTEST[9;45Hrt:[10;45Hmultibyte chAracter[11;50Hone leaDing tab[12;45H[7mtest93.in [+]                              [m[14;45Hrt:[15;45Hmultibyte chAracter[16;50Hone leaDing tab[17;46Hfour leadinG spaces[18;45H[7mtest93.in [+]                              [m[19;45Hrt:[20;45Hmultibyte chAracter[21;50Hone leaDing tab[22;46Hfour leadinG spaces[23;58Hconsecutive tabs[24;45H[7mtest93.in [+]                              [m[25;45Hmultibyte chAracter[26;50Hone leaDing tab[27;46Hfour leadinG spaces[28;58Hconsecutive tabs[29;50Htabs    in one line[30;45H[7mtest93.in [+]                              [m[31;50Hone leaDing tab[32;46Hfour leadinG spaces[33;58Hconsecutive tabs[34;50Htabs    in one line[35;46H multibyteCharacter[36;45H[7mtest93.in [+]                              [m[37;50Hone leaDing tab[38;46Hfour leadinG spaces[39;58Hconsecutive tabs[40;50Htabs    in one line[41;46H multibyteCharacter[42;45H  two multiByte characters[43;45H[7mtest93.in [+]                              [m[44;58Hconsecutive tabs[45;50Htabs    in one line[46;46H multibyteCharacter[47;45H  two multiByte characters[48;45H  three mulTibyte characters[49;45H[7mtest93.in [+]                              [m[50;58Hconsecutive tabs[51;50Htabs    in one line[52;46H multibyteCharacter[53;45H  two multiByte characters[54;45H  three mulTibyte characters[55;45H[1m[34m~                                          [m[56;45H[1m[7mtest93.in [+]                              [54;57H[?12l[?25h[?25l


[m:[?12l[?25hmksession! test.out[?25l[54;57H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew test.out[?25l"test.out" [57;12H[K[57;12H282 lines, 5375 characters[27m[23m[m[H[2J[1;1H:w! test.out[31C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[4;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|
test93.in [+]                              |[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[10;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[13;9Hone leaDing tab[20C[7m|
test93.in [+]                              |[m
ENDTEST[36C[7m|[16;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[19;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|
test93.in [+]                              |[22;44H|[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[25;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|
test93.in [+]                              |[m
start:[37C[7m|[m
no multibyte chAracter[21C[7m|[m[31;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|
test93.in [+]                              |[m
no multibyte chAracter[21C[7m|[m[37;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|
test93.in [+]                              |[m[43;9Hone leaDing tab[20C[7m|[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|
test93.in [+]                              |[m
    four leadinG spaces[20C[7m|[m
two[13Cconsecutive tabs[11C[7m|[m
two     tabs    in one line[16C[7m|[m
one  multibyteCharacter[19C[7m|[m
a   two multiByte characters[13C[7m|[m
A  three mulTibyte characters[11C[7m|
test93.in [+]                               [m[1;45H![2;45HTEST[4;45Hrt:[5;45Hmultibyte chAracter[6;45H[7mtest93.in [+]                              [m[7;45HTEST[9;45Hrt:[10;45Hmultibyte chAracter[11;50Hone leaDing tab[12;45H[7mtest93.in [+]                              [m[13;45Hrt:[14;45Hmultibyte chAracter[15;50Hone leaDing tab[16;46Hfour leadinG spaces[17;45H[7mtest93.in [+]                              [m[18;45Hrt:[19;45Hmultibyte chAracter[20;50Hone leaDing tab[21;46Hfour leadinG spaces[22;58Hconsecutive tabs[23;45H[7mtest93.in [+]                              [m[24;50Hone leaDing tab[25;46Hfour leadinG spaces[26;58Hconsecutive tabs[27;50Htabs    in one line[28;45H[7mtest93.in [+]                              [m[29;50Hone leaDing tab[30;46Hfour leadinG spaces[31;58Hconsecutive tabs[32;50Htabs    in one line[33;46H multibyteCharacter[34;45H[7mtest93.in [+]                              [m[35;58Hconsecutive tabs[36;50Htabs    in one line[37;46H multibyteCharacter[38;45H  two multiByte characters[39;45H[7mtest93.in [+]                              [m[40;58Hconsecutive tabs[41;50Htabs    in one line[42;46H multibyteCharacter[43;45H  two multiByte characters[44;45H  three mulTibyte characters[45;45H[7mtest93.in [+]                              [m[46;50Htabs    in one line[47;46H multibyteCharacter[48;45H  two multiByte characters[49;45H  three mulTibyte characters[50;45H[7mtest93.in [+]                              [m[51;45Hlet SessionLoad = 1[52;45Hif !&cp | set cp | endif[53;45Hlet s:so_save = &so | let s:siso_save = &si[54;45Hlet v:this_session=expand("<sfile>:p")[55;45Hsilent only[56;45H[1m[7mtest.out                                   [51;45H[?12l[?25h[?25l[57;1H[m:[?12l[?25hv/\(^ *normal! 0\|^ *exe 'normal!\)/d[?25l256 fewer lines[57;17H[K[51;45H  normal! 016|[51;59H[K[52;45H  exe 'normal! ' . s:c . '|zs' . 16 . '|'[53;45H  normal! 016|[53;59H[K[54;45H  exe 'normal! ' . s:c . '|zs' . 16 . '|'[55;45H  normal! 016|[56;54H[1m[7m[+][55;47H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H26 lines, 611 characters written[56;54H[1m[7m    [55;47H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test93 = test61; then \
#	  if diff test.out test93.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test93.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test93.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test94.failed test.ok test.out X* viminfo
cp test94.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test94.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test94.in" 256 lines, 4824 characters[1;1HTest for Visual mode and operators

Tests for the two kinds of operations: Those executed with Visual mode
followed by an operator and those executed via Operator-pending mode. Also
part of the test are mappings, counts, and repetition with the . command.

Test cases:
- Visual modes (v V CTRL-V) followed by an operator; count; repeating
- Visual mode maps; count; repeating
  - Simple
  - With an Ex command (custom text object)
- Operator-pending mode maps
  - Simple
  - With Ex command moving the cursor
  - With Ex command and Visual selection (custom text object)
- Patch 7.3.879: Properly abort Ex command in Operator-pending mode

STARTTEST
:so small.vim
:set enc=utf-8 nocp viminfo+=nviminfo
:
:" User functions
:function MoveToCap()
:  call search('\u', 'W')
:endfunction
:function SelectInCaps()
:  let [line1, col1] = searchpos('\u', 'bcnW')
:  let [line2, col2] = searchpos('.\u', 'nW')
:  call setpos("'<", [0, line1, col1, 0])
:  call setpos("'>", [0, line2, col2, 0])
:  normal! gv
:endfunction
:
:" Visual modes followed by operator
/^apple
lvld.l3vd.:
/^line 1
Vcnewline[34m^[[mj.j2Vd.:
/^xxxx
[34m^V[mjlc  [34m^[[ml.l2[34m^V[mc----[34m^[[ml.:
:
:" Visual mode maps (movement and text object)
:vnoremap W /\u/s-1<CR>
:vnoremap iW :<C-U>call SelectInCaps()<CR>
/^Kiwi
vWcNo[34m^[[ml.fD2vd.:
/^Jambu
llviWc-[34m^[[ml.l2vdl.:
:
:" Operator-pending mode maps (movement and text object)
:onoremap W /\u/<CR>
:onoremap <Leader>W :<C-U>call MoveToCap()<CR>
:onoremap iW :<C-U>call SelectInCaps()<CR>
/^Pineapple
cW-[34m^[[ml.l2.l.:
/^Juniper[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for Visual mode and operators[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[18;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 211 lines, 3837 characters written[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[19;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:-2yank
$vp
:$put ='---'
:
:$put =''
:$put ='v_p: replace last character with line register at last line selecting newline'
:$put ='aaa'
:$put ='bbb'
:$put ='ccc'
:-2yank
$v$p
:$put ='---'
:
:$put =''
:$put ='gv in exclusive select mode after operation'
:$put ='zzz '
:$put ='[34m~C[m¤[34m~C[m '
:set selection=exclusive
kv3lyjv3lpgvcxxx[34m^[[m
:$put ='---'
:
:$put =''
:$put ='gv in exclusive select mode without operation'
:$put ='zzz '
:set selection=exclusive
0v3l[34m^[[mgvcxxx[34m^[[m
:$put ='---'
:/^start:/+2,$w! test.out
:q!
ENDTEST

start:

apple banana cherry

line 1 line 1
line 2 line 2
line 3 line 3
line 4 line 4
line 5 line 5
line 6 line 6

xxxxxxxxxxxxx
xxxxxxxxxxxxx
xxxxxxxxxxxxx
xxxxxxxxxxxxx

KiwiRaspberryDateWatermelonPeach
JambuRambutanBananaTangerineMango

PineappleQuinceLoganberryOrangeGrapefruitKiwiZ
JuniperDurianZ
LemonNectarineZ

zzzz
zzzz[30;1H[?12l[?25h
[?25l[57;1H:so! Xdotest[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset enc=utf-8 nocp viminfo+=nviminfo[?25l[27m[23m[m[H[2J[1;1H:-2yank
$vp
:$put ='---'
:
:$put =''
:$put ='v_p: replace last character with line register at last line selecting newline'
:$put ='aaa'
:$put ='bbb'
:$put ='ccc'
:-2yank
$v$p
:$put ='---'
:
:$put =''
:$put ='gv in exclusive select mode after operation'
:$put ='zzz '
:$put ='Ã¤[17;11HÃ '
:set selection=exclusive
kv3lyjv3lpgvcxxx[34m^[[m
:$put ='---'
:
:$put =''
:$put ='gv in exclusive select mode without operation'
:$put ='zzz '
:set selection=exclusive
0v3l[34m^[[mgvcxxx[34m^[[m
:$put ='---'
:/^start:/+2,$w! test.out
:q!
ENDTEST

start:

apple banana cherry

line 1 line 1
line 2 line 2
line 3 line 3
line 4 line 4
line 5 line 5
line 6 line 6

xxxxxxxxxxxxx
xxxxxxxxxxxxx
xxxxxxxxxxxxx
xxxxxxxxxxxxx

KiwiRaspberryDateWatermelonPeach
JambuRambutanBananaTangerineMango

PineappleQuinceLoganberryOrangeGrapefruitKiwiZ
JuniperDurianZ
LemonNectarineZ

zzzz
zzzz[31;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" User functions[?25l[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction MoveToCap()[?25l
:  [?12l[?25h:  call search('\u', 'W')
[?25l:  [?12l[?25h:endfunction[1;1H[2L[?25l[1;1H:-2yank
$vp[57;1H[K[31;1H[?12l[?25h[?25l[57;1H:[?12l[?25hfunction SelectInCaps()[?25l
:  [?12l[?25h:  let [line1, col1] = searchpos('\u', 'bcnW')
[?25l:  [?12l[?25h:  let [line2, col2] = searchpos('.\u', 'nW')
[?25l:  [?12l[?25h:  call setpos("'<", [0, line1, col1, 0])
[?25l:  [?12l[?25h:  call setpos("'>", [0, line2, col2, 0])
[?25l:  [?12l[?25h:  normal! gv
[?25l:  [?12l[?25h:endfunction[1;1H[6L[?25l[1;1H:-2yank
$vp
:$put ='---'
:
:$put =''
:$put ='v_p: replace last character with line register at last line selecting newline'[57;1H[K[31;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Visual modes followed by operator[?25l[31;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^apple[?25l[34;1H[?12l[?25ha[?25l[57;1H[1m-- VISUAL --[34;2H[?12l[?25h[?25l[m[7mp[?12l[?25h[?25l[mle banana cherry[34;18H[K[57;1H[K[34;2H[?12l[?25h[?25l banana cherry[34;16H[K[34;2H[?12l[?25h [?25l[7mbanan[m[57;1H[1m-- VISUAL --[34;8H[?12l[?25h[?25l[ma  cherry[34;10H[K[57;1H[K[34;3H[?12l[?25h[?25ly[34;4H[K[34;3H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[34;3H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^line 1[?25l[36;1H[?12l[?25h[?25ll[7mine 1 line 1 [m[57;1H[1m-- VISUAL LINE --[36;1H[?12l[?25h[?25l[57;4HINSERT --N[m[57;13H[K[57;1H[K[36;1Hnewline[36;8H[K[36;7H[?12l[?25h[37;7H[?25l[57;1H[1m-- INSERT --[m[57;1H[K[37;1Hnewline[37;8H[K[37;7H[?12l[?25h[38;7H[?25l[7mline 3 line 3 
line 4[m [7mline 4 [m[57;1H[1m-- VISUAL LINE --[39;7H[?12l[?25h[?25l[38;56r[m[38;1H[2M[1;57r[55;1H[1m[34m~                                                                                      [56;1H~                                                                                      [m[57;1H[K[38;1H[?12l[?25h[?25l[38;56r[38;1H[2M[1;57r[55;1H[1m[34m~                                                                                      [56;1H~                                                                                      [38;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h[?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^xxxx[?25l[39;1H[?12l[?25h[?25l[57;1H[1m-- VISUAL BLOCK --[39;1H[?12l[?25h[?25l[m[7mx
[?12l[?25h[?25l[39;2Hx
x[?12l[?25h[?25l[m[57;4H[1mINSERT --O[m[57;13H[K[57;1H[K[39;1H  
  [39;2H[?12l[?25h [?25l[57;1H[1m-- INSERT --[m[57;1H[K[39;3H  
    [39;4H[?12l[?25h [?25l[7mxxxx
[m    [7mxxxx
[mxxxx[7mxxxx
[mxxxx[7mxxx[m[57;1H[1m-- VISUAL BLOCK --[42;8H[?12l[?25h[?25l[57;4HINSERT --O[m[57;13H[K[57;1H[K[39;5H----
    ----
xxxx----
xxxx----[39;8H[?12l[?25h-[?25l[57;1H[1m-- INSERT --[m[57;1H[K[39;9H----[40;9H----[41;9H----[42;9H----[39;12H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[39;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[39;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Visual mode maps (movement and text object)[?25l[39;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hvnoremap W /\u/s-1<CR>[?25l[39;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hvnoremap iW :<C-U>call SelectInCaps()<CR>[?25l[39;12H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^Kiwi[?25l[44;1H[?12l[?25h[?25l[57;1H[1m-- VISUAL --[44;1H[?12l[?25h[?25l[m[57;1H[K[57;1H/\u/s-1[44;1H[7mKiw[?12l[?25h[?25l[m[57;1H[1m-- INSERT --[m[57;1H[K[44;1HNoRaspberryDateWatermelonPeach[44;31H[K[44;2H[?12l[?25ho[?25l[57;1H[1m-- INSERT --[m[57;1H[K[44;3HNoberryDateWatermelonPeach[44;29H[K[44;4H[?12l[?25hoberry[?25l[7mDateWat[m[57;1H[1m-- VISUAL --[44;17H[?12l[?25h[?25l[m[44;10HrmelonPeach[44;21H[K[57;1H[K[44;10H[?12l[?25h[?25lach[44;13H[K[44;10H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[44;10H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^Jambu[?25l[45;1H[?12l[?25hJa[?25l[57;1H[1m-- VISUAL --[45;3H[?12l[?25h[?25l[m[57;1H[K[57;1H:'<,'>[57;2H[K[57;2Hcall SelectInCaps()[45;1H[7mJamb[?12l[?25h[?25l[m[57;1H[1m-- INSERT --[m[57;13H[K[57;1H[K[45;1H-RambutanBananaTangerineMango[45;30H[K[45;1H[?12l[?25h-[?25l[57;1H[1m-- INSERT --[m[57;1H[K[45;2H-tanBananaTangerineMango[45;26H[K[45;2H[?12l[?25h-[?25l[7mtanBanana[m[57;1H[1m-- VISUAL --[45;12H[?12l[?25h[?25l[m--angerineMango[45;16H[K[57;1H[K[45;3H[?12l[?25ha[?25lgo[45;6H[K[45;4H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[45;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[45;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Operator-pending mode maps (movement and text object)[?25l[45;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25honoremap W /\u/<CR>[?25l[45;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25honoremap <Leader>W :<C-U>call MoveToCap()<CR>[?25l[45;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25honoremap iW :<C-U>call SelectInCaps()<CR>[?25l[45;4H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^Pineapple[?25l[47;1H[?12l[?25h[?25l[57;1H[K[57;1H/\u/[57;4H[K[57;1H[57;1H[K[47;1H-QuinceLoganberryOrangeGrapefruitKiwiZ[47;39H[K[47;1H[?12l[?25h-[?25l[57;1H/\u/[57;4H[K[57;1H[1m-- INSERT --[m[57;1H[K[47;2H-LoganberryOrangeGrapefruitKiwiZ[47;34H[K[47;2H[?12l[?25h-[?25l[57;1H/\u/[57;4H[K[57;1H[1m-- INSERT --[m[57;1H[K[47;3H-GrapefruitKiwiZ[47;19H[K[47;3H[?12l[?25h-[?25l[57;1H/\u/[57;4H[K[57;1H[1m-- INSERT --[m[57;1H[K[47;4H-Z[47;6H[K[47;4H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[47;4H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^Juniper[?25l[48;1H[?12l[?25h[?25l[57;1H[K[57;1H:call MoveToCap()[48;1HWhavcre[?12l[?25h[7C[?25l[57;1H[K[57;1H:call MoveToCap()[48;8HQhevna[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[48;8H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^Lemon[?25l[49;1H[?12l[?25h[?25l[57;1H[K[57;1H:call SelectInCaps()[49;1H[?12l[?25h[?25lLemonLemonNectarineZLemo[?12l[?25hn[?25l[57;1H[K[57;1H:call SelectInCaps()[57;1H[K[49;6HNewNectarineZ[49;19H[K[49;8H[?12l[?25hwNecta[?25l[57;1H:call SelectInCaps()[57;1H[K[49;11HwZ[49;13H[K[49;11H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[49;11H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[49;11H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Patch 7.3.879: Properly abort Operator-pending mode for "dv:<Esc>" etc.[?25l[49;11H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^zzzz[?25l[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[51;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[51;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[51;4H[K[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noma | let v:errmsg = ''[?25l[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1m[37m[41mE21: Cannot make changes, 'modifiable' is off[51;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset ma | put = v:errmsg =~# '^E21' ? 'ok' : 'failed'[?25l[52;1Hok[52;3H[K[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[57;1H[K[52;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[57;1H[K[52;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset noma | let v:errmsg = ''[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[57;1H[K[52;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset ma | put = v:errmsg =~# '^E21' ? 'failed' : 'ok'[?25l[53;1Hok[53;3H[K[53;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[53;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[54;1H[K[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='characterwise visual mode: replace last line'[?25l[55;1Hcharacterwise visual mode: replace last line[55;45H[K[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='a'[?25l[56;1Ha[56;2H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet @" = 'x'[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet v:errmsg = ''[?25l[56;1H[?12l[?25h[?25l
[1m-- VISUAL --[m[57;13H[K[56;1H[?12l[?25h[?25l[7ma[?12l[?25h[?25l[mx[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='---'[?25l[1;56r[56;1H
[1;57r[56;1H---[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='v:errmsg='.v:errmsg[?25l[1;56r[56;1H
[1;57r[56;1Hv:errmsg=[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='characterwise visual mode: delete middle line'[?25l[1;56r[56;1H
[1;57r[56;1Hcharacterwise visual mode: delete middle line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='a'[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='b'[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='c'[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[55;1H[54;1H[?25l


[1m-- VISUAL --[54;1H[?12l[?25h[?25l[m[7ma[?12l[?25h[?25l[mb
c
[1m[34m~                                                                                      [m[57;1H[K[54;1H[?12l[?25h
[?25l

:[?12l[?25h$put ='---'[?25l[56;1H---[56;4H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='characterwise visual mode: delete middle two line'[?25l[1;56r[56;1H
[1;57r[56;1Hcharacterwise visual mode: delete middle two line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='a'[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='b'[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='c'[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[55;1H[54;1H[?25l


[1m-- VISUAL --[54;1H[?12l[?25h[?25l[m[7ma 
[?12l[?25h[?25lb[?12l[?25h[?25l[m[54;1Hc[54;2H[K[55;1H[1m[34m~                                                                                      [56;1H~                                                                                      [m[57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h$put ='---'[?25l[55;1H---[55;4H[K[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='characterwise visual mode: delete last line'[?25l[1;56r[56;1H
[1;57r[56;1Hcharacterwise visual mode: delete last line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='a'[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='b'[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='c'[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[?25l
[1m-- VISUAL --[56;1H[?12l[?25h[?25l[m[7mc[?12l[?25h[?25l[m[56;1H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='---'[?25l[1;56r[56;1H
[1;57r[56;1H---[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='characterwise visual mode: delete last two line'[?25l[1;56r[56;1H
[1;57r[56;1Hcharacterwise visual mode: delete last two line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='a'[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='b'[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='c'[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[55;1H[?25l

[1m-- VISUAL --[55;1H[?12l[?25h[?25l[m[7mb 
[?12l[?25h[?25lc[?12l[?25h[?25l[m[55;1H[K[56;1H[1m[34m~                                                                                      [m[57;1H[K[55;1H[?12l[?25h[?25l

:[?12l[?25h$put ='---'[?25l[56;1H---[56;4H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Select mode maps[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsnoremap <lt>End> <End>[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsnoremap <lt>Down> <Down>[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsnoremap <lt>Del> <Del>[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='characterwise select mode: delete middle line'[?25l[1;56r[56;1H
[1;57r[56;1Hcharacterwise select mode: delete middle line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='a'[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='b'[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='c'[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[55;1H[54;1H[?25l


[1m-- SELECT --[54;1H[?12l[?25h[?25l[m[7ma[?12l[?25h[?25l[mb
c
[1m[34m~                                                                                      [m[57;1H[K[54;1H[?12l[?25h
[?25l

:[?12l[?25h$put ='---'[?25l[56;1H---[56;4H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='characterwise select mode: delete middle two line'[?25l[1;56r[56;1H
[1;57r[56;1Hcharacterwise select mode: delete middle two line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='a'[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='b'[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='c'[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[55;1H[54;1H[?25l


[1m-- SELECT --[54;1H[?12l[?25h[?25l[m[7ma 
[?12l[?25h[?25lb[?12l[?25h[?25l[m[54;1Hc[54;2H[K[55;1H[1m[34m~                                                                                      [56;1H~                                                                                      [m[57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h$put ='---'[?25l[55;1H---[55;4H[K[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='characterwise select mode: delete last line'[?25l[1;56r[56;1H
[1;57r[56;1Hcharacterwise select mode: delete last line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='a'[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='b'[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='c'[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[?25l
[1m-- SELECT --[56;1H[?12l[?25h[?25l[m[7mc[?12l[?25h[?25l[m[56;1H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='---'[?25l[1;56r[56;1H
[1;57r[56;1H---[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='characterwise select mode: delete last two line'[?25l[1;56r[56;1H
[1;57r[56;1Hcharacterwise select mode: delete last two line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='a'[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='b'[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='c'[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[55;1H[?25l

[1m-- SELECT --[55;1H[?12l[?25h[?25l[m[7mb 
[?12l[?25h[?25lc[?12l[?25h[?25l[m[55;1H[K[56;1H[1m[34m~                                                                                      [m[57;1H[K[55;1H[?12l[?25h[?25l

:[?12l[?25h$put ='---'[?25l[56;1H---[56;4H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='linewise select mode: delete middle line'[?25l[1;56r[56;1H
[1;57r[56;1Hlinewise select mode: delete middle line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='a'[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='b'[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='c'[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[55;1H[54;1H[?25la[7m [m


[1m-- SELECT LINE --[54;1H[?12l[?25h[?25l[mb[54;2H[K[55;1Hc
[1m[34m~                                                                                      [m[57;1H[K[54;1H[?12l[?25h
[?25l

:[?12l[?25h$put ='---'[?25l[56;1H---[56;4H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='linewise select mode: delete middle two line'[?25l[1;56r[56;1H
[1;57r[56;1Hlinewise select mode: delete middle two line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='a'[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='b'[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='c'[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[55;1H[54;1H[?25la[7m [m


[1m-- SELECT LINE --[54;1H[?12l[?25h[?25l[m[7ma
[mb[7m [?12l[?25h[?25l[m[54;1Hc[54;2H[K[55;1H[1m[34m~                                                                                      [56;1H~                                                                                      [m[57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h$put ='---'[?25l[55;1H---[55;4H[K[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='linewise select mode: delete last line'[?25l[1;56r[56;1H
[1;57r[56;1Hlinewise select mode: delete last line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='a'[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='b'[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='c'[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[?25lc[7m [m
[1m-- SELECT LINE --[56;1H[?12l[?25h[?25l[m[1m[34m~                                                                                      [m[57;1H[K[55;1H[?12l[?25h[?25l

:[?12l[?25h$put ='---'[?25l[56;1H---[56;4H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='linewise select mode: delete last two line'[?25l[1;56r[56;1H
[1;57r[56;1Hlinewise select mode: delete last two line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='a'[?25l[1;56r[56;1H
[1;57r[56;1Ha[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='b'[?25l[1;56r[56;1H
[1;57r[56;1Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='c'[?25l[1;56r[56;1H
[1;57r[56;1Hc[57;1H[K[56;1H[?12l[?25h[55;1H[?25lb[7m [m

[1m-- SELECT LINE --[55;1H[?12l[?25h[?25l[m[7mb
[mc[7m [?12l[?25h[?25l[m[55;1H[1m[34m~                                                                                      [56;1H~                                                                                      [m[57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h$put ='---'[?25l[55;1H---[55;4H[K[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='v_p: replace last character with line register at middle line'[?25l[1;56r[56;1H
[1;57r[56;1Hv_p: replace last character with line register at middle line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='aaa'[?25l[1;56r[56;1H
[1;57r[56;1Haaa[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='bbb'[?25l[1;56r[56;1H
[1;57r[56;1Hbbb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='ccc'[?25l[1;56r[56;1H
[1;57r[56;1Hccc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h-2yank[?25l[56;1H[?12l[?25h[55;1Hbb[?25l

[1m-- VISUAL --[55;3H[?12l[?25h[?25l[m[55;3H[K[56;1Haaa[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='---'[?25l[1;56r[1;1H[2M[1;57r[55;1Hccc
---[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='v_p: replace last character with line register at middle line selecting newlin
[56;87He[57;1H'[?25l[1;1H[L[1;1Hb[2;1H[K[3;1H---[4;1H[K[5;1Hcharacterwise visual mode: delete last two line
a[6;2H[K[7;1H[K[8;1H---[9;1H[K[10;1Hcharacterwise select mode: delete middle line
b[11;2H[K[12;1Hc
---[14;1H[K[15;1Hcharacterwise select mode: delete middle two line[16;2H[K[17;1H---[18;1H[K[19;1Hcharacterwise select mode: delete last line
a[20;2H[K[21;1Hb[22;1H[K[23;1H---[24;1H[K[25;1Hcharacterwise select mode: delete last two line
a[26;2H[K[27;1H[K[28;1H---[29;1H[K[30;1Hlinewise select mode: delete middle line
b[31;2H[K[32;1Hc
---[34;1H[K[35;1Hlinewise select mode: delete middle two line
c[36;2H[K[37;1H---[38;1H[K[39;1Hlinewise select mode: delete last line
a[40;2H[K[41;1Hb
---[43;1H[K[44;1Hlinewise select mode: delete last two line
a[45;2H[K[46;1H---[47;1H[K[48;1Hv_p: replace last character with line register at middle line
aaa[49;4H[K[50;1Hbb[50;3H[K[51;1Haaa[52;1H[K[53;1Hccc
---[55;1H[K[56;1Hv_p: replace last character with line register at middle line selecting newline[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='aaa'[?25l[1;56r[56;1H
[1;57r[56;1Haaa[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='bbb'[?25l[1;56r[56;1H
[1;57r[56;1Hbbb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='ccc'[?25l[1;56r[56;1H
[1;57r[56;1Hccc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h-2yank[?25l[56;1H[?12l[?25h[55;1Hbb[?25l

[1m-- VISUAL --[55;3H[?12l[?25h[?25l[m[7mb[?12l[?25h[?25l[m[55;3H[K[56;1Haaa[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hccc[?12l[?25h[?25l
:[?12l[?25h$put ='---'[?25l[1;56r[56;1H
[1;57r[56;1H---[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='v_p: replace last character with line register at last line'[?25l[1;56r[56;1H
[1;57r[56;1Hv_p: replace last character with line register at last line[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='aaa'[?25l[1;56r[56;1H
[1;57r[56;1Haaa[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='bbb'[?25l[1;56r[56;1H
[1;57r[56;1Hbbb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='ccc'[?25l[1;56r[56;1H
[1;57r[56;1Hccc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h-2yank[?25l[56;1H[?12l[?25hcc[?25l
[1m-- VISUAL --[56;3H[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;3H[K[56;1Haaa[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='---'[?25l[1;56r[56;1H
[1;57r[56;1H---[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='v_p: replace last character with line register at last line selecting newline'[?25l[1;56r[56;1H
[1;57r[56;1Hv_p: replace last character with line register at last line selecting newline[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='aaa'[?25l[1;56r[56;1H
[1;57r[56;1Haaa[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='bbb'[?25l[1;56r[56;1H
[1;57r[56;1Hbbb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='ccc'[?25l[1;56r[56;1H
[1;57r[56;1Hccc[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h-2yank[?25l[56;1H[?12l[?25hcc[?25l
[1m-- VISUAL --[56;3H[?12l[?25h[?25l[m[7mc[?12l[?25h[?25l[1;56r[m[56;1H
[1;57r[55;3H[K[56;1Haaa[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='---'[?25l[1;56r[56;1H
[1;57r[56;1H---[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='gv in exclusive select mode after operation'[?25l[1;56r[56;1H
[1;57r[56;1Hgv in exclusive select mode after operation[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='zzz '[?25l[1;56r[56;1H
[1;57r[56;1Hzzz[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='Ã¤[57;11HÃ '[?25l[1;56r[56;1H
[1;57r[56;1HÃ¤[56;3HÃ[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset selection=exclusive[?25l[56;1H[?12l[?25h[55;1H[?25l

[1m-- VISUAL --[m[57;13H[K[55;1H[?12l[?25h[?25l[7mzzz[?12l[?25h[?25l[mzzz[57;1H[K[55;1H[?12l[?25h
[?25l
[1m-- VISUAL --[56;1H[?12l[?25h[?25l[m[7mÃ¤[56;3HÃ[?12l[?25h[?25l[mzzz[57;1H[K[56;3H[?12l[?25h[?25l
[1m-- VISUAL --[m[56;1H[7mzzz[?12l[?25h[?25l[m[57;4H[1mINSERT [m[57;1H[K[56;1Hxxx[?12l[?25h[?25l
:[?12l[?25h$put ='---'[?25l[1;56r[56;1H
[1;57r[56;1H---[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='gv in exclusive select mode without operation'[?25l[1;56r[56;1H
[1;57r[56;1Hgv in exclusive select mode without operation[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put ='zzz '[?25l[1;56r[56;1H
[1;57r[56;1Hzzz[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset selection=exclusive[?25l[56;1H[?12l[?25h[?25l
[1m-- VISUAL --[m[57;13H[K[56;1H[?12l[?25h[?25l[7mzzz[?12l[?25h[?25l[mzzz[57;1H[K[56;4H[?12l[?25h[?25l
[1m-- VISUAL --[m[56;1H[7mzzz[?12l[?25h[?25l[m[57;4H[1mINSERT [m[57;1H[K[56;1Hxxx[?12l[?25h[?25l
:[?12l[?25h$put ='---'[?25l[1;56r[56;1H
[1;57r[56;1H---[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h/^start:/+2,$w! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New] 123L, 1328C written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hq![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test94 = test61; then \
#	  if diff test.out test94.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test94.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test94.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test95.failed test.ok test.out X* viminfo
cp test95.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test95.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test95.in" 141 lines, 5827 characters[1;1HTest for regexp patterns with multi-byte support, using utf-8.
See test64 for the non-multi-byte tests.

A pattern that gives the expected result produces OK, so that we know it was
actually tried.

STARTTEST
:so small.vim
:so mbyte.vim
:set nocp encoding=utf-8 viminfo+=nviminfo nomore
:" tl is a List of Lists with:
:"    2: test auto/old/new  0: test auto/old  1: test auto/new
:"    regexp pattern
:"    text to test the pattern on
:"    expected match (optional)
:"    expected submatch 1 (optional)
:"    expected submatch 2 (optional)
:"    etc.
:"  When there is no match use only the first two items.
:let tl = []
:
:"""" Multi-byte character tests. These will fail unless vim is compiled
:"""" with Multibyte (FEAT_MBYTE) or BIG/HUGE features.
:call add(tl, [2, '[[:alpha:][=a=]]\+', '879 aiaãâaiuvna ', 'aiaãâaiuvna'])
:call add(tl, [2, '[[=a=]]\+', 'ddaãâbcd', 'aãâ'])[32C  [26;1H [24C" equivalence classes
:call add(tl, [2, '[^ม ]\+', 'มม oijasoifjos ifjoisj f osij j มมมมม abcc[28;1Hd', 'oijasoifjos'])
:call add(tl, [2, ' [^ ]\+', 'start มabcdม ', ' มabcdม'])
:call add(tl, [2, '[ม[:alpha:][=a=]]\+', '879 aiaãมâมaiuvna ', 'aiaãมâมaii[31;1Huvna'])
:
:" this is not a normal "i" but 0xec
:call add(tl, [2, '\p\+', 'ìa', 'ìa'])
:call add(tl, [2, '\p*', 'a[34m~A~B[m', 'a[34m~A~B[m'])
:
:"""" Test recognition of some character classes
:call add(tl, [2, '\i\+', '&*¨xx ', 'xx'])
:call add(tl, [2, '\f\+', '&*[34m~_[mfname ', 'fname'])
:
:"""" Test composing character matching
:call add(tl, [2, '.ม', 'xม[34m~H[mx yมy', 'yม'])
:call add(tl, [2, '.ม[34m~H[m', 'xม[34m~H[mx yมy', 'xม[34m~H[m'])
:call add(tl, [2, "\u05b9", " x\u05b9 ", "x\u05b9"])
:call add(tl, [2, ".\u05b9", " x\u05b9 ", "x\u05b9"])
:call add(tl, [2, "\u05b9\u05bb", " x\u05b9\u05bb ", "x\u05b9\u05bb"])
:call add(tl, [2, ".\u05b9\u05bb", " x\u05b9\u05bb ", "x\u05b9\u05bb"])
:call add(tl, [2, "\u05bb\u05b9", " x\u05b9\u05bb ", "x\u05b9\u05bb"])
:call add(tl, [2, ".\u05bb\u05b9", " x\u05b9\u05bb ", "x\u05b9\u05bb"])
:call add(tl, [2, "\u05b9", " y\u05bb x\u05b9 ", "x\u05b9"])
:call add(tl, [2, ".\u05b9", " y\u05bb x\u05b9 ", "x\u05b9"])
:call add(tl, [2, "\u05b9", " y\u05bb\u05b9 x\u05b9 ", "y\u05bb\u05b9"])
:call add(tl, [2, ".\u05b9", " y\u05bb\u05b9 x\u05b9 ", "y\u05bb\u05b9"])
:call add(tl, [1, "\u05b9\u05bb", " y\u05b9 x\u05b9\u05bb ", "x\u05b9\u05bb"])
:call add(tl, [2, ".\u05b9\u05bb", " y\u05bb x\u05b9\u05bb ", "x\u05b9\u05bb"])
:call add(tl, [2, "a", "ca\u0300t"])[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for regexp patterns with multi-byte support, using utf-8.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[7;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 131 lines, 5590 characters written[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[8;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:    if engine == 2 && re == 0 || engine == 1 && re == 1
:      continue
:    endif
:    let &regexpengine = engine
:    try
:      let l = matchlist(text, pat)
:    catch
:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\", causee[9;1Hd an exception: \"' . v:exception . '\"'
:    endtry
:" check the match itself
:    if len(l) == 0 && len(t) > matchidx
:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\", did nn[14;1Hot match, expected: \"' . t[matchidx] . '\"'
:    elseif len(l) > 0 && len(t) == matchidx
:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\", matchh[17;1H: \"' . l[0] . '\", expected no match'
:    elseif len(t) > matchidx && l[0] != t[matchidx]
:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\", matchh[20;1H: \"' . l[0] . '\", expected: \"' . t[matchidx] . '\"'
:    else
:      $put ='OK ' . engine . ' - ' . pat
:    endif
:    if len(l) > 0
:"   check all the nine submatches
:      for i in range(1, 9)
:[8Cif len(t) <= matchidx + i
:[10Clet e = ''
:[8Celse
:[10Clet e = t[matchidx + i]
:[8Cendif
:[8Cif l[i] != e
:[10C$put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\", ss[34;1Hubmatch ' . i . ': \"' . l[i] . '\", expected: \"' . e . '\"'
:[8Cendif
:      endfor
:      unlet i
:    endif
:  endfor
:endfor
:unlet t tl e l
:
:" check that 'ambiwidth' does not change the meaning of \p
:set regexpengine=1 ambiwidth=single
:$put ='eng 1 ambi single: ' . match(\"\u00EC\", '\p')
:set regexpengine=1 ambiwidth=double
:$put ='eng 1 ambi double: ' . match(\"\u00EC\", '\p')
:set regexpengine=2 ambiwidth=single
:$put ='eng 2 ambi single: ' . match(\"\u00EC\", '\p')
:set regexpengine=2 ambiwidth=double
:$put ='eng 2 ambi double: ' . match(\"\u00EC\", '\p')
:
:/\%#=1^Results/,$wq! test.out
ENDTEST

Results of test95:[54;1H[?12l[?25h
[?25l

:so! Xdotest[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocp encoding=utf-8 viminfo+=nviminfo nomore[?25l[27m[23m[m[H[2J[1;1H:    if engine == 2 && re == 0 || engine == 1 && re == 1
:      continue
:    endif
:    let &regexpengine = engine
:    try
:      let l = matchlist(text, pat)
:    catch
:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\", causee[9;1Hd an exception: \"' . v:exception . '\"'
:    endtry
:" check the match itself
:    if len(l) == 0 && len(t) > matchidx
:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\", did nn[14;1Hot match, expected: \"' . t[matchidx] . '\"'
:    elseif len(l) > 0 && len(t) == matchidx
:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\", matchh[17;1H: \"' . l[0] . '\", expected no match'
:    elseif len(t) > matchidx && l[0] != t[matchidx]
:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\", matchh[20;1H: \"' . l[0] . '\", expected: \"' . t[matchidx] . '\"'
:    else
:      $put ='OK ' . engine . ' - ' . pat
:    endif
:    if len(l) > 0
:"   check all the nine submatches
:      for i in range(1, 9)
:[8Cif len(t) <= matchidx + i
:[10Clet e = ''
:[8Celse
:[10Clet e = t[matchidx + i]
:[8Cendif
:[8Cif l[i] != e
:[10C$put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\", ss[34;1Hubmatch ' . i . ': \"' . l[i] . '\", expected: \"' . e . '\"'
:[8Cendif
:      endfor
:      unlet i
:    endif
:  endfor
:endfor
:unlet t tl e l
:
:" check that 'ambiwidth' does not change the meaning of \p
:set regexpengine=1 ambiwidth=single
:$put ='eng 1 ambi single: ' . match(\"\u00EC\", '\p')
:set regexpengine=1 ambiwidth=double
:$put ='eng 1 ambi double: ' . match(\"\u00EC\", '\p')
:set regexpengine=2 ambiwidth=single
:$put ='eng 2 ambi single: ' . match(\"\u00EC\", '\p')
:set regexpengine=2 ambiwidth=double
:$put ='eng 2 ambi double: ' . match(\"\u00EC\", '\p')
:
:/\%#=1^Results/,$wq! test.out
ENDTEST

Results of test95:[55;1H[?12l[?25h[?25l

:[?12l[?25h" tl is a List of Lists with:[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    2: test auto/old/new  0: test auto/old  1: test auto/new[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    regexp pattern[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    text to test the pattern on[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    expected match (optional)[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    expected submatch 1 (optional)[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    expected submatch 2 (optional)[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"    etc.[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"  When there is no match use only the first two items.[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet tl = [][?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Multi-byte character tests. These will fail unless vim is compiled[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" with Multibyte (FEAT_MBYTE) or BIG/HUGE features.[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[[:alpha:][=a=]]\+', '879 aiaãâaiuvna ', 'aiaãâaiuvna'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[[=a=]]\+', 'ddaãâbcd', 'aãâ'])[34m^I^I^I^I^I^I^I^I[m" equivalence classe
[56;87Hs[57;1H[?25l[1;1H[L[1;1H:    if engine == 2 && re == 0 || engine == 1 && re == 1[57;1H[K[55;1H[?12l[?25h[?25l

:[?12l[?25hcall add(tl, [2, '[^ม ]\+', 'มม oijasoifjos ifjoisj f osij j มมมมม abcd', 'oijasoifjo
[56;87Hs[57;1H'])[?25l[1;1H[L[1;1H:    if engine == 2 && re == 0 || engine == 1 && re == 1[57;1H[K[55;1H[?12l[?25h[?25l

:[?12l[?25hcall add(tl, [2, ' [^ ]\+', 'start มabcdม ', ' มabcdม'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[ม[:alpha:][=a=]]\+', '879 aiaãมâมaiuvna ', 'aiaãมâมaiuvna'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" this is not a normal "i" but 0xec[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\p\+', 'ì[57;29Ha', 'ì[57;35Ha'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\p*', 'aあ', 'aあ'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Test recognition of some character classes[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\i\+', '&*¨[57;31Hxx ', 'xx'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '\f\+', '&*[34m<9f>[mfname ', 'fname'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Test composing character matching[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '.ม', 'xมม่x yมy', 'yม'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '.มม่', 'xมม่x yมy', 'xมม่'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "\u05b9", " x\u05b9 ", "x\u05b9"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, ".\u05b9", " x\u05b9 ", "x\u05b9"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "\u05b9\u05bb", " x\u05b9\u05bb ", "x\u05b9\u05bb"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, ".\u05b9\u05bb", " x\u05b9\u05bb ", "x\u05b9\u05bb"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "\u05bb\u05b9", " x\u05b9\u05bb ", "x\u05b9\u05bb"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, ".\u05bb\u05b9", " x\u05b9\u05bb ", "x\u05b9\u05bb"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "\u05b9", " y\u05bb x\u05b9 ", "x\u05b9"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, ".\u05b9", " y\u05bb x\u05b9 ", "x\u05b9"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "\u05b9", " y\u05bb\u05b9 x\u05b9 ", "y\u05bb\u05b9"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, ".\u05b9", " y\u05bb\u05b9 x\u05b9 ", "y\u05bb\u05b9"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [1, "\u05b9\u05bb", " y\u05b9 x\u05b9\u05bb ", "x\u05b9\u05bb"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, ".\u05b9\u05bb", " y\u05bb x\u05b9\u05bb ", "x\u05b9\u05bb"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "a", "ca\u0300t"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "ca", "ca\u0300t"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "a\u0300", "ca\u0300t", "a\u0300"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'a\%C', "ca\u0300t", "a\u0300"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'ca\%C', "ca\u0300t", "ca\u0300"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'ca\%Ct', "ca\u0300t", "ca\u0300t"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Test \Z[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'ú[57;21H\Z', 'x'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'יהוה\Z', 'יהוה', 'יהוה'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'ייְהווָה\Z', 'יהוה', 'יהוה'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'יהוה\Z', 'ייְהווָה', 'ייְהווָה'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'ייְהווָה\Z', 'ייְהווָה', 'ייְהווָה'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, 'ייְ\Z', 'ווְייַ', 'ייַ'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "ק\u200d\u05b9x\\Z", "xק\u200d\u05b9xy", "ק\u200d\u05b9x"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "ק\u200d\u05b9x\\Z", "xק\u200dxy", "ק\u200dx"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "ק\u200dx\\Z", "xק\u200d\u05b9xy", "ק\u200d\u05b9x"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "ק\u200dx\\Z", "xק\u200dxy", "ק\u200dx"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "\u05b9\\Z", "xyz"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "\\Z\u05b9", "xyz"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "\u05b9\\Z", "xy\u05b9z", "y\u05b9"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, "\\Z\u05b9", "xy\u05b9z", "y\u05b9"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [1, "\u05b9\\+\\Z", "xy\u05b9z\u05b9 ", "y\u05b9z\u05b9"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [1, "\\Z\u05b9\\+", "xy\u05b9z\u05b9 ", "y\u05b9z\u05b9"])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Combining different tests and features[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tl, [2, '[^[=a=]]\+', 'ddaãâbcd', 'dd'])[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"""" Run the tests[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor t in tl[?25l
:  [?12l[?25h:  let re = t[0]
[?25l:  [?12l[?25h:  let pat = t[1]
[?25l:  [?12l[?25h:  let text = t[2]
[?25l:  [?12l[?25h:  let matchidx = 3
[?25l:  [?12l[?25h:  for engine in [0, 1, 2]
[?25l:    [?12l[?25h:    if engine == 2 && re == 0 || engine == 1 && re == 1
[?25l:      [?12l[?25h:      continue
[?25l:      [?12l[?25h:    endif
[?25l:    [?12l[?25h:    let &regexpengine = engine
[?25l:    [?12l[?25h:    try
[?25l:      [?12l[?25h:      let l = matchlist(text, pat)
[?25l:      [?12l[?25h:    catch
[?25l:      [?12l[?25h:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\
[56;87H"[57;1H, caused an exception: \"' . v:exception . '\"'
[?25l:      [?12l[?25h:    endtry
[?25l:    [?12l[?25h:" check the match itself
[?25l:    [?12l[?25h:    if len(l) == 0 && len(t) > matchidx
[?25l:      [?12l[?25h:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\
[56;87H"[57;1H, did not match, expected: \"' . t[matchidx] . '\"'
[?25l:      [?12l[?25h:    elseif len(l) > 0 && len(t) == matchidx
[?25l:      [?12l[?25h:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\
[56;87H"[57;1H, match: \"' . l[0] . '\", expected no match'
[?25l:      [?12l[?25h:    elseif len(t) > matchidx && l[0] != t[matchidx]
[?25l:      [?12l[?25h:      $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . text . '\
[56;87H"[57;1H, match: \"' . l[0] . '\", expected: \"' . t[matchidx] . '\"'
[?25l:      [?12l[?25h:    else
[?25l:      [?12l[?25h:      $put ='OK ' . engine . ' - ' . pat
[?25l:      [?12l[?25h:    endif
[?25l:    [?12l[?25h:    if len(l) > 0
[?25l:      [?12l[?25h:"   check all the nine submatches
[?25l:      [?12l[?25h:      for i in range(1, 9)
[?25l:[8C[?12l[?25h:        if len(t) <= matchidx + i
[?25l:[10C[?12l[?25h:          let e = ''
[?25l:[10C[?12l[?25h:        else
[?25l:[10C[?12l[?25h:          let e = t[matchidx + i]
[?25l:[10C[?12l[?25h:        endif
[?25l:[8C[?12l[?25h:        if l[i] != e
[?25l:[10C[?12l[?25h:          $put ='ERROR ' . engine . ': pat: \"' . pat . '\", text: \"' . t
[56;87He[57;1Hxt . '\", submatch ' . i . ': \"' . l[i] . '\", expected: \"' . e . '\"'
[?25l:[10C[?12l[?25h:        endif
[?25l:[8C[?12l[?25h:      endfor
[?25l:      [?12l[?25h:      unlet i
[?25l:      [?12l[?25h:    endif
[?25l:    [?12l[?25h:  endfor
[?25l:  [?12l[?25h:endfor[1;1H[45L[?25l[1;1HOK 2 - a\%C
OK 0 - ca\%C
OK 1 - ca\%C
OK 2 - ca\%C
OK 0 - ca\%Ct
OK 1 - ca\%Ct
OK 2 - ca\%Ct
OK 0 - ú[8;9H\Z
OK 1 - ú[9;9H\Z
OK 2 - ú[10;9H\Z
OK 0 - יהוה\Z
OK 1 - יהוה\Z
OK 2 - יהוה\Z
OK 0 - יְהוָה\Z
OK 1 - יְהוָה\Z
OK 2 - יְהוָה\Z
OK 0 - יהוה\Z
OK 1 - יהוה\Z
OK 2 - יהוה\Z
OK 0 - יְהוָה\Z
OK 1 - יְהוָה\Z
OK 2 - יְהוָה\Z
OK 0 - יְ\Z
OK 1 - יְ\Z
OK 2 - יְ\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ֹ\Z
OK 1 - ֹ\Z
OK 2 - ֹ\Z
OK 0 - \Zֹ
OK 1 - \Zֹ
OK 2 - \Zֹ
OK 0 - ֹ\Z
OK 1 - ֹ\Z
OK 2 - ֹ\Z[46;10H[K[47;1HOK 0 - \Zֹ[47;10H[K[48;1HOK 1 - \Zֹ[48;10H[K[49;1HOK 2 - \Zֹ[49;10H[K[50;1HOK 0 - ֹ\+\Z[50;12H[K[51;1HOK 2 - ֹ\+\Z[51;13H[K[52;1HOK 0 - \Zֹ\+
OK 2 - \Zֹ\+[53;12H[K[54;1HOK 0 - [^[=a=]]\+
OK 1 - [^[=a=]]\+
OK 2 - [^[=a=]]\+[56;18H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet t tl e l[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" check that 'ambiwidth' does not change the meaning of \p[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset regexpengine=1 ambiwidth=single[?25l[27m[23m[m[H[2J[1;1HOK 2 - a\%C
OK 0 - ca\%C
OK 1 - ca\%C
OK 2 - ca\%C
OK 0 - ca\%Ct
OK 1 - ca\%Ct
OK 2 - ca\%Ct
OK 0 - ú[8;9H\Z
OK 1 - ú[9;9H\Z
OK 2 - ú[10;9H\Z
OK 0 - יהוה\Z
OK 1 - יהוה\Z
OK 2 - יהוה\Z
OK 0 - יְהוָה\Z
OK 1 - יְהוָה\Z
OK 2 - יְהוָה\Z
OK 0 - יהוה\Z
OK 1 - יהוה\Z
OK 2 - יהוה\Z
OK 0 - יְהוָה\Z
OK 1 - יְהוָה\Z
OK 2 - יְהוָה\Z
OK 0 - יְ\Z
OK 1 - יְ\Z
OK 2 - יְ\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ֹ\Z
OK 1 - ֹ\Z
OK 2 - ֹ\Z
OK 0 - \Zֹ
OK 1 - \Zֹ
OK 2 - \Zֹ
OK 0 - ֹ\Z
OK 1 - ֹ\Z
OK 2 - ֹ\Z
OK 0 - \Zֹ
OK 1 - \Zֹ
OK 2 - \Zֹ
OK 0 - ֹ\+\Z
OK 2 - ֹ\+\Z
OK 0 - \Zֹ\+
OK 2 - \Zֹ\+
OK 0 - [^[=a=]]\+
OK 1 - [^[=a=]]\+
OK 2 - [^[=a=]]\+[?12l[?25h[?25l
:[?12l[?25h$put ='eng 1 ambi single: ' . match(\"\u00EC\", '\p')[?25l[1;56r[56;1H
[1;57r[56;1Heng 1 ambi single: 0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset regexpengine=1 ambiwidth=double[?25l[27m[23m[m[H[2J[1;1HOK 0 - ca\%C
OK 1 - ca\%C
OK 2 - ca\%C
OK 0 - ca\%Ct
OK 1 - ca\%Ct
OK 2 - ca\%Ct
OK 0 - ú[7;10H\Z
OK 1 - ú[8;10H\Z
OK 2 - ú[9;10H\Z
OK 0 - יהוה\Z
OK 1 - יהוה\Z
OK 2 - יהוה\Z
OK 0 - יְהוָה\Z
OK 1 - יְהוָה\Z
OK 2 - יְהוָה\Z
OK 0 - יהוה\Z
OK 1 - יהוה\Z
OK 2 - יהוה\Z
OK 0 - יְהוָה\Z
OK 1 - יְהוָה\Z
OK 2 - יְהוָה\Z
OK 0 - יְ\Z
OK 1 - יְ\Z
OK 2 - יְ\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ֹ\Z
OK 1 - ֹ\Z
OK 2 - ֹ\Z
OK 0 - \Zֹ
OK 1 - \Zֹ
OK 2 - \Zֹ
OK 0 - ֹ\Z
OK 1 - ֹ\Z
OK 2 - ֹ\Z
OK 0 - \Zֹ
OK 1 - \Zֹ
OK 2 - \Zֹ
OK 0 - ֹ\+\Z
OK 2 - ֹ\+\Z
OK 0 - \Zֹ\+
OK 2 - \Zֹ\+
OK 0 - [^[=a=]]\+
OK 1 - [^[=a=]]\+
OK 2 - [^[=a=]]\+
eng 1 ambi single: 0[?12l[?25h[?25l
:[?12l[?25h$put ='eng 1 ambi double: ' . match(\"\u00EC\", '\p')[?25l[1;56r[56;1H
[1;57r[56;1Heng 1 ambi double: 0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset regexpengine=2 ambiwidth=single[?25l[27m[23m[m[H[2J[1;1HOK 1 - ca\%C
OK 2 - ca\%C
OK 0 - ca\%Ct
OK 1 - ca\%Ct
OK 2 - ca\%Ct
OK 0 - ú[6;9H\Z
OK 1 - ú[7;9H\Z
OK 2 - ú[8;9H\Z
OK 0 - יהוה\Z
OK 1 - יהוה\Z
OK 2 - יהוה\Z
OK 0 - יְהוָה\Z
OK 1 - יְהוָה\Z
OK 2 - יְהוָה\Z
OK 0 - יהוה\Z
OK 1 - יהוה\Z
OK 2 - יהוה\Z
OK 0 - יְהוָה\Z
OK 1 - יְהוָה\Z
OK 2 - יְהוָה\Z
OK 0 - יְ\Z
OK 1 - יְ\Z
OK 2 - יְ\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ֹ\Z
OK 1 - ֹ\Z
OK 2 - ֹ\Z
OK 0 - \Zֹ
OK 1 - \Zֹ
OK 2 - \Zֹ
OK 0 - ֹ\Z
OK 1 - ֹ\Z
OK 2 - ֹ\Z
OK 0 - \Zֹ
OK 1 - \Zֹ
OK 2 - \Zֹ
OK 0 - ֹ\+\Z
OK 2 - ֹ\+\Z
OK 0 - \Zֹ\+
OK 2 - \Zֹ\+
OK 0 - [^[=a=]]\+
OK 1 - [^[=a=]]\+
OK 2 - [^[=a=]]\+
eng 1 ambi single: 0
eng 1 ambi double: 0[?12l[?25h[?25l
:[?12l[?25h$put ='eng 2 ambi single: ' . match(\"\u00EC\", '\p')[?25l[1;56r[56;1H
[1;57r[56;1Heng 2 ambi single: 0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset regexpengine=2 ambiwidth=double[?25l[27m[23m[m[H[2J[1;1HOK 2 - ca\%C
OK 0 - ca\%Ct
OK 1 - ca\%Ct
OK 2 - ca\%Ct
OK 0 - ú[5;10H\Z
OK 1 - ú[6;10H\Z
OK 2 - ú[7;10H\Z
OK 0 - יהוה\Z
OK 1 - יהוה\Z
OK 2 - יהוה\Z
OK 0 - יְהוָה\Z
OK 1 - יְהוָה\Z
OK 2 - יְהוָה\Z
OK 0 - יהוה\Z
OK 1 - יהוה\Z
OK 2 - יהוה\Z
OK 0 - יְהוָה\Z
OK 1 - יְהוָה\Z
OK 2 - יְהוָה\Z
OK 0 - יְ\Z
OK 1 - יְ\Z
OK 2 - יְ\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ק[34m<200d>[mx\Z
OK 1 - ק[34m<200d>[mx\Z
OK 2 - ק[34m<200d>[mx\Z
OK 0 - ֹ\Z
OK 1 - ֹ\Z
OK 2 - ֹ\Z
OK 0 - \Zֹ
OK 1 - \Zֹ
OK 2 - \Zֹ
OK 0 - ֹ\Z
OK 1 - ֹ\Z
OK 2 - ֹ\Z
OK 0 - \Zֹ
OK 1 - \Zֹ
OK 2 - \Zֹ
OK 0 - ֹ\+\Z
OK 2 - ֹ\+\Z
OK 0 - \Zֹ\+
OK 2 - \Zֹ\+
OK 0 - [^[=a=]]\+
OK 1 - [^[=a=]]\+
OK 2 - [^[=a=]]\+
eng 1 ambi single: 0
eng 1 ambi double: 0
eng 2 ambi single: 0[?12l[?25h[?25l
:[?12l[?25h$put ='eng 2 ambi double: ' . match(\"\u00EC\", '\p')[?25l[1;56r[56;1H
[1;57r[56;1Heng 2 ambi double: 0[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/\%#=1^Results/,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New] 140L, 2022C written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test95 = test61; then \
#	  if diff test.out test95.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test95.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test95.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test98.failed test.ok test.out X* viminfo
cp test98.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test98.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test98.in" 43 lines, 908 characters[1;1HTest for 'scrollbind' causing an unexpected scroll of one of the windows.
STARTTEST
:so small.vim
:" We don't want the status line to cause problems:
:set laststatus=0
:let g:totalLines = &lines * 20
:let middle = g:totalLines / 2
:wincmd n
:wincmd o
:for i in range(1, g:totalLines)
:    call setline(i, 'LINE ' . i)
:endfor
:exe string(middle)
:normal zt
:normal M
:aboveleft vert new
:for i in range(1, g:totalLines)
:    call setline(i, 'line ' . i)
:endfor
:exe string(middle)
:normal zt
:normal M
:" Execute the following two command at once to reproduce the problem.
:setl scb | wincmd p
:setl scb
:wincmd w
:let topLineLeft = line('w0')
:wincmd p
:let topLineRight = line('w0')
:setl noscrollbind
:wincmd p
:setl noscrollbind
:q!
:%del _
:call setline(1, 'Difference between the top lines (left - right): ' . string(topLineLee[36;1Hft - topLineRight))
:w! test.out
:brewind
ENDTEST

STARTTEST
:qa!
ENDTEST

[1m[34m~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for 'scrollbind' causing an unexpected scroll of one of the windows.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[2;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 35 lines, 791 characters written[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[3;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[39;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" We don't want the status line to cause problems:[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset laststatus=0[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:totalLines = &lines * 20[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet middle = g:totalLines / 2[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd n[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [m[29;1H[1m[7m[No Name]                                                                              [m[30;2Hnormal zt[30;11H[K[31;2Hnormal M
:" Execute the following two command at once to reproduce the problem.
:setl scb | wincmd p
:setl scb
:wincmd w[35;10H[K[36;1H:let[8CLeft = line('w0')
:wincmd p[37;10H[K[38;2Hlet topLineRight = line('w0')
:setl noscrollbind
:wincmd p
:setl noscrollbind
:q![42;4H[K[43;1H:%del _
:call setline(1, 'Difference between the top lines (left - right): ' . string(topLineLee[45;1Hft - topLineRight))[45;20H[K[46;1H:w! test.out[46;13H[K[47;1H:brewind[47;9H[K[48;1HENDTEST[48;8H[K[49;1H[K[50;1HSTARTTEST[50;10H[K[51;1H:qa![51;5H[K[52;1HENDTEST[52;8H[K[53;1H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd o[?25l[29;1H[1m[34m~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hfor i in range(1, g:totalLines)[?25l
:  [?12l[?25h:    call setline(i, 'LINE ' . i)
[?25l:  [?12l[?25h:endfor[1;1H[2L[?25l[1;1HLINE 1
LINE 2
LINE 3[3;7H[K[4;1HLINE 4[4;7H[K[5;1HLINE 5[5;7H[K[6;1HLINE 6[6;7H[K[7;1HLINE 7[7;7H[K[8;1HLINE 8[8;7H[K[9;1HLINE 9[9;7H[K[10;1HLINE 10[10;8H[K[11;1HLINE 11[11;8H[K[12;1HLINE 12[12;8H[K[13;1HLINE 13[13;8H[K[14;1HLINE 14[14;8H[K[15;1HLINE 15[15;8H[K[16;1HLINE 16[16;8H[K[17;1HLINE 17[17;8H[K[18;1HLINE 18[18;8H[K[19;1HLINE 19[19;8H[K[20;1HLINE 20[20;8H[K[21;1HLINE 21[21;8H[K[22;1HLINE 22[22;8H[K[23;1HLINE 23[23;8H[K[24;1HLINE 24[24;8H[K[25;1HLINE 25[25;8H[K[26;1HLINE 26[26;8H[K[27;1HLINE 27[27;8H[K[28;1HLINE 28[28;8H[K[29;1HLINE 29[29;8H[K[30;1HLINE 30[30;8H[K[31;1HLINE 31[31;8H[K[32;1HLINE 32[32;8H[K[33;1HLINE 33[33;8H[K[34;1HLINE 34[34;8H[K[35;1HLINE 35[35;8H[K[36;1HLINE 36[36;8H[K[37;1HLINE 37[37;8H[K[38;1HLINE 38[38;8H[K[39;1HLINE 39[39;8H[K[40;1HLINE 40[40;8H[K[41;1HLINE 41[41;8H[K[42;1HLINE 42[42;8H[K[43;1HLINE 43[43;8H[K[44;1HLINE 44[44;8H[K[45;1HLINE 45[45;8H[K[46;1HLINE 46[46;8H[K[47;1HLINE 47[47;8H[K[48;1HLINE 48[48;8H[K[49;1HLINE 49[49;8H[K[50;1HLINE 50[50;8H[K[51;1HLINE 51[51;8H[K[52;1HLINE 52[52;8H[K[53;1HLINE 53[53;8H[K[54;1HLINE 54[54;8H[K[55;1HLINE 55[55;8H[K[56;1HLINE 56[56;8H[K[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hexe string(middle)[?25l[27m[23m[m[H[2J[1;1HLINE 543
LINE 544
LINE 545
LINE 546
LINE 547
LINE 548
LINE 549
LINE 550
LINE 551
LINE 552
LINE 553
LINE 554
LINE 555
LINE 556
LINE 557
LINE 558
LINE 559
LINE 560
LINE 561
LINE 562
LINE 563
LINE 564
LINE 565
LINE 566
LINE 567
LINE 568
LINE 569
LINE 570
LINE 571
LINE 572
LINE 573
LINE 574
LINE 575
LINE 576
LINE 577
LINE 578
LINE 579
LINE 580
LINE 581
LINE 582
LINE 583
LINE 584
LINE 585
LINE 586
LINE 587
LINE 588
LINE 589
LINE 590
LINE 591
LINE 592
LINE 593
LINE 594
LINE 595
LINE 596
LINE 597
LINE 598[28;1H[?12l[?25h[?25l[57;1H:[?12l[?25hnormal zt[?25l[1;56r[1;1H[27M[1;57r[30;1HLINE 599
LINE 600
LINE 601
LINE 602
LINE 603
LINE 604
LINE 605
LINE 606
LINE 607
LINE 608
LINE 609
LINE 610
LINE 611
LINE 612
LINE 613
LINE 614
LINE 615
LINE 616
LINE 617
LINE 618
LINE 619
LINE 620
LINE 621
LINE 622
LINE 623
LINE 624
LINE 625[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hnormal M[?25l[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25haboveleft vert new[?25l[1;1H        [35C[7m|[2;44H|[3;44H|[4;44H|[5;44H|[6;44H|[7;44H|[8;44H|[9;44H|[10;44H|[11;44H|[12;44H|[13;44H|[14;44H|[15;44H|[16;44H|[17;44H|[18;44H|[19;44H|[20;44H|[21;44H|[22;44H|[23;44H|[24;44H|[25;44H|[26;44H|[27;44H|[28;44H|[29;44H|[30;44H|[31;44H|[32;44H|[33;44H|[34;44H|[35;44H|[36;44H|[37;44H|[38;44H|[39;44H|[40;44H|[41;44H|[42;44H|[43;44H|[44;44H|[45;44H|[46;44H|[47;44H|[48;44H|[49;44H|[50;44H|[51;44H|[52;44H|[53;44H|[54;44H|[55;44H|[56;44H|[m[2;1H[1m[34m~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          [m[1;45HLINE 570[2;45HLINE 571[3;45HLINE 572[4;45HLINE 573[5;45HLINE 574[6;45HLINE 575[7;45HLINE 576[8;45HLINE 577[9;45HLINE 578[10;45HLINE 579[11;45HLINE 580[12;45HLINE 581[13;45HLINE 582[14;45HLINE 583[15;45HLINE 584[16;45HLINE 585[17;45HLINE 586[18;45HLINE 587[19;45HLINE 588[20;45HLINE 589[21;45HLINE 590[22;45HLINE 591[23;45HLINE 592[24;45HLINE 593[25;45HLINE 594[26;45HLINE 595[27;45HLINE 596[28;45HLINE 597[29;45HLINE 598[30;45HLINE 599[31;45HLINE 600[32;45HLINE 601[33;45HLINE 602[34;45HLINE 603[35;45HLINE 604[36;45HLINE 605[37;45HLINE 606[38;45HLINE 607[39;45HLINE 608[40;45HLINE 609[41;45HLINE 610[42;45HLINE 611[43;45HLINE 612[44;45HLINE 613[45;45HLINE 614[46;45HLINE 615[47;45HLINE 616[48;45HLINE 617[49;45HLINE 618[50;45HLINE 619[51;45HLINE 620[52;45HLINE 621[53;45HLINE 622[54;45HLINE 623[55;45HLINE 624[56;45HLINE 625[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor i in range(1, g:totalLines)[?25l
:  [?12l[?25h:    call setline(i, 'line ' . i)
[?25l:  [?12l[?25h:endfor[1;1H[2L[?25l[1;1Hline 1[37C[7m|[m
line 2[37C[7m|[m
line 3                                     
line 4                                     
line 5                                     
line 6                                     
line 7                                     
line 8                                     
line 9                                     
line 10                                    
line 11                                    
line 12                                    
line 13                                    
line 14                                    
line 15                                    
line 16                                    
line 17                                    
line 18                                    
line 19                                    
line 20                                    
line 21                                    
line 22                                    
line 23                                    
line 24                                    
line 25                                    
line 26                                    
line 27                                    
line 28                                    
line 29                                    
line 30                                    
line 31                                    
line 32                                    
line 33                                    
line 34                                    
line 35                                    
line 36                                    
line 37                                    
line 38                                    
line 39                                    
line 40                                    
line 41                                    
line 42                                    
line 43                                    
line 44                                    
line 45                                    
line 46                                    
line 47                                    
line 48                                    
line 49                                    
line 50                                    
line 51                                    
line 52                                    
line 53                                    
line 54                                    
line 55                                    
line 56                                    [1;45HLINE 570[2;45HLINE 571[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hexe string(middle)[?25l[1;6H543[2;6H544[3;6H545[4;6H546[5;7H47[6;6H548[7;6H549[8;6H550[9;6H551[10;6H552[11;6H553[12;6H554[13;6H555[14;6H556[15;6H557[16;6H558[17;6H559[18;6H560[19;6H561[20;6H562[21;6H563[22;6H564[23;6H565[24;6H566[25;6H567[26;6H568[27;6H569[28;6H570[29;6H571[30;6H572[31;6H573[32;6H574[33;6H575[34;6H576[35;6H577[36;6H578[37;6H579[38;6H580[39;6H581[40;6H582[41;6H583[42;6H584[43;6H585[44;6H586[45;6H587[46;6H588[47;6H589[48;6H590[49;6H591[50;7H92[51;7H93[52;7H94[53;7H95[54;7H96[55;7H97[56;7H98[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnormal zt[?25l[1;1Hline 570                                   
line 571                                   
line 572                                   
line 573                                   
line 574                                   
line 575                                   
line 576                                   
line 577                                   
line 578                                   
line 579                                   
line 580                                   
line 581                                   
line 582                                   
line 583                                   
line 584                                   
line 585                                   
line 586                                   
line 587                                   
line 588                                   
line 589                                   
line 590                                   
line 591                                   
line 592                                   
line 593                                   
line 594                                   
line 595                                   
line 596                                   
line 597                                   
line 598                                   
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           
                                           [30;1Hline 599
line 600
line 601
line 602
line 603
line 604
line 605
line 606
line 607
line 608
line 609
line 610
line 611
line 612
line 613
line 614
line 615
line 616
line 617
line 618
line 619
line 620
line 621
line 622
line 623
line 624
line 625[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hnormal M[?25l[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Execute the following two command at once to reproduce the problem.[?25l[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetl scb | wincmd p[?25l[28;45H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetl scb[?25l[28;45H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd w[?25l[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet topLineLeft = line('w0')[?25l[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd p[?25l[28;45H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet topLineRight = line('w0')[?25l[28;45H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetl noscrollbind[?25l[28;45H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd p[?25l[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetl noscrollbind[?25l[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hq![?25l[1;1HLINE[1;44H[K[2;1HLINE[2;44H[K[3;1HLINE[3;44H[K[4;1HLINE[4;44H[K[5;1HLINE[5;44H[K[6;1HLINE[6;44H[K[7;1HLINE[7;44H[K[8;1HLINE[8;44H[K[9;1HLINE[9;44H[K[10;1HLINE[10;44H[K[11;1HLINE[11;44H[K[12;1HLINE[12;44H[K[13;1HLINE[13;44H[K[14;1HLINE[14;44H[K[15;1HLINE[15;44H[K[16;1HLINE[16;44H[K[17;1HLINE[17;44H[K[18;1HLINE[18;44H[K[19;1HLINE[19;44H[K[20;1HLINE[20;44H[K[21;1HLINE[21;44H[K[22;1HLINE[22;44H[K[23;1HLINE[23;44H[K[24;1HLINE[24;44H[K[25;1HLINE[25;44H[K[26;1HLINE[26;44H[K[27;1HLINE[27;44H[K[28;1HLINE[28;44H[K[29;1HLINE[29;44H[K[30;1HLINE[30;44H[K[31;1HLINE[31;44H[K[32;1HLINE[32;44H[K[33;1HLINE[33;44H[K[34;1HLINE[34;44H[K[35;1HLINE[35;44H[K[36;1HLINE[36;44H[K[37;1HLINE[37;44H[K[38;1HLINE[38;44H[K[39;1HLINE[39;44H[K[40;1HLINE[40;44H[K[41;1HLINE[41;44H[K[42;1HLINE[42;44H[K[43;1HLINE[43;44H[K[44;1HLINE[44;44H[K[45;1HLINE[45;44H[K[46;1HLINE[46;44H[K[47;1HLINE[47;44H[K[48;1HLINE[48;44H[K[49;1HLINE[49;44H[K[50;1HLINE[50;44H[K[51;1HLINE[51;44H[K[52;1HLINE[52;44H[K[53;1HLINE[53;44H[K[54;1HLINE[54;44H[K[55;1HLINE[55;44H[K[56;1HLINE[56;44H[K[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h%del _[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H--No lines in buffer--[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall setline(1, 'Difference between the top lines (left - right): ' . string(topLineL
[56;87He[57;1Hft - topLineRight))[?25l[1;1H[L[1;1HDifference between the top lines (left - right): 0[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 1 line, 51 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbrewind[?25l"test98.in" 43 lines, 908 characters[1;1HTest for 'scrollbind' causing an unexpected scroll of one of the windows.
STARTTEST[2;10H[K[3;1H:so small.vim[3;14H[K[4;1H:" We don't want the status line to cause problems:[4;52H[K[5;1H:set laststatus=0[5;18H[K[6;1H:let g:totalLines = &lines * 20[6;32H[K[7;1H:let middle = g:totalLines / 2[7;31H[K[8;1H:wincmd n[8;10H[K[9;1H:wincmd o[9;10H[K[10;1H:for i in range(1, g:totalLines)[10;33H[K[11;1H:    call setline(i, 'LINE ' . i)[11;34H[K[12;1H:endfor[12;8H[K[13;1H:exe string(middle)[13;20H[K[14;1H:normal zt[14;11H[K[15;1H:normal M[15;10H[K[16;1H:aboveleft vert new[16;20H[K[17;1H:for i in range(1, g:totalLines)[17;33H[K[18;1H:    call setline(i, 'line ' . i)[18;34H[K[19;1H:endfor[19;8H[K[20;1H:exe string(middle)[20;20H[K[21;1H:normal zt[21;11H[K[22;1H:normal M[22;10H[K[23;1H:" Execute the following two command at once to reproduce the problem.[23;71H[K[24;1H:setl scb | wincmd p[24;21H[K[25;1H:setl scb[25;10H[K[26;1H:wincmd w[26;10H[K[27;1H:let topLineLeft = line('w0')[27;30H[K[28;1H:wincmd p[28;10H[K[29;1H:let topLineRight = line('w0')[29;31H[K[30;1H:setl noscrollbind[30;19H[K[31;1H:wincmd p[31;10H[K[32;1H:setl noscrollbind[32;19H[K[33;1H:q![33;4H[K[34;1H:%del _[34;8H[K[35;1H:call setline(1, 'Difference between the top lines (left - right): ' . string(topLineLee[36;1Hft - topLineRight))[36;20H[K[37;1H:w! test.out[37;13H[K[38;1H:brewind[38;9H[K[39;1HENDTEST[39;8H[K[40;1H[K[41;1HSTARTTEST[41;10H[K[42;1H:qa![42;5H[K[43;1HENDTEST[43;8H[K[44;1H[K[40;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[41;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H1 line, 5 characters written[42;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[42;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[43;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[44;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test98 = test61; then \
#	  if diff test.out test98.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test98.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test98.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test99.failed test.ok test.out X* viminfo
cp test99.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test99.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test99.in" 69 lines, 1400 characters[1;1HTests for regexp with multi-byte encoding and various magic settings.
Test matchstr() with a count and multi-byte chars.
See test44 for exactly the same test with re=1.

STARTTEST
:so mbyte.vim
:set nocompatible encoding=utf-8 termencoding=latin1 viminfo+=nviminfo
:set re=2
/^1
/a*b\{2}c\+/e
x/\Md\*e\{2}f\+/e
x:set nomagic
/g\*h\{2}i\+/e
x/\mj*k\{2}l\+/e
x/\vm*n{2}o+/e
x/\V^aa$
x:set magic
/\v(a)(b)\2\1\1/e
x/\V[ab]\(\[xy]\)\1
x:" Now search for multi-byte without composing char
/ม
x:" Now search for multi-byte with composing char
/ม[34m~H[m
x:" find word by change of word class
/[34m~A[m\<[34m~B[m[34m~C[m\>[34m~A[m
x:" Test \%u, [\u] and friends
/\%u20ac
x/[\u4f7f\u5929]\+
x/\%U12345678
x/[\U1234abcd\u1234\uabcd]
x/\%d21879b
x:" Test backwards search from a multi-byte char
/x
x?.
x:let @w=':%s#comb[i]nations#[34m~S[m[34m~D[mṣ[34m~A[mm̥[34m~D[mα[34m~D[m[34m~F[m[34m~A[m#g'
:@w
:"
:" l Test what 7.3.192 fixed
/^l
:s/ \?/ /g
:?^1?,$w! test.out
:e! test.out
G:put =matchstr(\"[34m~P[m[34m~Q[m[34m~R[m[34m~S[m\", \".\", 0, 2) " [34m~Q[m
:put =matchstr(\"[34m~P[m[34m~Q[m[34m~R[m[34m~S[m\", \"..\", 0, 2) " [34m~Q[m[34m~R[m
:put =matchstr(\"[34m~P[m[34m~Q[m[34m~R[m[34m~S[m\", \".\", 0, 0) " [34m~P[m
:put =matchstr(\"[34m~P[m[34m~Q[m[34m~R[m[34m~S[m\", \".\", 4, -1) " [34m~R[m
:w!
:qa!
ENDTEST

1 a aa abb abbccc
2 d dd dee deefff
3 g gg ghh ghhiii
4 j jj jkk jkklll
5 m mm mnn mnnooo
6 x ^aa$ x[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for regexp with multi-byte encoding and various magic settings.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[5;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 43 lines, 931 characters written[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[6;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[49;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocompatible encoding=utf-8 termencoding=latin1 viminfo+=nviminfo[?25l[27m[23m[m[H[2J[1;1HTests for regexp with multi-byte encoding and various magic settings.
Test matchstr() with a count and multi-byte chars.
See test44 for exactly the same test with re=1.

STARTTEST
:so mbyte.vim
:set nocompatible encoding=utf-8 termencoding=latin1 viminfo+=nviminfo
:set re=2
/^1
/a*b\{2}c\+/e
x/\Md\*e\{2}f\+/e
x:set nomagic
/g\*h\{2}i\+/e
x/\mj*k\{2}l\+/e
x/\vm*n{2}o+/e
x/\V^aa$
x:set magic
/\v(a)(b)\2\1\1/e
x/\V[ab]\(\[xy]\)\1
x:" Now search for multi-byte without composing char
/
x:" Now search for multi-byte with composing char
/
x:" find word by change of word class
/?\<??\>?
x:" Test \%u, [\u] and friends
/\%u20ac
x/[\u4f7f\u5929]\+
x/\%U12345678
x/[\U1234abcd\u1234\uabcd]
x/\%d21879b
x:" Test backwards search from a multi-byte char
/x
x?.
x:let @w=':%s#comb[i]nations#[35;31Hm[35;34H#g'
:@w
:"
:" l Test what 7.3.192 fixed
/^l
:s/ \?/ /g
:?^1?,$w! test.out
:e! test.out
G:put =matchstr(\"\", \".\", 0, 2) " 
:put =matchstr(\"\", \"..\", 0, 2) " 
:put =matchstr(\"\", \".\", 0, 0) " 
:put =matchstr(\"\", \".\", 4, -1) " 
:w!
:qa!
ENDTEST

1 a aa abb abbccc
2 d dd dee deefff
3 g gg ghh ghhiii
4 j jj jkk jkklll
5 m mm mnn mnnooo
6 x ^aa$ x[50;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset re=2[?25l[50;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^1[?25l[51;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25ha*b\{2}c\+/e[?25l[51;17H[?12l[?25h[?25l[51;17H[K[51;16H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\Md\*e\{2}f\+/e[?25l[52;17H[?12l[?25h[?25l[52;17H[K[52;16H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nomagic[?25l[52;16H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hg\*h\{2}i\+/e[?25l[53;17H[?12l[?25h[?25l[53;17H[K[53;16H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\mj*k\{2}l\+/e[?25l[54;17H[?12l[?25h[?25l[54;17H[K[54;16H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\vm*n{2}o+/e[?25l[55;17H[?12l[?25h[?25l[55;17H[K[55;16H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\V^aa$[?25l[56;5H[?12l[?25h[?25laa$ x[56;10H[K[56;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset magic[?25l[56;5H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\v(a)(b)\2\1\1/e[?25l[1;56r[56;1H
[1;57r[56;1H7 (a)(b) abbaa[57;1H[K[56;14H[?12l[?25h[?25l[56;14H[K[56;13H[?12l[?25h[?25l
/[?12l[?25h\V[ab]\(\[xy]\)\1[?25l[1;56r[56;1H
[1;57r[56;1H8 axx [ab]xx[57;1H[K[56;7H[?12l[?25h[?25lab]x[56;12H[K[56;7H[?12l[?25h[?25l
:[?12l[?25h" Now search for multi-byte without composing char[?25l[56;7H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H9 x x[57;1H[K[56;8H[?12l[?25h[?25lx[56;9H[K[56;8H[?12l[?25h[?25l
:[?12l[?25h" Now search for multi-byte with composing char[?25l[56;8H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Ha x x[57;1H[K[56;8H[?12l[?25h[?25lx[56;9H[K[56;8H[?12l[?25h[?25l
:[?12l[?25h" find word by change of word class[?25l[56;8H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h?\<??\>?[?25l[1;56r[56;1H
[1;57r[56;1Hb ????[57;1H[K[56;3H[?12l[?25h[?25l???[56;9H[K[56;3H[?12l[?25h[?25l
:[?12l[?25h" Test \%u, [\u] and friends[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h\%u20ac[?25l[1;56r[56;1H
[1;57r[56;1Hc x [56;7Hx[57;1H[K[56;6H[?12l[?25h[?25lx[56;7H[K[56;6H[?12l[?25h[?25l
/[?12l[?25h[\u4f7f\u5929]\+[?25l[1;56r[56;1H
[1;57r[56;1Hd ??x[57;1H[K[56;3H[?12l[?25h[?25l?x [56;7H[K[56;3H[?12l[?25h[?25l
/[?12l[?25h\%U12345678[?25l[1;56r[56;1H
[1;57r[56;1He y[57;1H[K[56;3H[?12l[?25h[?25ly[56;4H[K[56;3H[?12l[?25h[?25l
/[?12l[?25h[\U1234abcd\u1234\uabcd][?25l[1;56r[56;1H
[1;57r[56;1Hf z[57;1H[K[56;3H[?12l[?25h[?25lz[56;4H[K[56;3H[?12l[?25h[?25l
/[?12l[?25h\%d21879b[?25l[1;56r[56;1H
[1;57r[56;1Hg a?bb[57;1H[K[56;4H[?12l[?25h[?25lbb[56;6H[K[56;4H[?12l[?25h[?25l
:[?12l[?25h" Test backwards search from a multi-byte char[?25l[56;4H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hx[?25l[1;56r[56;1H
[1;57r[56;1Hj 0123[56;8Hx[57;1H[K[56;8H[?12l[?25h[?25l[56;8H[K[56;7H[?12l[?25h[?25l
?[?12l[?25h.[?25l[56;6H[?12l[?25h[?25l[56;7H[K[56;6H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet @w=':%s#comb[i]nations#[57;30H[57;30Hmmm[57;33H[57;33H[57;33H[1C#g'[?25l[56;6H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h@w[?25l[1;56r[56;1H
[1;57r[56;1Hk [56;4Hm[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" l Test what 7.3.192 fixed[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^l[?25l[1;56r[56;1H
[1;57r[56;1Hl  [56;7H[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hs/ \?/ /g[?25l5 substitutions on 1 line[56;1H l   [56;10H[56;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h?^1?,$w! test.out[?25l"test.out" [57;12H[K[57;12H[New] 19L, 250C written[56;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! test.out[?25l"test.out" [57;12H[K[57;12H19L, 250C[1;1H1 a aa abb abbcc
2 d dd dee deeff
3 g gg ghh ghhii
4 j jj jkk jkkll
5 m mm mnn mnnoo[5;17H[K[6;1H6 x aa$ x[6;10H[K[7;1H7 (a)(b) abba[7;14H[K[8;1H8 axx ab]xx
9 x x[9;9H[K[10;1Ha x x
b ???[11;10H[K[12;1Hc x x [12;8H[K[13;1Hd ?x[13;6H[K[14;1He y[14;4H[K[15;1Hf z[15;4H[K[16;1Hg abb[16;6H[K[17;1Hj 012[17;7H[K[18;1Hk [18;4Hm[18;7H[K[19;1H l   [19;10H[19;11H[K[20;1H[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[19;2H[?25l[m[57;1H[K[57;1H:[?12l[?25hput =matchstr(\"\", \".\", 0, 2) " [?25l[20;1H[20;2H[K[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hput =matchstr(\"\", \"..\", 0, 2) " [?25l[21;1H[21;3H[K[21;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hput =matchstr(\"\", \".\", 0, 0) " [?25l[22;1H[22;2H[K[22;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hput =matchstr(\"\", \".\", 4, -1) " [?25l[23;1H[23;2H[K[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw![?25l"test.out" 23L, 264C written[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test99 = test61; then \
#	  if diff test.out test99.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test99.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test99.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test103.failed test.ok test.out X* viminfo
cp test103.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test103.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test103.in" 37 lines, 823 characters[1;1HTest for visual mode not being reset causing E315 error.
STARTTEST
:so small.vim
:enew
:let g:msg="Everything's fine."
:function! TriggerTheProblem()
:[7C" At this point there is no visual selection because :call reset it.
:[7C" Let's restore the selection:
:[7Cnormal gv
:[7C'<,'>del _
:[7Ctry
:[15Cexe "normal \<Esc>"
:[7Ccatch /^Vim\%((\a\+)\)\=:E315/
:[15Cechom 'Snap! E315 error!'
:[15Clet g:msg='Snap! E315 error!'
:[7Cendtry
:endfunction
:enew
:setl buftype=nofile
:call append(line('$'), 'Delete this line.')
:"
:"
:" NOTE: this has to be done by a call to a function because executing :del the
:"[7Cex-way will require the colon operator which resets the visual mode thus
:"[7Cpreventing the problem:
:"
GV:call TriggerTheProblem()
:%del _
:call append(line('$'), g:msg)
:w! test.out
:brewind
ENDTEST

STARTTEST
:qa!
ENDTEST

[1m[34m~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for visual mode not being reset causing E315 error.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[2;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 29 lines, 723 characters written[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[3;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[32;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25henew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet g:msg="Everything's fine."[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! TriggerTheProblem()[?25l
:  [?12l[?25h:[34m^I[m" At this point there is no visual selection because :call reset it.
[?25l:  [?12l[?25h:[34m^I[m" Let's restore the selection:
[?25l:  [?12l[?25h:[34m^I[mnormal gv
[?25l:  [?12l[?25h:[34m^I[m'<,'>del _
[?25l:  [?12l[?25h:[34m^I[mtry
[?25l:    [?12l[?25h:[34m^I^I[mexe "normal \<Esc>"
[?25l:    [?12l[?25h:[34m^I[mcatch /^Vim\%((\a\+)\)\=:E315/
[?25l:    [?12l[?25h:[34m^I^I[mechom 'Snap! E315 error!'
[?25l:    [?12l[?25h:[34m^I^I[mlet g:msg='Snap! E315 error!'
[?25l:    [?12l[?25h:[34m^I[mendtry
[?25l:  [?12l[?25h:endfunction[1;1H[11L[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25henew[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetl buftype=nofile[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append(line('$'), 'Delete this line.')[?25l[2;1HDelete this line.[2;18H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" NOTE: this has to be done by a call to a function because executing :del the[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"       ex-way will require the colon operator which resets the visual mode thus[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"       preventing the problem:[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h
[?25lD[7melete this line. [?12l[?25h[?25l[m[57;1H[K[57;1H:'<,'>[?12l[?25hcall TriggerTheProblem()[?25l[2;1H[1m[34m~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h%del _[?25l--No lines in buffer--[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append(line('$'), g:msg)[?25l[2;1HEverything's fine.[2;19H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 2 lines, 20 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbrewind[?25l"test103.in" 37 lines, 823 characters[1;1HTest for visual mode not being reset causing E315 error.
STARTTEST[2;10H[K[3;1H:so small.vim[3;14H[K[4;1H:enew[4;6H[K[5;1H:let g:msg="Everything's fine."[5;32H[K[6;1H:function! TriggerTheProblem()[6;31H[K[7;1H:       " At this point there is no visual selection because :call reset it.[7;77H[K[8;1H:       " Let's restore the selection:[8;39H[K[9;1H:       normal gv[9;18H[K[10;1H:       '<,'>del _[10;19H[K[11;1H:       try[11;12H[K[12;1H:               exe "normal \<Esc>"[12;36H[K[13;1H:       catch /^Vim\%((\a\+)\)\=:E315/[13;39H[K[14;1H:               echom 'Snap! E315 error!'[14;42H[K[15;1H:               let g:msg='Snap! E315 error!'[15;46H[K[16;1H:       endtry[16;15H[K[17;1H:endfunction[17;13H[K[18;1H:enew[18;6H[K[19;1H:setl buftype=nofile[19;21H[K[20;1H:call append(line('$'), 'Delete this line.')[20;45H[K[21;1H:"[21;3H[K[22;1H:"[22;3H[K[23;1H:" NOTE: this has to be done by a call to a function because executing :del the[23;80H[K[24;1H:"       ex-way will require the colon operator which resets the visual mode thus[24;82H[K[25;1H:"       preventing the problem:[25;33H[K[26;1H:"[26;3H[K[27;1HGV:call TriggerTheProblem()[27;28H[K[28;1H:%del _[28;8H[K[29;1H:call append(line('$'), g:msg)[29;31H[K[30;1H:w! test.out[30;13H[K[31;1H:brewind[31;9H[K[32;1HENDTEST[32;8H[K[33;1H[K[34;1HSTARTTEST[34;10H[K[35;1H:qa![35;5H[K[36;1HENDTEST[36;8H[K[37;1H[K[33;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[34;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[35;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H1 line, 5 characters written[35;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[35;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[36;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[37;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test103 = test61; then \
#	  if diff test.out test103.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test103.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test103.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test104.failed test.ok test.out X* viminfo
cp test104.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test104.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test104.in" 30 lines, 698 characters[1;1HTests for :let.  vim: set ft=vim ts=8 :

STARTTEST
:so small.vim
:set runtimepath+=./sautest
:" Test to not autoload when assigning.  It causes internal error.
:try
:  let Test104#numvar = function('tr')
:  $put ='OK: ' . string(Test104#numvar)
:catch
:  $put ='FAIL: ' . v:exception
:endtry
:let a = 1
:let b = 2
:for letargs in ['a b', '{0 == 1 ? "a" : "b"}', '{0 == 1 ? "a" : "b"} a', 'a {0 == 1 ?  [16;1H"a" : "b"}']
:  try
:    redir => messages
:    execute 'let' letargs
:    redir END
:    $put ='OK:'
:    $put =split(substitute(messages, '\n', '\0  ', 'g'), '\n')
:  catch
:    $put ='FAIL: ' . v:exception
:    redir END
:  endtry
:endfor
:/^Results/,$wq! test.out
ENDTEST

Results of test104:
[1m[34m~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for :let.  vim: set ft=vim ts=8 :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 24 lines, 618 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[29;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset runtimepath+=./sautest[?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test to not autoload when assigning.  It causes internal error.[?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htry[?25l
:  [?12l[?25h:  let Test104#numvar = function('tr')
[?25l:  [?12l[?25h:  $put ='OK: ' . string(Test104#numvar)
[?25l:  [?12l[?25h:catch
[?25l:  [?12l[?25h:  $put ='FAIL: ' . v:exception
[?25l:  [?12l[?25h:endtry[1;1H[5L[?25l[1;1HTests for :let.  vim: set ft=vim ts=8 :

STARTTEST
:so small.vim
:set runtimepath+=./sautest[32;1HOK: function('tr')[32;19H[K[57;1H[K[32;1H[?12l[?25h[?25l[57;1H:[?12l[?25hlet a = 1[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet b = 2[?25l[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor letargs in ['a b', '{0 == 1 ? "a" : "b"}', '{0 == 1 ? "a" : "b"} a', 'a {0 == 1 ?
"a" : "b"}'][?25l[57;1H[K[57;1H:  [?12l[?25h:  try
[?25l:    [?12l[?25h:    redir => messages
[?25l:    [?12l[?25h:    execute 'let' letargs
[?25la[21C#1
b[21C#2
:    [?12l[?25h:    redir END
[?25l:    [?12l[?25h:    $put ='OK:'
[?25l:    [?12l[?25h:    $put =split(substitute(messages, '\n', '\0  ', 'g'), '\n')
[?25l:    [?12l[?25h:  catch
[?25l:    [?12l[?25h:    $put ='FAIL: ' . v:exception
[?25l:    [?12l[?25h:    redir END
[?25l:    [?12l[?25h:  endtry
[?25l:  [?12l[?25h:endfor
[?25lb[21C#2
b[21C#2
a[21C#1
a[21C#1
b[21C#2
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h/^Results/,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 13 lines, 244 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test104 = test61; then \
#	  if diff test.out test104.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test104.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test104.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test107.failed test.ok test.out X* viminfo
cp test107.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test107.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test107.in" 38 lines, 717 characters[1;1HTests for adjusting window and contents     vim: set ft=vim :

STARTTEST
:so small.vim
:new
:call setline(1, range(1,256))
:let r=[]
:func! GetScreenStr(row)
:   let str = ""
:   for c in range(1,3)
:[7Clet str .= nr2char(screenchar(a:row, c))
:   endfor
:   return str
:endfunc
:
:exe ":norm! \<C-W>t\<C-W>=1Gzt\<C-W>w\<C-W>+"
:let s3=GetScreenStr(1)
:wincmd p
:call add(r, [line("w0"), s3])
:
:exe ":norm! \<C-W>t\<C-W>=50Gzt\<C-W>w\<C-W>+"
:let s3=GetScreenStr(1)
:wincmd p
:call add(r, [line("w0"), s3])
:
:exe ":norm! \<C-W>t\<C-W>=59Gzt\<C-W>w\<C-W>+"
:let s3=GetScreenStr(1)
::wincmd p
:call add(r, [line("w0"), s3])
:
:bwipeout!
:$put=r
:call garbagecollect(1)
:"
:/^start:/,$wq! test.out
ENDTEST

start:
[1m[34m~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for adjusting window and contents     vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 32 lines, 628 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[36;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[37;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[37;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;2H[K[30;2Hexe ":norm! \<C-W>t\<C-W>=50Gzt\<C-W>w\<C-W>+"
:let s3=GetScreenStr(1)
:wincmd p[33;7Hadd(r, [line("w0"), s3])[34;2H[K[35;2Hexe ":norm! \<C-W>t\<C-W>=59Gzt\<C-W>w\<C-W>+"
:let s3=GetScreenStr(1)
::wincmd p
:call add(r, [line("w0"), s3])
:[39;2H[K[40;1H:bwipeout![40;11H[K[41;1H:$put=r[41;8H[K[42;1H:call garbagecollect(1)[42;24H[K[43;1H:"[43;3H[K[44;1H:/^start:/,$wq! test.out[44;25H[K[45;1HENDTEST[45;8H[K[46;1H[K[47;1Hstart:[47;7H[K[56;1H[7mtest107.in                                                                             [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall setline(1, range(1,256))[?25l[1;1H1
2[2;2H[K[3;1H3[3;2H[K[4;1H4[4;2H[K[5;1H5[5;2H[K[6;1H6[6;2H[K[7;1H7[7;2H[K[8;1H8[8;2H[K[9;1H9[9;2H[K[10;1H10[10;3H[K[11;1H11[11;3H[K[12;1H12[12;3H[K[13;1H13[13;3H[K[14;1H14[14;3H[K[15;1H15[15;3H[K[16;1H16[16;3H[K[17;1H17[17;3H[K[18;1H18[18;3H[K[19;1H19[19;3H[K[20;1H20[20;3H[K[21;1H21[21;3H[K[22;1H22[22;3H[K[23;1H23[23;3H[K[24;1H24[24;3H[K[25;1H25[25;3H[K[26;1H26[26;3H[K[27;1H27[27;3H[K[28;11H[1m[7m[+][1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet r=[][?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunc! GetScreenStr(row)[?25l
:  [?12l[?25h:   let str = ""
[?25l:  [?12l[?25h:   for c in range(1,3)
[?25l:    [?12l[?25h:       let str .= nr2char(screenchar(a:row, c))
[?25l:    [?12l[?25h:   endfor
[?25l:  [?12l[?25h:   return str
[?25l:  [?12l[?25h:endfunc[1;1H[6L[?25l[1;1H1
2
3
4
5
6[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexe ":norm! \<C-W>t\<C-W>=1Gzt\<C-W>w\<C-W>+"[?25l[27;1H[7m[No Name] [+]                                                                          [m[28;1H:call add(r, [line("w0"), s3])[28;31H[K[56;1H[1m[7mtest107.in                                                                             [46;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet s3=GetScreenStr(1)[?25l[46;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd p[?25l[27;1H[1m[7m[No Name] [+]                                                                          [m[56;1H[7mtest107.in[m[1m[7m [m[7m                                                                             [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(r, [line("w0"), s3])[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexe ":norm! \<C-W>t\<C-W>=50Gzt\<C-W>w\<C-W>+"[?25l[27m[23m[m[H[2J[1;1H50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
[7m[No Name] [+]                                                                          [m[28;1H:call add(r, [line("w0"), s3])
:
:exe ":norm! \<C-W>t\<C-W>=50Gzt\<C-W>w\<C-W>+"
:let s3=GetScreenStr(1)
:wincmd p
:call add(r, [line("w0"), s3])
:
:exe ":norm! \<C-W>t\<C-W>=59Gzt\<C-W>w\<C-W>+"
:let s3=GetScreenStr(1)
::wincmd p
:call add(r, [line("w0"), s3])
:
:bwipeout!
:$put=r
:call garbagecollect(1)
:"
:/^start:/,$wq! test.out
ENDTEST

start:
[1m[34m~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7mtest107.in                                                                             [46;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet s3=GetScreenStr(1)[?25l[46;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd p[?25l[27;1H[1m[7m[No Name] [+]                                                                          [m[56;1H[7mtest107.in[m[1m[7m [m[7m                                                                             [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(r, [line("w0"), s3])[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexe ":norm! \<C-W>t\<C-W>=59Gzt\<C-W>w\<C-W>+"[?25l[27m[23m[m[H[2J[1;1H59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
[7m[No Name] [+]                                                                          [m[28;1H:call add(r, [line("w0"), s3])
:
:exe ":norm! \<C-W>t\<C-W>=50Gzt\<C-W>w\<C-W>+"
:let s3=GetScreenStr(1)
:wincmd p
:call add(r, [line("w0"), s3])
:
:exe ":norm! \<C-W>t\<C-W>=59Gzt\<C-W>w\<C-W>+"
:let s3=GetScreenStr(1)
::wincmd p
:call add(r, [line("w0"), s3])
:
:bwipeout!
:$put=r
:call garbagecollect(1)
:"
:/^start:/,$wq! test.out
ENDTEST

start:
[1m[34m~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7mtest107.in                                                                             [46;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet s3=GetScreenStr(1)[?25l[46;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h:wincmd p[?25l[27;1H[1m[7m[No Name] [+]                                                                          [m[56;1H[7mtest107.in[m[1m[7m [m[7m                                                                             [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(r, [line("w0"), s3])[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipeout![?25l[1;1HTests for adjusting window and contents     vim: set ft=vim :[2;1H[K[3;1HSTARTTEST
:so small.vim
:new
:call setline(1, range(1,256))
:let r=[]
:func! GetScreenStr(row)
:   let str = ""
:   for c in range(1,3)
:       let str .= nr2char(screenchar(a:row, c))
:   endfor
:   return str
:endfunc
:[15;2H[K[16;1H:exe ":norm! \<C-W>t\<C-W>=1Gzt\<C-W>w\<C-W>+"
:let s3=GetScreenStr(1)
:wincmd p
:call add(r, [line("w0"), s3])
:[20;2H[K[21;1H:exe ":norm! \<C-W>t\<C-W>=50Gzt\<C-W>w\<C-W>+"
:let s3=GetScreenStr(1)
:wincmd p
:call add(r, [line("w0"), s3])
:[25;2H[K[26;1H:exe ":norm! \<C-W>t\<C-W>=59Gzt\<C-W>w\<C-W>+"
:let s3=GetScreenStr(1)[27;24H[K[28;2H:wincmd p[28;11H[K[29;2Hcall add(r, [line("w0"), s3])[30;2H[K[31;2Hbwipeout![31;11H[K[32;2H$put=r[32;9H[K[33;7Hgarbagecollect(1)[33;24H[K[34;2H"
:/^start:/,$wq! test.out[35;25H[K[36;1HENDTEST[36;8H[K[37;1H[K[38;1Hstart:[38;7H[K[39;1H[1m[34m~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [56;1H~                                                                                      [37;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put=r[?25l3 more lines[39;1H[1, '1  '][39;11H[K[40;1H[50, '50 '][40;12H[K[41;1H[59, '59 '][41;12H[K[41;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall garbagecollect(1)[?25l[41;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[41;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^start:/,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 4 lines, 42 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test107 = test61; then \
#	  if diff test.out test107.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test107.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test107.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test108.failed test.ok test.out X* viminfo
cp test108.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test108.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test108.in" 88 lines, 1329 characters[1;1HTests for backtrace debug commands.     vim: set ft=vim :

STARTTEST
:so small.vim
:lang mess C
:function! Foo()
:   let var1 = 1
:   let var2 = Bar(var1) + 9
:   return var2
:endfunction
:
:function! Bar(var)
:    let var1 = 2 + a:var
:    let var2 = Bazz(var1) + 4
:    return var2
:endfunction
:
:function! Bazz(var)
:    let var1 = 3 + a:var
:    let var3 = "another var"
:    return var1
:endfunction
:new
:debuggreedy
:redir => out
:debug echo Foo()
step
step
step
step
step
step
echo "- show backtrace:\n"
backtrace
echo "\nshow variables on different levels:\n"
echo var1
up
back
echo var1
u
bt
echo var1
echo "\n- undefined vars:\n"
step
frame 2
echo "undefined var3 on former level:"
echo var3
fr 0
echo "here var3 is defined with \"another var\":"
echo var3
step
step
step
up
echo "\nundefined var2 on former level"
echo var2[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for backtrace debug commands.     vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 83 lines, 1251 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[31M[1;57r[26;1Hdown
echo "here var2 is defined with 10:"
echo var2
echo "\n- backtrace movements:\n"
b
echo "\nnext command cannot go down, we are on bottom\n"
down
up
echo "\nnext command cannot go up, we are on top\n"
up
b
echo "fil is not frame or finish, it is file"
fil
echo "\n- relative backtrace movement\n"
fr -1
frame
fra +1
fram
echo "\n- go beyond limits does not crash\n"
fr 100
fra
frame -40
fram
echo "\n- final result 19:"
cont
:0debuggreedy
:redir END
:$put =out
:w! test.out
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlang mess C[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! Foo()[?25l
:  [?12l[?25h:   let var1 = 1
[?25l:  [?12l[?25h:   let var2 = Bar(var1) + 9
[?25l:  [?12l[?25h:   return var2
[?25l:  [?12l[?25h:endfunction[1;1H[4L[?25l[1;1Hecho "- show backtrace:\n"
backtrace
echo "\nshow variables on different levels:\n"
echo var1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! Bar(var)[?25l
:  [?12l[?25h:    let var1 = 2 + a:var
[?25l:  [?12l[?25h:    let var2 = Bazz(var1) + 4
[?25l:  [?12l[?25h:    return var2
[?25l:  [?12l[?25h:endfunction[1;1H[4L[?25l[1;1Hecho "- show backtrace:\n"
backtrace
echo "\nshow variables on different levels:\n"
echo var1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! Bazz(var)[?25l
:  [?12l[?25h:    let var1 = 3 + a:var
[?25l:  [?12l[?25h:    let var3 = "another var"
[?25l:  [?12l[?25h:    return var1
[?25l:  [?12l[?25h:endfunction[1;1H[4L[?25l[1;1Hecho "- show backtrace:\n"
backtrace
echo "\nshow variables on different levels:\n"
echo var1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;1Hecho "\nnext command cannot go down, we are on bottom\n"
down[30;6H[K[31;1Hup[31;3H[K[32;1Hecho "\nnext command cannot go up, we are on top\n"
up[33;3H[K[34;1Hb[34;2H[K[35;1Hecho "fil is not frame or finish, it is file"
fil[36;4H[K[37;1Hecho "\n- relative backtrace movement\n"
fr -1[38;6H[K[39;3Hame
fra +1
fram[41;5H[K[42;1Hecho "\n- go beyond limits does not crash\n"
fr 100[43;7H[K[44;3Ha[44;4H[K[45;4Hme -40[46;5H[K[47;1Hecho "\n- final result 19:"
cont[48;6H[K[49;1H:0debuggreedy
:redir END[50;11H[K[51;2H$put =out
:w! test.out
:qa![53;5H[K[54;1HENDTEST[55;1H[K[56;1H[7mtest108.in                                                                             [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hdebuggreedy[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir => out[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdebug echo Foo()[?25lEntering Debug mode.  Type "cont" to continue.
cmd: echo Foo()
>[?12l[?25hstep
[?25lfunction Foo
line 1: let var1 = 1
>[?12l[?25hstep
[?25lfunction Foo
line 2: let var2 = Bar(var1) + 9
>[?12l[?25hstep
[?25lfunction Foo[2]..Bar
line 1: let var1 = 2 + a:var
>[?12l[?25hstep
[?25lfunction Foo[2]..Bar
line 2: let var2 = Bazz(var1) + 4
>[?12l[?25hstep
[?25lfunction Foo[2]..Bar[2]..Bazz
line 1: let var1 = 3 + a:var
>[?12l[?25hstep
[?25lfunction Foo[2]..Bar[2]..Bazz
line 2: let var3 = "another var"
>[?12l[?25hecho "- show backtrace:\n"
[?25l- show backtrace:
>[?12l[?25hbacktrace
[?25l  2 function Foo[2]
  1 Bar[2]
->0 Bazz
line 2: let var3 = "another var"
>[?12l[?25hecho "\nshow variables on different levels:\n"
[?25l
show variables on different levels:
>[?12l[?25hecho var1
[?25l6
>[?12l[?25hup
[?25l>[?12l[?25hback
[?25l  2 function Foo[2]
->1 Bar[2]
  0 Bazz
line 2: let var3 = "another var"
>[?12l[?25hecho var1
[?25l3
>[?12l[?25hu
[?25l>[?12l[?25hbt
[?25l->2 function Foo[2]
  1 Bar[2]
  0 Bazz
line 2: let var3 = "another var"
>[?12l[?25hecho var1
[?25l1
>[?12l[?25hecho "\n- undefined vars:\n"
[?25l
- undefined vars:
>[?12l[?25hstep
[?25lfunction Foo[2]..Bar[2]..Bazz
line 3: return var1
>[?12l[?25hframe 2
[?25l>[?12l[?25hecho "undefined var3 on former level:"
[?25lundefined var3 on former level:
>[?12l[?25hecho var3
[?25l[1m[37m[41mError detected while processing function Foo[2]..Bar[2]..Bazz:[m
[33mline    3:[m
[1m[37m[41mE121: Undefined variable: var3[m
[1m[37m[41mE15: Invalid expression: var3[m
>[?12l[?25hfr 0
[?25l>[?12l[?25hecho "here var3 is defined with \"another var\":"
[?25lhere var3 is defined with "another var":
>[?12l[?25hecho var3
[?25lanother var
>[?12l[?25hstep
[?25lfunction Foo[2]..Bar[2]..Bazz
line 3: End of function
>[?12l[?25hstep
[?25lfunction Foo[2]..Bar
line 3: return var2
>[?12l[?25hstep
[?25lfunction Foo[2]..Bar
line 3: End of function
>[?12l[?25hup
[?25l>[?12l[?25hecho "\nundefined var2 on former level"
[?25l
undefined var2 on former level
>[?12l[?25hecho var2
[?25l[1m[37m[41mError detected while processing function Foo[2]..Bar:[m
[33mline    3:[m
[1m[37m[41mE121: Undefined variable: var2[m
[1m[37m[41mE15: Invalid expression: var2[m
>[?12l[?25hdown
[?25l>[?12l[?25hecho "here var2 is defined with 10:"
[?25lhere var2 is defined with 10:
>[?12l[?25hecho var2
[?25l10
>[?12l[?25hecho "\n- backtrace movements:\n"
[?25l
- backtrace movements:
>[?12l[?25hb
[?25l  1 function Foo[2]
->0 Bar
line 3: End of function
>[?12l[?25hecho "\nnext command cannot go down, we are on bottom\n"
[?25l
next command cannot go down, we are on bottom
>[?12l[?25hdown
[?25lframe is zero
>[?12l[?25hup
[?25l>[?12l[?25hecho "\nnext command cannot go up, we are on top\n"
[?25l
next command cannot go up, we are on top
>[?12l[?25hup
[?25lframe at highest level: 1
>[?12l[?25hb
[?25l->1 function Foo[2]
  0 Bar
line 3: End of function
>[?12l[?25hecho "fil is not frame or finish, it is file"
[?25lfil is not frame or finish, it is file
>[?12l[?25hfil
[?25l"[No Name]" --No lines in buffer--
>[?12l[?25hecho "\n- relative backtrace movement\n"
[?25l
- relative backtrace movement
>[?12l[?25hfr -1
[?25l>[?12l[?25hframe
[?25l  1 function Foo[2]
->0 Bar
line 3: End of function
>[?12l[?25hfra +1
[?25l>[?12l[?25hfram
[?25l->1 function Foo[2]
  0 Bar
line 3: End of function
>[?12l[?25hecho "\n- go beyond limits does not crash\n"
[?25l
- go beyond limits does not crash
>[?12l[?25hfr 100
[?25lframe at highest level: 1
>[?12l[?25hfra
[?25l->1 function Foo[2]
  0 Bar
line 3: End of function
>[?12l[?25hframe -40
[?25lframe is zero
>[?12l[?25hfram
[?25l  1 function Foo[2]
->0 Bar
line 3: End of function
>[?12l[?25hecho "\n- final result 19:"
[?25l
- final result 19:
>[?12l[?25hcont
[?25l19
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h0debuggreedy[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;1Hecho "\nnext command cannot go down, we are on bottom\n"
down
up
echo "\nnext command cannot go up, we are on top\n"
up
b
echo "fil is not frame or finish, it is file"
fil
echo "\n- relative backtrace movement\n"
fr -1
frame
fra +1
fram
echo "\n- go beyond limits does not crash\n"
fr 100
fra
frame -40
fram
echo "\n- final result 19:"
cont
:0debuggreedy
:redir END
:$put =out
:w! test.out
:qa!
ENDTEST

[7mtest108.in                                                                             [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hredir END[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =out[?25l83 more lines[1;1Hline 3: End of function
fil is not frame or finish, it is file[2;39H[K[3;1H"[No Name]" --No lines in buffer--[3;35H[K[4;1H[K[5;1H- relative backtrace movement[5;30H[K[6;1H[K[7;1H  1 function Foo[2][7;20H[K[8;1H->0 Bar[8;8H[K[9;1Hline 3: End of function[9;24H[K[10;1H->1 function Foo[2][10;20H[K[11;1H  0 Bar[11;8H[K[12;1Hline 3: End of function[12;24H[K[13;1H[K[14;1H- go beyond limits does not crash[14;34H[K[15;1H[K[16;1Hframe at highest level: 1[16;26H[K[17;1H->1 function Foo[2][17;20H[K[18;1H  0 Bar[18;8H[K[19;1Hline 3: End of function[19;24H[K[20;1Hframe is zero[20;14H[K[21;1H  1 function Foo[2][21;20H[K[22;1H->0 Bar[22;8H[K[23;1Hline 3: End of function[23;24H[K[24;1H[K[25;1H- final result 19:[25;19H[K[26;1H19[26;3H[K[27;1H[K[28;11H[1m[7m[+][27;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 84 lines, 1390 characters written[28;1H[1m[7mtest.out]      [27;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test108 = test61; then \
#	  if diff test.out test108.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test108.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test108.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_autocmd_option.failed test.ok test.out X* viminfo
cp test_autocmd_option.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_autocmd_option.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_autocmd_option.in" 77 lines, 2954 characters[1;1HTest for option autocommand

STARTTEST
:so small.vim
:if !has("eval") || !has("autocmd") || !exists("+autochdir") | e! test.ok | w! test.outt[6;1H | qa! | endif
:fu! AutoCommand(match)
:[7Clet c=g:testcase
:[7Clet item=remove(g:options, 0)
:[7Clet c.=printf("Expected: Name: <%s>, Oldval: <%s>, NewVal: <%s>, Scope: <%s>\n""[11;1H, item[0], item[1], item[2], item[3])
:[7Clet c.=printf("Autocmd Option: <%s>,", a:match)
:[7Clet c.=printf(" OldVal: <%s>,", v:option_old)
:[7Clet c.=printf(" NewVal: <%s>,", v:option_new)
:[7Clet c.=printf(" Scope: <%s>\n", v:option_type)
:[7Ccall setreg('r', printf("%s\n%s", getreg('r'), c))
:endfu
:au OptionSet * :call AutoCommand(expand("<amatch>"))
:let g:testcase="1: Setting number option\n"
:let g:options=[['number', 0, 1, 'global']]
:set nu
:let g:testcase="2: Setting local number option\n"
:let g:options=[['number', 1, 0, 'local']]
:setlocal nonu
:let g:testcase="3: Setting global number option\n"
:let g:options=[['number', 1, 0, 'global']]
:setglobal nonu
:let g:testcase="4: Setting local autoindent option\n"
:let g:options=[['autoindent', 0, 1, 'local']]
:setlocal ai
:let g:testcase="5: Setting global autoindent option\n"
:let g:options=[['autoindent', 0, 1, 'global']]
:setglobal ai
:let g:testcase="6: Setting global autoindent option\n"
:let g:options=[['autoindent', 1, 0, 'global']]
:set ai!
: Should not print anything, use :noa
:noa :set nonu
:let g:testcase="7: Setting several global list and number option\n"
:let g:options=[['list', 0, 1, 'global'], ['number', 0, 1, 'global']]
:set list nu
:noa set nolist nonu
:let g:testcase="8: Setting global acd\n"
:let g:options=[['autochdir', 0, 1, 'global']]
:setlocal acd
:let g:testcase="9: Setting global autoread\n"
:let g:options=[['autoread', 0, 1, 'global']]
:set ar
:let g:testcase="10: Setting local autoread\n"
:let g:options=[['autoread', 0, 1, 'local']]
:setlocal ar
:let g:testcase="11: Setting global autoread\n"
:let g:options=[['autoread', 1, 0, 'global']]
:setglobal invar
:let g:testcase="12: Setting option backspace through :let\n"
:let g:options=[['backspace', '', 'eol,indent,start', 'global']][1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for option autocommand[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 72 lines, 2896 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[23M[1;57r[34;1H:let &bs="eol,indent,start"
:let g:testcase="13: Setting option backspace through setbufvar()\n"
:let g:options=[['backup', '', '1', 'local']]
: "try twice, first time, shouldn't trigger because option name is invalid, second timee[38;1H, it should trigger
:call setbufvar(1, '&l:bk', 1)
: "should trigger, use correct option name
:call setbufvar(1, '&backup', 1)
:let g:testcase="14: Setting number option using setwinvar\n"
:let g:options=[['number', 0, 1, 'local']]
:call setwinvar(0, '&number', 1)
:" Write register now, because next test shouldn't output anything.
:$put r
:let @r=''
:let g:testcase="\n15: Setting key option, shouldn't trigger\n"
:let g:options=[['key', 'invalid', 'invalid1', 'invalid']]
:setlocal key=blah
:setlocal key=
:$put =g:testcase
:$put r
:/^dummy text/,$w! test.out
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1Hdummy text[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !has("eval") || !has("autocmd") || !exists("+autochdir") | e! test.ok | w! test.ou
[56;87Ht[57;1H | qa! | endif[?25l[1;1H[L[1;1H:let g:testcase="3: Setting global number option\n"[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hfu! AutoCommand(match)[?25l
:  [?12l[?25h:[34m^I[mlet c=g:testcase
[?25l:  [?12l[?25h:       let item=remove(g:options, 0)
[?25l:  [?12l[?25h:       let c.=printf("Expected: Name: <%s>, Oldval: <%s>, NewVal: <%s>, Scope: <%s
[56;87H>[57;1H\n", item[0], item[1], item[2], item[3])
[?25l:  [?12l[?25h:       let c.=printf("Autocmd Option: <%s>,", a:match)
[?25l:  [?12l[?25h:       let c.=printf(" OldVal: <%s>,", v:option_old)
[?25l:  [?12l[?25h:       let c.=printf(" NewVal: <%s>,", v:option_new)
[?25l:  [?12l[?25h:       let c.=printf(" Scope: <%s>\n", v:option_type)
[?25l:  [?12l[?25h:       call setreg('r', printf("%s\n%s", getreg('r'), c))
[?25l:  [?12l[?25h:endfu[1;1H[10L[?25l[1;1H:let g:testcase="3: Setting global number option\n"
:let g:options=[['number', 1, 0, 'global']]
:setglobal nonu
:let g:testcase="4: Setting local autoindent option\n"
:let g:options=[['autoindent', 0, 1, 'local']]
:setlocal ai
:let g:testcase="5: Setting global autoindent option\n"
:let g:options=[['autoindent', 0, 1, 'global']]
:setglobal ai
:let g:testcase="6: Setting global autoindent option\n"[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hau OptionSet * :call AutoCommand(expand("<amatch>"))[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="1: Setting number option\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['number', 0, 1, 'global']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nu[?25l[1;1H[33m     23 [m:let g:testcase="3: Setting global number option\n"
[33m     24 [m:let g:options=[['number', 1, 0, 'global']]
[33m     25 [m:setglobal nonu
[33m     26 [m:let g:testcase="4: Setting local autoindent option\n"
[33m     27 [m:let g:options=[['autoindent', 0, 1, 'local']]
[33m     28 [m:setlocal ai
[33m     29 [m:let g:testcase="5: Setting global autoindent option\n"
[33m     30 [m:let g:options=[['autoindent', 0, 1, 'global']]
[33m     31 [m:setglobal ai
[33m     32 [m:let g:testcase="6: Setting global autoindent option\n"
[33m     33 [m:let g:options=[['autoindent', 1, 0, 'global']]
[33m     34 [m:set ai!
[33m     35 [m: Should not print anything, use :noa
[33m     36 [m:noa :set nonu
[33m     37 [m:let g:testcase="7: Setting several global list and number option\n"
[33m     38 [m:let g:options=[['list', 0, 1, 'global'], ['number', 0, 1, 'global']]
[33m     39 [m:set list nu
[33m     40 [m:noa set nolist nonu
[33m     41 [m:let g:testcase="8: Setting global acd\n"
[33m     42 [m:let g:options=[['autochdir', 0, 1, 'global']]
[33m     43 [m:setlocal acd
[33m     44 [m:let g:testcase="9: Setting global autoread\n"
[33m     45 [m:let g:options=[['autoread', 0, 1, 'global']]
[33m     46 [m:set ar
[33m     47 [m:let g:testcase="10: Setting local autoread\n"
[33m     48 [m:let g:options=[['autoread', 0, 1, 'local']]
[33m     49 [m:setlocal ar
[33m     50 [m:let g:testcase="11: Setting global autoread\n"
[33m     51 [m:let g:options=[['autoread', 1, 0, 'global']]
[33m     52 [m:setglobal invar
[33m     53 [m:let g:testcase="12: Setting option backspace through :let\n"
[33m     54 [m:let g:options=[['backspace', '', 'eol,indent,start', 'global']]
[33m     55 [m:let &bs="eol,indent,start"
[33m     56 [m:let g:testcase="13: Setting option backspace through setbufvar()\n"
[33m     57 [m:let g:options=[['backup', '', '1', 'local']]
[33m     58 [m: "try twice, first time, shouldn't trigger because option name is invalid, secc[37;1Hond time, it should trigger
[33m     59 [m:call setbufvar(1, '&l:bk', 1)
[33m     60 [m: "should trigger, use correct option name
[33m     61 [m:call setbufvar(1, '&backup', 1)
[33m     62 [m:let g:testcase="14: Setting number option using setwinvar\n"
[33m     63 [m:let g:options=[['number', 0, 1, 'local']]
[33m     64 [m:call setwinvar(0, '&number', 1)
[33m     65 [m:" Write register now, because next test shouldn't output anything.
[33m     66 [m:$put r
[33m     67 [m:let @r=''
[33m     68 [m:let g:testcase="\n15: Setting key option, shouldn't trigger\n"
[33m     69 [m:let g:options=[['key', 'invalid', 'invalid1', 'invalid']]
[33m     70 [m:setlocal key=blah
[33m     71 [m:setlocal key=
[33m     72 [m:$put =g:testcase
[33m     73 [m:$put r
[33m     74 [m:/^dummy text/,$w! test.out
[33m     75 [m:qa!
[33m     76 [mENDTEST
[33m     77 [mdummy text[56;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="2: Setting local number option\n"[?25l[56;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['number', 1, 0, 'local']][?25l[56;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetlocal nonu[?25l[1;1H:let g:testcase="3: Setting global number option\n"[1;52H[K[2;1H:let g:options=[['number', 1, 0, 'global']][2;44H[K[3;1H:setglobal nonu[3;16H[K[4;1H:let g:testcase="4: Setting local autoindent option\n"[4;55H[K[5;1H:let g:options=[['autoindent', 0, 1, 'local']][5;47H[K[6;1H:setlocal ai[6;13H[K[7;1H:let g:testcase="5: Setting global autoindent option\n"[7;56H[K[8;1H:let g:options=[['autoindent', 0, 1, 'global']][8;48H[K[9;1H:setglobal ai[9;14H[K[10;1H:let g:testcase="6: Setting global autoindent option\n"[10;56H[K[11;1H:let g:options=[['autoindent', 1, 0, 'global']][11;48H[K[12;1H:set ai![12;9H[K[13;1H: Should not print anything, use :noa[13;38H[K[14;1H:noa :set nonu[14;15H[K[15;1H:let g:testcase="7: Setting several global list and number option\n"[15;69H[K[16;1H:let g:options=[['list', 0, 1, 'global'], ['number', 0, 1, 'global']][16;70H[K[17;1H:set list nu[17;14H[K[18;1H:noa set nolist nonu[18;21H[K[19;1H:let g:testcase="8: Setting global acd\n"[19;42H[K[20;1H:let g:options=[['autochdir', 0, 1, 'global']][20;47H[K[21;1H:setlocal acd[21;14H[K[22;1H:let g:testcase="9: Setting global autoread\n"[22;47H[K[23;1H:let g:options=[['autoread', 0, 1, 'global']][23;46H[K[24;1H:set ar[24;8H[K[25;1H:let g:testcase="10: Setting local autoread\n"[25;47H[K[26;1H:let g:options=[['autoread', 0, 1, 'local']][26;45H[K[27;1H:setlocal ar[27;13H[K[28;1H:let g:testcase="11: Setting global autoread\n"[28;48H[K[29;1H:let g:options=[['autoread', 1, 0, 'global']][29;46H[K[30;1H:setglobal invar[30;17H[K[31;1H:let g:testcase="12: Setting option backspace through :let\n"[31;63H[K[32;1H:let g:options=[['backspace', '', 'eol,indent,start', 'global']][32;65H[K[33;1H:let &bs="eol,indent,start"[33;28H[K[34;1H:let g:testcase="13: Setting option backspace through setbufvar()\n"[34;69H[K[35;1H:let g:options=[['backup', '', '1', 'local']][35;46H[K[36;1H: "try twice, first time, shouldn't trigger because option name is invalid, second timee[37;1H, it should trigger[37;21H[K[38;1H:call setbufvar(1, '&l:bk', 1)[38;31H[K[39;1H: "should trigger, use correct option name[39;43H[K[40;1H:call setbufvar(1, '&backup', 1)[40;33H[K[41;1H:let g:testcase="14: Setting number option using setwinvar\n"[41;62H[K[42;1H:let g:options=[['number', 0, 1, 'local']][42;43H[K[43;1H:call setwinvar(0, '&number', 1)[43;33H[K[44;1H:" Write register now, because next test shouldn't output anything.[44;68H[K[45;1H:$put r[45;8H[K[46;1H:let @r=''[46;11H[K[47;1H:let g:testcase="\n15: Setting key option, shouldn't trigger\n"[47;64H[K[48;1H:let g:options=[['key', 'invalid', 'invalid1', 'invalid']][48;59H[K[49;1H:setlocal key=blah[49;19H[K[50;1H:setlocal key=[50;15H[K[51;1H:$put =g:testcase[51;18H[K[52;1H:$put r[52;8H[K[53;1H:/^dummy text/,$w! test.out[53;28H[K[54;1H:qa![54;5H[K[55;1HENDTEST[55;8H[K[56;1Hdummy text[56;11H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="3: Setting global number option\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['number', 1, 0, 'global']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetglobal nonu[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="4: Setting local autoindent option\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['autoindent', 0, 1, 'local']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetlocal ai[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="5: Setting global autoindent option\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['autoindent', 0, 1, 'global']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetglobal ai[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="6: Setting global autoindent option\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['autoindent', 1, 0, 'global']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ai![?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h Should not print anything, use :noa[?25l[1m[37m[41mE492: Not an editor command: Should not print anything, use :noa[56;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hnoa :set nonu[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="7: Setting several global list and number option\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['list', 0, 1, 'global'], ['number', 0, 1, 'global']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset list nu[?25l[1;1H[33m     23 [m:let g:testcase="3: Setting global number option\n"[1m[34m$[m
[33m     24 [m:let g:options=[['number', 1, 0, 'global']][1m[34m$[m
[33m     25 [m:setglobal nonu[1m[34m$[m
[33m     26 [m:let g:testcase="4: Setting local autoindent option\n"[1m[34m$[m
[33m     27 [m:let g:options=[['autoindent', 0, 1, 'local']][1m[34m$[m
[33m     28 [m:setlocal ai[1m[34m$[m
[33m     29 [m:let g:testcase="5: Setting global autoindent option\n"[1m[34m$[m
[33m     30 [m:let g:options=[['autoindent', 0, 1, 'global']][1m[34m$[m
[33m     31 [m:setglobal ai[1m[34m$[m
[33m     32 [m:let g:testcase="6: Setting global autoindent option\n"[1m[34m$[m
[33m     33 [m:let g:options=[['autoindent', 1, 0, 'global']][1m[34m$[m
[33m     34 [m:set ai![1m[34m$[m
[33m     35 [m: Should not print anything, use :noa[1m[34m$[m
[33m     36 [m:noa :set nonu[1m[34m$[m
[33m     37 [m:let g:testcase="7: Setting several global list and number option\n"[1m[34m$[m
[33m     38 [m:let g:options=[['list', 0, 1, 'global'], ['number', 0, 1, 'global']][1m[34m$[m
[33m     39 [m:set list nu[1m[34m$[m
[33m     40 [m:noa set nolist nonu[1m[34m$[m
[33m     41 [m:let g:testcase="8: Setting global acd\n"[1m[34m$[m
[33m     42 [m:let g:options=[['autochdir', 0, 1, 'global']][1m[34m$[m
[33m     43 [m:setlocal acd[1m[34m$[m
[33m     44 [m:let g:testcase="9: Setting global autoread\n"[1m[34m$[m
[33m     45 [m:let g:options=[['autoread', 0, 1, 'global']][1m[34m$[m
[33m     46 [m:set ar[1m[34m$[m
[33m     47 [m:let g:testcase="10: Setting local autoread\n"[1m[34m$[m
[33m     48 [m:let g:options=[['autoread', 0, 1, 'local']][1m[34m$[m
[33m     49 [m:setlocal ar[1m[34m$[m
[33m     50 [m:let g:testcase="11: Setting global autoread\n"[1m[34m$[m
[33m     51 [m:let g:options=[['autoread', 1, 0, 'global']][1m[34m$[m
[33m     52 [m:setglobal invar[1m[34m$[m
[33m     53 [m:let g:testcase="12: Setting option backspace through :let\n"[1m[34m$[m
[33m     54 [m:let g:options=[['backspace', '', 'eol,indent,start', 'global']][1m[34m$[m
[33m     55 [m:let &bs="eol,indent,start"[1m[34m$[m
[33m     56 [m:let g:testcase="13: Setting option backspace through setbufvar()\n"[1m[34m$[m
[33m     57 [m:let g:options=[['backup', '', '1', 'local']][1m[34m$[m
[33m     58 [m: "try twice, first time, shouldn't trigger because option name is invalid, secc[37;1Hond time, it should trigger[1m[34m$[m
[33m     59 [m:call setbufvar(1, '&l:bk', 1)[1m[34m$[m
[33m     60 [m: "should trigger, use correct option name[1m[34m$[m
[33m     61 [m:call setbufvar(1, '&backup', 1)[1m[34m$[m
[33m     62 [m:let g:testcase="14: Setting number option using setwinvar\n"[1m[34m$[m
[33m     63 [m:let g:options=[['number', 0, 1, 'local']][1m[34m$[m
[33m     64 [m:call setwinvar(0, '&number', 1)[1m[34m$[m
[33m     65 [m:" Write register now, because next test shouldn't output anything.[1m[34m$[m
[33m     66 [m:$put r[1m[34m$[m
[33m     67 [m:let @r=''[1m[34m$[m
[33m     68 [m:let g:testcase="\n15: Setting key option, shouldn't trigger\n"[1m[34m$[m
[33m     69 [m:let g:options=[['key', 'invalid', 'invalid1', 'invalid']][1m[34m$[m
[33m     70 [m:setlocal key=blah[1m[34m$[m
[33m     71 [m:setlocal key=[1m[34m$[m
[33m     72 [m:$put =g:testcase[1m[34m$[m
[33m     73 [m:$put r[1m[34m$[m
[33m     74 [m:/^dummy text/,$w! test.out[1m[34m$[m
[33m     75 [m:qa![1m[34m$[m
[33m     76 [mENDTEST[1m[34m$[m
[33m     77 [mdummy text[1m[34m$[56;9H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hnoa set nolist nonu[?25l[1;1H:let g:testcase="3: Setting global number option\n"[1;52H[K[2;1H:let g:options=[['number', 1, 0, 'global']][2;44H[K[3;1H:setglobal nonu[3;16H[K[4;1H:let g:testcase="4: Setting local autoindent option\n"[4;55H[K[5;1H:let g:options=[['autoindent', 0, 1, 'local']][5;47H[K[6;1H:setlocal ai[6;13H[K[7;1H:let g:testcase="5: Setting global autoindent option\n"[7;56H[K[8;1H:let g:options=[['autoindent', 0, 1, 'global']][8;48H[K[9;1H:setglobal ai[9;14H[K[10;1H:let g:testcase="6: Setting global autoindent option\n"[10;56H[K[11;1H:let g:options=[['autoindent', 1, 0, 'global']][11;48H[K[12;1H:set ai![12;9H[K[13;1H: Should not print anything, use :noa[13;38H[K[14;1H:noa :set nonu[14;15H[K[15;1H:let g:testcase="7: Setting several global list and number option\n"[15;69H[K[16;1H:let g:options=[['list', 0, 1, 'global'], ['number', 0, 1, 'global']][16;70H[K[17;1H:set list nu[17;14H[K[18;1H:noa set nolist nonu[18;21H[K[19;1H:let g:testcase="8: Setting global acd\n"[19;42H[K[20;1H:let g:options=[['autochdir', 0, 1, 'global']][20;47H[K[21;1H:setlocal acd[21;14H[K[22;1H:let g:testcase="9: Setting global autoread\n"[22;47H[K[23;1H:let g:options=[['autoread', 0, 1, 'global']][23;46H[K[24;1H:set ar[24;8H[K[25;1H:let g:testcase="10: Setting local autoread\n"[25;47H[K[26;1H:let g:options=[['autoread', 0, 1, 'local']][26;45H[K[27;1H:setlocal ar[27;13H[K[28;1H:let g:testcase="11: Setting global autoread\n"[28;48H[K[29;1H:let g:options=[['autoread', 1, 0, 'global']][29;46H[K[30;1H:setglobal invar[30;17H[K[31;1H:let g:testcase="12: Setting option backspace through :let\n"[31;63H[K[32;1H:let g:options=[['backspace', '', 'eol,indent,start', 'global']][32;65H[K[33;1H:let &bs="eol,indent,start"[33;28H[K[34;1H:let g:testcase="13: Setting option backspace through setbufvar()\n"[34;69H[K[35;1H:let g:options=[['backup', '', '1', 'local']][35;46H[K[36;1H: "try twice, first time, shouldn't trigger because option name is invalid, second timee[37;1H, it should trigger[37;21H[K[38;1H:call setbufvar(1, '&l:bk', 1)[38;31H[K[39;1H: "should trigger, use correct option name[39;43H[K[40;1H:call setbufvar(1, '&backup', 1)[40;33H[K[41;1H:let g:testcase="14: Setting number option using setwinvar\n"[41;62H[K[42;1H:let g:options=[['number', 0, 1, 'local']][42;43H[K[43;1H:call setwinvar(0, '&number', 1)[43;33H[K[44;1H:" Write register now, because next test shouldn't output anything.[44;68H[K[45;1H:$put r[45;8H[K[46;1H:let @r=''[46;11H[K[47;1H:let g:testcase="\n15: Setting key option, shouldn't trigger\n"[47;64H[K[48;1H:let g:options=[['key', 'invalid', 'invalid1', 'invalid']][48;59H[K[49;1H:setlocal key=blah[49;19H[K[50;1H:setlocal key=[50;15H[K[51;1H:$put =g:testcase[51;18H[K[52;1H:$put r[52;8H[K[53;1H:/^dummy text/,$w! test.out[53;28H[K[54;1H:qa![54;5H[K[55;1HENDTEST[55;8H[K[56;1Hdummy text[56;11H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="8: Setting global acd\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['autochdir', 0, 1, 'global']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetlocal acd[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="9: Setting global autoread\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['autoread', 0, 1, 'global']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ar[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="10: Setting local autoread\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['autoread', 0, 1, 'local']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetlocal ar[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="11: Setting global autoread\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['autoread', 1, 0, 'global']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetglobal invar[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="12: Setting option backspace through :let\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['backspace', '', 'eol,indent,start', 'global']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet &bs="eol,indent,start"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="13: Setting option backspace through setbufvar()\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['backup', '', '1', 'local']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h "try twice, first time, shouldn't trigger because option name is invalid, second tim
[56;87He[57;1H, it should trigger[?25l[1;1H[L[1;1H:let g:testcase="3: Setting global number option\n"[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hcall setbufvar(1, '&l:bk', 1)[?25l[1m[37m[41mE355: Unknown option: l:bk[m[57;27H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h "should trigger, use correct option name[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall setbufvar(1, '&backup', 1)[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="14: Setting number option using setwinvar\n"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['number', 0, 1, 'local']][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall setwinvar(0, '&number', 1)[?25l[1;1H[33m     23 [m:let g:testcase="3: Setting global number option\n"
[33m     24 [m:let g:options=[['number', 1, 0, 'global']]
[33m     25 [m:setglobal nonu
[33m     26 [m:let g:testcase="4: Setting local autoindent option\n"
[33m     27 [m:let g:options=[['autoindent', 0, 1, 'local']]
[33m     28 [m:setlocal ai
[33m     29 [m:let g:testcase="5: Setting global autoindent option\n"
[33m     30 [m:let g:options=[['autoindent', 0, 1, 'global']]
[33m     31 [m:setglobal ai
[33m     32 [m:let g:testcase="6: Setting global autoindent option\n"
[33m     33 [m:let g:options=[['autoindent', 1, 0, 'global']]
[33m     34 [m:set ai!
[33m     35 [m: Should not print anything, use :noa
[33m     36 [m:noa :set nonu
[33m     37 [m:let g:testcase="7: Setting several global list and number option\n"
[33m     38 [m:let g:options=[['list', 0, 1, 'global'], ['number', 0, 1, 'global']]
[33m     39 [m:set list nu
[33m     40 [m:noa set nolist nonu
[33m     41 [m:let g:testcase="8: Setting global acd\n"
[33m     42 [m:let g:options=[['autochdir', 0, 1, 'global']]
[33m     43 [m:setlocal acd
[33m     44 [m:let g:testcase="9: Setting global autoread\n"
[33m     45 [m:let g:options=[['autoread', 0, 1, 'global']]
[33m     46 [m:set ar
[33m     47 [m:let g:testcase="10: Setting local autoread\n"
[33m     48 [m:let g:options=[['autoread', 0, 1, 'local']]
[33m     49 [m:setlocal ar
[33m     50 [m:let g:testcase="11: Setting global autoread\n"
[33m     51 [m:let g:options=[['autoread', 1, 0, 'global']]
[33m     52 [m:setglobal invar
[33m     53 [m:let g:testcase="12: Setting option backspace through :let\n"
[33m     54 [m:let g:options=[['backspace', '', 'eol,indent,start', 'global']]
[33m     55 [m:let &bs="eol,indent,start"
[33m     56 [m:let g:testcase="13: Setting option backspace through setbufvar()\n"
[33m     57 [m:let g:options=[['backup', '', '1', 'local']]
[33m     58 [m: "try twice, first time, shouldn't trigger because option name is invalid, secc[37;1Hond time, it should trigger
[33m     59 [m:call setbufvar(1, '&l:bk', 1)
[33m     60 [m: "should trigger, use correct option name
[33m     61 [m:call setbufvar(1, '&backup', 1)
[33m     62 [m:let g:testcase="14: Setting number option using setwinvar\n"
[33m     63 [m:let g:options=[['number', 0, 1, 'local']]
[33m     64 [m:call setwinvar(0, '&number', 1)
[33m     65 [m:" Write register now, because next test shouldn't output anything.
[33m     66 [m:$put r
[33m     67 [m:let @r=''
[33m     68 [m:let g:testcase="\n15: Setting key option, shouldn't trigger\n"
[33m     69 [m:let g:options=[['key', 'invalid', 'invalid1', 'invalid']]
[33m     70 [m:setlocal key=blah
[33m     71 [m:setlocal key=
[33m     72 [m:$put =g:testcase
[33m     73 [m:$put r
[33m     74 [m:/^dummy text/,$w! test.out
[33m     75 [m:qa!
[33m     76 [mENDTEST
[33m     77 [mdummy text[56;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Write register now, because next test shouldn't output anything.[?25l[56;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put r[?25l60 more lines[1;6H[33m84[m[1CExpected: Name: <number>, Oldval: <1>, NewVal: <0>, Scope: <local>[2;6H[33m85[m[1CAutocmd Option: <number>, OldVal: <1>, NewVal: <0>, Scope: <local>[3;6H[33m86[m[3;9H[K[4;6H[33m87[m[1C3: Setting global number option[4;40H[K[5;6H[33m88[m[1CExpected: Name: <number>, Oldval: <1>, NewVal: <0>, Scope: <global>[6;6H[33m89[m[1CAutocmd Option: <number>, OldVal: <1>, NewVal: <0>, Scope: <global>[7;6H[33m90[m[7;9H[K[8;6H[33m91[m[1C4: Setting local autoindent option[8;43H[K[9;6H[33m92[m[1CExpected: Name: <autoindent>, Oldval: <0>, NewVal: <1>, Scope: <local>[10;6H[33m93[m[1CAutocmd Option: <autoindent>, OldVal: <0>, NewVal: <1>, Scope: <local>[11;6H[33m94[m[11;9H[K[12;6H[33m95[m[1C5: Setting global autoindent option[13;6H[33m96[m[1CExpected: Name: <autoindent>, Oldval: <0>, NewVal: <1>, Scope: <global>[14;6H[33m97[m[1CAutocmd Option: <autoindent>, OldVal: <0>, NewVal: <1>, Scope: <global>[15;6H[33m98[m[15;9H[K[16;6H[33m99[m[1C6: Setting global autoindent option[16;44H[K[17;5H[33m100[m[1CExpected: Name: <autoindent>, Oldval: <1>, NewVal: <0>, Scope: <global>[18;5H[33m101[m[1CAutocmd Option: <autoindent>, OldVal: <1>, NewVal: <0>, Scope: <global>[19;5H[33m102[m[19;9H[K[20;5H[33m103[m[1C7: Setting several global list and number option[21;5H[33m104[m[1CExpected: Name: <list>, Oldval: <0>, NewVal: <1>, Scope: <global>[22;5H[33m105[m[1CAutocmd Option: <list>, OldVal: <0>, NewVal: <1>, Scope: <global>[23;5H[33m106[m[23;9H[K[24;5H[33m107[m[1C7: Setting several global list and number option[25;5H[33m108[m[1CExpected: Name: <number>, Oldval: <0>, NewVal: <1>, Scope: <global>[26;5H[33m109[m[1CAutocmd Option: <number>, OldVal: <0>, NewVal: <1>, Scope: <global>[27;5H[33m110[m[27;9H[K[28;5H[33m111[m[1C8: Setting global acd[28;30H[K[29;5H[33m112[m[1CExpected: Name: <autochdir>, Oldval: <0>, NewVal: <1>, Scope: <global>[30;5H[33m113[m[1CAutocmd Option: <autochdir>, OldVal: <0>, NewVal: <1>, Scope: <local>[31;5H[33m114[m[31;9H[K[32;5H[33m115[m[1C9: Setting global autoread[32;35H[K[33;5H[33m116[m[1CExpected: Name: <autoread>, Oldval: <0>, NewVal: <1>, Scope: <global>[34;5H[33m117[m[1CAutocmd Option: <autoread>, OldVal: <0>, NewVal: <1>, Scope: <global>[35;5H[33m118[m[35;9H[K[36;5H[33m119[m[1C10: Setting local autoread[36;35H[K[37;1H[33m    120 [mExpected: Name: <autoread>, Oldval: <0>, NewVal: <1>, Scope: <local>[38;5H[33m121[m[1CAutocmd Option: <autoread>, OldVal: <1>, NewVal: <1>, Scope: <local>[39;5H[33m122[m[39;9H[K[40;5H[33m123[m[1C11: Setting global autoread[40;36H[K[41;5H[33m124[m[1CExpected: Name: <autoread>, Oldval: <1>, NewVal: <0>, Scope: <global>[42;5H[33m125[m[1CAutocmd Option: <autoread>, OldVal: <1>, NewVal: <0>, Scope: <global>[43;5H[33m126[m[43;9H[K[44;5H[33m127[m[1C12: Setting option backspace through :let[44;50H[K[45;5H[33m128[m[1CExpected: Name: <backspace>, Oldval: <>, NewVal: <eol,indent,start>, Scope: <gll[46;1Hobal>[46;6H[K[47;5H[33m129[m[1CAutocmd Option: <backspace>, OldVal: <>, NewVal: <eol,indent,start>, Scope: <gll[48;1Hobal>[48;6H[K[49;5H[33m13[m[49;9H[K[50;5H[33m13[m[2C13: Setting option backspace through setbufvar()[51;5H[33m13[m[2CExpected: Name: <backup>, Oldval: <>, NewVal: <1>, Scope: <local>[52;5H[33m13[m[2CAutocmd Option: <backup>, OldVal: <0>, NewVal: <1>, Scope: <local>[53;5H[33m13[m[53;9H[K[54;5H[33m13[m[2C14: Setting number option using setwinvar[55;5H[33m13[m[3Cxpected: Name: <number>, Oldval: <0>, NewVal: <1>, Scope: <local>[56;5H[33m13[m[2CAutocmd Option: <number>, OldVal: <0>, NewVal: <1>, Scope: <local>[56;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet @r=''[?25l[56;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:testcase="\n15: Setting key option, shouldn't trigger\n"[?25l[56;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:options=[['key', 'invalid', 'invalid1', 'invalid']][?25l[56;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetlocal key=blah[?25l[56;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetlocal key=[?25l[56;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =g:testcase[?25l[1;56r[1;1H[2M[1;57r[55;1H[33m    138 
    139 [m15: Setting key option, shouldn't trigger[57;1H[K[56;9H[?12l[?25h[?25l
:[?12l[?25h$put r[?25l[1;56r[56;1H
[1;57r[56;1H[33m    140 [m[57;1H[K[56;9H[?12l[?25h[?25l
:[?12l[?25h/^dummy text/,$w! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 64 lines, 2700 characters written[56;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_autocmd_option = test61; then \
#	  if diff test.out test_autocmd_option.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_autocmd_option.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_autocmd_option.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_autoformat_join.failed test.ok test.out X* viminfo
cp test_autoformat_join.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_autoformat_join.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_autoformat_join.in" 23 lines, 524 characters[1;1HTests for setting the '[,'] marks when joining lines.

STARTTEST
:so small.vim
:/^\t\t/
0gqj:
:let a=string(getpos("'[")).'/'.string(getpos("']"))
:/^This line/;'}-join
:let b=string(getpos("'[")).'/'.string(getpos("']"))
:$put ='First test: Start/End '.string(a)
:$put ='Second test: Start/End '.string(b)
:/^\t\t/,$wq! test.out
ENDTEST[16;17HO sodales, ludite, vos qui
attamen consulite per voster honur. Tua pulchra facies me fay planszer milies

This line.
Should be joined with the next line
and with this line

Results:
[1m[34m~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for setting the '[,'] marks when joining lines.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 9 lines, 265 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[13;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[14;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[14;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^\t\t/[?25l[16;17H[?12l[?25h[16;8H[?25l[36Cattamen consulite per voster honur.
Tua pulchra facies me fay planszer milies[17;42H[K[17;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[17;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet a=string(getpos("'[")).'/'.string(getpos("']"))[?25l[17;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^This line/;'}-join[?25l[19;56r[19;1H[2M[1;57r[19;1HThis line.  Should be joined with the next line and with this line[55;1H[1m[34m~                                                                                      [56;1H~                                                                                      [m[57;1H[K[19;1H[?12l[?25h[?25l[57;1H:[?12l[?25hlet b=string(getpos("'[")).'/'.string(getpos("']"))[?25l[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='First test: Start/End '.string(a)[?25l[22;1HFirst test: Start/End '[0, 16, 1, 0]/[0, 17, 1, 0]'[22;52H[K[22;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='Second test: Start/End '.string(b)[?25l[23;1HSecond test: Start/End '[0, 19, 11, 0]/[0, 19, 67, 0]'[23;55H[K[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^\t\t/,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 8 lines, 292 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_autoformat_join = test61; then \
#	  if diff test.out test_autoformat_join.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_autoformat_join.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_autoformat_join.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_breakindent.failed test.ok test.out X* viminfo
cp test_breakindent.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_breakindent.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_breakindent.in" 122 lines, 3678 characters[1;1HTest for breakindent

STARTTEST
:so small.vim
:if !exists("+breakindent") | e! test.ok | w! test.out | qa! | endif
:10new|:vsp|:vert resize 20
:put =\"\tabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOP\"
:set ts=4 sw=4 sts=4 breakindent
:fu! ScreenChar(line, width)
:[7Clet c=''
:[7Cfor i in range(1,a:width)
:[15Clet c.=nr2char(screenchar(a:line, i))
:[7Cendfor
:[7Clet c.="\n"
:[7Cfor i in range(1,a:width)
:[15Clet c.=nr2char(screenchar(a:line+1, i))
:[7Cendfor
:[7Clet c.="\n"
:[7Cfor i in range(1,a:width)
:[15Clet c.=nr2char(screenchar(a:line+2, i))
:[7Cendfor
:[7Creturn c
:endfu
:fu DoRecordScreen()
:[7Cwincmd l
:[7C$put =printf(\"\n%s\", g:test)
:[7C$put =g:line1
:[7Cwincmd p
:endfu
:set briopt=min:0
:let g:test="Test 1: Simple breakindent"
:let line1=ScreenChar(line('.'),8)
:call DoRecordScreen()
:let g:test="Test 2: Simple breakindent + sbr=>>"
:set sbr=>>
:let line1=ScreenChar(line('.'),8)
:call DoRecordScreen()
:let g:test ="Test 3: Simple breakindent + briopt:sbr"
:set briopt=sbr,min:0 sbr=++
:let line1=ScreenChar(line('.'),8)
:call DoRecordScreen()
:let g:test ="Test 4: Simple breakindent + min width: 18"
:set sbr= briopt=min:18
:let line1=ScreenChar(line('.'),8)
:call DoRecordScreen()
:let g:test =" Test 5: Simple breakindent + shift by 2"
:set briopt=shift:2,min:0
:let line1=ScreenChar(line('.'),8)
:call DoRecordScreen()
:let g:test=" Test 6: Simple breakindent + shift by -1"
:set briopt=shift:-1,min:0
:let line1=ScreenChar(line('.'),8)
:call DoRecordScreen()
:let g:test=" Test 7: breakindent + shift by +1 + nu + sbr=? briopt:sbr"
:set briopt=shift:1,sbr,min:0 nu sbr=? nuw=4
:let line1=ScreenChar(line('.'),10)[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for breakindent[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 117 lines, 3627 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:set cpo+=n sbr=~ nu nuw=4 nolist briopt=sbr,min:0
:let line1=ScreenChar(line('.'),10)
:call DoRecordScreen()
:wincmd p
:let g:test="\n Test 11: strdisplaywidth when breakindent is on"
:set cpo-=n sbr=>> nu nuw=4 nolist briopt= ts=4
:let text=getline(2) "skip leading tab when calculating text width
:let width = strlen(text[1:])+indent(2)*4+strlen(&sbr)*3 " text wraps 3 times
:$put =g:test
:$put =printf(\"strdisplaywidth: %d == calculated: %d\", strdisplaywidth(text), width)
:let g:str="\t\t\t\t\t{"
:let g:test=" Test 12: breakindent + long indent"
:wincmd p
:set all& breakindent linebreak briopt=min:10 nu numberwidth=3 ts=4
:$put =g:str
zt:let line1=ScreenChar(1,10)
:wincmd p
:call DoRecordScreen()
:"
:" Test, that the string "    a\tb\tc\td\te" is correctly
:" displayed in a 20 column wide window (see bug report
:" https://groups.google.com/d/msg/vim_dev/ZOdg2mc9c9Y/TT8EhFjEy0IJ
:only
:vert 20new
:set all& nocp breakindent briopt=min:10
:call setline(1, ["    a\tb\tc\td\te", "    z   y[7Cx[7Cw[7Cv"])
:/^\s*a
fbgjyl:let line1 = @0
:?^\s*z
fygjyl:let line2 = @0
:quit!
:$put ='Test 13: breakindent with wrapping Tab'
:$put =line1
:$put =line2
:"
:let g:test="Test 14: breakindent + visual blockwise delete #1"
:set all& breakindent viminfo+=nviminfo
:30vnew
:normal! 3a1234567890
:normal! a    abcde
:exec "normal! 0\<C-V>tex"
:let line1=ScreenChar(line('.'),8)
:call DoRecordScreen()
:"
:let g:test="Test 15: breakindent + visual blockwise delete #2"
:%d
:normal! 4a1234567890
:exec "normal! >>\<C-V>3f0x"
:let line1=ScreenChar(line('.'),20)
:call DoRecordScreen()
:quit!
:"
:%w! test.out
:qa!
ENDTEST
dummy text[55;1H[?12l[?25h
[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !exists("+breakindent") | e! test.ok | w! test.out | qa! | endif[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h10new|:vsp|:vert resize 20[?25l[1;1H                    [7m|[2;21H|[3;21H|[4;21H|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[10;21H|[m[2;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   [m
[1m[7m[No Name]            [m[1;22H[K[2;22H[1m[34m~                                                                 [3;22H~                                                                 [4;22H~                                                                 [5;22H~                                                                 [6;22H~                                                                 [7;22H~                                                                 [8;22H~                                                                 [9;22H~                                                                 [10;22H~                                                                 [m[11;22H[7m[No Name]                                                         [m[12;2Hwincmd p[12;10H[K[13;2Hset all& breakindent linebreak briopt=min:10 nu numberwidth=3 ts=4
:$put =g:st[14;13H[K[15;1Hzt:let line1=ScreenChar(1,10)
:wincmd p[16;10H[K[17;2Hcall DoRecordScreen()
:"[18;3H[K[19;4HTest, that the string "    a\tb\tc\td\te" is correctly
:" displayed in a 20 column wide window (see bug repor[20;56H[K[21;4Hhttps://groups.google.com/d/msg/vim_dev/ZOdg2mc9c9Y/TT8EhFjEy0IJ
:only[22;6H[K[23;2Hvert 20new
:set all& nocp breakindent briopt=min:10
:call setline(1, ["    a\tb\tc\td\te", "    z   y[7Cx[7Cw[7Cv"])
:/^\s*a[26;8H[K[27;1Hfbgjyl:let line1 = @0
:?^\s*z[28;8H[K[29;1Hfygjyl:let line2 = @0
:quit![30;7H[K[31;2H$put ='Test 13: breakindent with wrapping Tab'[32;8Hline1[32;14H[K[33;12H2
:"[34;3H[K[35;2Hlet g:test="Test 14: breakindent + visual blockwise delete #1"
:set all& breakindent viminfo+=nviminfo[36;40H[K[37;2H30vnew[37;8H[K[38;2Hnormal! 3a1234567890[39;10Ha    abcde[39;20H[K[40;2Hexec "normal! 0\<C-V>tex"
:let line1=ScreenChar(line('.'),8)
:call DoRecordScreen()[42;23H[K[43;2H"[43;3H[K[44;2Hlet g:test="Test 15: breakindent + visual blockwise delete #2"
:%d[45;4H[K[46;2Hnormal! 4a1234567890
:exec "normal! >>\<C-V>3f0x"
:let line1=ScreenChar(line('.'),20)
:call DoRecordScreen()[49;23H[K[50;2Hquit![50;7H[K[51;2H"[51;3H[K[52;2H%w! test.out
:qa[53;6H[K[54;1HENDTEST
dummy text
[7mtest_breakindent.in                                                                    [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hput =\"\tabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOP\"[?25l[2;1H        abcdefghijkl
mnopqrstuvwxyzABCDEF
GHIJKLMNOP          [11;11H[1m[7m[+][m[2;22H        abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOP[2;72H[K[11;32H[7m[+][2;9H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset ts=4 sw=4 sts=4 breakindent[?25l[2;5Habcdefghijklmnop
qrstuvwxyzABCDEFGHIJ
KLMNOP    [2;26HabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOP[2;68H[K[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfu! ScreenChar(line, width)[?25l
:  [?12l[?25h:[34m^I[mlet c=''
[?25l:  [?12l[?25h:[34m^I[mfor i in range(1,a:width)
[?25l:    [?12l[?25h:[34m^I^I[mlet c.=nr2char(screenchar(a:line, i))
[?25l:    [?12l[?25h:[34m^I[mendfor
[?25l:  [?12l[?25h:       let c.="\n"
[?25l:  [?12l[?25h:[34m^I[mfor i in range(1,a:width)
[?25l:    [?12l[?25h:[34m^I^I[mlet c.=nr2char(screenchar(a:line+1, i))
[?25l:    [?12l[?25h:[34m^I[mendfor
[?25l:  [?12l[?25h:       let c.="\n"
[?25l:  [?12l[?25h:[34m^I[mfor i in range(1,a:width)
[?25l:    [?12l[?25h:[34m^I^I[mlet c.=nr2char(screenchar(a:line+2, i))
[?25l:    [?12l[?25h:[34m^I[mendfor
[?25l:  [?12l[?25h:[34m^I[mreturn c
[?25l:  [?12l[?25h:endfu[1;1H[14L[?25l[1;21H[7m|[m
    abcdefghijklmnop[7m|[m
qrstuvwxyzABCDEFGHIJ[7m|[m
KLMNOP[14C[7m|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[10;21H|[m[5;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   [m
[1m[7m[No Name] [+]        [m[2;26HabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOP[3;22H[1m[34m~                                                                 [4;22H~                                                                 [5;22H~                                                                 [6;22H~                                                                 [7;22H~                                                                 [8;22H~                                                                 [9;22H~                                                                 [10;22H~                                                                 [m[11;22H[7m[No Name] [+]                                                     [m[12;1H:wincmd p
:set all& breakindent linebreak briopt=min:10 nu numberwidth=3 ts=4
:$put =g:str[57;1H[K[2;5H[?12l[?25h[?25l[57;1H:[?12l[?25hfu DoRecordScreen()[?25l
:  [?12l[?25h:[34m^I[mwincmd l
[?25l:  [?12l[?25h:[34m^I[m$put =printf(\"\n%s\", g:test)
[?25l:  [?12l[?25h:[34m^I[m$put =g:line1
[?25l:  [?12l[?25h:[34m^I[mwincmd p
[?25l:  [?12l[?25h:endfu[1;1H[5L[?25l[1;21H[7m|[m
    abcdefghijklmnop[7m|[m
qrstuvwxyzABCDEFGHIJ[7m|[m
KLMNOP[14C[7m|[5;21H|[m[1m[34m~                   [m[2;26HabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOP[3;22H[1m[34m~                                                                 [4;22H~                                                                 [5;22H~                                                                 [m[57;1H[K[2;5H[?12l[?25h[?25l[57;1H:[?12l[?25hset briopt=min:0[?25l[3;1H    qrstuvwxyzABCDEF
    GHIJKLMNOP[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 1: Simple breakindent"[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet line1=ScreenChar(line('.'),8)[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[5;1H                    
Test 1: Simple break
indent              
    abcd            
    qrst            
    GHIJ            [3;22H[K[4;22HTest 1: Simple breakindent[4;48H[K[5;22H    abcd[5;30H[K[6;22H    qrst[6;30H[K[7;22H    GHIJ[7;30H[K[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 2: Simple breakindent + sbr=>>"[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset sbr=>>[?25l[3;5H[1m[34m>>[mqrstuvwxyzABCD
    [1m[34m>>[mEFGHIJKLMNOP


[1m[34m>>[mindent[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet line1=ScreenChar(line('.'),8)[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[1;22H                                                                  [2;22HTest 1: Simple breakindent                                        [3;22H    abcd                                                          [4;22H    qrst                                                          [5;22H    GHIJ                                                          [6;22H[1m[34m~                                                                 [7;22H~                                                                 [8;22H~                                                                 [m[9;22H                                                                  [10;22H                                                                  [6;22H[K[7;22HTest 2: Simple breakindent + sbr=>>[7;57H[K[8;22H    abcd[8;30H[K[9;26H>>qr[10;26H>>EF[57;1H[K[57;1H3 more lines[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 3: Simple breakindent + briopt:sbr"[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset briopt=sbr,min:0 sbr=++[?25l[3;1H[1m[34m++[m  qrstuvwxyzABCDEF
[1m[34m++[m  GHIJKLMNOP    


[1m[34m++[mi[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet line1=ScreenChar(line('.'),8)[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[1;22H                                                                  [2;22HTest 2: Simple breakindent + sbr=>>                               [3;22H    abcd                                                          [4;22H    >>qr                                                          [5;22H    >>EF                                                          [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [7;22HTest 3: Simple breakindent + briopt:sbr[8;26Habcd[9;22H++  qrst[10;22H++  GHIJ[57;1H[K[57;1H3 more lines[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 4: Simple breakindent + min width: 18"[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset sbr= briopt=min:18[?25l[3;1H  qrstuvwxyzABCDEFGH
  IJKLMNOP    


indent  [2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet line1=ScreenChar(line('.'),8)[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[1;22H                                                                  [2;22HTest 3: Simple breakindent + briopt:sbr                           [3;22H    abcd                                                          [4;22H++  qrst                                                          [5;22H++  GHIJ                                                          [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [7;22HTest 4: Simple breakindent + min width: 18[8;26Habcd[9;24Hqrstuv[10;24HIJKLMN[57;1H[K[57;1H3 more lines[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test =" Test 5: Simple breakindent + shift by 2"[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset briopt=shift:2,min:0[?25l[3;3H    qrstuvwxyzABCD
      EFGHIJKLMNOP


  indent[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet line1=ScreenChar(line('.'),8)[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[1;22H                                                                  [2;22HTest 4: Simple breakindent + min width: 18                        [3;22H    abcd                                                          [4;22H  qrstuv                                                          [5;22H  IJKLMN                                                          [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [7;23HTest 5: Simple breakindent + shift by 2[8;26Habcd[9;28Hqr[10;28HEF[57;1H[K[57;1H3 more lines[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test=" Test 6: Simple breakindent + shift by -1"[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset briopt=shift:-1,min:0[?25l[3;4HqrstuvwxyzABCDEFG
   HIJKLMNOP      


indent  [2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet line1=ScreenChar(line('.'),8)[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[1;22H                                                                  [2;22H Test 5: Simple breakindent + shift by 2                          [3;22H    abcd                                                          [4;22H      qr                                                          [5;22H      EF                                                          [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [7;23HTest 6: Simple breakindent + shift by -1[8;26Habcd[9;25Hqrstu[10;25HHIJKL[57;1H[K[57;1H3 more lines[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test=" Test 7: breakindent + shift by +1 + nu + sbr=? briopt:sbr"[?25l[2;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset briopt=shift:1,sbr,min:0 nu sbr=? nuw=4[?25l[1;1H[33m  1 
  2 [m    abcdefghijkl
[1m[34m?[m        mnopqrstuvw
[1m[34m?[m        xyzABCDEFGH
[1m[34m?[m[8CIJKLMNOP
[33m  3 [m                
[33m  4 [mTest 1: Simple b
[1m[34m?[m    reakindent
[33m  5 [m    abcd
[33m  6 [m    qrst[2;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet line1=ScreenChar(line('.'),10)[?25l[2;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[1;22H                                                                  [2;22H Test 6: Simple breakindent + shift by -1                         [3;22H    abcd                                                          [4;22H   qrstu                                                          [5;22H   HIJKL                                                          [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [7;23HTest 7: breakindent + shift by +1 + nu + sbr=? briopt:sbr[8;24H2     ab[9;22H?[8Cm[10;22H?[8Cx[57;1H[K[57;1H3 more lines[2;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test=" Test 8: breakindent + shift:1 + nu + sbr=# list briopt:sbr"[?25l[2;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset briopt=shift:1,sbr,min:0 nu sbr=# list[?25l[1;5H[1m[34m$[m[2;5H[34m^I[mabcdefghijklmn
[1m[34m#[m      opqrstuvwxyzA
[1m[34m#[m      BCDEFGHIJKLMN
[1m[34m#[m      OP[1m[34m$[m       [6;5H[1m[34m$

#[m [13C[1m[34m$[9;13H$[10;13H$[2;7H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet line1=ScreenChar(line('.'),10)[?25l[2;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[1;22H                                                                  [2;22H Test 7: breakindent + shift by +1 + nu + sbr=? briopt:sbr        [3;22H  2     ab                                                        [4;22H?        m                                                        [5;22H?        x                                                        [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [7;23HTest 8: breakindent + shift:1 + nu + sbr=# list briopt:sbr[8;24H2 ^Iabcd[9;22H#      opq[10;22H#      BCD[57;1H[K[57;1H3 more lines[2;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test=" Test 9: breakindent + shift by +1 + 'nu' + sbr=# list"[?25l[2;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset briopt-=sbr[?25l[3;1H       [1m[34m#[mopqrstuvwxyz
       [1m[34m#[mABCDEFGHIJKL
       [1m[34m#[mMNOP[1m[34m$[m


     [1m[34m#[mreakindent[1m[34m$[2;7H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet line1=ScreenChar(line('.'),10)[?25l[2;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[1;22H                                                                  [2;22H Test 8: breakindent + shift:1 + nu + sbr=# list briopt:sbr       [3;22H  2 ^Iabcd                                                        [4;22H#      opq                                                        [5;22H#      BCD                                                        [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [7;23HTest 9: breakindent + shift by +1 + 'nu' + sbr=# list[8;24H2 ^Iabcd[9;29H#op[10;29H#AB[57;1H[K[57;1H3 more lines[2;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test=" Test 10: breakindent + shift by +1 + 'nu' + sbr=~ cpo+=n"[?25l[2;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo+=n sbr=~ nu nuw=4 nolist briopt=sbr,min:0[?25l[1;5H  [2;5H    abcdefghijkl
[1m[34m~[m       mnopqrstuvwx
[1m[34m~[m       yzABCDEFGHIJ
[1m[34m~[m       KLMNOP[6;5H  

[1m[34m~[m   reakindent    [9;13H  [10;13H  [2;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet line1=ScreenChar(line('.'),10)[?25l[2;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[1;22H                                                                  [2;22H Test 9: breakindent + shift by +1 + 'nu' + sbr=# list            [3;22H  2 ^Iabcd                                                        [4;22H       #op                                                        [5;22H       #AB                                                        [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [7;23HTest 10: breakindent + shift by +1 + 'nu' + sbr=~ cpo+=n[8;24H2     ab[9;22H~[7Cmn[10;22H~[7Cyz[57;1H[K[57;1H3 more lines[2;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd p[?25l[11;1H[7m[No Name] [+][m[1m[7m [m[7m        [m[1m[7m[No Name] [+]                                                     [10;22H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet g:test="\n Test 11: strdisplaywidth when breakindent is on"[?25l[10;22H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo-=n sbr=>> nu nuw=4 nolist briopt= ts=4[?25l[3;1H[33m    [m[1m[34m>>[m
[33m    [m[1m[34m>>[m
[33m    [m[1m[34m>>[m


[33m    [m[1m[34m>>[mreakindent[1;22H[33m 43 [2;22H 44 [m Test 9: breakindent + shift by +1 + 'nu' + sbr=# list[3;22H[33m 45 [m  2 ^Iabcd[4;22H[33m 46 [m       #op[5;22H[33m 47 [m       #AB[6;22H[33m 48 [7;22H 49 [m Test 10: breakindent + shift by +1 + 'nu' + sbr=~ cpo+=n[8;22H[33m 50 [m  2     ab[9;22H[33m 51 [m~       mn[10;22H[33m 52 [m~       yz[10;26H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet text=getline(2) "skip leading tab when calculating text width[?25l[10;26H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet width = strlen(text[1:])+indent(2)*4+strlen(&sbr)*3 " text wraps 3 times[?25l[10;26H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =g:test[?25l[1;22H[33m 45 [m  2 ^Iabcd                                                    [2;22H[33m 46 [m       #op                                                    [3;22H[33m 47 [m       #AB                                                    [4;22H[33m 48 [m                                                              [5;22H[33m 49 [m Test 10: breakindent + shift by +1 + 'nu' + sbr=~ cpo+=n     [6;22H[33m 50 [m  2     ab                                                    [7;22H[33m 51 [m~       mn                                                    [8;22H[33m 52 [m~       yz                                                    [9;22H                                                                  [10;22H                                                                  [9;22H[33m 53 [10;22H 54 [m Test 11: strdisplaywidth when breakindent is on[57;1H[K[10;27H[?12l[?25h[?25l[57;1H:[?12l[?25h$put =printf(\"strdisplaywidth: %d == calculated: %d\", strdisplaywidth(text), width)[?25l[1;22H[33m 46 [m       #op                                                    [2;22H[33m 47 [m       #AB                                                    [3;22H[33m 48 [m                                                              [4;22H[33m 49 [m Test 10: breakindent + shift by +1 + 'nu' + sbr=~ cpo+=n     [5;22H[33m 50 [m  2     ab                                                    [6;22H[33m 51 [m~       mn                                                    [7;22H[33m 52 [m~       yz                                                    [8;22H[33m 53 [m                                                              [9;22H[33m 54 [m Test 11: strdisplaywidth when breakindent is on              [10;22H                                                                  [10;22H[33m 55 [mstrdisplaywidth: 46 == calculated: 64[57;1H[K[10;26H[?12l[?25h[?25l[57;1H:[?12l[?25hlet g:str="\t\t\t\t\t{"[?25l[10;26H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test=" Test 12: breakindent + long indent"[?25l[10;26H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd p[?25l[11;1H[1m[7m[No Name] [+]        [m[7m[No Name] [+][m[1m[7m [m[7m                                                     [2;9H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset all& breakindent linebreak briopt=min:10 nu numberwidth=3 ts=4[?25l[27m[23m[m[H[2J[1;1H[33m 1 [m[17C[7m|[m
[33m 2 [m[17C[7m|[m[3;8Habcdefghijklm[7m|[m[4;8Hnopqrstuvwxyz[7m|[m[5;8HABCDEFGHIJKLM[7m|[m[6;8HNOP[10C[7m|[m
[33m 3 [m[17C[7m|[m
[33m 4 [mTest 1: Simple   [7m|[m
   breakindent      [7m|[m
[33m 5 [m    abcd[9C[7m|[m
[1m[7m[No Name]            [m[1;22H[33m 46 [m[7C#op[2;22H[33m 47 [m[7C#AB[3;22H[33m 48 [4;22H 49 [m Test 10: breakindent + shift by +1 + 'nu' + sbr=~ cpo+=n[5;22H[33m 50 [m  2     ab[6;22H[33m 51 [m~[7Cmn[7;22H[33m 52 [m~[7Cyz[8;22H[33m 53 [9;22H 54 [m Test 11: strdisplaywidth when breakindent is on[10;22H[33m 55 [mstrdisplaywidth: 46 == calculated: 64[11;22H[7m[No Name]                                                         [m[12;1H:wincmd p
:set all& breakindent linebreak briopt=min:10 nu numberwidth=3 ts=4
:$put =g:str
zt:let line1=ScreenChar(1,10)
:wincmd p
:call DoRecordScreen()
:"
:" Test, that the string "    a\tb\tc\td\te" is correctly
:" displayed in a 20 column wide window (see bug report
:" https://groups.google.com/d/msg/vim_dev/ZOdg2mc9c9Y/TT8EhFjEy0IJ
:only
:vert 20new
:set all& nocp breakindent briopt=min:10
:call setline(1, ["    a\tb\tc\td\te", "    z   y[7Cx[7Cw[7Cv"])
:/^\s*a
fbgjyl:let line1 = @0
:?^\s*z
fygjyl:let line2 = @0
:quit!
:$put ='Test 13: breakindent with wrapping Tab'
:$put =line1
:$put =line2
:"
:let g:test="Test 14: breakindent + visual blockwise delete #1"
:set all& breakindent viminfo+=nviminfo
:30vnew
:normal! 3a1234567890
:normal! a    abcde
:exec "normal! 0\<C-V>tex"
:let line1=ScreenChar(line('.'),8)
:call DoRecordScreen()
:"
:let g:test="Test 15: breakindent + visual blockwise delete #2"
:%d
:normal! 4a1234567890
:exec "normal! >>\<C-V>3f0x"
:let line1=ScreenChar(line('.'),20)
:call DoRecordScreen()
:quit!
:"
:%w! test.out
:qa!
ENDTEST
dummy text
[7mtest_breakindent.in                                                                    [3;8H[?12l[?25h[?25l[57;1H[m:[?12l[?25h$put =g:str[?25l[1;1H[33m54[m[2CTest 11:
    strdisplaywidth
    when            
    breakindent is  
    on              
[33m55 [mstrdisplaywidth:
   46 ==
   calculated: 64
[33m56 [m           
             {[11;11H[1m[7m[+][m[18C[7m[+][10;14H[?12l[?25h[?25l[m[1;1H[33m56 [m                 
             {      
                    
                    
                    
                    
                    
                    
                    
                    [3;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   [m[57;1H[K[2;14H[?12l[?25h[?25l[57;1H:[?12l[?25hlet line1=ScreenChar(1,10)[?25l[2;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd p[?25l[11;1H[7m[No Name] [+][m[1m[7m [m[7m        [m[1m[7m[No Name] [+]                                                     [10;26H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[3;1H[33m57 [m                 
[33m58 [m Test 12:        
    breakindent +   
    long indent     
[33m59 [m56               
[33m60 [m                 
[33m61 [m~                

[1m[7m[No Name] [+]        [m[1;22H[33m 52 [m~       yz                                                    [2;22H[33m 53 [m                                                              [3;22H[33m 54 [m Test 11: strdisplaywidth when breakindent is on              [4;22H[33m 55 [mstrdisplaywidth: 46 == calculated: 64                         [5;22H                                                                  [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [5;22H[33m 56 [m[20C{[6;22H[33m 57 [7;22H 58 [m Test 12: breakindent + long indent[8;22H[33m 59 [m56[9;22H[33m 60 [10;22H 61 [m~[11;22H[7m[No Name] [+][m[1m[7m [m[7m                                                     [m[57;1H[K[57;1H3 more lines[2;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[2;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test, that the string "    a\tb\tc\td\te" is correctly[?25l[2;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" displayed in a 20 column wide window (see bug report[?25l[2;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" https://groups.google.com/d/msg/vim_dev/ZOdg2mc9c9Y/TT8EhFjEy0IJ[?25l[2;14H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25honly[?25l[1;21H   {[1;25H[K[2;1H[33m57 [m[2;14H[K[3;2H[33m8[m[2CTest 12: breakindent + long indent[3;39H[K[4;2H[33m9[m[1C56       [4;21H[K[5;1H[33m60 [m          [5;14H[K[6;1H[33m61 [m~         [6;14H[K[7;1H[1m[34m~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;21H                                                                   [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;24H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hvert 20new[?25l[1;1H[33m 1[m[18C[7m|[2;21H|[3;21H|[4;21H|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[10;21H|[11;21H|[12;21H|[13;21H|[14;21H|[15;21H|[16;21H|[17;21H|[18;21H|[19;21H|[20;21H|[21;21H|[22;21H|[23;21H|[24;21H|[25;21H|[26;21H|[27;21H|[28;21H|[29;21H|[30;21H|[31;21H|[32;21H|[33;21H|[34;21H|[35;21H|[36;21H|[37;21H|[38;21H|[39;21H|[40;21H|[41;21H|[42;21H|[43;21H|[44;21H|[45;21H|[46;21H|[47;21H|[48;21H|[49;21H|[50;21H|[51;21H|[52;21H|[53;21H|[54;21H|[55;21H|[m[2;1H[1m[34m~                   
~                   
~                   
~                   
~                   [m[56;1H[1m[7m[No Name]            [m[1;22H[33m56 [m[20C{[2;22H[33m57 [3;22H58 [m Test 12: breakindent + long indent[4;22H[33m59 [m56[5;22H[33m60 [6;22H61 [m~[7;22H[1m[34m~[8;22H~[9;22H~[10;22H~[11;22H~[12;22H~[13;22H~[14;22H~[15;22H~[16;22H~[17;22H~[18;22H~[19;22H~[20;22H~[21;22H~[22;22H~[23;22H~[24;22H~[25;22H~[26;22H~[27;22H~[28;22H~[29;22H~[30;22H~[31;22H~[32;22H~[33;22H~[34;22H~[35;22H~[36;22H~[37;22H~[38;22H~[39;22H~[40;22H~[41;22H~[42;22H~[43;22H~[44;22H~[45;22H~[46;22H~[47;22H~[48;22H~[49;22H~[50;22H~[51;22H~[52;22H~[53;22H~[54;22H~[55;22H~[m[56;22H[7m[No Name] [+]                                                     [1;4H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset all& nocp breakindent briopt=min:10[?25l[27m[23m[m[H[2J[1;21H[7m|[2;21H|[3;21H|[4;21H|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[10;21H|[11;21H|[12;21H|[13;21H|[14;21H|[15;21H|[16;21H|[17;21H|[18;21H|[19;21H|[20;21H|[21;21H|[22;21H|[23;21H|[24;21H|[25;21H|[26;21H|[27;21H|[28;21H|[29;21H|[30;21H|[31;21H|[32;21H|[33;21H|[34;21H|[35;21H|[36;21H|[37;21H|[38;21H|[39;21H|[40;21H|[41;21H|[42;21H|[43;21H|[44;21H|[45;21H|[46;21H|[47;21H|[48;21H|[49;21H|[50;21H|[51;21H|[52;21H|[53;21H|[54;21H|[55;21H|[m[2;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   [m
[1m[7m[No Name]            [m[1;22H[33m56 [m[20C{[2;22H[33m57 [3;22H58 [m Test 12: breakindent + long indent[4;22H[33m59 [m56[5;22H[33m60 [6;22H61 [m~[7;22H[1m[34m~                                                                 [8;22H~                                                                 [9;22H~                                                                 [10;22H~                                                                 [11;22H~                                                                 [12;22H~                                                                 [13;22H~                                                                 [14;22H~                                                                 [15;22H~                                                                 [16;22H~                                                                 [17;22H~                                                                 [18;22H~                                                                 [19;22H~                                                                 [20;22H~                                                                 [21;22H~                                                                 [22;22H~                                                                 [23;22H~                                                                 [24;22H~                                                                 [25;22H~                                                                 [26;22H~                                                                 [27;22H~                                                                 [28;22H~                                                                 [29;22H~                                                                 [30;22H~                                                                 [31;22H~                                                                 [32;22H~                                                                 [33;22H~                                                                 [34;22H~                                                                 [35;22H~                                                                 [36;22H~                                                                 [37;22H~                                                                 [38;22H~                                                                 [39;22H~                                                                 [40;22H~                                                                 [41;22H~                                                                 [42;22H~                                                                 [43;22H~                                                                 [44;22H~                                                                 [45;22H~                                                                 [46;22H~                                                                 [47;22H~                                                                 [48;22H~                                                                 [49;22H~                                                                 [50;22H~                                                                 [51;22H~                                                                 [52;22H~                                                                 [53;22H~                                                                 [54;22H~                                                                 [55;22H~                                                                 [m[56;22H[7m[No Name] [+]                                                     [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hcall setline(1, ["    a\tb\tc\td\te", "    z   y       x       w       v"])[?25l[1;5Ha   b[7Cc
        d   e       
    z   y       x   
        w       v   [56;11H[1m[7m[+][1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h/^\s*a[?25l[31msearch hit BOTTOM, continuing at TOP[1;5H[?12l[?25h[ma   [2;9H[?25l[57;1H[K[57;1H:[?12l[?25hlet line1 = @0[?25l[2;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h?^\s*z[?25l[31msearch hit TOP, continuing at BOTTOM[3;5H[?12l[?25h[mz   [4;9H[?25l[57;1H[K[57;1H:[?12l[?25hlet line2 = @0[?25l[4;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hquit![?25l[1;1H[33m56 [m      [7C       {[1;45H[K[2;1H[33m57 [m[2;9H[K[3;1H[33m58 [m Test 12: breakindent + long indent[3;39H[K[4;1H[33m59 [m56    [4;17H[K[5;1H[33m60 [m          [5;14H[K[6;1H[33m61 [m~         [6;14H[K[7;21H[1m[34m   [8;21H   [9;21H   [10;21H   [11;21H   [12;21H   [13;21H   [14;21H   [15;21H   [16;21H   [17;21H   [18;21H   [19;21H   [20;21H   [21;21H   [22;21H   [23;21H   [24;21H   [25;21H   [26;21H   [27;21H   [28;21H   [29;21H   [30;21H   [31;21H   [32;21H   [33;21H   [34;21H   [35;21H   [36;21H   [37;21H   [38;21H   [39;21H   [40;21H   [41;21H   [42;21H   [43;21H   [44;21H   [45;21H   [46;21H   [47;21H   [48;21H   [49;21H   [50;21H   [51;21H   [52;21H   [53;21H   [54;21H   [55;21H   
~                                                                                      [1;24H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put ='Test 13: breakindent with wrapping Tab'[?25l[7;1H[33m62 [mTest 13: breakindent with wrapping Tab[7;42H[K[7;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =line1[?25l[8;1H[33m63 [md[8;5H[K[8;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =line2[?25l[9;1H[33m64 [mw[9;5H[K[9;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[9;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 14: breakindent + visual blockwise delete #1"[?25l[9;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset all& breakindent viminfo+=nviminfo[?25l[27m[23m[m[H[2J[1;41H{

 Test 12: breakindent + long indent
56

~
Test 13: breakindent with wrapping Tab
d
w
[1m[34m~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [9;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h30vnew[?25l[1;31H[7m|[2;31H|[3;31H|[4;31H|[5;31H|[6;31H|[7;31H|[8;31H|[9;31H|[10;31H|[11;31H|[12;31H|[13;31H|[14;31H|[15;31H|[16;31H|[17;31H|[18;31H|[19;31H|[20;31H|[21;31H|[22;31H|[23;31H|[24;31H|[25;31H|[26;31H|[27;31H|[28;31H|[29;31H|[30;31H|[31;31H|[32;31H|[33;31H|[34;31H|[35;31H|[36;31H|[37;31H|[38;31H|[39;31H|[40;31H|[41;31H|[42;31H|[43;31H|[44;31H|[45;31H|[46;31H|[47;31H|[48;31H|[49;31H|[50;31H|[51;31H|[52;31H|[53;31H|[54;31H|[55;31H|[m[2;1H[1m[34m~                             
~                             
~                             
~                             
~                             
~                             
~                             
~                             [m[56;1H[1m[7m[No Name]                      [m[1;41H [30C{[3;32H Test 12: breakindent + long indent[4;32H56[6;32H~[7;32HTest 13: breakindent with wrapping Tab[8;32Hd[9;32Hw[10;32H[1m[34m~[11;32H~[12;32H~[13;32H~[14;32H~[15;32H~[16;32H~[17;32H~[18;32H~[19;32H~[20;32H~[21;32H~[22;32H~[23;32H~[24;32H~[25;32H~[26;32H~[27;32H~[28;32H~[29;32H~[30;32H~[31;32H~[32;32H~[33;32H~[34;32H~[35;32H~[36;32H~[37;32H~[38;32H~[39;32H~[40;32H~[41;32H~[42;32H~[43;32H~[44;32H~[45;32H~[46;32H~[47;32H~[48;32H~[49;32H~[50;32H~[51;32H~[52;32H~[53;32H~[54;32H~[55;32H~[m[56;32H[7m[No Name]                                               [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hnormal! 3a1234567890[?25l[57;1H[K[1;1H123456789012345678901234567890[56;11H[1m[7m[+][1;30H[?12l[?25h[?25l[57;1H[m:[?12l[?25hnormal! a    abcde[?25l[57;1H[K[2;1H    abcde                     [2;9H[?12l[?25h[?25l[57;1H:[?12l[?25hexec "normal! 0\<C-V>tex"[?25l[1;1He                             
[1m[34m~                             [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet line1=ScreenChar(line('.'),8)[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[10;32H[K[11;32HTest 14: breakindent + visual blockwise delete #1[11;81H[K[12;32He       [12;40H[K[13;32H~       [13;40H[K[14;32H~       [14;40H[K[56;42H[7m[+][1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 15: breakindent + visual blockwise delete #2"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h%d[?25l[1;1H [57;1H--No lines in buffer--[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnormal! 4a1234567890[?25l[57;1H[K[1;1H123456789012345678901234567890
1234567890                    [2;10H[?12l[?25h[?25l[57;1H:[?12l[?25hexec "normal! >>\<C-V>3f0x"[?25l[1;1H        1234567890            
[1m[34m~                             [1;9H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet line1=ScreenChar(line('.'),20)[?25l[1;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l3 more lines[57;13H[K[15;32H[K[16;32HTest 15: breakindent + visual blockwise delete #2[16;81H[K[17;32H        1234567890  [17;52H[K[18;32H~                   [18;52H[K[19;32H~                   [19;52H[K[1;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hquit![?25l[1;9H          [12C [9C{[1;72H[K[2;1H[K[3;1H Test 12: breakindent + long indent[3;36H[K[4;1H56        [4;11H[K[5;1H          [5;11H[K[6;1H~         [6;11H[K[7;1HTest 13: breakindent with wrapping Tab[7;39H[K[8;1Hd[8;2H[K[9;1Hw[9;2H[K[10;1H[K[11;1HTest 14: breakindent + visual blockwise delete #1[11;50H[K[12;1He       [12;9H[K[13;1H~       [13;9H[K[14;1H~       [14;9H[K[15;1H[K[16;1HTest 15: breakindent + visual blockwise delete #2[16;50H[K[17;1H        1234567890  [17;21H[K[18;1H~                   [18;21H[K[19;1H~                   [19;21H[K[20;31H[1m[34m   [21;31H   [22;31H   [23;31H   [24;31H   [25;31H   [26;31H   [27;31H   [28;31H   [29;31H   [30;31H   [31;31H   [32;31H   [33;31H   [34;31H   [35;31H   [36;31H   [37;31H   [38;31H   [39;31H   [40;31H   [41;31H   [42;31H   [43;31H   [44;31H   [45;31H   [46;31H   [47;31H   [48;31H   [49;31H   [50;31H   [51;31H   [52;31H   [53;31H   [54;31H   [55;31H   
~                                                                                      [19;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h%w! test.out[?25l"test.out" [57;12H[K[57;12H[New] 74L, 1210C written[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_breakindent = test61; then \
#	  if diff test.out test_breakindent.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_breakindent.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_breakindent.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_changelist.failed test.ok test.out X* viminfo
cp test_changelist.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_changelist.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_changelist.in" 22 lines, 288 characters[1;1HTest changelist position after splitting window
Set 'undolevels' to make changelist for sourced file

STARTTEST
:so small.vim
Gkylp:set ul=100
Gylp:set ul=100
gg
:vsplit
:try
:  normal g;
:  normal ggVGcpass[34m^[[m
:catch
:  normal ggVGcfail[34m^[[m
:finally
:  %w! test.out
:endtry
:qa!
ENDTEST

1
2
[1m[34m~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest changelist position after splitting window[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 14 lines, 163 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[19;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[20;1H[?12l[?25h

[21;1H[?25l11[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ul=100[?25l[21;2H[?12l[?25h
[?25l22[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ul=100[?25l[22;2H[?12l[?25h[1;1H
[?25l[57;1H[K[57;1H:[?12l[?25hvsplit[?25l[1;44H[7m|[m
ndow                                       [7m|[m
Set 'undolevels' to make changelist for sou[7m|[m
rced file[34C[7m|[m
             [30C[7m|[m
STARTTEST       [27C[7m|[m
:so small.vim  [28C[7m|[m
Gkylp:set ul=100[27C[7m|[m
Gylp:set ul=100[28C[7m|[m
gg  [39C[7m|[m
:vsplit     [31C[7m|[m
:try                  [21C[7m|[m
:  normal g;[31C[7m|[m[14;16Hpass[24C[7m|[m
:catch  [35C[7m|[m
:  normal ggVGcfail[34m^[[m[22C[7m|[m
:finally[35C[7m|[m
:  %w! test.out[28C[7m|[m
:endtry[36C[7m|[m
:qa![39C[7m|[m
ENDTEST[36C[7m|[m
  [41C[7m|[m
11                                         [7m|[m
22                                         [7m|[25;44H|[26;44H|[27;44H|[28;44H|[29;44H|[30;44H|[31;44H|[32;44H|[33;44H|[34;44H|[35;44H|[36;44H|[37;44H|[38;44H|[39;44H|[40;44H|[41;44H|[42;44H|[43;44H|[44;44H|[45;44H|[46;44H|[47;44H|[48;44H|[49;44H|[50;44H|[51;44H|[52;44H|[53;44H|[54;44H|[55;44H|[m
[1m[7mtest_changelist.in [+]                      [m[1;45HTest changelist position after splitting wi[2;45Hndow[2;49H[K[3;45HSet 'undolevels' to make changelist for sou[4;45Hrced file[6;45HSTARTTEST[7;45H:so small.vim[8;45HGkylp:set ul=100[9;45HGylp:set ul=100[10;45Hgg[11;45H:vsplit[12;45H:try[13;45H:  normal g;[14;45H:  normal ggVGcpass[34m^[[m[15;45H:catch[16;45H:  normal ggVGcfail[34m^[[m[17;45H:finally[18;45H:  %w! test.out[19;45H:endtry[20;45H:qa![21;45HENDTEST[23;45H11[23;47H[K[24;45H22[24;47H[K[25;45H[1m[34m~[26;45H~[27;45H~[28;45H~[29;45H~[30;45H~[31;45H~[32;45H~[33;45H~[34;45H~[35;45H~[36;45H~[37;45H~[38;45H~[39;45H~[40;45H~[41;45H~[42;45H~[43;45H~[44;45H~[45;45H~[46;45H~[47;45H~[48;45H~[49;45H~[50;45H~[51;45H~[52;45H~[53;45H~[54;45H~[55;45H~[m[56;45H[7mtest_changelist.in [+]                     [3;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25htry[?25l
:  [?12l[?25h:  normal g;
[?25l:  [?12l[?25h:  normal ggVGcpass[?25l21 fewer lines[57;15H[K[57;1H
:  
:  [?12l[?25h:catch
[?25l:  [?12l[?25h:  normal ggVGcfail
[?25l:  
:  [?12l[?25h:finally
[?25l:  [?12l[?25h:  %w! test.out
[?25l"test.out" [New File] 1 line, 5 characters written
:  [?12l[?25h:endtry[1;1H[10L[?25l[1;1Hpass[39C[7m|[2;44H|[3;44H|[4;44H|[5;44H|[6;44H|[7;44H|[8;44H|[9;44H|[10;44H|[m[2;1H[1m[34m~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          
~                                          [m[56;20H[1m[7m    [m[1;45Hpass[2;45H[1m[34m~                                          [3;45H~                                          [4;45H~                                          [5;45H~                                          [6;45H~                                          [7;45H~                                          [8;45H~                                          [9;45H~                                          [10;45H~                                          [11;45H~                                          [12;45H~                                          [13;45H~                                          [14;45H~                                          [15;45H~                                          [16;45H~                                          [17;45H~                                          [18;45H~                                          [19;45H~                                          [20;45H~                                          [21;45H~                                          [22;45H~                                          [23;45H~                                          [24;45H~                                          [m[56;64H[7m   [m[57;1H[K[1;4H[?12l[?25h[?25l[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_changelist = test61; then \
#	  if diff test.out test_changelist.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_changelist.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_changelist.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_close_count.failed test.ok test.out X* viminfo
cp test_close_count.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_close_count.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_close_count.in" 153 lines, 2665 characters[1;1HTests for :[count]close! and :[count]hide     vim: set ft=vim :

STARTTEST
:so small.vim
:let tests = []
:for i in range(5)
:new
:endfor
:4wincmd w
:close!
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:1close!
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:$close!
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:1wincmd w
:2close!
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:1wincmd w
:new
:new
:2wincmd w
:-1close!
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:2wincmd w
:+1close!
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:e! test.out
:call append(0, map(copy(tests), 'join(v:val, " ")'))
:w
:only!
:b1
ENDTEST

STARTTEST
:let tests = []
:for i in range(5)
:new
:endfor
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:4wincmd w
:.hide[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for :[count]close! and :[count]hide     vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 41 lines, 749 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[45;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[46;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[46;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet tests = [][?25l[46;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor i in range(5)[?25l
:  [?12l[?25h:new
[?25l:  [?12l[?25h:endfor[27m[23m[m[H[2J[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [m[10;1H[1m[7m[No Name]                                                                              [m[12;1H[1m[34m~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[7m[No Name]                                                                              [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [m[37;1H[7m[No Name]                                                                              [m[39;1H[1m[34m~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [m[47;1H[7m[No Name]                                                                              [m[48;1H:e! test.out
:call append(0, map(copy(tests), 'join(v:val, " ")'))
:w
:only!
:b1
ENDTEST

STARTTEST
[7mtest_close_count.in                                                                    [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h4wincmd w[?25l[10;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[37;1H[1m[7m[No Name]                                                                              [29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hclose![?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [m[11;1H[7m[No Name]                                                                              [m[13;1H[1m[34m~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [m[22;1H[7m[No Name]                                                                              [m[24;1H[1m[34m~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [m[33;1H[7m[No Name]                                                                              [m[35;1H[1m[34m~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [m[45;1H[1m[7m[No Name]                                                                              [m[46;1H:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:e! test.out
:call append(0, map(copy(tests), 'join(v:val, " ")'))
:w
:only!
:b1
ENDTEST

STARTTEST
[7mtest_close_count.in                                                                    [34;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[34;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[45;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7mtest_close_count.in                                                                    [54;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1close![?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [m[14;1H[7m[No Name]                                                                              [m[16;1H[1m[34m~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [m[42;1H[7m[No Name]                                                                              [m[43;1H:+1close!
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:e! test.out
:call append(0, map(copy(tests), 'join(v:val, " ")'))
:w
:only!
:b1
ENDTEST

STARTTEST
:let tests = []
[1m[7mtest_close_count.in                                                                    [53;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[53;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[53;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[53;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$close![?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[7m[No Name]                                                                              [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [m[37;1H[7m[No Name]                                                                              [m[39;1H[1m[34m~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name]                                                                              [38;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1wincmd w[?25l[19;1H[1m[7m[No Name]                                                                              [m[56;1H[7m[No Name][m[1m[7m [m[7m                                                                              [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h2close![?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7m[No Name]                                                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[28;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name]                                                                              [29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1wincmd w[?25l[28;1H[1m[7m[No Name]                                                                              [m[56;1H[7m[No Name][m[1m[7m [m[7m                                                                              [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hnew[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[1m[7m[No Name]                                                                              [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [m[38;1H[7m[No Name]                                                                              [m[40;1H[1m[34m~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7m[No Name]                                                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hnew[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [m[14;1H[1m[7m[No Name]                                                                              [m[16;1H[1m[34m~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [m[42;1H[7m[No Name]                                                                              [m[44;1H[1m[34m~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7m[No Name]                                                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h2wincmd w[?25l[14;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[28;1H[1m[7m[No Name]                                                                              [15;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h-1close![?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[1m[7m[No Name]                                                                              [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [m[38;1H[7m[No Name]                                                                              [m[40;1H[1m[34m~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7m[No Name]                                                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[19;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name]                                                                              [39;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h2wincmd w[?25l[38;1H[1m[7m[No Name]                                                                              [m[56;1H[7m[No Name][m[1m[7m [m[7m                                                                              [20;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h+1close![?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name]                                                                              [29;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! test.out[?25l"test.out" [New File][56;1H[1m[7mtest.out]  [29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall append(0, map(copy(tests), 'join(v:val, " ")'))[?25l[29;55r[29;1H[6L[1;57r[29;1H6 5 4 2 1
5 4 2 1
5 4 2
5 2
7 5 2
7 5[56;10H[1m[7m[+][m[57;1H[K[35;1H[?12l[?25h[?25l[57;1H:[?12l[?25hw[?25l"test.out" [New File] 7 lines, 39 characters written[56;10H[1m[7m    [35;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25honly![?25l[1;1H6 5 4 2 1
5 4 2 1[2;8H[K[3;1H5 4 2[3;6H[K[4;1H5 2[4;4H[K[5;1H7 5 2[5;6H[K[6;1H7 5[6;4H[K[7;1H[K[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [56;1H~                                                                                      [7;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hb1[?25l"test_close_count.in" 153 lines, 2665 characters[1;1H:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:1wincmd w
:2close!
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)[8;26H[K[9;1H:1wincmd w[9;11H[K[10;1H:new[10;5H[K[11;1H:new[11;5H[K[12;1H:2wincmd w[12;11H[K[13;1H:-1close![13;10H[K[14;1H:let buffers = [][14;18H[K[15;1H:windo call add(buffers, bufnr('%'))[15;37H[K[16;1H:call add(tests, buffers)[16;26H[K[17;1H:2wincmd w[17;11H[K[18;1H:+1close![18;10H[K[19;1H:let buffers = [][19;18H[K[20;1H:windo call add(buffers, bufnr('%'))[20;37H[K[21;1H:call add(tests, buffers)[21;26H[K[22;1H:e! test.out[22;13H[K[23;1H:call append(0, map(copy(tests), 'join(v:val, " ")'))[23;54H[K[24;1H:w[24;3H[K[25;1H:only![25;7H[K[26;1H:b1[26;4H[K[27;1HENDTEST[27;8H[K[28;1H[K[29;1HSTARTTEST[29;10H[K[30;1H:let tests = [][30;16H[K[31;1H:for i in range(5)[31;19H[K[32;1H:new[32;5H[K[33;1H:endfor[33;8H[K[34;1H:let buffers = [][34;18H[K[35;1H:windo call add(buffers, bufnr('%'))[35;37H[K[36;1H:call add(tests, buffers)[36;26H[K[37;1H:4wincmd w[37;11H[K[38;1H:.hide[38;7H[K[39;1H:let buffers = [][39;18H[K[40;1H:windo call add(buffers, bufnr('%'))[40;37H[K[41;1H:call add(tests, buffers)[41;26H[K[42;1H:1hide[42;7H[K[43;1H:let buffers = [][43;18H[K[44;1H:windo call add(buffers, bufnr('%'))[44;37H[K[45;1H:call add(tests, buffers)[45;26H[K[46;1H:$hide[46;7H[K[47;1H:let buffers = [][47;18H[K[48;1H:windo call add(buffers, bufnr('%'))[48;37H[K[49;1H:call add(tests, buffers)[49;26H[K[50;1H:1wincmd w[50;11H[K[51;1H:2hide[51;7H[K[52;1H:let buffers = [][52;18H[K[53;1H:windo call add(buffers, bufnr('%'))[53;37H[K[54;1H:call add(tests, buffers)[54;26H[K[55;1H:1wincmd w[55;11H[K[56;1H:new[56;5H[K[28;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[29;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H44 lines, 815 characters written[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[30;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[18M[1;57r[39;1H:new
:3wincmd w
:-hide
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:2wincmd w
:+hide
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:e! test.out
:call append(line('$'), map(copy(tests), 'join(v:val, " ")'))
Go[34m^[[m
:w
:only!
:b1
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet tests = [][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor i in range(5)[?25l
:  [?12l[?25h:new
[?25l:  [?12l[?25h:endfor[27m[23m[m[H[2J[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [m[10;1H[1m[7m[No Name]                                                                              [m[12;1H[1m[34m~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[7m[No Name]                                                                              [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [m[37;1H[7m[No Name]                                                                              [m[39;1H[1m[34m~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [m[47;1H[7m[No Name]                                                                              [m[48;1H:e! test.out
:call append(line('$'), map(copy(tests), 'join(v:val, " ")'))
Go[34m^[[m
:w
:only!
:b1
ENDTEST

[7mtest_close_count.in                                                                    [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[10;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7mtest_close_count.in                                                                    [55;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h4wincmd w[?25l[37;1H[1m[7m[No Name]                                                                              [m[56;1H[7mtest_close_count.in[m[1m[7m [m[7m                                                                    [29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h.hide[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [m[11;1H[7m[No Name]                                                                              [m[13;1H[1m[34m~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [m[22;1H[7m[No Name]                                                                              [m[24;1H[1m[34m~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [m[33;1H[7m[No Name]                                                                              [m[35;1H[1m[34m~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [m[45;1H[1m[7m[No Name]                                                                              [m[46;1H:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:e! test.out
:call append(line('$'), map(copy(tests), 'join(v:val, " ")'))
Go[34m^[[m
:w
:only!
:b1
ENDTEST

[7mtest_close_count.in                                                                    [34;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[34;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[45;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7mtest_close_count.in                                                                    [55;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1hide[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [m[14;1H[7m[No Name]                                                                              [m[16;1H[1m[34m~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [m[42;1H[7m[No Name]                                                                              [m[43;1H:2wincmd w
:+hide
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:e! test.out
:call append(line('$'), map(copy(tests), 'join(v:val, " ")'))
Go[34m^[[m
:w
:only!
:b1
ENDTEST

[1m[7mtest_close_count.in                                                                    [55;1H[?12l[?25h[?25l

[m:[?12l[?25hlet buffers = [][?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$hide[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[7m[No Name]                                                                              [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [m[37;1H[7m[No Name]                                                                              [m[39;1H[1m[34m~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name]                                                                              [38;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1wincmd w[?25l[19;1H[1m[7m[No Name]                                                                              [m[56;1H[7m[No Name][m[1m[7m [m[7m                                                                              [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h2hide[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7m[No Name]                                                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[28;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name]                                                                              [29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1wincmd w[?25l[28;1H[1m[7m[No Name]                                                                              [m[56;1H[7m[No Name][m[1m[7m [m[7m                                                                              [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hnew[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[1m[7m[No Name]                                                                              [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [m[38;1H[7m[No Name]                                                                              [m[40;1H[1m[34m~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7m[No Name]                                                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hnew[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [m[14;1H[1m[7m[No Name]                                                                              [m[16;1H[1m[34m~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [m[42;1H[7m[No Name]                                                                              [m[44;1H[1m[34m~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7m[No Name]                                                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h3wincmd w[?25l[14;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[42;1H[1m[7m[No Name]                                                                              [29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h-hide[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[7m[No Name]                                                                              [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [m[38;1H[1m[7m[No Name]                                                                              [m[40;1H[1m[34m~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7m[No Name]                                                                              [20;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[38;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name]                                                                              [39;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h2wincmd w[?25l[38;1H[1m[7m[No Name]                                                                              [m[56;1H[7m[No Name][m[1m[7m [m[7m                                                                              [20;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h+hide[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name]                                                                              [29;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! test.out[?25l"test.out" [57;12H[K[57;12H7 lines, 39 characters[29;1H6 5 4 2 1
5 4 2 1[30;8H[K[31;1H5 4 2[31;6H[K[32;1H5 2[32;4H[K[33;1H7 5 2[33;6H[K[34;1H7 5[34;4H[K[35;1H[K[56;1H[1m[7mtest.out]  [29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall append(line('$'), map(copy(tests), 'join(v:val, " ")'))[?25l[36;1H13 12 11 10 9 1[36;16H[K[37;1H13 12 11 9 1[37;13H[K[38;1H12 11 9 1[38;10H[K[39;1H12 11 9[39;8H[K[40;1H12 9[40;5H[K[41;1H15 12 9[41;8H[K[42;1H15 12[42;6H[K[56;10H[1m[7m[+][29;1H[?12l[?25h[42;1H[?25l[m[43;1H[K[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"test.out" 15 lines, 106 characters written[56;10H[1m[7m    [43;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25honly![?25l[1;1H6 5 4 2 1
5 4 2 1[2;8H[K[3;1H5 4 2[3;6H[K[4;1H5 2[4;4H[K[5;1H7 5 2[5;6H[K[6;1H7 5[6;4H[K[7;1H[K[8;1H13 12 11 10 9 1[8;16H[K[9;1H13 12 11 9 1[9;13H[K[10;1H12 11 9 1[10;10H[K[11;1H12 11 9[11;8H[K[12;1H12 9[12;5H[K[13;1H15 12 9[13;8H[K[14;1H15 12[14;6H[K[15;1H[K[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [56;1H~                                                                                      [15;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hb1[?25l[1;1H:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:1wincmd w
:2hide
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:1wincmd w[8;11H[K[9;1H:new[9;5H[K[10;1H:new[10;5H[K[11;1H:3wincmd w
:-hide
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:2wincmd w[16;11H[K[17;1H:+hide[17;7H[K[18;1H:let buffers = [][18;18H[K[19;1H:windo call add(buffers, bufnr('%'))[19;37H[K[20;1H:call add(tests, buffers)[20;26H[K[21;1H:e! test.out[21;13H[K[22;1H:call append(line('$'), map(copy(tests), 'join(v:val, " ")'))[22;62H[K[23;1HGo[34m^[[m[23;5H[K[24;1H:w[24;3H[K[25;1H:only![25;7H[K[26;1H:b1[26;4H[K[27;1HENDTEST[27;8H[K[28;1H[K[29;1HSTARTTEST[29;10H[K[30;1H:let tests = [][30;16H[K[31;1H:set hidden[31;12H[K[32;1H:for i in range(5)[32;19H[K[33;1H:new[33;5H[K[34;1H:endfor[34;8H[K[35;1H:1wincmd w[35;11H[K[36;1H:$ hide[36;8H[K[37;1H:let buffers = [][37;18H[K[38;1H:windo call add(buffers, bufnr('%'))[38;37H[K[39;1H:call add(tests, buffers)[39;26H[K[40;1H:$-1 close![40;12H[K[41;1H:let buffers = [][41;18H[K[42;1H:windo call add(buffers, bufnr('%'))[42;37H[K[43;1H:call add(tests, buffers)[43;26H[K[44;1H:1wincmd w[44;11H[K[45;1H:.+close![45;10H[K[46;1H:let buffers = [][46;18H[K[47;1H:windo call add(buffers, bufnr('%'))[47;37H[K[48;1H:call add(tests, buffers)[48;26H[K[49;1H:e! test.out[49;13H[K[50;1H:call append(line('$'), map(copy(tests), 'join(v:val, " ")'))[50;62H[K[51;1HGo[34m^[[m[51;5H[K[52;1H:w[52;3H[K[53;1H:only![53;7H[K[54;1H:b1[54;4H[K[55;1HENDTEST[55;8H[K[56;1H[K[57;1H"test_close_count.in" line 93 of 153 --60%-- col 1[28;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[29;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H25 lines, 448 characters written[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[30;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[55;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet tests = [][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset hidden[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor i in range(5)[?25l
:  [?12l[?25h:new
[?25l:  [?12l[?25h:endfor[27m[23m[m[H[2J[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [m[10;1H[1m[7m[No Name]                                                                              [m[12;1H[1m[34m~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[7m[No Name]                                                                              [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [m[37;1H[7m[No Name]                                                                              [m[39;1H[1m[34m~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [m[47;1H[7m[No Name]                                                                              [m[48;1H:e! test.out
:call append(line('$'), map(copy(tests), 'join(v:val, " ")'))
Go[34m^[[m
:w
:only!
:b1
ENDTEST

[7mtest_close_count.in                                                                    [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h1wincmd w[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$ hide[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [m[12;1H[1m[7m[No Name]                                                                              [m[14;1H[1m[34m~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [m[23;1H[7m[No Name]                                                                              [m[25;1H[1m[34m~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [m[34;1H[7m[No Name]                                                                              [m[36;1H[1m[34m~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [m[45;1H[7m[No Name]                                                                              [m[47;1H[1m[34m~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7m[No Name]                                                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[12;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name]                                                                              [46;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[46;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$-1 close![?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [m[14;1H[7m[No Name]                                                                              [m[16;1H[1m[34m~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [m[42;1H[7m[No Name]                                                                              [m[44;1H[1m[34m~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name]                                                                              [43;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1wincmd w[?25l[14;1H[1m[7m[No Name]                                                                              [m[56;1H[7m[No Name][m[1m[7m [m[7m                                                                              [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h.+close![?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[1m[7m[No Name]                                                                              [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [m[38;1H[7m[No Name]                                                                              [m[40;1H[1m[34m~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7m[No Name]                                                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[19;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name]                                                                              [39;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! test.out[?25l"test.out" [57;12H[K[57;12H15 lines, 106 characters[39;1H6 5 4 2 1
5 4 2 1[40;8H[K[41;1H5 4 2[41;6H[K[42;1H5 2[42;4H[K[43;1H7 5 2[43;6H[K[44;1H7 5[44;4H[K[45;1H[K[46;1H13 12 11 10 9 1[46;16H[K[47;1H13 12 11 9 1[47;13H[K[48;1H12 11 9 1[48;10H[K[49;1H12 11 9[49;8H[K[50;1H12 9[50;5H[K[51;1H15 12 9[51;8H[K[52;1H15 12[52;6H[K[53;1H[K[56;1H[1m[7mtest.out]  [39;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall append(line('$'), map(copy(tests), 'join(v:val, " ")'))[?25l[54;1H20 19 18 17 16[54;15H[K[55;1H20 19 18 16[55;12H[K[56;10H[1m[7m[+][39;1H[?12l[?25h[?25l[39;55r[m[55;1H
[1;57r[55;1H20 18 16[57;1H[K[55;1H[?12l[?25h[?25l[39;55r[55;1H
[1;57r[55;1H[?12l[?25h[?25l

:[?12l[?25hw[?25l"test.out" 19 lines, 143 characters written[56;10H[1m[7m    [55;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25honly![?25l[27m[23m[m[H[2J[1;1H6 5 4 2 1
5 4 2 1
5 4 2
5 2
7 5 2
7 5

13 12 11 10 9 1
13 12 11 9 1
12 11 9 1
12 11 9
12 9
15 12 9
15 12

20 19 18 17 16
20 19 18 16
20 18 16

[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [19;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hb1[?25l[1;1HSTARTTEST
:let tests = []
:set hidden
:for i in range(5)
:new[5;5H[K[6;1H:endfor
:1wincmd w
:$ hide[8;8H[K[9;1H:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:$-1 close!
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:1wincmd w[16;11H[K[17;1H:.+close![17;10H[K[18;1H:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)[20;26H[K[21;1H:e! test.out[21;13H[K[22;1H:call append(line('$'), map(copy(tests), 'join(v:val, " ")'))[22;62H[K[23;1HGo[34m^[[m[23;5H[K[24;1H:w[24;3H[K[25;1H:only![25;7H[K[26;1H:b1[26;4H[K[27;1HENDTEST[27;8H[K[28;1H[K[29;1HSTARTTEST[29;10H[K[30;1H:let tests = [][30;16H[K[31;1H:set hidden[31;12H[K[32;1H:for i in range(5)[32;19H[K[33;1H:new[33;5H[K[34;1H:endfor[34;8H[K[35;1H:4wincmd w[35;11H[K[36;1H[34m^W[mc[36;4H[K[37;1H:let buffers = [][37;18H[K[38;1H:windo call add(buffers, bufnr('%'))[38;37H[K[39;1H:call add(tests, buffers)[39;26H[K[40;1H1[34m^W[mc[40;5H[K[41;1H:let buffers = [][41;18H[K[42;1H:windo call add(buffers, bufnr('%'))[42;37H[K[43;1H:call add(tests, buffers)[43;26H[K[44;1H9[34m^W[mc[44;5H[K[45;1H:let buffers = [][45;18H[K[46;1H:windo call add(buffers, bufnr('%'))[46;37H[K[47;1H:call add(tests, buffers)[47;26H[K[48;1H:1wincmd w[48;11H[K[49;1H2[34m^W[mc[49;5H[K[50;1H:let buffers = [][50;18H[K[51;1H:windo call add(buffers, bufnr('%'))[51;37H[K[52;1H:call add(tests, buffers)[52;26H[K[53;1H:only![53;7H[K[54;1H:e! test.out[54;13H[K[55;1H:call append(line('$'), map(copy(tests), 'join(v:val, " ")'))[55;62H[K[56;1H:w[56;3H[K[57;1H"test_close_count.in" line 121 of 153 --79%-- col 1[28;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[29;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H28 lines, 511 characters written[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[30;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[2M[1;57r[55;1H:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet tests = [][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset hidden[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor i in range(5)[?25l
:  [?12l[?25h:new
[?25l:  [?12l[?25h:endfor[27m[23m[m[H[2J[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [m[10;1H[1m[7m[No Name]                                                                              [m[12;1H[1m[34m~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[7m[No Name]                                                                              [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [m[37;1H[7m[No Name]                                                                              [m[39;1H[1m[34m~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [m[47;1H[7m[No Name]                                                                              [m[48;1H:call add(tests, buffers)
:only!
:e! test.out
:call append(line('$'), map(copy(tests), 'join(v:val, " ")'))
:w
:qa!
ENDTEST

[7mtest_close_count.in                                                                    [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h4wincmd w[?25l[10;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[37;1H[1m[7m[No Name]                                                                              [29;1H[?12l[?25h[27m[23m[m[H[2J[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [m[11;1H[7m[No Name]                                                                              [m[13;1H[1m[34m~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [m[22;1H[7m[No Name]                                                                              [m[24;1H[1m[34m~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [m[33;1H[7m[No Name]                                                                              [m[35;1H[1m[34m~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [m[45;1H[1m[7m[No Name]                                                                              [m[46;1H:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:only!
:e! test.out
:call append(line('$'), map(copy(tests), 'join(v:val, " ")'))
:w
:qa!
ENDTEST

[7mtest_close_count.in                                                                    [34;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[34;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[45;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7mtest_close_count.in                                                                    [55;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[55;1H[?12l[?25h[27m[23m[m[H[2J[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [m[14;1H[7m[No Name]                                                                              [m[16;1H[1m[34m~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [m[42;1H[7m[No Name]                                                                              [m[43;1H:call add(tests, buffers)
:1wincmd w
2[34m^W[mc
:let buffers = []
:windo call add(buffers, bufnr('%'))
:call add(tests, buffers)
:only!
:e! test.out
:call append(line('$'), map(copy(tests), 'join(v:val, " ")'))
:w
:qa!
ENDTEST

[1m[7mtest_close_count.in                                                                    [55;1H[?12l[?25h[?25l[43;55r[m[55;1H
[1;57r[55;1H[?12l[?25h[?25l

:[?12l[?25hlet buffers = [][?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[55;1H[?12l[?25h[27m[23m[m[H[2J[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[7m[No Name]                                                                              [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [m[37;1H[7m[No Name]                                                                              [m[39;1H[1m[34m~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name]                                                                              [38;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[38;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1wincmd w[?25l[19;1H[1m[7m[No Name]                                                                              [m[56;1H[7m[No Name][m[1m[7m [m[7m                                                                              [1;1H[?12l[?25h[27m[23m[m[H[2J[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7m[No Name]                                                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet buffers = [][?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwindo call add(buffers, bufnr('%'))[?25l[28;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7m[No Name]                                                                              [29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(tests, buffers)[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25honly![?25l[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25he! test.out[?25l"test.out" line 19 of 19 --100%-- col 1[1;1H6 5 4 2 1
5 4 2 1[2;8H[K[3;1H5 4 2[3;6H[K[4;1H5 2[4;4H[K[5;1H7 5 2[5;6H[K[6;1H7 5[6;4H[K[7;1H[K[8;1H13 12 11 10 9 1[8;16H[K[9;1H13 12 11 9 1[9;13H[K[10;1H12 11 9 1[10;10H[K[11;1H12 11 9[11;8H[K[12;1H12 9[12;5H[K[13;1H15 12 9[13;8H[K[14;1H15 12[14;6H[K[15;1H[K[16;1H20 19 18 17 16[16;15H[K[17;1H20 19 18 16[17;12H[K[18;1H20 18 16[18;9H[K[19;1H[K[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append(line('$'), map(copy(tests), 'join(v:val, " ")'))[?25l[20;1H25 24 23 21 1[20;14H[K[21;1H24 23 21 1[21;11H[K[22;1H24 23 21[22;9H[K[23;1H24 21[23;6H[K[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"test.out" 23 lines, 183 characters written[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_close_count = test61; then \
#	  if diff test.out test_close_count.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_close_count.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_close_count.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_comparators.failed test.ok test.out X* viminfo
cp test_comparators.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_comparators.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_comparators.in" 21 lines, 283 characters[1;1H" Test for expression comparators.   vim: set ft=vim :


STARTTEST
:so small.vim
:try
:  let oldisident=&isident
:  set isident+=#
:  if 1 is#1
:    $put ='ok'
:  else
:    $put ='ng'
:  endif
:finally
:  let &isident=oldisident
:endtry
:"
:/^marker/+1,$wq! test.out
ENDTEST

marker
[1m[34m~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1H" Test for expression comparators.   vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 14 lines, 200 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[19;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htry[?25l
:  [?12l[?25h:  let oldisident=&isident
[?25l:  [?12l[?25h:  set isident+=#
[?25l:  [?12l[?25h:  if 1 is#1
[?25l:    [?12l[?25h:    $put ='ok'
[?25l:    [?12l[?25h:  else
[?25l:    [?12l[?25h:    $put ='ng'
[?25l:    [?12l[?25h:  endif
[?25l:  [?12l[?25h:finally
[?25l:  [?12l[?25h:  let &isident=oldisident
[?25l:  [?12l[?25h:endtry[1;1H[10L[?25l[1;1H" Test for expression comparators.   vim: set ft=vim :


STARTTEST
:so small.vim
:try
:  let oldisident=&isident
:  set isident+=#
:  if 1 is#1
:    $put ='ok'[22;1Hok[22;3H[K[57;1H[K[22;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[22;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^marker/+1,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 1 line, 3 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_comparators = test61; then \
#	  if diff test.out test_comparators.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_comparators.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_comparators.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_erasebackword.failed test.ok test.out X* viminfo
cp test_erasebackword.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_erasebackword.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_erasebackword.in" 19 lines, 427 characters[1;1HTest for erasing backword

STARTTEST
:so small.vim
:so mbyte.vim
:set encoding=utf-8
G
o www[34m~A~S[m[34m~B~S[m[34m~A[m[34m~A[m[34m~B~O[m[34m~V[m[34m~U~L[m[34m~C[m[34m~C[m[34m~C[m[34m~C~I[mvim [34m^W^[[m
o www[34m~A~S[m[34m~B~S[m[34m~A[m[34m~A[m[34m~B~O[m[34m~V[m[34m~U~L[m[34m~C[m[34m~C[m[34m~C[m[34m~C~I[mvim [34m^W^W^[[m
o www[34m~A~S[m[34m~B~S[m[34m~A[m[34m~A[m[34m~B~O[m[34m~V[m[34m~U~L[m[34m~C[m[34m~C[m[34m~C[m[34m~C~I[mvim [34m^W^W^W^[[m
o www[34m~A~S[m[34m~B~S[m[34m~A[m[34m~A[m[34m~B~O[m[34m~V[m[34m~U~L[m[34m~C[m[34m~C[m[34m~C[m[34m~C~I[mvim [34m^W^W^W^W^[[m
o www[34m~A~S[m[34m~B~S[m[34m~A[m[34m~A[m[34m~B~O[m[34m~V[m[34m~U~L[m[34m~C[m[34m~C[m[34m~C[m[34m~C~I[mvim [34m^W^W^W^W^W^[[m
o www[34m~A~S[m[34m~B~S[m[34m~A[m[34m~A[m[34m~B~O[m[34m~V[m[34m~U~L[m[34m~C[m[34m~C[m[34m~C[m[34m~C~I[mvim [34m^W^W^W^W^W^W^[[m
:/^test/,$w! test.out
:qa!
ENDTEST

test starts here:

[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for erasing backword[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 12 lines, 362 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[16;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[17;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[17;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[17;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset encoding=utf-8[?25l[27m[23m[m[H[2J[1;1HTest for erasing backword

STARTTEST
:so small.vim
:so mbyte.vim
:set encoding=utf-8
G
o wwwこんにちわ世界ワールドvim [34m^W^[[m
o wwwこんにちわ世界ワールドvim [34m^W^W^[[m
o wwwこんにちわ世界ワールドvim [34m^W^W^W^[[m
o wwwこんにちわ世界ワールドvim [34m^W^W^W^W^[[m
o wwwこんにちわ世界ワールドvim [34m^W^W^W^W^W^[[m
o wwwこんにちわ世界ワールドvim [34m^W^W^W^W^W^W^[[m
:/^test/,$w! test.out
:qa!
ENDTEST

test starts here:

[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [17;1H[?12l[?25h

[?25l[m
 www[20;5H[K[20;5H[?12l[?25h[?25lこ[?12l[?25h[?25lん[?12l[?25h[?25lに[?12l[?25h[?25lち[?12l[?25h[?25lわ[?12l[?25h[?25l世[?12l[?25h[?25l界[?12l[?25h[?25lワ[?12l[?25h[?25lー[?12l[?25h[?25lル[?12l[?25h[?25lド[?12l[?25h[?25l
 www[21;5H[K[21;5H[?12l[?25h[?25lこ[?12l[?25h[?25lん[?12l[?25h[?25lに[?12l[?25h[?25lち[?12l[?25h[?25lわ[?12l[?25h[?25l世[?12l[?25h[?25l界[?12l[?25h[?25lワ[?12l[?25h[?25lー[?12l[?25h[?25lル[?12l[?25h[?25l[21;19H[K[21;17H[?12l[?25h[?25l
 www[22;5H[K[22;5H[?12l[?25h[?25lこ[?12l[?25h[?25lん[?12l[?25h[?25lに[?12l[?25h[?25lち[?12l[?25h[?25lわ[?12l[?25h[?25l世[?12l[?25h[?25l界[?12l[?25h[?25lワ[?12l[?25h[?25lー[?12l[?25h[?25lル[?12l[?25h[?25l[22;15H[K[22;13H[?12l[?25h[?25l
 www[23;5H[K[23;5H[?12l[?25h[?25lこ[?12l[?25h[?25lん[?12l[?25h[?25lに[?12l[?25h[?25lち[?12l[?25h[?25lわ[?12l[?25h[?25l世[?12l[?25h[?25l界[?12l[?25h[?25lワ[?12l[?25h[?25lー[?12l[?25h[?25lル[?12l[?25h[?25l[23;5H[K[23;4H[?12l[?25h[?25l
 www[24;5H[K[24;5H[?12l[?25h[?25lこ[?12l[?25h[?25lん[?12l[?25h[?25lに[?12l[?25h[?25lち[?12l[?25h[?25lわ[?12l[?25h[?25l世[?12l[?25h[?25l界[?12l[?25h[?25lワ[?12l[?25h[?25lー[?12l[?25h[?25lル[?12l[?25h[?25l[24;2H[K[24;1H[?12l[?25h[?25l
 www[25;5H[K[25;5H[?12l[?25h[?25lこ[?12l[?25h[?25lん[?12l[?25h[?25lに[?12l[?25h[?25lち[?12l[?25h[?25lわ[?12l[?25h[?25l世[?12l[?25h[?25l界[?12l[?25h[?25lワ[?12l[?25h[?25lー[?12l[?25h[?25lル[?12l[?25h[?25l[25;2H[K[25;1H[?12l[?25h[?25l[57;1H:[?12l[?25h/^test/,$w! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 8 lines, 111 characters written[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_erasebackword = test61; then \
#	  if diff test.out test_erasebackword.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_erasebackword.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_erasebackword.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_eval.failed test.ok test.out X* viminfo
cp test_eval.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_eval.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_eval.in" 247 lines, 6201 characters[1;1HTest for various eval features.   vim: set ft=vim :

Note: system clipboard is saved, changed and restored.

clipboard contents
something else

STARTTEST
:so small.vim
:set encoding=latin1
:set noswapfile
:lang C
:fun AppendRegContents(reg)
  call AppendRegParts(a:reg, getregtype(a:reg), getreg(a:reg), string(getreg(a:reg, 0,  [15;1H1)), getreg(a:reg, 1), string(getreg(a:reg, 1, 1)))
:endfun
:fun AppendRegParts(reg, type, cont, strcont, cont1, strcont1)
  call append('$', printf('%s: type %s; value: %s (%s), expr: %s (%s)', a:reg, a:type,  [19;1Ha:cont, a:strcont, a:cont1, a:strcont1))
endfun
:command -nargs=? AR :call AppendRegContents(<q-args>)
:fun SetReg(...)
    call call('setreg', a:000)
    call append('$', printf('{{{2 setreg(%s)', string(a:000)[1:-2]))
    call AppendRegContents(a:1)
    if a:1 isnot# '='[27;9Hexecute "silent normal! Go==\n==\e\"".a:1."P"
    endif
endfun
:fun ErrExe(str)
    call append('$', 'Executing '.a:str)
    try[33;9Hexecute a:str
    catch[35;9H$put =v:exception
    endtry
endfun
:fun Test()
$put ='{{{1 let tests'
let @" = 'abc'
AR "
let @" = "abc\n"
AR "
let @" = "abc\<C-m>"
AR "
let @= = '"abc"'
AR =

$put ='{{{1 Basic setreg tests'
call SetReg('a', 'abcA', 'c')
call SetReg('b', 'abcB', 'v')
call SetReg('c', 'abcC', 'l')
call SetReg('d', 'abcD', 'V')
call SetReg('e', 'abcE', 'b')
call SetReg('f', 'abcF', "\<C-v>")
call SetReg('g', 'abcG', 'b10')[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for various eval features.   vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[8;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 233 lines, 6010 characters written[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[9;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:catch
:$put =v:exception
:endtry
:"
:" function name starting with/without "g:", buffer-local funcref.
:function! g:Foo(n)
:  $put ='called Foo(' . a:n . ')'
:endfunction
:let b:my_func = function('Foo')
:call b:my_func(1)
:echo g:Foo(2)
:echo Foo(3)
:"
:" script-local function used in Funcref must exist.
:so test_eval_func.vim
:"
:" Using $ instead of '$' must give an error
:try
: call append($, 'foobar')
:catch
:$put =v:exception
:endtry
:"
:$put ='{{{1 getcurpos/setpos'
/^012345678
6l:let sp = getcurpos()
0:call setpos('.', sp)
jyl:$put
:"
:" substring and variable name
:let str = 'abcdef'
:let n = 3
:$put =str[n:]
:$put =str[:n]
:$put =str[n:n]
:unlet n
:let nn = 3
:$put =str[nn:]
:$put =str[:nn]
:$put =str[nn:nn]
:unlet nn
:let b:nn = 4
:$put =str[b:nn:]
:$put =str[:b:nn]
:$put =str[b:nn:b:nn]
:unlet b:nn
:"
:/^start:/+1,$wq! test.out
:" vim: et ts=4 isk-=\: fmr=???,???
:call getchar()
ENDTEST

012345678
012345678

start:[51;1H[?12l[?25h
[?25l[57;1H:so! Xdotest[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset encoding=latin1[?25l[27m[23m[m[H[2J[1;1H:catch
:$put =v:exception
:endtry
:"
:" function name starting with/without "g:", buffer-local funcref.
:function! g:Foo(n)
:  $put ='called Foo(' . a:n . ')'
:endfunction
:let b:my_func = function('Foo')
:call b:my_func(1)
:echo g:Foo(2)
:echo Foo(3)
:"
:" script-local function used in Funcref must exist.
:so test_eval_func.vim
:"
:" Using $ instead of '$' must give an error
:try
: call append($, 'foobar')
:catch
:$put =v:exception
:endtry
:"
:$put ='{{{1 getcurpos/setpos'
/^012345678
6l:let sp = getcurpos()
0:call setpos('.', sp)
jyl:$put
:"
:" substring and variable name
:let str = 'abcdef'
:let n = 3
:$put =str[n:]
:$put =str[:n]
:$put =str[n:n]
:unlet n
:let nn = 3
:$put =str[nn:]
:$put =str[:nn]
:$put =str[nn:nn]
:unlet nn
:let b:nn = 4
:$put =str[b:nn:]
:$put =str[:b:nn]
:$put =str[b:nn:b:nn]
:unlet b:nn
:"
:/^start:/+1,$wq! test.out
:" vim: et ts=4 isk-=\: fmr=???,???
:call getchar()
ENDTEST

012345678
012345678

start:[52;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset noswapfile[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlang C[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfun AppendRegContents(reg)[?25l
:  [?12l[?25h  call AppendRegParts(a:reg, getregtype(a:reg), getreg(a:reg), string(getreg(a:reg,
0, 1)), getreg(a:reg, 1), string(getreg(a:reg, 1, 1)))
[?25l:  [?12l[?25h:endfun[1;1H[3L[?25l[1;1H:catch
:$put =v:exception
:endtry[57;1H[K[52;1H[?12l[?25h[?25l[57;1H:[?12l[?25hfun AppendRegParts(reg, type, cont, strcont, cont1, strcont1)[?25l
:  [?12l[?25h  call append('$', printf('%s: type %s; value: %s (%s), expr: %s (%s)', a:reg, a:ty
[56;87Hp[57;1He, a:cont, a:strcont, a:cont1, a:strcont1))
[?25l:  [?12l[?25hendfun[1;1H[3L[?25l[1;1H:catch
:$put =v:exception
:endtry[57;1H[K[52;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcommand -nargs=? AR :call AppendRegContents(<q-args>)[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfun SetReg(...)[?25l
:  [?12l[?25h    call call('setreg', a:000)
[?25l:  [?12l[?25h    call append('$', printf('{{{2 setreg(%s)', string(a:000)[1:-2]))
[?25l:  [?12l[?25h    call AppendRegContents(a:1)
[?25l:  [?12l[?25h    if a:1 isnot# '='
[?25l:    [?12l[?25h        execute "silent normal! Go==\n==\e\"".a:1."P"
[?25l:    [?12l[?25h    endif
[?25l:  [?12l[?25hendfun[1;1H[7L[?25l[1;1H:catch
:$put =v:exception
:endtry
:"
:" function name starting with/without "g:", buffer-local funcref.
:function! g:Foo(n)
:  $put ='called Foo(' . a:n . ')'[57;1H[K[52;1H[?12l[?25h[?25l[57;1H:[?12l[?25hfun ErrExe(str)[?25l
:  [?12l[?25h    call append('$', 'Executing '.a:str)
[?25l:  [?12l[?25h    try
[?25l:    [?12l[?25h        execute a:str
[?25l:    [?12l[?25h    catch
[?25l:    [?12l[?25h        $put =v:exception
[?25l:    [?12l[?25h    endtry
[?25l:  [?12l[?25hendfun[1;1H[7L[?25l[1;1H:catch
:$put =v:exception
:endtry
:"
:" function name starting with/without "g:", buffer-local funcref.
:function! g:Foo(n)
:  $put ='called Foo(' . a:n . ')'[57;1H[K[52;1H[?12l[?25h[?25l[57;1H:[?12l[?25hfun Test()[?25l
:  [?12l[?25h$put ='{{{1 let tests'
[?25l:  [?12l[?25hlet @" = 'abc'
[?25l:  [?12l[?25hAR "
[?25l:  [?12l[?25hlet @" = "abc\n"
[?25l:  [?12l[?25hAR "
[?25l:  [?12l[?25hlet @" = "abc\<C-m>"
[?25l:  [?12l[?25hAR "
[?25l:  [?12l[?25hlet @= = '"abc"'
[?25l:  [?12l[?25hAR =
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h$put ='{{{1 Basic setreg tests'
[?25l:  [?12l[?25hcall SetReg('a', 'abcA', 'c')
[?25l:  [?12l[?25hcall SetReg('b', 'abcB', 'v')
[?25l:  [?12l[?25hcall SetReg('c', 'abcC', 'l')
[?25l:  [?12l[?25hcall SetReg('d', 'abcD', 'V')
[?25l:  [?12l[?25hcall SetReg('e', 'abcE', 'b')
[?25l:  [?12l[?25hcall SetReg('f', 'abcF', "\<C-v>")
[?25l:  [?12l[?25hcall SetReg('g', 'abcG', 'b10')
[?25l:  [?12l[?25hcall SetReg('h', 'abcH', "\<C-v>10")
[?25l:  [?12l[?25hcall SetReg('I', 'abcI')
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h$put ='{{{1 Appending single lines with setreg()'
[?25l:  [?12l[?25hcall SetReg('A', 'abcAc', 'c')
[?25l:  [?12l[?25hcall SetReg('A', 'abcAl', 'l')
[?25l:  [?12l[?25hcall SetReg('A', 'abcAc2','c')
[?25l:  [?12l[?25hcall SetReg('b', 'abcBc', 'ca')
[?25l:  [?12l[?25hcall SetReg('b', 'abcBb', 'ba')
[?25l:  [?12l[?25hcall SetReg('b', 'abcBc2','ca')
[?25l:  [?12l[?25hcall SetReg('b', 'abcBb2','b50a')
[?25l:  [?12l[?25h
[?25l:  [?12l[?25hcall SetReg('C', 'abcCl', 'l')
[?25l:  [?12l[?25hcall SetReg('C', 'abcCc', 'c')
[?25l:  [?12l[?25hcall SetReg('D', 'abcDb', 'b')
[?25l:  [?12l[?25h
[?25l:  [?12l[?25hcall SetReg('E', 'abcEb', 'b')
[?25l:  [?12l[?25hcall SetReg('E', 'abcEl', 'l')
[?25l:  [?12l[?25hcall SetReg('F', 'abcFc', 'c')
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h$put ='{{{1 Appending NL with setreg()'
[?25l:  [?12l[?25hcall setreg('a', 'abcA2', 'c')
[?25l:  [?12l[?25hcall setreg('b', 'abcB2', 'v')
[?25l:  [?12l[?25hcall setreg('c', 'abcC2', 'l')
[?25l:  [?12l[?25hcall setreg('d', 'abcD2', 'V')
[?25l:  [?12l[?25hcall setreg('e', 'abcE2', 'b')
[?25l:  [?12l[?25hcall setreg('f', 'abcF2', "\<C-v>")
[?25l:  [?12l[?25hcall setreg('g', 'abcG2', 'b10')
[?25l:  [?12l[?25hcall setreg('h', 'abcH2', "\<C-v>10")
[?25l:  [?12l[?25hcall setreg('I', 'abcI2')
[?25l:  [?12l[?25h
[?25l:  [?12l[?25hcall SetReg('A', "\n")
[?25l:  [?12l[?25hcall SetReg('B', "\n", 'c')
[?25l:  [?12l[?25hcall SetReg('C', "\n")
[?25l:  [?12l[?25hcall SetReg('D', "\n", 'l')
[?25l:  [?12l[?25hcall SetReg('E', "\n")
[?25l:  [?12l[?25hcall SetReg('F', "\n", 'b')
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h$put ='{{{1 Setting lists with setreg()'
[?25l:  [?12l[?25hcall SetReg('a', ['abcA3'], 'c')
[?25l:  [?12l[?25hcall SetReg('b', ['abcB3'], 'l')
[?25l:  [?12l[?25hcall SetReg('c', ['abcC3'], 'b')
[?25l:  [?12l[?25hcall SetReg('d', ['abcD3'])
[?25l:  [?12l[?25hcall SetReg('e', [1, 2, 'abc', 3])
[?25l:  [?12l[?25hcall SetReg('f', [1, 2, 3])
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h$put ='{{{1 Appending lists with setreg()'
[?25l:  [?12l[?25hcall SetReg('A', ['abcA3c'], 'c')
[?25l:  [?12l[?25hcall SetReg('b', ['abcB3l'], 'la')
[?25l:  [?12l[?25hcall SetReg('C', ['abcC3b'], 'lb')
[?25l:  [?12l[?25hcall SetReg('D', ['abcD32'])
[?25l:  [?12l[?25h
[?25l:  [?12l[?25hcall SetReg('A', ['abcA32'])
[?25l:  [?12l[?25hcall SetReg('B', ['abcB3c'], 'c')
[?25l:  [?12l[?25hcall SetReg('C', ['abcC3l'], 'l')
[?25l:  [?12l[?25hcall SetReg('D', ['abcD3b'], 'b')
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h$put ='{{{1 Appending lists with NL with setreg()'
[?25l:  [?12l[?25hcall SetReg('A', ["\n", 'abcA3l2'], 'l')
[?25l:  [?12l[?25hcall SetReg('B', ["\n", 'abcB3c2'], 'c')
[?25l:  [?12l[?25hcall SetReg('C', ["\n", 'abcC3b2'], 'b')
[?25l:  [?12l[?25hcall SetReg('D', ["\n", 'abcD3b50'],'b50')
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h$put ='{{{1 Setting lists with NLs with setreg()'
[?25l:  [?12l[?25hcall SetReg('a', ['abcA4-0', "\n", "abcA4-2\n", "\nabcA4-3", "abcA4-4\nabcA4-4-2"])
[?25l:  [?12l[?25hcall SetReg('b', ['abcB4c-0', "\n", "abcB4c-2\n", "\nabcB4c-3", "abcB4c-4\nabcB4c-4
[56;87H-[57;1H2"], 'c')
[?25l:  [?12l[?25hcall SetReg('c', ['abcC4l-0', "\n", "abcC4l-2\n", "\nabcC4l-3", "abcC4l-4\nabcC4l-4
[56;87H-[57;1H2"], 'l')
[?25l:  [?12l[?25hcall SetReg('d', ['abcD4b-0', "\n", "abcD4b-2\n", "\nabcD4b-3", "abcD4b-4\nabcD4b-4
[56;87H-[57;1H2"], 'b')
[?25l:  [?12l[?25hcall SetReg('e', ['abcE4b10-0', "\n", "abcE4b10-2\n", "\nabcE4b10-3", "abcE4b10-4\n
[56;87Ha[57;1HbcE4b10-4-2"], 'b10')
[?25l:  [?12l[?25h
[?25l:  [?12l[?25h$put ='{{{1 Search and expressions'
[?25l:  [?12l[?25hcall SetReg('/', ['abc/'])
[?25l:  [?12l[?25hcall SetReg('/', ["abc/\n"])
[?25l:  [?12l[?25hcall SetReg('=', ['"abc/"'])
[?25l:  [?12l[?25hcall SetReg('=', ["\"abc/\n\""])
[?25l:  [?12l[?25h$put ='{{{1 System clipboard'
[?25l:  [?12l[?25hif has('clipboard')
[?25l:    [?12l[?25h" Save and restore system clipboard.
[?25l:    [?12l[?25h" If no connection to X-Server is possible, test should succeed.
[?25l:    [?12l[?25hlet _clipreg = ['*', getreg('*'), getregtype('*')]
[?25l:    [?12l[?25hlet _clipopt = &cb
[?25l:    [?12l[?25hlet &cb='unnamed'
[?25l:    [?12l[?25h5y
[?25l:    [?12l[?25hAR *
[?25l:    [?12l[?25htabdo :windo :echo "hi"
[?25l:    [?12l[?25h6y
[?25l:    [?12l[?25hAR *
[?25l:    [?12l[?25hlet &cb=_clipopt
[?25l:    [?12l[?25hcall call('setreg', _clipreg)
[?25l:    [?12l[?25helse
[?25l:    [?12l[?25h  call AppendRegParts('*', 'V', "clipboard contents\n", "['clipboard contents']",
"clipboard contents\n", "['clipboard contents']")
[?25l:    [?12l[?25h  call AppendRegParts('*', 'V', "something else\n", "['something else']", "someth
[56;87Hi[57;1Hng else\n", "['something else']")
[?25l:    [?12l[?25hendif
[?25l:  [?12l[?25h$put ='{{{1 Errors'
[?25l:  [?12l[?25hcall ErrExe('call setreg()')
[?25l:  [?12l[?25hcall ErrExe('call setreg(1)')
[?25l:  [?12l[?25hcall ErrExe('call setreg(1, 2, 3, 4)')
[?25l:  [?12l[?25hcall ErrExe('call setreg([], 2)')
[?25l:  [?12l[?25hcall ErrExe('call setreg(1, {})')
[?25l:  [?12l[?25hcall ErrExe('call setreg(1, 2, [])')
[?25l:  [?12l[?25hcall ErrExe('call setreg("/", ["1", "2"])')
[?25l:  [?12l[?25hcall ErrExe('call setreg("=", ["1", "2"])')
[?25l:  [?12l[?25hcall ErrExe('call setreg(1, ["", "", [], ""])')
[?25l:  [?12l[?25hendfun[27m[23m[m[H[2J[?25l[1;1H:catch
:$put =v:exception
:endtry
:"
:" function name starting with/without "g:", buffer-local funcref.
:function! g:Foo(n)
:  $put ='called Foo(' . a:n . ')'
:endfunction
:let b:my_func = function('Foo')
:call b:my_func(1)
:echo g:Foo(2)
:echo Foo(3)
:"
:" script-local function used in Funcref must exist.
:so test_eval_func.vim
:"
:" Using $ instead of '$' must give an error
:try
: call append($, 'foobar')
:catch
:$put =v:exception
:endtry
:"
:$put ='{{{1 getcurpos/setpos'
/^012345678
6l:let sp = getcurpos()
0:call setpos('.', sp)
jyl:$put
:"
:" substring and variable name
:let str = 'abcdef'
:let n = 3
:$put =str[n:]
:$put =str[:n]
:$put =str[n:n]
:unlet n
:let nn = 3
:$put =str[nn:]
:$put =str[:nn]
:$put =str[nn:nn]
:unlet nn
:let b:nn = 4
:$put =str[b:nn:]
:$put =str[:b:nn]
:$put =str[b:nn:b:nn]
:unlet b:nn
:"
:/^start:/+1,$wq! test.out
:" vim: et ts=4 isk-=\: fmr=???,???
:call getchar()
ENDTEST

012345678
012345678

start:[52;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Test()[?25l[1;1H=abcD4b-0[11C=
 [34m^@[m[2;4H[K[3;1H abcD4b-2[34m^@[m
 [34m^@[mabcD4b-3
 abcD4b-4[34m^@[mabcD4b-4-2[5;22H[K[6;1H{{{2 setreg('e', ['abcE4b10-0', '[34m^@[m', 'abcE4b10-2[34m^@[m', '[34m^@[mabcE4b10-3', 'abcE4b10-4[34m^@[mabcEE[7;1H4b10-4-2'], 'b10')[7;19H[K[8;1He: type [34m^V[m10; value: abcE4b10-0[34m^@^@^@[mabcE4b10-2[34m^@^@^@[mabcE4b10-3[34m^@[mabcE4b10-4[34m^@[mabcE4b10-44[9;1H-2 (['abcE4b10-0', '[34m^@[m', 'abcE4b10-2[34m^@[m', '[34m^@[mabcE4b10-3', 'abcE4b10-4[34m^@[mabcE4b10-4-2']),  [10;1Hexpr: abcE4b10-0[34m^@^@^@[mabcE4b10-2[34m^@^@^@[mabcE4b10-3[34m^@[mabcE4b10-4[34m^@[mabcE4b10-4-2 (['abcE4b10--[11;1H0', '[34m^@[m', 'abcE4b10-2[34m^@[m', '[34m^@[mabcE4b10-3', 'abcE4b10-4[34m^@[mabcE4b10-4-2'])
==[12;3H[K[13;1H=abcE4b10-0=
 [34m^@[m[14;4H[K[15;1H abcE4b10-2[34m^@[m[15;14H[K[16;1H [34m^@[mabcE4b10-3
 abcE4b10-4[34m^@[mabcE4b10-4-2[17;27H[K[18;1H{{{1 Search and expressions
{{{2 setreg('/', ['abc/']
/: type v; value: abc/ (['abc/']), expr: abc/ (['abc/'])
==[21;3H[K[22;1H=abc/=[22;7H[K[23;1H{{{2 setreg('/', ['abc/[34m^@[m'])
/: type v; value: abc/[34m^@[m (['abc/[34m^@[m']), expr: abc/[34m^@[m (['abc/[34m^@[m'])
==[25;3H[K[26;1H=abc/[34m^@[m=[26;9H[K[27;1H{{{2 setreg('=', ['"abc/"'])
=: type v; value: abc/ (['abc/']), expr: "abc/" (['"abc/"'])
{{{2 setreg('=', ['"abc/[34m^@[m"'])
=: type v; value: abc/[34m^@[m (['abc/[34m^@[m']), expr: "abc/[34m^@[m" (['"abc/[34m^@[m"'])
{{{1 System clipboard
*: type V; value: clipboard contents[34m^@[m (['clipboard contents']), expr: clipboard contenn[33;1Hts[34m^@[m (['clipboard contents'])
*: type V; value: something else[34m^@[m (['something else']), expr: something else[34m^@[m (['somee[35;1Hthing else'])[35;14H[K[36;1H{{{1 Errors
Executing call setreg()
Vim(call):E119: Not enough arguments for function: setreg
Executing call setreg(1)
Vim(call):E119: Not enough arguments for function: setreg
Executing call setreg(1, 2, 3, 4)
Vim(call):E118: Too many arguments for function: setreg
Executing call setreg([], 2)
Vim(call):E730: using List as a String
Executing call setreg(1, {})
Vim(call):E731: using Dictionary as a String
Executing call setreg(1, 2, [])
Vim(call):E730: using List as a String
Executing call setreg("/", ["1", "2"])
Vim(call):E883: search pattern and expression register may not contain two or more linee[51;1Hs[51;2H[K[52;1HExecuting call setreg("=", ["1", "2"])
Vim(call):E883: search pattern and expression register may not contain two or more linee[54;1Hs[54;2H[K[55;1HExecuting call setreg(1, ["", "", [], ""])
Vim(call):E730: using List as a String[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunction SetReg[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunction AppendRegContents[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunction ErrExe[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunction Test[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelcommand AR[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall garbagecollect(1)[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" function name not starting with capital[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htry[?25l
:  [?12l[?25h:func! g:test()
[?25l:  [?12l[?25h:echo "test"
[?25l:  [?12l[?25h:endfunc
[?25l:  [?12l[?25h:catch
[?25l:  [?12l[?25h:$put =v:exception
[?25l:  [?12l[?25h:endtry[1;1H[6L[?25l[1;2H[34m^@[m
 abcD4b-2[34m^@
[m [34m^@[mabcD4b-3
 abcD4b-4[34m^@[mabcD4b-4-2
{{{2 setreg('e', ['abcE4b10-0', '[34m^@[m', 'abcE4b10-2[34m^@[m', '[34m^@[mabcE4b10-3', 'abcE4b10-4[34m^@[mabcEE[6;1H4b10-4-2'], 'b10')
e: type [34m^V[m10; value: abcE4b10-0[34m^@^@^@[mabcE4b10-2[34m^@^@^@[mabcE4b10-3[34m^@[mabcE4b10-4[34m^@[mabcE4b10-44[8;1H-2 (['abcE4b10-0', '[34m^@[m', 'abcE4b10-2[34m^@[m', '[34m^@[mabcE4b10-3', 'abcE4b10-4[34m^@[mabcE4b10-4-2']),  [9;1Hexpr: [10C[34m^@^@[m[2CabcE4b10-2[34m^@^@[m[2CabcE4b10-3[34m^@[mabcE4b10-4[34m^@[mabcE4b10-4-2 (['abcE4b10--[10;1H0', '[34m^@[m', 'abcE4b10-2[34m^@[m', '[34m^@[mabcE4b10-3', 'abcE4b10-4[34m^@[mabcE4b10-4-2'])[10;71H[K[11;1H==[11;3H[K[12;2HabcE4b10-0=
 [34m^@[m[13;4H[K[14;2HabcE4b10-2[34m^@
[m [34m^@[mabcE4b10-3
 abcE4b10-4[34m^@[mabcE4b10-4-2
{{{1 Search and expressions
{{{2 setreg('/', ['abc/'])[18;27H[K[19;1H/: type v; value: abc/ (['abc/']), expr: abc/ (['abc/'])
==[20;4H[K[21;2Habc/=
{{{2 setreg('/', ['abc/[34m^@[m'])
/: type v; value: abc/[34m^@[m (['abc/[34m^@[m']), expr: abc/[34m^@[m (['abc/[34m^@[m'])
==[24;4H[K[25;2Habc/[34m^@[m=
{{{2 setreg('=', ['"abc/"'])
=: type v; value: abc/ (['abc/']), expr: "abc/" (['"abc/"'])
{{{2 setreg('=', ['"abc/[34m^@[m"'])[28;31H[K[29;1H=: type v; value: abc/[34m^@[m (['abc/[34m^@[m']), expr: "abc/[34m^@[m" (['"abc/[34m^@[m"'])
{{{1 System clipboard[30;22H[K[31;1H*: type V; value: clipboard contents[34m^@[m (['clipboard contents']), expr: clipboard contenn[32;1Hts[34m^@[m (['clipboard contents'])[32;30H[K[33;1H*: type V; value: something else[34m^@[m (['something else']), expr: something else[34m^@[m (['somee[34;1Hthing else'])[34;14H[K[35;1H{{{1 Errors[35;12H[K[36;1HExecuting call setreg()
Vim(call):E119: Not enough arguments for function: setreg
Executing call setreg(1)[38;25H[K[39;1HVim(call):E119: Not enough arguments for function: setreg
Executing call setreg(1, 2, 3, 4)[40;34H[K[41;1HVim(call):E118: Too many arguments for function: setreg
Executing call setreg([], 2)[42;29H[K[43;1HVim(call):E730: using List as a String
Executing call setreg(1, {})[44;29H[K[45;1HVim(call):E731: using Dictionary as a String
Executing call setreg(1, 2, [])[46;32H[K[47;1HVim(call):E730: using List as a String
Executing call setreg("/", ["1", "2"])
Vim(call):E883: search pattern and expression register may not contain two or more linee[50;1Hs[50;2H[K[51;1HExecuting call setreg("=", ["1", "2"])
Vim(call):E883: search pattern and expression register may not contain two or more linee[53;1Hs[53;2H[K[54;1HExecuting call setreg(1, ["", "", [], ""])
Vim(call):E730: using List as a String[55;39H[K[56;5Hfunction):E128: Function name must start with a capital or "s:": g:test()[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" function name includes a colon[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htry[?25l
:  [?12l[?25h:func! b:test()
[?25l:  [?12l[?25h:echo "test"
[?25l:  [?12l[?25h:endfunc
[?25l:  [?12l[?25h:catch
[?25l:  [?12l[?25h:$put =v:exception
[?25l:  [?12l[?25h:endtry[1;1H[6L[?25l[1;2HabcD4b-2[34m^@
[m [34m^@[mabcD4b-3
 abcD4b-4[34m^@[mabcD4b-4-2
{{{2 setreg('e', ['abcE4b10-0', '[34m^@[m', 'abcE4b10-2[34m^@[m', '[34m^@[mabcE4b10-3', 'abcE4b10-4[34m^@[mabcEE[5;1H4b10-4-2'], 'b10')
e: type [34m^V[m10; value: abcE4b10-0[34m^@^@^@[mabcE4b10-2[34m^@^@^@[mabcE4b10-3[34m^@[mabcE4b10-4[34m^@[mabcE4b10-44[7;1H-2 (['abcE4b10-0', '[34m^@[m', 'abcE4b10-2[34m^@[m', '[34m^@[mabcE4b10-3', 'abcE4b10-4[34m^@[mabcE4b10-4-2']),  [8;1Hexpr: [10C[34m^@^@[m[2CabcE4b10-2[34m^@^@[m[2CabcE4b10-3[34m^@[mabcE4b10-4[34m^@[mabcE4b10-4-2 (['abcE4b10--[9;1H0', '[34m^@[m', 'abcE4b10-2[34m^@[m', '[34m^@[mabcE4b10-3', 'abcE4b10-4[34m^@[mabcE4b10-4-2'])[9;71H[K[10;1H==[10;3H[K[11;2HabcE4b10-0=
 [34m^@[m[12;4H[K[13;2HabcE4b10-2[34m^@
[m [34m^@[mabcE4b10-3
 abcE4b10-4[34m^@[mabcE4b10-4-2
{{{1 Search and expressions
{{{2 setreg('/', ['abc/'])[17;27H[K[18;1H/: type v; value: abc/ (['abc/']), expr: abc/ (['abc/'])
==[19;4H[K[20;2Habc/=
{{{2 setreg('/', ['abc/[34m^@[m'])
/: type v; value: abc/[34m^@[m (['abc/[34m^@[m']), expr: abc/[34m^@[m (['abc/[34m^@[m'])
==[23;4H[K[24;2Habc/[34m^@[m=
{{{2 setreg('=', ['"abc/"'])
=: type v; value: abc/ (['abc/']), expr: "abc/" (['"abc/"'])
{{{2 setreg('=', ['"abc/[34m^@[m"'])[27;31H[K[28;1H=: type v; value: abc/[34m^@[m (['abc/[34m^@[m']), expr: "abc/[34m^@[m" (['"abc/[34m^@[m"'])
{{{1 System clipboard[29;22H[K[30;1H*: type V; value: clipboard contents[34m^@[m (['clipboard contents']), expr: clipboard contenn[31;1Hts[34m^@[m (['clipboard contents'])[31;30H[K[32;1H*: type V; value: something else[34m^@[m (['something else']), expr: something else[34m^@[m (['somee[33;1Hthing else'])[33;14H[K[34;1H{{{1 Errors[34;12H[K[35;1HExecuting call setreg()
Vim(call):E119: Not enough arguments for function: setreg
Executing call setreg(1)[37;25H[K[38;1HVim(call):E119: Not enough arguments for function: setreg
Executing call setreg(1, 2, 3, 4)[39;34H[K[40;1HVim(call):E118: Too many arguments for function: setreg
Executing call setreg([], 2)[41;29H[K[42;1HVim(call):E730: using List as a String
Executing call setreg(1, {})[43;29H[K[44;1HVim(call):E731: using Dictionary as a String
Executing call setreg(1, 2, [])[45;32H[K[46;1HVim(call):E730: using List as a String
Executing call setreg("/", ["1", "2"])
Vim(call):E883: search pattern and expression register may not contain two or more linee[49;1Hs[49;2H[K[50;1HExecuting call setreg("=", ["1", "2"])
Vim(call):E883: search pattern and expression register may not contain two or more linee[52;1Hs[52;2H[K[53;1HExecuting call setreg(1, ["", "", [], ""])
Vim(call):E730: using List as a String[54;39H[K[55;5Hfunction):E128: Function name must start with a capital or "s:": g:test()[56;70Hb[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" function name folowed by #[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htry[?25l
:  [?12l[?25h:func! test2() "#
[?25l:  [?12l[?25h:echo "test2"
[?25l:  [?12l[?25h:endfunc
[?25l:  [?12l[?25h:catch
[?25l:  [?12l[?25h:$put =v:exception
[?25l:  [?12l[?25h:endtry[1;1H[6L[?25l[1;2H[34m^@[mabcD4b-3
 abcD4b-4[34m^@[mabcD4b-4-2
{{{2 setreg('e', ['abcE4b10-0', '[34m^@[m', 'abcE4b10-2[34m^@[m', '[34m^@[mabcE4b10-3', 'abcE4b10-4[34m^@[mabcEE[4;1H4b10-4-2'], 'b10')
e: type [34m^V[m10; value: abcE4b10-0[34m^@^@^@[mabcE4b10-2[34m^@^@^@[mabcE4b10-3[34m^@[mabcE4b10-4[34m^@[mabcE4b10-44[6;1H-2 (['abcE4b10-0', '[34m^@[m', 'abcE4b10-2[34m^@[m', '[34m^@[mabcE4b10-3', 'abcE4b10-4[34m^@[mabcE4b10-4-2']),  [7;1Hexpr: [10C[34m^@^@[m[2CabcE4b10-2[34m^@^@[m[2CabcE4b10-3[34m^@[mabcE4b10-4[34m^@[mabcE4b10-4-2 (['abcE4b10--[8;1H0', '[34m^@[m', 'abcE4b10-2[34m^@[m', '[34m^@[mabcE4b10-3', 'abcE4b10-4[34m^@[mabcE4b10-4-2'])[8;71H[K[9;1H==[9;3H[K[10;2HabcE4b10-0=
 [34m^@[m[11;4H[K[12;2HabcE4b10-2[34m^@
[m [34m^@[mabcE4b10-3
 abcE4b10-4[34m^@[mabcE4b10-4-2
{{{1 Search and expressions
{{{2 setreg('/', ['abc/'])[16;27H[K[17;1H/: type v; value: abc/ (['abc/']), expr: abc/ (['abc/'])
==[18;4H[K[19;2Habc/=
{{{2 setreg('/', ['abc/[34m^@[m'])
/: type v; value: abc/[34m^@[m (['abc/[34m^@[m']), expr: abc/[34m^@[m (['abc/[34m^@[m'])
==[22;4H[K[23;2Habc/[34m^@[m=
{{{2 setreg('=', ['"abc/"'])
=: type v; value: abc/ (['abc/']), expr: "abc/" (['"abc/"'])
{{{2 setreg('=', ['"abc/[34m^@[m"'])[26;31H[K[27;1H=: type v; value: abc/[34m^@[m (['abc/[34m^@[m']), expr: "abc/[34m^@[m" (['"abc/[34m^@[m"'])
{{{1 System clipboard[28;22H[K[29;1H*: type V; value: clipboard contents[34m^@[m (['clipboard contents']), expr: clipboard contenn[30;1Hts[34m^@[m (['clipboard contents'])[30;30H[K[31;1H*: type V; value: something else[34m^@[m (['something else']), expr: something else[34m^@[m (['somee[32;1Hthing else'])[32;14H[K[33;1H{{{1 Errors[33;12H[K[34;1HExecuting call setreg()
Vim(call):E119: Not enough arguments for function: setreg
Executing call setreg(1)[36;25H[K[37;1HVim(call):E119: Not enough arguments for function: setreg
Executing call setreg(1, 2, 3, 4)[38;34H[K[39;1HVim(call):E118: Too many arguments for function: setreg
Executing call setreg([], 2)[40;29H[K[41;1HVim(call):E730: using List as a String
Executing call setreg(1, {})[42;29H[K[43;1HVim(call):E731: using Dictionary as a String
Executing call setreg(1, 2, [])[44;32H[K[45;1HVim(call):E730: using List as a String
Executing call setreg("/", ["1", "2"])
Vim(call):E883: search pattern and expression register may not contain two or more linee[48;1Hs[48;2H[K[49;1HExecuting call setreg("=", ["1", "2"])
Vim(call):E883: search pattern and expression register may not contain two or more linee[51;1Hs[51;2H[K[52;1HExecuting call setreg(1, ["", "", [], ""])
Vim(call):E730: using List as a String[53;39H[K[54;5Hfunction):E128: Function name must start with a capital or "s:": g:test()[55;70Hb[56;70Htest2() "#[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" function name starting with/without "g:", buffer-local funcref.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! g:Foo(n)[?25l
:  [?12l[?25h:  $put ='called Foo(' . a:n . ')'
[?25l:  [?12l[?25h:endfunction[1;1H[2L[?25l[1;2H[34m^@[mabcD4b-3
 abcD4b-4[34m^@[mabcD4b-4-2[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet b:my_func = function('Foo')[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall b:my_func(1)[?25l[1;56r[56;1H
[1;57r[56;1Hcalled Foo(1)[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hecho g:Foo(2)[?25l0[57;2H[K[1;56r[56;1H
[1;57r[56;1Hcalled Foo(2)[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hecho Foo(3)[?25l0[57;2H[K[1;56r[1;1H[2M[1;57r[55;1Hcalled Foo(3)
[1m[34m~                                                                                      [m[57;1H[K[55;1H[?12l[?25h[?25l

:[?12l[?25h"[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" script-local function used in Funcref must exist.[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso test_eval_func.vim[?25l[1;56r[1;1H[4M[1;57r[52;1Hs:Testje exists: 0[52;19H[K[53;1Hfunc s:Testje exists: 1
Bar exists: 1
func Bar exists: 1
[1m[34m~                                                                                      [m[57;1H[K[55;1H[?12l[?25h[?25l

:[?12l[?25h"[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Using $ instead of '$' must give an error[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htry[?25l
:  [?12l[?25h: call append($, 'foobar')
[?25l:  [?12l[?25h:catch
[?25l:  [?12l[?25h:$put =v:exception
[?25l:  [?12l[?25h:endtry[1;1H[4L[?25l[1;1H==
=abcE4b10-0=
 [34m^@[m
 abcE4b10-2[34m^@[m[56;1HVim(call):E116: Invalid arguments for function append[56;54H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='{{{1 getcurpos/setpos'[?25l[1;56r[56;1H
[1;57r[56;1H{{{1 getcurpos/setpos[57;1H[K[56;1H[?12l[?25h[?25l
/[?12l[?25h^012345678[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H6l:let sp = getcurpos()
0:call setpos('.', sp)
jyl:$put
:"
:" substring and variable name
:let str = 'abcdef'
:let n = 3
:$put =str[n:]
:$put =str[:n]
:$put =str[n:n]
:unlet n
:let nn = 3
:$put =str[nn:]
:$put =str[:nn]
:$put =str[nn:nn]
:unlet nn
:let b:nn = 4
:$put =str[b:nn:]
:$put =str[:b:nn]
:$put =str[b:nn:b:nn]
:unlet b:nn
:"
:/^start:/+1,$wq! test.out
:" vim: et ts=4 isk-=\: fmr=???,???
:call getchar()
ENDTEST

012345678
012345678

start:
{{{1 let tests
": type v; value: abc (['abc']), expr: abc (['abc'])
": type V; value: abc[34m^@[m (['abc']), expr: abc[34m^@[m (['abc'])
": type V; value: abc[34m^M^@[m (['abc[34m^M[m']), expr: abc[34m^M^@[m (['abc[34m^M[m'])
=: type v; value: abc (['abc']), expr: "abc" (['"abc"'])
{{{1 Basic setreg tests
{{{2 setreg('a', 'abcA', 'c')
a: type v; value: abcA (['abcA']), expr: abcA (['abcA'])
==
=abcA=
{{{2 setreg('b', 'abcB', 'v')
b: type v; value: abcB (['abcB']), expr: abcB (['abcB'])
==
=abcB=
{{{2 setreg('c', 'abcC', 'l')
c: type V; value: abcC[34m^@[m (['abcC']), expr: abcC[34m^@[m (['abcC'])
==
abcC
==
{{{2 setreg('d', 'abcD', 'V')
d: type V; value: abcD[34m^@[m (['abcD']), expr: abcD[34m^@[m (['abcD'])
==
abcD
==
{{{2 setreg('e', 'abcE', 'b')
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[m012345[?25l[57;1H[K[57;1H:[?12l[?25hlet sp = getcurpos()[?25l[28;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall setpos('.', sp)[?25l[28;7H[?12l[?25h[29;7H[?25l[57;1H[K[57;1H:[?12l[?25h$put[?25l[27m[23m[m[H[2J[1;2H[34m^@[m
 abcE4b10-2[34m^@
[m [34m^@[mabcE4b10-3
 abcE4b10-4[34m^@[mabcE4b10-4-2
{{{1 Search and expressions
{{{2 setreg('/', ['abc/'])
/: type v; value: abc/ (['abc/']), expr: abc/ (['abc/'])
==
=abc/=
{{{2 setreg('/', ['abc/[34m^@[m'])
/: type v; value: abc/[34m^@[m (['abc/[34m^@[m']), expr: abc/[34m^@[m (['abc/[34m^@[m'])
==
=abc/[34m^@[m=
{{{2 setreg('=', ['"abc/"'])
=: type v; value: abc/ (['abc/']), expr: "abc/" (['"abc/"'])
{{{2 setreg('=', ['"abc/[34m^@[m"'])
=: type v; value: abc/[34m^@[m (['abc/[34m^@[m']), expr: "abc/[34m^@[m" (['"abc/[34m^@[m"'])
{{{1 System clipboard
*: type V; value: clipboard contents[34m^@[m (['clipboard contents']), expr: clipboard contenn[20;1Hts[34m^@[m (['clipboard contents'])
*: type V; value: something else[34m^@[m (['something else']), expr: something else[34m^@[m (['somee[22;1Hthing else'])
{{{1 Errors
Executing call setreg()
Vim(call):E119: Not enough arguments for function: setreg
Executing call setreg(1)
Vim(call):E119: Not enough arguments for function: setreg
Executing call setreg(1, 2, 3, 4)
Vim(call):E118: Too many arguments for function: setreg
Executing call setreg([], 2)
Vim(call):E730: using List as a String
Executing call setreg(1, {})
Vim(call):E731: using Dictionary as a String
Executing call setreg(1, 2, [])
Vim(call):E730: using List as a String
Executing call setreg("/", ["1", "2"])
Vim(call):E883: search pattern and expression register may not contain two or more linee[38;1Hs
Executing call setreg("=", ["1", "2"])
Vim(call):E883: search pattern and expression register may not contain two or more linee[41;1Hs
Executing call setreg(1, ["", "", [], ""])
Vim(call):E730: using List as a String
Vim(function):E128: Function name must start with a capital or "s:": g:test()
Vim(function):E128: Function name must start with a capital or "s:": b:test()
Vim(function):E128: Function name must start with a capital or "s:": test2() "#
called Foo(1)
called Foo(2)
called Foo(3)
s:Testje exists: 0
func s:Testje exists: 1
Bar exists: 1
func Bar exists: 1
Vim(call):E116: Invalid arguments for function append
{{{1 getcurpos/setpos
6[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" substring and variable name[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet str = 'abcdef'[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet n = 3[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[n:][?25l[1;56r[56;1H
[1;57r[56;1Hdef[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =str[:n][?25l[1;56r[56;1H
[1;57r[56;1Habcd[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =str[n:n][?25l[1;56r[56;1H
[1;57r[56;1Hd[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet n[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet nn = 3[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[nn:][?25l[1;56r[56;1H
[1;57r[56;1Hdef[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =str[:nn][?25l[1;56r[56;1H
[1;57r[56;1Habcd[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =str[nn:nn][?25l[1;56r[56;1H
[1;57r[56;1Hd[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet nn[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet b:nn = 4[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[b:nn:][?25l[1;56r[56;1H
[1;57r[56;1Hef[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =str[:b:nn][?25l[1;56r[56;1H
[1;57r[56;1Habcde[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =str[b:nn:b:nn][?25l[1;56r[56;1H
[1;57r[56;1He[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hunlet b:nn[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^start:/+1,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 362 lines, 11279 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_eval = test61; then \
#	  if diff test.out test_eval.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_eval.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_eval.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_fixeol.failed test.ok test.out X* viminfo
cp test_fixeol.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_fixeol.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_fixeol.in" 40 lines, 780 characters[1;1HTests for 'fixeol'[25Cvim: set ft=vim :

STARTTEST
:" first write two test files [34m~@~S[m with and without trailing EOL
:" use Unix fileformat for consistency
:set ff=unix
:enew!
awith eol[34m^[[m:w! XXEol
:enew!
:set noeol nofixeol
awithout eol[34m^[[m:w! XXNoEol
:set eol fixeol
:bwipe XXEol XXNoEol
:"
:" try editing files with 'fixeol' disabled
:e! XXEol
ostays eol[34m^[[m:set nofixeol
:w! XXTestEol
:e! XXNoEol
ostays without[34m^[[m:set nofixeol
:w! XXTestNoEol
:bwipe XXEol XXNoEol XXTestEol XXTestNoEol
:set fixeol
:"
:" Append "END" to each file so that we can see what the last written char was.
ggdGaEND[34m^[[m:w >>XXEol
:w >>XXNoEol
:w >>XXTestEol
:w >>XXTestNoEol
:"
:" Concatenate the results
:e! test.out
a0[34m^[[m:$r XXEol
:$r XXNoEol
Go1[34m^[[m:$r XXTestEol
:$r XXTestNoEol
:w
:qa!
ENDTEST

[1m[34m~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for 'fixeol'[25Cvim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 35 lines, 698 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[39;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" first write two test files [34m~@~S[m with and without trailing EOL[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" use Unix fileformat for consistency[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ff=unix[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25henew![?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [1;1H[?12l[?25h[?25l[mwith eol[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! XXEol[?25l"XXEol" [57;9H[K[57;9H[New File] 1 line, 9 characters written[1;8H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25henew![?25l[1;1H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noeol nofixeol[?25l[1;1H[?12l[?25h[?25lwithout eol[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! XXNoEol[?25l"XXNoEol" [57;11H[K[57;11H[New File][Incomplete last line] 1 line, 11 characters written[1;11H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset eol fixeol[?25l[1;11H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXEol XXNoEol[?25l"test_fixeol.in" [57;18H[K[57;18H40 lines, 780 characters
2 buffers wiped out
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[2L[1;1HTests for 'fixeol'[25Cvim: set ft=vim :

STARTTEST[3;10H[K[4;1H:" first write two test files [34m~@~S[m with and without trailing EOL[4;66H[K[5;1H:" use Unix fileformat for consistency[5;39H[K[6;1H:set ff=unix[6;13H[K[7;1H:enew![7;7H[K[8;1Hawith eol[34m^[[m:w! XXEol[8;21H[K[9;1H:enew![9;7H[K[10;1H:set noeol nofixeol[10;20H[K[11;1Hawithout eol[34m^[[m:w! XXNoEol[11;26H[K[12;1H:set eol fixeol[12;16H[K[13;1H:bwipe XXEol XXNoEol[13;21H[K[14;1H:"[14;3H[K[15;1H:" try editing files with 'fixeol' disabled[15;44H[K[16;1H:e! XXEol[16;10H[K[17;1Hostays eol[34m^[[m:set nofixeol[17;26H[K[18;1H:w! XXTestEol[18;14H[K[19;1H:e! XXNoEol[19;12H[K[20;1Hostays without[34m^[[m:set nofixeol[20;30H[K[21;1H:w! XXTestNoEol[21;16H[K[22;1H:bwipe XXEol XXNoEol XXTestEol XXTestNoEol[22;43H[K[23;1H:set fixeol[23;12H[K[24;1H:"[24;3H[K[25;1H:" Append "END" to each file so that we can see what the last written char was.[25;80H[K[26;1HggdGaEND[34m^[[m:w >>XXEol[26;21H[K[27;1H:w >>XXNoEol[27;13H[K[28;1H:w >>XXTestEol[28;15H[K[29;1H:w >>XXTestNoEol[29;17H[K[30;1H:"[30;3H[K[31;1H:" Concatenate the results[31;27H[K[32;1H:e! test.out[32;13H[K[33;1Ha0[34m^[[m:$r XXEol[33;14H[K[34;1H:$r XXNoEol[34;12H[K[35;1HGo1[34m^[[m:$r XXTestEol[35;19H[K[36;1H:$r XXTestNoEol[36;16H[K[37;1H:w[37;3H[K[38;1H:qa![38;5H[K[39;1HENDTEST[39;8H[K[40;1H[K[57;1H[K[40;1H[?12l[?25h[?25l[57;1H:[?12l[?25h" try editing files with 'fixeol' disabled[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXEol[?25l"XXEol" [57;9H[K[57;9H1 line, 9 characters[1;1Hwith eol[1;9H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [1;1H[?12l[?25h[?25l[m
stays eol[2;10H[K[2;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nofixeol[?25l[2;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! XXTestEol[?25l"XXTestEol" [57;13H[K[57;13H[New File] 2 lines, 19 characters written[2;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXNoEol[?25l"XXNoEol" [57;11H[K[57;11H[Incomplete last line] 1 line, 11 characters[1;5Hout eol
[1m[34m~                                                                                      [1;1H[?12l[?25h[?25l[m
stays without[2;14H[K[2;13H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nofixeol[?25l[2;13H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! XXTestNoEol[?25l"XXTestNoEol" [57;15H[K[57;15H[New File][Incomplete last line] 2 lines, 25 characters written[2;13H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXEol XXNoEol XXTestEol XXTestNoEol[?25l"test_fixeol.in" [57;18H[K[57;18H40 lines, 780 characters
4 buffers wiped out
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset fixeol[?25l[1;1H[2L[1;1HTests for 'fixeol'[25Cvim: set ft=vim :

STARTTEST[3;10H[K[4;1H:" first write two test files [34m~@~S[m with and without trailing EOL[4;66H[K[5;1H:" use Unix fileformat for consistency[5;39H[K[6;1H:set ff=unix[6;13H[K[7;1H:enew![7;7H[K[8;1Hawith eol[34m^[[m:w! XXEol[8;21H[K[9;1H:enew![9;7H[K[10;1H:set noeol nofixeol[10;20H[K[11;1Hawithout eol[34m^[[m:w! XXNoEol[11;26H[K[12;1H:set eol fixeol[12;16H[K[13;1H:bwipe XXEol XXNoEol[13;21H[K[14;1H:"[14;3H[K[15;1H:" try editing files with 'fixeol' disabled[15;44H[K[16;1H:e! XXEol[16;10H[K[17;1Hostays eol[34m^[[m:set nofixeol[17;26H[K[18;1H:w! XXTestEol[18;14H[K[19;1H:e! XXNoEol[19;12H[K[20;1Hostays without[34m^[[m:set nofixeol[20;30H[K[21;1H:w! XXTestNoEol[21;16H[K[22;1H:bwipe XXEol XXNoEol XXTestEol XXTestNoEol[22;43H[K[23;1H:set fixeol[23;12H[K[24;1H:"[24;3H[K[25;1H:" Append "END" to each file so that we can see what the last written char was.[25;80H[K[26;1HggdGaEND[34m^[[m:w >>XXEol[26;21H[K[27;1H:w >>XXNoEol[27;13H[K[28;1H:w >>XXTestEol[28;15H[K[29;1H:w >>XXTestNoEol[29;17H[K[30;1H:"[30;3H[K[31;1H:" Concatenate the results[31;27H[K[32;1H:e! test.out[32;13H[K[33;1Ha0[34m^[[m:$r XXEol[33;14H[K[34;1H:$r XXNoEol[34;12H[K[35;1HGo1[34m^[[m:$r XXTestEol[35;19H[K[36;1H:$r XXTestNoEol[36;16H[K[37;1H:w[37;3H[K[38;1H:qa![38;5H[K[39;1HENDTEST[39;8H[K[40;1H[K[57;1H[K[40;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[40;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Append "END" to each file so that we can see what the last written char was.[?25l[40;1H[?12l[?25h[1;1H[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [m[57;1H--No lines in buffer--[57;23H[K[1;1H[?12l[?25h[?25lEND[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXEol[?25l"XXEol" [57;9H[K[57;9H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXNoEol[?25l"XXNoEol" [57;11H[K[57;11H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXTestEol[?25l"XXTestEol" [57;13H[K[57;13H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXTestNoEol[?25l"XXTestNoEol" [57;15H[K[57;15H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Concatenate the results[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! test.out[?25l"test.out" [New File][1;1H[K[1;1H[?12l[?25h[?25l0[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXEol[?25l"XXEol" [57;9H[K[57;9H2 lines, 13 characters[2;1Hwith eol[2;9H[K[3;1HEND[3;4H[K[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXNoEol[?25l"XXNoEol" [57;11H[K[57;11H1 line, 15 characters[4;1Hwithout eolEND[4;15H[K[4;1H[?12l[?25h[?25l
1[5;2H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXTestEol[?25l"XXTestEol" [57;13H[K[57;13H3 lines, 23 characters[6;1Hwith eol[6;9H[K[7;1Hstays eol[7;10H[K[8;1HEND[8;4H[K[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXTestNoEol[?25l"XXTestNoEol" [57;15H[K[57;15H2 lines, 29 characters[9;1Hwithout eol[9;12H[K[10;1Hstays withoutEND[10;17H[K[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"test.out" [New File] 10 lines, 84 characters written[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_fixeol = test61; then \
#	  if diff test.out test_fixeol.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_fixeol.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_fixeol.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_getcwd.failed test.ok test.out X* viminfo
cp test_getcwd.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_getcwd.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_getcwd.in" 96 lines, 2374 characters[1;1HTests for getcwd(), haslocaldir(), and :lcd[19Cvim: set ft=vim :

STARTTEST
:so small.vim
:" Do all test in a separate window to avoid E211 when we recursively
:" delete the Xtopdir directory during cleanup
:"
:" This will cause a few errors, do it silently.
:set visualbell
:set nocp viminfo+=nviminfo
:"
:" On windows a swapfile in Xtopdir prevents it from being cleaned up.
:set noswapfile
:"
:function! GetCwdInfo(win, tab)
: let tab_changed = 0
: let mod = ":t"
: if a:tab > 0 && a:tab != tabpagenr()
:   let tab_changed = 1
:   exec "tabnext " . a:tab
: endif
: let bufname = fnamemodify(bufname(winbufnr(a:win)), mod)
: if tab_changed
:   tabprevious
: endif
: if a:win == 0 && a:tab == 0
:   let dirname = fnamemodify(getcwd(), mod)
:   let lflag = haslocaldir()
: elseif a:tab == 0
:   let dirname = fnamemodify(getcwd(a:win), mod)
:   let lflag = haslocaldir(a:win)
: else
:   let dirname = fnamemodify(getcwd(a:win, a:tab), mod)
:   let lflag = haslocaldir(a:win, a:tab)
: endif
: return bufname . ' ' . dirname . ' ' . lflag
:endfunction
:" On windows a stale "Xtopdir" directory may exist, remove it so that
:" we start from a clean state.
:call delete("Xtopdir", "rf")
:let r=[]
:new
:let cwd=getcwd()
:let test_out = cwd . '/test.out'
:call mkdir('Xtopdir')
:cd Xtopdir
:call mkdir('Xdir1')
:call mkdir('Xdir2')
:call mkdir('Xdir3')
:new a
:new b
:new c
:3wincmd w
:lcd Xdir1
:call add(r, GetCwdInfo(0, 0))
:wincmd W[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for getcwd(), haslocaldir(), and :lcd[19Cvim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 90 lines, 2273 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[38M[1;57r[19;1H:call add(r, GetCwdInfo(0, 0))
:wincmd W
:lcd Xdir3
:call add(r, GetCwdInfo(0, 0))
:call add(r, GetCwdInfo(bufwinnr("a"), 0))
:call add(r, GetCwdInfo(bufwinnr("b"), 0))
:call add(r, GetCwdInfo(bufwinnr("c"), 0))
:wincmd W
:call add(r, GetCwdInfo(bufwinnr("a"), tabpagenr()))
:call add(r, GetCwdInfo(bufwinnr("b"), tabpagenr()))
:call add(r, GetCwdInfo(bufwinnr("c"), tabpagenr()))
:"
:tabnew x
:new y
:new z
:3wincmd w
:call add(r, GetCwdInfo(0, 0))
:wincmd W
:lcd Xdir2
:call add(r, GetCwdInfo(0, 0))
:wincmd W
:lcd Xdir3
:call add(r, GetCwdInfo(0, 0))
:call add(r, GetCwdInfo(bufwinnr("x"), 0))
:call add(r, GetCwdInfo(bufwinnr("y"), 0))
:call add(r, GetCwdInfo(bufwinnr("z"), 0))
:let tp_nr = tabpagenr()
:tabrewind
:call add(r, GetCwdInfo(3, tp_nr))
:call add(r, GetCwdInfo(2, tp_nr))
:call add(r, GetCwdInfo(1, tp_nr))
:"
:call writefile(r, test_out, "a")
:q
:exec "cd " . cwd
:call delete("Xtopdir", "rf")
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Do all test in a separate window to avoid E211 when we recursively[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" delete the Xtopdir directory during cleanup[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" This will cause a few errors, do it silently.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset visualbell[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocp viminfo+=nviminfo[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" On windows a swapfile in Xtopdir prevents it from being cleaned up.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noswapfile[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! GetCwdInfo(win, tab)[?25l
:  [?12l[?25h: let tab_changed = 0
[?25l:  [?12l[?25h: let mod = ":t"
[?25l:  [?12l[?25h: if a:tab > 0 && a:tab != tabpagenr()
[?25l:    [?12l[?25h:   let tab_changed = 1
[?25l:    [?12l[?25h:   exec "tabnext " . a:tab
[?25l:    [?12l[?25h: endif
[?25l:  [?12l[?25h: let bufname = fnamemodify(bufname(winbufnr(a:win)), mod)
[?25l:  [?12l[?25h: if tab_changed
[?25l:    [?12l[?25h:   tabprevious
[?25l:    [?12l[?25h: endif
[?25l:  [?12l[?25h: if a:win == 0 && a:tab == 0
[?25l:    [?12l[?25h:   let dirname = fnamemodify(getcwd(), mod)
[?25l:    [?12l[?25h:   let lflag = haslocaldir()
[?25l:    [?12l[?25h: elseif a:tab == 0
[?25l:    [?12l[?25h:   let dirname = fnamemodify(getcwd(a:win), mod)
[?25l:    [?12l[?25h:   let lflag = haslocaldir(a:win)
[?25l:    [?12l[?25h: else
[?25l:    [?12l[?25h:   let dirname = fnamemodify(getcwd(a:win, a:tab), mod)
[?25l:    [?12l[?25h:   let lflag = haslocaldir(a:win, a:tab)
[?25l:    [?12l[?25h: endif
[?25l:  [?12l[?25h: return bufname . ' ' . dirname . ' ' . lflag
[?25l:  [?12l[?25h:endfunction[1;1H[22L[?25l[1;1H:call delete("Xtopdir", "rf")
:let r=[]
:new
:let cwd=getcwd()
:let test_out = cwd . '/test.out'
:call mkdir('Xtopdir')
:cd Xtopdir
:call mkdir('Xdir1')
:call mkdir('Xdir2')
:call mkdir('Xdir3')
:new a
:new b
:new c
:3wincmd w
:lcd Xdir1
:call add(r, GetCwdInfo(0, 0))
:wincmd W
:call add(r, GetCwdInfo(0, 0))
:wincmd W
:lcd Xdir3
:call add(r, GetCwdInfo(0, 0))
:call add(r, GetCwdInfo(bufwinnr("a"), 0))[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h" On windows a stale "Xtopdir" directory may exist, remove it so that[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" we start from a clean state.[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall delete("Xtopdir", "rf")[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet r=[][?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;2Htabnew x
:new y[30;7H[K[31;6Hz
:3wincmd w
:call add(r, GetCwdInfo(0, 0))
:wincmd W[34;10H[K[35;2Hlcd Xdir2
:call add(r, GetCwdInfo(0, 0))
:wincmd W[37;10H[K[38;2Hlcd Xdir3
:call add(r, GetCwdInfo(0, 0))[40;25Hbufwinnr("x"), 0))[41;35Hy[42;35Hz
:let tp_nr = tabpagenr()[43;25H[K[44;2Htabrewind[44;12H[K[45;2Hcall add(r, GetCwdInfo(3, tp_nr))[46;25H2[47;25H1
:"[48;3H[K[49;2Hcall writefile(r, test_out, "a")
:q[50;3H[K[51;2Hexec "cd " . cwd
:call delete("Xtopdir", "rf")
:qa![53;5H[K[54;1HENDTEST[55;1H[K[56;1H[7mtest_getcwd.in                                                                         [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet cwd=getcwd()[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet test_out = cwd . '/test.out'[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall mkdir('Xtopdir')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd Xtopdir[?25l/sources/vim80/src/testdir/Xtopdir[56;1H[7m/sources/vim80/src/testdir/test_getcwd.in[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall mkdir('Xdir1')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall mkdir('Xdir2')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall mkdir('Xdir3')[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew a[?25l"a" [New File][27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[1m[7ma                                                                                      [m[21;1H[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [m[38;1H[7m[No Name]                                                                              [m[39;1H:call add(r, GetCwdInfo(0, 0))
:call add(r, GetCwdInfo(bufwinnr("x"), 0))
:call add(r, GetCwdInfo(bufwinnr("y"), 0))
:call add(r, GetCwdInfo(bufwinnr("z"), 0))
:let tp_nr = tabpagenr()
:tabrewind
:call add(r, GetCwdInfo(3, tp_nr))
:call add(r, GetCwdInfo(2, tp_nr))
:call add(r, GetCwdInfo(1, tp_nr))
:"
:call writefile(r, test_out, "a")
:q
:exec "cd " . cwd
:call delete("Xtopdir", "rf")
:qa!
ENDTEST

[7m/sources/vim80/src/testdir/test_getcwd.in                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hnew b[?25l"b" [New File][27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [m[14;1H[1m[7mb                                                                                      [m[16;1H[1m[34m~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[7ma                                                                                      [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [m[42;1H[7m[No Name]                                                                              [m[43;1H:let tp_nr = tabpagenr()
:tabrewind
:call add(r, GetCwdInfo(3, tp_nr))
:call add(r, GetCwdInfo(2, tp_nr))
:call add(r, GetCwdInfo(1, tp_nr))
:"
:call writefile(r, test_out, "a")
:q
:exec "cd " . cwd
:call delete("Xtopdir", "rf")
:qa!
ENDTEST

[7m/sources/vim80/src/testdir/test_getcwd.in                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hnew c[?25l"c" [New File][27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [m[12;1H[1m[7mc                                                                                      [m[14;1H[1m[34m~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [m[23;1H[7mb                                                                                      [m[25;1H[1m[34m~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [m[34;1H[7ma                                                                                      [m[36;1H[1m[34m~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [m[45;1H[7m[No Name]                                                                              [m[46;1H:call add(r, GetCwdInfo(2, tp_nr))
:call add(r, GetCwdInfo(1, tp_nr))
:"
:call writefile(r, test_out, "a")
:q
:exec "cd " . cwd
:call delete("Xtopdir", "rf")
:qa!
ENDTEST

[7m/sources/vim80/src/testdir/test_getcwd.in                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h3wincmd w[?25l[12;1H[7mc[m[1m[7m [m[7m                                                                                      [m[34;1H[1m[7ma                                                                                      [24;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlcd Xdir1[?25l/sources/vim80/src/testdir/Xtopdir/Xdir1[12;1H[7m/sources/vim80/src/testdir/Xtopdir/c[23;1H/sources/vim80/src/testdir/Xtopdir/b[m[34;1H[1m[7m/sources/vim80/src/testdir/Xtopdir/a[24;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(0, 0))[?25l[24;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd W[?25l[12;1H[7mc                                   [m[23;1H[1m[7mb                                                                                      [m[34;1H[7ma[m[1m[7ms[m[7m                                                                                      [13;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(0, 0))[?25l[13;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd W[?25l[12;1H[1m[7mc                                                                                      [m[23;1H[7mb[m[1m[7m [m[7m                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlcd Xdir3[?25l/sources/vim80/src/testdir/Xtopdir/Xdir3[12;1H[1m[7m/sources/vim80/src/testdir/Xtopdir/c[m[23;1H[7m/sources/vim80/src/testdir/Xtopdir/b[34;1H/sources/vim80/src/testdir/Xtopdir/a[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(0, 0))[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(bufwinnr("a"), 0))[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(bufwinnr("b"), 0))[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(bufwinnr("c"), 0))[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd W[?25l[12;1H[7mc[m[1m[7ms[m[7m                                                                                      [23;1Hb                                   [34;1Ha                                   [m[56;1H[1m[7m/sources/vim80/src/testdir/test_getcwd.in                                              [55;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(bufwinnr("a"), tabpagenr()))[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(bufwinnr("b"), tabpagenr()))[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(bufwinnr("c"), tabpagenr()))[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htabnew x[?25l"x" [New File][27m[23m[m[H[2J[1;1H[4m[30m[47m [m[4m[35m[47m5[m[4m[30m[47m /s/v/s/t/test_getcwd.in [m[1m x [m[7m                                                         [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [2;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hnew y[?25l"y" [New File][1;29H[1m[35m2[m[1m y [m[54C[7m [m[1;87H[4m[30m[47mX[m[29;1H[1m[7my[m[1m[34m [m[1m[7m                                                                                      [m[30;1H[K[56;1H[7mx[m[1m[34m [m[7m                                                                                      [2;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hnew z[?25l"z" [New File][27m[23m[m[H[2J[1;1H[4m[30m[47m [m[4m[35m[47m5[m[4m[30m[47m /s/v/s/t/test_getcwd.in [m[1m [m[1m[35m3[m[1m z [m[7m                                                       [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [m[20;1H[1m[7mz                                                                                      [m[22;1H[1m[34m~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [m[38;1H[7my                                                                                      [m[40;1H[1m[34m~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7mx                                                                                      [2;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h3wincmd w[?25l[20;1H[7mz[m[1m[7m [m[7m                                                                                      [m[56;1H[1m[7mx                                                                                      [m[1;31H[1mx [m[54C[7m [m[1;87H[4m[30m[47mX[39;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(0, 0))[?25l[39;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd W[?25l[38;1H[1m[7my                                                                                      [m[56;1H[7mx[m[1m[7m [m[7m                                                                                      [m[1;31H[1my [m[54C[7m [m[1;87H[4m[30m[47mX[21;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlcd Xdir2[?25l/sources/vim80/src/testdir/Xtopdir/Xdir2[1;31H[1m/s/v/s/t/X/y [m[43C[7m [m[1;87H[4m[30m[47mX[m[20;1H[7m/sources/vim80/src/testdir/Xtopdir/z[m[38;1H[1m[7m/sources/vim80/src/testdir/Xtopdir/y[m[56;1H[7m/sources/vim80/src/testdir/Xtopdir/x[21;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(0, 0))[?25l[21;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd W[?25l[1;31H[1mzs /[m[7m           [43C [m[1;87H[4m[30m[47mX[m[20;1H[1m[7mz                                                                                      [m[38;1H[7my[m[1m[7ms[m[7m                                                                                      [56;1Hx                                   [2;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlcd Xdir3[?25l/sources/vim80/src/testdir/Xtopdir/Xdir3[1;31H[1m/s/v/s/t/X/z [m[43C[7m [m[1;87H[4m[30m[47mX[m[20;1H[1m[7m/sources/vim80/src/testdir/Xtopdir/z[m[38;1H[7m/sources/vim80/src/testdir/Xtopdir/y[56;1H/sources/vim80/src/testdir/Xtopdir/x[2;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(0, 0))[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(bufwinnr("x"), 0))[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(bufwinnr("y"), 0))[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall add(r, GetCwdInfo(bufwinnr("z"), 0))[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet tp_nr = tabpagenr()[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htabrewind[?25l[27m[23m[m[H[2J[1;1H[1m [m[1m[35m5[m[1m /s/v/s/t/test_getcwd.in [m[4m[30m[47m [m[4m[35m[47m3[m[4m[30m[47m z [m[7m                                                       [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [m[13;1H[7mc                                                                                      [m[15;1H[1m[34m~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [m[24;1H[7mb                                                                                      [m[26;1H[1m[34m~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [m[35;1H[7ma                                                                                      [m[37;1H[1m[34m~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [m[46;1H[7m[No Name]                                                                              [m[47;1H:call add(r, GetCwdInfo(1, tp_nr))
:"
:call writefile(r, test_out, "a")
:q
:exec "cd " . cwd
:call delete("Xtopdir", "rf")
:qa!
ENDTEST

[1m[7m/sources/vim80/src/testdir/test_getcwd.in                                              [55;1H[?12l[?25h[?25l

[m:[?12l[?25hcall add(r, GetCwdInfo(3, tp_nr))[?25l[27m[23m[m[H[2J[1;1H[1m [m[1m[35m5[m[1m /s/v/s/t/test_getcwd.in [m[4m[30m[47m [m[4m[35m[47m3[m[4m[30m[47m z [m[7m                                                       [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [m[13;1H[7mc                                                                                      [m[15;1H[1m[34m~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [m[24;1H[7mb                                                                                      [m[26;1H[1m[34m~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [m[35;1H[7ma                                                                                      [m[37;1H[1m[34m~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [m[46;1H[7m[No Name]                                                                              [m[47;1H:call add(r, GetCwdInfo(1, tp_nr))
:"
:call writefile(r, test_out, "a")
:q
:exec "cd " . cwd
:call delete("Xtopdir", "rf")
:qa!
ENDTEST

[1m[7m/sources/vim80/src/testdir/test_getcwd.in                                              [55;1H[?12l[?25h[?25l

[m:[?12l[?25hcall add(r, GetCwdInfo(2, tp_nr))[?25l[27m[23m[m[H[2J[1;1H[1m [m[1m[35m5[m[1m /s/v/s/t/test_getcwd.in [m[4m[30m[47m [m[4m[35m[47m3[m[4m[30m[47m z [m[7m                                                       [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [m[13;1H[7mc                                                                                      [m[15;1H[1m[34m~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [m[24;1H[7mb                                                                                      [m[26;1H[1m[34m~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [m[35;1H[7ma                                                                                      [m[37;1H[1m[34m~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [m[46;1H[7m[No Name]                                                                              [m[47;1H:call add(r, GetCwdInfo(1, tp_nr))
:"
:call writefile(r, test_out, "a")
:q
:exec "cd " . cwd
:call delete("Xtopdir", "rf")
:qa!
ENDTEST

[1m[7m/sources/vim80/src/testdir/test_getcwd.in                                              [55;1H[?12l[?25h[?25l

[m:[?12l[?25hcall add(r, GetCwdInfo(1, tp_nr))[?25l[27m[23m[m[H[2J[1;1H[1m [m[1m[35m5[m[1m /s/v/s/t/test_getcwd.in [m[4m[30m[47m [m[4m[35m[47m3[m[4m[30m[47m z [m[7m                                                       [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [m[13;1H[7mc                                                                                      [m[15;1H[1m[34m~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [m[24;1H[7mb                                                                                      [m[26;1H[1m[34m~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [m[35;1H[7ma                                                                                      [m[37;1H[1m[34m~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [m[46;1H[7m[No Name]                                                                              [m[47;1H:call add(r, GetCwdInfo(1, tp_nr))
:"
:call writefile(r, test_out, "a")
:q
:exec "cd " . cwd
:call delete("Xtopdir", "rf")
:qa!
ENDTEST

[1m[7m/sources/vim80/src/testdir/test_getcwd.in                                              [55;1H[?12l[?25h[?25l

[m:[?12l[?25h"[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall writefile(r, test_out, "a")[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hq[?25l[27m[23m[m[H[2J[1;1H[1m [m[1m[35m4[m[1m [No Name] [m[4m[30m[47m [m[4m[35m[47m3[m[4m[30m[47m z [m[7m                                                                     [m[1;87H[4m[30m[47mX[m[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [m[15;1H[7mc                                                                                      [m[17;1H[1m[34m~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [m[29;1H[7mb                                                                                      [m[31;1H[1m[34m~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [m[42;1H[7ma                                                                                      [m[44;1H[1m[34m~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name]                                                                              [43;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hexec "cd " . cwd[?25l/sources/vim80/src/testdir[1;17H[4m[30m[47mX/z [m[66C[7m [m[1;87H[4m[30m[47mX[m[15;1H[7mXtopdir/c[29;1HXtopdir/b[42;1HXtopdir/a
[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall delete("Xtopdir", "rf")[?25l[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_getcwd = test61; then \
#	  if diff test.out test_getcwd.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_getcwd.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_getcwd.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_insertcount.failed test.ok test.out X* viminfo
cp test_insertcount.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_insertcount.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_insertcount.in" 14 lines, 204 characters[1;1HTests for repeating insert and replace.

STARTTEST
:so small.vim
:/Second
4gro
:/^First/,$wq! test.out
:" get here when failed and in Insert mode
[34m^[[m:.wq! test.out
ENDTEST

First line
Second line
Last line
[1m[34m~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for repeating insert and replace.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 6 lines, 111 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[10;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[11;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[11;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/Second[?25l[13;1H[?12l[?25h[?25looooecond lineooo[?12l[?25h
Las[?25l[57;1H[K[57;1H:[?12l[?25h/^First/,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 3 lines, 36 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_insertcount = test61; then \
#	  if diff test.out test_insertcount.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_insertcount.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_insertcount.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_listchars.failed test.ok test.out X* viminfo
cp test_listchars.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_listchars.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_listchars.in" 54 lines, 705 characters[1;1HTests for 'listchars' display with 'list' and :list

STARTTEST
:so small.vim
:set ff=unix
:let g:lines = []
:function GetScreenCharsForLine(lnum)
:  return join(map(range(1, virtcol('$')), 'nr2char(screenchar(a:lnum, v:val))'), '')
:endfunction
:nnoremap <expr> GG ":call add(g:lines, GetScreenCharsForLine(".screenrow()."))\<CR>"
:set listchars+=tab:>-,space:.,trail:<
:set list
:
/^start:/
:normal! jzt
GG
GG
GG
GG
GGH:
:set listchars-=trail:<
GG
GG
GG
GG
GG:
:put =g:lines
:'[,']w! test.out
ENDTEST

start:[32;9Haa
  bb
   cccc
dd[8Cee[39;1HSTARTTEST
:set listchars+=trail:<
:set nolist
:
/^start:/
:redir! >> test.out
:+1,$list
:redir END
:q!
ENDTEST

start:
  fff[52;9Hgg[53;6Hh
iii
[1m[34m~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for 'listchars' display with 'list' and :list[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 25 lines, 431 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[29;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ff=unix[?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:lines = [][?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction GetScreenCharsForLine(lnum)[?25l
:  [?12l[?25h:  return join(map(range(1, virtcol('$')), 'nr2char(screenchar(a:lnum, v:val))'), '
[56;87H'[57;1H)
[?25l:  [?12l[?25h:endfunction[1;1H[3L[?25l[1;1HTests for 'listchars' display with 'list' and :list

STARTTEST[57;1H[K[30;1H[?12l[?25h[?25l[57;1H:[?12l[?25hnnoremap <expr> GG ":call add(g:lines, GetScreenCharsForLine(".screenrow()."))\<CR>"[?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset listchars+=tab:>-,space:.,trail:<[?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset list[?25l[1;6H[34m.[mfor[34m.[11C.[7C.[mwith[34m.[m'list'[34m.[mand[34m.[m:list[1m[34m$
$[3;10H$[m
:so[34m.[m[9C[1m[34m$[m
:set[34m.[m[7C[1m[34m$[m
:let[34m.[7C.[m=[34m.[m[][1m[34m$[m[7;10H[34m.[m[27C[1m[34m$[m
:[34m..[mreturn[34m.[17C.[14C.[27C.[10C.[m'')[1m[34m$[9;13H$[m[10;10H[34m.[m<expr>[34m.[mGG[34m.[m":call[34m.[12C.[m[45C[1m[34m$[m
:set[34m.[m[33C[1m[34m$[m
:set[34m.[mlist[1m[34m$
[m:[1m[34m$[14;10H$[m[15;9H[34m.[mjzt[1m[34m$
[mGG[1m[34m$
[mGG[1m[34m$
[mGG[1m[34m$
[mGG[1m[34m$
[mGGH:[1m[34m$[m
:set[34m.[m[18C[1m[34m$
[mGG[1m[34m$
[mGG[1m[34m$
[mGG[1m[34m$
[mGG[1m[34m$
[mGG:[1m[34m$[m
:put[34m.[m[8C[1m[34m$[m[28;9H[34m.[m[8C[1m[34m$[29;8H$
$[31;7H$[m
[34m>-------[maa[34m>-----[m[1m[34m$[m
[34m..[mbb[34m>---<<[m[1m[34m$[m
[34m...[mcccc[34m><[m[1m[34m$[m
dd[34m........[mee[34m<<>-[m[1m[34m$[m
[34m<[m[1m[34m$
$
$[39;10H$[m
:set[34m.[m[18C[1m[34m$[m
:set[34m.[mnolist[1m[34m$
[m:[1m[34m$[43;10H$[m[44;8H[34m.[m>>[34m.[m[8C[1m[34m$[45;10H$[m[46;7H[34m.[mEND[1m[34m$
[m:q![1m[34m$[48;8H$
$[50;7H$[m
[34m..[mfff[34m>--<<[m[1m[34m$[m
[34m>-------[mgg[34m>-----[m[1m[34m$[m
[34m.....[mh[34m>-[m[1m[34m$[m
iii[34m<<<<><<[m[1m[34m$[30;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h[?25l[30;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^start:/[?25l[57;9H[K[57;1H[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnormal! jzt[?25l[1;56r[1;1H[31M[1;57r[26;1H[1m[34m~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:call add(g:lines, GetScreenCharsForLine(1))[1;1H[?12l[?25h
[?25l[57;1H[K[57;1H:call add(g:lines, GetScreenCharsForLine(2))[2;1H[?12l[?25h
[?25l[57;1H[K[57;1H:call add(g:lines, GetScreenCharsForLine(3))[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:call add(g:lines, GetScreenCharsForLine(4))[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:call add(g:lines, GetScreenCharsForLine(5))[5;1H[?12l[?25h[1;9H[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset listchars-=trail:<[?25l[2;9H[34m..[3;9H.[4;13H..
.[20;9H..[23;4H....>..[1;9H[?12l[?25h[?25l[m[57;1H[K[57;1H:call add(g:lines, GetScreenCharsForLine(1))[1;9H[?12l[?25h[2;9H[?25l[57;1H[K[57;1H:call add(g:lines, GetScreenCharsForLine(2))[2;9H[?12l[?25h[3;9H[?25l[57;1H[K[57;1H:call add(g:lines, GetScreenCharsForLine(3))[3;9H[?12l[?25h[4;9H[?25l[57;1H[K[57;1H:call add(g:lines, GetScreenCharsForLine(4))[4;9H[?12l[?25h
[?25l[57;1H[K[57;1H:call add(g:lines, GetScreenCharsForLine(5))[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hput =g:lines[?25l10 more [6;56r[6;1H[10L[1;57r[6;1H>-------aa>-----$[1m[34m$[m
..bb>---<<$[1m[34m$[m
...cccc><$[1m[34m$[m
dd........ee<<>-$[1m[34m$[m
<$[1m[34m$[m
>-------aa>-----$[1m[34m$[m
..bb>---..$[1m[34m$[m
...cccc>.$[1m[34m$[m
dd........ee..>-$[1m[34m$[m
.$[1m[34m$[m[57;1H[K[57;1H10 more lines[15;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h'[,']w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 10 lines, 124 characters written[15;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[18;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H8 lines, 93 characters written[19;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[19;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset listchars+=trail:<[?25l[2;9H[34m<<[3;9H<[4;13H<<
<[30;9H<<[33;4H<<<<><<[28;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset nolist[?25l[1;1H        aa      [1;17H[K[2;1H  bb      [2;11H[K[3;1H   cccc  [3;10H[K[4;3H        ee    [4;17H[K[5;1H [5;2H[K[6;18H[K[7;12H[K[8;11H[K[9;18H[K[10;3H[K[11;18H[K[12;12H[K[13;11H[K[14;18H[K[15;3H[K[16;1H[K[17;1H[K[18;10H[K[19;5H [19;24H[K[20;5H [20;12H[K[21;2H[K[22;10H[K[23;8H >> [23;20H[K[24;10H[K[25;7H [25;11H[K[26;4H[K[27;8H[K[28;1H[K[29;7H[K[30;1H  fff     [30;11H[K[31;1H        gg      [31;17H[K[32;1H     h  [32;9H[K[33;4H       [33;11H[K[28;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[28;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^start:/[?25l[57;9H[K[57;1H[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir! >> test.out[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h+1,$list[?25l[34m..[mfff[34m>--<<[m[1m[34m$[m
[34m>-------[mgg[34m>-----[m[1m[34m$[m
[34m.....[mh[34m>-[m[1m[34m$[m
iii[34m<<<<><<[m[1m[34m$[m
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[4L[1;9Haa
  bb
   cccc
dd[8Cee[57;1H[K[33;1H[?12l[?25h[?25l[57;1H:[?12l[?25hq![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_listchars = test61; then \
#	  if diff test.out test_listchars.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_listchars.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_listchars.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_listlbr.failed test.ok test.out X* viminfo
cp test_listlbr.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_listlbr.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_listlbr.in" 119 lines, 2868 characters[1;1HTest for linebreak and list option (non-utf8)

STARTTEST
:so small.vim
:if !exists("+linebreak") || !has("conceal") | e! test.ok | w! test.out | qa! | endif
:10new|:vsp|:vert resize 20
:put =\"\tabcdef hijklmn\tpqrstuvwxyz_1060ABCDEFGHIJKLMNOP \"
:norm! zt
:set ts=4 sw=4 sts=4 linebreak sbr=+ wrap
:fu! ScreenChar(width)
:[7Clet c=''
:[7Cfor j in range(1,4)
:[11Cfor i in range(1,a:width)
:[15Clet c.=nr2char(screenchar(j, i))
:[11Cendfor
:[11Clet c.="\n"
:[7Cendfor
:[7Creturn c
:endfu
:fu! DoRecordScreen()
:[7Cwincmd l
:[7C$put =printf(\"\n%s\", g:test)
:[7C$put =g:line
:[7Cwincmd p
:endfu
:"
:let g:test="Test 1: set linebreak"
:redraw!
:let line=ScreenChar(winwidth(0))
:call DoRecordScreen()
:"
:let g:test="Test 2: set linebreak + set list"
:set linebreak list listchars=
:redraw!
:let line=ScreenChar(winwidth(0))
:call DoRecordScreen()
:"
:let g:test ="Test 3: set linebreak nolist"
:set nolist linebreak
:redraw!
:let line=ScreenChar(winwidth(0))
:call DoRecordScreen()
:"
:let g:test ="Test 4: set linebreak with tab and 1 line as long as screen: should breakk[45;1H!"
:set nolist linebreak ts=8
:let line="1\t".repeat('a', winwidth(0)-2)
:$put =line
:$
:norm! zt
:redraw!
:let line=ScreenChar(winwidth(0))
:call DoRecordScreen()
:let line="_S_\t bla"
:$put =line
:$[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for linebreak and list option (non-utf8)[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 114 lines, 2792 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:set cpo&vim linebreak
:"
:let g:test ="Test 6: set linebreak with visual block mode"
:let line="REMOVE: this not"
:$put =g:test
:$put =line
:let line="REMOVE: aaaaaaaaaaaaa"
:$put =line
:1/^REMOVE:
0[34m^V[mjf x:$put
:set cpo&vim linebreak
:"
:let g:test ="Test 7: set linebreak with visual block mode and v_b_A"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGET at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:set cpo&vim linebreak sbr=
:"
:let g:test ="Test 8: set linebreak with visual char mode and changing block"
:$put =g:test
Go1111-1111-1111-11-1111-1111-1111[34m^[[m0f-lv3lc2222[34m^[[mbgj.
:"
:let g:test ="Test 9: using redo after block visual mode"
:$put =g:test
Go
aaa
aaa
a[34m^[[m2k[34m^V[m2j~e.
:"
:let g:test ="Test 10: using normal commands after block-visual"
:$put =g:test
:set linebreak
Go
abcd{ef
ghijklm
no}pqrs[34m^[[m2k0f{[34m^V^V[mc%[34m^[[m
:"
:let g:test ="Test 11: using block replace mode after wrapping"
:$put =g:test
:set linebreak wrap
Go[34m^[[m150aa[34m^[[myypk147|[34m^V[mjr0
:"
:let g:test ="Test 12: set linebreak list listchars=space:_,tab:>-,tail:-,eol:$"
:set list listchars=space:_,trail:-,tab:>-,eol:$
:$put =g:test
:let line="a aaaaaaaaaaaaaaaaaaaaaa\ta "
:$put =line
:$
:norm! zt
:redraw!
:let line=ScreenChar(winwidth(0))
:call DoRecordScreen()
:%w! test.out
:qa!
ENDTEST
dummy text[55;1H[?12l[?25h
[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !exists("+linebreak") || !has("conceal") | e! test.ok | w! test.out | qa! | endif[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h10new|:vsp|:vert resize 20[?25l[1;1H                    [7m|[2;21H|[3;21H|[4;21H|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[10;21H|[m[2;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   [m
[1m[7m[No Name]            [m[1;22H[K[2;22H[1m[34m~                                                                 [3;22H~                                                                 [4;22H~                                                                 [5;22H~                                                                 [6;22H~                                                                 [7;22H~                                                                 [8;22H~                                                                 [9;22H~                                                                 [10;22H~                                                                 [m[11;22H[7m[No Name]                                                         [m[12;2Hlet g:test ="Test 7: set linebreak with visual block mode and v_b_A"
:$put =g:test[13;14H[K[14;1HGolong line: [34m^[[m40afoobar [34m^[[maTARGET at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"[15;32H[K[16;2Hset cpo&vim linebreak sbr=[16;28H[K[17;2H"[17;3H[K[18;2Hlet g:test ="Test 8: set linebreak with visual char mode and changing block"
:$put =g:test[19;14H[K[20;1HGo1111-1111-1111-11-1111-1111-1111[34m^[[m0f-lv3lc2222[34m^[[mbgj.
:"[21;3H[K[22;2Hlet g:test ="Test 9: using redo after block visual mode"
:$put =g:test[23;14H[K[24;1HGo[24;3H[K[25;1Haaa

a[34m^[[m2k[34m^V[m2j~e.
:"[28;3H[K[29;2Hlet g:test ="Test 10: using normal commands after block-visual"
:$put =g:test[30;14H[K[31;2Hset linebreak
Go[32;3H[K[33;1Habcd{ef
ghijklm
no}pqrs[34m^[[m2k0f{[34m^V^V[mc%[34m^[[m
:"[36;3H[K[37;2Hlet g:test ="Test 11: using block replace mode after wrapping"
:$put =g:test[38;14H[K[39;2Hset linebreak wrap
Go[34m^[[m150aa[34m^[[myypk147|[34m^V[mjr0
:"[41;3H[K[42;2Hlet g:test ="Test 12: set linebreak list listchars=space:_,tab:>-,tail:-,eol:$"
:set list listchars=space:_,trail:-,tab:>-,eol:$[43;49H[K[44;2H$put =g:test[44;14H[K[45;2Hlet line="a aaaaaaaaaaaaaaaaaaaaaa\ta "
:$put =line[46;12H[K[47;3H[K[48;2Hnorm! zt
:redraw![49;9H[K[50;2Hlet line=ScreenChar(winwidth(0))
:call DoRecordScreen()[51;23H[K[52;2H%w! test.out[52;14H[K[53;2Hqa[53;6H[K[54;1HENDTEST
dummy text
[7mtest_listlbr.in                                                                        [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hput =\"\tabcdef hijklmn\tpqrstuvwxyz_1060ABCDEFGHIJKLMNOP \"[?25l[2;1H        abcdef hijkl
mn  pqrstuvwxyz_1060
ABCDEFGHIJKLMNOP    [11;11H[1m[7m[+][m[2;22H        abcdef hijklmn  pqrstuvwxyz_1060ABCDEFGHIJKLMNOP [2;79H[K[11;32H[7m[+][2;9H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hnorm! zt[?25l[1;1H        abcdef hijkl
mn  pqrstuvwxyz_1060
ABCDEFGHIJKLMNOP    
[1m[34m~                   
~                   
~                   
~                   
~                   
~                   [m
                    [1m[34m~                   [m[57;1H[K[1;9H[?12l[?25h[?25l[57;1H:[?12l[?25hset ts=4 sw=4 sts=4 linebreak sbr=+ wrap[?25l[1;5Habcdef          
[1m[34m+[mhijklmn            
[1m[34m+[mpqrstuvwxyz_1060ABC
[1m[34m+[mDEFGHIJKLMNOP      [2;26Habcdef hijklmn  pqrstuvwxyz_1060ABCDEFGHIJKLMNOP [2;75H[K[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfu! ScreenChar(width)[?25l
:  [?12l[?25h:[34m^I[mlet c=''
[?25l:  [?12l[?25h:[34m^I[mfor j in range(1,4)
[?25l:    [?12l[?25h:[34m^I[m    for i in range(1,a:width)
[?25l:      [?12l[?25h:[34m^I[m    [34m^I[mlet c.=nr2char(screenchar(j, i))
[?25l:      [?12l[?25h:[34m^I[m    endfor
[?25l:    [?12l[?25h:           let c.="\n"
[?25l:    [?12l[?25h:[34m^I[mendfor
[?25l:  [?12l[?25h:[34m^I[mreturn c
[?25l:  [?12l[?25h:endfu[1;1H[9L[?25l[1;5Habcdef[10C[7m|[m
[1m[34m+[mhijklmn[12C[7m|[m
[1m[34m+[mpqrstuvwxyz_1060ABC[7m|[m
[1m[34m+[mDEFGHIJKLMNOP      [7m|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[m[5;1H[1m[34m~                   
~                   
~                   
~                   
~                   [m[2;26Habcdef hijklmn  pqrstuvwxyz_1060ABCDEFGHIJKLMNOP[3;22H[1m[34m~                                                                 [4;22H~                                                                 [5;22H~                                                                 [6;22H~                                                                 [7;22H~                                                                 [8;22H~                                                                 [9;22H~                                                                 [m[57;1H[K[1;5H[?12l[?25h[?25l[57;1H:[?12l[?25hfu! DoRecordScreen()[?25l
:  [?12l[?25h:[34m^I[mwincmd l
[?25l:  [?12l[?25h:[34m^I[m$put =printf(\"\n%s\", g:test)
[?25l:  [?12l[?25h:[34m^I[m$put =g:line
[?25l:  [?12l[?25h:[34m^I[mwincmd p
[?25l:  [?12l[?25h:endfu[1;1H[5L[?25l[1;5Habcdef[10C[7m|[m
[1m[34m+[mhijklmn[12C[7m|[m
[1m[34m+[mpqrstuvwxyz_1060ABC[7m|[m
[1m[34m+[mDEFGHIJKLMNOP      [7m|[5;21H|[m[1m[34m~                   [m[2;26Habcdef hijklmn  pqrstuvwxyz_1060ABCDEFGHIJKLMNOP[3;22H[1m[34m~                                                                 [4;22H~                                                                 [5;22H~                                                                 [m[57;1H[K[1;5H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 1: set linebreak"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredraw![?25l[27m[23m[m[H[2J[1;5Habcdef[10C[7m|[m
[1m[34m+[mhijklmn[12C[7m|[m
[1m[34m+[mpqrstuvwxyz_1060ABC[7m|[m
[1m[34m+[mDEFGHIJKLMNOP      [7m|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[10;21H|[m[5;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   [m
[1m[7m[No Name] [+]        [m[2;26Habcdef hijklmn  pqrstuvwxyz_1060ABCDEFGHIJKLMNOP[3;22H[1m[34m~                                                                 [4;22H~                                                                 [5;22H~                                                                 [6;22H~                                                                 [7;22H~                                                                 [8;22H~                                                                 [9;22H~                                                                 [10;22H~                                                                 [m[11;22H[7m[No Name] [+]                                                     [m[12;1H:let g:test ="Test 7: set linebreak with visual block mode and v_b_A"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGET at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:set cpo&vim linebreak sbr=
:"
:let g:test ="Test 8: set linebreak with visual char mode and changing block"
:$put =g:test
Go1111-1111-1111-11-1111-1111-1111[34m^[[m0f-lv3lc2222[34m^[[mbgj.
:"
:let g:test ="Test 9: using redo after block visual mode"
:$put =g:test
Go
aaa
aaa
a[34m^[[m2k[34m^V[m2j~e.
:"
:let g:test ="Test 10: using normal commands after block-visual"
:$put =g:test
:set linebreak
Go
abcd{ef
ghijklm
no}pqrs[34m^[[m2k0f{[34m^V^V[mc%[34m^[[m
:"
:let g:test ="Test 11: using block replace mode after wrapping"
:$put =g:test
:set linebreak wrap
Go[34m^[[m150aa[34m^[[myypk147|[34m^V[mjr0
:"
:let g:test ="Test 12: set linebreak list listchars=space:_,tab:>-,tail:-,eol:$"
:set list listchars=space:_,trail:-,tab:>-,eol:$
:$put =g:test
:let line="a aaaaaaaaaaaaaaaaaaaaaa\ta "
:$put =line
:$
:norm! zt
:redraw!
:let line=ScreenChar(winwidth(0))
:call DoRecordScreen()
:%w! test.out
:qa!
ENDTEST
dummy text
[7mtest_listlbr.in                                                                        [1;5H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet line=ScreenChar(winwidth(0))[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l4 more lines[57;13H[K[5;1H                    
Test 1: set         
[1m[34m+[mlinebreak          
    abcdef          
+hijklmn            
+pqrstuvwxyz_1060ABC[3;22H[K[4;22HTest 1: set linebreak[4;43H[K[5;22H    abcdef          [5;42H[K[6;22H+hijklmn            [6;42H[K[7;22H+pqrstuvwxyz_1060ABC[7;42H[K[8;22H+DEFGHIJKLMNOP      [8;42H[K[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 2: set linebreak + set list"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset linebreak list listchars=[?25l[1;1H[34m^I[mabcdef hijklmn[34m^I  [m[2;2Hpqrstuvwxyz_1060ABC[3;2HDEFGHIJKLMNOP      
              
Test 1: set
[1m[34m+[mlinebreak 
    abcdef
+hijklmn  
+pqrstuvwxyz_1060ABC
+DEFGHIJKLMNOP      [1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredraw![?25l[27m[23m[m[H[2J[1;1H[34m^I[mabcdef hijklmn[34m^I  [m[7m|[m
[1m[34m+[mpqrstuvwxyz_1060ABC[7m|[m
[1m[34m+[mDEFGHIJKLMNOP      [7m|[4;21H|[m
Test 1: set[9C[7m|[m
[1m[34m+[mlinebreak[10C[7m|[m
    abcdef[10C[7m|[m
+hijklmn[12C[7m|[m
+pqrstuvwxyz_1060ABC[7m|[m
+DEFGHIJKLMNOP      [7m|[m
[1m[7m[No Name] [+]        [m[2;26Habcdef hijklmn  pqrstuvwxyz_1060ABCDEFGHIJKLMNOP[4;22HTest 1: set linebreak[5;26Habcdef[6;22H+hijklmn[7;22H+pqrstuvwxyz_1060ABC[8;22H+DEFGHIJKLMNOP[9;22H[1m[34m~                                                                 [10;22H~                                                                 [m[11;22H[7m[No Name] [+]                                                     [m[12;1H:let g:test ="Test 7: set linebreak with visual block mode and v_b_A"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGET at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:set cpo&vim linebreak sbr=
:"
:let g:test ="Test 8: set linebreak with visual char mode and changing block"
:$put =g:test
Go1111-1111-1111-11-1111-1111-1111[34m^[[m0f-lv3lc2222[34m^[[mbgj.
:"
:let g:test ="Test 9: using redo after block visual mode"
:$put =g:test
Go
aaa
aaa
a[34m^[[m2k[34m^V[m2j~e.
:"
:let g:test ="Test 10: using normal commands after block-visual"
:$put =g:test
:set linebreak
Go
abcd{ef
ghijklm
no}pqrs[34m^[[m2k0f{[34m^V^V[mc%[34m^[[m
:"
:let g:test ="Test 11: using block replace mode after wrapping"
:$put =g:test
:set linebreak wrap
Go[34m^[[m150aa[34m^[[myypk147|[34m^V[mjr0
:"
:let g:test ="Test 12: set linebreak list listchars=space:_,tab:>-,tail:-,eol:$"
:set list listchars=space:_,trail:-,tab:>-,eol:$
:$put =g:test
:let line="a aaaaaaaaaaaaaaaaaaaaaa\ta "
:$put =line
:$
:norm! zt
:redraw!
:let line=ScreenChar(winwidth(0))
:call DoRecordScreen()
:%w! test.out
:qa!
ENDTEST
dummy text
[7mtest_listlbr.in                                                                        [1;3H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet line=ScreenChar(winwidth(0))[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l4 more lines[57;13H[K[1;22H    abcdef                                                        [2;22H+hijklmn                                                          [3;22H+pqrstuvwxyz_1060ABC                                              [4;22H+DEFGHIJKLMNOP                                                    [5;22H[1m[34m~                                                                 [6;22H~                                                                 [m[7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [5;22H[K[6;22HTest 2: set linebreak + set list[6;54H[K[7;22H^Iabcdef hijklmn^I[8;22H+pqrstuvwxyz_1060ABC[9;22H+DEFGHIJKLMNOP[57;1H[K[57;1H4 more lines[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 3: set linebreak nolist"[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nolist linebreak[?25l[1;1H    abcdef          [2;2Hhijklmn            [3;2Hpqrstuvwxyz_1060ABC
[1m[34m+[mDEFGHIJKLMNOP
           
Test 1: set
[1m[34m+[mlinebreak
    abcdef
+hijklmn            
+pqrstuvwxyz_1060ABC[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredraw![?25l[27m[23m[m[H[2J[1;5Habcdef[10C[7m|[m
[1m[34m+[mhijklmn[12C[7m|[m
[1m[34m+[mpqrstuvwxyz_1060ABC[7m|[m
[1m[34m+[mDEFGHIJKLMNOP      [7m|[5;21H|[m
Test 1: set[9C[7m|[m
[1m[34m+[mlinebreak[10C[7m|[m
    abcdef[10C[7m|[m
+hijklmn[12C[7m|[m
+pqrstuvwxyz_1060ABC[7m|[m
[1m[7m[No Name] [+]        [m[1;26Habcdef[2;22H+hijklmn[3;22H+pqrstuvwxyz_1060ABC[4;22H+DEFGHIJKLMNOP[6;22HTest 2: set linebreak + set list[7;22H^Iabcdef hijklmn^I[8;22H+pqrstuvwxyz_1060ABC[9;22H+DEFGHIJKLMNOP[11;22H[7m[No Name] [+]                                                     [m[12;1H:let g:test ="Test 7: set linebreak with visual block mode and v_b_A"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGET at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:set cpo&vim linebreak sbr=
:"
:let g:test ="Test 8: set linebreak with visual char mode and changing block"
:$put =g:test
Go1111-1111-1111-11-1111-1111-1111[34m^[[m0f-lv3lc2222[34m^[[mbgj.
:"
:let g:test ="Test 9: using redo after block visual mode"
:$put =g:test
Go
aaa
aaa
a[34m^[[m2k[34m^V[m2j~e.
:"
:let g:test ="Test 10: using normal commands after block-visual"
:$put =g:test
:set linebreak
Go
abcd{ef
ghijklm
no}pqrs[34m^[[m2k0f{[34m^V^V[mc%[34m^[[m
:"
:let g:test ="Test 11: using block replace mode after wrapping"
:$put =g:test
:set linebreak wrap
Go[34m^[[m150aa[34m^[[myypk147|[34m^V[mjr0
:"
:let g:test ="Test 12: set linebreak list listchars=space:_,tab:>-,tail:-,eol:$"
:set list listchars=space:_,trail:-,tab:>-,eol:$
:$put =g:test
:let line="a aaaaaaaaaaaaaaaaaaaaaa\ta "
:$put =line
:$
:norm! zt
:redraw!
:let line=ScreenChar(winwidth(0))
:call DoRecordScreen()
:%w! test.out
:qa!
ENDTEST
dummy text
[7mtest_listlbr.in                                                                        [1;5H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet line=ScreenChar(winwidth(0))[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l4 more lines[57;13H[K[1;22H^Iabcdef hijklmn^I                                                [2;22H+pqrstuvwxyz_1060ABC                                              [3;22H+DEFGHIJKLMNOP                                                    [4;22H                                                                  [5;22H                                                                  [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [6;22HTest 3: set linebreak nolist[7;26Habcdef[8;22H+hijklmn[9;22H+pqrstuvwxyz_1060ABC[10;22H+DEFGHIJKLMNOP[57;1H[K[57;1H4 more lines[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 4: set linebreak with tab and 1 line as long as screen: should brea
[56;87Hk[57;1H!"[?25l[1;1H[L[1;5Habcdef[10C[7m|[m^Iabcdef hijklmn^I[57;1H[K[1;5H[?12l[?25h[?25l[57;1H:[?12l[?25hset nolist linebreak ts=8[?25l[1;5H    abcdef[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet line="1\t".repeat('a', winwidth(0)-2)[?25l[1;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =line[?25l[1;9H      
        
Test 3: set         [4;2Hlinebreak nolist
    abcdef
+hijklmn   
+pqrstuvwxyz_1060ABC
+DEFGHIJKLMNOP
1       
[1m[34m+[maaaaaaaaaaaaaaaaaa [9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$[?25l[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnorm! zt[?25l[1;1H1                   
[1m[34m+[maaaaaaaaaaaaaaaaaa 
                    
                    
                    
                    
                    
                    
                    
                    [3;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hredraw![?25l[27m[23m[m[H[2J[1;1H1[19C[7m|[m
[1m[34m+[maaaaaaaaaaaaaaaaaa [7m|[3;21H|[4;21H|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[10;21H|[m[3;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   [m
[1m[7m[No Name] [+]        [m[1;22H^Iabcdef hijklmn^I[2;22H+pqrstuvwxyz_1060ABC[3;22H+DEFGHIJKLMNOP[6;22HTest 3: set linebreak nolist[7;26Habcdef[8;22H+hijklmn[9;22H+pqrstuvwxyz_1060ABC[10;22H+DEFGHIJKLMNOP[11;22H[7m[No Name] [+]                                                     [m[12;1H:let g:test ="Test 7: set linebreak with visual block mode and v_b_A"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGET at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:set cpo&vim linebreak sbr=
:"
:let g:test ="Test 8: set linebreak with visual char mode and changing block"
:$put =g:test
Go1111-1111-1111-11-1111-1111-1111[34m^[[m0f-lv3lc2222[34m^[[mbgj.
:"
:let g:test ="Test 9: using redo after block visual mode"
:$put =g:test
Go
aaa
aaa
a[34m^[[m2k[34m^V[m2j~e.
:"
:let g:test ="Test 10: using normal commands after block-visual"
:$put =g:test
:set linebreak
Go
abcd{ef
ghijklm
no}pqrs[34m^[[m2k0f{[34m^V^V[mc%[34m^[[m
:"
:let g:test ="Test 11: using block replace mode after wrapping"
:$put =g:test
:set linebreak wrap
Go[34m^[[m150aa[34m^[[myypk147|[34m^V[mjr0
:"
:let g:test ="Test 12: set linebreak list listchars=space:_,tab:>-,tail:-,eol:$"
:set list listchars=space:_,trail:-,tab:>-,eol:$
:$put =g:test
:let line="a aaaaaaaaaaaaaaaaaaaaaa\ta "
:$put =line
:$
:norm! zt
:redraw!
:let line=ScreenChar(winwidth(0))
:call DoRecordScreen()
:%w! test.out
:qa!
ENDTEST
dummy text
[7mtest_listlbr.in                                                                        [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet line=ScreenChar(winwidth(0))[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l4 more lines[57;13H[K[3;1H                    
Test 4: set         
[1m[34m+[mlinebreak with tab 
[1m[34m+[mand 1 line as long 
[1m[34m+[mas screen: should  
[1m[34m+[mbreak!             
1                   
+aaaaaaaaaaaaaaaaaa [1;22H+pqrstuvwxyz_1060ABC                                              [2;22H+DEFGHIJKLMNOP                                                    [3;22H                                                                  [4;22H                                                                  [5;22H                                                                  [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [3;22H1[7Caaaaaaaaaaaaaaaaaa[5;22HTest 4: set linebreak with tab and 1 line as long as screen: shoul[6;22H[1m[34m+[md break![7;22H1[8;22H+aaaaaaaaaaaaaaaaaa[9;22H~[10;22H~[57;1H[K[57;1H4 more lines[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet line="_S_\t bla"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =line[?25l[1;1HTest 4: set         
[1m[34m+[mlinebreak with tab 
[1m[34m+[mand 1 line as long 
[1m[34m+[mas screen: should  
[1m[34m+[mbreak!             
1                   
+aaaaaaaaaaaaaaaaaa 
                    
                    
                    [8;1H~
~
_S_      bla[57;1H[K[10;1H[?12l[?25h[?25l[57;1H:[?12l[?25h$[?25l[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnorm! zt[?25l[1;1H_S_      bla        
                    
                    
                    
                    
                    
                    
                    
                    
                    [2;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 5: set linebreak with conceal and set list and tab displayed by dif
[56;87Hf[57;1Herent char (line may not be truncated)"[?25l[1;1H[L[1;1H_S_      bla[8C[7m|[m+pqrstuvwxyz_1060ABC[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset cpo&vim list linebreak conceallevel=2 concealcursor=nv listchars=tab:ab[?25l[1;4H[34mabbbb[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hsyn match ConcealVar contained /_/ conceal[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsyn match All /.*/ contains=ConcealVar[?25l[1;1HS[34mabb[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet line=ScreenChar(winwidth(0))[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l[57;1H4 more lines[57;13H[K[2;1H                    
Test 5: set         
[1m[34m+[mlinebreak with     
[1m[34m+[mconceal and set    
[1m[34m+[mlist and tab       
[1m[34m+[mdisplayed by       
[1m[34m+[mdifferent char     
[1m[34m+[m(line may not be   
[1m[34m+[mtruncated)         [1;22H~                                                                 [2;22H~                                                                 [3;22H                                                                  [4;22H                                                                  [5;22H                                                                  [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [3;22H_S_      bla[5;22HTest 5: set linebreak with conceal and set list and tab displayed[6;22H[1m[34m+[mby different char (line may not be truncated)[7;22HSabbbbbb bla[8;22H~[9;22H~[10;22H~[57;1H[K[57;1H4 more lines[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&vim linebreak[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 6: set linebreak with visual block mode"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet line="REMOVE: this not"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =g:test[?25l[1;2Habbbbbb
~
~          
~              
Test 6: set     [6;4Hnebreak with[7;2Hvisual block mode
[1m[34m~                   
~                   
~                   [5;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put =line[?25l[8;1HREMOVE: this not    [8;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet line="REMOVE: aaaaaaaaaaaaa"[?25l[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =line[?25l[9;1HREMOVE:             
[1m[34m+[maaaaaaaaaaaaa      [9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1/^REMOVE:[?25l[8;1H[?12l[?25h[8;1H[?25l[8;1H[?12l[?25h[?25l[7mR[9;1H[?12l[?25h[?25l[8;2HEMOVE: 
REMOVE:[9;8H[?12l[?25h[?25l[m[8;1Hthis not        
aaaaaaaaaaaaa
[1m[34m~                   [8;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put[?25l[1;1H~                   
~                   
~                   
Test 6: set         
[1m[34m+[mlinebreak with     
[1m[34m+[mvisual block mode  
this not            
aaaaaaaaaaaaa       
[1m[34m~                   [m
                    [9;1HREMOVE:             
REMOVE:[57;1H[K[10;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset cpo&vim linebreak[?25l[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 7: set linebreak with visual block mode and v_b_A"[?25l[10;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =g:test[?25l[1;1Hthis not            
aaaaaaaaaaaaa       
REMOVE:             
REMOVE:             
                    
                    
                    
                    
                    
                    [5;1HTest 7: set
[1m[34m+[mlinebreak with
[1m[34m+[mvisual block mode
[1m[34m+[mand vbA
[1m[34m~                   
~                   [m[57;1H[K[5;1H[?12l[?25h[5;1H[?25l[9;1Hlong line:          [9;11H[?12l[?25h[?25l foobar
[1m[34m+[mfoobar foobar      [9;1H[1m[34m@                   
@                   [m[1;1H        
             
       
       
           
               
                  
        
                    
                    [1;1H[1m[34m+[mfoobar foobar
[1m[34m+[mfoobar foobar
[1m[34m+[mfoobar foobar
[1m[34m+[mfoobar foobar
[1m[34m+[mfoobar foobar
[1m[34m+[mfoobar foobar
[1m[34m+[mfoobar foobar
[1m[34m+[mfoobar foobar
[1m[34m+[mfoobar foobar
[1m[34m+[mfoobar[10;8H[?12l[?25h[1;1H[1m[34m+[mfoobar foobar      
[1m[34m+[mfoobar foobar      
[1m[34m+[mfoobar foobar      
[1m[34m+[mfoobar foobar      
[1m[34m+[mfoobar foobar      
[1m[34m+[mfoobar foobar      
[1m[34m+[mfoobar foobar      
[1m[34m+[mfoobar foobar      
[1m[34m+[mfoobar             
                    [?25l[9;9HTARGET at
[1m[34m+[mend[10;4H[?12l[?25h[10;4H[?25l[57;1H:[?12l[?25hexe "norm! $3B\<C-v>eAx\<Esc>"[?25l[9;15Hx at[9;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cpo&vim linebreak sbr=[?25l[1;1Hfoobar foobar 
foobar foobar 
foobar foobar 
foobar foobar 
foobar foobar 
foobar foobar 
foobar foobar 
foobar foobar 
foobar TARGETx at 
end [6;22Hby different char (line may not be truncated)[6;67H[K[9;8H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[9;8H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 8: set linebreak with visual char mode and changing block"[?25l[9;8H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =g:test[?25l[1;1HTest 8: set  
linebreak with
visual char mode
and changing block
[1m[34m~                   
~                   
~                   
~                   
~                   
~                   [1;1H[?12l[?25h[1;1H[?25l[m[5;1H1111-1111-1111-11-  
1111-1111-1111      [6;14H[?12l[?25h[5;1H[5;5H[5;6H[?25l[5;6H[?12l[?25h[?25l[7m111[5;9H[?12l[?25h[?25l[m2222[5;9H[?12l[?25h[5;6H[6;6H[?25l2222[6;9H[?12l[?25h[6;9H[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[6;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 9: using redo after block visual mode"[?25l[6;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =g:test[?25l[7;1HTest 9: using redo  
after block visual  
mode                [7;1H[?12l[?25h[7;1H[?25l[1;1H1111-2222-1111-11-  
1111-2222-1111      
Test 9: using redo  
after block visual  
mode                
[1m[34m~                   [m
                    
                    
                    
                    [6;1H                    
aaa
aaa
a
[1m[34m~                   [m[57;1H[K[9;1H[?12l[?25h[7;1H[?25l[7;1H[?12l[?25h[?25l[7ma
a[9;1H[?12l[?25h[?25l[m[57;1H3 lines changed[7;1HA
A
A[7;1H[?12l[?25h[7;3H[?25lA
AaA[7;3H[?12l[?25h[8;3H[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[8;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 10: using normal commands after block-visual"[?25l[8;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =g:test[?25l[1;1HTest 9: using redo  
after block visual  
mode                
                    
AaA                 
AaA                 
A                   
[1m[34m~                   [m
                    
                    [8;1HTest 10: using      
normal commands
after block-visual[57;1H[K[8;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset linebreak[?25l[8;1H[?12l[?25h[8;1H[?25l[1;1HAaA                 
AaA                 
A                   
Test 10: using      
normal commands     
after block-visual  
                    
                    
                    
                    [8;1Habcd{ef
ghijklm
no}pqrs[57;1H[K[10;7H[?12l[?25h[8;7H[8;1H[8;5H[?25l[8;5H[?12l[?25h[?25l[8;5H[?12l[?25h[8;5H[?25lpqrs
[1m[34m~                   
~                   [8;4H[?12l[?25h[8;4H[?25l[57;1H[m:[?12l[?25h"[?25l[8;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 11: using block replace mode after wrapping"[?25l[8;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =g:test[?25l[1;1HAaA                 
A                   
Test 10: using      
normal commands     
after block-visual  
                    
abcdpqrs            
[1m[34m~                   
~                   [m
                    [8;1HTest 11: using      
block replace mode  
after wrapping[57;1H[K[8;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset linebreak wrap[?25l[8;1H[?12l[?25h[8;1H[?25l[1;1HA                   
Test 10: using      
normal commands     
after block-visual  
                    
abcdpqrs            
Test 11: using      
block replace mode  
after wrapping      
                    [57;1H[K[10;1H[?12l[?25h[?25l[1;1Haaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaa        
[1m[34m~                   
~                   [8;10H[?12l[?25h[8;10H[8;10H[?25l[1;1H[?12l[?25h[?25l[m[9;1Haaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa[9;1H[1m[34m@                   
@                   [1;1H[?12l[?25h[8;7H[?25l[8;7H[?12l[?25h[?25l[m[1;1H[1m[34m@                   
@                   [m
                    
                    
                    
                    
                    
                    
                    
                    [1;1Haaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaa
[1m[34m~                   
~                   [8;7H[?12l[?25h[?25l[m0
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa[9;1H[1m[34m@                   
@                   [8;7H[?12l[?25h[?25l[m[1;1H[1m[34m@                   
@                   [m
                    
                    
                    
                    
                    
                    
                    
                    [1;1Haaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaa
aaaaaa0aaa
[1m[34m~                   
~                   [8;7H[?12l[?25h[?25l[57;1H[m:[?12l[?25h"[?25l[8;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 12: set linebreak list listchars=space:_,tab:>-,tail:-,eol:$"[?25l[8;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset list listchars=space:_,trail:-,tab:>-,eol:$[?25l[8;11H[1m[34m$[8;7H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put =g:test[?25l[1;1HTest[34m_[m12:[34m_[mset[34m_[m       
linebreak[34m_[mlist[34m_[m     
listchars=space:,   
tab:>-,tail:-,eol:$[1m[34m$
~                   
~                   
~                   
~                   [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet line="a aaaaaaaaaaaaaaaaaaaaaa\ta "[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =line[?25l[5;1Ha[34m_[m                  
aaaaaaaaaaaaaaaaaaaa
aa[34m>-----[ma[34m-[m[1m[34m$[m         [5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnorm! zt[?25l[1;1Ha[34m_[m                  
aaaaaaaaaaaaaaaaaaaa
aa[34m>-----[ma[34m-[m[1m[34m$[m         
[1m[34m~                   
~                   
~                   [m
                    
                    
                    
                    [7;1H[1m[34m~                   
~                   
~                   
~                   [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hredraw![?25l[27m[23m[m[H[2J[1;1Ha[34m_[m[18C[7m|[m
aaaaaaaaaaaaaaaaaaaa[7m|[m
aa[34m>-----[ma[34m-[m[1m[34m$[m[9C[7m|[4;21H|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[10;21H|[m[4;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   
~                   [m
[1m[7m[No Name] [+]        [m[1;22H~[2;22H~[3;22H_S_      bla[5;22HTest 5: set linebreak with conceal and set list and tab displayed[6;22Hby different char (line may not be truncated)[7;22HSabbbbbb bla[8;22H~[9;22H~[10;22H~[11;22H[7m[No Name] [+]                                                     [m[12;1H:let g:test ="Test 7: set linebreak with visual block mode and v_b_A"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGET at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:set cpo&vim linebreak sbr=
:"
:let g:test ="Test 8: set linebreak with visual char mode and changing block"
:$put =g:test
Go1111-1111-1111-11-1111-1111-1111[34m^[[m0f-lv3lc2222[34m^[[mbgj.
:"
:let g:test ="Test 9: using redo after block visual mode"
:$put =g:test
Go
aaa
aaa
a[34m^[[m2k[34m^V[m2j~e.
:"
:let g:test ="Test 10: using normal commands after block-visual"
:$put =g:test
:set linebreak
Go
abcd{ef
ghijklm
no}pqrs[34m^[[m2k0f{[34m^V^V[mc%[34m^[[m
:"
:let g:test ="Test 11: using block replace mode after wrapping"
:$put =g:test
:set linebreak wrap
Go[34m^[[m150aa[34m^[[myypk147|[34m^V[mjr0
:"
:let g:test ="Test 12: set linebreak list listchars=space:_,tab:>-,tail:-,eol:$"
:set list listchars=space:_,trail:-,tab:>-,eol:$
:$put =g:test
:let line="a aaaaaaaaaaaaaaaaaaaaaa\ta "
:$put =line
:$
:norm! zt
:redraw!
:let line=ScreenChar(winwidth(0))
:call DoRecordScreen()
:%w! test.out
:qa!
ENDTEST
dummy text
[7mtest_listlbr.in                                                                        [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet line=ScreenChar(winwidth(0))[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l[57;1H4 more lines[57;13H[K[4;1H[1m[34m$[m                   
Test[34m_[m12:[34m_[mset[34m_[m       
linebreak[34m_[mlist[34m_[m     
listchars=space:,   
tab:>-,tail:-,eol:$[1m[34m$[m
a[34m------------------[m 
[1m[34m$[m                   [1;22HTest 12: set linebreak list listchars=space:_,tab:>-,tail:-,eol:$[2;22Ha aaaaaaaaaaaaaaaaaaaaaa[8Ca[3;22H[K[4;22HTest 12: set linebreak list listchars=space:_,tab:>-,tail:-,eol:$[5;22Ha_                  [5;42H[K[6;22Haaaaaaaaaaaaaaaaaaaa[6;42H[K[7;22Haa>-----a-$ [9;22H[1m[34m~                                                                 [10;22H~                                                                 [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h%w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 62 lines, 2030 characters written[11;1H[1m[7mtest.out]      [m[7C[7mtest.out     [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_listlbr = test61; then \
#	  if diff test.out test_listlbr.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_listlbr.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_listlbr.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_search_mbyte.failed test.ok test.out X* viminfo
cp test_search_mbyte.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_search_mbyte.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_search_mbyte.in" 15 lines, 226 characters[1;1HTest for search('multi-byte char', 'bce')

STARTTEST
:source small.vim
:source mbyte.vim
:set encoding=utf-8
:/^Test bce:/+1
:$put =search('Ａ', 'bce', line('.'))
:1;/^Results:/,$wq! test.out
ENDTEST

Results:

Test bce:
Ａ
[1m[34m~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for search('multi-byte char', 'bce')[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 6 lines, 140 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[10;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[11;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsource small.vim[?25l[11;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsource mbyte.vim[?25l[11;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset encoding=utf-8[?25l[27m[23m[m[H[2J[1;1HTest for search('multi-byte char', 'bce')

STARTTEST
:source small.vim
:source mbyte.vim
:set encoding=utf-8
:/^Test bce:/+1
:$put =search('Ａ', 'bce', line('.'))
:1;/^Results:/,$wq! test.out
ENDTEST

Results:

Test bce:
Ａ
[1m[34m~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [11;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h/^Test bce:/+1[?25l[15;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =search('Ａ', 'bce', line('.'))[?25l[16;1H15[16;3H[K[16;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h1;/^Results:/,$wq! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 5 lines, 27 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_search_mbyte = test61; then \
#	  if diff test.out test_search_mbyte.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_search_mbyte.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_search_mbyte.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_utf8.failed test.ok test.out X* viminfo
cp test_utf8.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_utf8.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_utf8.in" 46 lines, 1245 characters[1;1HTests for Unicode manipulations[16Cvim: set ft=vim :

STARTTEST
:so small.vim
:set encoding=utf-8
:"
:" Visual block Insert adjusts for multi-byte char
:new
:call setline(1, ["aaa", "[34m~A~B[m[34m~A~B[m[34m~A~B[m", "bbb"])
:exe ":norm! gg0l\<C-V>jjIx\<Esc>"
:let r = getline(1, '$')
:"
:bwipeout!
:$put=r
:"
:" Test for built-in function strchars()
:for str in ["a", "[34m~A~B[m[34m~A~D[ma", "A\u20dd", "A\u20dd\u20dd", "\u20dd"]
:[7C$put=strchars(str)
:[7C$put=strchars(str, 0)
:[7C$put=strchars(str, 1)
:endfor
:"
:" Test for customlist completion
:function! CustomComplete1(lead, line, pos)
:[7Creturn ['[34m~A~B[m', '[34m~A~D[m']
:endfunction
:command -nargs=1 -complete=customlist,CustomComplete1 Test1 echo
:call feedkeys(":Test1 \<C-L>'\<C-B>$put='\<CR>", 'it')
:"
:function! CustomComplete2(lead, line, pos)
:[7Creturn ['[34m~A~B[m[34m~A~_[m[34m~A~W[m', '[34m~A~B[m[34m~A~_[m[34m~A[m', '[34m~A~B[m[34m~A~_[m[34m~B~J[m[34m~B~A[m']
:endfunction
:command -nargs=1 -complete=customlist,CustomComplete2 Test2 echo
:call feedkeys(":Test2 \<C-L>'\<C-B>$put='\<CR>", 'it')
:"
:function! CustomComplete3(lead, line, pos)
:[7Creturn ['N[34m~A~S[m', 'N[34m~B~S[m', 'N[34m~A[m']
:endfunction
:command -nargs=1 -complete=customlist,CustomComplete3 Test3 echo
:call feedkeys(":Test3 \<C-L>'\<C-B>$put='\<CR>", 'it')
:"
:call garbagecollect(1)
:/^start:/,$wq! test.out
ENDTEST

start:
[1m[34m~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for Unicode manipulations[16Cvim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 40 lines, 1151 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[44;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[45;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[45;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset encoding=utf-8[?25l[27m[23m[m[H[2J[1;1HTests for Unicode manipulations[16Cvim: set ft=vim :

STARTTEST
:so small.vim
:set encoding=utf-8
:"
:" Visual block Insert adjusts for multi-byte char
:new
:call setline(1, ["aaa", "あああ", "bbb"])
:exe ":norm! gg0l\<C-V>jjIx\<Esc>"
:let r = getline(1, '$')
:"
:bwipeout!
:$put=r
:"
:" Test for built-in function strchars()
:for str in ["a", "あいa", "A\u20dd", "A\u20dd\u20dd", "\u20dd"]
:[7C$put=strchars(str)
:[7C$put=strchars(str, 0)
:[7C$put=strchars(str, 1)
:endfor
:"
:" Test for customlist completion
:function! CustomComplete1(lead, line, pos)
:[7Creturn ['あ', 'い']
:endfunction
:command -nargs=1 -complete=customlist,CustomComplete1 Test1 echo
:call feedkeys(":Test1 \<C-L>'\<C-B>$put='\<CR>", 'it')
:"
:function! CustomComplete2(lead, line, pos)
:[7Creturn ['あたし', 'あたま', 'あたりめ']
:endfunction
:command -nargs=1 -complete=customlist,CustomComplete2 Test2 echo
:call feedkeys(":Test2 \<C-L>'\<C-B>$put='\<CR>", 'it')
:"
:function! CustomComplete3(lead, line, pos)
:[7Creturn ['Nこ', 'Nん', 'Nぶ']
:endfunction
:command -nargs=1 -complete=customlist,CustomComplete3 Test3 echo
:call feedkeys(":Test3 \<C-L>'\<C-B>$put='\<CR>", 'it')
:"
:call garbagecollect(1)
:/^start:/,$wq! test.out
ENDTEST

start:
[1m[34m~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [45;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h"[?25l[45;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Visual block Insert adjusts for multi-byte char[?25l[45;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;2Hfunction! CustomComplete1(lead, line, pos)
:       return ['あ', 'い'][30;28H[K[31;2Hendfunction[31;13H[K[32;2Hcommand -nargs=1 -complete=customlist,CustomComplete1 Test1 echo
:call feedkeys(":Test1 \<C-L>'\<C-B>$put='\<CR>", 'it')[33;56H[K[34;2H"[34;3H[K[35;2Hfunction! CustomComplete2(lead, line, pos)
:       return ['あたし', 'あたま', 'あたりめ']
:endfunction[37;13H[K[38;2Hcommand -nargs=1 -complete=customlist,CustomComplete2 Test2 echo
:call feedkeys(":Test2 \<C-L>'\<C-B>$put='\<CR>", 'it')[39;56H[K[40;2H"[40;3H[K[41;2Hfunction! CustomComplete3(lead, line, pos)
:       return ['Nこ', 'Nん', 'Nぶ']
:endfunction[43;13H[K[44;1H:command -nargs=1 -complete=customlist,CustomComplete3 Test3 echo
:call feedkeys(":Test3 \<C-L>'\<C-B>$put='\<CR>", 'it')
:"[46;3H[K[47;1H:call garbagecollect(1)[47;24H[K[48;1H:/^start:/,$wq! test.out[48;25H[K[49;1HENDTEST[49;8H[K[50;1H [50;2H[K[51;1Hstart:[51;7H[K[56;1H[7mtest_utf8.in                                                                           [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall setline(1, ["aaa", "あああ", "bbb"])[?25l[1;1Haaa
あああ[2;7H[K[3;1Hbbb[3;4H[K[28;11H[1m[7m[+][1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hexe ":norm! gg0l\<C-V>jjIx\<Esc>"[?25l[1;2Hxaa
xあああ
bxbb[1;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet r = getline(1, '$')[?25l[1;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipeout![?25l[1;1HTests for Unicode manipulations[16Cvim: set ft=vim :
 [2;2H[K[3;1HSTARTTEST
:so small.vim[4;14H[K[5;1H:set encoding=utf-8[5;20H[K[6;1H:"[6;3H[K[7;1H:" Visual block Insert adjusts for multi-byte char[7;51H[K[8;1H:new[8;5H[K[9;1H:call setline(1, ["aaa", "あああ", "bbb"])[9;43H[K[10;1H:exe ":norm! gg0l\<C-V>jjIx\<Esc>"[10;35H[K[11;1H:let r = getline(1, '$')[11;25H[K[12;1H:"[12;3H[K[13;1H:bwipeout![13;11H[K[14;1H:$put=r[14;8H[K[15;1H:"[15;3H[K[16;1H:" Test for built-in function strchars()[16;41H[K[17;1H:for str in ["a", "あいa", "A\u20dd", "A\u20dd\u20dd", "\u20dd"][17;65H[K[18;1H:       $put=strchars(str)[18;27H[K[19;1H:       $put=strchars(str, 0)[19;30H[K[20;1H:       $put=strchars(str, 1)[20;30H[K[21;1H:endfor[21;8H[K[22;1H:"[22;3H[K[23;1H:" Test for customlist completion[23;34H[K[24;1H:function! CustomComplete1(lead, line, pos)[24;44H[K[25;1H:       return ['あ', 'い'][25;28H[K[26;1H:endfunction[26;13H[K[27;1H:command -nargs=1 -complete=customlist,CustomComplete1 Test1 echo[27;66H[K[28;1H:call feedkeys(":Test1 \<C-L>'\<C-B>$put='\<CR>", 'it')[28;56H[K[29;2H"[29;3H[K[30;2Hfunction! CustomComplete2(lead, line, pos)
:       return ['あたし', 'あたま', 'あたりめ']
:endfunction[32;13H[K[33;3Hommand -nargs=1 -complete=customlist,CustomComplete2 Test2 echo
:call feedkeys(":Test2 \<C-L>'\<C-B>$put='\<CR>", 'it')
:"[35;3H[K[36;2Hfunction! CustomComplete3(lead, line, pos)[36;44H[K[37;2H       return ['Nこ', 'Nん', 'Nぶ']
:endfunction[38;13H[K[39;3Hommand -nargs=1 -complete=customlist,CustomComplete3 Test3 echo
:call feedkeys(":Test3 \<C-L>'\<C-B>$put='\<CR>", 'it')
:"[41;3H[K[42;2Hcall garbagecollect(1)[42;24H[K[43;2H/^start:/,$wq! test.out
ENDTEST[44;8H[K[45;1H [45;2H[K[46;1Hstart:
[1m[34m~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [56;1H~                                                                                      [45;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put=r[?25l3 more lines[47;1Haxaa[47;5H[K[48;1Hxあああ[48;8H[K[49;1Hbxbb[49;5H[K[49;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[49;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test for built-in function strchars()[?25l[49;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor str in ["a", "あいa", "A\u20dd", "A\u20dd\u20dd", "\u20dd"][?25l
:  [?12l[?25h:[34m^I[m$put=strchars(str)
[?25l:  [?12l[?25h:[34m^I[m$put=strchars(str, 0)
[?25l:  [?12l[?25h:[34m^I[m$put=strchars(str, 1)
[?25l:  [?12l[?25h:endfor[1;1H[4L[?25l[1;1H:call setline(1, ["aaa", "あああ", "bbb"])
:exe ":norm! gg0l\<C-V>jjIx\<Esc>"
:let r = getline(1, '$')
:"
:bwipeout![5;11H[K[6;2H$put=r[7;4H[K[8;2H" Test for built-in function strchars()
:for str in ["a", "あいa", "A\u20dd", "A\u20dd\u20dd", "\u20dd"]
:       $put=strchars(str)[10;27H[K[11;2H       $put=strchars(str, 0)
:       $put=strchars(str, 1)
:endfor[13;8H[K[14;2H"[14;3H[K[15;4HTest for customlist completion
:function! CustomComplete1(lead, line, pos)
:       return ['あ', 'い'][17;28H[K[18;2Hendfunction[18;13H[K[19;2Hcommand -nargs=1 -complete=customlist,CustomComplete1 Test1 echo
:call feedkeys(":Test1 \<C-L>'\<C-B>$put='\<CR>", 'it')
:"[21;3H[K[22;2Hfunction! CustomComplete2(lead, line, pos)
:       return ['あたし', 'あたま', 'あたりめ']
:endfunction[24;13H[K[25;2Hcommand -nargs=1 -complete=customlist,CustomComplete2 Test2 echo
:call feedkeys(":Test2 \<C-L>'\<C-B>$put='\<CR>", 'it')
:"[27;3H[K[28;2Hfunction! CustomComplete3(lead, line, pos)[28;44H[K[29;2H       return ['Nこ', 'Nん', 'Nぶ']
:endfunction[30;13H[K[31;2Hcommand -nargs=1 -complete=customlist,CustomComplete3 Test3 echo
:call feedkeys(":Test3 \<C-L>'\<C-B>$put='\<CR>", 'it')
:"[33;3H[K[34;7Hgarbagecollect(1)[34;24H[K[35;2H/^start:/,$wq! test.out
ENDTEST[36;8H[K[37;1H [37;9H[K[38;1Hstart:[38;7H[K[39;1Haxaa[39;5H[K[40;1Hxあああ[40;8H[K[41;1Hbxbb
1[42;2H[K[43;1H1[43;2H[K[44;1H1[44;2H[K[45;1H3
3[46;2H[K[47;1H3[47;2H[K[48;1H2[48;2H[K[49;1H2[49;2H[K[50;1H1[50;2H[K[51;1H3[51;2H[K[52;1H3[52;2H[K[53;1H1[53;2H[K[54;1H1[54;2H[K[55;1H1[55;2H[K[56;1H1[56;2H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test for customlist completion[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! CustomComplete1(lead, line, pos)[?25l
:  [?12l[?25h:[34m^I[mreturn ['あ', 'い']
[?25l:  [?12l[?25h:endfunction[1;1H[2L[?25l[1;1H:call setline(1, ["aaa", "あああ", "bbb"])
:exe ":norm! gg0l\<C-V>jjIx\<Esc>"[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hcommand -nargs=1 -complete=customlist,CustomComplete1 Test1 echo[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall feedkeys(":Test1 \<C-L>'\<C-B>$put='\<CR>", 'it')[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:Test1 ...[57;8H[K[57;8H':$Test1 ':$pTest1 ':$puTest1 ':$putTest1 ':$put=Test1 '[57;7H'Test1 '[57;8H[1;56r[56;1H
[1;57r[56;1HTest1[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! CustomComplete2(lead, line, pos)[?25l
:  [?12l[?25h:[34m^I[mreturn ['あたし', 'あたま', 'あたりめ']
[?25l:  [?12l[?25h:endfunction[1;1H[2L[?25l[1;1H:exe ":norm! gg0l\<C-V>jjIx\<Esc>"
:let r = getline(1, '$')[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hcommand -nargs=1 -complete=customlist,CustomComplete2 Test2 echo[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall feedkeys(":Test2 \<C-L>'\<C-B>$put='\<CR>", 'it')[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:Test2 ...あた':$Test2 あた':$pTest2 あた':$puTest2 あた':$putTest2 あた':$put=Test2 あた'[57;7H'Test2 あた'[57;8H[1;56r[56;1H
[1;57r[56;1HTest2 あた[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunction! CustomComplete3(lead, line, pos)[?25l
:  [?12l[?25h:[34m^I[mreturn ['Nこ', 'Nん', 'Nぶ']
[?25l:  [?12l[?25h:endfunction[1;1H[2L[?25l[1;1H:let r = getline(1, '$')
:"[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hcommand -nargs=1 -complete=customlist,CustomComplete3 Test3 echo[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall feedkeys(":Test3 \<C-L>'\<C-B>$put='\<CR>", 'it')[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:Test3 ...N[57;9H[K[57;9H':$Test3 N':$pTest3 N':$puTest3 N':$putTest3 N':$put=Test3 N'[57;7H'Test3 N'[57;8H[1;56r[56;1H
[1;57r[56;1HTest3 N[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall garbagecollect(1)[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^start:/,$wq! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 22 lines, 86 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_utf8 = test61; then \
#	  if diff test.out test_utf8.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_utf8.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_utf8.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_wordcount.failed test.ok test.out X* viminfo
cp test_wordcount.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_wordcount.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_wordcount.in" 126 lines, 2815 characters[1;1HTest for wordcount() function

STARTTEST
:so small.vim
:so mbyte.vim
:set enc=utf8
:set selection=inclusive fileformat=unix fileformats=unix
:new
:fu DoRecordWin(...)
:[7Cwincmd k
:[7Cif exists("a:1")
:[11Ccall cursor(a:1)
:[7Cendif
:[7Clet result=[]
:[7Ccall add(result, g:test)
:[7Ccall add(result, getline(1, '$'))
:[7Ccall add(result, wordcount())
:[7Cwincmd j
:[7Creturn result
:endfu
:fu PutInWindow(args)
:[7Cwincmd k
:[7C%d _
:[7Ccall append(1, a:args)
:[7Cwincmd j
:endfu
:fu Log()
:   $put ='----'
:   $put =remove(g:log,0)
:   $put =string(g:log)
:endfu
:fu! STL()
:    if mode() =~? 'V'
:[7Clet g:visual_stat=wordcount()
:    endif
:    return string(wordcount())
:endfu
:let g:test="Test 1: empty window"
:let log=DoRecordWin()
:call Log()
:"
:let g:test="Test 2: some words, cursor at start"
:call PutInWindow('one two three')
:let log=DoRecordWin([1,1,0])
:call Log()
:"
:let g:test="Test 3: some words, cursor at end"
:call PutInWindow('one two three')
:let log=DoRecordWin([2,99,0])
:call Log()
:"
:let g:test="Test 4: some words, cursor at end, ve=all"
:set ve=all
:call PutInWindow('one two three')
:let log=DoRecordWin([2,99,0])
:call Log()[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for wordcount() function[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 121 lines, 2753 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:call Log()
:wincmd k
:set nobomb
:w!
:wincmd j
:"
:let g:test="Test 7: one line with multibyte words"
:call PutInWindow(['[34m~D[mne M¤ne Müh'])
:let log=DoRecordWin([2,99,0])
:call Log()
:"
:let g:test="Test 8: several lines with multibyte words"
:call PutInWindow(['[34m~D[mne M¤ne Müh', 'und raus bist dü!'])
:let log=DoRecordWin([3,99,0])
:call Log()
:"
:let g:test="Test 9: visual mode, complete buffer"
:call PutInWindow(['[34m~D[mne M¤ne Müh', 'und raus bist dü!'])
:wincmd k
:set ls=2 stl=%{STL()}
:" start visual mode quickly and select complete buffer
:0
V2jy
:set stl= ls=1
:let log=DoRecordWin([3,99,0])
:let log[2]=g:visual_stat
:call Log()
:"
:let g:test="Test 10: visual mode (empty)"
:call PutInWindow(['[34m~D[mne M¤ne Müh', 'und raus bist dü!'])
:wincmd k
:set ls=2 stl=%{STL()}
:" start visual mode quickly and select complete buffer
:0
v$y
:set stl= ls=1
:let log=DoRecordWin([3,99,0])
:let log[2]=g:visual_stat
:call Log()
:"
:let g:test="Test 11: visual mode, single line"
:call PutInWindow(['[34m~D[mne M¤ne Müh', 'und raus bist dü!'])
:wincmd k
:set ls=2 stl=%{STL()}
:" start visual mode quickly and select complete buffer
:2
0v$y
:set stl= ls=1
:let log=DoRecordWin([3,99,0])
:let log[2]=g:visual_stat
:call Log()
:"
:/^RESULT test/,$w! test.out
:qa!
ENDTEST
RESULT test:[55;1H[?12l[?25h
[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset enc=utf8[?25l[27m[23m[m[H[2J[1;1H:call Log()
:wincmd k
:set nobomb
:w!
:wincmd j
:"
:let g:test="Test 7: one line with multibyte words"
:call PutInWindow(['Äne M¤[8;27Hne Mü[8;32Hh'])
:let log=DoRecordWin([2,99,0])
:call Log()
:"
:let g:test="Test 8: several lines with multibyte words"
:call PutInWindow(['Äne M¤[13;27Hne Mü[13;32Hh', 'und raus bist dü[13;53H!'])
:let log=DoRecordWin([3,99,0])
:call Log()
:"
:let g:test="Test 9: visual mode, complete buffer"
:call PutInWindow(['Äne M¤[18;27Hne Mü[18;32Hh', 'und raus bist dü[18;53H!'])
:wincmd k
:set ls=2 stl=%{STL()}
:" start visual mode quickly and select complete buffer
:0
V2jy
:set stl= ls=1
:let log=DoRecordWin([3,99,0])
:let log[2]=g:visual_stat
:call Log()
:"
:let g:test="Test 10: visual mode (empty)"
:call PutInWindow(['Äne M¤[30;27Hne Mü[30;32Hh', 'und raus bist dü[30;53H!'])
:wincmd k
:set ls=2 stl=%{STL()}
:" start visual mode quickly and select complete buffer
:0
v$y
:set stl= ls=1
:let log=DoRecordWin([3,99,0])
:let log[2]=g:visual_stat
:call Log()
:"
:let g:test="Test 11: visual mode, single line"
:call PutInWindow(['Äne M¤[42;27Hne Mü[42;32Hh', 'und raus bist dü[42;53H!'])
:wincmd k
:set ls=2 stl=%{STL()}
:" start visual mode quickly and select complete buffer
:2
0v$y
:set stl= ls=1
:let log=DoRecordWin([3,99,0])
:let log[2]=g:visual_stat
:call Log()
:"
:/^RESULT test/,$w! test.out
:qa!
ENDTEST
RESULT test:[?12l[?25h[?25l
:[?12l[?25hset selection=inclusive fileformat=unix fileformats=unix[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;2Hcall PutInWindow(['Äne M¤[29;27Hne Mü[29;32Hh', 'und raus bist dü[29;53H!'])
:wincmd k[30;10H[K[31;2Hset ls=2 stl=%{STL()}
:" start visual mode quickly and select complete buffer
:0[33;4H[K[34;1Hv$y
:set stl= ls=1
:let log=DoRecordWin([3,99,0])[37;9H[2]=g:visual_stat[37;26H[K[38;2Hcall Log()[38;12H[K[39;2H"[39;3H[K[40;2Hlet g:test="Test 11: visual mode, single line"
:call PutInWindow(['Äne M¤[41;27Hne Mü[41;32Hh', 'und raus bist dü[41;53H!'])
:wincmd k[42;10H[K[43;2Hset ls=2 stl=%{STL()}
:" start visual mode quickly and select complete buffer
:2[45;4H[K[46;1H0v$y
:set stl= ls=1
:let log=DoRecordWin([3,99,0])[49;9H[2]=g:visual_stat[49;26H[K[50;2Hcall Log()[50;12H[K[51;2H"[51;3H[K[52;2H/^RESULT test/,$w! test.out
:qa![53;5H[K[54;1HENDTEST
RESULT test:
[7mtest_wordcount.in                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hfu DoRecordWin(...)[?25l
:  [?12l[?25h:[34m^I[mwincmd k
[?25l:  [?12l[?25h:       if exists("a:1")
[?25l:    [?12l[?25h:           call cursor(a:1)
[?25l:    [?12l[?25h:       endif
[?25l:  [?12l[?25h:       let result=[]
[?25l:  [?12l[?25h:       call add(result, g:test)
[?25l:  [?12l[?25h:       call add(result, getline(1, '$'))
[?25l:  [?12l[?25h:       call add(result, wordcount())
[?25l:  [?12l[?25h:[34m^I[mwincmd j
[?25l:  [?12l[?25h:       return result
[?25l:  [?12l[?25h:endfu[1;1H[11L[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hfu PutInWindow(args)[?25l
:  [?12l[?25h:       wincmd k
[?25l:  [?12l[?25h:       %d _
[?25l:  [?12l[?25h:       call append(1, a:args)
[?25l:  [?12l[?25h:[34m^I[mwincmd j
[?25l:  [?12l[?25h:endfu[1;1H[5L[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hfu Log()[?25l
:  [?12l[?25h:   $put ='----'
[?25l:  [?12l[?25h:   $put =remove(g:log,0)
[?25l:  [?12l[?25h:   $put =string(g:log)
[?25l:  [?12l[?25h:endfu[1;1H[4L[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hfu! STL()[?25l
:  [?12l[?25h:    if mode() =~? 'V'
[?25l:    [?12l[?25h:       let g:visual_stat=wordcount()
[?25l:    [?12l[?25h:    endif
[?25l:  [?12l[?25h:    return string(wordcount())
[?25l:  [?12l[?25h:endfu[1;1H[5L[?25l[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hlet g:test="Test 1: empty window"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet log=DoRecordWin()[?25l[28;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7mtest_wordcount.in                                                                      [55;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall Log()[?25l[29;55r[29;1H[4M[1;57r[52;1H----
Test 1: empty window
[[''], {'chars': 0, 'cursor_chars': 0, 'words': 0, 'cursor_words': 0, 'bytes': 0, 'curss[55;1Hor_bytes': 0}][56;19H[1m[7m[+][m[57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 2: some words, cursor at start"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall PutInWindow('one two three')[?25l[2;1Hone two three[2;14H[K[28;11H[7m[+][54;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet log=DoRecordWin([1,1,0])[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Log()[?25l[29;55r[29;1H[4M[1;57r[52;1H----
Test 2: some words, cursor at start
[['', 'one two three'], {'chars': 15, 'cursor_chars': 1, 'words': 3, 'cursor_words': 0,,[55;1H 'bytes': 15, 'cursor_bytes': 1}][57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 3: some words, cursor at end"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall PutInWindow('one two three')[?25l--No lines in buffer--[57;24H[K[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet log=DoRecordWin([2,99,0])[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Log()[?25l[29;55r[29;1H[4M[1;57r[52;1H----
Test 3: some words, cursor at end
[['', 'one two three'], {'chars': 15, 'cursor_chars': 14, 'words': 3, 'cursor_words': 33[55;1H, 'bytes': 15, 'cursor_bytes': 14}][57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 4: some words, cursor at end, ve=all"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ve=all[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall PutInWindow('one two three')[?25l--No lines in buffer--[57;24H[K[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet log=DoRecordWin([2,99,0])[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Log()[?25l[29;55r[29;1H[4M[1;57r[52;1H----
Test 4: some words, cursor at end, ve=all
[['', 'one two three'], {'chars': 15, 'cursor_chars': 15, 'words': 3, 'cursor_words': 33[55;1H, 'bytes': 15, 'cursor_bytes': 15}][57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25hset ve=[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 5: several lines with words"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall PutInWindow(['one two three', 'one two three', 'one two three'])[?25l[3;1Hone two three[3;14H[K[4;1Hone two three[4;14H[K[57;1H--No lines in buffer--[57;23H[K[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet log=DoRecordWin([4,99,0])[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Log()[?25l[29;55r[29;1H[4M[1;57r[52;1H----
Test 5: several lines with words
[['', 'one two three', 'one two three', 'one two three'], {'chars': 43, 'cursor_chars'::[55;1H 42, 'words': 9, 'cursor_words': 9, 'bytes': 43, 'cursor_bytes': 42}][57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 6: one line with BOM set"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall PutInWindow('one two three')[?25l[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [m[57;1H--No lines in buffer--[57;24H[K[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd k[?25l[28;1H[1m[7m[No Name] [+]                                                                          [m[56;1H[7mtest_wordcount.in [+][m[1m[7m [m[7m                                                                  [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset bomb[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! Xtest[?25l"Xtest" [57;9H[K[57;9H[New File] 2 lines, 18 characters written[28;1H[1m[7mXtesta         [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hwincmd j[?25l[28;1H[7mXtest[m[1m[7m [m[7m                                                                                  [m[56;1H[1m[7mtest_wordcount.in [+]                                                                  [54;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet log=DoRecordWin([2,99,0])[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Log()[?25l[29;55r[29;1H[4M[1;57r[52;1H----
Test 6: one line with BOM set
[['', 'one two three'], {'chars': 15, 'cursor_chars': 14, 'words': 3, 'cursor_words': 33[55;1H, 'bytes': 18, 'cursor_bytes': 14}][57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25hwincmd k[?25l[28;1H[1m[7mXtest                                                                                  [m[56;1H[7mtest_wordcount.in [+][m[1m[7m [m[7m                                                                  [2;13H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset nobomb[?25l[28;7H[1m[7m[+][2;13H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw![?25l"Xtest" 2 lines, 15 characters written[28;7H[1m[7m    [2;13H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hwincmd j[?25l[28;1H[7mXtest[m[1m[7m [m[7m                                                                                  [m[56;1H[1m[7mtest_wordcount.in [+]                                                                  [54;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 7: one line with multibyte words"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall PutInWindow(['Äne M¤[57;27Hne Mü[57;32Hh'])[?25l[2;1HÄne M¤[2;7Hne Mü[2;12Hh[2;13H[K[28;7H[7m[+][m[57;1H--No lines in buffer--[57;23H[K[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet log=DoRecordWin([2,99,0])[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Log()[?25l[29;55r[29;1H[4M[1;57r[52;1H----
Test 7: one line with multibyte words
[['', 'Äne M¤[54;14Hne Mü[54;19Hh'], {'chars': 14, 'cursor_chars': 13, 'words': 3, 'cursor_words': 3,,[55;1H 'bytes': 17, 'cursor_bytes': 16}][57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 8: several lines with multibyte words"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall PutInWindow(['Äne M¤[57;27Hne Mü[57;32Hh', 'und raus bist dü[57;53H!'])[?25l[3;1Hund raus bist dü[3;17H![3;18H[K[57;1H--No lines in buffer--[57;23H[K[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet log=DoRecordWin([3,99,0])[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Log()[?25l[29;55r[29;1H[4M[1;57r[52;1H----
Test 8: several lines with multibyte words
[['', 'Äne M¤[54;14Hne Mü[54;19Hh', 'und raus bist dü[54;40H!'], {'chars': 32, 'cursor_chars': 31, 'words':  [55;1H7, 'cursor_words': 7, 'bytes': 36, 'cursor_bytes': 35}][57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 9: visual mode, complete buffer"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall PutInWindow(['Äne M¤[57;27Hne Mü[57;32Hh', 'und raus bist dü[57;53H!'])[?25l--No lines in buffer--[57;23H[K[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd k[?25l[28;1H[1m[7mXtest [+]                                                                              [m[56;1H[7mtest_wordcount.in [+][m[1m[7m [m[7m                                                                  [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset ls=2 stl=%{STL()}[?25l[28;1H[1m[7m< 32, 'cursor_chars': 1, 'words': 7, 'cursor_words': 0, 'bytes': 36, 'cursor_bytes': 1}[m[56;1H[7m<_chars': 3985, 'words': 579, 'cursor_words': 560, 'bytes': 4153, 'cursor_bytes': 4007}[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h" start visual mode quickly and select complete buffer[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h0[?25l[1;1H[?12l[?25h[?25l[28;8H[1m[7mwords': 7, 'bytes': 36, 'visual_chars': 1, 'visual_words': 0, 'visual_[1;1H[?12l[?25h[?25l[m[7m 
Äne M¤[2;7Hne Mü[2;12Hh 
[mu[7mnd raus bist dü[3;17H! [m[28;2H[1m[7m2, 'words': 7, 'bytes': 36, 'visual_chars': 32, 'visual_words': 7, 'visual_bytes': 36}[3;1H[?12l[?25h[?25l[m[1;1H[K[2;1HÄne M¤[2;7Hne Mü[2;12Hh[2;13H[K[3;2Hnd raus bist dü[3;17H![3;18H[K[57;1H3 lines yanked[28;2H[1m[7m 32, 'cursor_chars': 1, 'words': 7, 'cursor_words': 0, 'bytes': 36, 'cursor_bytes': 1}[1;1H[?12l[?25h[28;23H2,[29C1,[30C3}[2;1H[?25l[m[57;1H[K[57;1H:[?12l[?25hset stl= ls=1[?25l[28;1H[1m[7mXtest [+]r                                                                              [m[56;1H[7mtest_wordcount.in [+]                                                                  [2;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet log=DoRecordWin([3,99,0])[?25l[28;1H[7mXtest [+][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7mtest_wordcount.in [+]                                                                  [54;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet log[2]=g:visual_stat[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Log()[?25l[29;55r[29;1H[4M[1;57r[52;1H----
Test 9: visual mode, complete buffer
[['', 'Äne M¤[54;14Hne Mü[54;19Hh', 'und raus bist dü[54;40H!'], {'chars': 32, 'words': 7, 'bytes': 36, 'viss[55;1Hual_chars': 32, 'visual_words': 7, 'visual_bytes': 36}][57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 10: visual mode (empty)"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall PutInWindow(['Äne M¤[57;27Hne Mü[57;32Hh', 'und raus bist dü[57;53H!'])[?25l--No lines in buffer--[57;23H[K[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd k[?25l[28;1H[1m[7mXtest [+]                                                                              [m[56;1H[7mtest_wordcount.in [+][m[1m[7m [m[7m                                                                  [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset ls=2 stl=%{STL()}[?25l[28;1H[1m[7m< 32, 'cursor_chars': 1, 'words': 7, 'cursor_words': 0, 'bytes': 36, 'cursor_bytes': 1}[m[56;1H[7m<_chars': 4170, 'words': 606, 'cursor_words': 587, 'bytes': 4342, 'cursor_bytes': 4196}[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h" start visual mode quickly and select complete buffer[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h0[?25l[1;1H[?12l[?25h[?25l[28;8H[1m[7mwords': 7, 'bytes': 36, 'visual_chars': 1, 'visual_words': 0, 'visual_[1;1H[?12l[?25h[?25l[?12l[?25h[?25l[28;8Hcursor_chars': 1, 'words': 7, 'cursor_words': 0, 'bytes': 36, 'cursor_[1;1H[?12l[?25h[28;23H2,[29C1,[30C3}[2;1H[?25l[m[57;1H[K[57;1H:[?12l[?25hset stl= ls=1[?25l[28;1H[1m[7mXtest [+]r                                                                              [m[56;1H[7mtest_wordcount.in [+]                                                                  [2;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet log=DoRecordWin([3,99,0])[?25l[28;1H[7mXtest [+][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7mtest_wordcount.in [+]                                                                  [54;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet log[2]=g:visual_stat[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Log()[?25l[29;55r[29;1H[4M[1;57r[52;1H----
Test 10: visual mode (empty)
[['', 'Äne M¤[54;14Hne Mü[54;19Hh', 'und raus bist dü[54;40H!'], {'chars': 32, 'words': 7, 'bytes': 36, 'viss[55;1Hual_chars': 1, 'visual_words': 0, 'visual_bytes': 1}][57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test="Test 11: visual mode, single line"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall PutInWindow(['Äne M¤[57;27Hne Mü[57;32Hh', 'und raus bist dü[57;53H!'])[?25l--No lines in buffer--[57;23H[K[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwincmd k[?25l[28;1H[1m[7mXtest [+]                                                                              [m[56;1H[7mtest_wordcount.in [+][m[1m[7m [m[7m                                                                  [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset ls=2 stl=%{STL()}[?25l[28;1H[1m[7m< 32, 'cursor_chars': 1, 'words': 7, 'cursor_words': 0, 'bytes': 36, 'cursor_bytes': 1}[m[56;1H[7m<_chars': 4347, 'words': 632, 'cursor_words': 613, 'bytes': 4521, 'cursor_bytes': 4377}[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h" start visual mode quickly and select complete buffer[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h2[?25l[28;23H[1m[7m2,[29C1,[30C3}[2;1H[?12l[?25h[?25l[28;8Hwords': 7, 'bytes': 36, 'visual_chars': 1, 'visual_words': 1, 'visual_[8C2}[2;1H[?12l[?25h[?25l[m[7mÄne M¤[2;7Hne Mü[2;12Hh[m[28;2H[1m[7m2, 'words': 7, 'bytes': 36, 'visual_chars': 13, 'visual_words': 3, 'visual_bytes': 16}[2;13H[?12l[?25h[?25l[mÄne M¤[2;7Hne Mü[2;12Hh[28;2H[1m[7m 32, 'cursor_chars': 2, 'words': 7, 'cursor_words': 1, 'bytes': 36, 'cursor_bytes': 3}[2;1H[?12l[?25h[28;2H2, 'cursor_chars': 15, 'words': 7, 'cursor_words': 4, 'bytes': 36, 'cursor_bytes': 18}[3;1H[?25l[m[57;1H[K[57;1H:[?12l[?25hset stl= ls=1[?25l[28;1H[1m[7mXtest [+]o                                                                              [m[56;1H[7mtest_wordcount.in [+]                                                                  [3;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet log=DoRecordWin([3,99,0])[?25l[28;1H[7mXtest [+][m[1m[7m [m[7m                                                                              [m[56;1H[1m[7mtest_wordcount.in [+]                                                                  [54;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet log[2]=g:visual_stat[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall Log()[?25l[29;55r[29;1H[4M[1;57r[52;1H----
Test 11: visual mode, single line
[['', 'Äne M¤[54;14Hne Mü[54;19Hh', 'und raus bist dü[54;40H!'], {'chars': 32, 'words': 7, 'bytes': 36, 'viss[55;1Hual_chars': 13, 'visual_words': 3, 'visual_bytes': 16}][57;1H[K[54;1H[?12l[?25h[?25l


:[?12l[?25h"[?25l[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^RESULT test/,$w! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New File] 34 lines, 1905 characters written[54;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_wordcount = test61; then \
#	  if diff test.out test_wordcount.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_wordcount.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_wordcount.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test11.failed test.ok test.out X* viminfo
cp test11.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test11.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test11.in" 84 lines, 3366 characters[1;1HTests for autocommands:
- FileWritePre[10Cwriting a compressed file
- FileReadPost[10Creading a compressed file
- BufNewFile[12Creading a file template
- BufReadPre[12Cdecompressing the file to be read
- FilterReadPre[9Csubstituting characters in the temp file
- FilterReadPost[8Csubstituting characters after filtering
- FileReadPre[11Cset options for decompression
- FileReadPost[10Cdecompress the file

Note: This test is skipped if "gzip" is not available.
$GZIP is made empty, "-v" would cause trouble.
Use a FileChangedShell autocommand to avoid a prompt for "Xtestfile.gz" being
modified outside of Vim (noticed on Solaris).

STARTTEST
:so small.vim
:" drop out when there is no gzip program
:if !executable("gzip")
: e! test.ok
: w! test.out
: qa!
:endif
:let $GZIP = ""
:au FileChangedShell * echo "caught FileChangedShell"
:set bin
:au FileWritePre    *.gz   '[,']!gzip
:au FileWritePost   *.gz   undo
:/^start of testfile/,/^end of testfile/w! Xtestfile.gz
:au FileReadPost    *.gz   '[,']!gzip -d
:$r Xtestfile.gz[16C" Read and decompress the testfile
:?startstart?,$w! test.out      " Write contents of this file
:au BufNewFile      *.c    read Xtest.c
:/^start of test.c/+1,/^end of test.c/-1w! Xtest.c
:e! foo.c[23C" Will load Xtest.c
:au FileAppendPre   *.out  '[,']s/new/NEW/
:au FileAppendPost  *.out  !cat Xtest.c >>test.out
:w>>test.out[20C" Append it to the output file
:au! FileAppendPre
:" setup autocommands to decompress before reading and re-compress afterwards
:au BufReadPre      *.gz   exe '!gzip -d ' . shellescape(expand("<afile>"))
:au BufReadPre      *.gz   call rename(expand("<afile>:r"), expand("<afile>"))
:au BufReadPost     *.gz   call rename(expand("<afile>"), expand("<afile>:r"))
:au BufReadPost     *.gz   exe '!gzip ' . shellescape(expand("<afile>:r"))
:e! Xtestfile.gz[16C" Edit compressed file
:w>>test.out[20C" Append it to the output file
:set shelltemp[18C" need temp files here
:au FilterReadPre   *.out  call rename(expand("<afile>"), expand("<afile>") . ".t")
:au FilterReadPre   *.out  exe 'silent !sed s/e/E/ ' . shellescape(expand("<afile>")) ..[50;1H ".t >" . shellescape(expand("<afile>"))
:au FilterReadPre   *.out  exe 'silent !rm ' . shellescape(expand("<afile>")) . '.t'
:au FilterReadPost  *.out  '[,']s/x/X/g
:e! test.out[20C" Edit the output file
:23,$!cat
:23,$s/\r$//[17C" remove CR for when sed adds them
:au! FileReadPre    *.gz   exe 'silent !gzip -d ' . shellescape(expand("<afile>"))[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for autocommands:[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[16;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[17;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 48 lines, 2298 characters written[17;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[17;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[10M[1;57r[47;1H:au  FileReadPre    *.gz   call rename(expand("<afile>:r"), expand("<afile>"))
:au! FileReadPost   *.gz   '[,']s/l/L/
:$r Xtestfile.gz[13C" Read compressed file
:w[27C" write it, after filtering
:au![13C" remove all autocommands
:e[15C" Edit test.out again
:set nobin ff&   " use the default fileformat for writing
:w
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" drop out when there is no gzip program[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !executable("gzip")[?25l
:  [?12l[?25h: e! test.ok
[?25l:  [?12l[?25h: w! test.out
[?25l:  [?12l[?25h: qa!
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1H$GZIP is made empty, "-v" would cause trouble.
Use a FileChangedShell autocommand to avoid a prompt for "Xtestfile.gz" being
modified outside of Vim (noticed on Solaris).[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet $GZIP = ""[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau FileChangedShell * echo "caught FileChangedShell"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset bin[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau FileWritePre    *.gz   '[,']!gzip[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau FileWritePost   *.gz   undo[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^start of testfile/,/^end of testfile/w! Xtestfile.gz[?25l[?12l[?25h[?25l11 lines filtered[57;18H[K[57;1H
"Xtestfile.gz" [New File][Incomplete last line] 1 line, 111 characters written
10 more lines; before #1  0 seconds ago
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hau FileReadPost    *.gz   '[,']!gzip -d[?25l[1;1H[3L[1;1H:let $GZIP = ""
:au FileChangedShell * echo "caught FileChangedShell"
:set bin
:au FileWritePre    *.gz   '[,']!gzip
:au FileWritePost   *.gz   undo
:/^start of testfile/,/^end of testfile/w! Xtestfile.gz
:au FileReadPost    *.gz   '[,']!gzip -d[7;41H[K[8;2H$r Xtestfile.gz       [9C" Read and decompress the testfile
:?startstart?,$w! test.out      " Write contents of this file
:au BufNewFile      *.c    read Xtest.c
:/^start of test.c/+1,/^end of test.c/-1w! Xtest.c
:e! foo.c[23C" Will load Xtest.c
:au FileAppendPre   *.out  '[,']s/new/NEW/[14;9HAppendPost  *.out  !cat Xtest.c >>test.out[14;51H[K[15;2Hw>>test.out[20C" Append it to the output file
:au! FileAppendPre[16;21H[K[17;2H" setup autocommands to decompress before reading and re-compress afterwards
:au BufReadPre      *.gz   exe '!gzip -d ' . shellescape(expand("<afile>"))
:au BufReadPre  [11Ccall rename(expand("<afile>:r"), expand("<afile>"))
:au BufReadPost     *.gz   call rename(expand("<afile>"), expand("<afile>:r"))
:au BufReadPost     *.gz   exe '!gzip ' . shellescape(expand("<afile>:r"))
:e! Xtestfile.gz                " Edit compressed file
:w>>test.out                    " Append it to the output file
:set shelltemp[20Cneed temp files here[25;8HterRea[14Ccall rename(expand("<afile>"), expand("<afile>") . ".t")[26;8HterReadPre [9Cexe 'silent !sed s/e/E/ ' . shellescape(expand("<afile>")) ..[27;1H ".t >" . shellescape(expand("<afile>"))[27;42H[K[28;4H FilterReadPre   *.out  exe 'silent !rm ' . shellescape(expand("<afile>")) . '.t'
:au FilterReadPost  *.out  '[,']s/x/X/g[29;40H[K[30;2He! test.out                    " Edit the output file[30;55H[K[31;2H23,$!cat[31;10H[K[32;2H23,$s/\r$//                 " remove CR for when sed adds them[32;64H[K[33;4H! FileReadPre[16Csilent !gzip -d ' . shellescape(expand("<afile>"))
:au  FileReadPre    *.gz   call rename(expand("<afile>:r"), expand("<afile>"))
:au! FileReadPost   *.gz   '[,']s/l/L/[35;39H[K[36;2H$r Xtestfile.gz[13C" Read compressed file[36;52H[K[37;2Hw                           " write it, after filtering[37;57H[K[38;4H!             " remove all autocommands[38;43H[K[39;1H:e               " Edit test.out again[39;39H[K[40;2Hset nobin ff&   " use the default fileformat for writing[40;58H[K[41;2Hw[41;3H[K[42;2Hqa![42;5H[K[43;1HENDTEST[43;8H[K[44;1H[K[45;1Hstartstart[45;11H[K[46;1Hstart of testfile[46;21H[K[47;1Hline 2  Abcdefghijklmnopqrstuvwxyz[47;35H[K[48;1Hline 3  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[48;39H[K[49;1Hline 4  Abcdefghijklmnopqrstuvwxyz[49;35H[K[50;1Hline 5  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[50;39H[K[51;1Hline 6  Abcdefghijklmnopqrstuvwxyz[51;35H[K[52;1Hline 7  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[52;39H[K[53;1Hline 8  Abcdefghijklmnopqrstuvwxyz
line 9  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
line 10 Abcdefghijklmnopqrstuvwxyz
end of testfile[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$r Xtestfile.gz                " Read and decompress the testfile[?25l"Xtestfile.gz" [57;16H[K[57;16H[Incomplete last line] 1 line, 111 characters[?12l[?25h[60C[?25l[1;56r[1;1H[7M[1;57r[51;1Hstart of test.c
/*
 * Here is a new .c file
 */
end of test.c
start of testfile[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h?startstart?,$w! test.out      " Write contents of this file[?25l"test.out" [57;12H[K[57;12H[New File] 29 lines, 788 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufNewFile      *.c    read Xtest.c[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^start of test.c/+1,/^end of test.c/-1w! Xtest.c[?25l[31msearch hit BOTTOM, continuing at TOP[m[57;37H[K[57;1H"Xtest.c" [57;11H[K[57;11H[New File] 3 lines, 32 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! foo.c                       " Will load Xtest.c[?25l"foo.c" [New File][57;33H[K[57;1H
"Xtest.c" 3 lines, 32 characters
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hau FileAppendPre   *.out  '[,']s/new/NEW/[?25l[1;1H[2L[2;1H/*
 * Here is a new .c file[3;28H[K[4;1H */[4;4H[K[5;1H[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H[K[2;1H[?12l[?25h[?25l[57;1H:[?12l[?25hau FileAppendPost  *.out  !cat Xtest.c >>test.out[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw>>test.out                    " Append it to the output file[?25l"test.out" [57;12H[K[57;12H4 lines, 33 characters appended
:!cat Xtest.c >>test.out
[?12l[?25h[m
[32mPress ENTER or type command to continue[?25l[m[57;1H[K[57;1H:[?12l[?25hau! FileAppendPre[?25l[27m[23m[m[H[2J[2;1H/*
 * Here is a NEW .c file
 */
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [3;2H[?12l[?25h[?25l[57;1H[m:[?12l[?25h" setup autocommands to decompress before reading and re-compress afterwards[?25l[3;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufReadPre      *.gz   exe '!gzip -d ' . shellescape(expand("<afile>"))[?25l[3;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufReadPre      *.gz   call rename(expand("<afile>:r"), expand("<afile>"))[?25l[3;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufReadPost     *.gz   call rename(expand("<afile>"), expand("<afile>:r"))[?25l[3;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau BufReadPost     *.gz   exe '!gzip ' . shellescape(expand("<afile>:r"))[?25l[3;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtestfile.gz                " Edit compressed file[?25l:!gzip -d 'Xtestfile.gz'[57;33H[K[57;25H
[?12l[?25h[?25l[m"Xtestfile.gz"[56;1H"Xtestfile.gz" 11 lines, 357 characters[57;1H[K[57;1H:!gzip 'Xtestfile'
[?12l[?25h[?25l[mcaught FileChangedShell
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw>>test.out                    " Append it to the output file[?25l"test.out" [57;12H[K[57;12H11 lines, 357 characters appended
:!cat Xtest.c >>test.out
[?12l[?25h[m
[32mPress ENTER or type command to continue[?25l[m[57;1H[K[57;1H:[?12l[?25hset shelltemp                  " need temp files here[?25l[27m[23m[m[H[2J[1;1Hstart of testfile
line 2  Abcdefghijklmnopqrstuvwxyz
line 3  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
line 4  Abcdefghijklmnopqrstuvwxyz
line 5  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
line 6  Abcdefghijklmnopqrstuvwxyz
line 7  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
line 8  Abcdefghijklmnopqrstuvwxyz
line 9  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
line 10 Abcdefghijklmnopqrstuvwxyz
end of testfile
[1m[34m~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hau FilterReadPre   *.out  call rename(expand("<afile>"), expand("<afile>") . ".t")[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau FilterReadPre   *.out  exe 'silent !sed s/e/E/ ' . shellescape(expand("<afile>")) 
[56;87H.[57;1H ".t >" . shellescape(expand("<afile>"))[?25l[1;1H[L[1;1Hstart of testfile[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hau FilterReadPre   *.out  exe 'silent !rm ' . shellescape(expand("<afile>")) . '.t'[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau FilterReadPost  *.out  '[,']s/x/X/g[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! test.out                    " Edit the output file[?25l"test.out" [57;12H[K[57;12H50 lines, 1242 characters[1;6Hstar[1;11H[K[2;1Hstart of testfile[2;18H[K[3;6H2  Abcdefghijklmnopqrstuvwxyz[3;35H[K[4;6H3  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[5;6H4  Abcdefghijklmnopqrstuvwxyz[5;35H[K[6;6H5  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[7;6H6  Abcdefghijklmnopqrstuvwxyz[7;35H[K[8;6H7  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[9;6H8  Abcdefghijklmnopqrstuvwxyz[9;35H[K[10;6H9  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
line 10 Abcdefghijklmnopqrstuvwxyz
end of testfile[12;16H[K[13;1H[K[14;1Hstart of test.c[14;16H[K[15;1H/*[15;3H[K[16;1H * Here is a new .c file[16;25H[K[17;1H */[17;4H[K[18;1Hend of test.c[18;14H[K[19;1Hstart of testfile[19;18H[K[20;1Hline 2  Abcdefghijklmnopqrstuvwxyz[20;35H[K[21;1Hline 3  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[21;39H[K[22;1Hline 4  Abcdefghijklmnopqrstuvwxyz[22;35H[K[23;1Hline 5  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[23;39H[K[24;1Hline 6  Abcdefghijklmnopqrstuvwxyz[24;35H[K[25;1Hline 7  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[25;39H[K[26;1Hline 8  Abcdefghijklmnopqrstuvwxyz[26;35H[K[27;1Hline 9  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[27;39H[K[28;1Hline 10 Abcdefghijklmnopqrstuvwxyz[28;35H[K[29;1Hend of testfile[29;16H[K[30;1H[K[31;1H/*[31;3H[K[32;1H * Here is a NEW .c file[32;25H[K[33;1H */[33;4H[K[34;1H/*[34;3H[K[35;1H * Here is a new .c file[35;25H[K[36;1H */[36;4H[K[37;1Hstart of testfile[37;18H[K[38;1Hline 2  Abcdefghijklmnopqrstuvwxyz[38;35H[K[39;1Hline 3  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[39;39H[K[40;1Hline 4  Abcdefghijklmnopqrstuvwxyz[40;35H[K[41;1Hline 5  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[41;39H[K[42;1Hline 6  Abcdefghijklmnopqrstuvwxyz[42;35H[K[43;1Hline 7  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[43;39H[K[44;1Hline 8  Abcdefghijklmnopqrstuvwxyz[44;35H[K[45;1Hline 9  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[45;39H[K[46;1Hline 10 Abcdefghijklmnopqrstuvwxyz[46;35H[K[47;1Hend of testfile[47;16H[K[48;1H/*[48;3H[K[49;1H * Here is a new .c file[49;25H[K[50;1H */[50;4H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h23,$!cat[?25l[?12l[?25h[?25l218 substitutions on 15 lines
28 lines filtered
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h23,$s/\r$//                 " remove CR for when sed adds them[?25l[1m[37m[41mE486: Pattern not found: \r$[m[57;30H[K[57;1H
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hau! FileReadPre    *.gz   exe 'silent !gzip -d ' . shellescape(expand("<afile>"))[?25l[1;1H[3L[1;1Hstartstart
start of testfile
line 2  Abcdefghijklmnopqrstuvwxyz[23;4HE 5  XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
linE[27CX
linE 7  XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
linE[27CX
linE 9  XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
linE[27CX
E[32;5HE[35;5HE[37;11HE
linE[27CX
linE 3  XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
linE[27CX
linE 5  XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
linE[27CX
linE 7  XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
linE[27CX
linE 9  XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
linE[27CX
E[49;5HE[57;1H[K[23;1H[?12l[?25h[?25l[57;1H:[?12l[?25hau  FileReadPre    *.gz   call rename(expand("<afile>:r"), expand("<afile>"))[?25l[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hau! FileReadPost   *.gz   '[,']s/l/L/[?25l[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r Xtestfile.gz             " Read compressed file[?25l[?12l[?25h[?25l"Xtestfile.gz" [57;16H[K[57;16H11 lines, 357 characters
11 substitutions on 11 lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw                           " write it, after filtering[?25l"test.out"[57;30H[K[57;12H61 lines, 1599 characters written
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hau!             " remove all autocommands[?25l[1m[37m[41mE216: No such group or event: " remove all autocommands[m
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25he               " Edit test.out again[?25l"test.out"[57;18H[K[57;12H61 lines, 1599 characters[1;1H[4L[1;1Hstartstart
start of testfile
line 2  Abcdefghijklmnopqrstuvwxyz
line 3  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[51;1Hstart of testfiLe[51;18H[K[52;1HLine 2  Abcdefghijklmnopqrstuvwxyz[52;35H[K[53;1HLine 3  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[53;39H[K[54;1HLine 4  Abcdefghijklmnopqrstuvwxyz[54;35H[K[55;1HLine 5  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx[55;39H[K[56;1HLine 6  Abcdefghijklmnopqrstuvwxyz[56;35H[K[57;1H[K[57;1H"test.out" 61 lines, 1599 characters[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nobin ff&   " use the default fileformat for writing[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"test.out" 61 lines, 1599 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test11 = test61; then \
#	  if diff test.out test11.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test11.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test11.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test52.failed test.ok test.out X* viminfo
cp test52.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test52.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test52.in" 65 lines, 1645 characters[1;1HTests for reading and writing files with conversion for Win32.

STARTTEST
:so mbyte.vim
:" make this a dummy test for non-Win32 systems
:if !has("win32") | e! test.ok | wq! test.out | endif
:"
:" write tests:
:" combine three values for 'encoding' with three values for 'fileencoding'
:" also write files for read tests
/^1
:set encoding=utf-8
:.w! ++enc=utf-8 test.out
:.w ++enc=cp1251 >>test.out
:.w ++enc=cp866 >>test.out
:.w! ++enc=utf-8 Xutf8
/^2
:set encoding=cp1251
:.w ++enc=utf-8 >>test.out
:.w ++enc=cp1251 >>test.out
:.w ++enc=cp866 >>test.out
:.w! ++enc=cp1251 Xcp1251
/^3
:set encoding=cp866
:.w ++enc=utf-8 >>test.out
:.w ++enc=cp1251 >>test.out
:.w ++enc=cp866 >>test.out
:.w! ++enc=cp866 Xcp866
:"
:" read three 'fileencoding's with utf-8 'encoding'
:set encoding=utf-8 fencs=utf-8,cp1251
:e Xutf8
:.w ++enc=utf-8 >>test.out
:e Xcp1251
:.w ++enc=utf-8 >>test.out
:set fencs=utf-8,cp866
:e Xcp866
:.w ++enc=utf-8 >>test.out
:"
:" read three 'fileencoding's with cp1251 'encoding'
:set encoding=utf-8 fencs=utf-8,cp1251
:e Xutf8
:.w ++enc=cp1251 >>test.out
:e Xcp1251
:.w ++enc=cp1251 >>test.out
:set fencs=utf-8,cp866
:e Xcp866
:.w ++enc=cp1251 >>test.out
:"
:" read three 'fileencoding's with cp866 'encoding'
:set encoding=cp866 fencs=utf-8,cp1251
:e Xutf8
:.w ++enc=cp866 >>test.out
:e Xcp1251
:.w ++enc=cp866 >>test.out
:set fencs=utf-8,cp866[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for reading and writing files with conversion for Win32.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 57 lines, 1333 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[5M[1;57r[52;1H:e Xcp866
:.w ++enc=cp866 >>test.out
:"
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" make this a dummy test for non-Win32 systems[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !has("win32") | e! test.ok | wq! test.out | endif[?25l"test.ok" [57;11H[K[57;11H18 lines, 1374 characters
"test.out" [New File] 18 lines, 1374 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test52 = test61; then \
#	  if diff test.out test52.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test52.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test52.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test85.failed test.ok test.out X* viminfo
cp test85.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test85.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test85.in" 85 lines, 1868 characters[1;1HTest for Lua interface and luaeval() function

STARTTEST
:so small.vim
:so lua.vim
:set nocompatible viminfo+=nviminfo
:lua l = vim.list():add"item0":add"dictionary with list OK":add"item2"
:lua h = vim.dict(); h.list = l
:call garbagecollect()
/^1
:" change buffer contents
:lua curbuf = vim.buffer()
:lua curline = vim.eval"line('.')"
:lua curbuf[curline] = "1 changed line 1"
:" scalar test
:let tmp_string = luaeval('"string"')
:let tmp_1000 = luaeval('1000')
:if printf("%s%.0f", tmp_string, tmp_1000) == "string1000"
:let scalar_res = "OK"
:else
:let scalar_res = "FAILED"
:endif
:call append(search("^1"), "scalar test " . scalar_res)
:" dictionary containing a list
:let tmp = luaeval("h").list[1]
:/^2/put =tmp
:" circular list (at the same time test lists containing lists)
:lua l[2] = l
:let l2 = luaeval("h").list
:if l2[2] == l2
:let res = "OK"
:else
:let res = "FAILED"
:endif
:call setline(search("^3"), "circular test " . res)

:let l = []
:lua l = vim.eval("l")
:lua l:add(123)
:lua l:add("abc")
:lua l:add(vim.eval("[1, 2, 3]"))
:lua l:add(vim.eval("{'a':1, 'b':2, 'c':3}"))
:lua l:insert(123)
:lua l:insert("abc")
:lua l:insert(vim.eval("[1, 2, 3]"))
:lua l:insert(vim.eval("{'a':1, 'b':2, 'c':3}"))
:lua l[0] = l[0]
:lua l[1] = l[1]
:lua l[2] = l[2]
:lua l[3] = l[3]
:lua l[0] = 123
:lua l[1] = "abc"
:lua l[2] = vim.eval("[1, 2, 3]")
:lua l[3] = vim.eval("{'a':1, 'b':2, 'c':3}")
:lua l[3] = nil
:lua l[2] = nil[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for Lua interface and luaeval() function[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 77 lines, 1775 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[25M[1;57r[32;1H:lua l[1] = nil
:lua l[0] = nil
:lua l = nil
:$put =string(l)

:let d = {}
:lua d = vim.eval("d")
:lua d[0] = 123
:lua d[1] = "abc"
:lua d[2] = vim.eval("[1, 2, 3]")
:lua d[3] = vim.eval("{'a':1, 'b':2, 'c':3}")
:lua d[4] = d[0]
:lua d[5] = d[1]
:lua d[6] = d[2]
:lua d[7] = d[3]
:lua d[3] = nil
:lua d[2] = nil
:lua d[1] = nil
:lua d[0] = nil
:lua d = nil
:$put =string(d)

:?^1?,$w! test.out
:qa!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso lua.vim[?25l"test.ok" [57;11H[K[57;11H7 lines, 206 characters
"test.out" [New File] 7 lines, 206 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test85 = test61; then \
#	  if diff test.out test85.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test85.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test85.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test86.failed test.ok test.out X* viminfo
cp test86.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test86.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test86.in" 1711 lines, 48481 characters[1;1HTests for various python features.     vim: set ft=vim :

NOTE: This will cause errors when run under valgrind.
This would require recompiling Python with:
  ./configure --without-pymalloc
See http://svn.python.org/view/python/trunk/Misc/README.valgrind?view=markup

STARTTEST
:so small.vim
:set encoding=latin1
:set noswapfile
:if !has('python') | e! test.ok | wq! test.out | endif
:lang C
:fun Test()
:py import vim
:py cb = vim.current.buffer
:let l = []
:py l=vim.bindeval('l')
:py f=vim.bindeval('function("strlen")')
:" Extending List directly with different types
:py l.extend([1, "as'd", [1, 2, f, {'a': 1}]])
:$put =string(l)
:$put =string(l[-1])
:try
:  $put =string(l[-4])
:catch
:  $put =v:exception[:13]
:endtry
:" List assignment
:py l[0]=0
:$put =string(l)
:py l[-2]=f
:$put =string(l)
:"
:" Extending Dictionary directly with different types
:let d = {}
:fun d.f()
:  return 1
:endfun
py << EOF
d=vim.bindeval('d')
d['1']='asd'
d.update()  # Must not do anything, including throwing errors
d.update(b=[1, 2, f])
d.update((('-1', {'a': 1}),))
d.update({'0': -1})
dk = d.keys()
dv = d.values()
di = d.items()
cmpfun = lambda a, b: cmp(repr(a), repr(b))
dk.sort(cmpfun)
dv.sort(cmpfun)
di.sort(cmpfun)
EOF
:$put =pyeval('d[''f''](self={})')
:$put =pyeval('repr(dk)')[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for various python features.     vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[8;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 1700 lines, 48188 characters written[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[9;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;5Helse:[2;9Hcb.append('No exception')
EOF
:debuggreedy
:call inputsave()
:call feedkeys("s\ns\ns\ns\nq\n")
:redir => output
:debug silent! py test_keyboard_interrupt()
:redir END
:0 debuggreedy
:call inputrestore()
:silent $put =output
:unlet output
:py del test_keyboard_interrupt
:"
:" Cleanup
py << EOF
del cb
del ee
del emsg
del sys
del os
del vim
EOF
:endfun
:"
:fun RunTest()
:let checkrefs = !empty($PYTHONDUMPREFS)
:let start = getline(1, '$')
:for i in range(checkrefs ? 10 : 1)
:   if i != 0
:[7C%d _
:[7Ccall setline(1, start)
:   endif
:   call Test()
:   if i == 0
:[7Clet result = getline(1, '$')
:   endif
:endfor
:if checkrefs
:   %d _
:   call setline(1, result)
:endif
:endfun
:"
:call RunTest()
:delfunction RunTest
:delfunction Test
:call garbagecollect(1)
:"
:/^start:/,$wq! test.out
:" vim: et ts=4 isk-=\:
:while getchar(0) isnot 0|endwhile
ENDTEST

start:[54;1H[?12l[?25h
[?25l

:so! Xdotest[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset encoding=latin1[?25l[27m[23m[m[H[2J[1;5Helse:[2;9Hcb.append('No exception')
EOF
:debuggreedy
:call inputsave()
:call feedkeys("s\ns\ns\ns\nq\n")
:redir => output
:debug silent! py test_keyboard_interrupt()
:redir END
:0 debuggreedy
:call inputrestore()
:silent $put =output
:unlet output
:py del test_keyboard_interrupt
:"
:" Cleanup
py << EOF
del cb
del ee
del emsg
del sys
del os
del vim
EOF
:endfun
:"
:fun RunTest()
:let checkrefs = !empty($PYTHONDUMPREFS)
:let start = getline(1, '$')
:for i in range(checkrefs ? 10 : 1)
:   if i != 0
:[7C%d _
:[7Ccall setline(1, start)
:   endif
:   call Test()
:   if i == 0
:[7Clet result = getline(1, '$')
:   endif
:endfor
:if checkrefs
:   %d _
:   call setline(1, result)
:endif
:endfun
:"
:call RunTest()
:delfunction RunTest
:delfunction Test
:call garbagecollect(1)
:"
:/^start:/,$wq! test.out
:" vim: et ts=4 isk-=\:
:while getchar(0) isnot 0|endwhile
ENDTEST

start:[55;1H[?12l[?25h[?25l

:[?12l[?25hset noswapfile[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !has('python') | e! test.ok | wq! test.out | endif[?25l"test.ok" [57;11H[K[57;11H1445 lines, 67439 characters
"test.out" [New File] 1445 lines, 67439 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test86 = test61; then \
#	  if diff test.out test86.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test86.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test86.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test87.failed test.ok test.out X* viminfo
cp test87.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test87.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test87.in" 1707 lines, 49069 characters[1;1HTests for various python features.     vim: set ft=vim :

STARTTEST
:so small.vim
:set noswapfile
:if !has('python3') | e! test.ok | wq! test.out | endif
:lang C
:fun Test()
:py3 import vim
:py3 cb = vim.current.buffer
:let l = []
:py3 l=vim.bindeval('l')
:py3 f=vim.bindeval('function("strlen")')
:" Extending List directly with different types
:py3 l+=[1, "as'd", [1, 2, f, {'a': 1}]]
:$put =string(l)
:$put =string(l[-1])
:try
:  $put =string(l[-4])
:catch
:  $put =v:exception[:13]
:endtry
:" List assignment
:py3 l[0]=0
:$put =string(l)
:py3 l[-2]=f
:$put =string(l)
:"
:" Extending Dictionary directly with different types
:let d = {}
:fun d.f()
:  return 1
:endfun
py3 << EOF
d=vim.bindeval('d')
d['1']='asd'
d.update()  # Must not do anything, including throwing errors
d.update(b=[1, 2, f])
d.update((('-1', {'a': 1}),))
d.update({'0': -1})
dk = d.keys()
dv = d.values()
di = d.items()
dk.sort(key=repr)
dv.sort(key=repr)
di.sort(key=repr)
EOF
:$put =py3eval('d[''f''](self={})')
:$put =py3eval('repr(dk)')
:$put =substitute(py3eval('repr(dv)'),'0x\x\+','','g')
:$put =substitute(py3eval('repr(di)'),'0x\x\+','','g')
:for [key, Val] in sort(items(d))
:  $put =string(key) . ' : ' . string(Val)
:  unlet key Val
:endfor
:py3 del dk[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for various python features.     vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 1701 lines, 48985 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;9Hcb.append('No exception')
EOF
:debuggreedy
:call inputsave()
:call feedkeys("s\ns\ns\ns\nq\n")
:redir => output
:debug silent! py3 test_keyboard_interrupt()
:redir END
:0 debuggreedy
:call inputrestore()
:silent $put =output
:unlet output
:py3 del test_keyboard_interrupt
:"
:" Cleanup
py3 << EOF
del cb
del ee
del emsg
del sys
del os
del vim
EOF
:endfun
:"
:fun RunTest()
:let checkrefs = !empty($PYTHONDUMPREFS)
:let start = getline(1, '$')
:for i in range(checkrefs ? 10 : 1)
:   if i != 0
:[7C%d _
:[7Ccall setline(1, start)
:   endif
:   call Test()
:   if i == 0
:[7Clet result = getline(1, '$')
:   endif
:endfor
:if checkrefs
:   %d _
:   call setline(1, result)
:endif
:endfun
:"
:call RunTest()
:delfunction RunTest
:delfunction Test
:call garbagecollect(1)
:"
:/^start:/,$wq! test.out
:/^start:/,$w! test.out
:" vim: et ts=4 isk-=\:
:while getchar(0) isnot 0|endwhile
ENDTEST

start:[54;1H[?12l[?25h
[?25l

:so! Xdotest[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noswapfile[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !has('python3') | e! test.ok | wq! test.out | endif[?25l"test.ok" [57;11H[K[57;11H1445 lines, 77744 characters
"test.out" [New File] 1445 lines, 77744 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test87 = test61; then \
#	  if diff test.out test87.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test87.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test87.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test12.failed test.ok test.out X* viminfo
cp test12.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test12.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test12.in" 52 lines, 1199 characters[1;1HTests for 'directory' option.
- ".", in same dir as file
- "./dir", in directory relative to file
- "dir", in directory relative to current dir

STARTTEST
:so small.vim
:set nocompatible viminfo+=nviminfo
:set dir=.,~
:/start of testfile/,/end of testfile/w! Xtest1
:" do an ls of the current dir to find the swap file (should not be there)
:if has("unix")
:  !ls .X*.swp >test.out
:else
:  r !ls X*.swp >test.out
:endif
:!echo first line >>test.out
:e Xtest1
:if has("unix")
:" Do an ls of the current dir to find the swap file, remove the leading dot
:" to make the result the same for all systems.
:  r!ls .X*.swp
:  s/\.*X/X/
:  .w >>test.out
:  undo
:else
:  !ls X*.swp >>test.out
:endif
:!echo under Xtest1.swp >>test.out
:!mkdir Xtest2
:set dir=./Xtest2,.,~
:e Xtest1
:!ls X*.swp >>test.out
:!echo under under >>test.out
:!ls Xtest2 >>test.out
:!echo under Xtest1.swp >>test.out
:!mkdir Xtest.je
:/start of testfile/,/end of testfile/w! Xtest2/Xtest3
:set dir=Xtest.je,~
:e Xtest2/Xtest3
:swap
:!ls Xtest2 >>test.out
:!echo under Xtest3 >>test.out
:!ls Xtest.je >>test.out
:!echo under Xtest3.swp >>test.out
:qa!
ENDTEST

start of testfile
line 2 Abcdefghij
line 3 Abcdefghij
end of testfile
[1m[34m~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for 'directory' option.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[6;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 40 lines, 965 characters written[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[7;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[47;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[48;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[48;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocompatible viminfo+=nviminfo[?25l[48;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset dir=.,~[?25l[48;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/start of testfile/,/end of testfile/w! Xtest1[?25l"Xtest1" [57;10H[K[57;10H[New] 4L, 70C written[48;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" do an ls of the current dir to find the swap file (should not be there)[?25l[48;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif has("unix")[?25l
:  [?12l[?25h:  !ls .X*.swp >test.out
[?25l:!ls .X*.swp >test.out[?1l>[?12l[?25h[?1049l
ls: cannot access '.X*.swp': No such file or directory

shell returned 2

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:  :[?12l[?25helse
[?25l:  [?12l[?25h:  r !ls X*.swp >test.out
[?25l:  [?12l[?25h:endif[?25l[57;1H[K[57;1H:[?12l[?25h!echo first line >>test.out[?25l[28C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25he Xtest1[?25l"Xtest1" 4L, 70C[27m[23m[m[H[2J[1;1Hstart of testfile
line 2 Abcdefghij
line 3 Abcdefghij
end of testfile
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H"Xtest1" 4L, 70C[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif has("unix")[?25l
:  [?12l[?25h:" Do an ls of the current dir to find the swap file, remove the leading dot
[?25l:  [?12l[?25h:" to make the result the same for all systems.
[?25l:  [?12l[?25h:  r!ls .X*.swp[m
[?25l:  [?12l[?25h:  s/\.*X/X/
[?25l:  [?12l[?25h:  .w >>test.out[?25l"test.out" [57;12H[K[57;12H1L, 11C appended
:  [?12l[?25h:  undo
[?25l1 line less; before #1  0 seconds ago
:  [?12l[?25h:else
[?25l:  [?12l[?25h:  !ls X*.swp >>test.out
[?25l:  [?12l[?25h:endif[27m[23m[m[H[2J[?25l[1;1Hstart of testfile
line 2 Abcdefghij
line 3 Abcdefghij
end of testfile
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h!echo under Xtest1.swp >>test.out[?25l[34C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h!mkdir Xtest2[?25l[14C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25hset dir=./Xtest2,.,~[?25l[27m[23m[m[H[2J[1;1Hstart of testfile
line 2 Abcdefghij
line 3 Abcdefghij
end of testfile
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25he Xtest1[?25l"Xtest1" 4L, 70C[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h!ls X*.swp >>test.out[?25l[22C[?1l>[?12l[?25h[?1049l
ls: cannot access 'X*.swp': No such file or directory

shell returned 2

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h!echo under under >>test.out[?25l[29C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h!ls Xtest2 >>test.out[?25l[22C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h!echo under Xtest1.swp >>test.out[?25l[34C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h!mkdir Xtest.je[?25l[16C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h/start of testfile/,/end of testfile/w! Xtest2/Xtest3[?25l[31msearch hit BOTTOM, continuing at TOP[m[57;37H[K[57;1H"Xtest2/Xtest3" [57;17H[K[57;17H[New] 4L, 70C written[27m[23m[m[H[2J[1;1Hstart of testfile
line 2 Abcdefghij
line 3 Abcdefghij
end of testfile
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H"Xtest2/Xtest3" [New] 4L, 70C written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset dir=Xtest.je,~[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xtest2/Xtest3[?25l"Xtest2/Xtest3" 4L, 70C[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hswap[?25lXtest.je/Xtest3.swp[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h!ls Xtest2 >>test.out[?25l[22C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h!echo under Xtest3 >>test.out[?25l[30C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h!ls Xtest.je >>test.out[?25l[24C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h!echo under Xtest3.swp >>test.out[?25l[34C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[?1l>[?12l[?25h[?1049l
# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test12 = test61; then \
#	  if diff test.out test12.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test12.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test12.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test25.failed test.ok test.out X* viminfo
cp test25.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test25.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test25.in" 31 lines, 840 characters[1;1HTest for jumping to a tag with 'hidden' set, with symbolic link in path of tag.
This only works for Unix, because of the symbolic link.

STARTTEST
:so small.vim
:set hidden
:" Create a link from test25.dir to the current directory.
:!rm -f test25.dir
:!ln -s . test25.dir
:" Create tags.text, with the current directory name inserted.
/tags line
:r !pwd
d$/test
hP:.w! tags.test
:" Try jumping to a tag in the current file, but with a path that contains a
:" symbolic link.  When wrong, this will give the ATTENTION message.  The next
:" space will then be eaten by hit-return, instead of moving the cursor to 'd'.
:set tags=tags.test
G[34m^][m x:.w! test.out
:!rm -f test25.dir tags.test
:qa!
ENDTEST

tags line:
SECTION_OFF     /test25.dir/test25.in   /^#define  SECTION_OFF  3$/

/*tx.c*/
#define  SECTION_OFF  3
#define  NUM_SECTIONS 3

SECTION_OFF
[1m[34m~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for jumping to a tag with 'hidden' set, with symbolic link in path of tag.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 17 lines, 540 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[22;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset hidden[?25l[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Create a link from test25.dir to the current directory.[?25l[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h!rm -f test25.dir[?25l[18C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h!ln -s . test25.dir[?25l[20C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h" Create tags.text, with the current directory name inserted.[?25l[27m[23m[m[H[2J[1;1HTest for jumping to a tag with 'hidden' set, with symbolic link in path of tag.
This only works for Unix, because of the symbolic link.

STARTTEST
:so small.vim
:set hidden
:" Create a link from test25.dir to the current directory.
:!rm -f test25.dir
:!ln -s . test25.dir
:" Create tags.text, with the current directory name inserted.
/tags line
:r !pwd
d$/test
hP:.w! tags.test
:" Try jumping to a tag in the current file, but with a path that contains a
:" symbolic link.  When wrong, this will give the ATTENTION message.  The next
:" space will then be eaten by hit-return, instead of moving the cursor to 'd'.
:set tags=tags.test
G[34m^][m x:.w! test.out
:!rm -f test25.dir tags.test
:qa!
ENDTEST

tags line:
SECTION_OFF     /test25.dir/test25.in   /^#define  SECTION_OFF  3$/

/*tx.c*/
#define  SECTION_OFF  3
#define  NUM_SECTIONS 3

SECTION_OFF
[1m[34m~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [23;1H[?12l[?25h[?25l[57;1H[m/[?12l[?25htags line[?25l[24;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hr !pwd[?25l[?12l[?25h[27m[23m[m[H[2J[?25l[1;1HTest for jumping to a tag with 'hidden' set, with symbolic link in path of tag.
This only works for Unix, because of the symbolic link.

STARTTEST
:so small.vim
:set hidden
:" Create a link from test25.dir to the current directory.
:!rm -f test25.dir
:!ln -s . test25.dir
:" Create tags.text, with the current directory name inserted.
/tags line
:r !pwd
d$/test
hP:.w! tags.test
:" Try jumping to a tag in the current file, but with a path that contains a
:" symbolic link.  When wrong, this will give the ATTENTION message.  The next
:" space will then be eaten by hit-return, instead of moving the cursor to 'd'.
:set tags=tags.test
G[34m^][m x:.w! test.out
:!rm -f test25.dir tags.test
:qa!
ENDTEST

tags line:
/sources/vim80/src/testdir
SECTION_OFF     /test25.dir/test25.in   /^#define  SECTION_OFF  3$/

/*tx.c*/
#define  SECTION_OFF  3
#define  NUM_SECTIONS 3

SECTION_OFF
[1m[34m~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [25;1H[?12l[?25h[?25l[m[25;1H[K[25;1H[?12l[?25h[?25l[57;1H/[?12l[?25htest[?25l[26;18H[?12l[?25h[?25l[27;56r[27;1H[L[1;57r[26;18Hsources/vim80/src/testdir/test25.dir/test25.in /^#define  SECTION_OFF  [27;1H 3$/[57;1H[K[26;42H[?12l[?25h[?25l[57;1H:[?12l[?25h.w! tags.test[?25l"tags.test" [57;13H[K[57;13H[New File] 1 line, 88 characters written[26;42H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Try jumping to a tag in the current file, but with a path that contains a[?25l[26;42H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" symbolic link.  When wrong, this will give the ATTENTION message.  The next[?25l[26;42H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" space will then be eaten by hit-return, instead of moving the cursor to 'd'.[?25l[26;42H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset tags=tags.test[?25l[26;42H[?12l[?25h[33;1H[30;1H#[?25lefine  SECTION_OFF  3[30;23H[K[30;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 1 line, 23 characters written[30;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h!rm -f test25.dir tags.test[?25l[28C[?1l>[?12l[?25h[?1049l
[No write since last change]

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[?1l>[?12l[?25h[?1049l
# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test25 = test61; then \
#	  if diff test.out test25.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test25.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test25.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test49.failed test.ok test.out X* viminfo
cp test49.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test49.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test49.in" 32 lines, 705 characters[1;1HThis is a test of the script language.

If after adding a new test, the test output doesn't appear properly in
test49.failed, try to add one or more "G"s at the line ending in "test.out"

STARTTEST
:so small.vim
:se nocp nomore viminfo+=nviminfo
:lang mess C
:so test49.vim
:" Go back to this file and append the results from register r.
:buf test49.in
G"rp:/^Results/,$w! test.out
:"
:" make valgrind happy
:redir => funclist
:silent func
:redir END
:for line in split(funclist, "\n")
:  let name = matchstr(line, 'function \zs[A-Z]\w*\ze(')
:  if name != ''
:    exe "delfunc " . name
:  endif
:endfor
:for v in keys(g:)
:  silent! exe "unlet " . v
:endfor
:unlet v
:qa!
ENDTEST

Results of test49.vim:
[1m[34m~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HThis is a test of the script language.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[6;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 23 lines, 475 characters written[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[7;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[30;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hse nocp nomore viminfo+=nviminfo[?25l[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlang mess C[?25l[31;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso test49.vim[?25l[1m[37m[41mError detected while processing function F:[m
[33mline    5:[m
[1m[37m[41mE583: multiple :else:     else^I^I[m
[1m[37m[41mError detected while processing function G:[m
[33mline    5:[m
[1m[37m[41mE584: :elseif after :else:     elseif 1^I^I" aborts function[m
[1m[37m[41mError detected while processing function H:[m
[33mline    7:[m
[1m[37m[41mE583: multiple :else:     else^I^I[m
[1m[37m[41mError detected while processing function I:[m
[33mline    7:[m
[1m[37m[41mE584: :elseif after :else:     elseif 1^I^I" aborts function[m
*** Test  16: OK (8722)
[1m[37m[41mError detected while processing function F:[m
[33mline   18:[m
[1m[37m[41mE171: Missing :endif:     endwhile^I[m
[1m[37m[41mE171: Missing :endif:     endwhile^I[m
[33mline   34:[m
[1m[37m[41mE171: Missing :endif:     endwhile^I[m
[1m[37m[41mE171: Missing :endif:     endwhile^I[m
[1m[37m[41mE171: Missing :endif:     endwhile^I[m
[33mline   47:[m
[1m[37m[41mE580: :endif without :if: ^Iendif^I[m
[1m[37m[41mE580: :endif without :if: ^Iendif^I[m
[1m[37m[41mE580: :endif without :if: ^Iendif^I[m
[1m[37m[41mError detected while processing /sources/vim80/src/testdir/test49.vim:[m
[33mline  784:[m
[1m[37m[41mE171: Missing :endif: endwhile [m
*** Test  17: OK (285127993)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"/tmp/vQMVUnP/0" [57;18H[K[57;18H[New] 53L, 1582C written[57;18H[K[57;18H14L, 358C appended[57;18H[K[57;18H26L, 824C appended[57;18H[K[57;18H34L, 986C appended
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/1[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/1" [57;18H[K[57;18H16L, 304C appended[57;18H[K[57;18H17L, 326C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/2[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/2"' -c 'breakadd file 8 /tmp/
[56;87Hv[57;1HQMVUnP/1' -S /tmp/vQMVUnP/1[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/2" [57;18H[K[57;18H3L, 6C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/3[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/3" [57;18H[K[57;18H6L, 127C appended[57;18H[K[57;18H7L, 149C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/4[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/4"' -c 'breakadd file 4 /tmp/
[56;87Hv[57;1HQMVUnP/3' -S /tmp/vQMVUnP/3[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/4" [57;18H[K[57;18H1L, 5C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/5[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/5" [57;18H[K[57;18H21L, 486C appended[57;18H[K[57;18H22L, 508C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/6[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/6"' -c 'breakadd func 7 F' -S
/tmp/vQMVUnP/5[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/6" 3L, 18C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/7[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/7" [57;18H[K[57;18H13L, 364C appended[57;18H[K[57;18H14L, 386C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/8[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/8"' -c 'breakadd func 3 G' -S
/tmp/vQMVUnP/7[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/8" 1L, 9C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  18: OK (67224583)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/9[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/9" [57;18H[K[57;18H12L, 201C appended[57;18H[K[57;18H13L, 223C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/10[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/10"' -S /tmp/vQMVUnP/9[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/10"[57;19H[K[57;19H2L, 4C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/11[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/11" [57;19H[K[57;19H12L, 205C appended[57;19H[K[57;19H13L, 227C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/12[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/12"' -S /tmp/vQMVUnP/11[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/12"[57;19H[K[57;19H2L, 7C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/13[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/13" [57;19H[K[57;19H6L, 122C appended[57;19H[K[57;19H7L, 144C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/14[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/14"' -S /tmp/vQMVUnP/13[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/14"[57;19H[K[57;19H1L, 5C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/15[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/15" [57;19H[K[57;19H8L, 176C appended[57;19H[K[57;19H9L, 198C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/16[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/16"' -S /tmp/vQMVUnP/15[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/16"[57;19H[K[57;19H1L, 6C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/17[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/17" [57;19H[K[57;19H10L, 215C appended[57;19H[K[57;19H11L, 237C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/18[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/18"' -S /tmp/vQMVUnP/17[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/18"[57;19H[K[57;19H1L, 8C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/19[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/19" [57;19H[K[57;19H7L, 149C appended[57;19H[K[57;19H8L, 171C[57;19H[K[57;19H8L, 170C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/20[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/20"' -S /tmp/vQMVUnP/19[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/20"[57;19H[K[57;19H1L, 9C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  19: OK (69275973)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/21[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/21" [57;19H[K[57;19H9L, 135C appended[57;19H[K[57;19H10L, 157C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/22[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/22"' -S /tmp/vQMVUnP/21[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/22"[57;19H[K[57;19H2L, 4C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/23[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/23" [57;19H[K[57;19H10L, 155C appended[57;19H[K[57;19H11L, 177C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/24[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/24"' -S /tmp/vQMVUnP/23[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/24"[57;19H[K[57;19H3L, 8C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/25[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/25" [57;19H[K[57;19H12L, 204C appended[57;19H[K[57;19H13L, 226C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/26[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/26"' -S /tmp/vQMVUnP/25[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/26"[57;19H[K[57;19H4L, 18C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/27[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/27" [57;19H[K[57;19H12L, 214C appended[57;19H[K[57;19H13L, 236C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/28[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/28"' -S /tmp/vQMVUnP/27[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/28"[57;19H[K[57;19H4L, 22C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/29[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/29" [57;19H[K[57;19H12L, 211C appended[57;19H[K[57;19H13L, 233C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/30[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/30"' -S /tmp/vQMVUnP/29[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/30"[57;19H[K[57;19H3L, 22C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/31[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/31" [57;19H[K[57;19H14L, 263C appended[57;19H[K[57;19H15L, 285C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/32[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/32"' -S /tmp/vQMVUnP/31[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/32"[57;19H[K[57;19H4L, 34C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/33[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/33" [57;19H[K[57;19H14L, 277C appended[57;19H[K[57;19H15L, 299C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/34[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/34"' -S /tmp/vQMVUnP/33[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/34"[57;19H[K[57;19H4L, 40C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  20: OK (1874575085)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/35[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/35" [57;19H[K[57;19H58L, 1022C appended[57;19H[K[57;19H59L, 1044C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/36[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/36"' -S /tmp/vQMVUnP/35[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/36"[57;19H[K[57;19H9L, 56C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  21: OK (147932225)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/37[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/37" [57;19H[K[57;19H23L, 418C appended[57;19H[K[57;19H24L, 440C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/38[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/38"' -S /tmp/vQMVUnP/37[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/38"[57;19H[K[57;19H1L, 2C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/39[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/39" [57;19H[K[57;19H23L, 437C appended[57;19H[K[57;19H24L, 459C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/40[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/40"' -c 'breakadd func 2 Inte
[56;87Hr[57;1Hrupt' -S /tmp/vQMVUnP/39[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/40" [57;19H[K[57;19H1L, 3C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/41[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/41" [57;19H[K[57;19H21L, 386C appended[57;19H[K[57;19H22L, 408C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/42[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/42"' -S /tmp/vQMVUnP/41[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/42"[57;19H[K[57;19H1L, 5C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  22: OK (4161)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/43[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/43" [57;19H[K[57;19H25L, 432C appended[57;19H[K[57;19H26L, 454C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/44[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/44"' -S /tmp/vQMVUnP/43[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/44"[57;19H[K[57;19H3L, 8C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  23: OK (49)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/45[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/45" [57;19H[K[57;19H16L, 392C appended[57;19H[K[57;19H17L, 414C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/46[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/46"' -S /tmp/vQMVUnP/45[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/46"[57;19H[K[57;19H3L, 7C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  24: OK (41)
*** Test  25: OK (260177811)
*** Test  26: OK (1681500476)
*** Test  27: OK (1996459)
   function F()
1      try
2[10CXpath 1[33C" X: 1
3[10Ctry
4[14CXpath 2[29C" X: 2
5[14Creturn
6[14CXpath 4[29C" X: 0
7[10Cfinally
8[14CXpath 8[29C" X: 8
9[10Cendtry
10[9CXpath 16[32C" X: 0
11     finally
12[9CXpath 32[32C" X: 32
13     endtry
14     Xpath 64[36C" X: 0
   endfunction[42;1H"/tmp/vQMVUnP/47"[43;1H[K[44;1H[K[45;1H[K[46;1H[K[47;1H[K[48;1H[K[49;1H[K[50;1H[K[51;1H[K[52;1H[K[53;1H[K[54;1H[K[55;1H[K[56;1H[K[57;4H[K[42;19H[noeol] 17L, 552C
14 substitutions on 14 lines
Pattern not found: ^\s*$"/tmp/vQMVUnP/47" [44;20H[K[44;19H14L, 502C written"test49.in" [44;13H[K[44;13H32L, 705C
   function G()
1      try
2[10CXpath 128[31C" X: 128
3[10Creturn
4[10CXpath 256[31C" X: 0
5      finally
6[10CXpath 512[31C" X: 512
7[10Ccall F()
8[10CXpath 1024[30C" X: 1024
9      endtry
10     Xpath 2048[34C" X: 0
   endfunction[45;1H"/tmp/vQMVUnP/48"[46;1H[K[47;1H[K[48;1H[K[49;1H[K[50;1H[K[51;1H[K[52;1H[K[53;1H[K[54;1H[K[55;1H[K[56;4H[K[45;19H[noeol] 13L, 406C
10 substitutions on 10 lines
Pattern not found: ^\s*$"/tmp/vQMVUnP/48" [47;20H[K[47;19H10L, 378C written"test49.in" [47;13H[K[47;13H32L, 705C
   function H()
1      try
2[10CXpath 4096[30C" X: 4096
3[10Ccall G()
4[10CXpath 8192[30C" X: 8192
5      finally
6[10CXpath 16384[29C" X: 16384
7[10Creturn
8[10CXpath 32768[29C" X: 0
9      endtry
10     Xpath 65536[33C" X: 0
   endfunction[46;1H"/tmp/vQMVUnP/49"[47;1H[K[48;1H[K[49;1H[K[50;1H[K[51;1H[K[52;1H[K[53;1H[K[54;1H[K[55;1H[K[56;1H[K[57;4H[K[46;19H[noeol] 13L, 409C
10 substitutions on 10 lines
Pattern not found: ^\s*$"/tmp/vQMVUnP/49" [48;20H[K[48;19H10L, 381C written"test49.in" [48;13H[K[48;13H32L, 705C
*** Test  28: OK (1996459)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/50[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[50;1H[K[50;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/50" [50;19H[K[50;19H39L, 721C appended[50;19H[K[50;19H40L, 743C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/51[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[52;1H:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Extr[53;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/51"' -S /tmp/vQMVUnP/50[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[53;1H"/tmp/vQMVUnP/51"[53;19H[K[53;19H6L, 21C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [53;13H[K[53;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/52[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[54;1H[K[54;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/52" [54;19H[K[54;19H23L, 509C appended[54;19H[K[54;19H24L, 531C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/53[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[56;1H:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Extr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/53"' -S /tmp/vQMVUnP/52[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/53"[57;19H[K[57;19H4L, 34C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  29: OK (170428555)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/54[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/54" [57;19H[K[57;19H60L, 1101C appended[57;19H[K[57;19H61L, 1123C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/55[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo'
-c 'let ExtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/55"' -c 'breakadd fu
[56;87Hn[57;1Hc 3 F' -c 'breakadd file 19 /tmp/vQMVUnP/54' -c 'breakadd file 31 /tmp/vQMVUnP/54' -S
[56;87H/[57;1Htmp/vQMVUnP/54[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/55" 16L, 89C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  30: OK (190905173)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/56[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/56" [57;19H[K[57;19H60L, 1122C appended[57;19H[K[57;19H61L, 1144C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/57[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/57"' -S /tmp/vQMVUnP/56[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/57"[57;19H[K[57;19H16L, 89C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  31: OK (190905173)
*** Test  32: OK (354833067)
*** Test  33: OK (1216907538)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/58[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/58" [57;19H[K[57;19H63L, 1288C appended[57;19H[K[57;19H64L, 1310C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/59[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=
[56;87Hn[57;1Hviminfo' -c 'let ExtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/59"' -c 'br
[56;87He[57;1Hakadd func 16 C' -S /tmp/vQMVUnP/58[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/59" [57;19H[K[57;19H17L, 127C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  34: OK (2146584868)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/60[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/60" [57;19H[K[57;19H63L, 1285C appended[57;19H[K[57;19H64L, 1307C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/61[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=
[56;87Hn[57;1Hviminfo' -c 'let ExtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/61"' -c 'br
[56;87He[57;1Hakadd func 16 B' -S /tmp/vQMVUnP/60[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/61" [57;19H[K[57;19H17L, 127C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  35: OK (2146584868)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/62[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/62" [57;19H[K[57;19H66L, 1430C appended[57;19H[K[57;19H67L, 1452C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/63[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nvi
[56;87Hm[57;1Hinfo' -c 'let ExtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/63"' -c 'break
[56;87Ha[57;1Hdd func 16 R' -S /tmp/vQMVUnP/62[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/63" [57;19H[K[57;19H9L, 81C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  36: OK (1071644672)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/64[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/64" [57;19H[K[57;19H73L, 1488C appended[57;19H[K[57;19H74L, 1510C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/65[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/65"' -c 'breakadd func 16 F' -S
[56;87H/[57;1Htmp/vQMVUnP/64[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/65" 9L, 81C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  37: OK (1071644672)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/66[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/66" [57;19H[K[57;19H82L, 1519C appended[57;19H[K[57;19H83L, 1541C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/67[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=
[56;87Hn[57;1Hviminfo' -c 'let ExtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/67"' -c 'br
[56;87He[57;1Hakadd func 16 E' -S /tmp/vQMVUnP/66[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/67" [57;19H[K[57;19H8L, 63C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  38: OK (357908480)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/68[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/68" [57;19H[K[57;19H83L, 1538C appended[57;19H[K[57;19H84L, 1560C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/69[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debu
[56;87Hg[57;1Hgreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let ExtraVimResult = "/tm
[56;87Hp[57;1H/vQMVUnP/69"' -c 'breakadd func 16 I' -c 'breakadd func 22 I' -S /tmp/vQMVUnP/68[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/69" [57;19H[K[57;19H8L, 63C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  39: OK (357908480)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/70[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/70" [57;19H[K[57;19H82L, 1519C appended[57;19H[K[57;19H83L, 1541C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/71[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=
[56;87Hn[57;1Hviminfo' -c 'let ExtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/71"' -c 'br
[56;87He[57;1Hakadd func 16 T' -S /tmp/vQMVUnP/70[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/71" [57;19H[K[57;19H8L, 63C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  40: OK (357908480)
*** Test  41: OK (3076095)
*** Test  42: OK (1505155949)
*** Test  43: OK (1157763329)
*** Test  44: OK (1031761407)
*** Test  45: OK (1157763329)
*** Test  46: OK (739407)
*** Test  47: OK (371213935)
*** Test  48: OK (756255461)
*** Test  49: OK (179000669)
   function C()
1      try
2[10CXpath 1[33C" X: 1
3[10Cthrow "arrgh"
4[10CXpath 2[33C" X: 0
5      catch /arrgh/
6[10CXpath 4[33C" X: 4
7      endtry
8      Xpath 8[37C" X: 8
   endfunction[48;1H"/tmp/vQMVUnP/72"[49;1H[K[50;1H[K[51;1H[K[52;1H[K[53;1H[K[54;1H[K[55;1H[K[56;1H[K[57;4H[K[48;19H[noeol] 11L, 334C
8 substitutions on 8 lines
Pattern not found: ^\s*$"/tmp/vQMVUnP/72" [50;20H[K[50;19H8L, 295C written"test49.in" [50;13H[K[50;13H32L, 705C
   function T1()
1      XloopNEXT
2      try
3[10CXloop 1[33C" X: 16 + 16*16
4[10Cthrow "arrgh"
5[10CXloop 2[33C" X: 0
6      finally
7[10CXloop 4[33C" X: 64 + 64*16
8      endtry
9      Xloop 8[37C" X: 0
   endfunction[47;1H"/tmp/vQMVUnP/73"[48;1H[K[49;1H[K[50;1H[K[51;1H[K[52;1H[K[53;1H[K[54;1H[K[55;1H[K[56;1H[K[57;4H[K[47;19H[noeol] 12L, 364C
9 substitutions on 9 lines
Pattern not found: ^\s*$"/tmp/vQMVUnP/73" [49;20H[K[49;19H9L, 323C written"test49.in" [49;13H[K[49;13H32L, 705C
   function T2()
1      try
2[10CXpath 4096[30C" X: 4096
3[10Ccall T1()
4[10CXpath 8192[30C" X: 0
5      finally
6[10CXpath 16384[29C" X: 16384
7      endtry
8      Xpath 32768[33C" X: 0
   endfunction[48;1H"/tmp/vQMVUnP/74"[49;1H[K[50;1H[K[51;1H[K[52;1H[K[53;1H[K[54;1H[K[55;1H[K[56;1H[K[57;4H[K[48;19H[noeol] 11L, 332C
8 substitutions on 8 lines
Pattern not found: ^\s*$"/tmp/vQMVUnP/74" [50;20H[K[50;19H8L, 305C written"test49.in" [50;13H[K[50;13H32L, 705C
*** Test  50: OK (363550045)
*** Test  51: OK (40744667)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/76[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[53;1H[K[53;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/76" [53;19H[K[53;19H2L, 41C appended[53;19H[K[53;19H3L, 63C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/77[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[55;1H:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMVU[56;1HnP/75' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let ExtraV[57;1HimResult = "/tmp/vQMVUnP/77"' -S /tmp/vQMVUnP/76[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/77" [57;19H[K[57;19H1L, 2C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/75" [57;19H[K[57;19H8L, 182C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/78[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/78" [57;19H[K[57;19H7L, 115C appended[57;19H[K[57;19H8L, 137C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/79[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/75' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/79"' -S /tmp/vQMVUnP/78[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/79" [57;19H[K[57;19H1L, 2C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/75" [57;19H[K[57;19H8L, 181C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/80[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/80" [57;19H[K[57;19H12L, 180C appended[57;19H[K[57;19H13L, 202C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/81[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/75' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/81"' -S /tmp/vQMVUnP/80[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/81" [57;19H[K[57;19H2L, 8C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/75" [57;19H[K[57;19H10L, 209C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/82[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/82" [57;19H[K[57;19H8L, 139C appended[57;19H[K[57;19H9L, 161C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/83[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/75' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/83"' -S /tmp/vQMVUnP/82[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/83" [57;19H[K[57;19H2L, 11C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/75" [57;19H[K[57;19H10L, 217C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/84[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/84" [57;19H[K[57;19H5L, 87C appended[57;19H[K[57;19H6L, 109C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/85[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/v
[56;87HQ[57;1HMVUnP/75' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Ex
[56;87Ht[57;1HraVimResult = "/tmp/vQMVUnP/85"' -c 'breakadd file 4 /tmp/vQMVUnP/84' -S /tmp/vQMVUnP/
[56;87H8[57;1H4[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/85" 1L, 7C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/75" [57;19H[K[57;19H[noeol] 9L, 202C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/86[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/86" [57;19H[K[57;19H7L, 189C appended[57;19H[K[57;19H8L, 211C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/87[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/75' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/87"' -S /tmp/vQMVUnP/86[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/87" [57;19H[K[57;19H1L, 8C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/75" [57;19H[K[57;19H9L, 252C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/88[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/88" [57;19H[K[57;19H7L, 199C appended[57;19H[K[57;19H8L, 221C[57;19H[K[57;19H8L, 220C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/89[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/75' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/89"' -S /tmp/vQMVUnP/88[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/89" [57;19H[K[57;19H1L, 10C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/75" [57;19H[K[57;19H9L, 214C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  52: OK (1247112011)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/91[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/91" [57;19H[K[57;19H1L, 10C appended[57;19H[K[57;19H2L, 32C[57;19H[K[57;19H2L, 31C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/92[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/92"' -S /tmp/vQMVUnP/91[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/92" [57;19H[K[57;19H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 154C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/93[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/93" [57;19H[K[57;19H3L, 39C appended[57;19H[K[57;19H4L, 61C
3 substitutions on 3 lines"/tmp/vQMVUnP/93" [57;20H[K[57;19H4L, 58C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/94[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/94"' -S /tmp/vQMVUnP/93[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/94" [57;19H[K[57;19H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 158C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/95[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/95" [57;19H[K[57;19H4L, 45C appended[57;19H[K[57;19H5L, 67C
4 substitutions on 4 lines"/tmp/vQMVUnP/95" [57;20H[K[57;19H5L, 63C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/96[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/96"' -S /tmp/vQMVUnP/95[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/96" [57;19H[K[57;19H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 158C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/97[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/97" [57;19H[K[57;19H3L, 33C appended[57;19H[K[57;19H4L, 55C
3 substitutions on 3 lines"/tmp/vQMVUnP/97" [57;20H[K[57;19H4L, 52C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/98[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/98"' -S /tmp/vQMVUnP/97[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/98" [57;19H[K[57;19H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 158C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/99[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/99" [57;19H[K[57;19H5L, 65C appended[57;19H[K[57;19H6L, 87C
5 substitutions on 5 lines"/tmp/vQMVUnP/99" [57;20H[K[57;19H6L, 82C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/100[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/100"' -S /tmp/vQMVUnP/99[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/100" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 158C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/101[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/101" [57;20H[K[57;20H1L, 9C appended[57;20H[K[57;20H2L, 31C[57;20H[K[57;20H2L, 30C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/102[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/102"' -S /tmp/vQMVUnP/101[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/102" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 153C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/103[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/103" [57;20H[K[57;20H3L, 38C appended[57;20H[K[57;20H4L, 60C
3 substitutions on 3 lines"/tmp/vQMVUnP/103"[57;20H[K[57;20H4L, 57C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/104[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/104"' -S /tmp/vQMVUnP/103[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/104" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 157C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/105[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/105" [57;20H[K[57;20H4L, 44C appended[57;20H[K[57;20H5L, 66C
4 substitutions on 4 lines"/tmp/vQMVUnP/105"[57;20H[K[57;20H5L, 62C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/106[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/106"' -S /tmp/vQMVUnP/105[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/106" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 157C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/107[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/107" [57;20H[K[57;20H3L, 32C appended[57;20H[K[57;20H4L, 54C
3 substitutions on 3 lines"/tmp/vQMVUnP/107"[57;20H[K[57;20H4L, 51C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/108[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/108"' -S /tmp/vQMVUnP/107[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/108" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 157C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/109[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/109" [57;20H[K[57;20H5L, 64C appended[57;20H[K[57;20H6L, 86C
5 substitutions on 5 lines"/tmp/vQMVUnP/109"[57;20H[K[57;20H6L, 81C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/110[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/110"' -S /tmp/vQMVUnP/109[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/110" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 157C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/111[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/111" [57;20H[K[57;20H1L, 11C appended[57;20H[K[57;20H2L, 33C[57;20H[K[57;20H2L, 32C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/112[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/112"' -S /tmp/vQMVUnP/111[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/112" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 157C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/113[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/113" [57;20H[K[57;20H3L, 40C appended[57;20H[K[57;20H4L, 62C
3 substitutions on 3 lines"/tmp/vQMVUnP/113"[57;20H[K[57;20H4L, 59C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/114[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/114"' -S /tmp/vQMVUnP/113[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/114" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 161C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/115[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/115" [57;20H[K[57;20H4L, 46C appended[57;20H[K[57;20H5L, 68C
4 substitutions on 4 lines"/tmp/vQMVUnP/115"[57;20H[K[57;20H5L, 64C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/116[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/116"' -S /tmp/vQMVUnP/115[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/116" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 161C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/117[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/117" [57;20H[K[57;20H3L, 34C appended[57;20H[K[57;20H4L, 56C
3 substitutions on 3 lines"/tmp/vQMVUnP/117"[57;20H[K[57;20H4L, 53C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/118[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/118"' -S /tmp/vQMVUnP/117[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/118" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 161C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/119[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/119" [57;20H[K[57;20H5L, 66C appended[57;20H[K[57;20H6L, 88C
5 substitutions on 5 lines"/tmp/vQMVUnP/119"[57;20H[K[57;20H6L, 83C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/120[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/120"' -S /tmp/vQMVUnP/119[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/120" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 161C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/121[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/121" [57;20H[K[57;20H4L, 37C appended[57;20H[K[57;20H5L, 59C
4 substitutions on 4 lines"/tmp/vQMVUnP/121"[57;20H[K[57;20H5L, 55C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/122[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/122"' -S /tmp/vQMVUnP/121[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/122" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 150C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/123[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/123" [57;20H[K[57;20H4L, 41C appended[57;20H[K[57;20H5L, 63C
4 substitutions on 4 lines"/tmp/vQMVUnP/123"[57;20H[K[57;20H5L, 59C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/124[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/90' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extra
[56;87HV[57;1HimResult = "/tmp/vQMVUnP/124"' -S /tmp/vQMVUnP/123[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/124" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/90" [57;19H[K[57;19H6L, 159C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  53: OK (131071)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/126[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/126" [57;20H[K[57;20H1L, 13C appended[57;20H[K[57;20H2L, 35C[57;20H[K[57;20H2L, 34C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/127[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/125' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/127"' -S /tmp/vQMVUnP/126[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/127" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/125" [57;20H[K[57;20H6L, 164C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/128[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/128" [57;20H[K[57;20H3L, 36C appended[57;20H[K[57;20H4L, 58C
3 substitutions on 3 lines"/tmp/vQMVUnP/128"[57;20H[K[57;20H4L, 55C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/129[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/125' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/129"' -S /tmp/vQMVUnP/128[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/129" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/125" [57;20H[K[57;20H6L, 168C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/130[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/130" [57;20H[K[57;20H3L, 38C appended[57;20H[K[57;20H4L, 60C
3 substitutions on 3 lines"/tmp/vQMVUnP/130"[57;20H[K[57;20H4L, 57C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/131[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/125' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/131"' -S /tmp/vQMVUnP/130[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/131" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/125" [57;20H[K[57;20H6L, 154C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/132[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/132" [57;20H[K[57;20H4L, 48C appended[57;20H[K[57;20H5L, 70C
4 substitutions on 4 lines"/tmp/vQMVUnP/132"[57;20H[K[57;20H5L, 66C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/133[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/125' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/133"' -S /tmp/vQMVUnP/132[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/133" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/125" [57;20H[K[57;20H6L, 168C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/134[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/134" [57;20H[K[57;20H4L, 53C appended[57;20H[K[57;20H5L, 75C
4 substitutions on 4 lines"/tmp/vQMVUnP/134"[57;20H[K[57;20H5L, 71C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/135[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/125' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/135"' -S /tmp/vQMVUnP/134[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/135" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/125" [57;20H[K[57;20H6L, 155C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/136[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/136" [57;20H[K[57;20H5L, 62C appended[57;20H[K[57;20H6L, 84C
5 substitutions on 5 lines"/tmp/vQMVUnP/136"[57;20H[K[57;20H6L, 79C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/137[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/125' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/137"' -S /tmp/vQMVUnP/136[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/137" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/125" [57;20H[K[57;20H6L, 155C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/138[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/138" [57;20H[K[57;20H5L, 64C appended[57;20H[K[57;20H6L, 86C
5 substitutions on 5 lines"/tmp/vQMVUnP/138"[57;20H[K[57;20H6L, 81C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/139[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/125' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/139"' -S /tmp/vQMVUnP/138[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/139" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/125" [57;20H[K[57;20H6L, 154C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/140[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/140" [57;20H[K[57;20H3L, 36C appended[57;20H[K[57;20H4L, 58C
3 substitutions on 3 lines"/tmp/vQMVUnP/140"[57;20H[K[57;20H4L, 55C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/141[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/125' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/141"' -S /tmp/vQMVUnP/140[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/141" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/125" [57;20H[K[57;20H6L, 168C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/142[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/142" [57;20H[K[57;20H5L, 67C appended[57;20H[K[57;20H6L, 89C
5 substitutions on 5 lines"/tmp/vQMVUnP/142"[57;20H[K[57;20H6L, 84C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/143[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/125' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/143"' -S /tmp/vQMVUnP/142[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/143" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/125" [57;20H[K[57;20H6L, 167C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/144[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/144" [57;20H[K[57;20H5L, 68C appended[57;20H[K[57;20H6L, 90C
5 substitutions on 5 lines"/tmp/vQMVUnP/144"[57;20H[K[57;20H6L, 85C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/145[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/125' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/145"' -S /tmp/vQMVUnP/144[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/145" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/125" [57;20H[K[57;20H6L, 168C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/146[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/146" [57;20H[K[57;20H7L, 95C appended[57;20H[K[57;20H8L, 117C
7 substitutions on 7 lines"/tmp/vQMVUnP/146"[57;20H[K[57;20H8L, 110C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/147[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/125' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/147"' -S /tmp/vQMVUnP/146[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/147" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/125" [57;20H[K[57;20H6L, 167C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  54: OK (2047)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/149[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/149" [57;20H[K[57;20H1L, 13C appended[57;20H[K[57;20H2L, 35C[57;20H[K[57;20H2L, 34C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/150[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/148' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/150"' -S /tmp/vQMVUnP/149[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/150" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/148" [57;20H[K[57;20H6L, 172C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/151[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/151" [57;20H[K[57;20H3L, 36C appended[57;20H[K[57;20H4L, 58C
3 substitutions on 3 lines"/tmp/vQMVUnP/151"[57;20H[K[57;20H4L, 55C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/152[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/148' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/152"' -S /tmp/vQMVUnP/151[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/152" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/148" [57;20H[K[57;20H6L, 176C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/153[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/153" [57;20H[K[57;20H4L, 48C appended[57;20H[K[57;20H5L, 70C
4 substitutions on 4 lines"/tmp/vQMVUnP/153"[57;20H[K[57;20H5L, 66C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/154[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/148' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/154"' -S /tmp/vQMVUnP/153[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/154" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/148" [57;20H[K[57;20H6L, 176C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/155[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/155" [57;20H[K[57;20H3L, 36C appended[57;20H[K[57;20H4L, 58C
3 substitutions on 3 lines"/tmp/vQMVUnP/155"[57;20H[K[57;20H4L, 55C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/156[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/148' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/156"' -S /tmp/vQMVUnP/155[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/156" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/148" [57;20H[K[57;20H6L, 176C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/157[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/157" [57;20H[K[57;20H5L, 68C appended[57;20H[K[57;20H6L, 90C
5 substitutions on 5 lines"/tmp/vQMVUnP/157"[57;20H[K[57;20H6L, 85C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/158[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/148' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/158"' -S /tmp/vQMVUnP/157[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/158" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/148" [57;20H[K[57;20H6L, 176C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/159[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/159" [57;20H[K[57;20H1L, 10C appended[57;20H[K[57;20H2L, 32C[57;20H[K[57;20H2L, 31C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/160[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/148' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/160"' -S /tmp/vQMVUnP/159[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/160" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/148" [57;20H[K[57;20H6L, 166C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/161[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/161" [57;20H[K[57;20H3L, 33C appended[57;20H[K[57;20H4L, 55C
3 substitutions on 3 lines"/tmp/vQMVUnP/161"[57;20H[K[57;20H4L, 52C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/162[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/148' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/162"' -S /tmp/vQMVUnP/161[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/162" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/148" [57;20H[K[57;20H6L, 170C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/163[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/163" [57;20H[K[57;20H4L, 45C appended[57;20H[K[57;20H5L, 67C
4 substitutions on 4 lines"/tmp/vQMVUnP/163"[57;20H[K[57;20H5L, 63C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/164[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/148' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/164"' -S /tmp/vQMVUnP/163[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/164" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/148" [57;20H[K[57;20H6L, 170C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/165[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/165" [57;20H[K[57;20H3L, 33C appended[57;20H[K[57;20H4L, 55C
3 substitutions on 3 lines"/tmp/vQMVUnP/165"[57;20H[K[57;20H4L, 52C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/166[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/148' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/166"' -S /tmp/vQMVUnP/165[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/166" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/148" [57;20H[K[57;20H6L, 170C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/167[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/167" [57;20H[K[57;20H5L, 65C appended[57;20H[K[57;20H6L, 87C
5 substitutions on 5 lines"/tmp/vQMVUnP/167"[57;20H[K[57;20H6L, 82C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/168[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/148' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/168"' -S /tmp/vQMVUnP/167[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/168" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/148" [57;20H[K[57;20H6L, 170C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  55: OK (1023)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/170[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/170" [57;20H[K[57;20H1L, 11C appended[57;20H[K[57;20H2L, 33C[57;20H[K[57;20H2L, 32C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/171[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/169' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/171"' -S /tmp/vQMVUnP/170[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/171" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/169" [57;20H[K[57;20H6L, 158C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/172[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/172" [57;20H[K[57;20H3L, 34C appended[57;20H[K[57;20H4L, 56C
3 substitutions on 3 lines"/tmp/vQMVUnP/172"[57;20H[K[57;20H4L, 53C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/173[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/169' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/173"' -S /tmp/vQMVUnP/172[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/173" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/169" [57;20H[K[57;20H6L, 162C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/174[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/174" [57;20H[K[57;20H3L, 40C appended[57;20H[K[57;20H4L, 62C
3 substitutions on 3 lines"/tmp/vQMVUnP/174"[57;20H[K[57;20H4L, 59C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/175[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/169' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/175"' -S /tmp/vQMVUnP/174[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/175" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/169" [57;20H[K[57;20H6L, 162C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/176[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/176" [57;20H[K[57;20H3L, 32C appended[57;20H[K[57;20H4L, 54C
3 substitutions on 3 lines"/tmp/vQMVUnP/176"[57;20H[K[57;20H4L, 51C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/177[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/169' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/177"' -S /tmp/vQMVUnP/176[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/177" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/169" [57;20H[K[57;20H6L, 152C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/178[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/178" [57;20H[K[57;20H3L, 35C appended[57;20H[K[57;20H4L, 57C
3 substitutions on 3 lines"/tmp/vQMVUnP/178"[57;20H[K[57;20H4L, 54C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/179[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/169' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/179"' -S /tmp/vQMVUnP/178[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/179" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/169" [57;20H[K[57;20H6L, 155C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/180[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/180" [57;20H[K[57;20H4L, 44C appended[57;20H[K[57;20H5L, 66C
4 substitutions on 4 lines"/tmp/vQMVUnP/180"[57;20H[K[57;20H5L, 62C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/181[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/169' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/181"' -S /tmp/vQMVUnP/180[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/181" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/169" [57;20H[K[57;20H6L, 152C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/182[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/182" [57;20H[K[57;20H4L, 47C appended[57;20H[K[57;20H5L, 69C
4 substitutions on 4 lines"/tmp/vQMVUnP/182"[57;20H[K[57;20H5L, 65C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/183[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/169' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/183"' -S /tmp/vQMVUnP/182[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/183" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/169" [57;20H[K[57;20H6L, 155C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/184[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/184" [57;20H[K[57;20H5L, 64C appended[57;20H[K[57;20H6L, 86C
5 substitutions on 5 lines"/tmp/vQMVUnP/184"[57;20H[K[57;20H6L, 81C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/185[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/169' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/185"' -S /tmp/vQMVUnP/184[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/185" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/169" [57;20H[K[57;20H6L, 152C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/186[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/186" [57;20H[K[57;20H5L, 67C appended[57;20H[K[57;20H6L, 89C
5 substitutions on 5 lines"/tmp/vQMVUnP/186"[57;20H[K[57;20H6L, 84C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/187[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'au VimLeave * redir END' -c 'redir! >/tmp/vQMV
[56;87HU[57;1HnP/169' -c 'debuggreedy|set viminfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let Extr
[56;87Ha[57;1HVimResult = "/tmp/vQMVUnP/187"' -S /tmp/vQMVUnP/186[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/187" [57;20H[K[57;20H0L, 0C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/169" [57;20H[K[57;20H6L, 155C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  56: OK (511)
   function FuncException()
1      let g:exception = v:exception
   endfunction[55;1H"/tmp/vQMVUnP/188" [55;20H[K[56;1H[K[57;4H[K[55;20H[noeol] 4L, 80C
Pattern not found: ^\s*$"/tmp/vQMVUnP/188"[56;20H[K[56;20H1L, 36C written"test49.in" [56;13H[K[56;13H32L, 705C
   function FuncThrowpoint()
1      let g:throwpoint = v:throwpoint
   endfunction[55;1H"/tmp/vQMVUnP/189" [55;20H[K[56;1H[K[57;4H[K[55;20H[noeol] 4L, 83C
Pattern not found: ^\s*$"/tmp/vQMVUnP/189"[56;20H[K[56;20H1L, 38C written"test49.in" [56;13H[K[56;13H32L, 705C
   function T(arg, line)
1      if a:line == 2
2[10Cthrow a:arg[13C" in line 2
3      elseif a:line == 4
4[10Cthrow a:arg[13C" in line 4
5      elseif a:line == 6
6[10Cthrow a:arg[13C" in line 6
7      elseif a:line == 8
8[10Cthrow a:arg[13C" in line 8
9      endif
   endfunction[47;1H"/tmp/vQMVUnP/190"[47;20H[K[48;1H[K[49;1H[K[50;1H[K[51;1H[K[52;1H[K[53;1H[K[54;1H[K[55;1H[K[56;1H[K[57;4H[K[47;20H[noeol] 12L, 341C
9 substitutions on 9 lines
8 substitutions on 8 lines
Pattern not found: ^\s*$"/tmp/vQMVUnP/190"[50;20H[K[50;20H9L, 292C written"test49.in" [50;13H[K[50;13H32L, 705C
   function G(arg, line)
1      call T(a:arg, a:line)
   endfunction[51;1H"/tmp/vQMVUnP/191"[51;20H[K[52;1H[K[53;4H[K[51;20H[noeol] 4L, 69C
Pattern not found: ^\s*$"/tmp/vQMVUnP/191"[52;20H[K[52;20H1L, 30C written"test49.in" [52;13H[K[52;13H32L, 705C
   function F(arg, line)
1      call G(a:arg, a:line)
   endfunction[53;1H"/tmp/vQMVUnP/192"[53;20H[K[54;1H[K[55;4H[K[53;20H[noeol] 4L, 69C
Pattern not found: ^\s*$"/tmp/vQMVUnP/192"[54;20H[K[54;20H1L, 30C written"test49.in" [54;13H[K[54;13H32L, 705C
*** Test  57: OK (2147450880)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/193[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[56;1H[K[56;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/193" [56;20H[K[56;20H87L, 1700C appended[56;20H[K[56;20H88L, 1722C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/194[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/194"' -c 'breakadd func 4 T'
[56;87H-[57;1HS /tmp/vQMVUnP/193[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/194" 8L, 36C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  58: OK (624945)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/195[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/195" [57;20H[K[57;20H293L, 5789C appended[57;20H[K[57;20H294L, 5811C
3 substitutions on 3 lines"/tmp/vQMVUnP/195"[57;20H[K[57;20H294L, 5808C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/196[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'l
[56;87He[57;1Ht ExtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/196"' -c 'breakadd file 11
[56;87H5[57;2H/tmp/vQMVUnP/195' -c 'breakadd file 225 /tmp/vQMVUnP/195' -S /tmp/vQMVUnP/195[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"[15C6"[57;20H[K[57;20H28L, 162C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  59: OK (2038431743)"/n/o/n/w/r/i/t/a/b/l/e/_/f/i/l/e""/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/197[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/197" [57;20H[K[57;20H33L, 765C appended[57;20H[K[57;20H34L, 787C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/198[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/198"' -c 'breakadd file 7 /tm
[56;87Hp[57;1H/vQMVUnP/197' -S /tmp/vQMVUnP/197[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/198" [57;20H[K[57;20H3L, 27C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  60: OK (311511339)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/199[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/199" [57;20H[K[57;20H115L, 2272C appended[57;20H[K[57;20H116L, 2294C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/200[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nvi
[56;87Hm[57;1Hinfo' -c 'let ExtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/200"' -c 'brea
[56;87Hk[57;1Hadd file 8 /tmp/vQMVUnP/199' -c 'breakadd file 36 /tmp/vQMVUnP/199' -c 'breakadd file
[56;87H4[57;1H0 /tmp/vQMVUnP/199' -c 'breakadd file 69 /tmp/vQMVUnP/199' -c 'breakadd file 95 /tmp/v
[56;87HQ[57;1HMVUnP/199' -c 'breakadd file 97 /tmp/vQMVUnP/199' -S /tmp/vQMVUnP/199[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/200" [57;20H[K[57;20H14L, 81C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  61: OK (374889517)
   function F()
1      while 1
2      " Missing :endwhile
   endfunction[54;1H"/tmp/vQMVUnP/201"[55;1H[K[56;1H[K[57;4H[K[54;20H[noeol] 5L, 73C
Pattern not found: ^\s*$"/tmp/vQMVUnP/201"[55;20H[K[55;20H2L, 40C written"test49.in" [55;13H[K[55;13H32L, 705C
*** Test  62: OK (286331153)"/i/m/p/o/s/s/i/b/l/e" [56;24H[K[57;1H[1m[37m[41mError detected while processing /sources/vim80/src/testdir/test49.vim:[m
[33mline 5500:[m
[1m[37m[41m"/i/m/p/o/s/s/i/b/l/e" E212: Can't open file for writing[m
*** Test  63: OK (236978127)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/202[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/202" [57;20H[K[57;20H149L, 2828C appended[57;20H[K[57;20H150L, 2850C
6 substitutions on 6 lines"/tmp/vQMVUnP/202"[57;20H[K[57;20H150L, 2844C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/203[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/203"' -c 'breakadd file 63 /t
[56;87Hm[57;1Hp/vQMVUnP/202' -S /tmp/vQMVUnP/202[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/203" [57;20H[K[57;20H16L, 97C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  64: OK (1499645335)
*** Test  65: OK (70187)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/204[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/204" [57;20H[K[57;20H78L, 1520C appended[57;20H[K[57;20H79L, 1542C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/205[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/205"' -c 'breakadd func 8 F'
[56;87H-[57;1HS /tmp/vQMVUnP/204[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/205" 6L, 22C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  66: OK (5464)
*** Test  67: OK (212514423)
*** Test  68: OK (212514423)
*** Test  69: OK (8995471)
*** Test  70: OK (69544277)
*** Test  71: OK (34886997)
*** Test  72: OK (1789569365)
   function F0()
   endfunction
   function F1()
   endfunction
*** Test  73: OK (9032615)"/tmp/vQMVUnP/206" [New File]"test49.in" [57;13H[K[57;13H32L, 705C"/tmp/vQMVUnP/207" [New File]"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  74: OK (224907669)
*** Test  75: OK (2000403408)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/208[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/208" [57;20H[K[57;20H253L, 6369C appended[57;20H[K[57;20H254L, 6391C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/209[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set vim
[56;87Hi[57;1Hnfo+=nviminfo' -c 'let ExtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/209"'
-c 'breakadd func 2 INT' -S /tmp/vQMVUnP/208[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/209" [57;21H[K[57;20H28L, 167C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  76: OK (1610087935)
[1m[37m[41mError detected while processing function ERR:[m
[33mline    2:[m
[1m[37m[41mE492: Not an editor command:     asdf[m
[1m[37m[41mE492: Not an editor command:     asdf[m
[1m[37m[41mE492: Not an editor command:     asdf[m
*** Test  77: OK (1388671)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/210[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/210" [57;20H[K[57;20H161L, 4543C appended[57;20H[K[57;20H162L, 4565C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/211[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/211"' -S /tmp/vQMVUnP/210[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/211" [57;20H[K[57;20H1L, 10C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  78: OK (134217728)
[1m[37m[41mError detected while processing function NEXT:[m
[33mline    1:[m
[1m[37m[41mE121: Undefined variable: novar[m
[1m[37m[41mE15: Invalid expression: novar | Xloop 1[m
[1m[37m[41mE121: Undefined variable: novar[m
[1m[37m[41mE488: Trailing characters[m
[1m[37m[41mE108: No such variable: "novar"[m
[1m[37m[41mE488: Trailing characters[m
[1m[37m[41mE121: Undefined variable: novar[m
[1m[37m[41mE15: Invalid expression: novar[m
[1m[37m[41mE475: Invalid argument: {novar} | Xloop 1[m
[1m[37m[41mE121: Undefined variable: novar[m
[1m[37m[41mE15: Invalid expression:  novar[m
[1m[37m[41mE475: Invalid argument: { novar} | Xloop 1[m
*** Test  79: OK (70288929)
[1m[37m[41mError detected while processing /sources/vim80/src/testdir/test49.vim:[m
[33mline 7985:[m
[1m[37m[41mE584: :elseif after :else: elseif 1 ||| 2[m
[33mline 7995:[m
[1m[37m[41mE584: :elseif after :else: elseif 1 ||| 2[m
[33mline 8003:[m
[1m[37m[41mE582: :elseif without :if: elseif 1 ||| 2[m
[33mline 8011:[m
[1m[37m[41mE582: :elseif without :if:     elseif 1 ||| 2[m
*** Test  80: OK (17895765)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/212[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/212" [57;20H[K[57;20H15L, 272C appended[57;20H[K[57;20H16L, 294C[57;20H[K[57;20H16L, 293C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/213[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/213"' -S /tmp/vQMVUnP/212[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/213" [57;20H[K[57;20H2L, 4C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/214[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/214" [57;20H[K[57;20H12L, 227C appended[57;20H[K[57;20H13L, 249C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/215[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/215"' -c 'breakadd file 8 /tm
[56;87Hp[57;1H/vQMVUnP/214' -S /tmp/vQMVUnP/214[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/215" [57;20H[K[57;20H2L, 8C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  81: OK (387)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/216[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/216" [57;20H[K[57;20H20L, 417C appended[57;20H[K[57;20H21L, 439C[57;20H[K[57;20H21L, 438C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/217[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/217"' -S /tmp/vQMVUnP/216[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/217" [57;20H[K[57;20H1L, 2C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/218[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/218" [57;20H[K[57;20H24L, 480C appended[57;20H[K[57;20H25L, 502C[57;20H[K[57;20H25L, 501C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/219[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/219"' -S /tmp/vQMVUnP/218[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/219" [57;20H[K[57;20H1L, 4C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/220[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/220" [57;20H[K[57;20H17L, 390C appended[57;20H[K[57;20H18L, 412C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/221[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/221"' -c 'breakadd file 7 /tm
[56;87Hp[57;1H/vQMVUnP/220' -S /tmp/vQMVUnP/220[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/221" [57;20H[K[57;20H1L, 6C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/222[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/222" [57;20H[K[57;20H21L, 444C appended[57;20H[K[57;20H22L, 466C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/223[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/223"' -c 'breakadd func 6 I'
[56;87H-[57;1HS /tmp/vQMVUnP/222[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/223" 1L, 8C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  82: OK (8454401)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/224[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/224" [57;20H[K[57;20H17L, 307C appended[57;20H[K[57;20H18L, 329C[57;20H[K[57;20H18L, 328C written"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/225[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let Ext
[56;87Hr[57;1HaVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/225"' -S /tmp/vQMVUnP/224[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/225" [57;20H[K[57;20H3L, 7C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/226[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/226" [57;20H[K[57;20H14L, 266C appended[57;20H[K[57;20H15L, 288C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/227[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'let
[56;87HE[57;1HxtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/227"' -c 'breakadd file 8 /tm
[56;87Hp[57;1H/vQMVUnP/226' -S /tmp/vQMVUnP/226[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/227" [57;20H[K[57;20H3L, 13C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  83: OK (2835)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/228[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/228" [57;20H[K[57;20H154L, 3580C appended[57;20H[K[57;20H155L, 3602C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/229[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c 'l
[56;87He[57;1Ht ExtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/229"' -c 'breakadd func 1
[56;87HI[57;1HNT' -S /tmp/vQMVUnP/228[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/229" [57;20H[K[57;20H18L, 118C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  84: OK (934782101)
TMP"/tmp/vQMVUnP/230" [noeol] 2L, 6C[57;1H[K[57;1H/  "test49.in" 32L, 705C"/n/o/n/e/x/i/s/t/e/n/t"
"/tmp/vQMVUnP/232" 1L, 1C"test49.in" [57;13H[K[57;13H32L, 705C
:!echo XYZ >/tmp/vQMVUnP/233[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/234" [New File]"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  85: OK (198689)
[1m[37m[41mError detected while processing /sources/vim80/src/testdir/test49.vim:[m
[33mline 8769:[m
[1m[37m[41mE123: Undefined function: F[m
Make_all.mak(1 of 1): tango down
[33mline 8773:[m
[1m[37m[41mE193: :endfunction not inside a function[m
[1m[37m[41mError detected while processing function ExecAsScript[2]..MakeScript:[m
[33mline    3:[m
[1m[37m[41mE123: Undefined function: F[m"/tmp/vQMVUnP/235" [1m[37m[41mc[m[57;20H[K[57;20H[noeol] 4L, 109C
[31msearch hit BOTTOM, continuing at TOP[m[33mline   10:[m[57;11H[K[57;1H
[1m[37m[41mE486: Pattern not found: .*F(.*)[m
[31msearch hit BOTTOM, continuing at TOP[m[33mline   11:[m[57;11H[K[57;1H
[1m[37m[41mE486: Pattern not found: ^\d*\s*endfunction\>[m
4 substitutions on 4 lines"/tmp/vQMVUnP/235"[57;20H[K[57;20H3L, 109C written"test49.in" [57;13H[K[57;13H32L, 705C
[1m[37m[41mError detected while processing /tmp/vQMVUnP/235:[m
[33mline    1:[m
[1m[37m[41mE492: Not an editor command: Error detected while processing function ExecAsScript[2].[m
[56;87H[1m[37m[41m.[57;1HMakeScript:[m
[33mline    2:[m
[1m[37m[41mE492: Not an editor command: line    3:[m
[33mline    3:[m
[1m[37m[41mE492: Not an editor command: E123: Undefined function: F[m
[1m[37m[41mError detected while processing /sources/vim80/src/testdir/test49.vim:[m
[33mline 8779:[m
[1m[37m[41mE130: Unknown function: F[m
*** Test  86: OK (0)
5
*** Test  87: OK (0)"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!echo 'source /tmp/vQMVUnP/0' >/tmp/vQMVUnP/236[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H/^\s*if\s\+ExtraVim(.*)/+[25C1"/tmp/vQMVUnP/236" [57;20H[K[57;20H151L, 3929C appended[57;20H[K[57;20H152L, 3951C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C
:!>/tmp/vQMVUnP/237[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:!echo 'q[34m^M[mq[34m^M[mq[34m^M[mq' | ../vim -u NONE -N -Xes -c 'debuggreedy|set viminfo+=nviminfo' -c
'let ExtraVimBegin = 1' -c 'let ExtraVimResult = "/tmp/vQMVUnP/237"' -c 'breakadd func
5 ThrowOnInterrupt' -S /tmp/vQMVUnP/236[?1l>[?12l[?25h[?1049l

shell returned 1

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H"/tmp/vQMVUnP/237" [57;21H[K[57;20H16L, 281C"/sources/vim80/src/testdir/test49.vim" [readonly] 9009L, 206880C"test49.in" [57;13H[K[57;13H32L, 705C
*** Test  88: OK (50443995)
[32mPress ENTER or type command to continue[m[57;1H[K[57;1H:[?12l[?25h" Go back to this file and append the results from register r.[?25l[27m[23m[m[H[2J[1;1HThis is a test of the script language.

If after adding a new test, the test output doesn't appear properly in
test49.failed, try to add one or more "G"s at the line ending in "test.out"

STARTTEST
:so small.vim
:se nocp nomore viminfo+=nviminfo
:lang mess C
:so test49.vim
:" Go back to this file and append the results from register r.
:buf test49.in
G"rp:/^Results/,$w! test.out
:"
:" make valgrind happy
:redir => funclist
:silent func
:redir END
:for line in split(funclist, "\n")
:  let name = matchstr(line, 'function \zs[A-Z]\w*\ze(')
:  if name != ''
:    exe "delfunc " . name
:  endif
:endfor
:for v in keys(g:)
:  silent! exe "unlet " . v
:endfor
:unlet v
:qa!
ENDTEST

Results of test49.vim:
[1m[34m~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hbuf test49.in[?25l[1;1H[?12l[?25h[32;1H[?25l[57;1H83 more lines[57;14H[K[33;1H*** Test  16: OK (8722)[33;24H[K[34;1H*** Test  17: OK (285127993)[34;29H[K[35;1H*** Test  18: OK (67224583)[35;28H[K[36;1H*** Test  19: OK (69275973)[36;28H[K[37;1H*** Test  20: OK (1874575085)[37;30H[K[38;1H*** Test  21: OK (147932225)[38;29H[K[39;1H*** Test  22: OK (4161)[39;24H[K[40;1H*** Test  23: OK (49)[40;22H[K[41;1H*** Test  24: OK (41)[41;22H[K[42;1H*** Test  25: OK (260177811)[42;29H[K[43;1H*** Test  26: OK (1681500476)[43;30H[K[44;1H*** Test  27: OK (1996459)[44;27H[K[45;1H*** Test  28: OK (1996459)[45;27H[K[46;1H*** Test  29: OK (170428555)[46;29H[K[47;1H*** Test  30: OK (190905173)[47;29H[K[48;1H*** Test  31: OK (190905173)[48;29H[K[49;1H*** Test  32: OK (354833067)[49;29H[K[50;1H--- Test  33: sum = 178275600 (ok)[50;35H[K[51;1H*** Test  33: OK (1216907538)[51;30H[K[52;1H*** Test  34: OK (2146584868)[52;30H[K[53;1H*** Test  35: OK (2146584868)[53;30H[K[54;1H*** Test  36: OK (1071644672)[54;30H[K[55;1H*** Test  37: OK (1071644672)[55;30H[K[56;1H*** Test  38: OK (357908480)[56;29H[K[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^Results/,$w! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New] 84L, 2484C written[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" make valgrind happy[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir => funclist[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsilent func[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir END[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfor line in split(funclist, "\n")[?25l
:  [?12l[?25h:  let name = matchstr(line, 'function \zs[A-Z]\w*\ze(')
[?25l:  [?12l[?25h:  if name != ''
[?25l:    [?12l[?25h:    exe "delfunc " . name
[?25l:    [?12l[?25h:  endif
[?25l:  [?12l[?25h:endfor[1;1H[5L[?25l[1;1HThis is a test of the script language.

If after adding a new test, the test output doesn't appear properly in
test49.failed, try to add one or more "G"s at the line ending in "test.out"[57;1H[K[33;1H[?12l[?25h[?25l[57;1H:[?12l[?25hfor v in keys(g:)[?25l
:  [?12l[?25h:  silent! exe "unlet " . v
[?25l:  [?12l[?25h:endfor[1;1H[2L[?25l[1;1HThis is a test of the script language.[57;1H[K[33;1H[?12l[?25h[?25l[57;1H:[?12l[?25hunlet v[?25l[33;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[?1l>[?12l[?25h[?1049l
# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test49 = test61; then \
#	  if diff test.out test49.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test49.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test49.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test97.failed test.ok test.out X* viminfo
cp test97.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test97.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test97.in" 23 lines, 484 characters[1;1HTest whether glob()/globpath() return correct results with certain escaped
characters.

STARTTEST
:so small.vim
:" make sure glob() doesn't use the shell
:set shell=doesnotexist
:" consistent sorting of file names
:set nofileignorecase
:e! test.out
:$put =glob('Xxx\{')
:$put =glob('Xxx\$')
:w! Xxx{
:w! Xxx\$
:$put =glob('Xxx\{')
:$put =glob('Xxx\$')
:"
:$put =string(globpath('sautest/autoload', '*.vim'))
:$put =string(globpath('sautest/autoload', '*.vim', 0, 1))
:w
:qa!
ENDTEST

[1m[34m~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest whether glob()/globpath() return correct results with certain escaped[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[4;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 17 lines, 377 characters written[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[5;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[22;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" make sure glob() doesn't use the shell[?25l[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset shell=doesnotexist[?25l[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" consistent sorting of file names[?25l[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nofileignorecase[?25l[23;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! test.out[?25l"test.out" [New File][1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put =glob('Xxx\{')[?25l[2;1H[K[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =glob('Xxx\$')[?25l[3;1H[K[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! Xxx{[?25l
Cannot execute shell doesnotexist
[m
E79: Cannot expand wildcards
"Xxx{" [New File] 3 lines, 3 characters written
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! Xxx\$[?25l"Xxx$" [57;8H[K[57;8H[New File] 3 lines, 3 characters written
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put =glob('Xxx\{')[?25l[27m[23m[m[H[2J[4;1HXxx{
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [4;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h$put =glob('Xxx\$')[?25l[5;1HXxx$[5;5H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =string(globpath('sautest/autoload', '*.vim'))[?25l[6;1H'sautest/autoload/Test104.vim[6;30H[K[7;1Hsautest/autoload/footest.vim'[7;30H[K[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =string(globpath('sautest/autoload', '*.vim', 0, 1))[?25l[8;1H['sautest/autoload/Test104.vim', 'sautest/autoload/footest.vim'][8;65H[K[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"test.out" [New File] 8 lines, 138 characters written[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test97 = test61; then \
#	  if diff test.out test97.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test97.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test97.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test_listlbr_utf8.failed test.ok test.out X* viminfo
cp test_listlbr_utf8.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_listlbr_utf8.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_listlbr_utf8.in" 134 lines, 4027 characters[1;1HTest for linebreak and list option in utf-8 mode

STARTTEST
:so small.vim
:if !exists("+linebreak") || !has("conceal") || !has("signs") | e! test.ok | w! test.ouu[6;1Ht | qa! | endif
:so mbyte.vim
:set encoding=utf8
:if &enc !=? 'utf-8'|:e! test.ok|:w! test.out|qa!|endif
:10new|:vsp|:vert resize 20
:put =\"\tabcdef hijklmn\tpqrstuvwxyz\u00a01060ABCDEFGHIJKLMNOP \"
:norm! zt
:set ts=4 sw=4 sts=4 linebreak sbr=+ wrap
:fu! ScreenChar(width, lines)
:[7Clet c=''
:[7Cfor j in range(1,a:lines)
:[11Cfor i in range(1,a:width)
:[15Clet c.=nr2char(screenchar(j, i))
:[11Cendfor
:[11Clet c.="\n"
:[7Cendfor
:[7Creturn c
:endfu
:fu! DoRecordScreen()
:[7Cwincmd l
:[7C$put =printf(\"\n%s\", g:test)
:[7C$put =g:line
:[7Cwincmd p
:endfu
:"
:let g:test ="Test 1: set linebreak + set list + fancy listchars"
:exe "set linebreak list listchars=nbsp:\u2423,tab:\u2595\u2014,trail:\u02d1,eol:\ub6"
:redraw!
:let line=ScreenChar(winwidth(0),4)
:call DoRecordScreen()
:"
:let g:test ="Test 2: set nolinebreak list"
:set list nolinebreak
:redraw!
:let line=ScreenChar(winwidth(0),4)
:call DoRecordScreen()
:"
:let g:test ="Test 3: set linebreak nolist"
:$put =\"\t*mask = nil;\"
:$
:norm! zt
:set nolist linebreak
:redraw!
:let line=ScreenChar(winwidth(0),4)
:call DoRecordScreen()
:"
:let g:test ="Test 4: set linebreak list listchars and concealing"
:let c_defines=['#define ABCDE[10C1','#define ABCDEF[14C1','#define ABCC[54;1HDEFG[13C1','#define ABCDEFGH    1', '#define MSG_MODE_FILE[19C  [55;1H  1','#define MSG_MODE_CONSOLE[12C2','#define MSG_MODE_FILE_AND_CONSOLE   3','##[56;1Hdefine MSG_MODE_FILE_THEN_CONSOLE  4'][1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for linebreak and list option in utf-8 mode[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 129 lines, 3948 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:"
:let g:test ="Test 6: Screenattributes for comment"
:$put =g:test
:call append('$', ' /*[11Cand some more */')
:exe "set ft=c ts=7 linebreak list listchars=nbsp:\u2423,tab:\u2595\u2014,trail:\u02d1,,[6;1Heol:\ub6"
:syntax on
:hi SpecialKey term=underline ctermfg=red guifg=red
:let attr=[]
:nnoremap <expr> GG ":let attr += ['".screenattr(screenrow(),screencol())."']\n"
:$
:norm! zt0
GGlGGlGGlGGlGGlGGlGGlGGlGGlGGl
:call append('$', ['ScreenAttributes for test6:'])
:if attr[0] != attr[1] && attr[1] != attr[3] && attr[3] != attr[5]
:   call append('$', "Attribut 0 and 1 and 3 and 5 are different!")
:else
:   call append('$', "Not all attributes are different")
:endif
:set cpo&vim linebreak selection=exclusive
:"
:let g:test ="Test 8: set linebreak with visual block mode and v_b_A and selection=excll[23;1Husive and multibyte char"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGET[34m~C[m' at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:"
:let g:test ="Test 9: a multibyte sign and colorcolumn"
:let attr=[]
:let attr2=[]
:$put =''
:$put ='a b c'
:$put ='a b c'
:set list nolinebreak cc=3
:sign define foo text=[34m^V[muff0b
:sign place 1 name=foo line=50 buffer=2
:norm! 2kztj
:let line1=line('.')
0GGlGGlGGlGGl
:let line2=line('.')
:let attr2=attr
:let attr=[]
0GGlGGlGGlGGl
:redraw!
:let line=ScreenChar(winwidth(0),3)
:call DoRecordScreen()
:" expected: attr[2] is different because of colorcolumn
:if attr[0] != attr2[0] || attr[1] != attr2[1] || attr[2] != attr2[2]
:   call append('$', "Screen attributes are different!")
:else
:   call append('$', "Screen attributes are the same!")
:endif
:%w! test.out
:qa!
ENDTEST
dummy text[55;1H[?12l[?25h
[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif !exists("+linebreak") || !has("conceal") || !has("signs") | e! test.ok | w! test.o
[56;87Hu[57;1Ht | qa! | endif[?25l[1;1H[L[1;1H:"[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hso mbyte.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset encoding=utf8[?25l[27m[23m[m[H[2J[1;1H:"
:let g:test ="Test 6: Screenattributes for comment"
:$put =g:test
:call append('$', ' /*[11Cand some more */')
:exe "set ft=c ts=7 linebreak list listchars=nbsp:\u2423,tab:\u2595\u2014,trail:\u02d1,,[6;1Heol:\ub6"
:syntax on
:hi SpecialKey term=underline ctermfg=red guifg=red
:let attr=[]
:nnoremap <expr> GG ":let attr += ['".screenattr(screenrow(),screencol())."']\n"
:$
:norm! zt0
GGlGGlGGlGGlGGlGGlGGlGGlGGlGGl
:call append('$', ['ScreenAttributes for test6:'])
:if attr[0] != attr[1] && attr[1] != attr[3] && attr[3] != attr[5]
:   call append('$', "Attribut 0 and 1 and 3 and 5 are different!")
:else
:   call append('$', "Not all attributes are different")
:endif
:set cpo&vim linebreak selection=exclusive
:"
:let g:test ="Test 8: set linebreak with visual block mode and v_b_A and selection=excll[23;1Husive and multibyte char"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGETÃ' at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:"
:let g:test ="Test 9: a multibyte sign and colorcolumn"
:let attr=[]
:let attr2=[]
:$put =''
:$put ='a b c'
:$put ='a b c'
:set list nolinebreak cc=3
:sign define foo text=[34m^V[muff0b
:sign place 1 name=foo line=50 buffer=2
:norm! 2kztj
:let line1=line('.')
0GGlGGlGGlGGl
:let line2=line('.')
:let attr2=attr
:let attr=[]
0GGlGGlGGlGGl
:redraw!
:let line=ScreenChar(winwidth(0),3)
:call DoRecordScreen()
:" expected: attr[2] is different because of colorcolumn
:if attr[0] != attr2[0] || attr[1] != attr2[1] || attr[2] != attr2[2]
:   call append('$', "Screen attributes are different!")
:else
:   call append('$', "Screen attributes are the same!")
:endif
:%w! test.out
:qa!
ENDTEST
dummy text[?12l[?25h[?25l
:[?12l[?25hif &enc !=? 'utf-8'|:e! test.ok|:w! test.out|qa!|endif[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h10new|:vsp|:vert resize 20[?25l[1;1H  [18C[7m|[2;21H|[3;21H|[4;21H|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[10;21H|[m[2;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   [m
[1m[7m[No Name]            [m[2;22H[1m[34m~                                                                 [3;22H~                                                                 [4;22H~                                                                 [5;22H~                                                                 [6;22H~                                                                 [7;22H~                                                                 [8;22H~                                                                 [9;22H~                                                                 [10;22H~                                                                 [m[11;22H[7m[No Name]                                                         [m[12;1HGGlGGlGGlGGlGGlGGlGGlGGlGGlGGl
:call append('$', ['ScreenAttributes for test6:'])
:if attr[0] != attr[1] && attr[1] != attr[3] && attr[3] != attr[5]
:   call append('$', "Attribut 0 and 1 and 3 and 5 are different!")
:else[16;6H[K[17;2H   call append('$', "Not all attributes are different")
:endif[18;7H[K[19;2Hset cpo&vim linebreak selection=exclusive
:"[20;3H[K[21;2Hlet g:test ="Test 8: set linebreak with visual block mode and v_b_A and selection=excll[22;1Husive and multibyte char"[22;27H[K[23;1H:$put =g:test[23;14H[K[24;1HGolong line: [34m^[[m40afoobar [34m^[[maTARGETÃ' at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"[25;32H[K[26;2H"[26;3H[K[27;2Hlet g:test ="Test 9: a multibyte sign and colorcolumn"[28;6Hattr=[][28;13H[K[29;10H2=[]
:$put =''[30;10H[K[31;9Ha b c'

:set list nolinebreak cc=3
:sign define foo text=[34m^V[muff0b[35;7Hplace 1 name=foo line=50 buffer=2
:norm! 2kztj[36;13H[K[37;2Hlet line1=line('.')
0GGlGGlGGlGGl[38;14H[K[39;1H:let line2=line('.')[40;6Hattr2=attr[40;16H[K[41;10H=[][41;13H[K[42;1H0GGlGGlGGlGGl
:redraw![43;9H[K[44;2Hlet line=ScreenChar(winwidth(0),3)
:call DoRecordScreen()[45;23H[K[46;2H" expected: attr[2] is different because of colorcolumn
:if attr[0] != attr2[0] || attr[1] != attr2[1] || attr[2] != attr2[2]
:   call append('$', "Screen attributes are different!")[48;57H[K[49;2Helse[49;6H[K[50;2H   call append('$', "Screen attributes are the same!")
:endif[51;7H[K[52;2H%w! test.out
:qa[53;6H[K[54;1HENDTEST
dummy text
[7mtest_listlbr_utf8.in                                                                   [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hput =\"\tabcdef hijklmn\tpqrstuvwxyz\u00a01060ABCDEFGHIJKLMNOP \"[?25l[2;1H        abcdef hijkl
mn  pqrstuvwxyz 1060
ABCDEFGHIJKLMNOP    [11;11H[1m[7m[+][m[2;22H        abcdef hijklmn  pqrstuvwxyz 1060ABCDEFGHIJKLMNOP [2;79H[K[11;32H[7m[+][2;9H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hnorm! zt[?25l[1;1H        abcdef hijkl
mn  pqrstuvwxyz 1060
ABCDEFGHIJKLMNOP    
[1m[34m~                   
~                   
~                   
~                   
~                   
~                   [m
                    [1m[34m~                   [m[57;1H[K[1;9H[?12l[?25h[?25l[57;1H:[?12l[?25hset ts=4 sw=4 sts=4 linebreak sbr=+ wrap[?25l[1;5Habcdef          
[1m[34m+[mhijklmn            
[1m[34m+[mpqrstuvwxyz 1060ABC
[1m[34m+[mDEFGHIJKLMNOP      [2;26Habcdef hijklmn  pqrstuvwxyz 1060ABCDEFGHIJKLMNOP [2;75H[K[22;1H[1m[34m+[musive and multibyte char"[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfu! ScreenChar(width, lines)[?25l
:  [?12l[?25h:[34m^I[mlet c=''
[?25l:  [?12l[?25h:[34m^I[mfor j in range(1,a:lines)
[?25l:    [?12l[?25h:[34m^I[m    for i in range(1,a:width)
[?25l:      [?12l[?25h:[34m^I[m    [34m^I[mlet c.=nr2char(screenchar(j, i))
[?25l:      [?12l[?25h:[34m^I[m    endfor
[?25l:    [?12l[?25h:           let c.="\n"
[?25l:    [?12l[?25h:[34m^I[mendfor
[?25l:  [?12l[?25h:[34m^I[mreturn c
[?25l:  [?12l[?25h:endfu[1;1H[9L[?25l[1;5Habcdef[10C[7m|[m
[1m[34m+[mhijklmn[12C[7m|[m
[1m[34m+[mpqrstuvwxyz 1060ABC[7m|[m
[1m[34m+[mDEFGHIJKLMNOP      [7m|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[m[5;1H[1m[34m~                   
~                   
~                   
~                   
~                   [m[2;26Habcdef hijklmn  pqrstuvwxyz 1060ABCDEFGHIJKLMNOP[3;22H[1m[34m~                                                                 [4;22H~                                                                 [5;22H~                                                                 [6;22H~                                                                 [7;22H~                                                                 [8;22H~                                                                 [9;22H~                                                                 [m[57;1H[K[1;5H[?12l[?25h[?25l[57;1H:[?12l[?25hfu! DoRecordScreen()[?25l
:  [?12l[?25h:[34m^I[mwincmd l
[?25l:  [?12l[?25h:[34m^I[m$put =printf(\"\n%s\", g:test)
[?25l:  [?12l[?25h:[34m^I[m$put =g:line
[?25l:  [?12l[?25h:[34m^I[mwincmd p
[?25l:  [?12l[?25h:endfu[1;1H[5L[?25l[1;5Habcdef[10C[7m|[m
[1m[34m+[mhijklmn[12C[7m|[m
[1m[34m+[mpqrstuvwxyz 1060ABC[7m|[m
[1m[34m+[mDEFGHIJKLMNOP      [7m|[5;21H|[m[1m[34m~                   [m[2;26Habcdef hijklmn  pqrstuvwxyz 1060ABCDEFGHIJKLMNOP[3;22H[1m[34m~                                                                 [4;22H~                                                                 [5;22H~                                                                 [m[57;1H[K[1;5H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 1: set linebreak + set list + fancy listchars"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexe "set linebreak list listchars=nbsp:\u2423,tab:\u2595\u2014,trail:\u02d1,eol:\ub6"[?25l[1;1H[34m▕[1;2H—[1;3H—[1;4H—[2;9H▕[2;10H—[2;11H—[2;12H—[3;13H␣[4;15Hˑ[m[1m[34m¶[1;5H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredraw![?25l[27m[23m[m[H[2J[1;1H[34m▕[1;2H—[1;3H—[1;4H—[m[1;5Habcdef[10C[7m|[m
[1m[34m+[mhijklmn[34m▕[2;10H—[2;11H—[2;12H—[m[2;21H[7m|[m
[1m[34m+[mpqrstuvwxyz[34m␣[m1060ABC[7m|[m
[1m[34m+[mDEFGHIJKLMNOP[34mˑ[m[1m[34m¶[m[4;21H[7m|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[10;21H|[m[5;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   [m
[1m[7m[No Name] [+]        [m[2;26Habcdef hijklmn  pqrstuvwxyz 1060ABCDEFGHIJKLMNOP[3;22H[1m[34m~                                                                 [4;22H~                                                                 [5;22H~                                                                 [6;22H~                                                                 [7;22H~                                                                 [8;22H~                                                                 [9;22H~                                                                 [10;22H~                                                                 [m[11;22H[7m[No Name] [+]                                                     [m[12;1HGGlGGlGGlGGlGGlGGlGGlGGlGGlGGl
:call append('$', ['ScreenAttributes for test6:'])
:if attr[0] != attr[1] && attr[1] != attr[3] && attr[3] != attr[5]
:   call append('$', "Attribut 0 and 1 and 3 and 5 are different!")
:else
:   call append('$', "Not all attributes are different")
:endif
:set cpo&vim linebreak selection=exclusive
:"
:let g:test ="Test 8: set linebreak with visual block mode and v_b_A and selection=excll[22;1H[1m[34m+[musive and multibyte char"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGETÃ' at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:"
:let g:test ="Test 9: a multibyte sign and colorcolumn"
:let attr=[]
:let attr2=[]
:$put =''
:$put ='a b c'
:$put ='a b c'
:set list nolinebreak cc=3
:sign define foo text=[34m^V[muff0b
:sign place 1 name=foo line=50 buffer=2
:norm! 2kztj
:let line1=line('.')
0GGlGGlGGlGGl
:let line2=line('.')
:let attr2=attr
:let attr=[]
0GGlGGlGGlGGl
:redraw!
:let line=ScreenChar(winwidth(0),3)
:call DoRecordScreen()
:" expected: attr[2] is different because of colorcolumn
:if attr[0] != attr2[0] || attr[1] != attr2[1] || attr[2] != attr2[2]
:   call append('$', "Screen attributes are different!")
:else
:   call append('$', "Screen attributes are the same!")
:endif
:%w! test.out
:qa!
ENDTEST
dummy text
[7mtest_listlbr_utf8.in                                                                   [1;5H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet line=ScreenChar(winwidth(0),4)[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l4 more lines[57;13H[K[5;1H[1m[34m¶[m[5;2H                   
Test 1: set         
[1m[34m+[mlinebreak + set    
[1m[34m+[mlist + fancy       
[1m[34m+[mlistchars[1m[34m¶[m[9;12H         
▕[10;2H—[10;3H—[10;4H—[10;5Habcdef[34mˑˑˑˑˑˑˑˑˑˑ[m[1m[34m@                   [m[3;22H[K[4;22HTest 1: set linebreak + set list + fancy listchars[4;72H[K[5;22H▕[5;23H—[5;24H—[5;25H—[5;26Habcdef          [5;42H[K[6;22H+hijklmn▕[6;31H—[6;32H—[6;33H—[6;34H        [6;42H[K[7;22H+pqrstuvwxyz␣1060ABC[7;42H[K[8;22H+DEFGHIJKLMNOPˑ¶[8;38H    [8;42H[K[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 2: set nolinebreak list"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset list nolinebreak[?25l[1;12Hhijklmn[34m▕[1;20H—[m[2;2Hpqrstuvwxyz[34m␣[m1060ABC[3;2HDEFGHIJKLMNOP[34mˑ[m[1m[34m¶[m[3;17H    
[1m[34m¶[m[4;2H                
Test 1: set linebrea
[1m[34m+[mk + set list + fanc[7;2Hy listchars[1m[34m¶[m[7;14H   
▕[8;2H—[8;3H—[8;4H—[8;5Habcdef[34mˑˑˑˑˑˑˑˑˑˑ[m[9;2H[1m[34m¶[m[9;3H          
+hijklmn▕[10;10H—[10;11H—[10;12H—[10;13H[34mˑˑˑˑˑˑˑˑ[m[1m[34m@                   [1;5H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredraw![?25l[27m[23m[m[H[2J[1;1H[34m▕[1;2H—[1;3H—[1;4H—[m[1;5Habcdef hijklmn[34m▕[1;20H—[m[1;21H[7m|[m
[1m[34m+[mpqrstuvwxyz[34m␣[m1060ABC[7m|[m
[1m[34m+[mDEFGHIJKLMNOP[34mˑ[m[1m[34m¶[m[3;21H[7m|[m
[1m[34m¶[m[4;21H[7m|[m
Test 1: set linebrea[7m|[m
[1m[34m+[mk + set list + fanc[7m|[m
[1m[34m+[my listchars[1m[34m¶[m[7;21H[7m|[m
▕[8;2H—[8;3H—[8;4H—[8;5Habcdef[34mˑˑˑˑˑˑˑˑˑˑ[m[7m|[m
[1m[34m+¶[m[9;21H[7m|[m
+hijklmn▕[10;10H—[10;11H—[10;12H—[10;13H[34mˑˑˑˑˑˑˑˑ[m[7m|[m[1m[34m@                   [m
[1m[7m[No Name] [+]        [m[2;26Habcdef hijklmn  pqrstuvwxyz 1060ABCDEFGHIJKLMNOP[4;22HTest 1: set linebreak + set list + fancy listchars[5;22H▕[5;23H—[5;24H—[5;25H—[5;26Habcdef[6;22H+hijklmn▕[6;31H—[6;32H—[6;33H—[7;22H+pqrstuvwxyz␣1060ABC[8;22H+DEFGHIJKLMNOPˑ¶[9;22H[1m[34m~                                                                 [10;22H~                                                                 [m[11;22H[7m[No Name] [+]                                                     [m[12;1HGGlGGlGGlGGlGGlGGlGGlGGlGGlGGl
:call append('$', ['ScreenAttributes for test6:'])
:if attr[0] != attr[1] && attr[1] != attr[3] && attr[3] != attr[5]
:   call append('$', "Attribut 0 and 1 and 3 and 5 are different!")
:else
:   call append('$', "Not all attributes are different")
:endif
:set cpo&vim linebreak selection=exclusive
:"
:let g:test ="Test 8: set linebreak with visual block mode and v_b_A and selection=excll[22;1H[1m[34m+[musive and multibyte char"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGETÃ' at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:"
:let g:test ="Test 9: a multibyte sign and colorcolumn"
:let attr=[]
:let attr2=[]
:$put =''
:$put ='a b c'
:$put ='a b c'
:set list nolinebreak cc=3
:sign define foo text=[34m^V[muff0b
:sign place 1 name=foo line=50 buffer=2
:norm! 2kztj
:let line1=line('.')
0GGlGGlGGlGGl
:let line2=line('.')
:let attr2=attr
:let attr=[]
0GGlGGlGGlGGl
:redraw!
:let line=ScreenChar(winwidth(0),3)
:call DoRecordScreen()
:" expected: attr[2] is different because of colorcolumn
:if attr[0] != attr2[0] || attr[1] != attr2[1] || attr[2] != attr2[2]
:   call append('$', "Screen attributes are different!")
:else
:   call append('$', "Screen attributes are the same!")
:endif
:%w! test.out
:qa!
ENDTEST
dummy text
[7mtest_listlbr_utf8.in                                                                   [m[10;1H+hijklmn▕[10;10H—[10;11H—[10;12H—[10;13H[34mˑˑˑˑˑˑˑˑ[m[1m[34m@                   [1;5H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet line=ScreenChar(winwidth(0),4)[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l4 more lines[57;13H[K[1;22H▕[1;23H—[1;24H—[1;25H—[1;26Habcdef                                                        [2;22H+hijklmn▕[2;31H—[2;32H—[2;33H—[2;34H                                                      [3;22H+pqrstuvwxyz␣1060ABC                                              [4;22H+DEFGHIJKLMNOPˑ¶[4;38H                                                  [5;22H[1m[34m~                                                                 [6;22H~                                                                 [m[7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [5;22H[K[6;22HTest 2: set nolinebreak list[6;50H[K[7;22H▕[7;23H—[7;24H—[7;25H—[7;26Habcdef hijklmn▕[7;41H—[8;22H+pqrstuvwxyz␣1060ABC[9;22H+DEFGHIJKLMNOPˑ¶[10;22H¶[57;1H[K[57;1H4 more lines[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 3: set linebreak nolist"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =\"\t*mask = nil;\"[?25l[1;1H▕[1;2H—[1;3H—[1;4H—[1;19H▕[1;20H—[2;2H[1m[34m¶[m[2;3H                  
+pqrstuvwxyz␣1060ABC
[1m[34m+¶[m[5;1H+DEFGHIJKLMNOPˑ¶[5;17H[34mˑˑˑˑ[m[6;2H[1m[34m¶[m[6;4H                 
¶[7;2H[34mˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑ[m
[1m[34m+¶[m[8;3H                  
[34m▕[9;2H—[9;3H—[9;4H—[m[9;5H*mask = nil;[1m[34m¶[10;1H~ [9;5H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$[?25l[9;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnorm! zt[?25l[1;1H[34m▕[1;2H—[1;3H—[1;4H—[m[1;5H*mask = nil;[1m[34m¶[m[1;18H   
[1m[34m~                   [m
                    
                    
                    
                    
                    
                    
                    
                    [3;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   [m[57;1H[K[1;5H[?12l[?25h[?25l[57;1H:[?12l[?25hset nolist linebreak[?25l[1;1H    [12C      [?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredraw![?25l[27m[23m[m[H[2J[1;5H*mask = nil;    [7m|[2;21H|[3;21H|[4;21H|[5;21H|[6;21H|[7;21H|[8;21H|[9;21H|[10;21H|[m[2;1H[1m[34m~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   
~                   [m
[1m[7m[No Name] [+]        [m[1;22H▕[1;23H—[1;24H—[1;25H—[1;26Habcdef[2;22H+hijklmn▕[2;31H—[2;32H—[2;33H—[3;22H+pqrstuvwxyz␣1060ABC[4;22H+DEFGHIJKLMNOPˑ¶[6;22HTest 2: set nolinebreak list[7;22H▕[7;23H—[7;24H—[7;25H—[7;26Habcdef hijklmn▕[7;41H—[8;22H+pqrstuvwxyz␣1060ABC[9;22H+DEFGHIJKLMNOPˑ¶[10;22H¶[11;22H[7m[No Name] [+]                                                     [m[12;1HGGlGGlGGlGGlGGlGGlGGlGGlGGlGGl
:call append('$', ['ScreenAttributes for test6:'])
:if attr[0] != attr[1] && attr[1] != attr[3] && attr[3] != attr[5]
:   call append('$', "Attribut 0 and 1 and 3 and 5 are different!")
:else
:   call append('$', "Not all attributes are different")
:endif
:set cpo&vim linebreak selection=exclusive
:"
:let g:test ="Test 8: set linebreak with visual block mode and v_b_A and selection=excll[22;1H[1m[34m+[musive and multibyte char"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGETÃ' at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:"
:let g:test ="Test 9: a multibyte sign and colorcolumn"
:let attr=[]
:let attr2=[]
:$put =''
:$put ='a b c'
:$put ='a b c'
:set list nolinebreak cc=3
:sign define foo text=[34m^V[muff0b
:sign place 1 name=foo line=50 buffer=2
:norm! 2kztj
:let line1=line('.')
0GGlGGlGGlGGl
:let line2=line('.')
:let attr2=attr
:let attr=[]
0GGlGGlGGlGGl
:redraw!
:let line=ScreenChar(winwidth(0),3)
:call DoRecordScreen()
:" expected: attr[2] is different because of colorcolumn
:if attr[0] != attr2[0] || attr[1] != attr2[1] || attr[2] != attr2[2]
:   call append('$', "Screen attributes are different!")
:else
:   call append('$', "Screen attributes are the same!")
:endif
:%w! test.out
:qa!
ENDTEST
dummy text
[7mtest_listlbr_utf8.in                                                                   [1;5H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet line=ScreenChar(winwidth(0),4)[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l4 more lines[57;13H[K[2;1H                    
Test 3: set         
[1m[34m+[mlinebreak nolist   
    *mask = nil;    
~                   
~                   
~                   [1;22H+pqrstuvwxyz␣1060ABC                                              [2;22H+DEFGHIJKLMNOPˑ¶[2;38H                                                  [3;22H¶[3;23H                                                                 [4;22H                                                                  [5;22H                                                                  [6;22H                                                                  [7;22H                                                                  [8;22H                                                                  [9;22H                                                                  [10;22H                                                                  [4;26H*mask = nil;[6;22HTest 3: set linebreak nolist[7;26H*mask = nil;[8;22H~[9;22H~[10;22H~[57;1H[K[57;1H4 more lines[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 4: set linebreak list listchars and concealing"[?25l[1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet c_defines=['#define ABCDE[34m^I^I[m1','#define ABCDEF[34m^I^I[m1','#define ABCDEFG[34m^I^I[m1','#de
[56;87Hf[57;1Hine ABCDEFGH[34m^I[m1', '#define MSG_MODE_FILE[34m^I^I^I[m1','#define MSG_MODE_CONSOLE[34m^I^I[m2','#def
[56;87Hi[57;1Hne MSG_MODE_FILE_AND_CONSOLE[34m^I[m3','#define MSG_MODE_FILE_THEN_CONSOLE[34m^I[m4'][?25l[1;1H[2L[1;5H*mask = nil;    [7m|[2;21H|[m[1;22H+pqrstuvwxyz␣1060ABC[2;22H+DEFGHIJKLMNOPˑ¶[57;1H[K[1;5H[?12l[?25h[?25l[57;1H:[?12l[?25hcall append('$', c_defines)[?25l[9;1H#define             
[1m[34m+[mABCDE      1       [1;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hvert resize 40[?25l[1;21H                    [7m|[m[2;21H                    [7m|[m[3;13Hlinebreak nolist[12C[7m|[m
    *mask = nil;                        [7m|[m
~                    [19C[7m|[m[6;21H                    [7m|[m[7;21H                    [7m|[m
#define ABCDE[7C1 [18C[7m|[m[9;9HABCDEF      1 [18C[7m|[m
#define ABCDEFG     1 [18C[7m|[m[11;22H[1m[7m                    [m[1;42H+pqrstuvwxyz␣1060ABC[2;42H+DEFGHIJKLMNOPˑ¶[3;42H¶[4;46H*mask = nil;[6;42HTest 3: set linebreak nolist[7;46H*mask = nil;[8;42H~[9;42H~[10;42H~[11;42H[7m[No Name] [+][1;5H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$-7[?25l[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnorm! zt[?25l[1;1H#define ABCDE       1                   
#define ABCDEF      1                   
#define ABCDEFG     1                   
                                        
                                        
                                        
                                        
                                        
                                        
                                        [4;1H#define ABCDEFGH    1
#define MSG_MODE_FILE[11C1
#define MSG_MODE_CONSOLE[8C2
#define MSG_MODE_FILE_AND_CONSOLE   3
#define MSG_MODE_FILE_THEN_CONSOLE  4
[1m[34m~                                       
~                                       [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset list linebreak listchars=tab:>- cole=1[?25l[1;14H[34m>-->---[2;15H>->---[3;16H>>---[4;17H>---[5;22H>-->--->---[6;25H>--->---[7;34H>--[8;35H>-[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hsyn match Conceal conceal cchar=>'AB\|MSG_MODE'[?25l[1;9H[37m[40mAB[2;9H>[mCDEF[34m>-[m[3;9H[37m[40m>[mCDEFG[34m>-[m[4;9H[37m[40m>[mCDEFGH[34m>-[m[5;9H[37m[40m>[m_FILE[34m>-------[m[6;9H[37m[40m>[m_CONSOLE[34m>-------[m[7;9H[37m[40m>[m_FILE_AND_CONSOLE[34m>-------[m[8;9H[37m[40m>[m_FILE_THEN_CONSOLE[34m>-------[m[1;59H[37m[40mAB[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredraw![?25l[27m[23m[m[H[2J[1;1H#define [37m[40mAB[mCDE[34m>-->---[m1[19C[7m|[m
#define [37m[40m>[mCDEF[34m>-->---[m1[19C[7m|[m
#define [37m[40m>[mCDEFG[34m>->---[m1[19C[7m|[m
#define [37m[40m>[mCDEFGH[34m>----[m1[19C[7m|[m
#define [37m[40m>[m_FILE[34m>--------->--->---[m1[7C[7m|[m
#define [37m[40m>[m_CONSOLE[34m>---------->---[m2[7C[7m|[m
#define [37m[40m>[m_FILE_AND_CONSOLE[34m>---------[m3   [7m|[m
#define [37m[40m>[m_FILE_THEN_CONSOLE[34m>--------[m4   [7m|[9;41H|[10;41H|[m[9;1H[1m[34m~                                       
~                                       [m
[1m[7m[No Name] [+]                            [m[1;42H+pqrstuvwxyz␣1060[37m[40mAB[mC[2;42H+DEFGHIJKLMNOPˑ¶[3;42H¶[4;46H*mask = nil;[6;42HTest 3: set linebreak nolist[7;46H*mask = nil;[8;42H~[9;42H~[10;42H~[11;42H[7m[No Name] [+]                                 [m[12;1HGGlGGlGGlGGlGGlGGlGGlGGlGGlGGl
:call append('$', ['ScreenAttributes for test6:'])
:if attr[0] != attr[1] && attr[1] != attr[3] && attr[3] != attr[5]
:   call append('$', "Attribut 0 and 1 and 3 and 5 are different!")
:else
:   call append('$', "Not all attributes are different")
:endif
:set cpo&vim linebreak selection=exclusive
:"
:let g:test ="Test 8: set linebreak with visual block mode and v_b_A and selection=excll[22;1H[1m[34m+[musive and multibyte char"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGETÃ' at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:"
:let g:test ="Test 9: a multibyte sign and colorcolumn"
:let attr=[]
:let attr2=[]
:$put =''
:$put ='a b c'
:$put ='a b c'
:set list nolinebreak cc=3
:sign define foo text=[34m^V[muff0b
:sign place 1 name=foo line=50 buffer=2
:norm! 2kztj
:let line1=line('.')
0GGlGGlGGlGGl
:let line2=line('.')
:let attr2=attr
:let attr=[]
0GGlGGlGGlGGl
:redraw!
:let line=ScreenChar(winwidth(0),3)
:call DoRecordScreen()
:" expected: attr[2] is different because of colorcolumn
:if attr[0] != attr2[0] || attr[1] != attr2[1] || attr[2] != attr2[2]
:   call append('$', "Screen attributes are different!")
:else
:   call append('$', "Screen attributes are the same!")
:endif
:%w! test.out
:qa!
ENDTEST
dummy text
[7mtest_listlbr_utf8.in                                                                   [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet line=ScreenChar(winwidth(0),7)[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l[1;9H[37m[40m>[mCDE[34m>-[m[57;1H7 more lines[57;13H[K[9;1H                                        
Test 4: set linebreak list listchars    [1m[34m@                                       [m[1;42H[K[2;42HTest 4: set linebreak list listchars and conce[3;42H[1m[34m+[maling[4;42H#define [37m[40mAB[mCDE>-->---1[5;42H#define >CDEF>-->---1[6;42H#define >CDEFG>->---1       [7;42H#define >CDEFGH>----1[8;42H#define >_FILE>--------->--->---1[9;42H#define >_CONSOLE>---------->---2[10;42H#define >_FILE_AND_CONSOLE>---------3[1;9H[37m[40mAB[mCDE[34m>[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 5: set linebreak list listchars and concealing part2"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet c_defines=['bbeeeeee[34m^I^I[m;[34m^I[msome text'][?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append('$', c_defines)[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$[?25l[1;1H[1m[34m@                                       [m
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        [1;1HTest 4: set linebreak list listchars    
[1m[34m+[mand concealing
#define [37m[40m>[mCDE>-->---1
#define >CDEF>-->---1
#define >CDEFG>->---1
#define >CDEFGH>----1
#define >_FILE>--------->--->---1
#define >_CONSOLE>---------->---2
#define >_FILE_AND_CONSOLE>---------3
bbeeeeee[34m>--->---[m;[34m>--[msome text[57;1H[K[10;1H[?12l[?25h[?25l[57;1H:[?12l[?25hnorm! zt[?25l[1;1Hbbeeeeee[34m>--->---[m;[34m>--[msome text           
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        [2;1H[1m[34m~                                       
~                                       
~                                       
~                                       
~                                       
~                                       
~                                       
~                                       
~                                       [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset nowrap ts=2 list linebreak listchars=tab:>- cole=2 concealcursor=n[?25l[1;11H[34m>[m[1C;[34m>[msome text      [1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsyn clear[?25l[4;50HAB[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsyn match meaning    /;\s*\zs.*/[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsyn match hasword    /^\x\{8}/    contains=word[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsyn match word       /\<\x\{8}\>/ contains=beginword,endword contained[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsyn match beginword  /\<\x\x/     contained conceal[?25l[1;1Heeeeee[34m>--[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hsyn match endword    /\x\{6}\>/   contained[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hhi meaning   guibg=blue[?25l[1;15Hsome text[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hhi beginword guibg=green[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hhi endword   guibg=red[?25l[1;1Heeeeee[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredraw![?25l[27m[23m[m[H[2J[1;1Heeeeee[34m>--->-[m;[34m>[msome text[17C[7m|[2;41H|[3;41H|[4;41H|[5;41H|[6;41H|[7;41H|[8;41H|[9;41H|[10;41H|[m[2;1H[1m[34m~                                       
~                                       
~                                       
~                                       
~                                       
~                                       
~                                       
~                                       
~                                       [m
[1m[7m[No Name] [+]                            [m[2;42HTest 4: set linebreak list listchars and conce[3;42H[1m[34m+[maling[4;42H#define ABCDE>-->---1[5;42H#define >CDEF>-->---1[6;42H#define >CDEFG>->---1[7;42H#define >CDEFGH>----1[8;42H#define >_FILE>--------->--->---1[9;42H#define >_CONSOLE>---------->---2[10;42H#define >_FILE_AND_CONSOLE>---------3[11;42H[7m[No Name] [+]                                 [m[12;1HGGlGGlGGlGGlGGlGGlGGlGGlGGlGGl
:call append('$', ['ScreenAttributes for test6:'])
:if attr[0] != attr[1] && attr[1] != attr[3] && attr[3] != attr[5]
:   call append('$', "Attribut 0 and 1 and 3 and 5 are different!")
:else
:   call append('$', "Not all attributes are different")
:endif
:set cpo&vim linebreak selection=exclusive
:"
:let g:test ="Test 8: set linebreak with visual block mode and v_b_A and selection=excll[22;1H[1m[34m+[musive and multibyte char"
:$put =g:test
Golong line: [34m^[[m40afoobar [34m^[[maTARGETÃ' at end[34m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:"
:let g:test ="Test 9: a multibyte sign and colorcolumn"
:let attr=[]
:let attr2=[]
:$put =''
:$put ='a b c'
:$put ='a b c'
:set list nolinebreak cc=3
:sign define foo text=[34m^V[muff0b
:sign place 1 name=foo line=50 buffer=2
:norm! 2kztj
:let line1=line('.')
0GGlGGlGGlGGl
:let line2=line('.')
:let attr2=attr
:let attr=[]
0GGlGGlGGlGGl
:redraw!
:let line=ScreenChar(winwidth(0),3)
:call DoRecordScreen()
:" expected: attr[2] is different because of colorcolumn
:if attr[0] != attr2[0] || attr[1] != attr2[1] || attr[2] != attr2[2]
:   call append('$', "Screen attributes are different!")
:else
:   call append('$', "Screen attributes are the same!")
:endif
:%w! test.out
:qa!
ENDTEST
dummy text
[7mtest_listlbr_utf8.in                                                                   [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet line=ScreenChar(winwidth(0),1)[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l[2;1H                                        
Test 5: set linebreak list listchars and
eeeeee>--->-;>some text                 [1;42H#define >CDEFG>->---1                         [2;42H#define >CDEFGH>----1                         [3;42H#define >_FILE>--------->--->---1             [4;42H#define >_CONSOLE>---------->---2             [5;42H#define >_FILE_AND_CONSOLE>---------3         [6;42H                                              [7;42H                                              [8;42H                                              [9;42H                                              [10;42H                                              [6;42Hbbeeeeee    ; some text[8;42HTest 5: set linebreak list listchars and conce[9;42H[1m[34m+[maling part2[10;42Heeeeee>--->-;>some text                 [57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 6: Screenattributes for comment"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =g:test[?25l[5;1HTest 6: Screenattributes for comment    [5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall append('$', ' /*[34m^I^I[m and some more */')[?25l[6;1H /*[34m>>-[m and some more */                 [5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexe "set ft=c ts=7 linebreak list listchars=nbsp:\u2423,tab:\u2595\u2014,trail:\u02d1
[56;87H,[57;1Heol:\ub6"[?25l[1;1H[L[1;1Heeeeee[34m▕[1;8H—[1;9H—[1;10H—[1;11H—[1;12H—[1;13H—[1;14H—[1;15H▕[1;16H—[1;17H—[1;18H—[1;19H—[1;20H—[1;21H—[m[1;22H;[34m▕[1;24H—[1;25H—[1;26H—[1;27H—[1;28H—[m[1;29Hsome text[1m[34m¶[m[1;41H[7m|[m
[1m[34m¶[m[4;24H[34mˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑ[m[5;37H[1m[34m¶[m[6;4H[34m▕[6;5H—[6;6H—[6;7H—[6;8H▕[6;9H—[6;10H—[6;11H—[6;12H—[6;13H—[6;14H—[m[6;15H and some more */[1m[34m¶[m[1;42H#define >CDEFG>->---1[6;54H         ;      some text[57;1H[K[5;1H[?12l[?25h[?25l[57;1H:[?12l[?25hsyntax on[?25l[1;1Hbbeeeeee[34m▕[m[1;29Hsome text[3;6H[31m5[m[4;14H>some text[5;6H[31m6[m[19C[33mfor[m
 [34m/*[11C and some more */[m[1;42H[35m#define >CDEFG>->---[m[31m1[m[35m                   [2;42H#define >CDEFGH>----[m[31m1[m[35m                   [3;42H#define >_FILE>--------->--->---[m[31m1[m[35m       [4;42H#define >_CONSOLE>---------->---[m[31m2[m[35m       [5;42H#define >_FILE_AND_CONSOLE>---------[m[31m3[m[35m   [m[6;42Hbbeeeeee[20Csome text[8;47H[31m5[m[10;55H>some text                 [5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hhi SpecialKey term=underline ctermfg=red guifg=red[?25l[1;9H[1m[31m▕[1;10H—[1;11H—[1;12H—[1;13H—[1;14H—[1;15H▕[1;16H—[1;17H—[1;18H—[1;19H—[1;20H—[1;21H—[1;23H▕[1;24H—[1;25H—[1;26H—[1;27H—[1;28H—[4;24Hˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑ[6;4H▕[6;5H—[6;6H—[6;7H—[6;8H▕[6;9H—[6;10H—[6;11H—[6;12H—[6;13H—[6;14H—[24;14H^[[10C^[[16C^[[34;23H^V[5;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet attr=[][?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnnoremap <expr> GG ":let attr += ['".screenattr(screenrow(),screencol())."']\n"[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$[?25l[6;2H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnorm! zt0[?25l[1;1H [34m/*[m[1m[31m▕[1;5H—[1;6H—[1;7H—[1;8H▕[1;9H—[1;10H—[1;11H—[1;12H—[1;13H—[1;14H—[m[1;15H[34m and some more */[m[1m[34m¶[m[1;33H        
[1m[34m~                                       
~                                       
~                                       
~                                       [m
                                        
                                        
                                        
                                        
                                        [6;1H[1m[34m~                                       
~                                       
~                                       
~                                       
~                                       [m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:let attr += ['0'][1;1H[?12l[?25h[1;2H[?25l[57;1H[K[57;1H:let attr += ['68'][1;2H[?12l[?25h[1;3H[?25l[57;1H[K[57;1H:let attr += ['68'][1;3H[?12l[?25h[1;4H[?25l[57;1H[K[57;1H:let attr += ['106'][1;4H[?12l[?25h[1;8H[?25l[57;1H[K[57;1H:let attr += ['106'][1;8H[?12l[?25h[1;15H[?25l[57;1H[K[57;1H:let attr += ['68'][1;15H[?12l[?25h[1;16H[?25l[57;1H[K[57;1H:let attr += ['68'][1;16H[?12l[?25h[1;17H[?25l[57;1H[K[57;1H:let attr += ['68'][1;17H[?12l[?25h[1;18H[?25l[57;1H[K[57;1H:let attr += ['68'][1;18H[?12l[?25h[1;19H[?25l[57;1H[K[57;1H:let attr += ['68'][1;19H[?12l[?25h[1;20H[1;20H[?25l[57;1H[K[57;1H:[?12l[?25hcall append('$', ['ScreenAttributes for test6:'])[?25l[2;1HScreenAttributes [33mfor[m test6:[1m[34m¶[m[2;29H            [1;20H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif attr[0] != attr[1] && attr[1] != attr[3] && attr[3] != attr[5][?25l
:  [?12l[?25h:   call append('$', "Attribut 0 and 1 and 3 and 5 are different!")
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h:   call append('$', "Not all attributes are different")
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;2H[34m/*[m[1m[31m▕[1;5H—[1;6H—[1;7H—[1;8H▕[1;9H—[1;10H—[1;11H—[1;12H—[1;13H—[1;14H—[m[1;15H[34m and some more */[m[1m[34m¶[m[1;41H[7m|[m
ScreenAttributes [33mfor[m test6:[1m[34m¶[m[2;41H[7m|[m
Attribut [31m0[m and [31m1[m and [31m3[m and [31m5[m are differe[7m|[4;41H|[m[1m[34m~                                       [m[1;42H[35m#define >CDEFG>->---[m[31m1[m[35m                   [2;42H#define >CDEFGH>----[m[31m1[m[35m                   [3;42H#define >_FILE>--------->--->---[m[31m1[m[35m       [4;42H#define >_CONSOLE>---------->---[m[31m2[m[35m       [m[57;1H[K[1;20H[?12l[?25h[?25l[57;1H:[?12l[?25hset cpo&vim linebreak selection=exclusive[?25l[1;20H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;20H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 8: set linebreak with visual block mode and v_b_A and selection=exc
[56;87Hl[57;1Husive and multibyte char"[?25l[1;1H[L[1;2H[34m/*[m[1m[31m▕[1;5H—[1;6H—[1;7H—[1;8H▕[1;9H—[1;10H—[1;11H—[1;12H—[1;13H—[1;14H—[m[1;15H[34m and some more */[m[1m[34m¶[m[1;41H[7m|[m[35m#define >CDEFG>->---[m[31m1[m[35m                   [m[57;1H[K[1;20H[?12l[?25h[?25l[57;1H:[?12l[?25h$put =g:test[?25l[4;1HTest [31m8[m: set linebreak with visual block [4;1H[?12l[?25h[4;1H[?25l[5;1H[32mlong[m line:[1m[31mˑ[m[1m[34m¶[m[5;13H                            [5;11H[?12l[?25h[?25l[1;1H[1m[34m¶[m[1;2H                                
[1m[34m¶[m[2;2H                            
[1m[34m¶[m[3;2H                                       
[1m[34m¶[m[4;2H                                      
oobar foobar foobar foobar foobar[1m[31mˑ[m[1m[34m¶[5;34H[?12l[?25h[?25l[mfoobar foobar TARGET[1m[34m¶[m[5;22H               [5;21H[?12l[?25h[?25lÃ' at end[1m[34m¶[5;29H[?12l[?25h[5;29H[?25l[m[57;1H[K[57;1H:[?12l[?25hexe "norm! $3B\<C-v>eAx\<Esc>"[?25l[5;22Hx' at end[1m[34m¶[5;15H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[5;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet g:test ="Test 9: a multibyte sign and colorcolumn"[?25l[5;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet attr=[][?25l[5;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet attr2=[][?25l[5;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;1H [34m/*[m[1m[31m▕[1;5H—[1;6H—[1;7H—[1;8H▕[1;9H—[1;10H—[1;11H—[1;12H—[1;13H—[1;14H—[m[1;15H[34m and some more */[m[1m[34m¶[m[2;1HScreenAttributes [33mfor[m test6:[1m[34m¶[m[3;1HAttribut [31m0[m and [31m1[m and [31m3[m and [31m5[m are differe
Test [31m8[m: set linebreak with visual block
[32mlong[m line: foobar foobar foobar foobar f
[1m[34m¶[m[6;2H                                       [6;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='a b c'[?25l[7;1Ha b c[1m[34m¶[m[7;7H                                  [7;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='a b c'[?25l[8;1Ha b c[1m[34m¶[m[8;7H                                  [8;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset list nolinebreak cc=3[?25l[1;3H[34m[41m*[m
Sc[41mr
[mAt[41mt
[mTe[41ms[m[5;3H[32m[41mn[m[6;3H[41m 
[ma [41mb
[ma [41mb[8;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hsign define foo text=^＋[?25l[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsign place 1 name=foo line=50 buffer=2[?25l[1;1H[34m[47m  [m [34m/[m[34m[41m*[m[1m[31m▕[1;7H—[1;8H—[1;9H—[1;10H▕[1;11H—[1;12H—[1;13H—[1;14H—[1;15H—[1;16H—[m[1;17H[34m and some more */[m[1m[34m¶[m[2;1H[34m[47m  [mSc[41mr[meenAttributes [33mfor[m test6:[1m[34m¶[m[3;1H[34m[47m  [mAt[41mt[mribut [31m0[m and [31m1[m and [31m3[m and [31m5[m are diff
[34m[47m  [mTe[41ms[mt [31m8[m: set linebreak with visual bloc
[34m[47m  [m[32mlo[m[32m[41mn[m[32mg[m line: foobar foobar foobar foobar
[34m[47m  [m[1m[34m¶[m[6;5H[41m [m
＋a [41mb[m c[1m[34m¶[m[8;1H[34m[47m  [ma [41mb[m c[1m[34m¶[m[9;1H[34m[47m  
  [m[9;3H[1m[34m~[10;3H~[m[1;42H[34m[47m  [m[35m#define >CDEFG>->---[m[31m1[m[17C[35m  [m[2;42H[34m[47m  [m[35m#define >CDEFGH>----[m[31m1[m[17C[35m  [m[3;42H[34m[47m  [m[35m#define >_FILE>[7C-->--->---[m[31m1[m[5C[35m  [m[4;42H[34m[47m  [m[35m#define >_CONSOLE>[8C-->---[m[31m2[m[5C[35m  [m[5;42H[34m[47m  [m[35m#define >_FILE_AND_CONSOLE>[7C--[m[31m3[m[1C[35m  [m[6;42H[34m[47m  [mbbeeeeee[11C  ;      some text[7;42H[34m[47m  [8;42H  [mTest [31m5[m: set linebreak list listchars and con[9;42H[34m[47m  [m[1m[34m+[mcealing part2[10;42H[34m[47m  [meeeeee>--->-;>some text[8;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnorm! 2kztj[?25l[1;1H[34m[47m  [m[1m[34m¶[m[1;4H [41m [m                                   
＋a [41mb[m c[1m[34m¶[m[2;9H                                
[34m[47m  [ma [41mb[m c[1m[34m¶[m[3;9H                                
[34m[47m  [m[1m[34m~                                     [m
[34m[47m  [m[1m[34m~                                     [m
                                        
                                        
                                        
                                        
                                        [6;1H[34m[47m  
  
  
  
  [m[6;3H[1m[34m~                                     [7;3H~                                     [8;3H~                                     [9;3H~                                     [10;3H~                                     [m[57;1H[K[2;3H[?12l[?25h[?25l[57;1H:[?12l[?25hlet line1=line('.')[?25l[2;3H[?12l[?25h[2;3H[?25l[57;1H[K[57;1H:let attr += ['0'][2;3H[?12l[?25h[2;4H[?25l[57;1H[K[57;1H:let attr += ['0'][2;4H[?12l[?25h[2;5H[?25l[57;1H[K[57;1H:let attr += ['91'][2;5H[?12l[?25h[2;6H[?25l[57;1H[K[57;1H:let attr += ['0'][2;6H[?12l[?25h[2;7H[3;7H[?25l[57;1H[K[57;1H:[?12l[?25hlet line2=line('.')[?25l[3;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet attr2=attr[?25l[3;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet attr=[][?25l[3;7H[?12l[?25h[3;3H[?25l[57;1H[K[57;1H:let attr += ['0'][3;3H[?12l[?25h[3;4H[?25l[57;1H[K[57;1H:let attr += ['0'][3;4H[?12l[?25h[3;5H[?25l[57;1H[K[57;1H:let attr += ['91'][3;5H[?12l[?25h[3;6H[?25l[57;1H[K[57;1H:let attr += ['0'][3;6H[?12l[?25h[3;7H[3;7H[?25l[57;1H[K[57;1H:[?12l[?25hredraw![?25l[27m[23m[m[H[2J[1;1H[34m[47m  [m[1m[34m¶[m[1;5H[41m [m[35C[7m|[m
＋a [41mb[m c[1m[34m¶[m[2;41H[7m|[m
[34m[47m  [ma [41mb[m c[1m[34m¶[m[3;41H[7m|[4;41H|[5;41H|[6;41H|[7;41H|[8;41H|[9;41H|[10;41H|[m[4;1H[34m[47m  
  
  
  
  
  
  [m[4;3H[1m[34m~                                     [5;3H~                                     [6;3H~                                     [7;3H~                                     [8;3H~                                     [9;3H~                                     [10;3H~                                     [m
[1m[7m[No Name] [+]                            [m[1;42H[34m[47m  [m[35m#define >CDEFG>->---[m[31m1[m[35m                   [m[2;42H[34m[47m  [m[35m#define >CDEFGH>----[m[31m1[m[35m                   [m[3;42H[34m[47m  [m[35m#define >_FILE>--------->--->---[m[31m1[m[35m       [m[4;42H[34m[47m  [m[35m#define >_CONSOLE>---------->---[m[31m2[m[35m       [m[5;42H[34m[47m  [m[35m#define >_FILE_AND_CONSOLE>---------[m[31m3[m[35m   [m[6;42H[34m[47m  [mbbeeeeee[13C;      some text[7;42H[34m[47m  [8;42H  [mTest [31m5[m: set linebreak list listchars and con[9;42H[34m[47m  [m[1m[34m+[mcealing part2[10;42H[34m[47m  [meeeeee>--->-;>some text[11;42H[7m[No Name] [+]                                 [m[12;1HGGlGGlGGlGGlGGlGGlGGlGGlGGlGGl
:call append('$', ['ScreenAttributes for test6:'])
:if attr[0] != attr[1] && attr[1] != attr[3] && attr[3] != attr[5]
:   call append('$', "Attribut 0 and 1 and 3 and 5 are different!")
:else
:   call append('$', "Not all attributes are different")
:endif
:set cpo&vim linebreak selection=exclusive
:"
:let g:test ="Test 8: set linebreak with visual block mode and v_b_A and selection=excll[22;1H[1m[34m+[musive and multibyte char"
:$put =g:test
Golong line: [1m[31m^[[m40afoobar [1m[31m^[[maTARGETÃ' at end[1m[31m^[[m
:exe "norm! $3B\<C-v>eAx\<Esc>"
:"
:let g:test ="Test 9: a multibyte sign and colorcolumn"
:let attr=[]
:let attr2=[]
:$put =''
:$put ='a b c'
:$put ='a b c'
:set list nolinebreak cc=3
:sign define foo text=[1m[31m^V[muff0b
:sign place 1 name=foo line=50 buffer=2
:norm! 2kztj
:let line1=line('.')
0GGlGGlGGlGGl
:let line2=line('.')
:let attr2=attr
:let attr=[]
0GGlGGlGGlGGl
:redraw!
:let line=ScreenChar(winwidth(0),3)
:call DoRecordScreen()
:" expected: attr[2] is different because of colorcolumn
:if attr[0] != attr2[0] || attr[1] != attr2[1] || attr[2] != attr2[2]
:   call append('$', "Screen attributes are different!")
:else
:   call append('$', "Screen attributes are the same!")
:endif
:%w! test.out
:qa!
ENDTEST
dummy text
[7mtest_listlbr_utf8.in                                                                   [3;7H[?12l[?25h[?25l[57;1H[m:[?12l[?25hlet line=ScreenChar(winwidth(0),3)[?25l[3;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall DoRecordScreen()[?25l[57;1H3 more lines[57;13H[K[4;3H[1m[34m¶[m[4;4H [41m [m                                   [5;3HTe[41ms[mt [31m9[m: a multibyte sign and colorcolu[6;3H  [41m¶[m[6;6H[1m[31mˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑ[m[7;3H＋[41ma[m b c¶[7;11H[1m[31mˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑ[m[8;3H  [41ma[m b c¶[8;11H[1m[31mˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑˑ[m[1;44H[K[2;42H＋a b c[2;49H[K[3;44Ha b c[3;49H[K[4;44H[K[5;44HTest [31m9[m: a multibyte sign and colorcolumn[6;44H  ¶[6;47H     [13C                [7;44H＋a b c¶[8;44H  a b c¶[8;52H                                [8;85H[K[9;44H[1m[34m~                                           [10;44H~                                           [3;7H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h" expected: attr[2] is different because of colorcolumn[?25l[3;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif attr[0] != attr2[0] || attr[1] != attr2[1] || attr[2] != attr2[2][?25l
:  [?12l[?25h:   call append('$', "Screen attributes are different!")
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h:   call append('$', "Screen attributes are the same!")
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1H[34m[47m  [m[1m[34m¶[m[1;5H[41m [m[35C[7m|[m
＋a [41mb[m c[1m[34m¶[m[2;41H[7m|[m
[34m[47m  [ma [41mb[m c[1m[34m¶[m[3;41H[7m|[m
[34m[47m  [m[1m[34m¶[m[4;5H[41m [m[35C[7m|[m[9;3HSc[41mr[meen attributes are the same![1m[34m¶[m[9;35H      [1;42H[34m[47m  [m[2;42H＋a b c[3;42H[34m[47m  [ma b c[4;42H[34m[47m  [m[9;44HScreen attributes are the same![9;75H[K[57;1H[K[3;7H[?12l[?25h[?25l[57;1H:[?12l[?25h%w! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 57 lines, 1882 characters written[11;1H[1m[7mtest.out]      [m[27C[7mtest.out     [3;7H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test_listlbr_utf8 = test61; then \
#	  if diff test.out test_listlbr_utf8.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test_listlbr_utf8.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test_listlbr_utf8.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test54.failed test.ok test.out X* viminfo
cp test54.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test54.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test54.in" 22 lines, 658 characters[1;1HSome tests for buffer-local autocommands

STARTTEST
:so small.vim
:e xx
:if has("vms")
: !del test.out.*
: au BufLeave <buffer> :!write sys$output "buffer-local autommand in %" > test.out
:else
: !rm -f test.out
: au BufLeave <buffer> :!echo buffer-local autommand in %>> test.out
:endif
:e somefile[11C" here, autocommand for xx shall write test.out
:[21C" but autocommand shall not apply to buffer named <buffer>
:bwipe xx[13C" here, autocommand shall be auto-deleted
:e xx[17C" nothing shall be written
:e somefile[11C" nothing shall be written
:qa!
ENDTEST

start of test file xx
end of test file xx
[1m[34m~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HSome tests for buffer-local autocommands[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 15 lines, 555 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[19;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[20;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he xx[?25l"xx" [New File][1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hif has("vms")[?25l
:  [?12l[?25h: !del test.out.*
[?25l:  [?12l[?25h: au BufLeave <buffer> :!write sys$output "buffer-local autommand in %" > test.out
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: !rm -f test.out
[?25l:!rm -f test.out[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:  :[?12l[?25h au BufLeave <buffer> :!echo buffer-local autommand in %>> test.out
[?25l:  [?12l[?25h:endif[?25l[57;1H[K[57;1H:[?12l[?25he somefile           " here, autocommand for xx shall write test.out [?25l:!echo buffer-local autommand in xx>> test.out[57;47H[K[57;47H
[?12l[?25h[?25l[m"somefile" [New File]
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h                     " but autocommand shall not apply to buffer named <buffer>[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hbwipe xx             " here, autocommand shall be auto-deleted[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he xx                 " nothing shall be written[?25l"xx" [New File][57;23H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he somefile           " nothing shall be written[?25l"somefile" [New File][57;23H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[?1l>[?12l[?25h[?1049l
# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test54 = test61; then \
#	  if diff test.out test54.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test54.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test54.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test17.failed test.ok test.out X* viminfo
cp test17.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test17.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test17.in" 135 lines, 2431 characters[1;1HTests for:
- "gf" on ${VAR},
- ":checkpath!" with various 'include' settings.

STARTTEST
:so small.vim
:if has("ebcdic")
: set isfname=@,240-249,/,.,-,_,+,,,$,:,~,{,}
:else
: set isfname=@,48-57,/,.,-,_,+,,,$,:,~,{,}
:endif
:"
:if has("unix")
:let $CDIR = "."
/CDIR
:else
:if has("amiga")
:let $TDIR = "/testdir"
:else
:let $TDIR = "."
:endif
/TDIR
:endif
:" Dummy writing for making that sure gf doesn't fail even if the current
:" file is modified. It can be occurred when executing the following command
:" directly on Windows without fixing the 'fileformat':
:"  > nmake -f Make_dos.mak test17.out
:w! test.out
gf
:set ff=unix
:w! test.out
:brewind
ENDTEST[35;9H${CDIR}/test17a.in[36;9H$TDIR/test17a.in

STARTTEST
:" check for 'include' without \zs or \ze
:lang C
:call delete("./Xbase.a")
:call delete("Xdir1", "rf")
:!mkdir Xdir1
:!mkdir "Xdir1/dir2"
:e! Xdir1/dir2/foo.a
i#include   "bar.a"[34m^[[m:
:w
:e Xdir1/dir2/bar.a
i#include      "baz.a"[34m^[[m:
:w
:e Xdir1/dir2/baz.a
i#include[12C"foo.a"[34m^[[m:
:w
:e Xbase.a
:set path=Xdir1/dir2
i#include    <foo.a>[34m^[[m:[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for:[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[5;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 27 lines, 564 characters written[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[6;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[33;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[34;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[34;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif has("ebcdic")[?25l
:  [?12l[?25h: set isfname=@,240-249,/,.,-,_,+,,,$,:,~,{,}
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: set isfname=@,48-57,/,.,-,_,+,,,$,:,~,{,}
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1HTests for:
- "gf" on ${VAR},
- ":checkpath!" with various 'include' settings.[57;1H[K[34;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[34;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif has("unix")[?25l
:  [?12l[?25h:let $CDIR = "."
[?25l:  [?12l[?25h/CDIR
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h:if has("amiga")
[?25l:    [?12l[?25h:let $TDIR = "/testdir"
[?25l:    [?12l[?25h:else
[?25l:    [?12l[?25h:let $TDIR = "."
[?25l:    [?12l[?25h:endif
[?25l:  [?12l[?25h/TDIR
[?25l:  [?12l[?25h:endif[1;1H[10L[?25l[1;1HTests for:
- "gf" on ${VAR},
- ":checkpath!" with various 'include' settings.

STARTTEST
:so small.vim
:if has("ebcdic")
: set isfname=@,240-249,/,.,-,_,+,,,$,:,~,{,}
:else
: set isfname=@,48-57,/,.,-,_,+,,,$,:,~,{,}[57;1H[K[35;9H[?12l[?25h[?25l[57;1H:[?12l[?25h" Dummy writing for making that sure gf doesn't fail even if the current[?25l[35;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" file is modified. It can be occurred when executing the following command[?25l[35;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" directly on Windows without fixing the 'fileformat':[?25l[35;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"  > nmake -f Make_dos.mak test17.out[?25l[35;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 135 lines, 2431 characters written[35;9H[?12l[?25h[?25l[57;2H/sources/vim80/src/testdir/./test17a.in" [57;43H[K[57;43H3 lines, 88 characters[1;2Hhis file is just to test "gf" in test 17.
The contents is not important.
Just testing![3;14H[K[4;1H[1m[34m~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h
[?25l[m[57;1H[K[57;1H:[?12l[?25hset ff=unix[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H3 lines, 88 characters written[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbrewind[?25l"test17.in" 135 lines, 2431 characters[1;1H: set isfname=@,240-249,/,.,-,_,+,,,$,:,~,{,}
:else[2;6H[K[3;1H: set isfname=@,48-57,/,.,-,_,+,,,$,:,~,{,}
:endif[4;7H[K[5;1H:"[5;3H[K[6;1H:if has("unix")[6;16H[K[7;1H:let $CDIR = "."[7;17H[K[8;1H/CDIR[8;6H[K[9;1H:else[9;6H[K[10;1H:if has("amiga")[10;17H[K[11;1H:let $TDIR = "/testdir"[11;24H[K[12;1H:else[12;6H[K[13;1H:let $TDIR = "."[13;17H[K[14;1H:endif[14;7H[K[15;1H/TDIR[15;6H[K[16;1H:endif[16;7H[K[17;1H:" Dummy writing for making that sure gf doesn't fail even if the current[17;74H[K[18;1H:" file is modified. It can be occurred when executing the following command[18;77H[K[19;1H:" directly on Windows without fixing the 'fileformat':[19;56H[K[20;1H:"  > nmake -f Make_dos.mak test17.out[20;39H[K[21;1H:w! test.out[21;13H[K[22;1Hgf[22;3H[K[23;1H:set ff=unix[23;13H[K[24;1H:w! test.out[24;13H[K[25;1H:brewind[25;9H[K[26;1HENDTEST[26;8H[K[27;1H[K[28;1H        ${CDIR}/test17a.in[28;27H[K[29;1H        $TDIR/test17a.in[29;25H[K[30;1H[K[31;1HSTARTTEST[31;10H[K[32;1H:" check for 'include' without \zs or \ze[32;42H[K[33;1H:lang C[33;8H[K[34;1H:call delete("./Xbase.a")[34;26H[K[35;1H:call delete("Xdir1", "rf")[35;28H[K[36;1H:!mkdir Xdir1[36;14H[K[37;1H:!mkdir "Xdir1/dir2"[37;21H[K[38;1H:e! Xdir1/dir2/foo.a[38;21H[K[39;1Hi#include   "bar.a"[34m^[[m:[39;23H[K[40;1H:w[40;3H[K[41;1H:e Xdir1/dir2/bar.a[41;20H[K[42;1Hi#include      "baz.a"[34m^[[m:[42;26H[K[43;1H:w[43;3H[K[44;1H:e Xdir1/dir2/baz.a[44;20H[K[45;1Hi#include            "foo.a"[34m^[[m:[45;32H[K[46;1H:w[46;3H[K[47;1H:e Xbase.a[47;11H[K[48;1H:set path=Xdir1/dir2[48;21H[K[49;1Hi#include    <foo.a>[34m^[[m:[49;24H[K[50;1H:w[50;3H[K[51;1H:redir! >>test.out[51;19H[K[52;1H:checkpath![52;12H[K[53;1H:redir END[53;11H[K[54;1H:brewind[54;9H[K[55;1HENDTEST[55;8H[K[56;1H[K[28;8H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[31;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H23 lines, 396 characters written[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[32;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[55;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" check for 'include' without \zs or \ze[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlang C[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall delete("./Xbase.a")[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall delete("Xdir1", "rf")[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h!mkdir Xdir1[?25l[13C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h!mkdir "Xdir1/dir2"[?25l[20C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25he! Xdir1/dir2/foo.a[?25l"Xdir1/dir2/foo.a" [New File][27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m#include   "bar.a"[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[1;18H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xdir1/dir2/foo.a" [New File] 1 line, 19 characters written[1;18H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xdir1/dir2/bar.a[?25l"Xdir1/dir2/bar.a" [New File][1;1H[K[1;1H[?12l[?25h[?25l#include      "baz.a"[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;21H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xdir1/dir2/bar.a" [New File] 1 line, 22 characters written[1;21H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xdir1/dir2/baz.a[?25l"Xdir1/dir2/baz.a" [New File][1;1H[K[1;1H[?12l[?25h[?25l#include[12C"foo.a"[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;27H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xdir1/dir2/baz.a" [New File] 1 line, 28 characters written[1;27H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xbase.a[?25l"Xbase.a" [New File][1;1H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset path=Xdir1/dir2[?25l[1;1H[?12l[?25h[?25l#include    <foo.a>[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;19H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xbase.a" [New File] 1 line, 20 characters written[1;19H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir! >>test.out[?25l[1;19H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcheckpath![?25l[57;1H[K[57;1H[35m--- Included files in path ---[m
[34mXdir1/dir2/foo.a[m
Xdir1/dir2/foo.a -->
  [34mXdir1/dir2/bar.a[m
  Xdir1/dir2/bar.a -->
    [34mXdir1/dir2/baz.a[m
    Xdir1/dir2/baz.a -->
      [34m"foo.a"[m  (Already listed)
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[8L[1;1H#include    <foo.a>
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [m[57;1H[K[1;19H[?12l[?25h[?25l[57;1H:[?12l[?25hbrewind[?25l"test17.in" 135 lines, 2431 characters[1;1H        $TDIR/test17a.in[2;1H[K[3;1HSTARTTEST[3;10H[K[4;1H:" check for 'include' without \zs or \ze[4;42H[K[5;1H:lang C[5;8H[K[6;1H:call delete("./Xbase.a")[6;26H[K[7;1H:call delete("Xdir1", "rf")[7;28H[K[8;1H:!mkdir Xdir1[8;14H[K[9;1H:!mkdir "Xdir1/dir2"[9;21H[K[10;1H:e! Xdir1/dir2/foo.a[10;21H[K[11;1Hi#include   "bar.a"[34m^[[m:[11;23H[K[12;1H:w[12;3H[K[13;1H:e Xdir1/dir2/bar.a[13;20H[K[14;1Hi#include      "baz.a"[34m^[[m:[14;26H[K[15;1H:w[15;3H[K[16;1H:e Xdir1/dir2/baz.a[16;20H[K[17;1Hi#include            "foo.a"[34m^[[m:[17;32H[K[18;1H:w[18;3H[K[19;1H:e Xbase.a[19;11H[K[20;1H:set path=Xdir1/dir2[20;21H[K[21;1Hi#include    <foo.a>[34m^[[m:[21;24H[K[22;1H:w[22;3H[K[23;1H:redir! >>test.out[23;19H[K[24;1H:checkpath![24;12H[K[25;1H:redir END[25;11H[K[26;1H:brewind[26;9H[K[27;1HENDTEST[27;8H[K[28;1H[K[29;1HSTARTTEST[29;10H[K[30;1H:" check for 'include' with \zs and \ze[30;40H[K[31;1H:call delete("./Xbase.b")[31;26H[K[32;1H:call delete("Xdir1", "rf")[32;28H[K[33;1H:!mkdir Xdir1[33;14H[K[34;1H:!mkdir "Xdir1/dir2"[34;21H[K[35;1H:let &include='^\s*%inc\s*/\zs[^/]\+\ze'[35;41H[K[36;1H:function! DotsToSlashes()[36;27H[K[37;1H:  return substitute(v:fname, '\.', '/', 'g') . '.b'[37;53H[K[38;1H:endfunction[38;13H[K[39;1H:let &includeexpr='DotsToSlashes()'[39;36H[K[40;1H:e! Xdir1/dir2/foo.b[40;21H[K[41;1Hi%inc   /bar/[34m^[[m:[41;17H[K[42;1H:w[42;3H[K[43;1H:e Xdir1/dir2/bar.b[43;20H[K[44;1Hi%inc      /baz/[34m^[[m:[44;20H[K[45;1H:w[45;3H[K[46;1H:e Xdir1/dir2/baz.b[46;20H[K[47;1Hi%inc            /foo/[34m^[[m:[47;26H[K[48;1H:w[48;3H[K[49;1H:e Xbase.b[49;11H[K[50;1H:set path=Xdir1/dir2[50;21H[K[51;1Hi%inc    /foo/[34m^[[m:[51;18H[K[52;1H:w[52;3H[K[53;1H:redir! >>test.out[53;19H[K[54;1H:checkpath![54;12H[K[55;1H:redir END[55;11H[K[56;1H:brewind[56;9H[K[28;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[29;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H27 lines, 532 characters written[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[30;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[56;1H
[1;57r[56;1HENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" check for 'include' with \zs and \ze[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall delete("./Xbase.b")[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall delete("Xdir1", "rf")[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h!mkdir Xdir1[?25l[13C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h!mkdir "Xdir1/dir2"[?25l[20C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25hlet &include='^\s*%inc\s*/\zs[^/]\+\ze'[?25l[27m[23m[m[H[2J[1;1HSTARTTEST
:" check for 'include' without \zs or \ze
:lang C
:call delete("./Xbase.a")
:call delete("Xdir1", "rf")
:!mkdir Xdir1
:!mkdir "Xdir1/dir2"
:e! Xdir1/dir2/foo.a
i#include   "bar.a"[34m^[[m:
:w
:e Xdir1/dir2/bar.a
i#include      "baz.a"[34m^[[m:
:w
:e Xdir1/dir2/baz.a
i#include[12C"foo.a"[34m^[[m:
:w
:e Xbase.a
:set path=Xdir1/dir2
i#include    <foo.a>[34m^[[m:
:w
:redir! >>test.out
:checkpath!
:redir END
:brewind
ENDTEST

STARTTEST
:" check for 'include' with \zs and \ze
:call delete("./Xbase.b")
:call delete("Xdir1", "rf")
:!mkdir Xdir1
:!mkdir "Xdir1/dir2"
:let &include='^\s*%inc\s*/\zs[^/]\+\ze'
:function! DotsToSlashes()
:  return substitute(v:fname, '\.', '/', 'g') . '.b'
:endfunction
:let &includeexpr='DotsToSlashes()'
:e! Xdir1/dir2/foo.b
i%inc   /bar/[34m^[[m:
:w
:e Xdir1/dir2/bar.b
i%inc      /baz/[34m^[[m:
:w
:e Xdir1/dir2/baz.b
i%inc[12C/foo/[34m^[[m:
:w
:e Xbase.b
:set path=Xdir1/dir2
i%inc    /foo/[34m^[[m:
:w
:redir! >>test.out
:checkpath!
:redir END
:brewind
ENDTEST
[?12l[?25h[?25l
:[?12l[?25hfunction! DotsToSlashes()[?25l
:  [?12l[?25h:  return substitute(v:fname, '\.', '/', 'g') . '.b'
[?25l:  [?12l[?25h:endfunction[1;1H[2L[?25l[1;1HSTARTTEST
:" check for 'include' without \zs or \ze[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet &includeexpr='DotsToSlashes()'[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xdir1/dir2/foo.b[?25l"Xdir1/dir2/foo.b" [New File][1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m%inc   /bar/[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xdir1/dir2/foo.b" [New File] 1 line, 13 characters written[1;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xdir1/dir2/bar.b[?25l"Xdir1/dir2/bar.b" [New File][1;1H[K[1;1H[?12l[?25h[?25l%inc      /baz/[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xdir1/dir2/bar.b" [New File] 1 line, 16 characters written[1;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xdir1/dir2/baz.b[?25l"Xdir1/dir2/baz.b" [New File][1;1H[K[1;1H[?12l[?25h[?25l%inc[12C/foo/[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;21H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xdir1/dir2/baz.b" [New File] 1 line, 22 characters written[1;21H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xbase.b[?25l"Xbase.b" [New File][1;1H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset path=Xdir1/dir2[?25l[1;1H[?12l[?25h[?25l%inc    /foo/[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;13H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xbase.b" [New File] 1 line, 14 characters written[1;13H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir! >>test.out[?25l[1;13H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcheckpath![?25l[57;1H[K[57;1H[35m--- Included files in path ---[m
[34mXdir1/dir2/foo.b[m
Xdir1/dir2/foo.b -->
  [34mXdir1/dir2/bar.b[m
  Xdir1/dir2/bar.b -->
    [34mXdir1/dir2/baz.b[m
    Xdir1/dir2/baz.b -->
      [34mfoo[m  (Already listed)
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[8L[1;1H%inc    /foo/
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [m[57;1H[K[1;13H[?12l[?25h[?25l[57;1H:[?12l[?25hbrewind[?25l"test17.in" 135 lines, 2431 characters[1;1H:call delete("./Xbase.b")
:call delete("Xdir1", "rf")[2;28H[K[3;1H:!mkdir Xdir1[3;14H[K[4;1H:!mkdir "Xdir1/dir2"[4;21H[K[5;1H:let &include='^\s*%inc\s*/\zs[^/]\+\ze'[5;41H[K[6;1H:function! DotsToSlashes()[6;27H[K[7;1H:  return substitute(v:fname, '\.', '/', 'g') . '.b'[7;53H[K[8;1H:endfunction[8;13H[K[9;1H:let &includeexpr='DotsToSlashes()'[9;36H[K[10;1H:e! Xdir1/dir2/foo.b[10;21H[K[11;1Hi%inc   /bar/[34m^[[m:[11;17H[K[12;1H:w[12;3H[K[13;1H:e Xdir1/dir2/bar.b[13;20H[K[14;1Hi%inc      /baz/[34m^[[m:[14;20H[K[15;1H:w[15;3H[K[16;1H:e Xdir1/dir2/baz.b[16;20H[K[17;1Hi%inc            /foo/[34m^[[m:[17;26H[K[18;1H:w[18;3H[K[19;1H:e Xbase.b[19;11H[K[20;1H:set path=Xdir1/dir2[20;21H[K[21;1Hi%inc    /foo/[34m^[[m:[21;18H[K[22;1H:w[22;3H[K[23;1H:redir! >>test.out[23;19H[K[24;1H:checkpath![24;12H[K[25;1H:redir END[25;11H[K[26;1H:brewind[26;9H[K[27;1HENDTEST[27;8H[K[28;1H[K[29;1HSTARTTEST[29;10H[K[30;1H:" check for 'include' with \zs and no \ze[30;43H[K[31;1H:call delete("./Xbase.c")[31;26H[K[32;1H:call delete("Xdir1", "rf")[32;28H[K[33;1H:!mkdir Xdir1[33;14H[K[34;1H:!mkdir "Xdir1/dir2"[34;21H[K[35;1H:let &include='^\s*%inc\s*\%([[:upper:]][^[:space:]]*\s\+\)\?\zs\S\+\ze'[35;73H[K[36;1H:function! StripNewlineChar()[36;30H[K[37;1H:  if v:fname =~ '\n$'[37;23H[K[38;1H:    return v:fname[:-2][38;25H[K[39;1H:  endif[39;9H[K[40;1H:  return v:fname[40;18H[K[41;1H:endfunction[41;13H[K[42;1H:let &includeexpr='StripNewlineChar()'[42;39H[K[43;1H:e! Xdir1/dir2/foo.c[43;21H[K[44;1Hi%inc   bar.c[34m^[[m:[44;17H[K[45;1H:w[45;3H[K[46;1H:e Xdir1/dir2/bar.c[46;20H[K[47;1Hi%inc      baz.c[34m^[[m:[47;20H[K[48;1H:w[48;3H[K[49;1H:e Xdir1/dir2/baz.c[49;20H[K[50;1Hi%inc            foo.c[34m^[[m:[50;26H[K[51;1H:w[51;3H[K[52;1H:e Xdir1/dir2/FALSE.c[52;22H[K[53;1Hi%inc            foo.c[34m^[[m:[53;26H[K[54;1H:w[54;3H[K[55;1H:e Xbase.c[55;11H[K[56;1H:set path=Xdir1/dir2[56;21H[K[28;1H[?12l[?25h[?25l[57;1H[K[57;1H/^STARTTEST[29;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H39 lines, 745 characters written[30;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[30;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[13M[1;57r[44;1Hi%inc    FALSE.c foo.c[34m^[[m:
:w
:redir! >>test.out
:checkpath!
:redir END
:brewind
:" change "\" to "/" for Windows and fix 'fileformat'
:e test.out
:%s#\\#/#g
:set ff&
:w
:q
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" check for 'include' with \zs and no \ze[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall delete("./Xbase.c")[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall delete("Xdir1", "rf")[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h!mkdir Xdir1[?25l[13C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25h!mkdir "Xdir1/dir2"[?25l[20C[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:[?12l[?25hlet &include='^\s*%inc\s*\%([[:upper:]][^[:space:]]*\s\+\)\?\zs\S\+\ze'[?25l[27m[23m[m[H[2J[1;1H:w
:e Xdir1/dir2/baz.b
i%inc[12C/foo/[34m^[[m:
:w
:e Xbase.b
:set path=Xdir1/dir2
i%inc    /foo/[34m^[[m:
:w
:redir! >>test.out
:checkpath!
:redir END
:brewind
ENDTEST

STARTTEST
:" check for 'include' with \zs and no \ze
:call delete("./Xbase.c")
:call delete("Xdir1", "rf")
:!mkdir Xdir1
:!mkdir "Xdir1/dir2"
:let &include='^\s*%inc\s*\%([[:upper:]][^[:space:]]*\s\+\)\?\zs\S\+\ze'
:function! StripNewlineChar()
:  if v:fname =~ '\n$'
:    return v:fname[:-2]
:  endif
:  return v:fname
:endfunction
:let &includeexpr='StripNewlineChar()'
:e! Xdir1/dir2/foo.c
i%inc   bar.c[34m^[[m:
:w
:e Xdir1/dir2/bar.c
i%inc      baz.c[34m^[[m:
:w
:e Xdir1/dir2/baz.c
i%inc[12Cfoo.c[34m^[[m:
:w
:e Xdir1/dir2/FALSE.c
i%inc[12Cfoo.c[34m^[[m:
:w
:e Xbase.c
:set path=Xdir1/dir2
i%inc    FALSE.c foo.c[34m^[[m:
:w
:redir! >>test.out
:checkpath!
:redir END
:brewind
:" change "\" to "/" for Windows and fix 'fileformat'
:e test.out
:%s#\\#/#g
:set ff&
:w
:q
ENDTEST
[?12l[?25h[?25l
:[?12l[?25hfunction! StripNewlineChar()[?25l
:  [?12l[?25h:  if v:fname =~ '\n$'
[?25l:    [?12l[?25h:    return v:fname[:-2]
[?25l:    [?12l[?25h:  endif
[?25l:  [?12l[?25h:  return v:fname
[?25l:  [?12l[?25h:endfunction[1;1H[5L[?25l[1;1H:w
:e Xdir1/dir2/baz.b
i%inc[12C/foo/[34m^[[m:
:w
:e Xbase.b[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hlet &includeexpr='StripNewlineChar()'[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xdir1/dir2/foo.c[?25l"Xdir1/dir2/foo.c" [New File][1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m%inc   bar.c[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xdir1/dir2/foo.c" [New File] 1 line, 13 characters written[1;12H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xdir1/dir2/bar.c[?25l"Xdir1/dir2/bar.c" [New File][1;1H[K[1;1H[?12l[?25h[?25l%inc      baz.c[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xdir1/dir2/bar.c" [New File] 1 line, 16 characters written[1;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xdir1/dir2/baz.c[?25l"Xdir1/dir2/baz.c" [New File][1;1H[K[1;1H[?12l[?25h[?25l%inc[12Cfoo.c[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;21H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xdir1/dir2/baz.c" [New File] 1 line, 22 characters written[1;21H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xdir1/dir2/FALSE.c[?25l"Xdir1/dir2/FALSE.c" [New File][1;1H[K[1;1H[?12l[?25h[?25l%inc[12Cfoo.c[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;21H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xdir1/dir2/FALSE.c" [New File] 1 line, 22 characters written[1;21H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xbase.c[?25l"Xbase.c" [New File][1;1H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset path=Xdir1/dir2[?25l[1;1H[?12l[?25h[?25l%inc    FALSE.c foo.c[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;21H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xbase.c" [New File] 1 line, 22 characters written[1;21H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir! >>test.out[?25l[1;21H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcheckpath![?25l[57;1H[K[57;1H[35m--- Included files in path ---[m
[34mXdir1/dir2/foo.c[m
Xdir1/dir2/foo.c -->
  [34mXdir1/dir2/bar.c[m
  Xdir1/dir2/bar.c -->
    [34mXdir1/dir2/baz.c[m
    Xdir1/dir2/baz.c -->
      [34mfoo.c[m  (Already listed)
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir END[?25l[1;1H[8L[1;1H%inc    FALSE.c foo.c
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [m[57;1H[K[1;21H[?12l[?25h[?25l[57;1H:[?12l[?25hbrewind[?25l"test17.in" 135 lines, 2431 characters[1;1H:w[1;3H[K[2;1H:e Xdir1/dir2/baz.b[2;20H[K[3;1Hi%inc            /foo/[34m^[[m:[3;26H[K[4;1H:w[4;3H[K[5;1H:e Xbase.b[5;11H[K[6;1H:set path=Xdir1/dir2[6;21H[K[7;1Hi%inc    /foo/[34m^[[m:[7;18H[K[8;1H:w[8;3H[K[9;1H:redir! >>test.out[9;19H[K[10;1H:checkpath![10;12H[K[11;1H:redir END[11;11H[K[12;1H:brewind[12;9H[K[13;1HENDTEST[13;8H[K[14;1H[K[15;1HSTARTTEST[15;10H[K[16;1H:" check for 'include' with \zs and no \ze[16;43H[K[17;1H:call delete("./Xbase.c")[17;26H[K[18;1H:call delete("Xdir1", "rf")[18;28H[K[19;1H:!mkdir Xdir1[19;14H[K[20;1H:!mkdir "Xdir1/dir2"[20;21H[K[21;1H:let &include='^\s*%inc\s*\%([[:upper:]][^[:space:]]*\s\+\)\?\zs\S\+\ze'[21;73H[K[22;1H:function! StripNewlineChar()[22;30H[K[23;1H:  if v:fname =~ '\n$'[23;23H[K[24;1H:    return v:fname[:-2][24;25H[K[25;1H:  endif[25;9H[K[26;1H:  return v:fname[26;18H[K[27;1H:endfunction[27;13H[K[28;1H:let &includeexpr='StripNewlineChar()'[28;39H[K[29;1H:e! Xdir1/dir2/foo.c[29;21H[K[30;1Hi%inc   bar.c[34m^[[m:[30;17H[K[31;1H:w[31;3H[K[32;1H:e Xdir1/dir2/bar.c[32;20H[K[33;1Hi%inc      baz.c[34m^[[m:[33;20H[K[34;1H:w[34;3H[K[35;1H:e Xdir1/dir2/baz.c[35;20H[K[36;1Hi%inc            foo.c[34m^[[m:[36;26H[K[37;1H:w[37;3H[K[38;1H:e Xdir1/dir2/FALSE.c[38;22H[K[39;1Hi%inc            foo.c[34m^[[m:[39;26H[K[40;1H:w[40;3H[K[41;1H:e Xbase.c[41;11H[K[42;1H:set path=Xdir1/dir2[42;21H[K[43;1Hi%inc    FALSE.c foo.c[34m^[[m:[43;26H[K[44;1H:w[44;3H[K[45;1H:redir! >>test.out[45;19H[K[46;1H:checkpath![46;12H[K[47;1H:redir END[47;11H[K[48;1H:brewind[48;9H[K[49;1H:" change "\" to "/" for Windows and fix 'fileformat'[49;54H[K[50;1H:e test.out[50;12H[K[51;1H:%s#\\#/#g[51;11H[K[52;1H:set ff&[52;9H[K[53;1H:w[53;3H[K[54;1H:q[54;3H[K[55;1HENDTEST[55;8H[K[56;1H[K[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" change "\" to "/" for Windows and fix 'fileformat'[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he test.out[?25l"test.out" 33 lines, 655 characters[1;1HThis file is just to test "gf" in test 17.
The contents is not important.
Just testing![3;18H[K[4;1H[K[5;1H[K[6;1H--- Included files in path ---
Xdir1/dir2/foo.a[7;17H[K[8;1HXdir1/dir2/foo.a -->
  Xdir1/dir2/bar.a
  Xdir1/dir2/bar.a -->
    Xdir1/dir2/baz.a
    Xdir1/dir2/baz.a -->
      "foo.a"  (Already listed)[15;1H[K[16;1H--- Included files in path ---[16;31H[K[17;1HXdir1/dir2/foo.b[17;17H[K[18;1HXdir1/dir2/foo.b -->[18;21H[K[19;1H  Xdir1/dir2/bar.b
  Xdir1/dir2/bar.b -->
    Xdir1/dir2/baz.b[21;21H[K[22;1H    Xdir1/dir2/baz.b -->[22;25H[K[23;1H      foo  (Already listed)[24;1H[K[25;1H[K[26;1H--- Included files in path ---
Xdir1/dir2/foo.c
Xdir1/dir2/foo.c -->[28;21H[K[29;1H  Xdir1/dir2/bar.c[29;19H[K[30;1H  Xdir1/dir2/bar.c -->
    Xdir1/dir2/baz.c
    Xdir1/dir2/baz.c -->
      foo.c  (Already listed)
[1m[34m~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h%s#\\#/#g[?25l[1m[37m[41mE486: Pattern not found: \\[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset ff&[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"test.out" 33 lines, 655 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hq[?25l[?1l>[?12l[?25h[?1049l
# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test17 = test61; then \
#	  if diff test.out test17.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test17.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test17.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test30.failed test.ok test.out X* viminfo
cp test30.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test30.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test30.in" 237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option

Note: This test will fail if "cat" is not available.

STARTTEST
:so small.vim
:" first write three test files, one in each format
:set fileformat=unix
:set fileformats=
:/^unix/;/eof/-1w! XXUnix
:/^dos/;/eof/-1w! XXDos
:set bin noeol
:$w! XXMac
Gonoeol[34m^[[m
:$w! XXEol
:set nobin eol
:enew!
:bwipe XXUnix XXDos XXMac
:" create mixed format files
:if has("vms")
: !copy XXUnix,XXDos XXUxDs.
: !copy XXUnix,XXMac XXUxMac.
: !copy XXDos,XXMac  XXDosMac.
: !copy XXMac,XXEol  XXMacEol.
: !copy XXUnix,XXDos,XXMac XXUxDsMc.
:elseif has("win32")
: !copy /b XXUnix+XXDos XXUxDs
: !copy /b XXUnix+XXMac XXUxMac
: !copy /b XXDos+XXMac XXDosMac
: !copy /b XXMac+XXEol XXMacEol
: !copy /b XXUnix+XXDos+XXMac XXUxDsMc
:else
: !cat XXUnix XXDos >XXUxDs
: !cat XXUnix XXMac >XXUxMac
: !cat XXDos XXMac >XXDosMac
: !cat XXMac XXEol >XXMacEol
: !cat XXUnix XXDos XXMac >XXUxDsMc
:endif
:"
:" try reading and writing with 'fileformats' empty
:set fileformat=unix
:e! XXUnix
:w! test.out
:e! XXDos
:w! XXtt01
:e! XXMac
:w! XXtt02
:bwipe XXUnix XXDos XXMac
:set fileformat=dos
:e! XXUnix
:w! XXtt11
:e! XXDos
:w! XXtt12
:e! XXMac
:w! XXtt13
:bwipe XXUnix XXDos XXMac[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for a lot of variations of the 'fileformats' option[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[5;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 221 lines, 3592 characters written[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[6;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H:w >>XXtt72
:w >>XXtt81
:w >>XXtt82
:w >>XXtt91
:w >>XXtt92
:w >>XXtt93
:"
:" Concatenate the results.
:" Make fileformat of test.out the native fileformat.
:" Add a newline at the end.
:set binary
:e! test.out
:$r XXtt01
:$r XXtt02
Go1[34m^[[m:$r XXtt11
:$r XXtt12
:$r XXtt13
Go2[34m^[[m:$r XXtt21
:$r XXtt22
:$r XXtt23
Go3[34m^[[m:$r XXtt31
:$r XXtt32
:$r XXtt33
Go4[34m^[[m:$r XXtt41
:$r XXtt42
:$r XXtt43
Go5[34m^[[m:$r XXtt51
:$r XXtt52
:$r XXtt53
:$r XXtt54
Go6[34m^[[m:$r XXtt61
:$r XXtt62
:$r XXtt63
:$r XXtt64
Go7[34m^[[m:$r XXtt71
:$r XXtt72
Go8[34m^[[m:$r XXtt81
:$r XXtt82
Go9[34m^[[m:$r XXtt91
:$r XXtt92
:$r XXtt93
Go10[34m^[[m:$r XXUnix
:set nobinary ff&
:w
:qa!
ENDTEST

unix
unix
eof

dos[34m^M[m
dos[34m^M[m
eof

mac[34m^M[mmac[34m^M[46;1H[?12l[?25h
[?25l[57;1H[m:so! Xdotest[47;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[47;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" first write three test files, one in each format[?25l[47;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformat=unix[?25l[47;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=[?25l[47;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^unix/;/eof/-1w! XXUnix[?25l"XXUnix" [57;10H[K[57;10H[New File] 2 lines, 10 characters written[48;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^dos/;/eof/-1w! XXDos[?25l"XXDos" [57;9H[K[57;9H[New File] 2 lines, 10 characters written[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset bin noeol[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$w! XXMac[?25l"XXMac" [57;9H[K[57;9H[New File][Incomplete last line] 1 line, 8 characters written[52;1H[?12l[?25h[56;1H[?25l[1;56r[56;1H
[1;57r[56;1Hnoeol[57;1H[K[56;5H[?12l[?25h[?25l
:[?12l[?25h$w! XXEol[?25l"XXEol" [57;9H[K[57;9H[New File][Incomplete last line] 1 line, 5 characters written[56;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nobin eol[?25l[56;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25henew![?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hbwipe XXUnix XXDos XXMac[?25l3 buffers wiped out[57;21H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" create mixed format files[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif has("vms")[?25l
:  [?12l[?25h: !copy XXUnix,XXDos XXUxDs.
[?25l:  [?12l[?25h: !copy XXUnix,XXMac XXUxMac.
[?25l:  [?12l[?25h: !copy XXDos,XXMac  XXDosMac.
[?25l:  [?12l[?25h: !copy XXMac,XXEol  XXMacEol.
[?25l:  [?12l[?25h: !copy XXUnix,XXDos,XXMac XXUxDsMc.
[?25l:  [?12l[?25h:elseif has("win32")
[?25l:  [?12l[?25h: !copy /b XXUnix+XXDos XXUxDs
[?25l:  [?12l[?25h: !copy /b XXUnix+XXMac XXUxMac
[?25l:  [?12l[?25h: !copy /b XXDos+XXMac XXDosMac
[?25l:  [?12l[?25h: !copy /b XXMac+XXEol XXMacEol
[?25l:  [?12l[?25h: !copy /b XXUnix+XXDos+XXMac XXUxDsMc
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: !cat XXUnix XXDos >XXUxDs
[?25l:!cat XXUnix XXDos >XXUxDs[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:  :[?12l[?25h !cat XXUnix XXMac >XXUxMac
[?25l:!cat XXUnix XXMac >XXUxMac[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:  :[?12l[?25h !cat XXDos XXMac >XXDosMac
[?25l:!cat XXDos XXMac >XXDosMac[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:  :[?12l[?25h !cat XXMac XXEol >XXMacEol
[?25l:!cat XXMac XXEol >XXMacEol[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:  :[?12l[?25h !cat XXUnix XXDos XXMac >XXUxDsMc
[?25l:!cat XXUnix XXDos XXMac >XXUxDsMc[?1l>[?12l[?25h[?1049l

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25l:  :[?12l[?25hendif[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h" try reading and writing with 'fileformats' empty[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformat=unix[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUnix[?25l"XXUnix" [57;10H[K[57;10H2 lines, 10 characters[1;1Hunix
unix[2;5H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 2 lines, 10 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXDos[?25l"XXDos" [57;9H[K[57;9H2 lines, 10 characters[1;1Hdos[34m^M[m
dos[34m^M[1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt01[?25l"XXtt01" [57;10H[K[57;10H[New File] 2 lines, 10 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXMac[?25l"XXMac" [57;9H[K[57;9H[Incomplete last line] 1 line, 8 characters[1;1Hmac[2Cmac[34m^M[m
[1m[34m~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt02[?25l"XXtt02" [57;10H[K[57;10H[New File] 1 line, 9 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUnix XXDos XXMac[?25l"test30.in" [57;13H[K[57;13H237 lines, 3762 characters
3 buffers wiped out
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset fileformat=dos[?25l[1;1H[2L[1;1H:w >>XXtt72
:w >>XXtt81
:w >>XXtt82[3;12H[K[4;1H:w >>XXtt91[4;12H[K[5;1H:w >>XXtt92[5;12H[K[6;1H:w >>XXtt93[6;12H[K[7;1H:"[7;3H[K[8;1H:" Concatenate the results.[8;28H[K[9;1H:" Make fileformat of test.out the native fileformat.[9;54H[K[10;1H:" Add a newline at the end.[10;29H[K[11;1H:set binary[11;12H[K[12;1H:e! test.out[12;13H[K[13;1H:$r XXtt01[13;11H[K[14;1H:$r XXtt02[14;11H[K[15;1HGo1[34m^[[m:$r XXtt11[15;16H[K[16;1H:$r XXtt12[16;11H[K[17;1H:$r XXtt13[17;11H[K[18;1HGo2[34m^[[m:$r XXtt21[18;16H[K[19;1H:$r XXtt22[19;11H[K[20;1H:$r XXtt23[20;11H[K[21;1HGo3[34m^[[m:$r XXtt31[21;16H[K[22;1H:$r XXtt32[22;11H[K[23;1H:$r XXtt33[23;11H[K[24;1HGo4[34m^[[m:$r XXtt41[24;16H[K[25;1H:$r XXtt42[25;11H[K[26;1H:$r XXtt43[26;11H[K[27;1HGo5[34m^[[m:$r XXtt51[27;16H[K[28;1H:$r XXtt52[28;11H[K[29;1H:$r XXtt53[29;11H[K[30;1H:$r XXtt54[30;11H[K[31;1HGo6[34m^[[m:$r XXtt61[31;16H[K[32;1H:$r XXtt62[32;11H[K[33;1H:$r XXtt63[33;11H[K[34;1H:$r XXtt64[34;11H[K[35;1HGo7[34m^[[m:$r XXtt71[35;16H[K[36;1H:$r XXtt72[36;11H[K[37;1HGo8[34m^[[m:$r XXtt81[37;16H[K[38;1H:$r XXtt82[38;11H[K[39;1HGo9[34m^[[m:$r XXtt91[39;16H[K[40;1H:$r XXtt92[40;11H[K[41;1H:$r XXtt93[41;11H[K[42;1HGo10[34m^[[m:$r XXUnix[42;17H[K[43;1H:set nobinary ff&[43;18H[K[44;1H:w[44;3H[K[45;1H:qa![45;5H[K[46;1HENDTEST[46;8H[K[47;1H[K[48;1Hunix[48;5H[K[49;1Hunix[49;5H[K[50;1Heof[50;4H[K[51;1H[K[52;1Hdos[34m^M[m[52;6H[K[53;1Hdos[34m^M[m[53;6H[K[54;1Heof[54;4H[K[55;1H[K[56;1Hmac[34m^M[mmac[34m^M[m[56;11H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25he! XXUnix[?25l"XXUnix" [57;10H[K[57;10H[CR missing][dos format] 2 lines, 10 characters[1;1Hunix[1;5H[K[2;1Hunix[2;5H[K[3;1H[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt11[?25l"XXtt11" [57;10H[K[57;10H[New File][dos format] 2 lines, 12 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXDos[?25l"XXDos" [57;9H[K[57;9H[dos format] 2 lines, 10 characters[1;1Hdos[1;4H[K[2;1Hdos[2;4H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! XXtt12[?25l"XXtt12" [57;10H[K[57;10H[New File][dos format] 2 lines, 10 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXMac[?25l"XXMac" [57;9H[K[57;9H[Incomplete last line][dos format] 1 line, 8 characters[1;1Hmac[34m^M[mmac[34m^M[m
[1m[34m~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt13[?25l"XXtt13" [57;10H[K[57;10H[New File][dos format] 1 line, 10 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUnix XXDos XXMac[?25l"test30.in" [57;13H[K[57;13H[CR missing][dos format] 237 lines, 3762 characters
3 buffers wiped out
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset fileformat=mac[?25l[1;1H[2L[1;1H:w >>XXtt72
:w >>XXtt81
:w >>XXtt82[3;12H[K[4;1H:w >>XXtt91[4;12H[K[5;1H:w >>XXtt92[5;12H[K[6;1H:w >>XXtt93[6;12H[K[7;1H:"[7;3H[K[8;1H:" Concatenate the results.[8;28H[K[9;1H:" Make fileformat of test.out the native fileformat.[9;54H[K[10;1H:" Add a newline at the end.[10;29H[K[11;1H:set binary[11;12H[K[12;1H:e! test.out[12;13H[K[13;1H:$r XXtt01[13;11H[K[14;1H:$r XXtt02[14;11H[K[15;1HGo1[34m^[[m:$r XXtt11[15;16H[K[16;1H:$r XXtt12[16;11H[K[17;1H:$r XXtt13[17;11H[K[18;1HGo2[34m^[[m:$r XXtt21[18;16H[K[19;1H:$r XXtt22[19;11H[K[20;1H:$r XXtt23[20;11H[K[21;1HGo3[34m^[[m:$r XXtt31[21;16H[K[22;1H:$r XXtt32[22;11H[K[23;1H:$r XXtt33[23;11H[K[24;1HGo4[34m^[[m:$r XXtt41[24;16H[K[25;1H:$r XXtt42[25;11H[K[26;1H:$r XXtt43[26;11H[K[27;1HGo5[34m^[[m:$r XXtt51[27;16H[K[28;1H:$r XXtt52[28;11H[K[29;1H:$r XXtt53[29;11H[K[30;1H:$r XXtt54[30;11H[K[31;1HGo6[34m^[[m:$r XXtt61[31;16H[K[32;1H:$r XXtt62[32;11H[K[33;1H:$r XXtt63[33;11H[K[34;1H:$r XXtt64[34;11H[K[35;1HGo7[34m^[[m:$r XXtt71[35;16H[K[36;1H:$r XXtt72[36;11H[K[37;1HGo8[34m^[[m:$r XXtt81[37;16H[K[38;1H:$r XXtt82[38;11H[K[39;1HGo9[34m^[[m:$r XXtt91[39;16H[K[40;1H:$r XXtt92[40;11H[K[41;1H:$r XXtt93[41;11H[K[42;1HGo10[34m^[[m:$r XXUnix[42;17H[K[43;1H:set nobinary ff&[43;18H[K[44;1H:w[44;3H[K[45;1H:qa![45;5H[K[46;1HENDTEST[46;8H[K[47;1H[K[48;1Hunix[48;5H[K[49;1Hunix[49;5H[K[50;1Heof[50;4H[K[51;1H[K[52;1Hdos[52;4H[K[53;1Hdos[53;4H[K[54;1Heof[54;4H[K[55;1H[K[56;1Hmac[34m^J[mmac[56;9H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25he! XXUnix[?25l"XXUnix" [57;10H[K[57;10H[Incomplete last line][mac format] 1 line, 10 characters[1;1Hunix[34m^J[munix[34m^J[m
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt21[?25l"XXtt21" [57;10H[K[57;10H[New File][mac format] 1 line, 11 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXDos[?25l"XXDos" [57;9H[K[57;9H[Incomplete last line][mac format] 3 lines, 10 characters[1;1Hdos[1;4H[K[2;1H[34m^J[mdos[2;6H[K[3;1H[34m^J[m[3;3H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! XXtt22[?25l"XXtt22" [57;10H[K[57;10H[New File][mac format] 3 lines, 11 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXMac[?25l"XXMac" [57;9H[K[57;9H[mac format] 2 lines, 8 characters[1;1Hmac
mac[2;4H[K[3;1H[1m[34m~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt23[?25l"XXtt23" [57;10H[K[57;10H[New File][mac format] 2 lines, 8 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUnix XXDos XXMac[?25l"test30.in" [57;13H[K[57;13H[Incomplete last line][mac format] 5 lines, 3762 characters
3 buffers wiped out
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[2L[1;1HTest for a lot of variations of the 'fileformats' option[34m^J^J[mNote: This test will fail ii[2;1Hf "cat" is not available.[34m^J^J[mSTARTTEST[34m^J[m:so small.vim[34m^J[m:" first write three test files,,[3;1H one in each format[34m^J[m:set fileformat=unix[34m^J[m:set fileformats=[34m^J[m:/^unix/;/eof/-1w! XXUnixx[4;1H[34m^J[m:/^dos/;/eof/-1w! XXDos[34m^J[m:set bin noeol[34m^J[m:$w! XXMac[34m^J[mGonoeol[34m^[^J[m:$w! XXEol[34m^J[m:set nobii[5;1Hn eol[34m^J[m:enew![34m^J[m:bwipe XXUnix XXDos XXMac[34m^J[m:" create mixed format files[34m^J[m:if has("vms")[34m^^[6;1HJ[m: !copy XXUnix,XXDos XXUxDs.[34m^J[m: !copy XXUnix,XXMac XXUxMac.[34m^J[m: !copy XXDos,XXMac  XXDoo[7;1HsMac.[34m^J[m: !copy XXMac,XXEol  XXMacEol.[34m^J[m: !copy XXUnix,XXDos,XXMac XXUxDsMc.[34m^J[m:elseif haa[8;1Hs("win32")[34m^J[m: !copy /b XXUnix+XXDos XXUxDs[34m^J[m: !copy /b XXUnix+XXMac XXUxMac[34m^J[m: !copy /bb[9;1H XXDos+XXMac XXDosMac[34m^J[m: !copy /b XXMac+XXEol XXMacEol[34m^J[m: !copy /b XXUnix+XXDos+XXMac XX[10;1HXUxDsMc[34m^J[m:else[34m^J[m: !cat XXUnix XXDos >XXUxDs[34m^J[m: !cat XXUnix XXMac >XXUxMac[34m^J[m: !cat XXDoss[11;1H XXMac >XXDosMac[34m^J[m: !cat XXMac XXEol >XXMacEol[34m^J[m: !cat XXUnix XXDos XXMac >XXUxDsMc[34m^J[m:ee[12;1Hndif[34m^J[m:"[34m^J[m:" try reading and writing with 'fileformats' empty[34m^J[m:set fileformat=unix[34m^J[m:ee[13;1H! XXUnix[34m^J[m:w! test.out[34m^J[m:e! XXDos[34m^J[m:w! XXtt01[34m^J[m:e! XXMac[34m^J[m:w! XXtt02[34m^J[m:bwipe XXUnix XXDD[14;1Hos XXMac[34m^J[m:set fileformat=dos[34m^J[m:e! XXUnix[34m^J[m:w! XXtt11[34m^J[m:e! XXDos[34m^J[m:w! XXtt12[34m^J[m:e! XXMacc[15;1H[34m^J[m:w! XXtt13[34m^J[m:bwipe XXUnix XXDos XXMac[34m^J[m:set fileformat=mac[34m^J[m:e! XXUnix[34m^J[m:w! XXtt21[34m^J[m::[16;1He! XXDos[34m^J[m:w! XXtt22[34m^J[m:e! XXMac[34m^J[m:w! XXtt23[34m^J[m:bwipe XXUnix XXDos XXMac[34m^J[m:"[34m^J[m:" try readd[17;1Hing and writing with 'fileformats' set to one format[34m^J[m:set fileformats=unix[34m^J[m:e! XXUxDss[18;1HMc[34m^J[m:w! XXtt31[34m^J[m:bwipe XXUxDsMc[34m^J[m:set fileformats=dos[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt32[34m^J[m:bwipee[19;1H XXUxDsMc[34m^J[m:set fileformats=mac[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt33[34m^J[m:bwipe XXUxDsMc[34m^J[m:"[34m^J[m:" try  [20;1Hreading and writing with 'fileformats' set to two formats[34m^J[m:set fileformats=unix,dos[34m^J[m::[21;1He! XXUxDsMc[34m^J[m:w! XXtt41[34m^J[m:bwipe XXUxDsMc[34m^J[m:e! XXUxMac[34m^J[m:w! XXtt42[34m^J[m:bwipe XXUxMac[34m^J[m:e!  [22;1HXXDosMac[34m^J[m:w! XXtt43[34m^J[m:bwipe XXDosMac[34m^J[m:set fileformats=unix,mac[34m^J[m:e! XXUxDs[34m^J[m:w! XXtt55[23;1H1[34m^J[m:bwipe XXUxDs[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt52[34m^J[m:bwipe XXUxDsMc[34m^J[m:e! XXDosMac[34m^J[m:w! XXtt53[34m^JJ[m[24;1H:bwipe XXDosMac[34m^J[m:e! XXEol[34m^J[mggO[34m^R[m=&ffs[34m^J[m:[34m^R[m=&ff[34m^J^[[m:w! XXtt54[34m^J[m:bwipe XXEol[34m^J[m:set fileff[25;1Hormats=dos,mac[34m^J[m:e! XXUxDs[34m^J[m:w! XXtt61[34m^J[m:bwipe XXUxDs[34m^J[m:e! XXUxMac[34m^J[mggO[34m^R[m=&ffs[34m^J[m:[34m^R[m=&fff[26;1H[34m^J^[[m:w! XXtt62[34m^J[m:bwipe XXUxMac[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt63[34m^J[m:bwipe XXUxDsMc[34m^J[m:e! XXMacEoll[27;1H[34m^J[mggO[34m^R[m=&ffs[34m^J[m:[34m^R[m=&ff[34m^J^[[m:w! XXtt64[34m^J[m:bwipe XXMacEol[34m^J[m:"[34m^J[m:" try reading and writing wii[28;1Hth 'fileformats' set to three formats[34m^J[m:set fileformats=unix,dos,mac[34m^J[m:e! XXUxDsMc[34m^J[m:w!![29;1H XXtt71[34m^J[m:bwipe XXUxDsMc[34m^J[m:e! XXEol[34m^J[mggO[34m^R[m=&ffs[34m^J[m:[34m^R[m=&ff[34m^J^[[m:w! XXtt72[34m^J[m:bwipe XXEol[34m^J[m::[30;1Hset fileformats=mac,dos,unix[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt81[34m^J[m:bwipe XXUxDsMc[34m^J[m:e! XXEol[34m^J[mggOO[31;1H[34m^R[m=&ffs[34m^J[m:[34m^R[m=&ff[34m^J^[[m:w! XXtt82[34m^J[m:bwipe XXEol[34m^J[m:" try with 'binary' set[34m^J[m:set fileformatt[32;1Hs=mac,unix,dos[34m^J[m:set binary[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt91[34m^J[m:bwipe XXUxDsMc[34m^J[m:set fileformatt[33;1Hs=mac[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt92[34m^J[m:bwipe XXUxDsMc[34m^J[m:set fileformats=dos[34m^J[m:e! XXUxDsMc[34m^J[m::[34;1Hw! XXtt93[34m^J[m:"[34m^J[m:" Append "END" to each file so that we can see what the last written chh[35;1Har was.[34m^J[m:set fileformat=unix nobin[34m^J[mggdGaEND[34m^[[m:w >>XXtt01[34m^J[m:w >>XXtt02[34m^J[m:w >>XXtt11[34m^J[m::[36;1Hw >>XXtt12[34m^J[m:w >>XXtt13[34m^J[m:w >>XXtt21[34m^J[m:w >>XXtt22[34m^J[m:w >>XXtt23[34m^J[m:w >>XXtt31[34m^J[m:w >>XXtt33[37;1H2[34m^J[m:w >>XXtt33[34m^J[m:w >>XXtt41[34m^J[m:w >>XXtt42[34m^J[m:w >>XXtt43[34m^J[m:w >>XXtt51[34m^J[m:w >>XXtt52[34m^J[m:w >>XX[38;1HXtt53[34m^J[m:w >>XXtt54[34m^J[m:w >>XXtt61[34m^J[m:w >>XXtt62[34m^J[m:w >>XXtt63[34m^J[m:w >>XXtt64[34m^J[m:w >>XXtt71[34m^J[m:ww[39;1H >>XXtt72[34m^J[m:w >>XXtt81[34m^J[m:w >>XXtt82[34m^J[m:w >>XXtt91[34m^J[m:w >>XXtt92[34m^J[m:w >>XXtt93[34m^J[m:"[34m^J[m:" Concc[40;1Hatenate the results.[34m^J[m:" Make fileformat of test.out the native fileformat.[34m^J[m:" Add a nn[41;1Hewline at the end.[34m^J[m:set binary[34m^J[m:e! test.out[34m^J[m:$r XXtt01[34m^J[m:$r XXtt02[34m^J[mGo1[34m^[[m:$r XXtt11[34m^^[42;1HJ[m:$r XXtt12[34m^J[m:$r XXtt13[34m^J[mGo2[34m^[[m:$r XXtt21[34m^J[m:$r XXtt22[34m^J[m:$r XXtt23[34m^J[mGo3[34m^[[m:$r XXtt31[34m^J[m:$r  [43;1HXXtt32[34m^J[m:$r XXtt33[34m^J[mGo4[34m^[[m:$r XXtt41[34m^J[m:$r XXtt42[34m^J[m:$r XXtt43[34m^J[mGo5[34m^[[m:$r XXtt51[34m^J[m:$r XXtt55[44;1H2[34m^J[m:$r XXtt53[34m^J[m:$r XXtt54[34m^J[mGo6[34m^[[m:$r XXtt61[34m^J[m:$r XXtt62[34m^J[m:$r XXtt63[34m^J[m:$r XXtt64[34m^J[mGo7[34m^[[m:$$[45;1Hr XXtt71[34m^J[m:$r XXtt72[34m^J[mGo8[34m^[[m:$r XXtt81[34m^J[m:$r XXtt82[34m^J[mGo9[34m^[[m:$r XXtt91[34m^J[m:$r XXtt92[34m^J[m:$r XXtt[46;1Ht93[34m^J[mGo10[34m^[[m:$r XXUnix[34m^J[m:set nobinary ff&[34m^J[m:w[34m^J[m:qa![34m^J[mENDTEST[34m^J^J[munix[34m^J[munix[34m^J[meof[34m^J^J[mdos[46;86H[K[47;1H[34m^J[mdos[47;6H[K[48;1H[34m^J[meof[34m^J^J[mmac[48;13H[K[49;1Hmac[49;4H[K[50;1H[34m^J[m[50;3H[K[57;1H[K[50;1H[?12l[?25h[?25l[57;1H:[?12l[?25h" try reading and writing with 'fileformats' set to one format[?25l[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=unix[?25l[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDsMc[?25l"XXUxDsMc" [57;12H[K[57;12H[Incomplete last line] 5 lines, 28 characters[1;1Hunix[1;6H[K[2;1Hunix[2;5H[K[3;1Hdos[34m^M[m[3;6H[K[4;1Hdos[34m^M[m[4;6H[K[5;1Hmac[34m^M[mmac[34m^M[m[5;11H[K[6;1H[1m[34m~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt31[?25l"XXtt31" [57;10H[K[57;10H[New File] 5 lines, 29 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxDsMc[?25l"test30.in" [57;13H[K[57;13H237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=dos[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDsMc[?25l"XXUxDsMc" [57;12H[K[57;12H[Incomplete last line][CR missing][dos format] 5 lines, 28 characters[1;1Hunix[1;6H[K[2;1Hunix
dos[3;4H[K[4;1Hdos
mac[34m^M[mmac[34m^M[m
[1m[34m~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt32[?25l"XXtt32" [57;10H[K[57;10H[New File][dos format] 5 lines, 32 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxDsMc[?25l"test30.in" [57;13H[K[57;13H[CR missing][dos format] 237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=mac[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDsMc[?25l"XXUxDsMc" [57;12H[K[57;12H[mac format] 4 lines, 28 characters[1;1Hunix[34m^J[munix[34m^J[mdos[1;16H[K[2;1H[34m^J[mdos
[34m^J[mmac[3;7H[K[4;1Hmac
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt33[?25l"XXtt33" [57;10H[K[57;10H[New File][mac format] 4 lines, 28 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxDsMc[?25l"test30.in" [57;13H[K[57;13H[Incomplete last line][mac format] 5 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[34m^J^J[mNote: This test will fail ii[2;1Hf "cat" is not available.[34m^J^J[mSTARTTEST[34m^J[m:so small.vim[34m^J[m:" first write three test files,,[3;1H one in each format[34m^J[m:set fileformat=unix[34m^J[m:set fileformats=[34m^J[m:/^unix/;/eof/-1w! XXUnixx[4;1H[34m^J[m:/^dos/;/eof/-1w! XXDos[34m^J[m:set bin noeol[34m^J[m:$w! XXMac[34m^J[mGonoeol[34m^[^J[m:$w! XXEol[34m^J[m:set nobii[5;1Hn eol[34m^J[m:enew![34m^J[m:bwipe XXUnix XXDos XXMac[34m^J[m:" create mixed format files[34m^J[m:if has("vms")[34m^^[6;1HJ[m: !copy XXUnix,XXDos XXUxDs.[34m^J[m: !copy XXUnix,XXMac XXUxMac.[34m^J[m: !copy XXDos,XXMac  XXDoo[7;1HsMac.[34m^J[m: !copy XXMac,XXEol  XXMacEol.[34m^J[m: !copy XXUnix,XXDos,XXMac XXUxDsMc.[34m^J[m:elseif haa[8;1Hs("win32")[34m^J[m: !copy /b XXUnix+XXDos XXUxDs[34m^J[m: !copy /b XXUnix+XXMac XXUxMac[34m^J[m: !copy /bb[9;1H XXDos+XXMac XXDosMac[34m^J[m: !copy /b XXMac+XXEol XXMacEol[34m^J[m: !copy /b XXUnix+XXDos+XXMac XX[10;1HXUxDsMc[34m^J[m:else[34m^J[m: !cat XXUnix XXDos >XXUxDs[34m^J[m: !cat XXUnix XXMac >XXUxMac[34m^J[m: !cat XXDoss[11;1H XXMac >XXDosMac[34m^J[m: !cat XXMac XXEol >XXMacEol[34m^J[m: !cat XXUnix XXDos XXMac >XXUxDsMc[34m^J[m:ee[12;1Hndif[34m^J[m:"[34m^J[m:" try reading and writing with 'fileformats' empty[34m^J[m:set fileformat=unix[34m^J[m:ee[13;1H! XXUnix[34m^J[m:w! test.out[34m^J[m:e! XXDos[34m^J[m:w! XXtt01[34m^J[m:e! XXMac[34m^J[m:w! XXtt02[34m^J[m:bwipe XXUnix XXDD[14;1Hos XXMac[34m^J[m:set fileformat=dos[34m^J[m:e! XXUnix[34m^J[m:w! XXtt11[34m^J[m:e! XXDos[34m^J[m:w! XXtt12[34m^J[m:e! XXMacc[15;1H[34m^J[m:w! XXtt13[34m^J[m:bwipe XXUnix XXDos XXMac[34m^J[m:set fileformat=mac[34m^J[m:e! XXUnix[34m^J[m:w! XXtt21[34m^J[m::[16;1He! XXDos[34m^J[m:w! XXtt22[34m^J[m:e! XXMac[34m^J[m:w! XXtt23[34m^J[m:bwipe XXUnix XXDos XXMac[34m^J[m:"[34m^J[m:" try readd[17;1Hing and writing with 'fileformats' set to one format[34m^J[m:set fileformats=unix[34m^J[m:e! XXUxDss[18;1HMc[34m^J[m:w! XXtt31[34m^J[m:bwipe XXUxDsMc[34m^J[m:set fileformats=dos[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt32[34m^J[m:bwipee[19;1H XXUxDsMc[34m^J[m:set fileformats=mac[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt33[34m^J[m:bwipe XXUxDsMc[34m^J[m:"[34m^J[m:" try  [20;1Hreading and writing with 'fileformats' set to two formats[34m^J[m:set fileformats=unix,dos[34m^J[m::[21;1He! XXUxDsMc[34m^J[m:w! XXtt41[34m^J[m:bwipe XXUxDsMc[34m^J[m:e! XXUxMac[34m^J[m:w! XXtt42[34m^J[m:bwipe XXUxMac[34m^J[m:e!  [22;1HXXDosMac[34m^J[m:w! XXtt43[34m^J[m:bwipe XXDosMac[34m^J[m:set fileformats=unix,mac[34m^J[m:e! XXUxDs[34m^J[m:w! XXtt55[23;1H1[34m^J[m:bwipe XXUxDs[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt52[34m^J[m:bwipe XXUxDsMc[34m^J[m:e! XXDosMac[34m^J[m:w! XXtt53[34m^JJ[m[24;1H:bwipe XXDosMac[34m^J[m:e! XXEol[34m^J[mggO[34m^R[m=&ffs[34m^J[m:[34m^R[m=&ff[34m^J^[[m:w! XXtt54[34m^J[m:bwipe XXEol[34m^J[m:set fileff[25;1Hormats=dos,mac[34m^J[m:e! XXUxDs[34m^J[m:w! XXtt61[34m^J[m:bwipe XXUxDs[34m^J[m:e! XXUxMac[34m^J[mggO[34m^R[m=&ffs[34m^J[m:[34m^R[m=&fff[26;1H[34m^J^[[m:w! XXtt62[34m^J[m:bwipe XXUxMac[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt63[34m^J[m:bwipe XXUxDsMc[34m^J[m:e! XXMacEoll[27;1H[34m^J[mggO[34m^R[m=&ffs[34m^J[m:[34m^R[m=&ff[34m^J^[[m:w! XXtt64[34m^J[m:bwipe XXMacEol[34m^J[m:"[34m^J[m:" try reading and writing wii[28;1Hth 'fileformats' set to three formats[34m^J[m:set fileformats=unix,dos,mac[34m^J[m:e! XXUxDsMc[34m^J[m:w!![29;1H XXtt71[34m^J[m:bwipe XXUxDsMc[34m^J[m:e! XXEol[34m^J[mggO[34m^R[m=&ffs[34m^J[m:[34m^R[m=&ff[34m^J^[[m:w! XXtt72[34m^J[m:bwipe XXEol[34m^J[m::[30;1Hset fileformats=mac,dos,unix[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt81[34m^J[m:bwipe XXUxDsMc[34m^J[m:e! XXEol[34m^J[mggOO[31;1H[34m^R[m=&ffs[34m^J[m:[34m^R[m=&ff[34m^J^[[m:w! XXtt82[34m^J[m:bwipe XXEol[34m^J[m:" try with 'binary' set[34m^J[m:set fileformatt[32;1Hs=mac,unix,dos[34m^J[m:set binary[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt91[34m^J[m:bwipe XXUxDsMc[34m^J[m:set fileformatt[33;1Hs=mac[34m^J[m:e! XXUxDsMc[34m^J[m:w! XXtt92[34m^J[m:bwipe XXUxDsMc[34m^J[m:set fileformats=dos[34m^J[m:e! XXUxDsMc[34m^J[m::[34;1Hw! XXtt93[34m^J[m:"[34m^J[m:" Append "END" to each file so that we can see what the last written chh[35;1Har was.[34m^J[m:set fileformat=unix nobin[34m^J[mggdGaEND[34m^[[m:w >>XXtt01[34m^J[m:w >>XXtt02[34m^J[m:w >>XXtt11[34m^J[m::[36;1Hw >>XXtt12[34m^J[m:w >>XXtt13[34m^J[m:w >>XXtt21[34m^J[m:w >>XXtt22[34m^J[m:w >>XXtt23[34m^J[m:w >>XXtt31[34m^J[m:w >>XXtt33[37;1H2[34m^J[m:w >>XXtt33[34m^J[m:w >>XXtt41[34m^J[m:w >>XXtt42[34m^J[m:w >>XXtt43[34m^J[m:w >>XXtt51[34m^J[m:w >>XXtt52[34m^J[m:w >>XX[38;1HXtt53[34m^J[m:w >>XXtt54[34m^J[m:w >>XXtt61[34m^J[m:w >>XXtt62[34m^J[m:w >>XXtt63[34m^J[m:w >>XXtt64[34m^J[m:w >>XXtt71[34m^J[m:ww[39;1H >>XXtt72[34m^J[m:w >>XXtt81[34m^J[m:w >>XXtt82[34m^J[m:w >>XXtt91[34m^J[m:w >>XXtt92[34m^J[m:w >>XXtt93[34m^J[m:"[34m^J[m:" Concc[40;1Hatenate the results.[34m^J[m:" Make fileformat of test.out the native fileformat.[34m^J[m:" Add a nn[41;1Hewline at the end.[34m^J[m:set binary[34m^J[m:e! test.out[34m^J[m:$r XXtt01[34m^J[m:$r XXtt02[34m^J[mGo1[34m^[[m:$r XXtt11[34m^^[42;1HJ[m:$r XXtt12[34m^J[m:$r XXtt13[34m^J[mGo2[34m^[[m:$r XXtt21[34m^J[m:$r XXtt22[34m^J[m:$r XXtt23[34m^J[mGo3[34m^[[m:$r XXtt31[34m^J[m:$r  [43;1HXXtt32[34m^J[m:$r XXtt33[34m^J[mGo4[34m^[[m:$r XXtt41[34m^J[m:$r XXtt42[34m^J[m:$r XXtt43[34m^J[mGo5[34m^[[m:$r XXtt51[34m^J[m:$r XXtt55[44;1H2[34m^J[m:$r XXtt53[34m^J[m:$r XXtt54[34m^J[mGo6[34m^[[m:$r XXtt61[34m^J[m:$r XXtt62[34m^J[m:$r XXtt63[34m^J[m:$r XXtt64[34m^J[mGo7[34m^[[m:$$[45;1Hr XXtt71[34m^J[m:$r XXtt72[34m^J[mGo8[34m^[[m:$r XXtt81[34m^J[m:$r XXtt82[34m^J[mGo9[34m^[[m:$r XXtt91[34m^J[m:$r XXtt92[34m^J[m:$r XXtt[46;1Ht93[34m^J[mGo10[34m^[[m:$r XXUnix[34m^J[m:set nobinary ff&[34m^J[m:w[34m^J[m:qa![34m^J[mENDTEST[34m^J^J[munix[34m^J[munix[34m^J[meof[34m^J^J[mdos[46;86H[K[47;1H[34m^J[mdos[47;6H[K[48;1H[34m^J[meof[34m^J^J[mmac[48;13H[K[49;1Hmac[49;4H[K[50;1H[34m^J[m[50;3H[K[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" try reading and writing with 'fileformats' set to two formats[?25l[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=unix,dos[?25l[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDsMc[?25l"XXUxDsMc" [57;12H[K[57;12H[Incomplete last line] 5 lines, 28 characters[1;1Hunix[1;6H[K[2;1Hunix[2;5H[K[3;1Hdos[34m^M[m[3;6H[K[4;1Hdos[34m^M[m[4;6H[K[5;1Hmac[34m^M[mmac[34m^M[m[5;11H[K[6;1H[1m[34m~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt41[?25l"XXtt41" [57;10H[K[57;10H[New File] 5 lines, 29 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxDsMc[?25l"test30.in" [57;13H[K[57;13H237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxMac[?25l"XXUxMac" [57;11H[K[57;11H[Incomplete last line] 3 lines, 18 characters[1;1Hunix[1;6H[K[2;1Hunix
mac[34m^M[mmac[34m^M[m[3;12H[K[4;1H[1m[34m~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt42[?25l"XXtt42" [57;10H[K[57;10H[New File] 3 lines, 19 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxMac[?25l"test30.in" [57;13H[K[57;13H237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXDosMac[?25l"XXDosMac" [57;12H[K[57;12H[Incomplete last line][dos format] 3 lines, 18 characters[1;1Hdo[1;4H[K[2;1Hdos
mac[34m^M[mmac[34m^M[m[3;12H[K[4;1H[1m[34m~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt43[?25l"XXtt43" [57;10H[K[57;10H[New File][dos format] 3 lines, 20 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXDosMac[?25l"test30.in" [57;13H[K[57;13H237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=unix,mac[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDs[?25l"XXUxDs" [57;10H[K[57;10H4 lines, 20 characters[1;1Hunix[1;6H[K[2;1Hunix
dos[34m^M[m[3;7H[K[4;1Hdos[34m^M[m
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt51[?25l"XXtt51" [57;10H[K[57;10H[New File] 4 lines, 20 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxDs[?25l"test30.in" [57;13H[K[57;13H237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDsMc[?25l"XXUxDsMc" [57;12H[K[57;12H[Incomplete last line] 5 lines, 28 characters[1;1Hunix[1;6H[K[2;1Hunix
dos[34m^M[m[3;7H[K[4;1Hdos[34m^M[m
mac[34m^M[mmac[34m^M[m
[1m[34m~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt52[?25l"XXtt52" [57;10H[K[57;10H[New File] 5 lines, 29 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxDsMc[?25l"test30.in" [57;13H[K[57;13H237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXDosMac[?25l"XXDosMac" [57;12H[K[57;12H[mac format] 4 lines, 18 characters[1;1Hdo[1;4H[K[2;1H[34m^J[mdos
[34m^J[mmac[3;7H[K[4;1Hmac
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt53[?25l"XXtt53" [57;10H[K[57;10H[New File][mac format] 4 lines, 18 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXDosMac[?25l"test30.in" [57;13H[K[57;13H237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXEol[?25l"XXEol" [57;9H[K[57;9H[Incomplete last line] 1 line, 5 characters[1;1Hnoeol[1;6H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H=[?12l[?25h&ffs[?25l[57;1H[K[57;1H=[?12l[?25h&ff[?25l[1;56r[1;1H[L[1;57r[1;1Hunix,mac:unix[57;1H[K[1;13H[?12l[?25h[?25l[57;1H:[?12l[?25hw! XXtt54[?25l"XXtt54" [57;10H[K[57;10H[New File] 2 lines, 20 characters written[1;13H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXEol[?25l"test30.in" 237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[3;53H[K[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=dos,mac[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDs[?25l"XXUxDs" [57;10H[K[57;10H[CR missing][dos format] 4 lines, 20 characters[1;1Hunix[1;6H[K[2;1Hunix
dos[3;4H[K[4;1Hdos
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt61[?25l"XXtt61" [57;10H[K[57;10H[New File][dos format] 4 lines, 22 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxDs[?25l"test30.in" [57;13H[K[57;13H[CR missing][dos format] 237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxMac[?25l"XXUxMac" [57;11H[K[57;11H[Incomplete last line][CR missing][dos format] 3 lines, 18 characters[1;1Hunix[1;6H[K[2;1Hunix
mac[34m^M[mmac[34m^M[m[3;12H[K[4;1H[1m[34m~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H=[?12l[?25h&ffs[?25l[57;1H[K[57;1H=[?12l[?25h&ff[?25l[1;56r[1;1H[L[1;57r[1;1Hdos,mac:dos[57;1H[K[1;11H[?12l[?25h[?25l[57;1H:[?12l[?25hw! XXtt62[?25l"XXtt62" [57;10H[K[57;10H[New File][dos format] 4 lines, 35 characters written[1;11H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxMac[?25l"test30.in" [57;13H[K[57;13H[CR missing][dos format] 237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDsMc[?25l"XXUxDsMc" [57;12H[K[57;12H[Incomplete last line][CR missing][dos format] 5 lines, 28 characters[1;1Hunix[1;6H[K[2;1Hunix
dos[3;4H[K[4;1Hdos
mac[34m^M[mmac[34m^M[m
[1m[34m~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt63[?25l"XXtt63" [57;10H[K[57;10H[New File][dos format] 5 lines, 32 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxDsMc[?25l"test30.in" [57;13H[K[57;13H[CR missing][dos format] 237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXMacEol[?25l"XXMacEol" [57;12H[K[57;12H[Incomplete last line][mac format] 3 lines, 13 characters[1;1Hmac[1;4H[K[2;1Hmac
noeol[3;7H[K[4;1H[1m[34m~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H=[?12l[?25h&ffs[?25l[57;1H[K[57;1H=[?12l[?25h&ff[?25l[1;56r[1;1H[L[1;57r[1;1Hdos,mac:mac[57;1H[K[1;11H[?12l[?25h[?25l[57;1H:[?12l[?25hw! XXtt64[?25l"XXtt64" [57;10H[K[57;10H[New File][mac format] 4 lines, 26 characters written[1;11H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXMacEol[?25l"test30.in" [57;13H[K[57;13H[CR missing][dos format] 237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" try reading and writing with 'fileformats' set to three formats[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=unix,dos,mac[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDsMc[?25l"XXUxDsMc" [57;12H[K[57;12H[Incomplete last line] 5 lines, 28 characters[1;1Hunix[1;6H[K[2;1Hunix
dos[34m^M[m[3;7H[K[4;1Hdos[34m^M[m
mac[34m^M[mmac[34m^M[m
[1m[34m~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt71[?25l"XXtt71" [57;10H[K[57;10H[New File] 5 lines, 29 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxDsMc[?25l"test30.in" [57;13H[K[57;13H237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXEol[?25l"XXEol" [57;9H[K[57;9H[Incomplete last line] 1 line, 5 characters[1;1Hnoeol[1;6H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H=[?12l[?25h&ffs[?25l[57;1H[K[57;1H=[?12l[?25h&ff[?25l[1;56r[1;1H[L[1;57r[1;1Hunix,dos,mac:unix[57;1H[K[1;17H[?12l[?25h[?25l[57;1H:[?12l[?25hw! XXtt72[?25l"XXtt72" [57;10H[K[57;10H[New File] 2 lines, 24 characters written[1;17H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXEol[?25l"test30.in" 237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[3;53H[K[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=mac,dos,unix[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDsMc[?25l"XXUxDsMc" [57;12H[K[57;12H[Incomplete last line] 5 lines, 28 characters[1;1Hunix[1;6H[K[2;1Hunix
dos[34m^M[m[3;7H[K[4;1Hdos[34m^M[m
mac[34m^M[mmac[34m^M[m
[1m[34m~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt81[?25l"XXtt81" [57;10H[K[57;10H[New File] 5 lines, 29 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxDsMc[?25l"test30.in" [57;13H[K[57;13H237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXEol[?25l"XXEol" [57;9H[K[57;9H[Incomplete last line][mac format] 1 line, 5 characters[1;1Hnoeol[1;6H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H=[?12l[?25h&ffs[?25l[57;1H[K[57;1H=[?12l[?25h&ff[?25l[1;56r[1;1H[L[1;57r[1;1Hmac,dos,unix:mac[57;1H[K[1;16H[?12l[?25h[?25l[57;1H:[?12l[?25hw! XXtt82[?25l"XXtt82" [57;10H[K[57;10H[New File][mac format] 2 lines, 23 characters written[1;16H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXEol[?25l"test30.in" 237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[3;53H[K[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" try with 'binary' set[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=mac,unix,dos[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset binary[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDsMc[?25l"XXUxDsMc" [57;12H[K[57;12H[Incomplete last line] 5 lines, 28 characters[1;1Hunix[1;6H[K[2;1Hunix
dos[34m^M[m[3;7H[K[4;1Hdos[34m^M[m
mac[34m^M[mmac[34m^M[m
[1m[34m~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt91[?25l"XXtt91" [57;10H[K[57;10H[New File][Incomplete last line] 5 lines, 28 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxDsMc[?25l"test30.in" [57;13H[K[57;13H237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=mac[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDsMc[?25l"XXUxDsMc" [57;12H[K[57;12H[Incomplete last line] 5 lines, 28 characters[1;1Hunix[1;6H[K[2;1Hunix
dos[34m^M[m[3;7H[K[4;1Hdos[34m^M[m
mac[34m^M[mmac[34m^M[m
[1m[34m~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt92[?25l"XXtt92" [57;10H[K[57;10H[New File][Incomplete last line] 5 lines, 28 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe XXUxDsMc[?25l"test30.in" [57;13H[K[57;13H237 lines, 3762 characters[1;1HTest for a lot of variations of the 'fileformats' option[2;1H[K[3;1HNote: This test will fail if "cat" is not available.[4;1H[K[5;1HSTARTTEST[5;10H[K[6;1H:so small.vim[6;14H[K[7;1H:" first write three test files, one in each format[7;52H[K[8;1H:set fileformat=unix[8;21H[K[9;1H:set fileformats=[9;18H[K[10;1H:/^unix/;/eof/-1w! XXUnix[10;26H[K[11;1H:/^dos/;/eof/-1w! XXDos[11;24H[K[12;1H:set bin noeol[12;15H[K[13;1H:$w! XXMac[13;11H[K[14;1HGonoeol[34m^[[m[14;10H[K[15;1H:$w! XXEol[15;11H[K[16;1H:set nobin eol[16;15H[K[17;1H:enew![17;7H[K[18;1H:bwipe XXUnix XXDos XXMac[18;26H[K[19;1H:" create mixed format files[19;29H[K[20;1H:if has("vms")[20;15H[K[21;1H: !copy XXUnix,XXDos XXUxDs.[21;29H[K[22;1H: !copy XXUnix,XXMac XXUxMac.[22;30H[K[23;1H: !copy XXDos,XXMac  XXDosMac.[23;31H[K[24;1H: !copy XXMac,XXEol  XXMacEol.[24;31H[K[25;1H: !copy XXUnix,XXDos,XXMac XXUxDsMc.[25;37H[K[26;1H:elseif has("win32")[26;21H[K[27;1H: !copy /b XXUnix+XXDos XXUxDs[27;31H[K[28;1H: !copy /b XXUnix+XXMac XXUxMac[28;32H[K[29;1H: !copy /b XXDos+XXMac XXDosMac[29;32H[K[30;1H: !copy /b XXMac+XXEol XXMacEol[30;32H[K[31;1H: !copy /b XXUnix+XXDos+XXMac XXUxDsMc[31;39H[K[32;1H:else[32;6H[K[33;1H: !cat XXUnix XXDos >XXUxDs[33;28H[K[34;1H: !cat XXUnix XXMac >XXUxMac[34;29H[K[35;1H: !cat XXDos XXMac >XXDosMac[35;29H[K[36;1H: !cat XXMac XXEol >XXMacEol[36;29H[K[37;1H: !cat XXUnix XXDos XXMac >XXUxDsMc[37;36H[K[38;1H:endif[38;7H[K[39;1H:"[39;3H[K[40;1H:" try reading and writing with 'fileformats' empty[40;52H[K[41;1H:set fileformat=unix[41;21H[K[42;1H:e! XXUnix[42;11H[K[43;1H:w! test.out[43;13H[K[44;1H:e! XXDos[44;10H[K[45;1H:w! XXtt01[45;11H[K[46;1H:e! XXMac[46;10H[K[47;1H:w! XXtt02[47;11H[K[48;1H:bwipe XXUnix XXDos XXMac[48;26H[K[49;1H:set fileformat=dos[49;20H[K[50;1H:e! XXUnix[50;11H[K[51;1H:w! XXtt11[51;11H[K[52;1H:e! XXDos[52;10H[K[53;1H:w! XXtt12[53;11H[K[54;1H:e! XXMac[54;10H[K[55;1H:w! XXtt13[55;11H[K[56;1H:bwipe XXUnix XXDos XXMac[56;26H[K[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformats=dos[?25l[5;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! XXUxDsMc[?25l"XXUxDsMc" [57;12H[K[57;12H[Incomplete last line] 5 lines, 28 characters[1;1Hunix[1;6H[K[2;1Hunix
dos[34m^M[m[3;7H[K[4;1Hdos[34m^M[m
mac[34m^M[mmac[34m^M[m
[1m[34m~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! XXtt93[?25l"XXtt93" [57;10H[K[57;10H[New File][Incomplete last line] 5 lines, 28 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Append "END" to each file so that we can see what the last written char was.[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset fileformat=unix nobin[?25l[1;1H[?12l[?25h[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [m[57;1H--No lines in buffer--[57;23H[K[1;1H[?12l[?25h[?25lEND[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt01[?25l"XXtt01" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt02[?25l"XXtt02" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt11[?25l"XXtt11" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt12[?25l"XXtt12" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt13[?25l"XXtt13" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt21[?25l"XXtt21" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt22[?25l"XXtt22" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt23[?25l"XXtt23" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt31[?25l"XXtt31" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt32[?25l"XXtt32" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt33[?25l"XXtt33" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt41[?25l"XXtt41" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt42[?25l"XXtt42" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt43[?25l"XXtt43" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt51[?25l"XXtt51" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt52[?25l"XXtt52" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt53[?25l"XXtt53" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt54[?25l"XXtt54" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt61[?25l"XXtt61" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt62[?25l"XXtt62" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt63[?25l"XXtt63" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt64[?25l"XXtt64" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt71[?25l"XXtt71" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt72[?25l"XXtt72" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt81[?25l"XXtt81" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt82[?25l"XXtt82" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt91[?25l"XXtt91" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt92[?25l"XXtt92" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw >>XXtt93[?25l"XXtt93" [57;10H[K[57;10H1 line, 4 characters appended[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Concatenate the results.[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Make fileformat of test.out the native fileformat.[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Add a newline at the end.[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset binary[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! test.out[?25l"test.out" [57;12H[K[57;12H2 lines, 10 characters[1;1Hunix
unix[2;5H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt01[?25l"XXtt01" [57;10H[K[57;10H3 lines, 14 characters[3;1Hdos[34m^M[m[3;6H[K[4;1Hdos[34m^M[m[4;6H[K[5;1HEND[5;4H[K[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt02[?25l"XXtt02" [57;10H[K[57;10H2 lines, 13 characters[6;1Hmac[34m^M[mmac[34m^M[m[6;11H[K[7;1HEND[7;4H[K[6;1H[?12l[?25h
[?25l
1[8;2H[K[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt11[?25l"XXtt11" [57;10H[K[57;10H3 lines, 16 characters[9;1Hunix[34m^M[m[9;7H[K[10;1Hunix[34m^M[m[10;7H[K[11;1HEND[11;4H[K[9;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt12[?25l"XXtt12" [57;10H[K[57;10H3 lines, 14 characters[12;1Hdos[34m^M[m[12;6H[K[13;1Hdos[34m^M[m[13;6H[K[14;1HEND[14;4H[K[12;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt13[?25l"XXtt13" [57;10H[K[57;10H2 lines, 14 characters[15;1Hmac[34m^M[mmac[34m^M^M[m[15;13H[K[16;1HEND[16;4H[K[15;1H[?12l[?25h
[?25l
2[17;2H[K[17;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt21[?25l"XXtt21" [57;10H[K[57;10H3 lines, 15 characters[18;1Hunix[18;5H[K[19;1Hunix[19;5H[K[20;1H[34m^M[mEND[20;6H[K[18;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt22[?25l"XXtt22" [57;10H[K[57;10H3 lines, 15 characters[21;1Hdos[34m^M[m[21;6H[K[22;1Hdos[34m^M[m[22;6H[K[23;1H[34m^M[mEND[23;6H[K[21;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt23[?25l"XXtt23" [57;10H[K[57;10H1 line, 12 characters[24;1Hmac[34m^M[mmac[34m^M[mEND[24;14H[K[24;1H[?12l[?25h[?25l
3[25;2H[K[25;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt31[?25l"XXtt31" [57;10H[K[57;10H6 lines, 33 characters[26;1Hunix[26;5H[K[27;1Hunix[27;5H[K[28;1Hdos[34m^M[m[28;6H[K[29;1Hdos[34m^M[m[29;6H[K[30;1Hmac[34m^M[mmac[34m^M[m[30;11H[K[31;1HEND[31;4H[K[26;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt32[?25l"XXtt32" [57;10H[K[57;10H6 lines, 36 characters[32;1Hunix[34m^M[m[32;7H[K[33;1Hunix[34m^M[m[33;7H[K[34;1Hdos[34m^M[m[34;6H[K[35;1Hdos[34m^M[m[35;6H[K[36;1Hmac[34m^M[mmac[34m^M^M[m[36;13H[K[37;1HEND[37;4H[K[32;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt33[?25l"XXtt33" [57;10H[K[57;10H5 lines, 32 characters[38;1Hunix[38;5H[K[39;1Hunix[39;5H[K[40;1Hdos[34m^M[m[40;6H[K[41;1Hdos[34m^M[m[41;6H[K[42;1Hmac[34m^M[mmac[34m^M[mEND[42;14H[K[38;1H[?12l[?25h[42;1H[?25l
4[43;2H[K[43;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt41[?25l"XXtt41" [57;10H[K[57;10H6 lines, 33 characters[44;1Hunix[44;5H[K[45;1Hunix[45;5H[K[46;1Hdos[34m^M[m[46;6H[K[47;1Hdos[34m^M[m[47;6H[K[48;1Hmac[34m^M[mmac[34m^M[m[48;11H[K[49;1HEND[49;4H[K[44;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt42[?25l"XXtt42" [57;10H[K[57;10H4 lines, 23 characters[50;1Hunix[50;5H[K[51;1Hunix[51;5H[K[52;1Hmac[34m^M[mmac[34m^M[m[52;11H[K[53;1HEND[53;4H[K[50;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$r XXtt43[?25l"XXtt43" [57;10H[K[57;10H4 lines, 24 characters[54;1Hdos[34m^M[m[54;6H[K[55;1Hdos[34m^M[m[55;6H[K[56;1Hmac[34m^M[mmac[34m^M^M[m[56;13H[K[54;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1HEND[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H5[?12l[?25h[?25l
:[?12l[?25h$r XXtt51[?25l"XXtt51" [57;10H[K[57;10H5 lines, 24 characters[1;56r[56;1H
[1;57r[56;1Hunix[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$r XXtt52[?25l"XXtt52" [57;10H[K[57;10H6 lines, 33 characters[1;56r[1;1H[5M[1;57r[52;1Hunix
dos[34m^M[m
dos[34m^M[m
END
unix[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$r XXtt53[?25l"XXtt53" [57;10H[K[57;10H3 lines, 22 characters[1;56r[1;1H[6M[1;57r[51;1Hunix
dos[34m^M[m
dos[34m^M[m
mac[34m^M[mmac[34m^M[m
END
dos[34m^M[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$r XXtt54[?25l"XXtt54" [57;10H[K[57;10H3 lines, 24 characters[1;56r[1;1H[3M[1;57r[54;1Hdos[34m^M[m
mac[34m^M[mmac[34m^M[mEND
unix,mac:unix[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hnoeol
END[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H6[?12l[?25h[?25l
:[?12l[?25h$r XXtt61[?25l"XXtt61" [57;10H[K[57;10H5 lines, 26 characters[1;56r[56;1H
[1;57r[56;1Hunix[34m^M[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$r XXtt62[?25l"XXtt62" [57;10H[K[57;10H5 lines, 39 characters[1;56r[1;1H[5M[1;57r[52;1Hunix[34m^M[m
dos[34m^M[m
dos[34m^M[m
END
dos,mac:dos[34m^M[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$r XXtt63[?25l"XXtt63" [57;10H[K[57;10H6 lines, 36 characters[1;56r[1;1H[5M[1;57r[52;1Hunix[34m^M[m
unix[34m^M[m
mac[34m^M[mmac[34m^M^M[m
END
unix[34m^M[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$r XXtt64[?25l"XXtt64" [57;10H[K[57;10H1 line, 30 characters[1;56r[1;1H[6M[1;57r[51;1Hunix[34m^M[m
dos[34m^M[m
dos[34m^M[m
mac[34m^M[mmac[34m^M^M[m
END
dos,mac:mac[34m^M[mmac[34m^M[mmac[34m^M[mnoeol[34m^M[mEND[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H7[?12l[?25h[?25l
:[?12l[?25h$r XXtt71[?25l"XXtt71" [57;10H[K[57;10H6 lines, 33 characters[1;56r[56;1H
[1;57r[56;1Hunix[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$r XXtt72[?25l"XXtt72" [57;10H[K[57;10H3 lines, 28 characters[1;56r[1;1H[6M[1;57r[51;1Hunix
dos[34m^M[m
dos[34m^M[m
mac[34m^M[mmac[34m^M[m
END
unix,dos,mac:unix[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[1;1H[2M[1;57r[55;1Hnoeol
END[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H8[?12l[?25h[?25l
:[?12l[?25h$r XXtt81[?25l"XXtt81" [57;10H[K[57;10H6 lines, 33 characters[1;56r[56;1H
[1;57r[56;1Hunix[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$r XXtt82[?25l"XXtt82" [57;10H[K[57;10H1 line, 27 characters[1;56r[1;1H[6M[1;57r[51;1Hunix
dos[34m^M[m
dos[34m^M[m
mac[34m^M[mmac[34m^M[m
END
mac,dos,unix:mac[34m^M[mnoeol[34m^M[mEND[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H9[?12l[?25h[?25l
:[?12l[?25h$r XXtt91[?25l"XXtt91" [57;10H[K[57;10H5 lines, 32 characters[1;56r[56;1H
[1;57r[56;1Hunix[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$r XXtt92[?25l"XXtt92" [57;10H[K[57;10H5 lines, 32 characters[1;56r[1;1H[5M[1;57r[52;1Hunix
dos[34m^M[m
dos[34m^M[m
mac[34m^M[mmac[34m^M[mEND
unix[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$r XXtt93[?25l"XXtt93" [57;10H[K[57;10H5 lines, 32 characters[1;56r[1;1H[5M[1;57r[52;1Hunix
dos[34m^M[m
dos[34m^M[m
mac[34m^M[mmac[34m^M[mEND
unix[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[1;1H[4M[1;57r[53;1Hunix
dos[34m^M[m
dos[34m^M[m
mac[34m^M[mmac[34m^M[mEND[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H10[?12l[?25h[?25l
:[?12l[?25h$r XXUnix[?25l"XXUnix" [57;10H[K[57;10H2 lines, 10 characters[1;56r[56;1H
[1;57r[56;1Hunix[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25hset nobinary ff&[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"test.out" 130 lines, 786 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[?1l>[?12l[?25h[?1049l
# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test30 = test61; then \
#	  if diff test.out test30.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test30.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test30.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test32.failed test.ok test.out X* viminfo
cp test32.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test32.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test32.in" 60 lines, 1391 characters[1;1HTest for insert expansion

:se cpt=.,w
* add-expands (word from next line) from other window
* add-expands (current buffer first)
* Local expansion, ends in an empty line (unless it becomes a global expansion)
* starts Local and switches to global add-expansion
:se cpt=.,w,i
* i-add-expands and switches to local
* add-expands lines (it would end in an empty line if it didn't ignored it self)
:se cpt=kXtestfile
* checks k-expansion, and file expansion (use Xtest11 instead of test11,
* because TEST11.OUT may match first on DOS)
:se cpt=w
* checks make_cyclic in other window
:se cpt=u nohid
* checks unloaded buffer expansion
* checks adding mode abortion
:se cpt=t,d
* tag expansion, define add-expansion interrupted
* t-expansion

STARTTEST
:so small.vim
:se nocp viminfo+=nviminfo cpt=.,w ff=unix | $-2,$w!Xtestfile | set ff&
:se cot=
[34m^W[mnO#include "Xtestfile"
ru[34m^N^N^X^N^[^A[m
O[34m^P^X^N
^X^P^P^P^P^P
^X^P^P^X^X^N^X^N^N^[[m
:se cpt=.,w,i
kOM[34m^N^X^N^X^N^X^X^X^P
^X^L^X^L^P^P^[[m
:se cpt=kXtestfile
:w Xtest11.one
:w Xtest11.two
O[34m^N^[[mIX[34m^[[mA[34m^X^F^N^[[m
:" use CTRL-X CTRL-F to complete Xtest11.one, remove it and then use
:" CTRL-X CTRL-F again to verify this doesn't cause trouble.
OX[34m^X^F^H^H^H^H^H^H^H^H^X^F^[[mddk
:se cpt=w
OST[34m^N^P^P^P^P^[[m
:se cpt=u nohid
[34m^W[moOEN[34m^N[m
unl[34m^N^X^X^P^[[m
:se cpt=t,d def=^\\k* tags=Xtestfile notagbsearch
O[34m^X^]^X^D^X^D^X^X^D^X^D^X^D^X^D[m
a[34m^N^[[m
:wq! test.out
ENDTEST

start of testfile
run1
run2
end of testfile[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTest for insert expansion[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[23;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[24;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 27 lines, 533 characters written[24;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[24;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[51;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hse nocp viminfo+=nviminfo cpt=.,w ff=unix | $-2,$w!Xtestfile | set ff&[?25l"Xtestfile" [57;13H[K[57;13H[New] 3L, 57C written[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hse cot=[?25l[52;1H[?12l[?25h[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;1H[34m^W[mnO#include "Xtestfile"
ru[1C[34mN^N^X^N^[^A[m
O[34m^P^X^N[m[31;8H[K[32;1H[34m^X^P^P^P^P^P[m[32;13H[K[33;1H[34m^X^P^P^X^X^N^X^N^N^[[m[33;21H[K[34;1H:se cpt=.,w,i[34;14H[K[35;1HkOM[34m^N^X^N^X^N^X^X^X^P
^X^L^X^L^P^P^[[m
:se cpt=kXtestfile
:w Xtest11.one[38;15H[K[39;2Hw Xtest11.two[39;15H[K[40;1HO[34m^N^[[mIX[34m^[[mA[34m^X^F^N^[[m[40;19H[K[41;1H:" use CTRL-X CTRL-F to complete Xtest11.one, remove it and then use
:" CTRL-X CTRL-F again to verify this doesn't cause trouble.
OX[34m^X^F^H^H^H^H^H^H^H^H^X^F^[[mddk[44;9Hw[44;11H[K[45;1HOST[34m^N^P^P^P^P^[[m
:se cpt=u nohid
[34m^W[moOEN[34m^N[m[47;9H[K[48;1Hunl[1C[34mN^X^X^P^[[m[48;14H[K[49;1H:se cpt=t,d def=^\\k* tags=Xtestfile notagbsearch
O[34m^X^]^X^D^X^D^X^X^D^X^D^X^D^X^D[m
a[34m^N^[[m[51;6H[K[52;1H:wq! test.out
ENDTEST[53;8H[K[54;1H[K[55;1Hstart of testfile
[7mtest32.in                                                                              [1;1H[?12l[?25h[?25l[m[57;1H[1m-- INSERT ---- Keyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;1Hmatch in file test32.in[1m-- Keyword completion (^N^P) [m[32mmatch 1 of 4[2;3H[m[57;29H[K[57;1Hmatch in file test32.in[1m^[m[57;24H[K[57;1H[1m-- Keyword completion (^N^P) [m[32mmatch 2 of 4[2;5H[m[57;29H[K[57;1H[K[57;1H[1m-- INSERT ---- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1mAdding Keyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;1Hmatch in file test32.in[1m-- Adding Keyword completion (^N^P) Word from other line[2;10H[1;27r[m[1;1H[2L[1;57r[1;1H#include "Xtestfile"
run1 run2[28;11H[1m[7m[+][2;10H[?12l[?25h[m[57;1H[K[?25l[57;1H[1m-- Adding Keyword completion (^N^P) Word from other line[m[57;1H[K[57;1H[1m-- INSERT --[m[57;1H[K[2;9H[?12l[?25h[?25l3[?12l[?25h
[?25l[57;1H[1m-- INSERT ---- Keyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;1H[1m-- Keyword completion (^N^P) [m[32mmatch 1 of 115[3;5H[m[57;29H[K[57;1H[K[57;1H[1m-- INSERT ---- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1mAdding Keyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;1H[1m-- Adding Keyword completion (^N^P) Word from other line[3;10H[m[57;1H[K[57;1H[1m-- INSERT ---- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1mKeyword Local completion (^N^P) -- Searching...[m[57;36H[32mmatch 1 of 4[m[1m.[m[57;48H[K[4;5H[57;35H[K[57;35H[1m [m[32mmatch 2 of 4[4;5H[m[57;35H[K[57;35H[1m [m[32mmatch 3 of 4[4;10H[m[57;35H[K[57;35H[1m [m[32mmatch 4 of 4[4;8H[m[57;35H[K[57;35H[1m [m[31mBack at original[4;1H[m[57;1H[K[57;1H[1m-- INSERT ---- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1mKeyword Local completion (^N^P) -- Searching...[m[57;36H[32mmatch 1 of 4[m[1m.[m[57;48H[K[5;5H[57;35H[K[57;35H[1m [m[32mmatch 2 of 4[5;5H[m[57;35H[K[57;1H[K[57;1H[1m-- INSERT ---- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1m^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1mKeyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;1H[1m-- Keyword completion (^N^P) The only match[5;5H[m[57;29H[K[57;1H[K[57;1H[1m-- INSERT ---- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1mAdding Keyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;1H[1m-- Adding Keyword completion (^N^P) [m[32mmatch 1 of 2[5;10H[m[57;36H[K[57;1Hmatch in file test32.in[1me[m[57;24H[K[57;1H[1m-- Adding Keyword completion (^N^P) Word from other line[5;10H[3;27r[m[3;1H[3L[1;57r[3;1Hrun3 run3

run1 run2[?12l[?25h[57;1H[K[?25l[57;1H[1m-- Adding Keyword completion (^N^P) Word from other line[m[57;1H[K[57;1H[1m-- INSERT --[m[57;1H[K[5;9H[?12l[?25h
[?25l[57;1H:[?12l[?25hse cpt=.,w,i[?25l[6;1H[?12l[?25h[5;9H[?25l[57;1H[1m-- INSERT --[m[57;13H[K[57;4H[1mKeyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;9H[32m included file: Xtestfile[mmatch in file test32.in[57;24H[K[57;1H[1m-- Keyword completion (^N^P) The only match[5;9H[m[57;29H[K[57;1H[K[57;1H[1m-- INSERT ---- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1mAdding Keyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;9H[32m included file: Xtestfile[mmatch in file test32.in[57;24H[K[57;1H[1m-- Adding Keyword completion (^N^P) The only match[5;19H[m[57;36H[K[57;1H[K[57;1H[1m-- INSERT ---- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1mAdding Keyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;9H[32m included file: Xtestfile[mmatch in file test32.in[57;24H[K[57;1H[1m-- Adding Keyword completion (^N^P) The only match[5;28H[m[57;36H[K[57;1H[K[57;1H[1m-- INSERT ---- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1m^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1m^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1mKeyword Local completion (^N^P) -- Searching...[m[57;36H[32mmatch 1 of 3[m[1m.[m[57;48H[K[5;29H[57;1H[K[57;1H[1m-- INSERT ---- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- Whole line completion (^L^N^P)^ U-- Searching...[m[32mScanning: test32.in[m[1me[m[57;20H[K[57;1H[1m-- Whole line completion (^L^N^P) [m[32mmatch 1 of 57[6;29H[m[57;4H[1mINSERT --e[m[57;13H[K[57;1H[K[57;1H[1m-- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y) [m[32mmatch 1 of 57[m[57;4H[1mAddinge Whole line completion (^L^N^P) -- Searching...[m[32mScanning: test32.in[m[1me[m[57;20H[K[57;1H[1m-- Adding Whole line completion (^L^N^P) The only match[7;29H[m[57;41H[K[57;41H[1m [m[31mBack at original[7;1H[m[57;41H[K[57;41H[1m The only match[7;29H[5;27r[m[5;1H[3L[1;57r[5;1HMakefile[8Cto      run3
Makefile[8Cto      run3
Makefile[8Cto      run3[?12l[?25h[57;1H[K[?25l[57;1H[1m-- INSERT --[m[57;1H[K[7;28H[?12l[?25h[8;9H[?25l[57;1H:[?12l[?25hse cpt=kXtestfile[?25l[8;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw Xtest11.one[?25l"Xtest11.one" [New] 9L, 104C written[28;1H[1m[7mXtest11.one+   [8;9H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw Xtest11.two[?25l"Xtest11.two" [New] 9L, 104C written[8;9H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;13H[K[57;4H[1mKeyword completion (^N^P) -- Searching...[m[32mScanning dictionary: Xtestfile[m[1m-[m[57;31H[K[57;1Hmatch in file Xtestfile[57;24H[K[57;1H[1m-- Keyword completion (^N^P) [m[32mmatch 1 of 9[8;7H[8;27r[m[8;1H[L[1;57r[8;1Htest11[28;13H[1m[7m[+][8;7H[mI[?12l[?25h [57;1H[K[?25l[57;1H[1m-- Keyword completion (^N^P) [m[32mmatch 1 of 9[m[57;1H[K[57;1H[1m-- INSERT --[m[57;1H[K[8;6H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;1H[K[8;1HXtest11[?12l[?25h[?25l[57;1H[1m-- INSERT ---- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- File name completion (^F^N^P)s ^-- Searching...[m[57;34H[32mmatch 1 of 2[m[1m.[m[57;46H[K[8;12H[57;33H[K[57;33H[1m [m[32mmatch 2 of 2[8;12H[m.two[?12l[?25h[57;1H[K[?25l[57;1H[1m-- INSERT --[m[57;1H[K[8;11H[?12l[?25h[9;9H[?25l[57;1H:[?12l[?25h" use CTRL-X CTRL-F to complete Xtest11.one, remove it and then use[?25l[9;9H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" CTRL-X CTRL-F again to verify this doesn't cause trouble.[?25l[9;9H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;13H[K[57;4H[1m^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- File name completion (^F^N^P)s ^-- Searching...[m[57;34H[32mmatch 1 of 4[m[1m.[m[57;46H[K[9;8H[57;4H[1mINSERTa -- [m[57;13H[K[57;1H[K[57;1H[1m-- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- File name completion (^F^N^P)s ^-- Searching...[m[57;34H[32mmatch 1 of 447[m[1m.[m[57;48H[K[9;13H[9;27r[9;1H[L[1;57r[9;1HMake_all.makd[?12l[?25h [57;1H[K[?25l[57;1H[1m-- INSERT --[m[57;1H[K[9;12H[?12l[?25h[?25l[9;27r[27;1H
[1;57r[27;1H[1m[34m~                                                                                      [9;1H[?12l[?25h[8;1H
[?25l[57;1H[m:[?12l[?25hse cpt=w[?25l[9;1H[?12l[?25h[?25l[57;1H[1m-- INSERT ---- Keyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;1Hmatch in file test32.in[1m-- Keyword completion (^N^P) The only match[9;10H[m[57;29H[K[57;29H[1m [m[31mBack at original[9;3H[m[57;29H[K[57;1Hmatch in file test32.in[1m^[m[57;24H[K[57;1H[1m-- Keyword completion (^N^P) The only match[9;10H[m[57;29H[K[57;29H[1m [m[31mBack at original[9;3H[m[57;29H[K[57;1Hmatch in file test32.in[1m^[m[57;24H[K[57;1H[1m-- Keyword completion (^N^P) The only match[9;10H[9;27r[m[9;1H[L[1;57r[9;1HSTARTTEST[?12l[?25h[57;1H[K[?25l[57;1H[1m-- Keyword completion (^N^P) The only match[m[57;1H[K[57;1H[1m-- INSERT --[m[57;1H[K[9;9H[?12l[?25h[10;9H[?25l[57;1H:[?12l[?25hse cpt=u nohid[?25l[10;9H[?12l[?25h[?25l[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [10;9H[?12l[?25h[?25l[m[57;1H[1m-- INSERT --[m[57;13H[K[57;4H[1mKeyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;1Hmatch in file test32.in[1m-- Keyword completion (^N^P) The only match[10;8H[m[57;1H[K[57;1H[1m-- INSERT ---- Keyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;1Hmatch in file test32.in[1m-- Keyword completion (^N^P) [m[32mmatch 1 of 3[11;7H[m[57;29H[K[57;1H[K[57;1H[1m-- INSERT ---- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1m^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- INSERTe --^[m[57;13H[K[57;4H[1mKeyword completion (^N^P) -- Searching...[m[32mScanning: test32.in[m[1mo[m[57;20H[K[57;1Hmatch in file test32.in[1m-- Keyword completion (^N^P) The only match[11;7H[10;56r[m[10;1H[2L[1;57r[10;1HENDTEST
unless[?12l[?25h[57;1H[K[?25l[57;1H[1m-- Keyword completion (^N^P) The only match[m[57;1H[K[57;1H[1m-- INSERT --[m[57;1H[K[11;6H[?12l[?25h[12;6H[?25l[57;1H:[?12l[?25hse cpt=t,d def=^\\k* tags=Xtestfile notagbsearch[?25l[12;6H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;13H[K[57;4H[1m^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- Tag completion (^]^N^P)^ N-- Searching...[m[57;28H[32mmatch 1 of 3[m[1m.[m[57;40H[K[12;7H[57;4H[1mINSERTm --e[m[57;13H[K[57;1H[K[57;1H[1m-- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y) [m[32mmatch 1 of 3[m[57;4H[1mDefinition completion (^D^N^P)^ U-- Searching...[m[57;50H[K[57;1H[32mScanning included file: Xtestfile[m[1m [m[57;34H[K[57;1Hmatch in file Xtestfile[57;24H[K[57;1H[1m-- Definition completion (^D^N^P) The only match[12;11H[57;4HINSERTt --n[m[57;13H[K[57;1H[K[57;1H[1m-- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y) The only match-- Addinge Definition completion (^D^N^P) -- Searching...[m[32mScanning included file: Xtestfile[m[1m^[m[57;34H[K[57;1Hmatch in file Xtestfile[57;24H[K[57;1H[1m-- Adding Definition completion (^D^N^P) The only match[12;20H[57;4HINSERT --f[m[57;13H[K[57;1H[K[57;1H[1m-- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y) The only match-- INSERTe --^[m[57;13H[K[57;4H[1m^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)-- Definition completion (^D^N^P)^ U-- Searching...[m[32mScanning included file: Xtestfile[m[1m [m[57;34H[K[57;1Hmatch in file Xtestfile[57;24H[K[57;1H[1m-- Definition completion (^D^N^P) The only match[12;25H[57;4HINSERTt --n[m[57;13H[K[57;1H[K[57;1H[1m-- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y) The only match-- Addinge Definition completion (^D^N^P) -- Searching...[m[32mScanning included file: Xtestfile[m[1m^[m[57;34H[K[57;1Hmatch in file Xtestfile[57;24H[K[57;1H[1m-- Adding Definition completion (^D^N^P) The only match[12;37H[57;4HINSERT --f[m[57;13H[K[57;1H[K[57;1H[1m-- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y) The only match-- Addinge Definition completion (^D^N^P) -- Searching...[m[32mScanning included file: Xtestfile[m[1m^[m[57;34H[K[57;1Hmatch in file Xtestfile[57;24H[K[57;1H[1m-- Adding Definition completion (^D^N^P) The only match[12;38H[57;4HINSERT --f[m[57;13H[K[57;1H[K[57;1H[1m-- ^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y) The only match-- Addinge Definition completion (^D^N^P) -- Searching...[m[32mScanning included file: Xtestfile[m[1m^[m[57;34H[K[57;1Hmatch in file Xtestfile[57;24H[K[57;1H[1m-- Adding Definition completion (^D^N^P) Word from other line[12;42H[57;4HINSERT --f[m[57;13H[K[57;1H[K[57;1H[1m-- Keyword completion (^N^P) -- Searching...[m[32mScanning tags.[m[1mp[m[57;15H[K[57;10H[32mincluded file: Xtestfile[m[1m-- Keyword completion (^N^P) The only match[13;4H[12;56r[m[12;1H[2L[1;57r[12;1Htest11file      36Gepeto[8C/Tag/ asd
asd[?12l[?25h[57;1H[K[?25l[57;1H[1m-- Keyword completion (^N^P) The only match[m[57;1H[K[57;1H[1m-- INSERT --[m[57;1H[K[13;3H[?12l[?25h
ru[?25l[57;1H:[?12l[?25hwq! test.out[?25l"test.out" [57;12H[K[57;12H[New] 15L, 175C written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test32 = test61; then \
#	  if diff test.out test32.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test32.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test32.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test58.failed test.ok test.out X* viminfo
cp test58.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test58.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test58.in" 656 lines, 11024 characters[1;1HTests for spell checking.     vim: set ft=vim :

STARTTEST
:so small.vim
:"
:" Don't want to depend on the locale from the environment
:set enc=latin1
:e!
:"
:" Check using z= in new buffer (crash fixed by patch 7.4a.028).
:set maxmem=512 spell
iasd[34m^[[mz=:"
:"
:" Function to test .aff/.dic with list of good and bad words.
:func TestOne(aff, dic)
  set spellfile=
  $put =''
  $put ='test '. a:aff . '-' . a:dic
  " Generate a .spl file from a .dic and .aff file.
  exe '1;/^' . a:aff . 'affstart/+1,/^' . a:aff . 'affend/-1w! Xtest.aff'
  exe '1;/^' . a:dic . 'dicstart/+1,/^' . a:dic . 'dicend/-1w! Xtest.dic'
  mkspell! Xtest Xtest
  " use that spell file
  set spl=Xtest.latin1.spl spell
  " list all valid words
  spelldump
  %yank
  quit
  $put
  $put ='-------'
  " find all bad words and suggestions for them
  exe '1;/^' . a:aff . 'good:'
  normal 0f:]s
  let prevbad = ''
  while 1
    let [bad, a] = spellbadword()
    if bad == '' || bad == prevbad || bad == 'badend'[38;7Hbreak
    endif
    let prevbad = bad
    let lst = spellsuggest(bad, 3)
    normal mm
    $put =bad
    $put =string(lst)
    normal `m]s
  endwhile
endfunc
:"
:call TestOne('1', '1')
:$put =soundfold('goobledygoook')
:$put =soundfold('koprnven')
:$put =soundfold('oeverloos gezwets edale')
:"
:"
:" and now with SAL instead of SOFO items; test automatic reloading
gg:/^affstart_sal/+1,/^affend_sal/-1w! Xtest.aff[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for spell checking.     vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 111 lines, 2591 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H/^test2:
]smm:let [str, a] = spellbadword()
:$put =str
`m]s:let [str, a] = spellbadword()
:$put =str
:unlet str a
:"
:" Postponed prefixes
:call TestOne('2', '1')
:"
:" Compound words
:call TestOne('3', '3')
:call TestOne('4', '4')
:call TestOne('5', '5')
:call TestOne('6', '6')
:call TestOne('7', '7')
:"
:" NOSLITSUGS
:call TestOne('8', '8')
:" Numbers
:call TestOne('9', '9')
:"
:" clean up for valgrind
:delfunc TestOne
:set spl= enc=latin1
:"
gg:/^test output:/,$wq! test.out
ENDTEST

1affstart
SET ISO8859-1
TRY esianrtolcdugmphbyfvkwjkqxz-'ESIANRTOLCDUGMPHBYFVKWJKQXZ

FOL  
LOW  
UPP  

SOFOFROM abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ[39;1H޿
SOFOTO   ebctefghejklnnepkrstevvkesebctefghejklnnepkrstevvkeseeeeeeeceeeeeeeedneeeeeeeee[41;1Heeepseeeeeeeeceeeeeeeedneeeeeeeeeeep?

MIDWORD '-

KEP =
RAR ?
BAD !

PFX I N 1
PFX I 0 in .

PFX O Y 1
PFX O 0 out .

SFX S Y 2
SFX S 0 s [^s][28;1H[?12l[?25h
[?25l[57;1H:so! Xdotest[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Don't want to depend on the locale from the environment[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset enc=latin1[?25l[27m[23m[m[H[2J[1;1H/^test2:
]smm:let [str, a] = spellbadword()
:$put =str
`m]s:let [str, a] = spellbadword()
:$put =str
:unlet str a
:"
:" Postponed prefixes
:call TestOne('2', '1')
:"
:" Compound words
:call TestOne('3', '3')
:call TestOne('4', '4')
:call TestOne('5', '5')
:call TestOne('6', '6')
:call TestOne('7', '7')
:"
:" NOSLITSUGS
:call TestOne('8', '8')
:" Numbers
:call TestOne('9', '9')
:"
:" clean up for valgrind
:delfunc TestOne
:set spl= enc=latin1
:"
gg:/^test output:/,$wq! test.out
ENDTEST

1affstart
SET ISO8859-1
TRY esianrtolcdugmphbyfvkwjkqxz-'ESIANRTOLCDUGMPHBYFVKWJKQXZ

FOL  
LOW  
UPP  

SOFOFROM abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ[39;1H޿
SOFOTO   ebctefghejklnnepkrstevvkesebctefghejklnnepkrstevvkeseeeeeeeceeeeeeeedneeeeeeeee[41;1Heeepseeeeeeeeceeeeeeeedneeeeeeeeeeep?

MIDWORD '-

KEP =
RAR ?
BAD !

PFX I N 1
PFX I 0 in .

PFX O Y 1
PFX O 0 out .

SFX S Y 2
SFX S 0 s [^s][29;1H[?12l[?25h[?25l[57;1H:[?12l[?25he![?25l"test58.in" 656 lines, 11024 characters[1;1HTests for spell checking.     vim: set ft=vim :[2;1H[K[3;1HSTARTTEST[3;10H[K[4;1H:so small.vim[4;14H[K[5;2H"[5;3H[K[6;2H" Don't want to depend on the locale from the environment
:set enc=latin1
:e![8;4H[K[9;2H"[9;3H[K[10;4HCheck using z= in new buffer (crash fixed by patch 7.4a.028).
:set maxmem=512 spell
iasd[34m^[[mz=:"[12;11H[K[13;2H"[13;3H[K[14;2H" Function to test .aff/.dic with list of good and bad words.
:func[9Caff, dic
  set spellfile=[16;17H[K[17;1H  $put =''
  $put ='test '. a:aff . '-' . a:dic
  " Generate a .spl file from a .dic and .aff file.
  exe '1;/^' . a:aff . 'affstart/+1,/^' . a:aff . 'affend/-1w! Xtest.aff'
  exe '1;/^' . a:dic . 'dicstart/+1,/^' . a:dic . 'dicend/-1w! Xtest.dic'
  mkspell! Xtest Xtest
  " use that spell file[23;24H[K[24;1H  set spl=Xtest.latin1.spl spell
  " list all valid words
  spelldump
  %yank[27;8H[K[28;1H  quit[28;7H[K[29;3H$put
  $put ='-------'
  " find all bad words and suggestions for them
  exe '1;/^' . a:aff . 'good:'[32;31H[K[33;3Hnormal 0f:]s
  let prevbad = ''[34;19H[K[35;1H  while 1[35;10H[K[36;1H    let [bad, a] = spellbadword()[36;34H[K[37;5Hif bad == '' || bad == prevbad || bad == 'badend'
      break[38;12H[K[39;1H    endif[39;10H[K[40;1H    let prevbad = bad[40;22H[K[41;1H    let lst = spellsuggest(bad, 3)[41;35H[K[42;5Hnormal mm
    $put =bad
    $put =string(lst)
    normal `m]s
  endwhile
endfunc
:"
:call TestOne('1', '1')
:$put =soundfold('goobledygoook')
:$put =soundfold('koprnven')
:$put =soundfold('oeverloos gezwets edale')
:"[53;3H[K[54;1H:"
:" and now with SAL instead of SOFO items; test automatic reloading
gg:/^affstart_sal/+1,/^affend_sal/-1w! Xtest.aff[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Check using z= in new buffer (crash fixed by patch 7.4a.028).[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset maxmem=512 spell[?25l[1;31H[44mvim[m

[41mSTARTTEST[7;10Hlatin1[11;6Hmaxmem
iasd[14;22Haff[m/.[41mdic
[m:[41mfunc[m [41mTestOne[m([41maff[m, [41mdic[16;7Hspellfile[m[18;18H[44ma[m:[41maff[m[9C[44ma[m:[41mdic[19;17Hspl[14Cdic[m and .[41maff
[m  [41mexe[m[10C[44ma[m:[41maff[m . '[41maffstart[m[10C[44ma[m:[41maff[m . '[41maffend[m/-1w! [41mXtest[m.[41maff
[m  [41mexe[m[10C[44ma[m:[41mdic[m . '[41mdicstart[m[10C[44ma[m:[41mdic[m . '[41mdicend[m/-1w! [41mXtest[m.[41mdic
[m  [41mmkspell[m! [41mXtest[m [41mXtest[24;7Hspl[m=[41mXtest[m.[41mlatin1[m.[41mspl

[m  [41mspelldump[32;3Hexe[m[10C[44ma[m:[41maff[34;7Hprevbad[36;20Hspellbadword[37;28Hprevbad[12Cbadend[39;5Hendif[40;9Hprevbad[41;9Hlst[m = [41mspellsuggest[44;18Hlst

[m  [41mendwhile
endfunc[49;7HTestOne[50;8Hsoundfold[m('[41mgoobledygoook[51;8Hsoundfold[m('[41mkoprnven[52;8Hsoundfold[m('[41moeverloos[m [41mgezwets[m [41medale[55;32HSOFO
gg[m:/^[41maffstart[m_[41msal[m/+1,/^[41maffend[m_[41msal[m/-1w! [41mXtest[m.[41maff[1;1H[?12l[?25h[?25lasdTests[m for spell checking.     [44mvim[m: set ft=vim :[1;3H[?12l[?25h[?25l[57;1HChange "asdTests" to:
 1 "Acid tests"
 2 "Attests"
 3 "Ass Tests"
 4 "As Tests"
 5 "Sad Tests"
 6 "Ads Tests"
 7 "As tests"
 8 "As detests"
 9 "Add Tests"
10 "Aid Tests"
11 "Ash Tests"
12 "Ad Tests"
13 "And Tests"
14 "Ask Tests"
15 "Asp Tests"
16 "USD Tests"
17 "Astutest"
18 "Autotests"
19 "Sadists"
20 "Asst Tests"
21 "Assad Tests"
22 "SSD Tests"
23 "Detests"
24 "SD Tests"
25 "As attests"
26 "Ass tests"
27 "ADD Tests"
28 "AUD Tests"
29 "Acid test's"
30 "Acid testes"
31 "Acid testis"
32 "AD Tests"
33 "Adjusts"
34 "AMD Tests"
35 "ASB Tests"
36 "ASL Tests"
37 "BSD Tests"
38 "LSD Tests"
39 "Ass detests"
40 "Artists"
41 "Assists"
42 "Asbestos"
43 "As d Tests"
44 "Saddest"
45 "Asst sets"
46 "Tests"
47 "Acidness"
48 "A's Tests"
49 "Ace Tests"
50 "Ada Tests"
51 "Ado Tests"
52 "DSA Tests"
53 "Sat Tests"
54 "Saw Tests"
55 "Say Tests"
Type number and <Enter> or click with mouse (empty cancels): [?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[27m[23m[m[H[2J[1;1H[41masdTests[m for spell checking.     [44mvim[m: set ft=vim :

[41mSTARTTEST[m
:so small.vim
:"
:" Don't want to depend on the locale from the environment
:set enc=[41mlatin1[m
:e!
:"
:" Check using z= in new buffer (crash fixed by patch 7.4a.028).
:set [41mmaxmem[m=512 spell
[41miasd[m[34m^[[mz=:"
:"
:" Function to test .[41maff[m/.[41mdic[m with list of good and bad words.
:[41mfunc[m [41mTestOne[m([41maff[m, [41mdic[m)
  set [41mspellfile[m=
  $put =''
  $put ='test '. [44ma[m:[41maff[m . '-' . [44ma[m:[41mdic[m
  " Generate a .[41mspl[m file from a .[41mdic[m and .[41maff[m file.
  [41mexe[m '1;/^' . [44ma[m:[41maff[m . '[41maffstart[m/+1,/^' . [44ma[m:[41maff[m . '[41maffend[m/-1w! [41mXtest[m.[41maff[m'
  [41mexe[m '1;/^' . [44ma[m:[41mdic[m . '[41mdicstart[m/+1,/^' . [44ma[m:[41mdic[m . '[41mdicend[m/-1w! [41mXtest[m.[41mdic[m'
  [41mmkspell[m! [41mXtest[m [41mXtest[m
  " use that spell file
  set [41mspl[m=[41mXtest[m.[41mlatin1[m.[41mspl[m spell
  " list all valid words
  [41mspelldump[m
  %yank
  quit
  $put
  $put ='-------'
  " find all bad words and suggestions for them
  [41mexe[m '1;/^' . [44ma[m:[41maff[m . 'good:'
  normal 0f:]s
  let [41mprevbad[m = ''
  while 1
    let [bad, a] = [41mspellbadword[m()
    if bad == '' || bad == [41mprevbad[m || bad == '[41mbadend[m'[38;7Hbreak
    [41mendif[m
    let [41mprevbad[m = bad
    let [41mlst[m = [41mspellsuggest[m(bad, 3)
    normal mm
    $put =bad
    $put =string([41mlst[m)
    normal `m]s
  [41mendwhile
endfunc[m
:"
:call [41mTestOne[m('1', '1')
:$put =[41msoundfold[m('[41mgoobledygoook[m')
:$put =[41msoundfold[m('[41mkoprnven[m')
:$put =[41msoundfold[m('[41moeverloos[m [41mgezwets[m [41medale[m')
:"
:"
:" and now with SAL instead of [41mSOFO[m items; test automatic reloading
[41mgg[m:/^[41maffstart[m_[41msal[m/+1,/^[41maffend[m_[41msal[m/-1w! [41mXtest[m.[41maff[1;3H[?12l[?25h[?25l[57;1H[m:[?12l[?25h"[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Function to test .aff/.dic with list of good and bad words.[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunc TestOne(aff, dic)[?25l
:  [?12l[?25h  set spellfile=
[?25l:  [?12l[?25h  $put =''
[?25l:  [?12l[?25h  $put ='test '. a:aff . '-' . a:dic
[?25l:  [?12l[?25h  " Generate a .spl file from a .dic and .aff file.
[?25l:  [?12l[?25h  exe '1;/^' . a:aff . 'affstart/+1,/^' . a:aff . 'affend/-1w! Xtest.aff'
[?25l:  [?12l[?25h  exe '1;/^' . a:dic . 'dicstart/+1,/^' . a:dic . 'dicend/-1w! Xtest.dic'
[?25l:  [?12l[?25h  mkspell! Xtest Xtest
[?25l:  [?12l[?25h  " use that spell file
[?25l:  [?12l[?25h  set spl=Xtest.latin1.spl spell
[?25l:  [?12l[?25h  " list all valid words
[?25l:  [?12l[?25h  spelldump
[?25l:  [?12l[?25h  %yank
[?25l:  [?12l[?25h  quit
[?25l:  [?12l[?25h  $put
[?25l:  [?12l[?25h  $put ='-------'
[?25l:  [?12l[?25h  " find all bad words and suggestions for them
[?25l:  [?12l[?25h  exe '1;/^' . a:aff . 'good:'
[?25l:  [?12l[?25h  normal 0f:]s
[?25l:  [?12l[?25h  let prevbad = ''
[?25l:  [?12l[?25h  while 1
[?25l:    [?12l[?25h    let [bad, a] = spellbadword()
[?25l:    [?12l[?25h    if bad == '' || bad == prevbad || bad == 'badend'
[?25l:      [?12l[?25h      break
[?25l:      [?12l[?25h    endif
[?25l:    [?12l[?25h    let prevbad = bad
[?25l:    [?12l[?25h    let lst = spellsuggest(bad, 3)
[?25l:    [?12l[?25h    normal mm
[?25l:    [?12l[?25h    $put =bad
[?25l:    [?12l[?25h    $put =string(lst)
[?25l:    [?12l[?25h    normal `m]s
[?25l:    [?12l[?25h  endwhile
[?25l:  [?12l[?25hendfunc[1;1H[32L[?25l[1;1H[41masdTests[m for spell checking.     [44mvim[m: set ft=vim :

[41mSTARTTEST[m
:so small.vim
:"
:" Don't want to depend on the locale from the environment
:set enc=[41mlatin1[m
:e!
:"
:" Check using z= in new buffer (crash fixed by patch 7.4a.028).
:set [41mmaxmem[m=512 spell
[41miasd[m[34m^[[mz=:"
:"
:" Function to test .[41maff[m/.[41mdic[m with list of good and bad words.
:[41mfunc[m [41mTestOne[m([41maff[m, [41mdic[m)
  set [41mspellfile[m=
  $put =''
  $put ='test '. [44ma[m:[41maff[m . '-' . [44ma[m:[41mdic[m
  " Generate a .[41mspl[m file from a .[41mdic[m and .[41maff[m file.
  [41mexe[m '1;/^' . [44ma[m:[41maff[m . '[41maffstart[m/+1,/^' . [44ma[m:[41maff[m . '[41maffend[m/-1w! [41mXtest[m.[41maff[m'
  [41mexe[m '1;/^' . [44ma[m:[41mdic[m . '[41mdicstart[m/+1,/^' . [44ma[m:[41mdic[m . '[41mdicend[m/-1w! [41mXtest[m.[41mdic[m'
  [41mmkspell[m! [41mXtest[m [41mXtest[m
  " use that spell file
  set [41mspl[m=[41mXtest[m.[41mlatin1[m.[41mspl[m spell
  " list all valid words
  [41mspelldump[m
  %yank
  quit
  $put
  $put ='-------'
  " find all bad words and suggestions for them
  [41mexe[m '1;/^' . [44ma[m:[41maff[m . 'good:'[57;1H[K[1;3H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[1;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall TestOne('1', '1')[?25l"Xtest.aff" [57;13H[K[57;13H[New File] 46 lines, 754 characters written
"Xtest.dic" [New File] 11 lines, 71 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - testCompressing word tree...[57;26H[K[57;1H
Compressed 29 of 127 nodes; 98 (77%) remaining
Writing spell file Xtest.latin1.spl ...
Done!
Estimated runtime memory use: 490 bytes
Reading back spell file...
Performing soundfolding...
Total number of words: 16
Number of words after soundfolding: 16
Compressing word tree...
Compressed 39 of 104 nodes; 65 (62%) remaining
Writing suggestion file Xtest.latin1.sug ...
Estimated runtime memory use: 357 bytes
17 lines yanked
17 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put =soundfold('goobledygoook')[?25l[1;1H[19L[2;1HTest [41mNumbers[m

9[41maffstart[m
9[41maffend[m

9[41mdicstart[m
1234
[41mfoo
bar[m
9[41mdicend[m

9[41mgood[m: 0b1011 0777 1234 0x01ff
[41mbadend[m


[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mlatin1[m.[41mspl[m[20;25H[K[21;1HComment[21;8H[K[22;1Hdeol[22;5H[K[23;1Hdr[23;5H[K[24;1Hinpu[24;7H[K[25;1HOK[25;3H[K[26;1Houtput[26;7H[K[27;1Houtputs
outtest
put[29;4H[K[30;1Hputs[30;5H[K[31;1Htest[31;5H[K[32;1Htesten[32;7H[K[33;1Htestn[33;6H[K[34;1Hthe end[34;8H[K[35;1Huk[35;3H[K[36;1Hwrong[36;6H[K[37;1H-------[37;8H[K[38;1H[41mbad[m[38;7H[K[39;1H['put', 'uk', 'OK']
[41minputs[m[40;7H[K[41;1H['input', 'puts', 'outputs'][41;29H[K[42;1H[41mcomment[m[42;8H[K[43;1H['Comment', 'outtest', 'the end']
[41mok[m[44;5H[K[45;1H['OK', 'uk', 'put']
[41mOk[m[46;3H[K[47;1H['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdl[m[50;5H[K[51;1H['deol', 'dr', 'test'][51;25H[K[52;1H[41mend[m[52;4H[K[53;1H['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test'][55;22H[K[56;2H[41mebletegek[m[56;11H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =soundfold('koprnven')[?25l[1;56r[56;1H
[1;57r[56;1H[41mkepereneven[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =soundfold('oeverloos gezwets edale')[?25l[1;56r[56;1H
[1;57r[56;1H[41meverles[m [41mgesvets[m [41metele[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" and now with SAL instead of SOFO items; test automatic reloading[?25l[56;1H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1H[41masdTests[m [41mfor[m [41mspell[m [41mchecking[m.     [41mvim[m: [41mset[m [41mft[m=[41mvim[m :

[41mSTARTTEST[m
:[41mso[m [41msmall[m.[41mvim[m
:"
:" [41mDon't[m [41mwant[m [41mto[m [41mdepend[m [41mon[m [41mthe[m [41mlocale[m [41mfrom[m [41mthe[m [41menvironment[m
:[41mset[m [41menc[m=[41mlatin1[m
:[41me[m!
:"
:" [41mCheck[m [41musing[m [41mz[m= [41min[m [41mnew[m [41mbuffer[m ([41mcrash[m [41mfixed[m [41mby[m [41mpatch[m 7.4[41ma[m.028).
:[41mset[m [41mmaxmem[m=512 [41mspell
iasd[m[34m^[[m[41mz[m=:"
:"
:" [41mFunction[m [41mto[m test .[41maff[m/.[41mdic[m [41mwith[m [41mlist[m [41mof[m [41mgood[m [41mand[m [41mbad[m [41mwords[m.
:[41mfunc[m [41mTestOne[m([41maff[m, [41mdic[m)
  [41mset[m [41mspellfile[m=
  $put =''
  $put ='test '. [41ma[m:[41maff[m . '-' . [41ma[m:[41mdic[m
  " [41mGenerate[m [41ma[m .[41mspl[m [41mfile[m [41mfrom[m [41ma[m .[41mdic[m [41mand[m .[41maff[m [41mfile[m.
  [41mexe[m '1;/^' . [41ma[m:[41maff[m . '[41maffstart[m/+1,/^' . [41ma[m:[41maff[m . '[41maffend[m/-1[41mw[m! [41mXtest[m.[41maff[m'
  [41mexe[m '1;/^' . [41ma[m:[41mdic[m . '[41mdicstart[m/+1,/^' . [41ma[m:[41mdic[m . '[41mdicend[m/-1[41mw[m! [41mXtest[m.[41mdic[m'
  [41mmkspell[m! [41mXtest[m [41mXtest[m
  " [41muse[m [41mthat[m [41mspell[m [41mfile
[m  [41mset[m [41mspl[m=[41mXtest[m.[41mlatin1[m.[41mspl[m [41mspell[m
  " [41mlist[m [41mall[m [41mvalid[m [41mwords
[m  [41mspelldump[m
  %[41myank
[m  [41mquit[m
  $put
  $put ='-------'
  " [41mfind[m [41mall[m [41mbad[m [41mwords[m [41mand[m [41msuggestions[m [41mfor[m [41mthem
[m  [41mexe[m '1;/^' . [41ma[m:[41maff[m . '[41mgood[m:'
  [41mnormal[m 0[41mf[m:][41ms
[m  [41mlet[m [41mprevbad[m = ''
  [41mwhile[m 1
    [41mlet[m [[41mbad[m, [41ma[m] = [41mspellbadword[m()
    [41mif[m [41mbad[m == '' || [41mbad[m == [41mprevbad[m || [41mbad[m == '[41mbadend[m'[38;7H[41mbreak
[m    [41mendif
[m    [41mlet[m [41mprevbad[m = [41mbad
[m    [41mlet[m [41mlst[m = [41mspellsuggest[m([41mbad[m, 3)
    [41mnormal[m [41mmm[m
    $put =[41mbad[m
    $put =[41mstring[m([41mlst[m)
    [41mnormal[m `[41mm[m][41ms
[m  [41mendwhile
endfunc[m
:"
:[41mcall[m [41mTestOne[m('1', '1')
:$put =[41msoundfold[m('[41mgoobledygoook[m')
:$put =[41msoundfold[m('[41mkoprnven[m')
:$put =[41msoundfold[m('[41moeverloos[m [41mgezwets[m [41medale[m')
:"
:"
:" [41mand[m [41mnow[m [41mwith[m [41mSAL[m [41minstead[m [41mof[m [41mSOFO[m [41mitems[m; test [41mautomatic[m [41mreloading
gg[m:/^[41maffstart[m_[41msal[m/+1,/^[41maffend[m_[41msal[m/-1[41mw[m! [41mXtest[m.[41maff[1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h/^affstart_sal/+1,/^affend_sal/-1w! Xtest.aff[?25l"Xtest.aff" [57;13H[K[57;13H151 lines, 3412 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmkspell! Xtest Xtest[?25lReading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - testCompressing word tree...[57;26H[K[57;1H
Compressed 29 of 127 nodes; 98 (77%) remaining
Writing spell file Xtest.latin1.spl ...
Done!
Estimated runtime memory use: 490 bytes
Performing soundfolding...
Total number of words: 16
Number of words after soundfolding: 15
Compressing word tree...
Compressed 33 of 75 nodes; 42 (56%) remaining
Writing suggestion file Xtest.latin1.sug ...
Estimated runtime memory use: 241 bytes
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put =soundfold('goobledygoook')[?25l[1;1H[14L[1;1H9[41maffstart[m
9[41maffend[m

9[41mdicstart[m
1234
[41mfoo
bar[m
9[41mdicend[m

9[41mgood[m: 0b1011 0777 1234 0x01ff
[41mbadend[m


[44mtest[m output:[15;1H[K[16;1H[44mtest[m 1-1[16;9H[K[17;1H# [41mfile[m: [41mXtest[m.[41mlatin1[m.[41mspl[m
Comment[18;8H[K[19;1Hdeol[19;5H[K[20;1Hdr[20;5H[K[21;1Hinput[21;7H[K[22;1HOK[22;3H[K[23;1Houtput[23;7H[K[24;1Houtputs[24;8H[K[25;1Houttest[25;8H[K[26;1Hput[26;4H[K[27;1Hputs[27;5H[K[28;1Htest[28;5H[K[29;1Htesten
testn[30;6H[K[31;1Hthe end[31;8H[K[32;1Huk[32;3H[K[33;1Hwrong[33;6H[K[34;1H-------[34;8H[K[35;1H[41mbad[m[35;4H[K[36;1H['put', 'uk', 'OK'][36;20H[K[37;1H[41minputs[m[37;8H[K[38;1H['input', 'puts', 'outputs']
[41mcomment[m[39;8H[K[40;1H['Comment', 'outtest', 'the end']
[41mok[m[41;5H[K[42;1H['OK', 'uk', 'put']
[41mOk[m[43;5H[K[44;1H['OK', 'Uk', 'Put'][44;20H[K[45;1Htest[45;5H[K[46;1H['Test', 'testn', 'testen']
[41mdl[m[47;5H[K[48;1H['deol', 'dr', 'test']
[41mend[m[49;4H[K[50;1H['put', 'uk', 'test'][50;22H[K[51;1H[41mthe[m[51;4H[K[52;1H['put', 'uk', 'test'][52;22H[K[53;1H[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele[m[55;22H[K[56;1H[41mkbltykk[m[56;8H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =soundfold('koprnven')[?25l[1;56r[56;1H
[1;57r[56;1H[41mkprnfn[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =soundfold('oeverloos gezwets edale')[?25l[1;56r[56;1H
[1;57r[56;1H*[41mfls[m [41mkswts[m [41mtl[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" also use an addition file[?25l[56;1H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1H[41masdTests[m [41mfor[m [41mspell[m [41mchecking[m.     [41mvim[m: [41mset[m [41mft[m=[41mvim[m :

[41mSTARTTEST[m
:[41mso[m [41msmall[m.[41mvim[m
:"
:" [41mDon't[m [41mwant[m [41mto[m [41mdepend[m [41mon[m [41mthe[m [41mlocale[m [41mfrom[m [41mthe[m [41menvironment[m
:[41mset[m [41menc[m=[41mlatin1[m
:[41me[m!
:"
:" [41mCheck[m [41musing[m [41mz[m= [41min[m [41mnew[m [41mbuffer[m ([41mcrash[m [41mfixed[m [41mby[m [41mpatch[m 7.4[41ma[m.028).
:[41mset[m [41mmaxmem[m=512 [41mspell
iasd[m[34m^[[m[41mz[m=:"
:"
:" [41mFunction[m [41mto[m test .[41maff[m/.[41mdic[m [41mwith[m [41mlist[m [41mof[m [41mgood[m [41mand[m [41mbad[m [41mwords[m.
:[41mfunc[m [41mTestOne[m([41maff[m, [41mdic[m)
  [41mset[m [41mspellfile[m=
  $put =''
  $put ='test '. [41ma[m:[41maff[m . '-' . [41ma[m:[41mdic[m
  " [41mGenerate[m [41ma[m .[41mspl[m [41mfile[m [41mfrom[m [41ma[m .[41mdic[m [41mand[m .[41maff[m [41mfile[m.
  [41mexe[m '1;/^' . [41ma[m:[41maff[m . '[41maffstart[m/+1,/^' . [41ma[m:[41maff[m . '[41maffend[m/-1[41mw[m! [41mXtest[m.[41maff[m'
  [41mexe[m '1;/^' . [41ma[m:[41mdic[m . '[41mdicstart[m/+1,/^' . [41ma[m:[41mdic[m . '[41mdicend[m/-1[41mw[m! [41mXtest[m.[41mdic[m'
  [41mmkspell[m! [41mXtest[m [41mXtest[m
  " [41muse[m [41mthat[m [41mspell[m [41mfile
[m  [41mset[m [41mspl[m=[41mXtest[m.[41mlatin1[m.[41mspl[m [41mspell[m
  " [41mlist[m [41mall[m [41mvalid[m [41mwords
[m  [41mspelldump[m
  %[41myank
[m  [41mquit[m
  $put
  $put ='-------'
  " [41mfind[m [41mall[m [41mbad[m [41mwords[m [41mand[m [41msuggestions[m [41mfor[m [41mthem
[m  [41mexe[m '1;/^' . [41ma[m:[41maff[m . '[41mgood[m:'
  [41mnormal[m 0[41mf[m:][41ms
[m  [41mlet[m [41mprevbad[m = ''
  [41mwhile[m 1
    [41mlet[m [[41mbad[m, [41ma[m] = [41mspellbadword[m()
    [41mif[m [41mbad[m == '' || [41mbad[m == [41mprevbad[m || [41mbad[m == '[41mbadend[m'[38;7H[41mbreak
[m    [41mendif
[m    [41mlet[m [41mprevbad[m = [41mbad
[m    [41mlet[m [41mlst[m = [41mspellsuggest[m([41mbad[m, 3)
    [41mnormal[m [41mmm[m
    $put =[41mbad[m
    $put =[41mstring[m([41mlst[m)
    [41mnormal[m `[41mm[m][41ms
[m  [41mendwhile
endfunc[m
:"
:[41mcall[m [41mTestOne[m('1', '1')
:$put =[41msoundfold[m('[41mgoobledygoook[m')
:$put =[41msoundfold[m('[41mkoprnven[m')
:$put =[41msoundfold[m('[41moeverloos[m [41mgezwets[m [41medale[m')
:"
:"
:" [41mand[m [41mnow[m [41mwith[m [41mSAL[m [41minstead[m [41mof[m [41mSOFO[m [41mitems[m; test [41mautomatic[m [41mreloading
gg[m:/^[41maffstart[m_[41msal[m/+1,/^[41maffend[m_[41msal[m/-1[41mw[m! [41mXtest[m.[41maff[1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h/^addstart/+1,/^addend/-1w! Xtest.latin1.add[?25l"Xtest.latin1.add" [57;20H[K[57;20H[New File] 3 lines, 38 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmkspell! Xtest.latin1.add.spl Xtest.latin1.add[?25lReading word file Xtest.latin1.add ...[57;39H[K[57;1H
Compressing word tree...
Compressed 0 of 29 nodes; 29 (100%) remaining
Writing spell file Xtest.latin1.add.spl ...
Done!
Estimated runtime memory use: 145 bytes
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset spellfile=Xtest.latin1.add[?25l[1;1H[6L[1;1H[41masdTests[m [41mfor[m [41mspell[m [41mchecking[m.     [41mvim[m: [41mset[m [41mft[m=[41mvim[m :

[41mSTARTTEST[m
:[41mso[m [41msmall[m.[41mvim[m
:"
:" [41mDon't[m [41mwant[m [41mto[m [41mdepend[m [41mon[m [41mthe[m [41mlocale[m [41mfrom[m [41mthe[m [41menvironment[m[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/[?12l[?25h^test2:[?25l[27m[23m[m[H[2J[1;1H[41mREP[m 3
[41mREP[m [41mg[m [41mch
REP[m [41mch[m [41mg
REP[m [41msvp[m [41ms[m.[41mv[m.[41mp[m.

[41mMAP[m 9
[41mMAP[m [41ma
MAP[m [41me
MAP[m [41mi
MAP[m [41mo
MAP[m [41mu
MAP[m [41mn
MAP[m [41mc
MAP[m [41my
MAP[m [41ms[m
2[41maffend[m

2[41mgood[m: puts
[41mbad[m: [41minputs[m [41mcomment[m [41mok[m [41mOk[m [41mend[m [41mthe[m. [44mtest[m [41mdl
badend

addstart[m
/[41mregions[m=[41musgbnz[m
elequint/2
elekwint/3
[41maddend

test2[m:
elequint test elekwint test [41melekwent[m [41masdf[m

Test [41mrules[m [41mfor[m [41mcompounding[m.

3[41maffstart
SET[m [41mISO8859-1

COMPOUNDMIN[m 3
[41mCOMPOUNDRULE[m [41mm[m*
[41mNEEDCOMPOUND[m [41mx[m
3[41maffend[m

3[41mdicstart[m
1234
[41mfoo[m/[41mm
bar[m/[41mmx
m[m/[41mm
la[m/[41mmx[m
3[41mdicend[m

3[41mgood[m: [41mfoo[m [41mm[m [41mfoobar[m [41mfoofoobar[m [41mbarfoo[m [41mbarbarfoo
bad[m: [41mbar[m [41mla[m [41mfoom[m [41mbarm[m [41mmfoo[m [41mmbar[m [41mmm[m [41mlala[m [41mmla[m [41mlam[m [41mfoola[m [41mlabar
badend


Tests[m [41mfor[m [41mcompounding[m.

4[41maffstart[28;1H[?12l[?25h[29;29H[?25l[57;1H[m:[?12l[?25hlet [str, a] = spellbadword()[?25l[29;29H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H9[41mdicstart[m
1234
[41mfoo
bar[m
9[41mdicend[m

9[41mgood[m: 0b1011 0777 1234 0x01ff
[41mbadend[m


[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mlatin1[m.[41mspl[m
Comment
deol
dr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdl[m
['deol', 'dr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[?12l[?25h[?25l
[m:[?12l[?25hset spl=Xtest_us.latin1.spl[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^test2:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H[41mREP[m 3
[41mREP[m [41mg[m [41mch
REP[m [41mch[m [41mg
REP[m [41msvp[m [41ms[m.[41mv[m.[41mp[m.

[41mMAP[m 9
[41mMAP[m [41ma
MAP[m [41me
MAP[m [41mi
MAP[m [41mo
MAP[m [41mu
MAP[m [41mn
MAP[m [41mc
MAP[m [41my
MAP[m [41ms[m
2[41maffend[m

2[41mgood[m: puts
[41mbad[m: [41minputs[m [41mcomment[m [41mok[m [41mOk[m [41mend[m [41mthe[m. [44mtest[m [41mdl
badend

addstart[m
/[41mregions[m=[41musgbnz[m
[46melequint[m/2
[46melekwint[m/3
[41maddend

test2[m:
[46melequint[m test [46melekwint[m test [41melekwent[m [41masdf[m

Test [41mrules[m [41mfor[m [41mcompounding[m.

3[41maffstart
SET[m [41mISO8859-1

COMPOUNDMIN[m 3
[41mCOMPOUNDRULE[m [41mm[m*
[41mNEEDCOMPOUND[m [41mx[m
3[41maffend[m

3[41mdicstart[m
1234
[41mfoo[m/[41mm
bar[m/[41mmx
m[m/[41mm
la[m/[41mmx[m
3[41mdicend[m

3[41mgood[m: [41mfoo[m [41mm[m [41mfoobar[m [41mfoofoobar[m [41mbarfoo[m [41mbarbarfoo
bad[m: [41mbar[m [41mla[m [41mfoom[m [41mbarm[m [41mmfoo[m [41mmbar[m [41mmm[m [41mlala[m [41mmla[m [41mlam[m [41mfoola[m [41mlabar
badend


Tests[m [41mfor[m [41mcompounding[m.

4[41maffstart[m
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h
[?25l[m[57;1H[K[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H1234
[41mfoo
bar[m
9[41mdicend[m

9[41mgood[m: 0b1011 0777 1234 0x01ff
[41mbadend[m


[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mlatin1[m.[41mspl[m
Comment
deol
dr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdl[m
['deol', 'dr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[m
[46melequint[?12l[?25h[?25l[27m[23m[m[H[2J[1;1H[41mREP[m [41mg[m [41mch
REP[m [41mch[m [41mg
REP[m [41msvp[m [41ms[m.[41mv[m.[41mp[m.

[41mMAP[m 9
[41mMAP[m [41ma
MAP[m [41me
MAP[m [41mi
MAP[m [41mo
MAP[m [41mu
MAP[m [41mn
MAP[m [41mc
MAP[m [41my
MAP[m [41ms[m
2[41maffend[m

2[41mgood[m: puts
[41mbad[m: [41minputs[m [41mcomment[m [41mok[m [41mOk[m [41mend[m [41mthe[m. [44mtest[m [41mdl
badend

addstart[m
/[41mregions[m=[41musgbnz[m
[46melequint[m/2
[46melekwint[m/3
[41maddend

test2[m:
[46melequint[m test [46melekwint[m test [41melekwent[m [41masdf[m

Test [41mrules[m [41mfor[m [41mcompounding[m.

3[41maffstart
SET[m [41mISO8859-1

COMPOUNDMIN[m 3
[41mCOMPOUNDRULE[m [41mm[m*
[41mNEEDCOMPOUND[m [41mx[m
3[41maffend[m

3[41mdicstart[m
1234
[41mfoo[m/[41mm
bar[m/[41mmx
m[m/[41mm
la[m/[41mmx[m
3[41mdicend[m

3[41mgood[m: [41mfoo[m [41mm[m [41mfoobar[m [41mfoofoobar[m [41mbarfoo[m [41mbarbarfoo
bad[m: [41mbar[m [41mla[m [41mfoom[m [41mbarm[m [41mmfoo[m [41mmbar[m [41mmm[m [41mlala[m [41mmla[m [41mlam[m [41mfoola[m [41mlabar
badend


Tests[m [41mfor[m [41mcompounding[m.

4[41maffstart
SET[m [41mISO8859-1[28;1H[?12l[?25h[14C[?25l[57;1H[m:[?12l[?25hlet [str, a] = spellbadword()[?25l[28;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H[41mfoo
bar[m
9[41mdicend[m

9[41mgood[m: 0b1011 0777 1234 0x01ff
[41mbadend[m


[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mlatin1[m.[41mspl[m
Comment
deol
dr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdl[m
['deol', 'dr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[m
[46melequint
elekwint[?12l[?25h[?25l
[m:[?12l[?25hset spl=Xtest_gb.latin1.spl[?25l[55;1Helequint
[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^test2:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H[41mREP[m 3
[41mREP[m [41mg[m [41mch
REP[m [41mch[m [41mg
REP[m [41msvp[m [41ms[m.[41mv[m.[41mp[m.

[41mMAP[m 9
[41mMAP[m [41ma
MAP[m [41me
MAP[m [41mi
MAP[m [41mo
MAP[m [41mu
MAP[m [41mn
MAP[m [41mc
MAP[m [41my
MAP[m [41ms[m
2[41maffend[m

2[41mgood[m: puts
[41mbad[m: [41minputs[m [41mcomment[m [41mok[m [41mOk[m [41mend[m [41mthe[m. [44mtest[m [41mdl
badend

addstart[m
/[41mregions[m=[41musgbnz[m
elequint/2
[46melekwint[m/3
[41maddend

test2[m:
elequint test [46melekwint[m test [41melekwent[m [41masdf[m

Test [41mrules[m [41mfor[m [41mcompounding[m.

3[41maffstart
SET[m [41mISO8859-1

COMPOUNDMIN[m 3
[41mCOMPOUNDRULE[m [41mm[m*
[41mNEEDCOMPOUND[m [41mx[m
3[41maffend[m

3[41mdicstart[m
1234
[41mfoo[m/[41mm
bar[m/[41mmx
m[m/[41mm
la[m/[41mmx[m
3[41mdicend[m

3[41mgood[m: [41mfoo[m [41mm[m [41mfoobar[m [41mfoofoobar[m [41mbarfoo[m [41mbarbarfoo
bad[m: [41mbar[m [41mla[m [41mfoom[m [41mbarm[m [41mmfoo[m [41mmbar[m [41mmm[m [41mlala[m [41mmla[m [41mlam[m [41mfoola[m [41mlabar
badend


Tests[m [41mfor[m [41mcompounding[m.

4[41maffstart[m
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[29;15H[?25l[m[57;1H[K[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[29;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H[41mbar[m
9[41mdicend[m

9[41mgood[m: 0b1011 0777 1234 0x01ff
[41mbadend[m


[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mlatin1[m.[41mspl[m
Comment
deol
dr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdl[m
['deol', 'dr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[m
elequint
[46melekwint
elekwint[?12l[?25h[?25l[27m[23m[m[H[2J[1;1H[41mREP[m [41mg[m [41mch
REP[m [41mch[m [41mg
REP[m [41msvp[m [41ms[m.[41mv[m.[41mp[m.

[41mMAP[m 9
[41mMAP[m [41ma
MAP[m [41me
MAP[m [41mi
MAP[m [41mo
MAP[m [41mu
MAP[m [41mn
MAP[m [41mc
MAP[m [41my
MAP[m [41ms[m
2[41maffend[m

2[41mgood[m: puts
[41mbad[m: [41minputs[m [41mcomment[m [41mok[m [41mOk[m [41mend[m [41mthe[m. [44mtest[m [41mdl
badend

addstart[m
/[41mregions[m=[41musgbnz[m
elequint/2
[46melekwint[m/3
[41maddend

test2[m:
elequint test [46melekwint[m test [41melekwent[m [41masdf[m

Test [41mrules[m [41mfor[m [41mcompounding[m.

3[41maffstart
SET[m [41mISO8859-1

COMPOUNDMIN[m 3
[41mCOMPOUNDRULE[m [41mm[m*
[41mNEEDCOMPOUND[m [41mx[m
3[41maffend[m

3[41mdicstart[m
1234
[41mfoo[m/[41mm
bar[m/[41mmx
m[m/[41mm
la[m/[41mmx[m
3[41mdicend[m

3[41mgood[m: [41mfoo[m [41mm[m [41mfoobar[m [41mfoofoobar[m [41mbarfoo[m [41mbarbarfoo
bad[m: [41mbar[m [41mla[m [41mfoom[m [41mbarm[m [41mmfoo[m [41mmbar[m [41mmm[m [41mlala[m [41mmla[m [41mlam[m [41mfoola[m [41mlabar
badend


Tests[m [41mfor[m [41mcompounding[m.

4[41maffstart
SET[m [41mISO8859-1[28;15H[?12l[?25h[14C[?25l[57;1H[m:[?12l[?25hlet [str, a] = spellbadword()[?25l[28;29H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H9[41mdicend[m

9[41mgood[m: 0b1011 0777 1234 0x01ff
[41mbadend[m


[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mlatin1[m.[41mspl[m
Comment
deol
dr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdl[m
['deol', 'dr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[m
elequint
[46melekwint
elekwint[m
[41melekwent[?12l[?25h[?25l
[m:[?12l[?25hset spl=Xtest_nz.latin1.spl[?25l[53;1H[46melequint[m
elekwint
elekwint
[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^test2:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H[41mREP[m 3
[41mREP[m [41mg[m [41mch
REP[m [41mch[m [41mg
REP[m [41msvp[m [41ms[m.[41mv[m.[41mp[m.

[41mMAP[m 9
[41mMAP[m [41ma
MAP[m [41me
MAP[m [41mi
MAP[m [41mo
MAP[m [41mu
MAP[m [41mn
MAP[m [41mc
MAP[m [41my
MAP[m [41ms[m
2[41maffend[m

2[41mgood[m: puts
[41mbad[m: [41minputs[m [41mcomment[m [41mok[m [41mOk[m [41mend[m [41mthe[m. [44mtest[m [41mdl
badend

addstart[m
/[41mregions[m=[41musgbnz[m
[46melequint[m/2
elekwint/3
[41maddend

test2[m:
[46melequint[m test elekwint test [41melekwent[m [41masdf[m

Test [41mrules[m [41mfor[m [41mcompounding[m.

3[41maffstart
SET[m [41mISO8859-1

COMPOUNDMIN[m 3
[41mCOMPOUNDRULE[m [41mm[m*
[41mNEEDCOMPOUND[m [41mx[m
3[41maffend[m

3[41mdicstart[m
1234
[41mfoo[m/[41mm
bar[m/[41mmx
m[m/[41mm
la[m/[41mmx[m
3[41mdicend[m

3[41mgood[m: [41mfoo[m [41mm[m [41mfoobar[m [41mfoofoobar[m [41mbarfoo[m [41mbarbarfoo
bad[m: [41mbar[m [41mla[m [41mfoom[m [41mbarm[m [41mmfoo[m [41mmbar[m [41mmm[m [41mlala[m [41mmla[m [41mlam[m [41mfoola[m [41mlabar
badend


Tests[m [41mfor[m [41mcompounding[m.

4[41maffstart[m
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h
[?25l[m[57;1H[K[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[2;1H9[41mgood[m: 0b1011 0777 1234 0x01ff
[41mbadend[m


[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mlatin1[m.[41mspl[m
Comment
deol
dr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdl[m
['deol', 'dr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[m
[46melequint[m
elekwint
elekwint
[41melekwent[m
[46melequint[?12l[?25h[?25l[27m[23m[m[H[2J[1;1H[41mREP[m [41mg[m [41mch
REP[m [41mch[m [41mg
REP[m [41msvp[m [41ms[m.[41mv[m.[41mp[m.

[41mMAP[m 9
[41mMAP[m [41ma
MAP[m [41me
MAP[m [41mi
MAP[m [41mo
MAP[m [41mu
MAP[m [41mn
MAP[m [41mc
MAP[m [41my
MAP[m [41ms[m
2[41maffend[m

2[41mgood[m: puts
[41mbad[m: [41minputs[m [41mcomment[m [41mok[m [41mOk[m [41mend[m [41mthe[m. [44mtest[m [41mdl
badend

addstart[m
/[41mregions[m=[41musgbnz[m
[46melequint[m/2
elekwint/3
[41maddend

test2[m:
[46melequint[m test elekwint test [41melekwent[m [41masdf[m

Test [41mrules[m [41mfor[m [41mcompounding[m.

3[41maffstart
SET[m [41mISO8859-1

COMPOUNDMIN[m 3
[41mCOMPOUNDRULE[m [41mm[m*
[41mNEEDCOMPOUND[m [41mx[m
3[41maffend[m

3[41mdicstart[m
1234
[41mfoo[m/[41mm
bar[m/[41mmx
m[m/[41mm
la[m/[41mmx[m
3[41mdicend[m

3[41mgood[m: [41mfoo[m [41mm[m [41mfoobar[m [41mfoofoobar[m [41mbarfoo[m [41mbarbarfoo
bad[m: [41mbar[m [41mla[m [41mfoom[m [41mbarm[m [41mmfoo[m [41mmbar[m [41mmm[m [41mlala[m [41mmla[m [41mlam[m [41mfoola[m [41mlabar
badend


Tests[m [41mfor[m [41mcompounding[m.

4[41maffstart
SET[m [41mISO8859-1[28;1H[?12l[?25h[28C[?25l[57;1H[m:[?12l[?25hlet [str, a] = spellbadword()[?25l[28;29H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H9[41mgood[m: 0b1011 0777 1234 0x01ff
[41mbadend[m


[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mlatin1[m.[41mspl[m
Comment
deol
dr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdl[m
['deol', 'dr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[m
[46melequint[m
elekwint
elekwint
[41melekwent[m
[46melequint[m
[41melekwent[?12l[?25h[?25l
[m:[?12l[?25hset spl=Xtest_ca.latin1.spl[?25l[51;1H[41melequint
elekwint
elekwint

elequint
[?12l[?25h[?25l[m[57;1H[K[57;1H/[?12l[?25h^test2:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H[41mREP[m 3
[41mREP[m [41mg[m [41mch
REP[m [41mch[m [41mg
REP[m [41msvp[m [41ms[m.[41mv[m.[41mp[m.

[41mMAP[m 9
[41mMAP[m [41ma
MAP[m [41me
MAP[m [41mi
MAP[m [41mo
MAP[m [41mu
MAP[m [41mn
MAP[m [41mc
MAP[m [41my
MAP[m [41ms[m
2[41maffend[m

2[41mgood[m: puts
[41mbad[m: [41minputs[m [41mcomment[m [41mok[m [41mOk[m [41mend[m [41mthe[m. [44mtest[m [41mdl
badend

addstart[m
/[41mregions[m=[41musgbnz
elequint[m/2
[41melekwint[m/3
[41maddend

test2[m:
[41melequint[m test [41melekwint[m test [41melekwent[m [41masdf[m

Test [41mrules[m [41mfor[m [41mcompounding[m.

3[41maffstart
SET[m [41mISO8859-1

COMPOUNDMIN[m 3
[41mCOMPOUNDRULE[m [41mm[m*
[41mNEEDCOMPOUND[m [41mx[m
3[41maffend[m

3[41mdicstart[m
1234
[41mfoo[m/[41mm
bar[m/[41mmx
m[m/[41mm
la[m/[41mmx[m
3[41mdicend[m

3[41mgood[m: [41mfoo[m [41mm[m [41mfoobar[m [41mfoofoobar[m [41mbarfoo[m [41mbarbarfoo
bad[m: [41mbar[m [41mla[m [41mfoom[m [41mbarm[m [41mmfoo[m [41mmbar[m [41mmm[m [41mlala[m [41mmla[m [41mlam[m [41mfoola[m [41mlabar
badend


Tests[m [41mfor[m [41mcompounding[m.

4[41maffstart[m
[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h
[?25l[m[57;1H[K[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H[41mbadend[m


[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mlatin1[m.[41mspl[m
Comment
deol
dr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdl[m
['deol', 'dr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent
elequint
elekwint
elekwint
elekwent
elequint
elekwent
elequint[?12l[?25h[?25l[27m[23m[m[H[2J[1;1H[41mREP[m [41mg[m [41mch
REP[m [41mch[m [41mg
REP[m [41msvp[m [41ms[m.[41mv[m.[41mp[m.

[41mMAP[m 9
[41mMAP[m [41ma
MAP[m [41me
MAP[m [41mi
MAP[m [41mo
MAP[m [41mu
MAP[m [41mn
MAP[m [41mc
MAP[m [41my
MAP[m [41ms[m
2[41maffend[m

2[41mgood[m: puts
[41mbad[m: [41minputs[m [41mcomment[m [41mok[m [41mOk[m [41mend[m [41mthe[m. [44mtest[m [41mdl
badend

addstart[m
/[41mregions[m=[41musgbnz
elequint[m/2
[41melekwint[m/3
[41maddend

test2[m:
[41melequint[m test [41melekwint[m test [41melekwent[m [41masdf[m

Test [41mrules[m [41mfor[m [41mcompounding[m.

3[41maffstart
SET[m [41mISO8859-1

COMPOUNDMIN[m 3
[41mCOMPOUNDRULE[m [41mm[m*
[41mNEEDCOMPOUND[m [41mx[m
3[41maffend[m

3[41mdicstart[m
1234
[41mfoo[m/[41mm
bar[m/[41mmx
m[m/[41mm
la[m/[41mmx[m
3[41mdicend[m

3[41mgood[m: [41mfoo[m [41mm[m [41mfoobar[m [41mfoofoobar[m [41mbarfoo[m [41mbarbarfoo
bad[m: [41mbar[m [41mla[m [41mfoom[m [41mbarm[m [41mmfoo[m [41mmbar[m [41mmm[m [41mlala[m [41mmla[m [41mlam[m [41mfoola[m [41mlabar
badend


Tests[m [41mfor[m [41mcompounding[m.

4[41maffstart
SET[m [41mISO8859-1[28;1H[?12l[?25h[14C[?25l[57;1H[m:[?12l[?25hlet [str, a] = spellbadword()[?25l[28;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[3;1H[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mlatin1[m.[41mspl[m
Comment
deol
dr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdl[m
['deol', 'dr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent
elequint
elekwint
elekwint
elekwent
elequint
elekwent
elequint
elekwint[?12l[?25h[?25l
[m:[?12l[?25hunlet str a[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Postponed prefixes[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall TestOne('2', '1')[?25l"Xtest.aff" [57;13H[K[57;13H44 lines, 447 characters written
"Xtest.dic" 11 lines, 71 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - testCompressing word tree...[57;26H[K[57;1H
Compressed 10 of 98 nodes; 88 (89%) remaining
Compressed 0 of 13 nodes; 13 (100%) remaining
Writing spell file Xtest.latin1.spl ...
Done!
Estimated runtime memory use: 505 bytes
17 lines yanked
17 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[12L[1;1H[41mSFX[m [41mS[m [41mY[m 2
[41mSFX[m [41mS[m 0 [41ms[m [^[41ms[m]
[41mSFX[m [41mS[m 0 [41mes[m [41ms

SFX[m [41mN[m [41mN[m 3
[41mSFX[m [41mN[m 0 [41men[m [^[41mn[m]
[41mSFX[m [41mN[m 0 [41mnen[m [41mn
SFX[m [41mN[m 0 [41mn[m .

[41mREP[m 3
[41mREP[m [41mg[m [41mch
REP[m [41mch[m [41mg
REP[m [41msvp[m [41ms[m.[41mv[m.[41mp[m.[14;1H[K[15;1H[41mMAP[m 9
[41mMAP[m [41ma
MAP[m [41me
MAP[m [41mi
MAP[m [41mo
MAP[m [41mu
MAP[m [41mn
MAP[m [41mc
MAP[m [41my
MAP[m [41ms[m
2[41maffend[m[25;9H[K[26;1H[K[27;1H2[41mgood[m: puts[27;12H[K[28;1H[41mbad[m: [41minputs[m [41mcomment[m [41mok[m [41mOk[m [41mend[m [41mthe[m. [44mtest[m [41mdl
badend[m[29;7H[K[30;1H[K[31;1H[41maddstart[m[31;9H[K[32;1H/[41mregions[m=[41musgbnz
elequint[m/2[33;11H[K[34;1H[41melekwint[m/3
[41maddend[m[35;7H[K[36;1H[K[37;1H[41mtest2[m:[37;7H[K[38;2H[41mlequint[m test [41melekwint[m test [41melekwent[m [41masdf[m[39;1H[K[40;1HTest [41mrules[m [41mfor[m [41mcompounding[m.[41;1H[K[42;1H3[41maffstart[m[42;10H[K[43;1H[41mSET[m [41mISO8859-1[m[44;1H[K[45;1H[41mCOMPOUNDMIN[m 3
[41mCOMPOUNDRULE[m [41mm[m*
[41mNEEDCOMPOUND[m [41mx[m
3[41maffend[m[48;8H[K[49;1H[K[50;1H3[41mdicstart[m
1234[51;5H[K[52;1H[41mfoo[m/[41mm[m[52;6H[K[53;1H[41mbar[m/[41mmx[m[53;7H[K[54;1H[41mm[m/[41mm[m[54;5H[K[55;1H[41mla[m/[41mmx[m[55;6H[K[56;1H3[41mdicend[m[56;8H[K[57;1H[K[29;1H[?12l[?25h[?25l[57;1H:[?12l[?25h" Compound words[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall TestOne('3', '3')[?25l"Xtest.aff" [57;13H[K[57;13H5 lines, 60 characters written
"Xtest.dic" 5 lines, 29 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - fooCompressing word tree...[57;26H[K[57;1H
Compressed 6 of 29 nodes; 23 (79%) remaining
Writing spell file Xtest.latin1.spl ...
Done!
Estimated runtime memory use: 115 bytes
3 lines yanked
3 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall TestOne('4', '4')[?25l"Xtest.aff" [57;13H[K[57;13H45 lines, 559 characters written
"Xtest.dic" 8 lines, 59 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - wordCompressing word tree...[57;26H[K[57;1H
Compressed 2 of 91 nodes; 89 (97%) remaining
Compressed 0 of 15 nodes; 15 (100%) remaining
Writing spell file Xtest.latin1.spl ...
Done!
Estimated runtime memory use: 520 bytes
12 lines yanked
12 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall TestOne('5', '5')[?25l"Xtest.aff" [57;13H[K[57;13H25 lines, 237 characters written
"Xtest.dic" 6 lines, 57 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - fooCompressing word tree...[57;26H[K[57;1H
Compressed 19 of 105 nodes; 86 (81%) remaining
Writing spell file Xtest.latin1.spl ...
Done!
Estimated runtime memory use: 440 bytes
10 lines yanked
10 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall TestOne('6', '6')[?25l"Xtest.aff" [57;13H[K[57;13H23 lines, 211 characters written
"Xtest.dic" 6 lines, 53 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - meeCompressing word tree...[57;26H[K[57;1H
Compressed 19 of 87 nodes; 68 (78%) remaining
Writing spell file Xtest.latin1.spl ...
Done!
Estimated runtime memory use: 350 bytes
9 lines yanked
9 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall TestOne('7', '7')[?25l"Xtest.aff" [57;13H[K[57;13H22 lines, 223 characters written
"Xtest.dic" 6 lines, 67 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - meeCompressing word tree...[57;26H[K[57;1H
Compressed 19 of 89 nodes; 70 (78%) remaining
Writing spell file Xtest.latin1.spl ...
Done!
Estimated runtime memory use: 360 bytes
9 lines yanked
9 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[27m[23m[m[H[2J[1;1H[41mCOMPOUNDPERMITFLAG[m 432

[41mSFX[m 61003 [41mY[m 1
[41mSFX[m 61003 0 [41mmeat[m .

[41mSFX[m 391 [41mY[m 1
[41mSFX[m 391 0 [41ma1[m .

[41mSFX[m 111 [41mY[m 1
[41mSFX[m 111 0 [41ma[m .

[41mPFX[m 17 [41mY[m 1
[41mPFX[m 17 0 [41mpre[m/432 .
7[41maffend[m

7[41mdicstart[m
1234
[41mmee[m/391,111,9999
bar/17,61003,123
lead/2
tail/123
[41mmiddle[m/77,1
7[41mdicend[m

7[41mgood[m: meea1 meea bar prebar barmeat prebarmeat  leadprebar[26;7Hlead tail leadtail  leadmiddletail
[41mbad[m: [41mmee[m [41mmeea2[m [41mprabar[m [41mprobarmaat[m [41mmiddle[m [41mleadmiddle[m [41mmiddletail[m [41mtaillead[28;9Hleadprobar
badend

Test[m [41mNOSLITSUGS[m

8[41maffstart
SET[m [41mISO8859[m-1

[41mNOSPLITSUGS[m
8[41maffend[m

8[41mdicstart[m
1234
[41mfoo[m
bar
[41mfaabar[m
8[41mdicend[m

8[41mgood[m: [41mfoo[m bar [41mfaabar
bad[m: [41mfoobar[m [41mbarfoo
badend


Test[m [41mNumbers[m

9[41maffstart[m
9[41maffend[m

9[41mdicstart[29;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h" NOSLITSUGS[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall TestOne('8', '8')[?25l"Xtest.aff" [57;13H[K[57;13H3 lines, 27 characters written
"Xtest.dic" 4 lines, 20 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - fooCompressing word tree...[57;26H[K[57;1H
Compressed 8 of 26 nodes; 18 (69%) remaining
Writing spell file Xtest.latin1.spl ...
Done!
Estimated runtime memory use: 90 bytes
4 lines yanked
4 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h" Numbers[?25l[1;1H[11L[1;1H[41mlead[m/2
[41mtail[m/123
[41mmiddle[m/77,1
7[41mdicend[m

7[41mgood[m: [41mmeea1[m [41mmeea[m bar [41mprebar[m [41mbarmeat[m [41mprebarmeat[m  [41mleadprebar[7;7Hlead[m [41mtail[m [41mleadtail[m  [41mleadmiddletail
bad[m: [41mmee[m [41mmeea2[m [41mprabar[m [41mprobarmaat[m [41mmiddle[m [41mleadmiddle[m [41mmiddletail[m [41mtaillead[9;9Hleadprobar
badend

Test[m [41mNOSLITSUGS[m[13;1H[K[14;1H8[3C[41mstart
SET[m [41mISO8859[m-1[16;1H[K[17;1H[41mNOSPLITSUGS[m
8[41maffend[m[18;8H[K[19;1H[K[20;1H8[41mdicstart[m
1234[21;5H[K[22;1Hfoo[22;4H[K[23;1Hbar[23;4H[K[24;1Hfaabar
8[41mdicend[m[25;8H[K[26;7H[K[27;1H8[41mgood[m: foo bar faabar[27;23H[K[28;1H[41mbad[m: [41mfoobar[m [41mbarfoo[m[31;1H[K[32;1H[41mTest[m [41mNumbers[m[33;1H[K[34;1H9[41maffstart[m[34;10H[K[35;1H9[41maffend[m[36;1H[K[37;1H9[41mdicstart[m
1234
foo[39;4H[K[40;1Hbar[40;4H[K[41;1H9[41mdicend[m[42;1H[K[43;1H9[41mgood[m: 0b1011 0777 1234 0x01ff
[41mbadend[m[44;7H[K[46;1H[K[47;1H[41mtest[m [41moutput[m:[47;13H[K[48;1H[K[49;1H[41mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mlatin1[m.[41mspl
Comment[m[51;8H[K[52;1H[41mdeol
dr[m[53;5H[K[54;1H[41minput[m[54;6H[K[55;1H[41mOK
outpu[m[56;7H[K[57;1H[K[29;1H[?12l[?25h[?25l[57;1H:[?12l[?25hcall TestOne('9', '9')[?25l[1m[37m[41mError detected while processing function TestOne:[m
[33mline    5:[m
[1m[37m[41mE493: Backwards range given: 1;/^9affstart/+1,/^9affend/-1w! Xtest.aff[m
"Xtest.dic" 3 lines, 13 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - fooCompressing word tree...[57;26H[K[57;1H
Compressed 2 of 15 nodes; 13 (86%) remaining
Writing spell file Xtest.latin1.spl ...
Done!
Estimated runtime memory use: 65 bytes
3 lines yanked
3 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[13L[2;1H[41mNOSPLITSUGS[m
8[41maffend[m

8[41mdicstart[m
1234
foo
bar
[41mfaabar[m
8[41mdicend[m

8[41mgood[m: foo bar [41mfaabar
bad[m: [41mfoobar[m [41mbarfoo
badend[m[14;7H[K[15;1H[K[17;1H[41mTest[m [41mNumbers[m[18;1H[K[19;1H9[41maffstart[m
9[41maffend[m[20;8H[K[21;1H[K[22;1H9[41mdicstart[m
1234
foo[24;4H[K[25;1Hbar[25;4H[K[26;1H9[41mdicend[m[27;1H[K[28;1H9[41mgood[m: 0b1011 0777 1234 0x01ff[32;1H[41mtest[m [41moutput[m:

[41mtest[m 1-1[34;9H[K[35;1H# [1C[41mile[m: [41mXtest[m.[41mlatin1[m.[41mspl
Comment
deol[m[37;5H[K[38;1H[41mdr
input
OK[m[40;3H[K[41;1H[41moutput[m[41;7H[K[42;1H[41moutputs
outtest[m[43;8H[K[44;1H[41mput[m[44;4H[K[45;1H[41mputs
test
testen[m[47;7H[K[48;1H[41mtestn
the[m [41mend[m[49;8H[K[50;1H[41muk[m[50;3H[K[51;1H[41mwrong[m[51;6H[K[52;1H-------
[41mbad[m[53;4H[K[54;1H['[3C', '[41muk[m', '[41mOK[m']
[41minputs[m
['[41minput[m', '[41mputs[m', '[41moutputs[m'][57;1H[K[29;1H[?12l[?25h[?25l[57;1H:[?12l[?25h" clean up for valgrind[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunc TestOne[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset spl= enc=latin1[?25l[27m[23m[m[H[2J[2;1HNOSPLITSUGS
8affend

8dicstart
1234
foo
bar
faabar
8dicend

8good: foo bar faabar
bad: foobar barfoo
badend


Test Numbers

9affstart
9affend

9dicstart
1234
foo
bar
9dicend

9good: 0b1011 0777 1234 0x01ff
badend


test output:

test 1-1
# file: Xtest.latin1.spl
Comment
deol
dr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
bad
['put', 'uk', 'OK']
inputs
['input', 'puts', 'outputs'][29;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[29;1H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1HasdTests for spell checking.     vim: set ft=vim :

STARTTEST
:so small.vim
:"
:" Don't want to depend on the locale from the environment
:set enc=latin1
:e!
:"
:" Check using z= in new buffer (crash fixed by patch 7.4a.028).
:set maxmem=512 spell
iasd[34m^[[mz=:"
:"
:" Function to test .aff/.dic with list of good and bad words.
:func TestOne(aff, dic)
  set spellfile=
  $put =''
  $put ='test '. a:aff . '-' . a:dic
  " Generate a .spl file from a .dic and .aff file.
  exe '1;/^' . a:aff . 'affstart/+1,/^' . a:aff . 'affend/-1w! Xtest.aff'
  exe '1;/^' . a:dic . 'dicstart/+1,/^' . a:dic . 'dicend/-1w! Xtest.dic'
  mkspell! Xtest Xtest
  " use that spell file
  set spl=Xtest.latin1.spl spell
  " list all valid words
  spelldump
  %yank
  quit
  $put
  $put ='-------'
  " find all bad words and suggestions for them
  exe '1;/^' . a:aff . 'good:'
  normal 0f:]s
  let prevbad = ''
  while 1
    let [bad, a] = spellbadword()
    if bad == '' || bad == prevbad || bad == 'badend'[38;7Hbreak
    endif
    let prevbad = bad
    let lst = spellsuggest(bad, 3)
    normal mm
    $put =bad
    $put =string(lst)
    normal `m]s
  endwhile
endfunc
:"
:call TestOne('1', '1')
:$put =soundfold('goobledygoook')
:$put =soundfold('koprnven')
:$put =soundfold('oeverloos gezwets edale')
:"
:"
:" and now with SAL instead of SOFO items; test automatic reloading
gg:/^affstart_sal/+1,/^affend_sal/-1w! Xtest.aff[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25h/^test output:/,$wq! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 289 lines, 3844 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test58 = test61; then \
#	  if diff test.out test58.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test58.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test58.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test59.failed test.ok test.out X* viminfo
cp test59.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test59.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test59.in" 626 lines, 10897 characters[1;1HTests for spell checking with 'encoding' set to "utf-8".  vim: set ft=vim :

STARTTEST
:so small.vim
:so mbyte.vim
:"
:" Don't want to depend on the locale from the environment.  The .aff and .dic
:" text is in latin1, the test text is utf-8.
:set enc=latin1
:e!
:set enc=utf-8
:set fenc=
:"
:" Function to test .aff/.dic with list of good and bad words.
:func TestOne(aff, dic)
  set spellfile=
  $put =''
  $put ='test '. a:aff . '-' . a:dic
  " Generate a .spl file from a .dic and .aff file.
  exe '1;/^' . a:aff . 'affstart/+1,/^' . a:aff . 'affend/-1w! Xtest.aff'
  exe '1;/^' . a:dic . 'dicstart/+1,/^' . a:dic . 'dicend/-1w! Xtest.dic'
  mkspell! Xtest Xtest
  " use that spell file
  set spl=Xtest.utf-8.spl spell
  " list all valid words
  spelldump
  %yank
  quit
  $put
  $put ='-------'
  " find all bad words and suggestions for them
  exe '1;/^' . a:aff . 'good:'
  normal 0f:]s
  let prevbad = ''
  while 1
    let [bad, a] = spellbadword()
    if bad == '' || bad == prevbad || bad == 'badend'[38;7Hbreak
    endif
    let prevbad = bad
    let lst = spellsuggest(bad, 3)
    normal mm
    $put =bad
    $put =string(lst)
    normal `m]s
  endwhile
endfunc
:"
:call TestOne('1', '1')
:$put =soundfold('goobledygoook')
:$put =soundfold('kóopërÿnôven')
:$put =soundfold('oeverloos gezwets edale')
:"
:"
:" and now with SAL instead of SOFO items; test automatic reloading
gg:/^affstart_sal/+1,/^affend_sal/-1w! Xtest.aff[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for spell checking with 'encoding' set to "utf-8".  vim: set ft=vim :[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 106 lines, 2520 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1H]smm:let [str, a] = spellbadword()
:$put =str
`m]s:let [str, a] = spellbadword()
:$put =str
:set spl=Xtest_ca.utf-8.spl
/^test2:
]smm:let [str, a] = spellbadword()
:$put =str
`m]s:let [str, a] = spellbadword()
:$put =str
:unlet str a
:"
:" Postponed prefixes
:call TestOne('2', '1')
:"
:" Compound words
:call TestOne('3', '3')
:call TestOne('4', '4')
:call TestOne('5', '5')
:call TestOne('6', '6')
:call TestOne('7', '7')
:"
:" clean up for valgrind
:delfunc TestOne
:set spl= enc=latin1
:"
gg:/^test output:/,$wq! test.out
ENDTEST

1affstart
SET ISO8859-1
TRY esianrtolcdugmphbyfvkwjkqxz-'ESIANRTOLCDUGMPHBYFVKWJKQXZ

FOL  
LOW  
UPP  

SOFOFROM abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ[39;1H޿
SOFOTO   ebctefghejklnnepkrstevvkesebctefghejklnnepkrstevvkeseeeeeeeceeeeeeeedneeeeeeeee[41;1Heeepseeeeeeeeceeeeeeeedneeeeeeeeeeep?

MIDWORD '-

KEP =
RAR ?
BAD !

#NOSPLITSUGS

PFX I N 1
PFX I 0 in .

PFX O Y 1
PFX O 0 out .[28;1H[?12l[?25h
[?25l[57;1H:so! Xdotest[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Don't want to depend on the locale from the environment.  The .aff and .dic[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" text is in latin1, the test text is utf-8.[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset enc=latin1[?25l[27m[23m[m[H[2J[1;1H]smm:let [str, a] = spellbadword()
:$put =str
`m]s:let [str, a] = spellbadword()
:$put =str
:set spl=Xtest_ca.utf-8.spl
/^test2:
]smm:let [str, a] = spellbadword()
:$put =str
`m]s:let [str, a] = spellbadword()
:$put =str
:unlet str a
:"
:" Postponed prefixes
:call TestOne('2', '1')
:"
:" Compound words
:call TestOne('3', '3')
:call TestOne('4', '4')
:call TestOne('5', '5')
:call TestOne('6', '6')
:call TestOne('7', '7')
:"
:" clean up for valgrind
:delfunc TestOne
:set spl= enc=latin1
:"
gg:/^test output:/,$wq! test.out
ENDTEST

1affstart
SET ISO8859-1
TRY esianrtolcdugmphbyfvkwjkqxz-'ESIANRTOLCDUGMPHBYFVKWJKQXZ

FOL  
LOW  
UPP  

SOFOFROM abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ[39;1H޿
SOFOTO   ebctefghejklnnepkrstevvkesebctefghejklnnepkrstevvkeseeeeeeeceeeeeeeedneeeeeeeee[41;1Heeepseeeeeeeeceeeeeeeedneeeeeeeeeeep?

MIDWORD '-

KEP =
RAR ?
BAD !

#NOSPLITSUGS

PFX I N 1
PFX I 0 in .

PFX O Y 1
PFX O 0 out .[29;1H[?12l[?25h[?25l[57;1H:[?12l[?25he![?25l"test59.in" 626 lines, 10897 characters[1;1HTests for spell checking with 'encoding' set to "utf-8".  vim: set ft=vim :[2;1H[K[3;1HSTARTTEST[3;10H[K[4;2Hso small.vim
:so mbyte.vim[5;14H[K[6;1H:"[6;3H[K[7;1H:" Don't want to depend on the locale from the environment.  The .aff and .dic
:" text is in latin1, the test text is utf-8.
:set enc=latin1[9;16H[K[10;2He![10;4H[K[11;2Hset enc=utf-8
:set fenc=[13;4H[K[14;2H" Function to test .aff/.dic with list of good and bad words.
:func TestOne(aff, dic)
  set spellfile=[16;17H[K[17;1H  $put =''[17;11H[K[18;1H  $put ='test '. a:aff . '-' . a:dic
  " Generate a .spl file from a .dic and .aff file.
  exe '1;/^' . a:aff . 'affstart/+1,/^' . a:aff . 'affend/-1w! Xtest.aff'
  exe '1;/^' . a:dic . 'dicstart/+1,/^' . a:dic . 'dicend/-1w! Xtest.dic'
  mkspell! Xtest Xtest
  " use that spell file[23;24H[K[24;1H  set spl=Xtest.utf-8.spl spell
  " list all valid words
  spelldump
  %yank[27;8H[K[28;1H  quit[28;7H[K[29;3H$put
  $put ='-------'
  " find all bad words and suggestions for them
  exe '1;/^' . a:aff . 'good:'[32;31H[K[33;3Hnormal 0f:]s
  let prevbad = ''[34;19H[K[35;1H  while 1[35;10H[K[36;1H    let [bad, a] = spellbadword()[36;34H[K[37;5Hif bad == '' || bad == prevbad || bad == 'badend'
      break[38;12H[K[39;1H    endif[39;10H[K[40;1H    let prevbad = bad[40;22H[K[41;1H    let lst = spellsuggest(bad, 3)[41;35H[K[42;5Hnormal mm
    $put =bad
    $put =string(lst)
    normal `m]s
  endwhile
endfunc
:"
:call TestOne('1', '1')
:$put =soundfold('goobledygoook')
:$put =soundfold('kóopërÿnôven')
:$put =soundfold('oeverloos gezwets edale')
:"
:"[54;3H[K[55;1H:" and now with SAL instead of SOFO items; test automatic reloading
gg:/^affstart_sal/+1,/^affend_sal/-1w! Xtest.aff[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset enc=utf-8[?25l[27m[23m[m[H[2J[1;1HTests for spell checking with 'encoding' set to "utf-8".  vim: set ft=vim :

STARTTEST
:so small.vim
:so mbyte.vim
:"
:" Don't want to depend on the locale from the environment.  The .aff and .dic
:" text is in latin1, the test text is utf-8.
:set enc=latin1
:e!
:set enc=utf-8
:set fenc=
:"
:" Function to test .aff/.dic with list of good and bad words.
:func TestOne(aff, dic)
  set spellfile=
  $put =''
  $put ='test '. a:aff . '-' . a:dic
  " Generate a .spl file from a .dic and .aff file.
  exe '1;/^' . a:aff . 'affstart/+1,/^' . a:aff . 'affend/-1w! Xtest.aff'
  exe '1;/^' . a:dic . 'dicstart/+1,/^' . a:dic . 'dicend/-1w! Xtest.dic'
  mkspell! Xtest Xtest
  " use that spell file
  set spl=Xtest.utf-8.spl spell
  " list all valid words
  spelldump
  %yank
  quit
  $put
  $put ='-------'
  " find all bad words and suggestions for them
  exe '1;/^' . a:aff . 'good:'
  normal 0f:]s
  let prevbad = ''
  while 1
    let [bad, a] = spellbadword()
    if bad == '' || bad == prevbad || bad == 'badend'[38;7Hbreak
    endif
    let prevbad = bad
    let lst = spellsuggest(bad, 3)
    normal mm
    $put =bad
    $put =string(lst)
    normal `m]s
  endwhile
endfunc
:"
:call TestOne('1', '1')
:$put =soundfold('goobledygoook')
:$put =soundfold('kó[51;21Hopërÿnôven')
:$put =soundfold('oeverloos gezwets edale')
:"
:"
:" and now with SAL instead of SOFO items; test automatic reloading
gg:/^affstart_sal/+1,/^affend_sal/-1w! Xtest.aff[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset fenc=[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Function to test .aff/.dic with list of good and bad words.[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hfunc TestOne(aff, dic)[?25l
:  [?12l[?25h  set spellfile=
[?25l:  [?12l[?25h  $put =''
[?25l:  [?12l[?25h  $put ='test '. a:aff . '-' . a:dic
[?25l:  [?12l[?25h  " Generate a .spl file from a .dic and .aff file.
[?25l:  [?12l[?25h  exe '1;/^' . a:aff . 'affstart/+1,/^' . a:aff . 'affend/-1w! Xtest.aff'
[?25l:  [?12l[?25h  exe '1;/^' . a:dic . 'dicstart/+1,/^' . a:dic . 'dicend/-1w! Xtest.dic'
[?25l:  [?12l[?25h  mkspell! Xtest Xtest
[?25l:  [?12l[?25h  " use that spell file
[?25l:  [?12l[?25h  set spl=Xtest.utf-8.spl spell
[?25l:  [?12l[?25h  " list all valid words
[?25l:  [?12l[?25h  spelldump
[?25l:  [?12l[?25h  %yank
[?25l:  [?12l[?25h  quit
[?25l:  [?12l[?25h  $put
[?25l:  [?12l[?25h  $put ='-------'
[?25l:  [?12l[?25h  " find all bad words and suggestions for them
[?25l:  [?12l[?25h  exe '1;/^' . a:aff . 'good:'
[?25l:  [?12l[?25h  normal 0f:]s
[?25l:  [?12l[?25h  let prevbad = ''
[?25l:  [?12l[?25h  while 1
[?25l:    [?12l[?25h    let [bad, a] = spellbadword()
[?25l:    [?12l[?25h    if bad == '' || bad == prevbad || bad == 'badend'
[?25l:      [?12l[?25h      break
[?25l:      [?12l[?25h    endif
[?25l:    [?12l[?25h    let prevbad = bad
[?25l:    [?12l[?25h    let lst = spellsuggest(bad, 3)
[?25l:    [?12l[?25h    normal mm
[?25l:    [?12l[?25h    $put =bad
[?25l:    [?12l[?25h    $put =string(lst)
[?25l:    [?12l[?25h    normal `m]s
[?25l:    [?12l[?25h  endwhile
[?25l:  [?12l[?25hendfunc[1;1H[32L[?25l[1;1HTests for spell checking with 'encoding' set to "utf-8".  vim: set ft=vim :

STARTTEST
:so small.vim
:so mbyte.vim
:"
:" Don't want to depend on the locale from the environment.  The .aff and .dic
:" text is in latin1, the test text is utf-8.
:set enc=latin1
:e!
:set enc=utf-8
:set fenc=
:"
:" Function to test .aff/.dic with list of good and bad words.
:func TestOne(aff, dic)
  set spellfile=
  $put =''
  $put ='test '. a:aff . '-' . a:dic
  " Generate a .spl file from a .dic and .aff file.
  exe '1;/^' . a:aff . 'affstart/+1,/^' . a:aff . 'affend/-1w! Xtest.aff'
  exe '1;/^' . a:dic . 'dicstart/+1,/^' . a:dic . 'dicend/-1w! Xtest.dic'
  mkspell! Xtest Xtest
  " use that spell file
  set spl=Xtest.utf-8.spl spell
  " list all valid words
  spelldump
  %yank
  quit
  $put
  $put ='-------'
  " find all bad words and suggestions for them
  exe '1;/^' . a:aff . 'good:'[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall TestOne('1', '1')[?25l"Xtest.aff" [57;13H[K[57;13H[New File] 48 lines, 768 characters written
"Xtest.dic" [New File] 11 lines, 71 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - testCompressing word tree...[57;26H[K[57;1H
Compressed 29 of 131 nodes; 102 (77%) remaining
Writing spell file Xtest.utf-8.spl ...
Done!
Estimated runtime memory use: 510 bytes
Reading back spell file...
Performing soundfolding...
Total number of words: 16
Number of words after soundfolding: 16
Compressing word tree...
Compressed 39 of 104 nodes; 65 (62%) remaining
Writing suggestion file Xtest.utf-8.sug ...
Estimated runtime memory use: 357 bytes
17 lines yanked
17 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put =soundfold('goobledygoook')[?25l[1;1H[19L[2;1H7[41mdicstart[m
1234
[41mmee[m/391,111,9999
[41mbar[m/17,61003,123
[41mlead[m/2
[41mtail[m/123
[41mmiddle[m/77,1
7[41mdicend[m

7[41mgood[m: [41mmeea1[m [41mmeeaé[11;20Hbar[m [41mprebar[m [41mbarmeat[m [41mprebarmeat[m  [41mleadprebar[12;7Hlead[m [41mtail[m [41mleadtail[m  [41mleadmiddletail
bad[m: [41mmee[m [41mmeea2[m [41mprabar[m [41mprobarmaat[m [41mmiddle[m [41mleadmiddle[m [41mmiddletail[m [41mtaillead[14;9Hleadprobar
badend[m

[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mutf-8[m.[41mspl[m[20;24H[K[21;1HComment[21;8H[K[22;1Hdeol[22;5H[K[23;1Hdé[23;3Hôr[23;5H[K[24;1Hinpu[24;7H[K[25;1HOK[25;3H[K[26;1Houtput[26;7H[K[27;1Houtputs
outtest
put[29;4H[K[30;1Hputs[30;5H[K[31;1Htest[31;5H[K[32;1Htesten[32;7H[K[33;1Htestn[33;6H[K[34;1Hthe end[34;8H[K[35;1Huk[35;3H[K[36;1Hwrong[36;6H[K[37;1H-------[37;8H[K[38;1H[41mbad[m[38;7H[K[39;1H['put', 'uk', 'OK']
[41minputs[m[40;7H[K[41;1H['input', 'puts', 'outputs'][41;29H[K[42;1H[41mcomment[m[42;8H[K[43;1H['Comment', 'outtest', 'the end']
[41mok[m[44;5H[K[45;1H['OK', 'uk', 'put']
[41mOk[m[46;3H[K[47;1H['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdé[50;3Hôl[m[50;5H[K[51;1H['deol', 'dé[51;13Hôr', 'test'][51;25H[K[52;1H[41mend[m[52;4H[K[53;1H['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test'][55;22H[K[56;1H[41mgebletegek[m[56;11H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =soundfold('kó[57;21Hopërÿnôven')[?25l[1;56r[56;1H
[1;57r[56;1H[41mkepereneven[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =soundfold('oeverloos gezwets edale')[?25l[1;56r[56;1H
[1;57r[56;1H[41meverles[m [41mgesvets[m [41metele[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" and now with SAL instead of SOFO items; test automatic reloading[?25l[56;1H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1H[41mTests[m [41mfor[m [41mspell[m [41mchecking[m [41mwith[m '[41mencoding[m' [41mset[m [41mto[m "[41mutf-8[m".  [41mvim[m: [41mset[m [41mft[m=[41mvim[m :

[41mSTARTTEST[m
:[41mso[m [41msmall[m.[41mvim[m
:[41mso[m [41mmbyte[m.[41mvim[m
:"
:" [41mDon't[m [41mwant[m [41mto[m [41mdepend[m [41mon[m [41mthe[m [41mlocale[m [41mfrom[m [41mthe[m [41menvironment[m.  [41mThe[m .[41maff[m [41mand[m .[41mdic[m
:" [41mtext[m [41mis[m [41min[m [41mlatin1[m, [41mthe[m test [41mtext[m [41mis[m [41mutf-8[m.
:[41mset[m [41menc[m=[41mlatin1[m
:[41me[m!
:[41mset[m [41menc[m=[41mutf-8[m
:[41mset[m [41mfenc[m=
:"
:" [41mFunction[m [41mto[m test .[41maff[m/.[41mdic[m [41mwith[m [41mlist[m [41mof[m [41mgood[m [41mand[m [41mbad[m [41mwords[m.
:[41mfunc[m [41mTestOne[m([41maff[m, [41mdic[m)
  [41mset[m [41mspellfile[m=
  $put =''
  $put ='test '. [41ma[m:[41maff[m . '-' . [41ma[m:[41mdic[m
  " [41mGenerate[m [41ma[m .[41mspl[m [41mfile[m [41mfrom[m [41ma[m .[41mdic[m [41mand[m .[41maff[m [41mfile[m.
  [41mexe[m '1;/^' . [41ma[m:[41maff[m . '[41maffstart[m/+1,/^' . [41ma[m:[41maff[m . '[41maffend[m/-1[41mw[m! [41mXtest[m.[41maff[m'
  [41mexe[m '1;/^' . [41ma[m:[41mdic[m . '[41mdicstart[m/+1,/^' . [41ma[m:[41mdic[m . '[41mdicend[m/-1[41mw[m! [41mXtest[m.[41mdic[m'
  [41mmkspell[m! [41mXtest[m [41mXtest[m
  " [41muse[m [41mthat[m [41mspell[m [41mfile
[m  [41mset[m [41mspl[m=[41mXtest[m.[41mutf-8[m.[41mspl[m [41mspell[m
  " [41mlist[m [41mall[m [41mvalid[m [41mwords
[m  [41mspelldump[m
  %[41myank
[m  [41mquit[m
  $put
  $put ='-------'
  " [41mfind[m [41mall[m [41mbad[m [41mwords[m [41mand[m [41msuggestions[m [41mfor[m [41mthem
[m  [41mexe[m '1;/^' . [41ma[m:[41maff[m . '[41mgood[m:'
  [41mnormal[m 0[41mf[m:][41ms
[m  [41mlet[m [41mprevbad[m = ''
  [41mwhile[m 1
    [41mlet[m [[41mbad[m, [41ma[m] = [41mspellbadword[m()
    [41mif[m [41mbad[m == '' || [41mbad[m == [41mprevbad[m || [41mbad[m == '[41mbadend[m'[38;7H[41mbreak
[m    [41mendif
[m    [41mlet[m [41mprevbad[m = [41mbad
[m    [41mlet[m [41mlst[m = [41mspellsuggest[m([41mbad[m, 3)
    [41mnormal[m [41mmm[m
    $put =[41mbad[m
    $put =[41mstring[m([41mlst[m)
    [41mnormal[m `[41mm[m][41ms
[m  [41mendwhile
endfunc[m
:"
:[41mcall[m [41mTestOne[m('1', '1')
:$put =[41msoundfold[m('[41mgoobledygoook[m')
:$put =[41msoundfold[m('[41mkó[51;21Hopërÿnôven[m')
:$put =[41msoundfold[m('[41moeverloos[m [41mgezwets[m [41medale[m')
:"
:"
:" [41mand[m [41mnow[m [41mwith[m [41mSAL[m [41minstead[m [41mof[m [41mSOFO[m [41mitems[m; test [41mautomatic[m [41mreloading
gg[m:/^[41maffstart[m_[41msal[m/+1,/^[41maffend[m_[41msal[m/-1[41mw[m! [41mXtest[m.[41maff[1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h/^affstart_sal/+1,/^affend_sal/-1w! Xtest.aff[?25l"Xtest.aff" [57;13H[K[57;13H153 lines, 3426 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmkspell! Xtest Xtest[?25lReading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - testCompressing word tree...[57;26H[K[57;1H
Compressed 29 of 131 nodes; 102 (77%) remaining
Writing spell file Xtest.utf-8.spl ...
Done!
Estimated runtime memory use: 510 bytes
Performing soundfolding...
Total number of words: 16
Number of words after soundfolding: 15
Compressing word tree...
Compressed 33 of 75 nodes; 42 (56%) remaining
Writing suggestion file Xtest.utf-8.sug ...
Estimated runtime memory use: 241 bytes
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h$put =soundfold('goobledygoook')[?25l[1;1H[14L[1;1H[41mmee[m/391,111,9999
[41mbar[m/17,61003,123
[41mlead[m/2
[41mtail[m/123
[41mmiddle[m/77,1
7[41mdicend[m

7[41mgood[m: [41mmeea1[m [41mmeeaé[8;20Hbar[m [41mprebar[m [41mbarmeat[m [41mprebarmeat[m  [41mleadprebar[9;7Hlead[m [41mtail[m [41mleadtail[m  [41mleadmiddletail
bad[m: [41mmee[m [41mmeea2[m [41mprabar[m [41mprobarmaat[m [41mmiddle[m [41mleadmiddle[m [41mmiddletail[m [41mtaillead[11;9Hleadprobar
badend[m

[44mtest[m output:[15;1H[K[16;1H[44mtest[m 1-1[16;9H[K[17;1H# [41mfile[m: [41mXtest[m.[41mutf-8[m.[41mspl[m
Comment[18;8H[K[19;1Hdeol[19;5H[K[20;1Hdé[20;3Hôr[20;5H[K[21;1Hinput[21;7H[K[22;1HOK[22;3H[K[23;1Houtput[23;7H[K[24;1Houtputs[24;8H[K[25;1Houttest[25;8H[K[26;1Hput[26;4H[K[27;1Hputs[27;5H[K[28;1Htest[28;5H[K[29;1Htesten
testn[30;6H[K[31;1Hthe end[31;8H[K[32;1Huk[32;3H[K[33;1Hwrong[33;6H[K[34;1H-------[34;8H[K[35;1H[41mbad[m[35;4H[K[36;1H['put', 'uk', 'OK'][36;20H[K[37;1H[41minputs[m[37;8H[K[38;1H['input', 'puts', 'outputs']
[41mcomment[m[39;8H[K[40;1H['Comment', 'outtest', 'the end']
[41mok[m[41;5H[K[42;1H['OK', 'uk', 'put']
[41mOk[m[43;5H[K[44;1H['OK', 'Uk', 'Put'][44;20H[K[45;1Htest[45;5H[K[46;1H['Test', 'testn', 'testen']
[41mdé[47;3Hôl[m[47;5H[K[48;1H['deol', 'dé[48;13Hôr', 'test']
[41mend[m[49;4H[K[50;1H['put', 'uk', 'test'][50;22H[K[51;1H[41mthe[m[51;4H[K[52;1H['put', 'uk', 'test'][52;22H[K[53;1H[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele[m[55;22H[K[56;1H[41mkbltykk[m[56;8H[K[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =soundfold('kó[57;21Hopërÿnôven')[?25l[1;56r[56;1H
[1;57r[56;1H[41mkprnfn[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put =soundfold('oeverloos gezwets edale')[?25l[1;56r[56;1H
[1;57r[56;1H*[41mfls[m [41mkswts[m [41mtl[m[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" also use an addition file[?25l[56;1H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1H[41mTests[m [41mfor[m [41mspell[m [41mchecking[m [41mwith[m '[41mencoding[m' [41mset[m [41mto[m "[41mutf-8[m".  [41mvim[m: [41mset[m [41mft[m=[41mvim[m :

[41mSTARTTEST[m
:[41mso[m [41msmall[m.[41mvim[m
:[41mso[m [41mmbyte[m.[41mvim[m
:"
:" [41mDon't[m [41mwant[m [41mto[m [41mdepend[m [41mon[m [41mthe[m [41mlocale[m [41mfrom[m [41mthe[m [41menvironment[m.  [41mThe[m .[41maff[m [41mand[m .[41mdic[m
:" [41mtext[m [41mis[m [41min[m [41mlatin1[m, [41mthe[m test [41mtext[m [41mis[m [41mutf-8[m.
:[41mset[m [41menc[m=[41mlatin1[m
:[41me[m!
:[41mset[m [41menc[m=[41mutf-8[m
:[41mset[m [41mfenc[m=
:"
:" [41mFunction[m [41mto[m test .[41maff[m/.[41mdic[m [41mwith[m [41mlist[m [41mof[m [41mgood[m [41mand[m [41mbad[m [41mwords[m.
:[41mfunc[m [41mTestOne[m([41maff[m, [41mdic[m)
  [41mset[m [41mspellfile[m=
  $put =''
  $put ='test '. [41ma[m:[41maff[m . '-' . [41ma[m:[41mdic[m
  " [41mGenerate[m [41ma[m .[41mspl[m [41mfile[m [41mfrom[m [41ma[m .[41mdic[m [41mand[m .[41maff[m [41mfile[m.
  [41mexe[m '1;/^' . [41ma[m:[41maff[m . '[41maffstart[m/+1,/^' . [41ma[m:[41maff[m . '[41maffend[m/-1[41mw[m! [41mXtest[m.[41maff[m'
  [41mexe[m '1;/^' . [41ma[m:[41mdic[m . '[41mdicstart[m/+1,/^' . [41ma[m:[41mdic[m . '[41mdicend[m/-1[41mw[m! [41mXtest[m.[41mdic[m'
  [41mmkspell[m! [41mXtest[m [41mXtest[m
  " [41muse[m [41mthat[m [41mspell[m [41mfile
[m  [41mset[m [41mspl[m=[41mXtest[m.[41mutf-8[m.[41mspl[m [41mspell[m
  " [41mlist[m [41mall[m [41mvalid[m [41mwords
[m  [41mspelldump[m
  %[41myank
[m  [41mquit[m
  $put
  $put ='-------'
  " [41mfind[m [41mall[m [41mbad[m [41mwords[m [41mand[m [41msuggestions[m [41mfor[m [41mthem
[m  [41mexe[m '1;/^' . [41ma[m:[41maff[m . '[41mgood[m:'
  [41mnormal[m 0[41mf[m:][41ms
[m  [41mlet[m [41mprevbad[m = ''
  [41mwhile[m 1
    [41mlet[m [[41mbad[m, [41ma[m] = [41mspellbadword[m()
    [41mif[m [41mbad[m == '' || [41mbad[m == [41mprevbad[m || [41mbad[m == '[41mbadend[m'[38;7H[41mbreak
[m    [41mendif
[m    [41mlet[m [41mprevbad[m = [41mbad
[m    [41mlet[m [41mlst[m = [41mspellsuggest[m([41mbad[m, 3)
    [41mnormal[m [41mmm[m
    $put =[41mbad[m
    $put =[41mstring[m([41mlst[m)
    [41mnormal[m `[41mm[m][41ms
[m  [41mendwhile
endfunc[m
:"
:[41mcall[m [41mTestOne[m('1', '1')
:$put =[41msoundfold[m('[41mgoobledygoook[m')
:$put =[41msoundfold[m('[41mkó[51;21Hopërÿnôven[m')
:$put =[41msoundfold[m('[41moeverloos[m [41mgezwets[m [41medale[m')
:"
:"
:" [41mand[m [41mnow[m [41mwith[m [41mSAL[m [41minstead[m [41mof[m [41mSOFO[m [41mitems[m; test [41mautomatic[m [41mreloading
gg[m:/^[41maffstart[m_[41msal[m/+1,/^[41maffend[m_[41msal[m/-1[41mw[m! [41mXtest[m.[41maff[1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h/^addstart/+1,/^addend/-1w! Xtest.utf-8.add[?25l"Xtest.utf-8.add" [57;19H[K[57;19H[New File] 3 lines, 38 characters written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmkspell! Xtest.utf-8.add.spl Xtest.utf-8.add[?25lReading word file Xtest.utf-8.add ...[57;38H[K[57;1H
Compressing word tree...
Compressed 0 of 29 nodes; 29 (100%) remaining
Writing spell file Xtest.utf-8.add.spl ...
Done!
Estimated runtime memory use: 145 bytes
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset spellfile=Xtest.utf-8.add[?25l[1;1H[6L[1;1H[41mTests[m [41mfor[m [41mspell[m [41mchecking[m [41mwith[m '[41mencoding[m' [41mset[m [41mto[m "[41mutf-8[m".  [41mvim[m: [41mset[m [41mft[m=[41mvim[m :

[41mSTARTTEST[m
:[41mso[m [41msmall[m.[41mvim[m
:[41mso[m [41mmbyte[m.[41mvim[m
:"[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/[?12l[?25h^test2:[?25l[27m[23m[m[H[2J[1;1H[41mPFX[m [41mP[m 0 [41mnou[m .
4[41maffend[m

4[41mdicstart[m
1234
[41mword[m/[41mmP
util[m/[41mam
pro[m/[41mxq
tomato[m/[41mm
bork[m/[41mmp
start[m/[41ms
end[m/[41me[m
4[41mdicend[m

4[41mgood[m: [41mword[m [41mutil[m [41mbork[m [41mprebork[m [41mstart[m [41mend[m [41mwordutil[m [41mwordutils[m [41mpro-ok[16;9Hbork[m [41mborkbork[m [41mborkborkbork[m [41mborkborkborkbork[m [41mborkborkborkborkbork[17;9Htomato[m [41mtomatotomato[m [41mstartend[m [41mstartword[m [41mstartwordword[m [41mstartwordend[18;9Hstartwordwordend[m [41mstartwordwordwordend[m [41mprebork[m [41mpreborkbork[19;9Hpreborkborkbork[20;9Hnouword
bad[m: [41mwordutilize[m [41mpro[m [41mborkborkborkborkborkbork[m [41mtomatotomatotomato[22;9Hendstart[m [41mendend[m [41mstartstart[m [41mwordend[m [41mwordstart[23;9Hpreborkprebork[m  [41mpreborkpreborkbork[24;9Hstartwordwordwordwordend[m [41mborkpreborkpreborkbork[25;9Hutilsbork[m  [41mstartnouword
badend

test2[m:
elequint test elekwint test [41melekwent[m [41masdf[m

Test [41maffix[m [41mflags[m [41mwith[m [41mtwo[m [41mcharacters[m

5[41maffstart
SET[m [41mISO8859-1

FLAG[m [41mlong

NEEDAFFIX[m !!

[41mCOMPOUNDRULE[m [41mssmm[m*[41mee

NEEDCOMPOUND[m [41mxx
COMPOUNDPERMITFLAG[m [41mpp

SFX[m 13 [41mY[m 1
[41mSFX[m 13 0 [41mbork[m .

[41mSFX[m [41ma1[m [41mY[m 1
[41mSFX[m [41ma1[m 0 [41ma1[m .

[41mSFX[m [41ma[m[34m<e9>[m [41mY[m 1
[41mSFX[m [41ma[m[34m<e9>[m 0 [41ma[m[34m<e9>[m .

[41mPFX[m [41mzz[m [41mY[m 1
[41mPFX[m [41mzz[m 0 [41mpre[m/[41mpp[m .[28;1H[?12l[?25h[29;29H[?25l[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[29;29H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H[41mtail[m/123
[41mmiddle[m/77,1
7[41mdicend[m

7[41mgood[m: [41mmeea1[m [41mmeeaé[5;20Hbar[m [41mprebar[m [41mbarmeat[m [41mprebarmeat[m  [41mleadprebar[6;7Hlead[m [41mtail[m [41mleadtail[m  [41mleadmiddletail
bad[m: [41mmee[m [41mmeea2[m [41mprabar[m [41mprobarmaat[m [41mmiddle[m [41mleadmiddle[m [41mmiddletail[m [41mtaillead[8;9Hleadprobar
badend[m

[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mutf-8[m.[41mspl[m
Comment
deol
dé[17;3Hôr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdé[44;3Hôl[m
['deol', 'dé[45;13Hôr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[?12l[?25h[?25l
[m:[?12l[?25hset spl=Xtest_us.utf-8.spl[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^test2:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H[41mPFX[m [41mP[m 0 [41mnou[m .
4[41maffend[m

4[41mdicstart[m
1234
[41mword[m/[41mmP
util[m/[41mam
pro[m/[41mxq
tomato[m/[41mm
bork[m/[41mmp
start[m/[41ms
end[m/[41me[m
4[41mdicend[m

4[41mgood[m: [41mword[m [41mutil[m [41mbork[m [41mprebork[m [41mstart[m [41mend[m [41mwordutil[m [41mwordutils[m [41mpro-ok[16;9Hbork[m [41mborkbork[m [41mborkborkbork[m [41mborkborkborkbork[m [41mborkborkborkborkbork[17;9Htomato[m [41mtomatotomato[m [41mstartend[m [41mstartword[m [41mstartwordword[m [41mstartwordend[18;9Hstartwordwordend[m [41mstartwordwordwordend[m [41mprebork[m [41mpreborkbork[19;9Hpreborkborkbork[20;9Hnouword
bad[m: [41mwordutilize[m [41mpro[m [41mborkborkborkborkborkbork[m [41mtomatotomatotomato[22;9Hendstart[m [41mendend[m [41mstartstart[m [41mwordend[m [41mwordstart[23;9Hpreborkprebork[m  [41mpreborkpreborkbork[24;9Hstartwordwordwordwordend[m [41mborkpreborkpreborkbork[25;9Hutilsbork[m  [41mstartnouword
badend

test2[m:
[46melequint[m test [46melekwint[m test [41melekwent[m [41masdf[m

Test [41maffix[m [41mflags[m [41mwith[m [41mtwo[m [41mcharacters[m

5[41maffstart
SET[m [41mISO8859-1

FLAG[m [41mlong

NEEDAFFIX[m !!

[41mCOMPOUNDRULE[m [41mssmm[m*[41mee

NEEDCOMPOUND[m [41mxx
COMPOUNDPERMITFLAG[m [41mpp

SFX[m 13 [41mY[m 1
[41mSFX[m 13 0 [41mbork[m .

[41mSFX[m [41ma1[m [41mY[m 1
[41mSFX[m [41ma1[m 0 [41ma1[m .

[41mSFX[m [41ma[m[34m<e9>[m [41mY[m 1
[41mSFX[m [41ma[m[34m<e9>[m 0 [41ma[m[34m<e9>[m .

[41mPFX[m [41mzz[m [41mY[m 1
[41mPFX[m [41mzz[m 0 [41mpre[m/[41mpp[m .

[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h
[?25l[m[57;1H[K[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H[41mmiddle[m/77,1
7[41mdicend[m

7[41mgood[m: [41mmeea1[m [41mmeeaé[4;20Hbar[m [41mprebar[m [41mbarmeat[m [41mprebarmeat[m  [41mleadprebar[5;7Hlead[m [41mtail[m [41mleadtail[m  [41mleadmiddletail
bad[m: [41mmee[m [41mmeea2[m [41mprabar[m [41mprobarmaat[m [41mmiddle[m [41mleadmiddle[m [41mmiddletail[m [41mtaillead[7;9Hleadprobar
badend[m

[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mutf-8[m.[41mspl[m
Comment
deol
dé[16;3Hôr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdé[43;3Hôl[m
['deol', 'dé[44;13Hôr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[m
[46melequint[?12l[?25h[?25l[27m[23m[m[H[2J[1;1H4[41maffend[m

4[41mdicstart[m
1234
[41mword[m/[41mmP
util[m/[41mam
pro[m/[41mxq
tomato[m/[41mm
bork[m/[41mmp
start[m/[41ms
end[m/[41me[m
4[41mdicend[m

4[41mgood[m: [41mword[m [41mutil[m [41mbork[m [41mprebork[m [41mstart[m [41mend[m [41mwordutil[m [41mwordutils[m [41mpro-ok[15;9Hbork[m [41mborkbork[m [41mborkborkbork[m [41mborkborkborkbork[m [41mborkborkborkborkbork[16;9Htomato[m [41mtomatotomato[m [41mstartend[m [41mstartword[m [41mstartwordword[m [41mstartwordend[17;9Hstartwordwordend[m [41mstartwordwordwordend[m [41mprebork[m [41mpreborkbork[18;9Hpreborkborkbork[19;9Hnouword
bad[m: [41mwordutilize[m [41mpro[m [41mborkborkborkborkborkbork[m [41mtomatotomatotomato[21;9Hendstart[m [41mendend[m [41mstartstart[m [41mwordend[m [41mwordstart[22;9Hpreborkprebork[m  [41mpreborkpreborkbork[23;9Hstartwordwordwordwordend[m [41mborkpreborkpreborkbork[24;9Hutilsbork[m  [41mstartnouword
badend

test2[m:
[46melequint[m test [46melekwint[m test [41melekwent[m [41masdf[m

Test [41maffix[m [41mflags[m [41mwith[m [41mtwo[m [41mcharacters[m

5[41maffstart
SET[m [41mISO8859-1

FLAG[m [41mlong

NEEDAFFIX[m !!

[41mCOMPOUNDRULE[m [41mssmm[m*[41mee

NEEDCOMPOUND[m [41mxx
COMPOUNDPERMITFLAG[m [41mpp

SFX[m 13 [41mY[m 1
[41mSFX[m 13 0 [41mbork[m .

[41mSFX[m [41ma1[m [41mY[m 1
[41mSFX[m [41ma1[m 0 [41ma1[m .

[41mSFX[m [41ma[m[34m<e9>[m [41mY[m 1
[41mSFX[m [41ma[m[34m<e9>[m 0 [41ma[m[34m<e9>[m .

[41mPFX[m [41mzz[m [41mY[m 1
[41mPFX[m [41mzz[m 0 [41mpre[m/[41mpp[m .

[41mPFX[m [41myy[m [41mY[m 1[28;1H[?12l[?25h[14C[?25l[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[28;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H7[41mdicend[m

7[41mgood[m: [41mmeea1[m [41mmeeaé[3;20Hbar[m [41mprebar[m [41mbarmeat[m [41mprebarmeat[m  [41mleadprebar[4;7Hlead[m [41mtail[m [41mleadtail[m  [41mleadmiddletail
bad[m: [41mmee[m [41mmeea2[m [41mprabar[m [41mprobarmaat[m [41mmiddle[m [41mleadmiddle[m [41mmiddletail[m [41mtaillead[6;9Hleadprobar
badend[m

[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mutf-8[m.[41mspl[m
Comment
deol
dé[15;3Hôr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdé[42;3Hôl[m
['deol', 'dé[43;13Hôr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[m
[46melequint
elekwint[?12l[?25h[?25l
[m:[?12l[?25hset spl=Xtest_gb.utf-8.spl[?25l[55;1Helequint
[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^test2:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H[41mPFX[m [41mP[m 0 [41mnou[m .
4[41maffend[m

4[41mdicstart[m
1234
[41mword[m/[41mmP
util[m/[41mam
pro[m/[41mxq
tomato[m/[41mm
bork[m/[41mmp
start[m/[41ms
end[m/[41me[m
4[41mdicend[m

4[41mgood[m: [41mword[m [41mutil[m [41mbork[m [41mprebork[m [41mstart[m [41mend[m [41mwordutil[m [41mwordutils[m [41mpro-ok[16;9Hbork[m [41mborkbork[m [41mborkborkbork[m [41mborkborkborkbork[m [41mborkborkborkborkbork[17;9Htomato[m [41mtomatotomato[m [41mstartend[m [41mstartword[m [41mstartwordword[m [41mstartwordend[18;9Hstartwordwordend[m [41mstartwordwordwordend[m [41mprebork[m [41mpreborkbork[19;9Hpreborkborkbork[20;9Hnouword
bad[m: [41mwordutilize[m [41mpro[m [41mborkborkborkborkborkbork[m [41mtomatotomatotomato[22;9Hendstart[m [41mendend[m [41mstartstart[m [41mwordend[m [41mwordstart[23;9Hpreborkprebork[m  [41mpreborkpreborkbork[24;9Hstartwordwordwordwordend[m [41mborkpreborkpreborkbork[25;9Hutilsbork[m  [41mstartnouword
badend

test2[m:
elequint test [46melekwint[m test [41melekwent[m [41masdf[m

Test [41maffix[m [41mflags[m [41mwith[m [41mtwo[m [41mcharacters[m

5[41maffstart
SET[m [41mISO8859-1

FLAG[m [41mlong

NEEDAFFIX[m !!

[41mCOMPOUNDRULE[m [41mssmm[m*[41mee

NEEDCOMPOUND[m [41mxx
COMPOUNDPERMITFLAG[m [41mpp

SFX[m 13 [41mY[m 1
[41mSFX[m 13 0 [41mbork[m .

[41mSFX[m [41ma1[m [41mY[m 1
[41mSFX[m [41ma1[m 0 [41ma1[m .

[41mSFX[m [41ma[m[34m<e9>[m [41mY[m 1
[41mSFX[m [41ma[m[34m<e9>[m 0 [41ma[m[34m<e9>[m .

[41mPFX[m [41mzz[m [41mY[m 1
[41mPFX[m [41mzz[m 0 [41mpre[m/[41mpp[m .

[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h[29;15H[?25l[m[57;1H[K[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[29;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[2;1H7[41mgood[m: [41mmeea1[m [41mmeeaé[2;20Hbar[m [41mprebar[m [41mbarmeat[m [41mprebarmeat[m  [41mleadprebar[3;7Hlead[m [41mtail[m [41mleadtail[m  [41mleadmiddletail
bad[m: [41mmee[m [41mmeea2[m [41mprabar[m [41mprobarmaat[m [41mmiddle[m [41mleadmiddle[m [41mmiddletail[m [41mtaillead[5;9Hleadprobar
badend[m

[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mutf-8[m.[41mspl[m
Comment
deol
dé[14;3Hôr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdé[41;3Hôl[m
['deol', 'dé[42;13Hôr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[m
elequint
[46melekwint
elekwint[?12l[?25h[?25l[27m[23m[m[H[2J[1;1H4[41maffend[m

4[41mdicstart[m
1234
[41mword[m/[41mmP
util[m/[41mam
pro[m/[41mxq
tomato[m/[41mm
bork[m/[41mmp
start[m/[41ms
end[m/[41me[m
4[41mdicend[m

4[41mgood[m: [41mword[m [41mutil[m [41mbork[m [41mprebork[m [41mstart[m [41mend[m [41mwordutil[m [41mwordutils[m [41mpro-ok[15;9Hbork[m [41mborkbork[m [41mborkborkbork[m [41mborkborkborkbork[m [41mborkborkborkborkbork[16;9Htomato[m [41mtomatotomato[m [41mstartend[m [41mstartword[m [41mstartwordword[m [41mstartwordend[17;9Hstartwordwordend[m [41mstartwordwordwordend[m [41mprebork[m [41mpreborkbork[18;9Hpreborkborkbork[19;9Hnouword
bad[m: [41mwordutilize[m [41mpro[m [41mborkborkborkborkborkbork[m [41mtomatotomatotomato[21;9Hendstart[m [41mendend[m [41mstartstart[m [41mwordend[m [41mwordstart[22;9Hpreborkprebork[m  [41mpreborkpreborkbork[23;9Hstartwordwordwordwordend[m [41mborkpreborkpreborkbork[24;9Hutilsbork[m  [41mstartnouword
badend

test2[m:
elequint test [46melekwint[m test [41melekwent[m [41masdf[m

Test [41maffix[m [41mflags[m [41mwith[m [41mtwo[m [41mcharacters[m

5[41maffstart
SET[m [41mISO8859-1

FLAG[m [41mlong

NEEDAFFIX[m !!

[41mCOMPOUNDRULE[m [41mssmm[m*[41mee

NEEDCOMPOUND[m [41mxx
COMPOUNDPERMITFLAG[m [41mpp

SFX[m 13 [41mY[m 1
[41mSFX[m 13 0 [41mbork[m .

[41mSFX[m [41ma1[m [41mY[m 1
[41mSFX[m [41ma1[m 0 [41ma1[m .

[41mSFX[m [41ma[m[34m<e9>[m [41mY[m 1
[41mSFX[m [41ma[m[34m<e9>[m 0 [41ma[m[34m<e9>[m .

[41mPFX[m [41mzz[m [41mY[m 1
[41mPFX[m [41mzz[m 0 [41mpre[m/[41mpp[m .

[41mPFX[m [41myy[m [41mY[m 1[28;15H[?12l[?25h[14C[?25l[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[28;29H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H7[41mgood[m: [41mmeea1[m [41mmeeaé[1;20Hbar[m [41mprebar[m [41mbarmeat[m [41mprebarmeat[m  [41mleadprebar[2;7Hlead[m [41mtail[m [41mleadtail[m  [41mleadmiddletail
bad[m: [41mmee[m [41mmeea2[m [41mprabar[m [41mprobarmaat[m [41mmiddle[m [41mleadmiddle[m [41mmiddletail[m [41mtaillead[4;9Hleadprobar
badend[m

[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mutf-8[m.[41mspl[m
Comment
deol
dé[13;3Hôr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdé[40;3Hôl[m
['deol', 'dé[41;13Hôr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[m
elequint
[46melekwint
elekwint[m
[41melekwent[?12l[?25h[?25l
[m:[?12l[?25hset spl=Xtest_nz.utf-8.spl[?25l[53;1H[46melequint[m
elekwint
elekwint
[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25h^test2:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H[41mPFX[m [41mP[m 0 [41mnou[m .
4[41maffend[m

4[41mdicstart[m
1234
[41mword[m/[41mmP
util[m/[41mam
pro[m/[41mxq
tomato[m/[41mm
bork[m/[41mmp
start[m/[41ms
end[m/[41me[m
4[41mdicend[m

4[41mgood[m: [41mword[m [41mutil[m [41mbork[m [41mprebork[m [41mstart[m [41mend[m [41mwordutil[m [41mwordutils[m [41mpro-ok[16;9Hbork[m [41mborkbork[m [41mborkborkbork[m [41mborkborkborkbork[m [41mborkborkborkborkbork[17;9Htomato[m [41mtomatotomato[m [41mstartend[m [41mstartword[m [41mstartwordword[m [41mstartwordend[18;9Hstartwordwordend[m [41mstartwordwordwordend[m [41mprebork[m [41mpreborkbork[19;9Hpreborkborkbork[20;9Hnouword
bad[m: [41mwordutilize[m [41mpro[m [41mborkborkborkborkborkbork[m [41mtomatotomatotomato[22;9Hendstart[m [41mendend[m [41mstartstart[m [41mwordend[m [41mwordstart[23;9Hpreborkprebork[m  [41mpreborkpreborkbork[24;9Hstartwordwordwordwordend[m [41mborkpreborkpreborkbork[25;9Hutilsbork[m  [41mstartnouword
badend

test2[m:
[46melequint[m test elekwint test [41melekwent[m [41masdf[m

Test [41maffix[m [41mflags[m [41mwith[m [41mtwo[m [41mcharacters[m

5[41maffstart
SET[m [41mISO8859-1

FLAG[m [41mlong

NEEDAFFIX[m !!

[41mCOMPOUNDRULE[m [41mssmm[m*[41mee

NEEDCOMPOUND[m [41mxx
COMPOUNDPERMITFLAG[m [41mpp

SFX[m 13 [41mY[m 1
[41mSFX[m 13 0 [41mbork[m .

[41mSFX[m [41ma1[m [41mY[m 1
[41mSFX[m [41ma1[m 0 [41ma1[m .

[41mSFX[m [41ma[m[34m<e9>[m [41mY[m 1
[41mSFX[m [41ma[m[34m<e9>[m 0 [41ma[m[34m<e9>[m .

[41mPFX[m [41mzz[m [41mY[m 1
[41mPFX[m [41mzz[m 0 [41mpre[m/[41mpp[m .

[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h
[?25l[m[57;1H[K[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;7H[41mlead[m [41mtail[m [41mleadtail[m  [41mleadmiddletail
bad[m: [41mmee[m [41mmeea2[m [41mprabar[m [41mprobarmaat[m [41mmiddle[m [41mleadmiddle[m [41mmiddletail[m [41mtaillead[3;9Hleadprobar
badend[m

[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mutf-8[m.[41mspl[m
Comment
deol
dé[12;3Hôr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdé[39;3Hôl[m
['deol', 'dé[40;13Hôr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[m
[46melequint[m
elekwint
elekwint
[41melekwent[m
[46melequint[?12l[?25h[?25l[27m[23m[m[H[2J[1;1H4[41maffend[m

4[41mdicstart[m
1234
[41mword[m/[41mmP
util[m/[41mam
pro[m/[41mxq
tomato[m/[41mm
bork[m/[41mmp
start[m/[41ms
end[m/[41me[m
4[41mdicend[m

4[41mgood[m: [41mword[m [41mutil[m [41mbork[m [41mprebork[m [41mstart[m [41mend[m [41mwordutil[m [41mwordutils[m [41mpro-ok[15;9Hbork[m [41mborkbork[m [41mborkborkbork[m [41mborkborkborkbork[m [41mborkborkborkborkbork[16;9Htomato[m [41mtomatotomato[m [41mstartend[m [41mstartword[m [41mstartwordword[m [41mstartwordend[17;9Hstartwordwordend[m [41mstartwordwordwordend[m [41mprebork[m [41mpreborkbork[18;9Hpreborkborkbork[19;9Hnouword
bad[m: [41mwordutilize[m [41mpro[m [41mborkborkborkborkborkbork[m [41mtomatotomatotomato[21;9Hendstart[m [41mendend[m [41mstartstart[m [41mwordend[m [41mwordstart[22;9Hpreborkprebork[m  [41mpreborkpreborkbork[23;9Hstartwordwordwordwordend[m [41mborkpreborkpreborkbork[24;9Hutilsbork[m  [41mstartnouword
badend

test2[m:
[46melequint[m test elekwint test [41melekwent[m [41masdf[m

Test [41maffix[m [41mflags[m [41mwith[m [41mtwo[m [41mcharacters[m

5[41maffstart
SET[m [41mISO8859-1

FLAG[m [41mlong

NEEDAFFIX[m !!

[41mCOMPOUNDRULE[m [41mssmm[m*[41mee

NEEDCOMPOUND[m [41mxx
COMPOUNDPERMITFLAG[m [41mpp

SFX[m 13 [41mY[m 1
[41mSFX[m 13 0 [41mbork[m .

[41mSFX[m [41ma1[m [41mY[m 1
[41mSFX[m [41ma1[m 0 [41ma1[m .

[41mSFX[m [41ma[m[34m<e9>[m [41mY[m 1
[41mSFX[m [41ma[m[34m<e9>[m 0 [41ma[m[34m<e9>[m .

[41mPFX[m [41mzz[m [41mY[m 1
[41mPFX[m [41mzz[m 0 [41mpre[m/[41mpp[m .

[41mPFX[m [41myy[m [41mY[m 1[28;1H[?12l[?25h[28C[?25l[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[28;29H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H[41mbad[m: [41mmee[m [41mmeea2[m [41mprabar[m [41mprobarmaat[m [41mmiddle[m [41mleadmiddle[m [41mmiddletail[m [41mtaillead[2;9Hleadprobar
badend[m

[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mutf-8[m.[41mspl[m
Comment
deol
dé[11;3Hôr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdé[38;3Hôl[m
['deol', 'dé[39;13Hôr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent[m
[46melequint[m
elekwint
elekwint
[41melekwent[m
[46melequint[m
[41melekwent[?12l[?25h[?25l
[m:[?12l[?25hset spl=Xtest_ca.utf-8.spl[?25l[51;1H[41melequint
elekwint
elekwint

elequint
[?12l[?25h[?25l[m[57;1H[K[57;1H/[?12l[?25h^test2:[?25l[31msearch hit BOTTOM, continuing at TOP[27m[23m[m[H[2J[1;1H[41mPFX[m [41mP[m 0 [41mnou[m .
4[41maffend[m

4[41mdicstart[m
1234
[41mword[m/[41mmP
util[m/[41mam
pro[m/[41mxq
tomato[m/[41mm
bork[m/[41mmp
start[m/[41ms
end[m/[41me[m
4[41mdicend[m

4[41mgood[m: [41mword[m [41mutil[m [41mbork[m [41mprebork[m [41mstart[m [41mend[m [41mwordutil[m [41mwordutils[m [41mpro-ok[16;9Hbork[m [41mborkbork[m [41mborkborkbork[m [41mborkborkborkbork[m [41mborkborkborkborkbork[17;9Htomato[m [41mtomatotomato[m [41mstartend[m [41mstartword[m [41mstartwordword[m [41mstartwordend[18;9Hstartwordwordend[m [41mstartwordwordwordend[m [41mprebork[m [41mpreborkbork[19;9Hpreborkborkbork[20;9Hnouword
bad[m: [41mwordutilize[m [41mpro[m [41mborkborkborkborkborkbork[m [41mtomatotomatotomato[22;9Hendstart[m [41mendend[m [41mstartstart[m [41mwordend[m [41mwordstart[23;9Hpreborkprebork[m  [41mpreborkpreborkbork[24;9Hstartwordwordwordwordend[m [41mborkpreborkpreborkbork[25;9Hutilsbork[m  [41mstartnouword
badend

test2[m:
[41melequint[m test [41melekwint[m test [41melekwent[m [41masdf[m

Test [41maffix[m [41mflags[m [41mwith[m [41mtwo[m [41mcharacters[m

5[41maffstart
SET[m [41mISO8859-1

FLAG[m [41mlong

NEEDAFFIX[m !!

[41mCOMPOUNDRULE[m [41mssmm[m*[41mee

NEEDCOMPOUND[m [41mxx
COMPOUNDPERMITFLAG[m [41mpp

SFX[m 13 [41mY[m 1
[41mSFX[m 13 0 [41mbork[m .

[41mSFX[m [41ma1[m [41mY[m 1
[41mSFX[m [41ma1[m 0 [41ma1[m .

[41mSFX[m [41ma[m[34m<e9>[m [41mY[m 1
[41mSFX[m [41ma[m[34m<e9>[m 0 [41ma[m[34m<e9>[m .

[41mPFX[m [41mzz[m [41mY[m 1
[41mPFX[m [41mzz[m 0 [41mpre[m/[41mpp[m .

[31msearch hit BOTTOM, continuing at TOP[28;1H[?12l[?25h
[?25l[m[57;1H[K[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;9H[41mleadprobar
badend[m

[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mutf-8[m.[41mspl[m
Comment
deol
dé[10;3Hôr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdé[37;3Hôl[m
['deol', 'dé[38;13Hôr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent
elequint
elekwint
elekwint
elekwent
elequint
elekwent
elequint[?12l[?25h[?25l[27m[23m[m[H[2J[1;1H4[41maffend[m

4[41mdicstart[m
1234
[41mword[m/[41mmP
util[m/[41mam
pro[m/[41mxq
tomato[m/[41mm
bork[m/[41mmp
start[m/[41ms
end[m/[41me[m
4[41mdicend[m

4[41mgood[m: [41mword[m [41mutil[m [41mbork[m [41mprebork[m [41mstart[m [41mend[m [41mwordutil[m [41mwordutils[m [41mpro-ok[15;9Hbork[m [41mborkbork[m [41mborkborkbork[m [41mborkborkborkbork[m [41mborkborkborkborkbork[16;9Htomato[m [41mtomatotomato[m [41mstartend[m [41mstartword[m [41mstartwordword[m [41mstartwordend[17;9Hstartwordwordend[m [41mstartwordwordwordend[m [41mprebork[m [41mpreborkbork[18;9Hpreborkborkbork[19;9Hnouword
bad[m: [41mwordutilize[m [41mpro[m [41mborkborkborkborkborkbork[m [41mtomatotomatotomato[21;9Hendstart[m [41mendend[m [41mstartstart[m [41mwordend[m [41mwordstart[22;9Hpreborkprebork[m  [41mpreborkpreborkbork[23;9Hstartwordwordwordwordend[m [41mborkpreborkpreborkbork[24;9Hutilsbork[m  [41mstartnouword
badend

test2[m:
[41melequint[m test [41melekwint[m test [41melekwent[m [41masdf[m

Test [41maffix[m [41mflags[m [41mwith[m [41mtwo[m [41mcharacters[m

5[41maffstart
SET[m [41mISO8859-1

FLAG[m [41mlong

NEEDAFFIX[m !!

[41mCOMPOUNDRULE[m [41mssmm[m*[41mee

NEEDCOMPOUND[m [41mxx
COMPOUNDPERMITFLAG[m [41mpp

SFX[m 13 [41mY[m 1
[41mSFX[m 13 0 [41mbork[m .

[41mSFX[m [41ma1[m [41mY[m 1
[41mSFX[m [41ma1[m 0 [41ma1[m .

[41mSFX[m [41ma[m[34m<e9>[m [41mY[m 1
[41mSFX[m [41ma[m[34m<e9>[m 0 [41ma[m[34m<e9>[m .

[41mPFX[m [41mzz[m [41mY[m 1
[41mPFX[m [41mzz[m 0 [41mpre[m/[41mpp[m .

[41mPFX[m [41myy[m [41mY[m 1[28;1H[?12l[?25h[14C[?25l[57;1H:[?12l[?25hlet [str, a] = spellbadword()[?25l[28;15H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =str[?25l[27m[23m[m[H[2J[1;1H[41mbadend[m

[44mtest[m output:

[44mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mutf-8[m.[41mspl[m
Comment
deol
dé[9;3Hôr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
[41mbad[m
['put', 'uk', 'OK']
[41minputs[m
['input', 'puts', 'outputs']
[41mcomment[m
['Comment', 'outtest', 'the end']
[41mok[m
['OK', 'uk', 'put']
[41mOk[m
['OK', 'Uk', 'Put']
test
['Test', 'testn', 'testen']
[41mdé[36;3Hôl[m
['deol', 'dé[37;13Hôr', 'test']
[41mend[m
['put', 'uk', 'test']
[41mthe[m
['put', 'uk', 'test']
[41mgebletegek
kepereneven
everles[m [41mgesvets[m [41metele
kbltykk
kprnfn[m
*[41mfls[m [41mkswts[m [41mtl
elekwent
elequint
elekwint
elekwint
elekwent
elequint
elekwent
elequint
elekwint[?12l[?25h[?25l
[m:[?12l[?25hunlet str a[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Postponed prefixes[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall TestOne('2', '1')[?25l"Xtest.aff" [57;13H[K[57;13H46 lines, 461 characters written
"Xtest.dic" 11 lines, 71 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - testCompressing word tree...[57;26H[K[57;1H
Compressed 10 of 102 nodes; 92 (90%) remaining
Compressed 0 of 13 nodes; 13 (100%) remaining
Writing spell file Xtest.utf-8.spl ...
Done!
Estimated runtime memory use: 525 bytes
17 lines yanked
17 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[12L[1;1H2[41maffend[m

1[41mdicstart[m
123456
test/[41mNO[m
# [41mcomment[m
wrong
Comment
OK
uk
put/[41mISO[m
the end
deol[13;5H[K[14;1Hd[34m<e9><f4>[mr
1[41mdicend[m[16;1H[K[17;1H[41maddstart[m
/[41mregions[m=[41musgbnz
elequint[m/2
[41melekwint[m/3
[41maddend[m[22;1H[K[23;1H1[41mgood[m: wrong OK puts. Test the end[24;4H:  [41minputs[m [41mcomment[m [41mok[m [41mOk[m. [44mtest[m [41mdé[24;36Hôl[m [41mend[m [41mthe
badend[m[25;7H[K[26;1H[K[27;1H2[41mgood[m: puts[27;12H[K[28;1H[41mbad[m: [41minputs[m [41mcomment[m [41mok[m [41mOk[m [41mend[m [41mthe[m. [44mtest[m [41mdé[28;43Hôl
badend[m[29;7H[K[30;1H[K[31;1HTest [41mrules[m [41mfor[m [41mcompounding[m.[32;1H[K[33;1H3[41maffstart[m[33;10H[K[34;1H[41mSET[m [41mISO8859-1[m[35;1H[K[36;1H[41mCOMPOUNDMIN[m 3
[41mCOMPOUNDRULE[m [41mm[m*[37;16H[K[38;1H[41mNEEDCOMPOUND[m [41mx[m
3[41maffend[m[39;9H[K[40;1H[K[41;1H3[41mdicstart[m[41;10H[K[42;1H1234[42;5H[K[43;1H[41mfoo[m/[41mm[m[43;6H[K[44;1H[41mbar[m/[41mmx[m[44;7H[K[45;1H[41mm[m[34m<ef>[m/[41mm
la[m/[41mmx[m[46;6H[K[47;1H3[41mdicend[m[47;8H[K[48;1H[K[49;1H3[41mgood[m: [41mfoo[m [41mmï[m [41mfoobar[m [41mfoofoobar[m [41mbarfoo[m [41mbarbarfoo
bad[m: [41mbar[m [41mla[m [41mfoomï[m [41mbarmï[m [41mmïfoo[m [41mmïbar[m [41mmïmï[m [41mlala[m [41mmïla[m [41mlamï[m [41mfoola[m [41mlabar
badend[m[51;7H[K[52;1H[K[53;1H[K[54;1H[41mTests[m [41mfor[m [41mcompounding[m.[55;1H[K[56;1H4[41maffstart[m[57;1H[K[29;1H[?12l[?25h[?25l[57;1H:[?12l[?25h" Compound words[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall TestOne('3', '3')[?25l"Xtest.aff" [57;13H[K[57;13H5 lines, 60 characters written
"Xtest.dic" 5 lines, 29 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - fooCompressing word tree...[57;26H[K[57;1H
Compressed 6 of 31 nodes; 25 (80%) remaining
Writing spell file Xtest.utf-8.spl ...
Done!
Estimated runtime memory use: 125 bytes
3 lines yanked
3 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall TestOne('4', '4')[?25l"Xtest.aff" [57;13H[K[57;13H45 lines, 559 characters written
"Xtest.dic" 8 lines, 59 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - wordCompressing word tree...[57;26H[K[57;1H
Compressed 2 of 91 nodes; 89 (97%) remaining
Compressed 0 of 15 nodes; 15 (100%) remaining
Writing spell file Xtest.utf-8.spl ...
Done!
Estimated runtime memory use: 520 bytes
12 lines yanked
12 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall TestOne('5', '5')[?25l"Xtest.aff" [57;13H[K[57;13H25 lines, 237 characters written
"Xtest.dic" 6 lines, 57 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - fooCompressing word tree...[57;26H[K[57;1H
Compressed 19 of 107 nodes; 88 (82%) remaining
Writing spell file Xtest.utf-8.spl ...
Done!
Estimated runtime memory use: 440 bytes
10 lines yanked
10 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall TestOne('6', '6')[?25l"Xtest.aff" [57;13H[K[57;13H23 lines, 211 characters written
"Xtest.dic" 6 lines, 53 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - meeCompressing word tree...[57;26H[K[57;1H
Compressed 19 of 89 nodes; 70 (78%) remaining
Writing spell file Xtest.utf-8.spl ...
Done!
Estimated runtime memory use: 350 bytes
9 lines yanked
9 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall TestOne('7', '7')[?25l"Xtest.aff" [57;13H[K[57;13H26 lines, 338 characters written
"Xtest.dic" 6 lines, 67 characters written
Reading affix file Xtest.aff ...
Reading dictionary file Xtest.dic ...
line      2, word      0 - meeCompressing word tree...[57;26H[K[57;1H
Compressed 19 of 91 nodes; 72 (79%) remaining
Writing spell file Xtest.utf-8.spl ...
Done!
Estimated runtime memory use: 360 bytes
9 lines yanked
9 more lines
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h"[?25l[27m[23m[m[H[2J[1;1H[41mCOMPOUNDPERMITFLAG[m 432

[41mSFX[m 61003 [41mY[m 1
[41mSFX[m 61003 0 [41mmeat[m .

[41mSFX[m 391 [41mY[m 1
[41mSFX[m 391 0 [41ma1[m .

[41mSFX[m 111 [41mY[m 1
[41mSFX[m 111 0 [41ma[m[34m<e9>[m .

[41mPFX[m 17 [41mY[m 1
[41mPFX[m 17 0 [41mpre[m/432 .
7[41maffend[m

7[41mdicstart[m
1234
[41mmee[m/391,111,9999
bar/17,61003,123
lead/2
tail/123
[41mmiddle[m/77,1
7[41mdicend[m

7[41mgood[m: meea1 meeaé[25;20Hbar prebar barmeat prebarmeat  leadprebar[26;7Hlead tail leadtail  leadmiddletail
[41mbad[m: [41mmee[m [41mmeea2[m [41mprabar[m [41mprobarmaat[m [41mmiddle[m [41mleadmiddle[m [41mmiddletail[m [41mtaillead[28;9Hleadprobar
badend

test[m [41moutput[m:

[41mtest[m 1-1
# [41mfile[m: [41mXtest[m.[41mutf[m-8.[41mspl
Comment
deol
dé[37;3Hôr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the[m [41mend
uk
wrong[m
-------
[41mbad[m
['[41mput[m', '[41muk[m', '[41mOK[m']
[41minputs[m
['[41minput[m', '[41mputs[m', '[41moutputs[m']
[41mcomment[29;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25h" clean up for valgrind[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hdelfunc TestOne[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset spl= enc=latin1[?25l[27m[23m[m[H[2J[1;1HCOMPOUNDPERMITFLAG 432

SFX 61003 Y 1
SFX 61003 0 meat .

SFX 391 Y 1
SFX 391 0 a1 .

SFX 111 Y 1
SFX 111 0 a .

PFX 17 Y 1
PFX 17 0 pre/432 .
7affend

7dicstart
1234
mee/391,111,9999
bar/17,61003,123
lead/2
tail/123
middle/77,1
7dicend

7good: meea1 meeaé bar prebar barmeat prebarmeat  leadprebar[26;7Hlead tail leadtail  leadmiddletail
bad: mee meea2 prabar probarmaat middle leadmiddle middletail taillead[28;9Hleadprobar
badend

test output:

test 1-1
# file: Xtest.utf-8.spl
Comment
deol
déôr
input
OK
output
outputs
outtest
put
puts
test
testen
testn
the end
uk
wrong
-------
bad
['put', 'uk', 'OK']
inputs
['input', 'puts', 'outputs']
comment[29;1H[?12l[?25h[?25l[57;1H:[?12l[?25h"[?25l[29;1H[?12l[?25h[?25l[27m[23m[m[H[2J[1;1HTests for spell checking with 'encoding' set to "utf-8".  vim: set ft=vim :

STARTTEST
:so small.vim
:so mbyte.vim
:"
:" Don't want to depend on the locale from the environment.  The .aff and .dic
:" text is in latin1, the test text is utf-8.
:set enc=latin1
:e!
:set enc=utf-8
:set fenc=
:"
:" Function to test .aff/.dic with list of good and bad words.
:func TestOne(aff, dic)
  set spellfile=
  $put =''
  $put ='test '. a:aff . '-' . a:dic
  " Generate a .spl file from a .dic and .aff file.
  exe '1;/^' . a:aff . 'affstart/+1,/^' . a:aff . 'affend/-1w! Xtest.aff'
  exe '1;/^' . a:dic . 'dicstart/+1,/^' . a:dic . 'dicend/-1w! Xtest.dic'
  mkspell! Xtest Xtest
  " use that spell file
  set spl=Xtest.utf-8.spl spell
  " list all valid words
  spelldump
  %yank
  quit
  $put
  $put ='-------'
  " find all bad words and suggestions for them
  exe '1;/^' . a:aff . 'good:'
  normal 0f:]s
  let prevbad = ''
  while 1
    let [bad, a] = spellbadword()
    if bad == '' || bad == prevbad || bad == 'badend'[38;7Hbreak
    endif
    let prevbad = bad
    let lst = spellsuggest(bad, 3)
    normal mm
    $put =bad
    $put =string(lst)
    normal `m]s
  endwhile
endfunc
:"
:call TestOne('1', '1')
:$put =soundfold('goobledygoook')
:$put =soundfold('kóopërÿnôven')
:$put =soundfold('oeverloos gezwets edale')
:"
:"
:" and now with SAL instead of SOFO items; test automatic reloading
gg:/^affstart_sal/+1,/^affend_sal/-1w! Xtest.aff[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25h/^test output:/,$wq! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 270 lines, 3685 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test59 = test61; then \
#	  if diff test.out test59.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test59.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test59.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test72.failed test.ok test.out X* viminfo
cp test72.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test72.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test72.in" 146 lines, 2110 characters[1;1HTests for undo file.
Since this script is sourced we need to explicitly break changes up in
undo-able pieces.  Do that by setting 'undolevels'.

STARTTEST
:so small.vim
:"
:" Test 'undofile': first a simple one-line change.
:set nocompatible viminfo+=nviminfo visualbell
:set ul=100 undofile nomore
:e! Xtestfile
ggdGithis is one line[34m^[[m:set ul=100
:s/one/ONE/
:set ul=100
:w
:bwipe!
:e Xtestfile
u:.w! test.out
:"
:" Test 'undofile', change in original file fails check
:set noundofile
:e! Xtestfile
:s/line/Line/
:w
:set undofile
:bwipe!
:e Xtestfile
:" TODO: this beeps
u:.w >>test.out
:"
:" Test 'undofile', add 10 lines, delete 6 lines, undo 3
:set undofile
ggdGione
two
three
four
five
six
seven
eight
nine
ten[34m^[[m:set ul=100
3Gdd:set ul=100
dd:set ul=100
dd:set ul=100
dd:set ul=100
dd:set ul=100
dd:set ul=100
:w
:bwipe!
:e Xtestfile
uuu:w >>test.out
:"
:" Test that reading the undofiles when setting undofile works
:set noundofile ul=0
i[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for undo file.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[5;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 135 lines, 1913 characters written[6;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[6;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[27m[23m[m[H[2J[1;1Hkk0ifoo [34m^[[m:set ul=100
dd:set ul=100
ibar [34m^[[m:set ul=100
:X
foobar
foobar
:w!
:bwipe!
:e Xtestfile
foobar
:set key=
/bar
:.w >>test.out
u:.w >>test.out
u:.w >>test.out
u:.w >>test.out
:"
:" With encryption, cryptmethod=blowfish2
:e! Xtestfile
rubbish
:set undofile cm=blowfish2 ff&
ggdGijan
feb
mar
apr
jun[34m^[[m:set ul=100
kk0ifoo [34m^[[m:set ul=100
dd:set ul=100
ibar [34m^[[m:set ul=100
:X
foo2bar
foo2bar
:w!
:bwipe!
:e Xtestfile
foo2bar
:set key=
/bar
:.w >>test.out
u:.w >>test.out
u:.w >>test.out
u:.w >>test.out
:"
:" Rename the undo file so that it gets cleaned up.
:if has("vms")
: call rename("_un_Xtestfile", "Xtestundo")
:else
: call rename(".Xtestfile.un~", "Xtestundo")
:endif
:qa!
ENDTEST

1111 -----
2222 -----

123456789[51;1H[?12l[?25h
[?25l[57;1H:so! Xdotest[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test 'undofile': first a simple one-line change.[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocompatible viminfo+=nviminfo visualbell[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ul=100 undofile nomore[?25l[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtestfile[?25l"Xtestfile" [New File][1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[1m-- INSERT --[m[57;13H[K[57;1H[K[1;1Hthis is one line[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[1;16H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hs/one/ONE/[?25l[1;9HONE[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset ul=100[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xtestfile" [New] 1L, 17C written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe![?25l"test72.in" 146L, 2110C[1;1Hkk0ifoo [34m^[[m:set ul=100
dd:set ul=100[2;14H[K[3;1Hibar [34m^[[m:set ul=100[3;19H[K[4;1H:X[4;3H[K[5;1Hfoobar[5;7H[K[6;1Hfoobar[6;7H[K[7;1H:w![7;4H[K[8;1H:bwipe![8;8H[K[9;1H:e Xtestfile[9;13H[K[10;1Hfoobar[10;7H[K[11;1H:set key=[11;10H[K[12;1H/bar[12;5H[K[13;1H:.w >>test.out[13;15H[K[14;1Hu:.w >>test.out[14;16H[K[15;1Hu:.w >>test.out[15;16H[K[16;1Hu:.w >>test.out[16;16H[K[17;1H:"[17;3H[K[18;1H:" With encryption, cryptmethod=blowfish2[18;42H[K[19;1H:e! Xtestfile[19;14H[K[20;1Hrubbish[20;8H[K[21;1H:set undofile cm=blowfish2 ff&[21;31H[K[22;1HggdGijan[22;9H[K[23;1Hfeb[23;4H[K[24;1Hmar[24;4H[K[25;1Hapr[25;4H[K[26;1Hjun[34m^[[m:set ul=100[26;17H[K[27;1Hkk0ifoo [34m^[[m:set ul=100[27;22H[K[28;1Hdd:set ul=100[28;14H[K[29;1Hibar [34m^[[m:set ul=100[29;19H[K[30;1H:X[30;3H[K[31;1Hfoo2bar[31;8H[K[32;1Hfoo2bar[32;8H[K[33;1H:w![33;4H[K[34;1H:bwipe![34;8H[K[35;1H:e Xtestfile[35;13H[K[36;1Hfoo2bar[36;8H[K[37;1H:set key=[37;10H[K[38;1H/bar[38;5H[K[39;1H:.w >>test.out[39;15H[K[40;1Hu:.w >>test.out[40;16H[K[41;1Hu:.w >>test.out[41;16H[K[42;1Hu:.w >>test.out[42;16H[K[43;1H:"[43;3H[K[44;1H:" Rename the undo file so that it gets cleaned up.[44;52H[K[45;1H:if has("vms")[45;15H[K[46;1H: call rename("_un_Xtestfile", "Xtestundo")[46;44H[K[47;1H:else[47;6H[K[48;1H: call rename(".Xtestfile.un~", "Xtestundo")[48;45H[K[49;1H:endif[49;7H[K[50;1H:qa![50;5H[K[51;1HENDTEST[51;8H[K[52;1H[K[53;1H1111 -----[53;11H[K[54;1H2222 -----[54;11H[K[55;1H[K[56;1H123456789[56;10H[K[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xtestfile[?25l"Xtestfile" 1L, 17C[1;1Hthis is ONE line[1;17H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H1 change; before #2  0 seconds ago[1;9Hone[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w! test.out[?25l"test.out" [57;12H[K[57;12H[New] 1L, 17C written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test 'undofile', change in original file fails check[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noundofile[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtestfile[?25l"Xtestfile" [57;13H[K[57;13H1L, 17C[1;9HONE[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hs/line/Line/[?25l[1;13HL[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xtestfile" 1L, 17C written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset undofile[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe![?25l"test72.in" 146L, 2110C[1;1Hkk0ifoo [34m^[[m:set ul=100
dd:set ul=100[2;14H[K[3;1Hibar [34m^[[m:set ul=100[3;19H[K[4;1H:X[4;3H[K[5;1Hfoobar[5;7H[K[6;1Hfoobar[6;7H[K[7;1H:w![7;4H[K[8;1H:bwipe![8;8H[K[9;1H:e Xtestfile[9;13H[K[10;1Hfoobar[10;7H[K[11;1H:set key=[11;10H[K[12;1H/bar[12;5H[K[13;1H:.w >>test.out[13;15H[K[14;1Hu:.w >>test.out[14;16H[K[15;1Hu:.w >>test.out[15;16H[K[16;1Hu:.w >>test.out[16;16H[K[17;1H:"[17;3H[K[18;1H:" With encryption, cryptmethod=blowfish2[18;42H[K[19;1H:e! Xtestfile[19;14H[K[20;1Hrubbish[20;8H[K[21;1H:set undofile cm=blowfish2 ff&[21;31H[K[22;1HggdGijan[22;9H[K[23;1Hfeb[23;4H[K[24;1Hmar[24;4H[K[25;1Hapr[25;4H[K[26;1Hjun[34m^[[m:set ul=100[26;17H[K[27;1Hkk0ifoo [34m^[[m:set ul=100[27;22H[K[28;1Hdd:set ul=100[28;14H[K[29;1Hibar [34m^[[m:set ul=100[29;19H[K[30;1H:X[30;3H[K[31;1Hfoo2bar[31;8H[K[32;1Hfoo2bar[32;8H[K[33;1H:w![33;4H[K[34;1H:bwipe![34;8H[K[35;1H:e Xtestfile[35;13H[K[36;1Hfoo2bar[36;8H[K[37;1H:set key=[37;10H[K[38;1H/bar[38;5H[K[39;1H:.w >>test.out[39;15H[K[40;1Hu:.w >>test.out[40;16H[K[41;1Hu:.w >>test.out[41;16H[K[42;1Hu:.w >>test.out[42;16H[K[43;1H:"[43;3H[K[44;1H:" Rename the undo file so that it gets cleaned up.[44;52H[K[45;1H:if has("vms")[45;15H[K[46;1H: call rename("_un_Xtestfile", "Xtestundo")[46;44H[K[47;1H:else[47;6H[K[48;1H: call rename(".Xtestfile.un~", "Xtestundo")[48;45H[K[49;1H:endif[49;7H[K[50;1H:qa![50;5H[K[51;1HENDTEST[51;8H[K[52;1H[K[53;1H1111 -----[53;11H[K[54;1H2222 -----[54;11H[K[55;1H[K[56;1H123456789[56;10H[K[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xtestfile[?25l"Xtestfile" 1L, 17C[1;1Hthis is ONE Line[1;17H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h" TODO: this beeps[?25l[1;1H[?12l[?25h[?5h[?5l[?25l[57;1HAlready at oldest change[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1L, 17C appended[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test 'undofile', add 10 lines, delete 6 lines, undo 3[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset undofile[?25l[1;1H[?12l[?25h[?25l[1;1H[K[57;1H--No lines in buffer--[1;1H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;13H[K[57;1H[K[1;1Hone
two[2;4H[K[3;1Hthree[3;6H[K[4;1Hfour[4;5H[K[5;1Hfive[5;5H[K[6;1Hsix[6;4H[K[7;1Hseven[7;6H[K[8;1Height[8;6H[K[9;1Hnine[9;5H[K[10;1Hten[10;4H[K[10;3H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[10;3H[?12l[?25h[3;1H[?25l[3;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[3;1H[?12l[?25h[?25l[3;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[3;1H[?12l[?25h[?25l[3;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[3;1H[?12l[?25h[?25l[3;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[3;1H[?12l[?25h[?25l[3;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[3;1H[?12l[?25h[?25l[3;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw[?25l"Xtestfile" 4L, 17C written[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe![?25l"test72.in" 146L, 2110C[1;1Hkk0ifoo [34m^[[m:set ul=100
dd:set ul=100
ibar [34m^[[m:set ul=100
:X[4;3H[K[5;1Hfoobar[5;7H[K[6;1Hfoobar[6;7H[K[7;1H:w![7;4H[K[8;1H:bwipe![8;8H[K[9;1H:e Xtestfile[9;13H[K[10;1Hfoobar[10;7H[K[11;1H:set key=[11;10H[K[12;1H/bar[12;5H[K[13;1H:.w >>test.out[13;15H[K[14;1Hu:.w >>test.out[14;16H[K[15;1Hu:.w >>test.out[15;16H[K[16;1Hu:.w >>test.out[16;16H[K[17;1H:"[17;3H[K[18;1H:" With encryption, cryptmethod=blowfish2[18;42H[K[19;1H:e! Xtestfile[19;14H[K[20;1Hrubbish[20;8H[K[21;1H:set undofile cm=blowfish2 ff&[21;31H[K[22;1HggdGijan[22;9H[K[23;1Hfeb[23;4H[K[24;1Hmar[24;4H[K[25;1Hapr[25;4H[K[26;1Hjun[34m^[[m:set ul=100[26;17H[K[27;1Hkk0ifoo [34m^[[m:set ul=100[27;22H[K[28;1Hdd:set ul=100[28;14H[K[29;1Hibar [34m^[[m:set ul=100[29;19H[K[30;1H:X[30;3H[K[31;1Hfoo2bar[31;8H[K[32;1Hfoo2bar[32;8H[K[33;1H:w![33;4H[K[34;1H:bwipe![34;8H[K[35;1H:e Xtestfile[35;13H[K[36;1Hfoo2bar[36;8H[K[37;1H:set key=[37;10H[K[38;1H/bar[38;5H[K[39;1H:.w >>test.out[39;15H[K[40;1Hu:.w >>test.out[40;16H[K[41;1Hu:.w >>test.out[41;16H[K[42;1Hu:.w >>test.out[42;16H[K[43;1H:"[43;3H[K[44;1H:" Rename the undo file so that it gets cleaned up.[44;52H[K[45;1H:if has("vms")[45;15H[K[46;1H: call rename("_un_Xtestfile", "Xtestundo")[46;44H[K[47;1H:else[47;6H[K[48;1H: call rename(".Xtestfile.un~", "Xtestundo")[48;45H[K[49;1H:endif[49;7H[K[50;1H:qa![50;5H[K[51;1HENDTEST[51;8H[K[52;1H[K[53;1H1111 -----[53;11H[K[54;1H2222 -----[54;11H[K[55;1H[K[56;1H123456789[56;10H[K[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xtestfile[?25l"Xtestfile" 4L, 17C[1;1Hone[1;4H[K[2;1Htwo[2;4H[K[3;1Hnine[3;6H[K[4;1Hten
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H1 more line; before #7  0 seconds ago[3;56r[3;1H[L[1;57r[3;1Height[57;1H[K[3;1H[?12l[?25h[?25l[57;1H1 more line; before #6  0 seconds ago[3;56r[3;1H[L[1;57r[3;1Hseven[57;1H[K[3;1H[?12l[?25h[?25l[57;1H1 more line; before #5  0 seconds ago[3;56r[3;1H[L[1;57r[3;1Hsix[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H7L, 33C appended[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Test that reading the undofiles when setting undofile works[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset noundofile ul=0[?25l[3;1H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;13H[K[4;56r[4;1H[L[1;57r[3;1H[K[4;1Hsixu[?12l[?25hs[57;1H[K[?25l[4;1H[?12l[?25h[?25l[57;1H1 line less; before #8  0 seconds ago[3;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25he! Xtestfile[?25l"Xtestfile" [57;13H[K[57;13H4L, 17C[3;1Hnine
ten[4;4H[K[5;1H[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [3;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset undofile ul=100[?25l[3;1H[?12l[?25h[?25l[57;1H1 more line; before #7  0 seconds ago[3;56r[3;1H[L[1;57r[3;1Height[57;1H[K[3;1H[?12l[?25h[?25l[57;1H1 more line; before #6  0 seconds ago[3;56r[3;1H[L[1;57r[3;1Hseven[57;1H[K[3;1H[?12l[?25h[?25l[57;1H1 more line; before #5  0 seconds ago[3;56r[3;1H[L[1;57r[3;1Hsix[57;1H[K[3;1H[?12l[?25h[?25l[57;1H1 more line; before #4  0 seconds ago[3;56r[3;1H[L[1;57r[3;1Hfive[57;1H[K[3;1H[?12l[?25h[?25l[57;1H1 more line; before #3  0 seconds ago[3;56r[3;1H[L[1;57r[3;1Hfour[57;1H[K[3;1H[?12l[?25h[?25l[57;1H1 more line; before #2  0 seconds ago[3;56r[3;1H[L[1;57r[3;1Hthree[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H10L, 49C appended[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" And now with encryption, cryptmethod=zip[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtestfile[?25l"Xtestfile" [57;13H[K[57;13H4L, 17C[3;1Hnin[3;5H[K[4;1Hten[4;4H[K[5;1H[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [3;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset undofile cm=zip[?25l[3;1H[?12l[?25h[1;1H[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [m[57;1H--No lines in buffer--[1;1H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;13H[K[57;1H[K[1;1Hmonday
tuesday[2;8H[K[3;1Hwednesday[3;10H[K[4;1Hthursday[4;9H[K[5;1Hfriday[5;7H[K[5;6H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[5;6H[?12l[?25h[4;6H[3;6H[2;6H[?25l[2;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[2;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[2;1H[?12l[?25h[?25l[2;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[2;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[2;1H[?12l[?25h[?25l[2;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[2;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hX[?25lWarning: Using a weak encryption method; see :help 'cm'
Enter encryption key: [?12l[?25h******
[?25lEnter same key again: [?12l[?25h******
[1;1H[3L[?25l[1;1Hmonday
friday
[1m[34m~                                                                                      [m[57;1H[K[2;1H[?12l[?25h[?25l[57;1H:[?12l[?25hw![?25l"Xtestfile" [crypted] 2L, 14C written[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe![?25l"test72.in" 146L, 2110C[1;1Hkk0ifoo [34m^[[m:set ul=100
dd:set ul=100
ibar [34m^[[m:set ul=100[3;19H[K[4;1H:X[4;3H[K[5;1Hfoobar[5;7H[K[6;1Hfoobar[6;7H[K[7;1H:w![7;4H[K[8;1H:bwipe![8;8H[K[9;1H:e Xtestfile[9;13H[K[10;1Hfoobar[10;7H[K[11;1H:set key=[11;10H[K[12;1H/bar[12;5H[K[13;1H:.w >>test.out[13;15H[K[14;1Hu:.w >>test.out[14;16H[K[15;1Hu:.w >>test.out[15;16H[K[16;1Hu:.w >>test.out[16;16H[K[17;1H:"[17;3H[K[18;1H:" With encryption, cryptmethod=blowfish2[18;42H[K[19;1H:e! Xtestfile[19;14H[K[20;1Hrubbish[20;8H[K[21;1H:set undofile cm=blowfish2 ff&[21;31H[K[22;1HggdGijan[22;9H[K[23;1Hfeb[23;4H[K[24;1Hmar[24;4H[K[25;1Hapr[25;4H[K[26;1Hjun[34m^[[m:set ul=100[26;17H[K[27;1Hkk0ifoo [34m^[[m:set ul=100[27;22H[K[28;1Hdd:set ul=100[28;14H[K[29;1Hibar [34m^[[m:set ul=100[29;19H[K[30;1H:X[30;3H[K[31;1Hfoo2bar[31;8H[K[32;1Hfoo2bar[32;8H[K[33;1H:w![33;4H[K[34;1H:bwipe![34;8H[K[35;1H:e Xtestfile[35;13H[K[36;1Hfoo2bar[36;8H[K[37;1H:set key=[37;10H[K[38;1H/bar[38;5H[K[39;1H:.w >>test.out[39;15H[K[40;1Hu:.w >>test.out[40;16H[K[41;1Hu:.w >>test.out[41;16H[K[42;1Hu:.w >>test.out[42;16H[K[43;1H:"[43;3H[K[44;1H:" Rename the undo file so that it gets cleaned up.[44;52H[K[45;1H:if has("vms")[45;15H[K[46;1H: call rename("_un_Xtestfile", "Xtestundo")[46;44H[K[47;1H:else[47;6H[K[48;1H: call rename(".Xtestfile.un~", "Xtestundo")[48;45H[K[49;1H:endif[49;7H[K[50;1H:qa![50;5H[K[51;1HENDTEST[51;8H[K[52;1H[K[53;1H1111 -----[53;11H[K[54;1H2222 -----[54;11H[K[55;1H[K[56;1H123456789[56;10H[K[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xtestfile[?25l"Xtestfile" Need encryption key for "Xtestfile"
Warning: Using a weak encryption method; see :help 'cm'
Enter encryption key: [?12l[?25h******
[?25l"Xtestfile" [crypted] 2L, 14C[1;1H[3L[1;1Hmonday
friday
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H[K[57;1H"Xtestfile" [crypted] 2L, 14C[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset key=[?25l[1;1H[?12l[?25h[?25l[57;1H1 more line; before #11  0 seconds ago[2;56r[2;1H[L[1;57r[2;1Hthursday[57;1H[K[2;1H[?12l[?25h[?25l[57;1H1 more line; before #10  0 seconds ago[2;56r[2;1H[L[1;57r[2;1Hwednesday[57;1H[K[2;1H[?12l[?25h[?25l[57;1H:[?12l[?25hw >>test.out[?25l"test.out" [57;12H[K[57;12H4L, 33C appended[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" With encryption, cryptmethod=blowfish[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtestfile[?25l"Xtestfile" [57;13H[K[57;1HNeed encryption key for "Xtestfile"
Warning: Using a weak encryption method; see :help 'cm'
Enter encryption key: [?12l[?25h*******
[?25l"Xtestfile" [noeol][crypted] 1L, 14C[1;1H[3L[1;1HM[34m| [m-M],[34m^T[m;[34m~E[m
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [m[57;1H[K[57;1H"Xtestfile" [noeol][crypted] 1L, 14C[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset undofile cm=blowfish ff&[?25l[1;1H[?12l[?25h[?25l[1;1H[K[57;1H--No lines in buffer--[57;23H[K[1;1H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;13H[K[57;1H[K[1;1Hjan
feb[2;4H[K[3;1Hmar[3;4H[K[4;1Hapr[4;4H[K[5;1Hjun[5;4H[K[5;3H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[5;3H[?12l[?25h[4;3H[3;3H[?25l[57;1H[1m-- INSERT --[m[57;1H[K[3;1Hfoo mar[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[3;4H[?12l[?25h[?25l[3;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[3;1H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;1H[K[3;1Hbar apr[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[3;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hX[?25lWarning: Using a weak encryption method; see :help 'cm'
Enter encryption key: [?12l[?25h******
[?25lEnter same key again: [?12l[?25h******
[1;1H[3L[?25l[1;1Hjan
feb
bar apr[57;1H[K[3;4H[?12l[?25h[?25l[57;1H:[?12l[?25hw![?25l"Xtestfile" [blowfish] 4L, 20C written[3;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe![?25l"test72.in" 146L, 2110C[1;1Hkk0ifoo [34m^[[m:set ul=100
dd:set ul=100
ibar [34m^[[m:set ul=100
:X[4;3H[K[5;1Hfoobar[5;7H[K[6;1Hfoobar[6;7H[K[7;1H:w![7;4H[K[8;1H:bwipe![8;8H[K[9;1H:e Xtestfile[9;13H[K[10;1Hfoobar[10;7H[K[11;1H:set key=[11;10H[K[12;1H/bar[12;5H[K[13;1H:.w >>test.out[13;15H[K[14;1Hu:.w >>test.out[14;16H[K[15;1Hu:.w >>test.out[15;16H[K[16;1Hu:.w >>test.out[16;16H[K[17;1H:"[17;3H[K[18;1H:" With encryption, cryptmethod=blowfish2[18;42H[K[19;1H:e! Xtestfile[19;14H[K[20;1Hrubbish[20;8H[K[21;1H:set undofile cm=blowfish2 ff&[21;31H[K[22;1HggdGijan[22;9H[K[23;1Hfeb[23;4H[K[24;1Hmar[24;4H[K[25;1Hapr[25;4H[K[26;1Hjun[34m^[[m:set ul=100[26;17H[K[27;1Hkk0ifoo [34m^[[m:set ul=100[27;22H[K[28;1Hdd:set ul=100[28;14H[K[29;1Hibar [34m^[[m:set ul=100[29;19H[K[30;1H:X[30;3H[K[31;1Hfoo2bar[31;8H[K[32;1Hfoo2bar[32;8H[K[33;1H:w![33;4H[K[34;1H:bwipe![34;8H[K[35;1H:e Xtestfile[35;13H[K[36;1Hfoo2bar[36;8H[K[37;1H:set key=[37;10H[K[38;1H/bar[38;5H[K[39;1H:.w >>test.out[39;15H[K[40;1Hu:.w >>test.out[40;16H[K[41;1Hu:.w >>test.out[41;16H[K[42;1Hu:.w >>test.out[42;16H[K[43;1H:"[43;3H[K[44;1H:" Rename the undo file so that it gets cleaned up.[44;52H[K[45;1H:if has("vms")[45;15H[K[46;1H: call rename("_un_Xtestfile", "Xtestundo")[46;44H[K[47;1H:else[47;6H[K[48;1H: call rename(".Xtestfile.un~", "Xtestundo")[48;45H[K[49;1H:endif[49;7H[K[50;1H:qa![50;5H[K[51;1HENDTEST[51;8H[K[52;1H[K[53;1H1111 -----[53;11H[K[54;1H2222 -----[54;11H[K[55;1H[K[56;1H123456789[56;10H[K[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xtestfile[?25l"Xtestfile" Need encryption key for "Xtestfile"
Warning: Using a weak encryption method; see :help 'cm'
Enter encryption key: [?12l[?25h******
[?25l"Xtestfile" [blowfish] 4L, 20C[1;1H[3L[1;1Hjan
feb
bar apr
jun
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H[K[57;1H"Xtestfile" [blowfish] 4L, 20C[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset key=[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hbar[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1L, 8C appended[3;1H[?12l[?25h[?25l[57;1H1 change; before #15  0 seconds ago[3;1Hap[3;5H[K[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1L, 4C appended[3;1H[?12l[?25h[?25l[57;1H1 more line; before #14  0 seconds ago[3;56r[3;1H[L[1;57r[3;1Hfoo mar[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1L, 8C appended[3;1H[?12l[?25h[?25l[57;1H1 change; before #13  0 seconds ago[3;1Hmar[3;5H[K[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1L, 4C appended[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" With encryption, cryptmethod=blowfish2[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtestfile[?25l"Xtestfile" [57;13H[K[57;1HNeed encryption key for "Xtestfile"
Warning: Using a weak encryption method; see :help 'cm'
Enter encryption key: [?12l[?25h*******
[?25l"Xtestfile" [noeol][blowfish] 1L, 20C[1;1H[3L[1;1Hd-BC[34m~_[mW[34m~V[ml-^i[34m~X[mG[34m~V[md9BC
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [m[57;1H[K[57;1H"Xtestfile" [noeol][blowfish] 1L, 20C[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset undofile cm=blowfish2 ff&[?25l[1;1H[?12l[?25h[?25l[1;1H[K[57;1H--No lines in buffer--[57;23H[K[1;1H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;13H[K[57;1H[K[1;1Hjan
feb[2;4H[K[3;1Hmar[3;4H[K[4;1Hapr[4;4H[K[5;1Hjun[5;4H[K[5;3H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[5;3H[?12l[?25h[4;3H[3;3H[?25l[57;1H[1m-- INSERT --[m[57;1H[K[3;1Hfoo mar[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[3;4H[?12l[?25h[?25l[3;56r[56;1H
[1;57r[56;1H[1m[34m~                                                                                      [m[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[3;1H[?12l[?25h[?25l[57;1H[1m-- INSERT --[m[57;1H[K[3;1Hbar apr[?12l[?25h[?25l[57;1H:[?12l[?25hset ul=100[?25l[3;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hX[?25l[57;1H[K[57;1HEnter encryption key: [?12l[?25h*******
[?25lEnter same key again: [?12l[?25h*******
[1;1H[2L[?25l[1;1Hjan
feb[57;1H[K[3;4H[?12l[?25h[?25l[57;1H:[?12l[?25hw![?25l"Xtestfile" [blowfish2] 4L, 20C written[3;4H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hbwipe![?25l"test72.in" 146L, 2110C[1;1Hkk0ifoo [34m^[[m:set ul=100
dd:set ul=100
ibar [34m^[[m:set ul=100
:X[4;3H[K[5;1Hfoobar[5;7H[K[6;1Hfoobar[6;7H[K[7;1H:w![7;4H[K[8;1H:bwipe![8;8H[K[9;1H:e Xtestfile[9;13H[K[10;1Hfoobar[10;7H[K[11;1H:set key=[11;10H[K[12;1H/bar[12;5H[K[13;1H:.w >>test.out[13;15H[K[14;1Hu:.w >>test.out[14;16H[K[15;1Hu:.w >>test.out[15;16H[K[16;1Hu:.w >>test.out[16;16H[K[17;1H:"[17;3H[K[18;1H:" With encryption, cryptmethod=blowfish2[18;42H[K[19;1H:e! Xtestfile[19;14H[K[20;1Hrubbish[20;8H[K[21;1H:set undofile cm=blowfish2 ff&[21;31H[K[22;1HggdGijan[22;9H[K[23;1Hfeb[23;4H[K[24;1Hmar[24;4H[K[25;1Hapr[25;4H[K[26;1Hjun[34m^[[m:set ul=100[26;17H[K[27;1Hkk0ifoo [34m^[[m:set ul=100[27;22H[K[28;1Hdd:set ul=100[28;14H[K[29;1Hibar [34m^[[m:set ul=100[29;19H[K[30;1H:X[30;3H[K[31;1Hfoo2bar[31;8H[K[32;1Hfoo2bar[32;8H[K[33;1H:w![33;4H[K[34;1H:bwipe![34;8H[K[35;1H:e Xtestfile[35;13H[K[36;1Hfoo2bar[36;8H[K[37;1H:set key=[37;10H[K[38;1H/bar[38;5H[K[39;1H:.w >>test.out[39;15H[K[40;1Hu:.w >>test.out[40;16H[K[41;1Hu:.w >>test.out[41;16H[K[42;1Hu:.w >>test.out[42;16H[K[43;1H:"[43;3H[K[44;1H:" Rename the undo file so that it gets cleaned up.[44;52H[K[45;1H:if has("vms")[45;15H[K[46;1H: call rename("_un_Xtestfile", "Xtestundo")[46;44H[K[47;1H:else[47;6H[K[48;1H: call rename(".Xtestfile.un~", "Xtestundo")[48;45H[K[49;1H:endif[49;7H[K[50;1H:qa![50;5H[K[51;1HENDTEST[51;8H[K[52;1H[K[53;1H1111 -----[53;11H[K[54;1H2222 -----[54;11H[K[55;1H[K[56;1H123456789[56;10H[K[52;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he Xtestfile[?25l"Xtestfile" Need encryption key for "Xtestfile"
Enter encryption key: [?12l[?25h*******
[?25l"Xtestfile" [blowfish2] 4L, 20C[1;1H[2L[1;1Hjan
feb
bar apr[3;8H[K[4;1Hjun
[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H[K[57;1H"Xtestfile" [blowfish2] 4L, 20C[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset key=[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H/[?12l[?25hbar[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1L, 8C appended[3;1H[?12l[?25h[?25l[57;1H1 change; before #19  0 seconds ago[3;1Hap[3;5H[K[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1L, 4C appended[3;1H[?12l[?25h[?25l[57;1H1 more line; before #18  0 seconds ago[3;56r[3;1H[L[1;57r[3;1Hfoo mar[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1L, 8C appended[3;1H[?12l[?25h[?25l[57;1H1 change; before #17  0 seconds ago[3;1Hmar[3;5H[K[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h.w >>test.out[?25l"test.out" [57;12H[K[57;12H1L, 4C appended[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Rename the undo file so that it gets cleaned up.[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif has("vms")[?25l
:  [?12l[?25h: call rename("_un_Xtestfile", "Xtestundo")
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: call rename(".Xtestfile.un~", "Xtestundo")
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1Hjan
feb
mar
apr[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test72 = test61; then \
#	  if diff test.out test72.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test72.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test72.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test78.failed test.ok test.out X* viminfo
cp test78.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test78.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test78.in" 46 lines, 1464 characters[1;1HInserts 10000 lines with text to fill the swap file with two levels of pointer
blocks.  Then recovers from the swap file and checks all text is restored.

We need about 10000 lines of 100 characters to get two levels of pointer
blocks.

STARTTEST
:so small.vim
:set nocp fileformat=unix undolevels=-1 viminfo+=nviminfo
:e! Xtest
ggdG
:let text = "\tabcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ01234567899[13;1Habcdefghijklmnoparstuvwxyz0123456789"
:let i = 1
:let linecount = 10000
:while i <= linecount | call append(i - 1, i . text) | let i += 1 | endwhile
:preserve
:" get the name of the swap file
:redir => swapname
:swapname
:redir END
:let swapname = substitute(swapname, '[[:blank:][:cntrl:]]*\(.\{-}\)[[:blank:][:cntrl:]][23;1H]*$', '\1', '')
:" make a copy of the swap file in Xswap
:set bin
:exe 'sp ' . swapname
:w! Xswap
:echo swapname
:set nobin
:new
:only!
:bwipe! Xtest
:call rename('Xswap', swapname)
:recover Xtest
:call delete(swapname)
:new
:call append(0, 'recovery start')
:wincmd w
:let linedollar = line('$')
:if linedollar < linecount | exe 'wincmd w' | call append(line('$'), "expected " . linee[41;1Hcount . " lines but found only " . linedollar) | exe 'wincmd w' | let linecount = linedd[42;1Hollar | endif
:let i = 1
:while i <= linecount | if getline(i) != i . text | exe 'wincmd w' | call append(line(''[45;1H$'), i . ' differs') | exe 'wincmd w' | endif | let i += 1 | endwhile
:q!
:call append(line('$'), 'recovery end')
:w! test.out
:qa!
ENDTEST

[1m[34m~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HInserts 10000 lines with text to fill the swap file with two levels of pointer[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[7;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 37 lines, 1208 characters written[8;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[8;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[50;1H[?12l[?25h
[?25l[57;1H[K[57;1H:so! Xdotest[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nocp fileformat=unix undolevels=-1 viminfo+=nviminfo[?25l[51;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25he! Xtest[?25l"Xtest" [New File][1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet text = "\tabcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ012345678
[56;87H9[57;1Habcdefghijklmnoparstuvwxyz0123456789"[?25l[1;1H[L[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hlet i = 1[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet linecount = 10000[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwhile i <= linecount | call append(i - 1, i . text) | let i += 1 | endwhile[?25l[1;1H9974    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[2;1Hhijklmnoparstuvwxyz0123456789[2;30H[K[3;1H9975    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[4;1Hhijklmnoparstuvwxyz0123456789[4;30H[K[5;1H9976    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[6;1Hhijklmnoparstuvwxyz0123456789[6;30H[K[7;1H9977    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[8;1Hhijklmnoparstuvwxyz0123456789[8;30H[K[9;1H9978    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[10;1Hhijklmnoparstuvwxyz0123456789[10;30H[K[11;1H9979    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[12;1Hhijklmnoparstuvwxyz0123456789[12;30H[K[13;1H9980    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[14;1Hhijklmnoparstuvwxyz0123456789[14;30H[K[15;1H9981    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[16;1Hhijklmnoparstuvwxyz0123456789[16;30H[K[17;1H9982    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[18;1Hhijklmnoparstuvwxyz0123456789[18;30H[K[19;1H9983    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[20;1Hhijklmnoparstuvwxyz0123456789[20;30H[K[21;1H9984    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[22;1Hhijklmnoparstuvwxyz0123456789[22;30H[K[23;1H9985    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[24;1Hhijklmnoparstuvwxyz0123456789[24;30H[K[25;1H9986    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[26;1Hhijklmnoparstuvwxyz0123456789[26;30H[K[27;1H9987    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[28;1Hhijklmnoparstuvwxyz0123456789[28;30H[K[29;1H9988    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[30;1Hhijklmnoparstuvwxyz0123456789[30;30H[K[31;1H9989    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[32;1Hhijklmnoparstuvwxyz0123456789[32;30H[K[33;1H9990    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[34;1Hhijklmnoparstuvwxyz0123456789[34;30H[K[35;1H9991    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[36;1Hhijklmnoparstuvwxyz0123456789[36;30H[K[37;1H9992    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[38;1Hhijklmnoparstuvwxyz0123456789[38;30H[K[39;1H9993    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[40;1Hhijklmnoparstuvwxyz0123456789[40;30H[K[41;1H9994    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[42;1Hhijklmnoparstuvwxyz0123456789[42;30H[K[43;1H9995    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[44;1Hhijklmnoparstuvwxyz0123456789[44;30H[K[45;1H9996    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[46;1Hhijklmnoparstuvwxyz0123456789[46;30H[K[47;1H9997    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[48;1Hhijklmnoparstuvwxyz0123456789[48;30H[K[49;1H9998    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[50;1Hhijklmnoparstuvwxyz0123456789[50;30H[K[51;1H9999    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[52;1Hhijklmnoparstuvwxyz0123456789[52;30H[K[53;1H10000   abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[54;1Hhijklmnoparstuvwxyz0123456789[54;30H[K[55;1H[K[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hpreserve[?25lFile preserved[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" get the name of the swap file[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir => swapname[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hswapname[?25l.Xtest.swp[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir END[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet swapname = substitute(swapname, '[[:blank:][:cntrl:]]*\(.\{-}\)[[:blank:][:cntrl:
[56;87H][57;1H]*$', '\1', '')[?25l[1;1H[L[1;1H9974    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[2;1Hh[57;1H[K[55;1H[?12l[?25h[?25l

:[?12l[?25h" make a copy of the swap file in Xswap[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset bin[?25l[55;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hexe 'sp ' . swapname[?25l".Xtest.swp"[57;14H[K[57;14H[noeol] 609L, 1228800C[1;1Hb0VIM 8.0[34m^@^@^@^@^P^@^@^@^@^@^@^@^@^@^@[mZ[34m^@^@[mroot[34m^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[2;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@[mfrodo7a[34m^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[3;1H^@^@^@^@^@^@^@^@^@^@[m/sources/vim80/src/testdir/Xtest[34m^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[4;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[5;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[6;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[7;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[8;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[9;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[10;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[11;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[12;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[13;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[14;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[15;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[16;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[17;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[18;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[19;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[20;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[21;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[22;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[23;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^M[mU3210[34m^@^@^@^@[m#"! [34m^S^R[mU[34m^@^@^@^@^@^@^@^@^@^^[24;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[25;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[26;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[27;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^[m[28;1H[1m[7m.Xtest.swp                                                                             [m[56;1H[7mXtest [+]                                                                              [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hw! Xswap[?25l"Xswap" [57;9H[K[57;9H[New][noeol] 609L, 1228800C written[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hecho swapname[?25l.Xtest.sw[57;11H[K[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nobin[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [m[19;1H[1m[7m[No Name]                                                                              [m[20;1Hb0VIM 8.0[34m^@^@^@^@^P^@^@^@^@^@^@^@^@^@^@[mZ[34m^@^@[mroot[34m^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[21;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@[mfrodo7a[34m^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[22;1H^@^@^@^@^@^@^@^@^@^@[m/sources/vim80/src/testdir/Xtest[34m^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[23;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[24;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[25;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[26;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[27;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[28;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[29;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[30;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[31;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[32;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[33;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[34;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[35;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@[36;1H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^^[37;1H@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@[m[38;1H[7m.Xtest.swp                                                                             [m[39;1H9993    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[40;1Hhijklmnoparstuvwxyz0123456789
9994    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[42;1Hhijklmnoparstuvwxyz0123456789
9995    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[44;1Hhijklmnoparstuvwxyz0123456789
9996    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[46;1Hhijklmnoparstuvwxyz0123456789
9997    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[48;1Hhijklmnoparstuvwxyz0123456789
9998    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[50;1Hhijklmnoparstuvwxyz0123456789
9999    abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[52;1Hhijklmnoparstuvwxyz0123456789
10000   abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[54;1Hhijklmnoparstuvwxyz0123456789

[7mXtest [+]                                                                              [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25honly![?25l[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [1;1H[?12l[?25h[?25l[57;1H[m:[?12l[?25hbwipe! Xtest[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall rename('Xswap', swapname)[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hrecover Xtest[?25lUsing swap file ".Xtest.swp"
Original file "/sources/vim80/src/testdir/Xtest"
[56;1H"/sources/vim80/src/testdir/Xtest" [New File][56;46H[K[57;1HRecovery completed. You should check if everything is OK.
(You might want to write out this file under another name
and run diff with the original file to check for changes)
You may want to delete the .swp file now.


[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall delete(swapname)[?25l[1;1H[8L[1;1H1[7Cabcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[2;1Hhijklmnoparstuvwxyz0123456789
2[7Cabcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[4;1Hhijklmnoparstuvwxyz0123456789
3[7Cabcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[6;1Hhijklmnoparstuvwxyz0123456789
4[7Cabcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[8;1Hhijklmnoparstuvwxyz0123456789
5       abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[10;1Hhijklmnoparstuvwxyz0123456789[10;30H[K[11;1H6       abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[12;1Hhijklmnoparstuvwxyz0123456789[12;30H[K[13;1H7       abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[14;1Hhijklmnoparstuvwxyz0123456789[14;30H[K[15;1H8       abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[16;1Hhijklmnoparstuvwxyz0123456789[16;30H[K[17;1H9       abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[18;1Hhijklmnoparstuvwxyz0123456789[18;30H[K[19;1H10      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[20;1Hhijklmnoparstuvwxyz0123456789[20;30H[K[21;1H11      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[22;1Hhijklmnoparstuvwxyz0123456789[22;30H[K[23;1H12      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[24;1Hhijklmnoparstuvwxyz0123456789[24;30H[K[25;1H13      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[26;1Hhijklmnoparstuvwxyz0123456789[26;30H[K[27;1H14      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[28;1Hhijklmnoparstuvwxyz0123456789[28;30H[K[29;1H15      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[30;1Hhijklmnoparstuvwxyz0123456789[30;30H[K[31;1H16      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[32;1Hhijklmnoparstuvwxyz0123456789[32;30H[K[33;1H17      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[34;1Hhijklmnoparstuvwxyz0123456789[34;30H[K[35;1H18      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[36;1Hhijklmnoparstuvwxyz0123456789[36;30H[K[37;1H19      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[38;1Hhijklmnoparstuvwxyz0123456789[38;30H[K[39;1H20      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[40;1Hhijklmnoparstuvwxyz0123456789[40;30H[K[41;1H21      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[42;1Hhijklmnoparstuvwxyz0123456789[42;30H[K[43;1H22      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[44;1Hhijklmnoparstuvwxyz0123456789[44;30H[K[45;1H23      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[46;1Hhijklmnoparstuvwxyz0123456789[46;30H[K[47;1H24      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[48;1Hhijklmnoparstuvwxyz0123456789[48;30H[K[49;1H25      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[50;1Hhijklmnoparstuvwxyz0123456789[50;30H[K[51;1H26      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[52;1Hhijklmnoparstuvwxyz0123456789[52;30H[K[53;1H27      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[54;1Hhijklmnoparstuvwxyz0123456789[54;30H[K[55;1H28      abcdefghijklmnoparstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefgg[56;1Hhijklmnoparstuvwxyz0123456789[56;30H[K[57;1H[K[1;1H[?12l[?25h[?25l[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;2H [84Cgg[30;1Hh
2 [84Cgg[32;1Hh
3 [84Cgg[34;1Hh
4 [84Cgg[36;1Hh
5 [84Cgg[38;1Hh
6 [84Cgg[40;1Hh
7 [84Cgg[42;1Hh
8 [84Cgg[44;1Hh
9 [84Cgg[46;1Hh
10[84Cgg[48;1Hh
11[84Cgg[50;1Hh
12[84Cgg[52;1Hh
13[84Cgg[54;1Hh
14[1m[34m@                                                                                      [m[56;1H[7mXtest [+]                                                                              [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall append(0, 'recovery start')[?25l[1;27r[1;1H[L[1;57r[1;1Hrecovery start[28;11H[1m[7m[+][m[57;1H[K[2;1H[?12l[?25h[?25l[57;1H:[?12l[?25hwincmd w[?25l[28;1H[7m[No Name] [+][m[1m[7m [m[7m                                                                          [m[56;1H[1m[7mXtest [+]                                                                              [29;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hlet linedollar = line('$')[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif linedollar < linecount | exe 'wincmd w' | call append(line('$'), "expected " . lin
[56;87He[57;1Hcount . " lines but found only " . linedollar) | exe 'wincmd w' | let linecount = line
[56;87Hd[57;1Hollar | endif[?25l[1;1H[2L[1;1Hrecovery start[57;1H[K[29;1H[?12l[?25h[?25l[57;1H:[?12l[?25hlet i = 1[?25l[29;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwhile i <= linecount | if getline(i) != i . text | exe 'wincmd w' | call append(line(
[56;87H'[57;1H$'), i . ' differs') | exe 'wincmd w' | endif | let i += 1 | endwhile[?25l[1;1H[L[1;1Hrecovery start[57;1H[K[29;1H[?12l[?25h[?25l[57;1H:[?12l[?25hq![?25l[28;1H[1m[34m~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~ 
~                                                                                      [2;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hcall append(line('$'), 'recovery end')[?25l[3;1Hrecovery end[3;13H[K[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hw! test.out[?25l"test.out" [57;12H[K[57;12H[New] 3L, 29C written[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hqa![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test78 = test61; then \
#	  if diff test.out test78.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test78.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test78.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test83.failed test.ok test.out X* viminfo
cp test83.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test83.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test83.in" 76 lines, 1273 characters[1;1HTests for tag search with !_TAG_FILE_ENCODING.

STARTTEST
:so mbyte.vim
:set enc=utf8
:if !has('iconv') || iconv("\x82\x60", "cp932", "utf-8") != "\uff21"
: e! test.ok
: w! test.out
: qa!
:endif
:
:/^text for tags1$/,/^text for tags1$/+1w! Xtags1.txt
:/^text for tags2$/,/^text for tags2$/+1w! Xtags2.txt
:/^text for tags3$/,/^text for tags3$/+1w! Xtags3.txt
:/^tags1$/+1,/^tags1-end$/-1w! Xtags1
:
ggdG:
:
:call setline('.', 'Results of test83')
:
:" case1:
:new
:set tags=Xtags1
:let v:errmsg = ''
:tag abcdefghijklmnopqrs
:if v:errmsg =~ 'E426:' || getline('.') != 'abcdefghijklmnopqrs'
: close
: put ='case1: failed'
:else
: close
: put ='case1: ok'
:endif
:
:" case2:
:new
:set tags=test83-tags2
:let v:errmsg = ''
:tag /.ＢＣ
:if v:errmsg =~ 'E426:' || getline('.') != 'ＡＢＣ'
: close
: put ='case2: failed'
:else
: close
: put ='case2: ok'
:endif
:
:" case3:
:new
:set tags=test83-tags3
:let v:errmsg = ''
:tag abc50
:if v:errmsg =~ 'E426:' || getline('.') != 'ＡＢＣ'
: close
: put ='case3: failed'
:else
: close[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1HTests for tag search with !_TAG_FILE_ENCODING.[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[3;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 58 lines, 1021 characters written[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[4;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[6M[1;57r[51;1H: put ='case3: ok'
:endif
:close
:
:wq! test.out
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso mbyte.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset enc=utf8[?25l[27m[23m[m[H[2J[1;1H: w! test.out
: qa!
:endif
:
:/^text for tags1$/,/^text for tags1$/+1w! Xtags1.txt
:/^text for tags2$/,/^text for tags2$/+1w! Xtags2.txt
:/^text for tags3$/,/^text for tags3$/+1w! Xtags3.txt
:/^tags1$/+1,/^tags1-end$/-1w! Xtags1
:
ggdG:
:
:call setline('.', 'Results of test83')
:
:" case1:
:new
:set tags=Xtags1
:let v:errmsg = ''
:tag abcdefghijklmnopqrs
:if v:errmsg =~ 'E426:' || getline('.') != 'abcdefghijklmnopqrs'
: close
: put ='case1: failed'
:else
: close
: put ='case1: ok'
:endif
:
:" case2:
:new
:set tags=test83-tags2
:let v:errmsg = ''
:tag /.ＢＣ
:if v:errmsg =~ 'E426:' || getline('.') != 'ＡＢＣ'
: close
: put ='case2: failed'
:else
: close
: put ='case2: ok'
:endif
:
:" case3:
:new
:set tags=test83-tags3
:let v:errmsg = ''
:tag abc50
:if v:errmsg =~ 'E426:' || getline('.') != 'ＡＢＣ'
: close
: put ='case3: failed'
:else
: close
: put ='case3: ok'
:endif
:close
:
:wq! test.out
ENDTEST
[?12l[?25h[?25l
:[?12l[?25hif !has('iconv') || iconv("\x82\x60", "cp932", "utf-8") != "\uff21"[?25l
:  [?12l[?25h: e! test.ok
[?25l:  [?12l[?25h: w! test.out
[?25l:  [?12l[?25h: qa!
[?25l:  [?12l[?25h:endif[1;1H[4L[?25l[1;1H: w! test.out
: qa!
:endif
:[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^text for tags1$/,/^text for tags1$/+1w! Xtags1.txt[?25l"Xtags1.txt" [57;14H[K[57;14H[New File] 2 lines, 35 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^text for tags2$/,/^text for tags2$/+1w! Xtags2.txt[?25l"Xtags2.txt" [57;14H[K[57;14H[New File] 2 lines, 25 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^text for tags3$/,/^text for tags3$/+1w! Xtags3.txt[?25l"Xtags3.txt" [57;14H[K[57;14H[New File] 2 lines, 25 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^tags1$/+1,/^tags1-end$/-1w! Xtags1[?25l"Xtags1" [57;10H[K[57;10H[New File] 2 lines, 81 characters written[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[56;1H[?12l[?25h[?25l[1;56r[1;1H[7L[1;57r[1;1HTests for tag search with !_TAG_FILE_ENCODING.

STARTTEST
:so mbyte.vim
:set enc=utf8
:if !has('iconv') || iconv("\x82\x60", "cp932", "utf-8") != "\uff21"
: e! test.ok[57;1H[K[1;1H[?12l[?25h[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;1H--No lines in buffer--[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcall setline('.', 'Results of test83')[?25l[1;1HResults of test83[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" case1:[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[28;1H[1m[7m[No Name]                                                                              [m[29;1HResults of test83[29;18H[K[56;1H[7mtest83.in [+]                                                                          [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset tags=Xtags1[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet v:errmsg = ''[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htag abcdefghijklmnopqrs[?25l"Xtags1.txt" [57;14H[K[57;14H2 lines, 35 characters[1;1Htext for tags1
abcdefghijklmnopqrs[2;20H[K[28;1H[1m[7mXtags1.txt[2;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hif v:errmsg =~ 'E426:' || getline('.') != 'abcdefghijklmnopqrs'[?25l
:  [?12l[?25h: close
[?25l:  [?12l[?25h: put ='case1: failed'
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: close
[?25l:  [?12l[?25h: put ='case1: ok'
[?25l:  [?12l[?25h:endif[1;1H[6L[?25l[1;1HResults of test83
case1: ok
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [56;1H~                                                                                      [m[57;1H[K[2;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" case2:[?25l[2;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;1HResults of test83[29;18H[K[30;1Hcase1: ok[30;10H[K[56;1H[7mtest83.in [+]                                                                          [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset tags=test83-tags2[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet v:errmsg = ''[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htag /.ＢＣ[?25l"Xtags2.txt" 2 lines, 25 characters[1;1Htext for tags2
ＡＢＣ[2;7H[K[28;1H[1m[7mXtags2.txt[2;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hif v:errmsg =~ 'E426:' || getline('.') != 'ＡＢＣ'[?25l
:  [?12l[?25h: close
[?25l:  [?12l[?25h: put ='case2: failed'
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: close
[?25l:  [?12l[?25h: put ='case2: ok'
[?25l:  [?12l[?25h:endif[1;1H[6L[?25l[1;1HResults of test83
case1: ok
case2: ok
[1m[34m~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [56;1H~                                                                                      [m[57;1H[K[3;1H[?12l[?25h[?25l[57;1H:[?12l[?25h[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" case3:[?25l[3;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hnew[?25l[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;1Hcase1: ok[29;10H[K[30;1Hcase2: ok[30;10H[K[56;1H[7mtest83.in [+]                                                                          [1;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hset tags=test83-tags3[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet v:errmsg = ''[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25htag abc50[?25l"Xtags3.txt" 2 lines, 25 characters[1;1Htext for tags3
ＡＢＣ[2;7H[K[28;1H[1m[7mXtags3.txt[2;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hif v:errmsg =~ 'E426:' || getline('.') != 'ＡＢＣ'[?25l
:  [?12l[?25h: close
[?25l:  [?12l[?25h: put ='case3: failed'
[?25l:  [?12l[?25h:else
[?25l:  [?12l[?25h: close
[?25l:  [?12l[?25h: put ='case3: ok'
[?25l:  [?12l[?25h:endif[1;1H[6L[?25l[1;1HResults of test83
case1: ok
case2: ok
case3: ok
[1m[34m~                                                                                      [6;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [56;1H~                                                                                      [m[57;1H[K[4;1H[?12l[?25h[?25l[57;1H:[?12l[?25hclose[?25l[1m[37m[41mE37: No write since last change (add ! to override)[4;1H[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25h[?25l[4;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hwq! test.out[?25l"test.out" [57;12H[K[57;12H[New File] 4 lines, 48 characters written
[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test83 = test61; then \
#	  if diff test.out test83.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test83.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test83.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
rm -rf test89.failed test.ok test.out X* viminfo
cp test89.ok test.ok
# Sleep a moment to avoid that the xterm title is messed up.
# 200 msec is sufficient, but only modern sleep supports a fraction of
# a second, fall back to a second if it fails.
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test89.in
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test89.in" 71 lines, 1514 characters[1;1H- Some tests for setting 'number' and 'relativenumber'
  This is not all that useful now that the options are no longer reset when
  setting the other.
- Some tests for findfile() function

STARTTEST
:so small.vim
:set hidden nocp nu rnu viminfo+=nviminfo
:redir @a | set nu? rnu? | redir END
:e! xx
:redir @b | set nu? rnu? | redir END
:e! #
:$put ='results:'
:$put a
:$put b
:"
:set nonu nornu
:setglobal nu
:setlocal rnu
:redir @c | setglobal nu? | redir END
:set nonu nornu
:setglobal rnu
:setlocal nu
:redir @d | setglobal rnu? | redir END
:$put =':setlocal must NOT reset the other global value'
:$put c
:$put d
:"
:set nonu nornu
:setglobal nu
:setglobal rnu
:redir @e | setglobal nu? | redir END
:set nonu nornu
:setglobal rnu
:setglobal nu
:redir @f | setglobal rnu? | redir END
:$put =':setglobal MUST reset the other global value'
:$put e
:$put f
:"
:set nonu nornu
:set nu
:set rnu
:redir @g | setglobal nu? | redir END
:set nonu nornu
:set rnu
:set nu
:redir @h | setglobal rnu? | redir END
:$put =':set MUST reset the other global value'
:$put g
:$put h
:"
:let cwd=getcwd()
:cd ..
:" Tests may be run from a shadow directory, so an extra cd needs to be done to
:" get above src/[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset cp[?25l[1;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hmap dotest /^STARTTEST^[34m^M[mj:set ff=unix cpo-=A^[34m^M[m:.,/ENDTEST/-1w! Xdotest^[34m^M[m:set ff& cpo+
[56;87H=[57;1HA^[34m^M[mnj0:so! Xdotest^[34m^M[mdotest[?25l[1;1H[L[1;1H- Some tests for setting 'number' and 'relativenumber'[57;1H[K[1;1H[?12l[?25h[?25l[57;1H/^STARTTEST[6;1H[?12l[?25h
[?25l[57;1H[K[57;1H:set ff=unix cpo-=A[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:.,/ENDTEST/-1w! Xdotest"Xdotest" [57;11H[K[57;11H[New File] 63 lines, 1305 characters written[7;1H[?12l[?25h[?25l[57;1H[K[57;1H:set ff& cpo+=A[7;1H[?12l[?25h[?25l[57;1H/ENDTEST[57;10H[K[57;1H[1;56r[1;1H[14M[1;57r[43;1H:if fnamemodify(getcwd(), ':t') != 'src' | cd ../.. | else | cd .. | endif
:$put =''
:$put ='Testing findfile'
:$put =''
:set ssl
:$put =findfile('test19.in','src/test*')
:exe "cd" cwd
:cd ..
:$put =findfile('test19.in','test*')
:$put =findfile('test19.in','testdir')
:exe "cd" cwd
:/^results/,$w! test.out
:q!
ENDTEST[57;1H[K[56;1H[?12l[?25h[?25l[1;56r[56;1H
[1;57r[56;1H[?12l[?25h[?25l
:so! Xdotest[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hso small.vim[?25l[56;1H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset hidden nocp nu rnu viminfo+=nviminfo[?25l[1;1H[33m 55 [m:"
[33m 54 [m:set nonu nornu
[33m 53 [m:setglobal nu
[33m 52 [m:setlocal rnu
[33m 51 [m:redir @c | setglobal nu? | redir END
[33m 50 [m:set nonu nornu
[33m 49 [m:setglobal rnu
[33m 48 [m:setlocal nu
[33m 47 [m:redir @d | setglobal rnu? | redir END
[33m 46 [m:$put =':setlocal must NOT reset the other global value'
[33m 45 [m:$put c
[33m 44 [m:$put d
[33m 43 [m:"
[33m 42 [m:set nonu nornu
[33m 41 [m:setglobal nu
[33m 40 [m:setglobal rnu
[33m 39 [m:redir @e | setglobal nu? | redir END
[33m 38 [m:set nonu nornu
[33m 37 [m:setglobal rnu
[33m 36 [m:setglobal nu
[33m 35 [m:redir @f | setglobal rnu? | redir END
[33m 34 [m:$put =':setglobal MUST reset the other global value'
[33m 33 [m:$put e
[33m 32 [m:$put f
[33m 31 [m:"
[33m 30 [m:set nonu nornu
[33m 29 [m:set nu
[33m 28 [m:set rnu
[33m 27 [m:redir @g | setglobal nu? | redir END
[33m 26 [m:set nonu nornu
[33m 25 [m:set rnu
[33m 24 [m:set nu
[33m 23 [m:redir @h | setglobal rnu? | redir END
[33m 22 [m:$put =':set MUST reset the other global value'
[33m 21 [m:$put g
[33m 20 [m:$put h
[33m 19 [m:"
[33m 18 [m:let cwd=getcwd()
[33m 17 [m:cd ..
[33m 16 [m:" Tests may be run from a shadow directory, so an extra cd needs to be done to
[33m 15 [m:" get above src/
[33m 14 [m:if fnamemodify(getcwd(), ':t') != 'src' | cd ../.. | else | cd .. | endif
[33m 13 [m:$put =''
[33m 12 [m:$put ='Testing findfile'
[33m 11 [m:$put =''
[33m 10 [m:set ssl
[33m  9 [m:$put =findfile('test19.in','src/test*')
[33m  8 [m:exe "cd" cwd
[33m  7 [m:cd ..
[33m  6 [m:$put =findfile('test19.in','test*')
[33m  5 [m:$put =findfile('test19.in','testdir')
[33m  4 [m:exe "cd" cwd
[33m  3 [m:/^results/,$w! test.out
[33m  2 [m:q!
[33m  1 [mENDTEST
[33m71  [?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25hredir @a | set nu? rnu? | redir END[?25l[57;1H[K[57;1H  number
  relativenumber
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25he! xx[?25l"xx" [New File][1;1H[2L[1;1H[33m1   [m
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [56;1H~                                                                                      [m[57;3H[K[1;5H[?12l[?25h[?25l[57;1H:[?12l[?25hredir @b | set nu? rnu? | redir END[?25l[57;1H[K[57;1H  number
  relativenumber
[32mPress ENTER or type command to continue[?12l[?25h[?25l[m[57;1H[K[57;1H:[?12l[?25he! #[?25l"test89.in" line 71 of 71 --100%-- col 1[1;1H[2L[1;1H[33m 55 [m:"
[33m 54 [m:set nonu nornu
[33m 53 [m:setglobal nu[3;18H[K[4;1H[33m 52 [m:setlocal rnu[4;18H[K[5;1H[33m 51 [m:redir @c | setglobal nu? | redir END[5;42H[K[6;1H[33m 50 [m:set nonu nornu[6;20H[K[7;1H[33m 49 [m:setglobal rnu[7;19H[K[8;1H[33m 48 [m:setlocal nu[8;17H[K[9;1H[33m 47 [m:redir @d | setglobal rnu? | redir END[9;43H[K[10;1H[33m 46 [m:$put =':setlocal must NOT reset the other global value'[10;61H[K[11;1H[33m 45 [m:$put c[11;12H[K[12;1H[33m 44 [m:$put d[12;12H[K[13;1H[33m 43 [m:"[13;7H[K[14;1H[33m 42 [m:set nonu nornu[14;20H[K[15;1H[33m 41 [m:setglobal nu[15;18H[K[16;1H[33m 40 [m:setglobal rnu[16;19H[K[17;1H[33m 39 [m:redir @e | setglobal nu? | redir END[17;42H[K[18;1H[33m 38 [m:set nonu nornu[18;20H[K[19;1H[33m 37 [m:setglobal rnu[19;19H[K[20;1H[33m 36 [m:setglobal nu[20;18H[K[21;1H[33m 35 [m:redir @f | setglobal rnu? | redir END[21;43H[K[22;1H[33m 34 [m:$put =':setglobal MUST reset the other global value'[22;58H[K[23;1H[33m 33 [m:$put e[23;12H[K[24;1H[33m 32 [m:$put f[24;12H[K[25;1H[33m 31 [m:"[25;7H[K[26;1H[33m 30 [m:set nonu nornu[26;20H[K[27;1H[33m 29 [m:set nu[27;12H[K[28;1H[33m 28 [m:set rnu[28;13H[K[29;1H[33m 27 [m:redir @g | setglobal nu? | redir END[29;42H[K[30;1H[33m 26 [m:set nonu nornu[30;20H[K[31;1H[33m 25 [m:set rnu[31;13H[K[32;1H[33m 24 [m:set nu[32;12H[K[33;1H[33m 23 [m:redir @h | setglobal rnu? | redir END[33;43H[K[34;1H[33m 22 [m:$put =':set MUST reset the other global value'[34;52H[K[35;1H[33m 21 [m:$put g[35;12H[K[36;1H[33m 20 [m:$put h[36;12H[K[37;1H[33m 19 [m:"[37;7H[K[38;1H[33m 18 [m:let cwd=getcwd()[38;22H[K[39;1H[33m 17 [m:cd ..[39;11H[K[40;1H[33m 16 [m:" Tests may be run from a shadow directory, so an extra cd needs to be done to[40;84H[K[41;1H[33m 15 [m:" get above src/[41;22H[K[42;1H[33m 14 [m:if fnamemodify(getcwd(), ':t') != 'src' | cd ../.. | else | cd .. | endif[42;79H[K[43;1H[33m 13 [m:$put =''[43;14H[K[44;1H[33m 12 [m:$put ='Testing findfile'[44;30H[K[45;1H[33m 11 [m:$put =''[45;14H[K[46;1H[33m 10 [m:set ssl[46;13H[K[47;1H[33m  9 [m:$put =findfile('test19.in','src/test*')[47;45H[K[48;1H[33m  8 [m:exe "cd" cwd[48;18H[K[49;1H[33m  7 [m:cd ..[49;11H[K[50;1H[33m  6 [m:$put =findfile('test19.in','test*')[50;41H[K[51;1H[33m  5 [m:$put =findfile('test19.in','testdir')[51;43H[K[52;1H[33m  4 [m:exe "cd" cwd[52;18H[K[53;1H[33m  3 [m:/^results/,$w! test.out[53;29H[K[54;1H[33m  2 [m:q![54;8H[K[55;1H[33m  1 [mENDTEST[55;12H[K[56;1H[33m71  [m[56;5H[K[57;3H[K[57;1H"test89.in" line 71 of 71 --100%-- col 1[56;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put ='results:'[?25l[1;56r[56;1H
[1;57r[1;3H[33m5
 54
 53
 52
 51
 50
 49
 48
 47
 46
 45
 44
 43
 42
 41
 40
 39
 38
 37
 36
 35
 34
 33
 32
 31
 30
 29
 28
 27
 26
 25
 24
 23
 22
 21
 20
 19
 18
 17
 16
 15
 14
 13
 12
 11
 10
  9
  8
  7
  6
  5
  4
  3
  2
  1
72  [mresults:[57;1H[K[56;5H[?12l[?25h[?25l
:[?12l[?25h$put a[?25l3 more lines[1;56r[1;1H[3M[1;57r[1;3H[33m5
 54
 53
 52
 51
 50
 49
 48
 47
 46
 45
 44
 43
 42
 41
 40
 39
 38
 37
 36
 35
 34
 33
 32
 31
 30
 29
 28
 27
 26
 25
 24
 23
 22
 21
 20
 19
 18
 17
 16
 15
 14
 13
 12
 11
 10
  9
  8
  7
  6
  5
  4
  3
  2 
  1 [m  number
[33m75  [m  relativenumber[57;1H[K[57;1H3 more lines[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put b[?25l3 more lines[1;56r[1;1H[3M[1;57r[1;3H[33m5
 54
 53
 52
 51
 50
 49
 48
 47
 46
 45
 44
 43
 42
 41
 40
 39
 38
 37
 36
 35
 34
 33
 32
 31
 30
 29
 28
 27
 26
 25
 24
 23
 22
 21
 20
 19
 18
 17
 16
 15
 14
 13
 12
 11
 10
  9
  8
  7
  6
  5
  4
  3
  2 
  1 [m  number
[33m78  [m  relativenumber[57;1H[K[57;1H3 more lines[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h"[?25l[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nonu nornu[?25l[1;1H:setlocal nu[1;13H[K[2;1H:redir @d | setglobal rnu? | redir END[2;40H[K[3;1H:$put =':setlocal must NOT reset the other global value'[3;57H[K[4;1H:$put c[4;8H[K[5;1H:$put d[5;8H[K[6;1H:"[6;3H[K[7;1H:set nonu nornu[7;16H[K[8;1H:setglobal nu[8;14H[K[9;1H:setglobal rnu[9;16H[K[10;1H:redir @e | setglobal nu? | redir END[10;39H[K[11;1H:set nonu nornu[11;16H[K[12;1H:setglobal rnu[12;16H[K[13;1H:setglobal nu[13;14H[K[14;1H:redir @f | setglobal rnu? | redir END[14;40H[K[15;1H:$put =':setglobal MUST reset the other global value'[15;54H[K[16;1H:$put e[16;8H[K[17;1H:$put f[17;8H[K[18;1H:"[18;3H[K[19;1H:set nonu nornu[19;16H[K[20;1H:set nu[20;8H[K[21;1H:set rnu[21;10H[K[22;1H:redir @g | setglobal nu? | redir END[22;39H[K[23;1H:set nonu nornu[23;16H[K[24;1H:set rnu[24;10H[K[25;1H:set nu[25;8H[K[26;1H:redir @h | setglobal rnu? | redir END[26;40H[K[27;1H:$put =':set MUST reset the other global value'[27;48H[K[28;1H:$put g[28;8H[K[29;1H:$put h[29;8H[K[30;1H:"[30;3H[K[31;1H:let cwd=getcwd()[31;18H[K[32;1H:cd ..[32;7H[K[33;1H:" Tests may be run from a shadow directory, so an extra cd needs to be done to[33;80H[K[34;1H:" get above src/[34;18H[K[35;1H:if fnamemodify(getcwd(), ':t') != 'src' | cd ../.. | else | cd .. | endif[35;75H[K[36;1H:$put =''[36;11H[K[37;1H:$put ='Testing findfile'[37;26H[K[38;1H:$put =''[38;11H[K[39;1H:set ssl[39;10H[K[40;1H:$put =findfile('test19.in','src/test*')[40;41H[K[41;1H:exe "cd" cwd[41;15H[K[42;1H:cd ..[42;7H[K[43;1H:$put =findfile('test19.in','test*')[43;37H[K[44;1H:$put =findfile('test19.in','testdir')[44;39H[K[45;1H:exe "cd" cwd[45;15H[K[46;1H:/^results/,$w! test.ou[46;25H[K[47;1H:q![47;4H[K[48;1HENDTEST[48;8H[K[49;1H[K[50;1Hresults:[50;9H[K[51;1H[K[52;1H  number[52;9H[K[53;1H  relativenumber[53;17H[K[54;1H[K[55;1H  number[55;9H[K[56;1H  relativenumber[56;17H[K[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetglobal nu[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetlocal rnu[?25l[1;1H[33m 55 [m:setlocal nu
[33m 54 [m:redir @d | setglobal rnu? | redir END
[33m 53 [m:$put =':setlocal must NOT reset the other global value'
[33m 52 [m:$put c
[33m 51 [m:$put d
[33m 50 [m:"
[33m 49 [m:set nonu nornu
[33m 48 [m:setglobal nu
[33m 47 [m:setglobal rnu
[33m 46 [m:redir @e | setglobal nu? | redir END
[33m 45 [m:set nonu nornu
[33m 44 [m:setglobal rnu
[33m 43 [m:setglobal nu
[33m 42 [m:redir @f | setglobal rnu? | redir END
[33m 41 [m:$put =':setglobal MUST reset the other global value'
[33m 40 [m:$put e
[33m 39 [m:$put f
[33m 38 [m:"
[33m 37 [m:set nonu nornu
[33m 36 [m:set nu
[33m 35 [m:set rnu
[33m 34 [m:redir @g | setglobal nu? | redir END
[33m 33 [m:set nonu nornu
[33m 32 [m:set rnu
[33m 31 [m:set nu
[33m 30 [m:redir @h | setglobal rnu? | redir END
[33m 29 [m:$put =':set MUST reset the other global value'
[33m 28 [m:$put g
[33m 27 [m:$put h
[33m 26 [m:"
[33m 25 [m:let cwd=getcwd()
[33m 24 [m:cd ..
[33m 23 [m:" Tests may be run from a shadow directory, so an extra cd needs to be done to
[33m 22 [m:" get above src/
[33m 21 [m:if fnamemodify(getcwd(), ':t') != 'src' | cd ../.. | else | cd .. | endif
[33m 20 [m:$put =''
[33m 19 [m:$put ='Testing findfile'
[33m 18 [m:$put =''
[33m 17 [m:set ssl
[33m 16 [m:$put =findfile('test19.in','src/test*')
[33m 15 [m:exe "cd" cwd
[33m 14 [m:cd ..
[33m 13 [m:$put =findfile('test19.in','test*')
[33m 12 [m:$put =findfile('test19.in','testdir')
[33m 11 [m:exe "cd" cwd
[33m 10 [m:/^results/,$w! test.out
[33m  9 [m:q!
[33m  8 [mENDTEST
[33m  7 
  6 [mresults:
[33m  5 
  4 [m  number
[33m  3 [m  relativenumber
[33m  2 
  1 [m  number
[33m  0 [m  relativenumber[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir @c | setglobal nu? | redir END[?25l[57;1H[K[57;1H  number[56;7H[?12l[?25h[?25l[57;3H[K[57;1H:[?12l[?25hset nonu nornu[?25l[1;1H:setlocal nu[1;13H[K[2;1H:redir @d | setglobal rnu? | redir END[2;40H[K[3;1H:$put =':setlocal must NOT reset the other global value'[3;57H[K[4;1H:$put c[4;8H[K[5;1H:$put d[5;8H[K[6;1H:"[6;3H[K[7;1H:set nonu nornu[7;16H[K[8;1H:setglobal nu[8;14H[K[9;1H:setglobal rnu[9;16H[K[10;1H:redir @e | setglobal nu? | redir END[10;39H[K[11;1H:set nonu nornu[11;16H[K[12;1H:setglobal rnu[12;16H[K[13;1H:setglobal nu[13;14H[K[14;1H:redir @f | setglobal rnu? | redir END[14;40H[K[15;1H:$put =':setglobal MUST reset the other global value'[15;54H[K[16;1H:$put e[16;8H[K[17;1H:$put f[17;8H[K[18;1H:"[18;3H[K[19;1H:set nonu nornu[19;16H[K[20;1H:set nu[20;8H[K[21;1H:set rnu[21;10H[K[22;1H:redir @g | setglobal nu? | redir END[22;39H[K[23;1H:set nonu nornu[23;16H[K[24;1H:set rnu[24;10H[K[25;1H:set nu[25;8H[K[26;1H:redir @h | setglobal rnu? | redir END[26;40H[K[27;1H:$put =':set MUST reset the other global value'[27;48H[K[28;1H:$put g[28;8H[K[29;1H:$put h[29;8H[K[30;1H:"[30;3H[K[31;1H:let cwd=getcwd()[31;18H[K[32;1H:cd ..[32;7H[K[33;1H:" Tests may be run from a shadow directory, so an extra cd needs to be done to[33;80H[K[34;1H:" get above src/[34;18H[K[35;1H:if fnamemodify(getcwd(), ':t') != 'src' | cd ../.. | else | cd .. | endif[35;75H[K[36;1H:$put =''[36;11H[K[37;1H:$put ='Testing findfile'[37;26H[K[38;1H:$put =''[38;11H[K[39;1H:set ssl[39;10H[K[40;1H:$put =findfile('test19.in','src/test*')[40;41H[K[41;1H:exe "cd" cwd[41;15H[K[42;1H:cd ..[42;7H[K[43;1H:$put =findfile('test19.in','test*')[43;37H[K[44;1H:$put =findfile('test19.in','testdir')[44;39H[K[45;1H:exe "cd" cwd[45;15H[K[46;1H:/^results/,$w! test.ou[46;25H[K[47;1H:q![47;4H[K[48;1HENDTEST[48;8H[K[49;1H[K[50;1Hresults:[50;9H[K[51;1H[K[52;1H  number[52;9H[K[53;1H  relativenumber[53;17H[K[54;1H[K[55;1H  number[55;9H[K[56;1H  relativenumber[56;17H[K[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetglobal rnu[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetlocal nu[?25l[1;1H[33m 23 [m:setlocal nu
[33m 24 [m:redir @d | setglobal rnu? | redir END
[33m 25 [m:$put =':setlocal must NOT reset the other global value'
[33m 26 [m:$put c
[33m 27 [m:$put d
[33m 28 [m:"
[33m 29 [m:set nonu nornu
[33m 30 [m:setglobal nu
[33m 31 [m:setglobal rnu
[33m 32 [m:redir @e | setglobal nu? | redir END
[33m 33 [m:set nonu nornu
[33m 34 [m:setglobal rnu
[33m 35 [m:setglobal nu
[33m 36 [m:redir @f | setglobal rnu? | redir END
[33m 37 [m:$put =':setglobal MUST reset the other global value'
[33m 38 [m:$put e
[33m 39 [m:$put f
[33m 40 [m:"
[33m 41 [m:set nonu nornu
[33m 42 [m:set nu
[33m 43 [m:set rnu
[33m 44 [m:redir @g | setglobal nu? | redir END
[33m 45 [m:set nonu nornu
[33m 46 [m:set rnu
[33m 47 [m:set nu
[33m 48 [m:redir @h | setglobal rnu? | redir END
[33m 49 [m:$put =':set MUST reset the other global value'
[33m 50 [m:$put g
[33m 51 [m:$put h
[33m 52 [m:"
[33m 53 [m:let cwd=getcwd()
[33m 54 [m:cd ..
[33m 55 [m:" Tests may be run from a shadow directory, so an extra cd needs to be done to
[33m 56 [m:" get above src/
[33m 57 [m:if fnamemodify(getcwd(), ':t') != 'src' | cd ../.. | else | cd .. | endif
[33m 58 [m:$put =''
[33m 59 [m:$put ='Testing findfile'
[33m 60 [m:$put =''
[33m 61 [m:set ssl
[33m 62 [m:$put =findfile('test19.in','src/test*')
[33m 63 [m:exe "cd" cwd
[33m 64 [m:cd ..
[33m 65 [m:$put =findfile('test19.in','test*')
[33m 66 [m:$put =findfile('test19.in','testdir')
[33m 67 [m:exe "cd" cwd
[33m 68 [m:/^results/,$w! test.out
[33m 69 [m:q!
[33m 70 [mENDTEST
[33m 71 
 72 [mresults:
[33m 73 
 74 [m  number
[33m 75 [m  relativenumber
[33m 76 
 77 [m  number
[33m 78 [m  relativenumber[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir @d | setglobal rnu? | redir END[?25l[57;1H[K[57;1H  relativenumber[56;7H[?12l[?25h[?25l[57;3H[K[57;1H:[?12l[?25h$put =':setlocal must NOT reset the other global value'[?25l[1;56r[56;1H
[1;57r[56;1H[33m 79 [m:setlocal must NOT reset the other global value[57;1H[K[56;5H[?12l[?25h[?25l
:[?12l[?25h$put c[?25l[1;56r[1;1H[2M[1;57r[55;1H[33m 80 
 81 [m  number[57;1H[K[56;7H[?12l[?25h[?25l
:[?12l[?25h$put d[?25l[1;56r[1;1H[2M[1;57r[55;1H[33m 82 
 83 [m  relativenumber[57;1H[K[56;7H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nonu nornu[?25l[1;1H:"[1;3H[K[2;1H:set nonu nornu[2;16H[K[3;1H:setglobal nu[3;14H[K[4;1H:setglobal rnu[4;16H[K[5;1H:redir @e | setglobal nu? | redir END[5;39H[K[6;1H:set nonu nornu[6;16H[K[7;1H:setglobal rnu[7;16H[K[8;1H:setglobal nu[8;14H[K[9;1H:redir @f | setglobal rnu? | redir END[9;40H[K[10;1H:$put =':setglobal MUST reset the other global value'[10;54H[K[11;1H:$put e[11;8H[K[12;1H:$put f[12;8H[K[13;1H:"[13;3H[K[14;1H:set nonu nornu[14;16H[K[15;1H:set nu[15;8H[K[16;1H:set rnu[16;10H[K[17;1H:redir @g | setglobal nu? | redir END[17;39H[K[18;1H:set nonu nornu[18;16H[K[19;1H:set rnu[19;10H[K[20;1H:set nu[20;8H[K[21;1H:redir @h | setglobal rnu? | redir END[21;40H[K[22;1H:$put =':set MUST reset the other global value'[22;48H[K[23;1H:$put g[23;8H[K[24;1H:$put h[24;8H[K[25;1H:"[25;3H[K[26;1H:let cwd=getcwd()[26;18H[K[27;1H:cd ..[27;7H[K[28;1H:" Tests may be run from a shadow directory, so an extra cd needs to be done to[28;80H[K[29;1H:" get above src/[29;18H[K[30;1H:if fnamemodify(getcwd(), ':t') != 'src' | cd ../.. | else | cd .. | endif[30;75H[K[31;1H:$put =''[31;11H[K[32;1H:$put ='Testing findfile'[32;26H[K[33;1H:$put =''[33;11H[K[34;1H:set ssl[34;10H[K[35;1H:$put =findfile('test19.in','src/test*')[35;41H[K[36;1H:exe "cd" cwd[36;15H[K[37;1H:cd ..[37;7H[K[38;1H:$put =findfile('test19.in','test*')[38;37H[K[39;1H:$put =findfile('test19.in','testdir')[39;39H[K[40;1H:exe "cd" cwd[40;15H[K[41;1H:/^results/,$w! test.ou[41;25H[K[42;1H:q![42;4H[K[43;1HENDTEST[43;8H[K[44;1H[K[45;1Hresults:[45;9H[K[46;1H[K[47;1H  number[47;9H[K[48;1H  relativenumber[48;17H[K[49;1H[K[50;1H  number[50;9H[K[51;1H  relativenumber[51;17H[K[52;1H:setlocal must NOT reset the other global value[52;48H[K[53;1H[K[54;1H  number[54;9H[K[55;1H[K[56;1H  relativenumber[56;17H[K[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetglobal nu[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetglobal rnu[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir @e | setglobal nu? | redir END[?25l[57;1H[K[57;1H  number[56;3H[?12l[?25h[?25l[57;3H[K[57;1H:[?12l[?25hset nonu nornu[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetglobal rnu[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hsetglobal nu[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir @f | setglobal rnu? | redir END[?25l[57;1H[K[57;1H  relativenumber[56;3H[?12l[?25h[?25l[57;3H[K[57;1H:[?12l[?25h$put =':setglobal MUST reset the other global value'[?25l[1;56r[56;1H
[1;57r[56;1H:setglobal MUST reset the other global value[57;1H[K[56;1H[?12l[?25h[?25l
:[?12l[?25h$put e[?25l[1;56r[1;1H[2M[1;57r[56;3Hnumber[57;1H[K[56;3H[?12l[?25h[?25l
:[?12l[?25h$put f[?25l[1;56r[1;1H[2M[1;57r[56;3Hrelativenumber[57;1H[K[56;3H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nonu nornu[?25l[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nu[?25l[1;1H[33m 33 [m:set nonu nornu
[33m 34 [m:setglobal rnu
[33m 35 [m:setglobal nu
[33m 36 [m:redir @f | setglobal rnu? | redir END
[33m 37 [m:$put =':setglobal MUST reset the other global value'
[33m 38 [m:$put e
[33m 39 [m:$put f
[33m 40 [m:"
[33m 41 [m:set nonu nornu
[33m 42 [m:set nu
[33m 43 [m:set rnu
[33m 44 [m:redir @g | setglobal nu? | redir END
[33m 45 [m:set nonu nornu
[33m 46 [m:set rnu
[33m 47 [m:set nu
[33m 48 [m:redir @h | setglobal rnu? | redir END
[33m 49 [m:$put =':set MUST reset the other global value'
[33m 50 [m:$put g
[33m 51 [m:$put h
[33m 52 [m:"
[33m 53 [m:let cwd=getcwd()
[33m 54 [m:cd ..
[33m 55 [m:" Tests may be run from a shadow directory, so an extra cd needs to be done to
[33m 56 [m:" get above src/
[33m 57 [m:if fnamemodify(getcwd(), ':t') != 'src' | cd ../.. | else | cd .. | endif
[33m 58 [m:$put =''
[33m 59 [m:$put ='Testing findfile'
[33m 60 [m:$put =''
[33m 61 [m:set ssl
[33m 62 [m:$put =findfile('test19.in','src/test*')
[33m 63 [m:exe "cd" cwd
[33m 64 [m:cd ..
[33m 65 [m:$put =findfile('test19.in','test*')
[33m 66 [m:$put =findfile('test19.in','testdir')
[33m 67 [m:exe "cd" cwd
[33m 68 [m:/^results/,$w! test.out
[33m 69 [m:q!
[33m 70 [mENDTEST
[33m 71 
 72 [mresults:
[33m 73 
 74 [m  number
[33m 75 [m  relativenumber
[33m 76 
 77 [m  number
[33m 78 [m  relativenumber
[33m 79 [m:setlocal must NOT reset the other global value
[33m 80 
 81 [m  number
[33m 82 
 83 [m  relativenumber
[33m 84 [m:setglobal MUST reset the other global value
[33m 85 
 86 [m  number
[33m 87 
 88 [m  relativenumber[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset rnu[?25l[1;2H[33m55
 5
 53
 52
 51
 50
 4
 48
 47
 46
 45

 43
 42
 41
 40
 3
 38
 37
 36
 35
 3
 33
 32
 31
 30
 2
 28
 27
 26
 25
 2
 23
 22
 21
 20
 1
 18
 17
 16
 15
 1
 13
 12
 11
 10
  
  8
  7
  6
  5
  
  3
  2
  1
88  [m  [?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir @g | setglobal nu? | redir END[?25l[57;1H[K[57;1H  number[56;7H[?12l[?25h[?25l[57;3H[K[57;1H:[?12l[?25hset nonu nornu[?25l[1;1H:set nonu nornu[1;16H[K[2;1H:setglobal rnu[2;16H[K[3;1H:setglobal nu[3;14H[K[4;1H:redir @f | setglobal rnu? | redir END[4;40H[K[5;1H:$put =':setglobal MUST reset the other global value'[5;54H[K[6;1H:$put e[6;8H[K[7;1H:$put f[7;8H[K[8;1H:"[8;3H[K[9;1H:set nonu nornu[9;16H[K[10;1H:set nu[10;8H[K[11;1H:set rnu[11;10H[K[12;1H:redir @g | setglobal nu? | redir END[12;39H[K[13;1H:set nonu nornu[13;16H[K[14;1H:set rnu[14;10H[K[15;1H:set nu[15;8H[K[16;1H:redir @h | setglobal rnu? | redir END[16;40H[K[17;1H:$put =':set MUST reset the other global value'[17;48H[K[18;1H:$put g[18;8H[K[19;1H:$put h[19;8H[K[20;1H:"[20;3H[K[21;1H:let cwd=getcwd()[21;18H[K[22;1H:cd ..[22;7H[K[23;1H:" Tests may be run from a shadow directory, so an extra cd needs to be done to[23;80H[K[24;1H:" get above src/[24;18H[K[25;1H:if fnamemodify(getcwd(), ':t') != 'src' | cd ../.. | else | cd .. | endif[25;75H[K[26;1H:$put =''[26;11H[K[27;1H:$put ='Testing findfile'[27;26H[K[28;1H:$put =''[28;11H[K[29;1H:set ssl[29;10H[K[30;1H:$put =findfile('test19.in','src/test*')[30;41H[K[31;1H:exe "cd" cwd[31;15H[K[32;1H:cd ..[32;7H[K[33;1H:$put =findfile('test19.in','test*')[33;37H[K[34;1H:$put =findfile('test19.in','testdir')[34;39H[K[35;1H:exe "cd" cwd[35;15H[K[36;1H:/^results/,$w! test.ou[36;25H[K[37;1H:q![37;4H[K[38;1HENDTEST[38;8H[K[39;1H[K[40;1Hresults:[40;9H[K[41;1H[K[42;1H  number[42;9H[K[43;1H  relativenumber[43;17H[K[44;1H[K[45;1H  number[45;9H[K[46;1H  relativenumber[46;17H[K[47;1H:setlocal must NOT reset the other global value[47;48H[K[48;1H[K[49;1H  number[49;9H[K[50;1H[K[51;1H  relativenumber[51;17H[K[52;1H:setglobal MUST reset the other global value[52;45H[K[53;1H[K[54;1H  number[54;9H[K[55;1H[K[56;1H  relativenumber[56;17H[K[56;3H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset rnu[?25l[1;1H[33m 55 [m:set nonu nornu
[33m 54 [m:setglobal rnu
[33m 53 [m:setglobal nu
[33m 52 [m:redir @f | setglobal rnu? | redir END
[33m 51 [m:$put =':setglobal MUST reset the other global value'
[33m 50 [m:$put e
[33m 49 [m:$put f
[33m 48 [m:"
[33m 47 [m:set nonu nornu
[33m 46 [m:set nu
[33m 45 [m:set rnu
[33m 44 [m:redir @g | setglobal nu? | redir END
[33m 43 [m:set nonu nornu
[33m 42 [m:set rnu
[33m 41 [m:set nu
[33m 40 [m:redir @h | setglobal rnu? | redir END
[33m 39 [m:$put =':set MUST reset the other global value'
[33m 38 [m:$put g
[33m 37 [m:$put h
[33m 36 [m:"
[33m 35 [m:let cwd=getcwd()
[33m 34 [m:cd ..
[33m 33 [m:" Tests may be run from a shadow directory, so an extra cd needs to be done to
[33m 32 [m:" get above src/
[33m 31 [m:if fnamemodify(getcwd(), ':t') != 'src' | cd ../.. | else | cd .. | endif
[33m 30 [m:$put =''
[33m 29 [m:$put ='Testing findfile'
[33m 28 [m:$put =''
[33m 27 [m:set ssl
[33m 26 [m:$put =findfile('test19.in','src/test*')
[33m 25 [m:exe "cd" cwd
[33m 24 [m:cd ..
[33m 23 [m:$put =findfile('test19.in','test*')
[33m 22 [m:$put =findfile('test19.in','testdir')
[33m 21 [m:exe "cd" cwd
[33m 20 [m:/^results/,$w! test.out
[33m 19 [m:q!
[33m 18 [mENDTEST
[33m 17 
 16 [mresults:
[33m 15 
 14 [m  number
[33m 13 [m  relativenumber
[33m 12 
 11 [m  number
[33m 10 [m  relativenumber
[33m  9 [m:setlocal must NOT reset the other global value
[33m  8 
  7 [m  number
[33m  6 
  5 [m  relativenumber
[33m  4 [m:setglobal MUST reset the other global value
[33m  3 
  2 [m  number
[33m  1 
  0 [m  relativenumber[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hset nu[?25l[56;1H[33m88  [m  [?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hredir @h | setglobal rnu? | redir END[?25l[57;1H[K[57;1H  relativenumber[56;7H[?12l[?25h[?25l[57;3H[K[57;1H:[?12l[?25h$put =':set MUST reset the other global value'[?25l[1;56r[56;1H
[1;57r[1;3H[33m5
 54
 53
 52
 51
 50
 49
 48
 47
 46
 45
 44
 43
 42
 41
 40
 39
 38
 37
 36
 35
 34
 33
 32
 31
 30
 29
 28
 27
 26
 25
 24
 23
 22
 21
 20
 19
 18
 17
 16
 15
 14
 13
 12
 11
 10
  9
  8
  7
  6
  5
  4
  3
  2
  1
89  [m:set MUST reset the other global value[57;1H[K[56;5H[?12l[?25h[?25l
:[?12l[?25h$put g[?25l[1;56r[1;1H[2M[1;57r[1;3H[33m5
 54
 53
 52
 51
 50
 49
 48
 47
 46
 45
 44
 43
 42
 41
 40
 39
 38
 37
 36
 35
 34
 33
 32
 31
 30
 29
 28
 27
 26
 25
 24
 23
 22
 21
 20
 19
 18
 17
 16
 15
 14
 13
 12
 11
 10
  9
  8
  7
  6
  5
  4
  3
  2
  1 
91  [m  number[57;1H[K[56;7H[?12l[?25h[?25l
:[?12l[?25h$put h[?25l[1;56r[1;1H[2M[1;57r[1;3H[33m5
 54
 53
 52
 51
 50
 49
 48
 47
 46
 45
 44
 43
 42
 41
 40
 39
 38
 37
 36
 35
 34
 33
 32
 31
 30
 29
 28
 27
 26
 25
 24
 23
 22
 21
 20
 19
 18
 17
 16
 15
 14
 13
 12
 11
 10
  9
  8
  7
  6
  5
  4
  3
  2
  1 
93  [m  relativenumber[57;1H[K[56;7H[?12l[?25h[?25l
:[?12l[?25h"[?25l[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hlet cwd=getcwd()[?25l[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd ..[?25l/sources/vim80/src[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" Tests may be run from a shadow directory, so an extra cd needs to be done to[?25l[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h" get above src/[?25l[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hif fnamemodify(getcwd(), ':t') != 'src' | cd ../.. | else | cd .. | endif[?25l/sources/vim80[57;15H[K[56;7H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[1;3H[33m5
 54
 53
 52
 51
 50
 49
 48
 47
 46
 45
 44
 43
 42
 41
 40
 39
 38
 37
 36
 35
 34
 33
 32
 31
 30
 29
 28
 27
 26
 25
 24
 23
 22
 21
 20
 19
 18
 17
 16
 15
 14
 13
 12
 11
 10
  9
  8
  7
  6
  5
  4
  3
  2
  1
94  [m[57;1H[K[56;5H[?12l[?25h[?25l
:[?12l[?25h$put ='Testing findfile'[?25l[1;56r[56;1H
[1;57r[1;3H[33m5
 54
 53
 52
 51
 50
 49
 48
 47
 46
 45
 44
 43
 42
 41
 40
 39
 38
 37
 36
 35
 34
 33
 32
 31
 30
 29
 28
 27
 26
 25
 24
 23
 22
 21
 20
 19
 18
 17
 16
 15
 14
 13
 12
 11
 10
  9
  8
  7
  6
  5
  4
  3
  2
  1
95  [mTesting findfile[57;1H[K[56;5H[?12l[?25h[?25l
:[?12l[?25h$put =''[?25l[1;56r[56;1H
[1;57r[1;3H[33m5
 54
 53
 52
 51
 50
 49
 48
 47
 46
 45
 44
 43
 42
 41
 40
 39
 38
 37
 36
 35
 34
 33
 32
 31
 30
 29
 28
 27
 26
 25
 24
 23
 22
 21
 20
 19
 18
 17
 16
 15
 14
 13
 12
 11
 10
  9
  8
  7
  6
  5
  4
  3
  2
  1
96  [m[57;1H[K[56;5H[?12l[?25h[?25l
:[?12l[?25hset ssl[?25l[56;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =findfile('test19.in','src/test*')[?25l[1;56r[56;1H
[1;57r[1;3H[33m5
 54
 53
 52
 51
 50
 49
 48
 47
 46
 45
 44
 43
 42
 41
 40
 39
 38
 37
 36
 35
 34
 33
 32
 31
 30
 29
 28
 27
 26
 25
 24
 23
 22
 21
 20
 19
 18
 17
 16
 15
 14
 13
 12
 11
 10
  9
  8
  7
  6
  5
  4
  3
  2
  1
97  [msrc/testdir/test19.in[57;1H[K[56;5H[?12l[?25h[?25l
:[?12l[?25hexe "cd" cwd[?25l/sources/vim80/src/testdir[56;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hcd ..[?25l/sources/vim80/src[56;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h$put =findfile('test19.in','test*')[?25l[1;56r[56;1H
[1;57r[1;3H[33m5
 54
 53
 52
 51
 50
 49
 48
 47
 46
 45
 44
 43
 42
 41
 40
 39
 38
 37
 36
 35
 34
 33
 32
 31
 30
 29
 28
 27
 26
 25
 24
 23
 22
 21
 20
 19
 18
 17
 16
 15
 14
 13
 12
 11
 10
  9
  8
  7
  6
  5
  4
  3
  2
  1
98  [mtestdir/test19.in[57;1H[K[56;5H[?12l[?25h[?25l
:[?12l[?25h$put =findfile('test19.in','testdir')[?25l[1;56r[56;1H
[1;57r[1;3H[33m5
 54
 53
 52
 51
 50
 49
 48
 47
 46
 45
 44
 43
 42
 41
 40
 39
 38
 37
 36
 35
 34
 33
 32
 31
 30
 29
 28
 27
 26
 25
 24
 23
 22
 21
 20
 19
 18
 17
 16
 15
 14
 13
 12
 11
 10
  9
  8
  7
  6
  5
  4
  3
  2
  1
99  [mtestdir/test19.in[57;1H[K[56;5H[?12l[?25h[?25l
:[?12l[?25hexe "cd" cwd[?25l/sources/vim80/src/testdir[56;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25h/^results/,$w! test.out[?25l[31msearch hit BOTTOM, continuing at TOP[m"test.out" [57;12H[K[57;12H[New] 28L, 356C written[56;5H[?12l[?25h[?25l[57;1H[K[57;1H:[?12l[?25hq![?25l[57;1H[K[57;1H[?1l>[?12l[?25h[?1049l# For flaky tests retry one time.  No tests at the moment.
#@/bin/sh -c "if test -f test.out -a test89 = test61; then \
#	  if diff test.out test89.ok; \
#	  then echo flaky test ok first time; \
#	  else rm -rf test89.failed test.out X* viminfo; \
#		VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -s dotest.in test89.in; \
#	  fi \
#	fi"
# Check if the test.out file matches test.ok.
rm -rf X* test.ok viminfo
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_arglist.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_arglist.vim" 318 lines, 6653 characters
Executing Test_argadd()"a" [New File][57;15H[K[57;2Hbababababd
Executing Test_argc()"a" [New File][57;15H[K[57;1H
Executing Test_argdelete()"a" [New File][57;15H[K[57;3Ha" [New File]"bb
Executing Test_argedit()"a" [New File][57;15H[K[57;2Hba
"c" [New File]"x
"y" [New File]
Executing Test_argidx()"a" [New File][57;15H[K[57;2Hcabc
Executing Test_arglist_autocmd()"Xxx1" [57;8H[K[57;8H1L, 15C"Xxx2[57;8H[K[57;8H1L, 15C[57;8H[K[57;8H1L, 15C"Xxx1" line 1 of 1 --100%-- col 1 ((3) of 2)"Xxx2[30C1 of 2)[57;43H[K[57;1H
3 buffers wiped out
Executing Test_arglistid()"a" [New File][57;15H[K[57;1H
Executing Test_argpos()"a" [New File][57;15H[K[57;2Hd
"c" [New File]"ba
"d" [New File]"a
Executing Test_argument()"d" [New File][57;15H[K[57;2Hcba[7Cfile] --No lines in buffer-- (1 of 4)"c[37C3
a b [c] d"c" [New File]
"x" [New File]"z
Executing Test_argv()"a" [New file] --No lines in buffer--
Executing Test_zero_argadd()"b" [New file] --No lines in buffer-- (2 of 4)"a[7CF[57;16H[K[57;2Hbedited" [New File]"a" [New File][57;15H[K[57;2Htest_arglist.res" [New File][57;20H[K[57;20H[New] 0L, 0C written
Executed 11 tests"messages" [New File][57;12H[K[57;12H[New] 15L, 326C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_assert.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_assert.vim" 125 lines, 2880 characters
Executing Test_assert_equal()
Executing Test_assert_exception()
Executing Test_assert_fail_fails()
Executing Test_assert_false()
Executing Test_assert_inrange()
Executing Test_assert_notequal()
Executing Test_assert_true()
Executing Test_compare_fail()
Executing Test_match()
Executing Test_notmatch()
Executing Test_user_is_happy()

[28C[30m[43moooo$$$$$$$$$$$$oooo[m
[24C[30m[43moo$$$$$$$$$$$$$$$$$$$$$$$$o[m
[21C[30m[43moo$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$o[9Co$[m   [30m[43m$$[m [30m[43mo$[m
     [30m[43mo[m [30m[43m$[m [30m[43moo[8Co$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$o[7C$$[m [30m[43m$$[m [30m[43m$$o$[m
  [30m[43moo[m [30m[43m$[m [30m[43m$[m "[30m[43m$[m      [30m[43mo$$$$$$$$$[m    [30m[43m$$$$$$$$$$$$$[m    [30m[43m$$$$$$$$$o[7C$$$o$$o$[m
  "[30m[43m$$$$$$o$[m     [30m[43mo$$$$$$$$$[m      [30m[43m$$$$$$$$$$$[m      [30m[43m$$$$$$$$$$o[m    [30m[43m$$$$$$$$[m
    [30m[43m$$$$$$$[m    [30m[43m$$$$$$$$$$$[m      [30m[43m$$$$$$$$$$$[m      [30m[43m$$$$$$$$$$$$$$$$$$$$$$$[m
    [30m[43m$$$$$$$$$$$$$$$$$$$$$$$[m    [30m[43m$$$$$$$$$$$$$[m    [30m[43m$$$$$$$$$$$$$$[m  """[30m[43m$$$[m
     "[30m[43m$$$[m""""[30m[43m$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$[m     "[30m[43m$$$[m
      [30m[43m$$$[m   [30m[43mo$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$[m     "[30m[43m$$$o[m
     [30m[43mo$$[m"   [30m[43m$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$[7C$$$o[m
     [30m[43m$$$[m    [30m[43m$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$[m" "[30m[43m$$$$$$ooooo$$$$o[m
    [30m[43mo$$$oooo$$$$$[m  [30m[43m$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$[m   [30m[43mo$$$$$$$$$$$$$$$$$[m
    [30m[43m$$$$$$$$[m"[30m[43m$$$$[m   [30m[43m$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$[m     [30m[43m$$$$[m""""""""
   """"[7C[30m[43m$$$$[m    "[30m[43m$$$$$$$$$$$$$$$$$$$$$$$$$$$$[m"      [30m[43mo$$$[m
[14C"[30m[43m$$$o[m     """[30m[43m$$$$$$$$$$$$$$$$$$[m"[30m[43m$$[m"[9C[30m[43m$$$[m
[16C[30m[43m$$$o[m[10C"[30m[43m$$[m""[30m[43m$$$$$$[m""""[11C[30m[43mo$$$[m
[17C[30m[43m$$$$o[32Co$$$[m"
[18C"[30m[43m$$$$o[m      [30m[43mo$$$$$$o[m"[30m[43m$$$$o[8Co$$$$[m
[20C"[30m[43m$$$$$oo[m     ""[30m[43m$$$$o$$$$$o[m   [30m[43mo$$$$[m""
[23C""[30m[43m$$$$$oooo[m  "[30m[43m$$$o$$$$$$$$$[m"""
[26C""[30m[43m$$$$$$$oo[m [30m[43m$$$$$$$$$$[m
[34C""""[30m[43m$$$$$$$$$$$[m
[38C[30m[43m$$$$$$$$$$$$[m
[39C[30m[43m$$$$$$$$$$[m"
[40C"[30m[43m$$$[m""""
[?12l[?25h[?25lExecuting Test_wrong_error_type()"test_assert.res" [New File][57;29H[K[57;19H[K[57;19H[New] 0L, 0C written
Executed 12 tests"messages" [57;13H[K[57;12H15L, 326C[57;12H[K[57;12H30L, 734C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_autochdir.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_autochdir.vim" 17 lines, 332 characters
Executing Test_set_filename()"samples/Xtest" [57;17H[K[57;17H[New] 0L, 0C written"test_autochdir.res" [New File][57;32H[K[57;22H[K[57;22H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H30L, 734C[57;12H[K[57;12H34L, 806C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_backspace_opt.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_backspace_opt.vim" 59 lines, 1673 characters
Executing Test_backspace_option()"test_backspace_opt.res" [New File][57;26H[K[57;26H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H34L, 806C[57;12H[K[57;12H38L, 886C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_bufwintabinfo.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_bufwintabinfo.vim" 116 lines, 3459 characters
Executing Test_get_buf_options()
Executing Test_get_win_options()
Executing Test_getbufwintabinfo()"Xtestfile1" [New File][57;24H[K[57;11H212
Already only one window"test_bufwintabinfo.res" [New File][57;26H[K[57;26H[New] 0L, 0C written
Executed 3 tests"messages"[57;12H[K[57;12H38L, 886C[57;12H[K[57;12H44L, 1033C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_cdo.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_cdo.vim" 205 lines, 5116 characters
Executing Test_cdo()"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 6): Line1"Xtestfile2" [57;14H[K[57;14H3L, 18C
(4 of 6): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(6 of 6): Line3"Xtestfile2" [57;14H[K[57;14H3L, 18C
(4 of 6): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(6 of 6): Line3"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 6): Line1"Xtestfile3" [57;14H[K[57;14H3L, 18C
(6 of 6): Line3"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 6): Line1"Xtestfile2" [57;14H[K[57;14H3L, 18C
(4 of 6): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(6 of 6): Line3"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 6): Line1"Xtestfile2" [57;14H[K[57;14H3L, 18C
(4 of 6): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(6 of 6): Line3"Xtestfile2" [57;14H[K[57;14H3L, 18C
(4 of 6): Line2
(4 of 6): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(6 of 6): Line3"Xtestfile2" [57;14H[K[57;14H3L, 18C
(4 of 6): Line2"Xtestfile1" [57;14H[K[57;14H3L, 18C[57;11H3[57;14H[K[57;14H3L, 18C
(1 of 1): Line3"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 8): Line1"Xtestfile2" [57;14H[K[57;14H3L, 18C
(5 of 8): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(7 of 8): Line2"Xtestfile2" [57;14H[K[57;14H3L, 18C
(5 of 8): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(7 of 8): Line2
(7 of 8): Line2"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 8): Line1"Xtestfile2" [57;14H[K[57;14H3L, 18C
(5 of 8): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(7 of 8): Line2"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 8): Line1"Xtestfile2" [57;14H[K[57;14H3L, 18C
(5 of 8): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(7 of 8): Line2"Xtestfile2" [57;14H[K[57;14H3L, 18C
(5 of 8): Line2
(5 of 8): Line2
(1 of 1): Line2
Executing Test_ldo()"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 6): Line1"Xtestfile2" [57;14H[K[57;14H3L, 18C
(4 of 6): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(6 of 6): Line3"Xtestfile2" [57;14H[K[57;14H3L, 18C
(4 of 6): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(6 of 6): Line3"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 6): Line1"Xtestfile3" [57;14H[K[57;14H3L, 18C
(6 of 6): Line3"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 6): Line1"Xtestfile2" [57;14H[K[57;14H3L, 18C
(4 of 6): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(6 of 6): Line3"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 6): Line1"Xtestfile2" [57;14H[K[57;14H3L, 18C
(4 of 6): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(6 of 6): Line3"Xtestfile2" [57;14H[K[57;14H3L, 18C
(4 of 6): Line2
(4 of 6): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(6 of 6): Line3"Xtestfile2" [57;14H[K[57;14H3L, 18C
(4 of 6): Line2"Xtestfile1" [57;14H[K[57;14H3L, 18C[57;11H3[57;14H[K[57;14H3L, 18C
(1 of 1): Line3"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 8): Line1"Xtestfile2" [57;14H[K[57;14H3L, 18C
(5 of 8): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(7 of 8): Line2"Xtestfile2" [57;14H[K[57;14H3L, 18C
(5 of 8): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(7 of 8): Line2
(7 of 8): Line2"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 8): Line1"Xtestfile2" [57;14H[K[57;14H3L, 18C
(5 of 8): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(7 of 8): Line2"Xtestfile1" [57;14H[K[57;14H3L, 18C
(2 of 8): Line1"Xtestfile2" [57;14H[K[57;14H3L, 18C
(5 of 8): Line2"Xtestfile3" [57;14H[K[57;14H3L, 18C
(7 of 8): Line2"Xtestfile2" [57;14H[K[57;14H3L, 18C
(5 of 8): Line2
(5 of 8): Line2
(1 of 1): Line2"test_cdo.res" [New File][57;16H[K[57;16H[New] 0L, 0C written
Executed 2 tests"messages"[57;12H[K[57;12H44L, 1033C[57;12H[K[57;12H49L, 1112C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_channel.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_channel.vim" 1599 lines, 45774 characters"test_channel.res" [New File][57;20H[K[57;20H[New] 0L, 0C written
Executed 0 test"messages"[57;12H[K[57;12H49L, 1112C[57;12H[K[57;12H52L, 1152C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_charsearch.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_charsearch.vim" 62 lines, 1475 characters
Executing Test_charsearch()
Executing Test_search_cmds()"test_charsearch.res" [New File][57;23H[K[57;23H[New] 0L, 0C written
Executed 2 tests"messages"[57;12H[K[57;12H52L, 1152C[57;12H[K[57;12H57L, 1253C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_cmdline.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_cmdline.vim" 196 lines, 6030 characters
Executing Test_complete_list()[57;1H[K[57;1H:e test
test1.in[24Ctest85.in
test1.ok[24Ctest85.ok
test1.out[23Ctest85.out
test103.in[22Ctest86.in
test103.ok[22Ctest86.ok
test103.out[21Ctest86.out
test104.in[22Ctest87.in
test104.ok[22Ctest87.ok
test104.out[21Ctest87.out
test107.in[22Ctest88.in
test107.ok[22Ctest88.ok
test107.out[21Ctest88.out
test108.in[22Ctest89.in
test108.ok[22Ctest89.ok
test108.out[21Ctest89.out
test11.in[23Ctest9.in
test11.ok[23Ctest9.ok
test11.out[22Ctest9.out
test12.in[23Ctest90.in
test12.ok[23Ctest90.ok
test12.out[22Ctest90.out
test14.in[23Ctest91.in
test14.ok[23Ctest91.ok
test14.out[22Ctest91.out
test15.in[23Ctest92.in
test15.ok[23Ctest92.ok
test15.out[22Ctest92.out
test17.in[23Ctest93.in
test17.ok[23Ctest93.ok
test17.out[22Ctest93.out
test17a.in[22Ctest94.in
test19.in[23Ctest94.ok
test19.ok[23Ctest94.out
test19.out[22Ctest95.in
test20.in[23Ctest95.ok
test20.ok[23Ctest95.out
test20.out[22Ctest97.in
test22.in[23Ctest97.ok
test22.ok[23Ctest97.out
test22.out[22Ctest98.in
test23.in[23Ctest98.ok
test23.ok[23Ctest98.out
test23.out[22Ctest99.in
test24.in[23Ctest99.ok
test24.ok[23Ctest99.out
test24.out[22Ctest_alot.vim
test25.in[23Ctest_alot_latin.vim
test25.ok[23Ctest_alot_utf8.vim
test25.out[22Ctest_arglist.res
test26.in[23Ctest_arglist.vim
test26.ok[23Ctest_assert.res
test26.out[22Ctest_assert.vim
test28.in[23Ctest_assign.vim
test28.ok[23Ctest_autochdir.res
test28.out[22Ctest_autochdir.vim
test29.in[23Ctest_autocmd.vim
test29.ok[23Ctest_autocmd_option.in
test29.out[22Ctest_autocmd_option.ok
test3.in[24Ctest_autocmd_option.out
test3.ok[24Ctest_autoformat_join.in
test3.out[23Ctest_autoformat_join.ok
test30.in[23Ctest_autoformat_join.out
test30.ok[23Ctest_backspace_opt.res
test30.out[22Ctest_backspace_opt.vim
test31.in[23Ctest_breakindent.in
test31.ok[23Ctest_breakindent.ok
test31.out[22Ctest_breakindent.out
test32.in[23Ctest_bufwintabinfo.res
test32.ok[23Ctest_bufwintabinfo.vim
test32.out[22Ctest_cdo.res
test33.in[23Ctest_cdo.vim
test33.ok[23Ctest_changelist.in
test33.out[22Ctest_changelist.ok
test34.in[23Ctest_changelist.out
test34.ok[23Ctest_channel.py
test34.out[22Ctest_channel.res
test36.in[23Ctest_channel.vim
test36.ok[23Ctest_channel_pipe.py
test36.out[22Ctest_charsearch.res
test37.in[23Ctest_charsearch.vim
test37.ok[23Ctest_close_count.in
test37.out[22Ctest_close_count.ok
test38.in[23Ctest_close_count.out
test38.ok[23Ctest_cmdline.vim
test38.out[22Ctest_command_count.vim
test39.in[23Ctest_comparators.in
test39.ok[23Ctest_comparators.ok
test39.out[22Ctest_comparators.out
test4.in[24Ctest_crypt.vim
test4.ok[24Ctest_cscope.vim
test4.out[23Ctest_cursor_func.vim
test40.in[23Ctest_delete.vim
test40.ok[23Ctest_diffmode.vim
test40.out[22Ctest_digraph.vim
test41.in[23Ctest_erasebackword.in
test41.ok[23Ctest_erasebackword.ok
test41.out[22Ctest_erasebackword.out
test42.in[23Ctest_eval.in
test42.ok[23Ctest_eval.ok
test42.out[22Ctest_eval.out
test43.in[23Ctest_eval_func.vim
test43.ok[23Ctest_ex_undo.vim
test43.out[22Ctest_execute_func.vim
test44.in[23Ctest_expand.vim
test44.ok[23Ctest_expand_dllpath.vim
test44.out[22Ctest_expr.vim
test45.in[23Ctest_expr_utf8.vim
test45.ok[23Ctest_farsi.vim
test45.out[22Ctest_feedkeys.vim
test48.in[23Ctest_file_perm.vim
test48.ok[23Ctest_fileformat.vim
test48.out[22Ctest_filter_cmd.vim
test49.in[23Ctest_filter_map.vim
test49.ok[23Ctest_fixeol.in
test49.out[22Ctest_fixeol.ok
test49.vim[22Ctest_fixeol.out
test5.in[24Ctest_fnameescape.vim
test5.ok[24Ctest_fnamemodify.vim
test5.out[23Ctest_getcwd.in
test50.in[23Ctest_getcwd.ok
test50.ok[23Ctest_getcwd.out
test51.in[23Ctest_gf.vim
test51.ok[23Ctest_glob2regpat.vim
test51.out[22Ctest_gn.vim
test52.in[23Ctest_goto.vim
test52.ok[23Ctest_gui.vim
test52.out[22Ctest_hardcopy.vim
test53.in[23Ctest_help_tagjump.vim
test53.ok[23Ctest_history.vim
test53.out[22Ctest_hlsearch.vim
test54.in[23Ctest_increment.vim
test54.ok[23Ctest_increment_dbcs.vim
test54.out[22Ctest_insertcount.in
test55.in[23Ctest_insertcount.ok
test55.ok[23Ctest_insertcount.out
test55.out[22Ctest_job_fails.vim
test56.in[23Ctest_join.vim
test56.ok[23Ctest_json.vim
test56.out[22Ctest_jumps.vim
test57.in[23Ctest_lambda.vim
test57.ok[23Ctest_langmap.vim
test57.out[22Ctest_largefile.vim
test58.in[23Ctest_lispwords.vim
test58.ok[23Ctest_listchars.in
test58.out[22Ctest_listchars.ok
test59.in[23Ctest_listchars.out
test59.ok[23Ctest_listlbr.in
test59.out[22Ctest_listlbr.ok
test60.in[23Ctest_listlbr.out
test60.ok[23Ctest_listlbr_utf8.in
test60.out[22Ctest_listlbr_utf8.ok
test60.vim[22Ctest_listlbr_utf8.out
test64.in[23Ctest_man.vim
test64.ok[23Ctest_mapping.vim
test64.out[22Ctest_marks.vim
test65.in[23Ctest_match.vim
test65.ok[23Ctest_matchadd_conceal.vim
test65.out[22Ctest_matchadd_conceal_utf8.vim
test66.in[23Ctest_menu.vim
test66.ok[23Ctest_messages.vim
test66.out[22Ctest_nested_function.vim
test67.in[23Ctest_netbeans.py
test67.ok[23Ctest_netbeans.vim
test67.out[22Ctest_normal.vim
test68.in[23Ctest_options.vim
test68.ok[23Ctest_packadd.vim
test68.out[22Ctest_partial.vim
test69.in[23Ctest_perl.vim
test69.ok[23Ctest_popup.vim
test69.out[22Ctest_quickfix.vim
test7.in[24Ctest_regexp_latin.vim
test7.ok[24Ctest_regexp_utf8.vim
test7.out[23Ctest_reltime.vim
test70.in[23Ctest_ruby.vim
test70.ok[23Ctest_search.vim
test70.out[22Ctest_search_mbyte.in
test72.in[23Ctest_search_mbyte.ok
test72.ok[23Ctest_search_mbyte.out
test72.out[22Ctest_searchpos.vim
test73.in[23Ctest_set.vim
test73.ok[23Ctest_signs.vim
test73.out[22Ctest_smartindent.vim
test75.in[23Ctest_sort.vim
test75.ok[23Ctest_source_utf8.vim
test75.out[22Ctest_startup.vim
test77.in[23Ctest_startup_utf8.vim
test77.ok[23Ctest_stat.vim
test77.out[22Ctest_statusline.vim
test77a.com[21Ctest_substitute.vim
test77a.in[22Ctest_syn_attr.vim
test77a.ok[22Ctest_syntax.vim
test78.in[23Ctest_tabline.vim
test78.ok[23Ctest_tabpage.vim
test78.out[22Ctest_tagcase.vim
test79.in[23Ctest_tagjump.vim
test79.ok[23Ctest_textobjects.vim
test79.out[22Ctest_timers.vim
test8.in[24Ctest_true_false.vim
test8.ok[24Ctest_undo.vim
test8.out[23Ctest_unlet.vim
test80.in[23Ctest_usercommands.vim
test80.ok[23Ctest_utf8.in
test80.out[22Ctest_utf8.ok
test82.in[23Ctest_utf8.out
test82.ok[23Ctest_viminfo.vim
test82.out[22Ctest_viml.vim
test83-tags2[20Ctest_visual.vim
test83-tags3[20Ctest_window_cmd.vim
test83.in[23Ctest_window_id.vim
test83.ok[23Ctest_wordcount.in
test83.out[22Ctest_wordcount.ok
test84.in[23Ctest_wordcount.out
test84.ok[23Ctest_writefile.vim
test84.out
:e test"test" [New File]
Executing Test_complete_tab()[57;1H[K[57;1H:e Xtest...file"Xtestfile" 1L, 9C
Executing Test_complete_wildmenu()[57;1H[K[57;1H:e Xtest...file1...[57;9H[K[57;9H
[56;1H[1m[7mXtestfile1  Xtestfile2  [m[30m[43mXtestfile1[m[1m[7m [13C                                                               [m[57;1H:e Xtest...[56;1H[1m[7mXtestfile1[m[30m[43mXtestfile1[m[1m[7m [m[57;9Hfile1...[56;1H[1m[7mXtestfile1[m[2C[30m[43mXtestfile2[m[1m[7m [m[57;13H2[57;14H[K[57;14H[56;1H:[1m[7mt[me Xtestfile2[56;14H[K[57;1H[K[56;1H"Xtestfile2" 1L, 10C
Executing Test_expand_star_star()[57;1H[K[57;1H:find **/fileXname...[57;7Ha/b/fileXname[57;20H[K[57;20H"a/b/fileXname" [57;17H[K[57;17H1L, 9C"Xtestfile2" [New File]
Executing Test_getcompletion()[57;1H[K[57;1H:cscope find 
a  c  d  e  f  g  i  s  t
:cscope find [57;1H[K[57;1H:sign list 
Testing
:sign list [57;1H[K[57;1H"test_cmdline.res" [New File][57;20H[K[57;20H[New] 0L, 0C written
Executed 5 tests"messages"[57;12H[K[57;12H57L, 1253C[57;12H[K[57;12H65L, 1455C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_crypt.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_crypt.vim" 83 lines, 2590 characters
Executing Test_crypt_blowfish()"Xtest.txt" [New File][57;23H[K[57;1H[K[57;1H:X
Warning: Using a weak encryption method; see :help 'cm'
Enter encryption key: ******
Enter same key again: ******
[56;1H"Xtest.txt" [56;13H[K[56;13H[New][blowfish] 3L, 98C written
:split Xtest.txt"Xtest.txt" [57;13H[K[57;1HNeed encryption key for "Xtest.txt"
Warning: Using a weak encryption method; see :help 'cm'
Enter encryption key: ******
"Xtest.txt" [blowfish] 3L, 98C
Executing Test_crypt_blowfish2()"Xtest.txt" [New File][57;23H[K[57;1H[K[57;1H:X[57;1H[K[57;1HEnter encryption key: ******[57;1H[K[57;1HEnter same key again: ******
[56;1H"Xtest.txt" [56;13H[K[56;13H[New][blowfish2] 3L, 98C written
:split Xtest.txt"Xtest.txt" [57;13H[K[57;1HNeed encryption key for "Xtest.txt"
Enter encryption key: ******
"Xtest.txt" [blowfish2] 3L, 98C
Executing Test_crypt_zip()"Xtest.txt" [New File][57;23H[K[57;1H[K[57;1H:X
Warning: Using a weak encryption method; see :help 'cm'
Enter encryption key: ******
Enter same key again: ******
[56;1H"Xtest.txt" [56;13H[K[56;13H[New][crypted] 3L, 98C written
:split Xtest.txt"Xtest.txt" [57;13H[K[57;1HNeed encryption key for "Xtest.txt"
Warning: Using a weak encryption method; see :help 'cm'
Enter encryption key: ******
"Xtest.txt" [crypted] 3L, 98C
Executing Test_head_only_2()"Xtest.txt" [New File][57;23H[K[57;13H[K[57;13H[New] 1L, 16C written[57;1H[K[57;1H:split Xtest.txt"Xtest.txt" [57;13H[K[57;1HNeed encryption key for "Xtest.txt"
Warning: Using a weak encryption method; see :help 'cm'
Enter encryption key: ******
"Xtest.txt" [readonly] 1L, 16C
Executing Test_head_only_3()"Xtest.txt" [New File][57;23H[K[57;13H[K[57;13H[New] 1L, 16C written[57;1H[K[57;1H:split Xtest.txt"Xtest.txt" [57;13H[K[57;1HNeed encryption key for "Xtest.txt"
Enter encryption key: ******
"Xtest.txt" [readonly] 1L, 16C
Executing Test_uncrypt_blowfish()"Xtest.txt" [New File][57;23H[K[57;13H[K[57;13H[converted][New][noeol] 1L, 80C written[57;1H[K[57;1H:split Xtest.txt"Xtest.txt" [57;13H[K[57;1HNeed encryption key for "Xtest.txt"
Warning: Using a weak encryption method; see :help 'cm'
Enter encryption key: ******
"Xtest.txt" [blowfish] 2L, 27C
Executing Test_uncrypt_blowfish2()"Xtest.txt" [New File][57;23H[K[57;13H[K[57;13H[converted][New][noeol] 1L, 103C written[57;1H[K[57;1H:split Xtest.txt"Xtest.txt" [57;13H[K[57;1HNeed encryption key for "Xtest.txt"
Enter encryption key: *******
"Xtest.txt" [blowfish2] 2L, 44C
Executing Test_uncrypt_zip()"Xtest.txt" [New File][57;23H[K[57;13H[K[57;13H[converted][New][noeol] 1L, 45C written[57;1H[K[57;1H:split Xtest.txt"Xtest.txt" [57;13H[K[57;1HNeed encryption key for "Xtest.txt"
Warning: Using a weak encryption method; see :help 'cm'
Enter encryption key: ******
"Xtest.txt" [converted][crypted] 2L, 26C[56;1H"test_crypt.res" [New File][56;28H[K[57;1H[K[56;18H[K[56;18H[converted][New] 0L, 0C written
Executed 8 tests"messages"[57;12H[K[57;12H65L, 1455C[57;12H[K[57;12H76L, 1742C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_cscope.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_cscope.vim" 279 lines, 10568 characters"test_cscope.res" [New File][57;19H[K[57;19H[New] 0L, 0C written
Executed 0 test"messages"[57;12H[K[57;12H76L, 1742C[57;12H[K[57;12H79L, 1781C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_diffmode.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_diffmode.vim" 237 lines, 4954 characters
Executing Test_diff_fold_sync()
Executing Test_diffget_diffput()
Executing Test_diffoff()[27m[23m[m[H[2J[1;1H[34m[47m  [m[1m[34m[46m-----------------------------------------[m[7m|[m
[34m[47m  [m[1m[34m[46m-----------------------------------------[m[7m|[m
[34m[47m  [mTwo[38C[7m|[m
[34m[47m  [mThree[36C[7m|[5;44H|[6;44H|[7;44H|[8;44H|[9;44H|[10;44H|[11;44H|[12;44H|[13;44H|[14;44H|[15;44H|[16;44H|[17;44H|[18;44H|[19;44H|[20;44H|[21;44H|[22;44H|[23;44H|[24;44H|[25;44H|[26;44H|[27;44H|[28;44H|[29;44H|[30;44H|[31;44H|[32;44H|[33;44H|[34;44H|[35;44H|[36;44H|[37;44H|[38;44H|[39;44H|[40;44H|[41;44H|[42;44H|[43;44H|[44;44H|[45;44H|[46;44H|[47;44H|[48;44H|[49;44H|[50;44H|[51;44H|[52;44H|[53;44H|[54;44H|[55;44H|[m[5;1H[34m[47m  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  [m[5;3H[1m[34m~                                        [6;3H~                                        [7;3H~                                        [8;3H~                                        [9;3H~                                        [10;3H~                                        [11;3H~                                        [12;3H~                                        [13;3H~                                        [14;3H~                                        [15;3H~                                        [16;3H~                                        [17;3H~                                        [18;3H~                                        [19;3H~                                        [20;3H~                                        [21;3H~                                        [22;3H~                                        [23;3H~                                        [24;3H~                                        [25;3H~                                        [26;3H~                                        [27;3H~                                        [28;3H~                                        [29;3H~                                        [30;3H~                                        [31;3H~                                        [32;3H~                                        [33;3H~                                        [34;3H~                                        [35;3H~                                        [36;3H~                                        [37;3H~                                        [38;3H~                                        [39;3H~                                        [40;3H~                                        [41;3H~                                        [42;3H~                                        [43;3H~                                        [44;3H~                                        [45;3H~                                        [46;3H~                                        [47;3H~                                        [48;3H~                                        [49;3H~                                        [50;3H~                                        [51;3H~                                        [52;3H~                                        [53;3H~                                        [54;3H~                                        [55;3H~                                        [m
[7m[No Name] [+]                               [m[1;45H[34m[47m  [m[44mOne                                      [m[2;45H[34m[47m  [m[44m                                         [m[3;45H[34m[47m  [mTwo[4;45H[34m[47m  [mThree[5;45H[34m[47m  [6;45H  [7;45H  [8;45H  [9;45H  [10;45H  [11;45H  [12;45H  [13;45H  [14;45H  [15;45H  [16;45H  [17;45H  [18;45H  [19;45H  [20;45H  [21;45H  [22;45H  [23;45H  [24;45H  [25;45H  [26;45H  [27;45H  [28;45H  [29;45H  [30;45H  [31;45H  [32;45H  [33;45H  [34;45H  [35;45H  [36;45H  [37;45H  [38;45H  [39;45H  [40;45H  [41;45H  [42;45H  [43;45H  [44;45H  [45;45H  [46;45H  [47;45H  [48;45H  [49;45H  [50;45H  [51;45H  [52;45H  [53;45H  [54;45H  [55;45H  [m[5;47H[1m[34m~                                        [6;47H~                                        [7;47H~                                        [8;47H~                                        [9;47H~                                        [10;47H~                                        [11;47H~                                        [12;47H~                                        [13;47H~                                        [14;47H~                                        [15;47H~                                        [16;47H~                                        [17;47H~                                        [18;47H~                                        [19;47H~                                        [20;47H~                                        [21;47H~                                        [22;47H~                                        [23;47H~                                        [24;47H~                                        [25;47H~                                        [26;47H~                                        [27;47H~                                        [28;47H~                                        [29;47H~                                        [30;47H~                                        [31;47H~                                        [32;47H~                                        [33;47H~                                        [34;47H~                                        [35;47H~                                        [36;47H~                                        [37;47H~                                        [38;47H~                                        [39;47H~                                        [40;47H~                                        [41;47H~                                        [42;47H~                                        [43;47H~                                        [44;47H~                                        [45;47H~                                        [46;47H~                                        [47;47H~                                        [48;47H~                                        [49;47H~                                        [50;47H~                                        [51;47H~                                        [52;47H~                                        [53;47H~                                        [54;47H~                                        [55;47H~                                        [m[56;45H[1m[7m[No Name] [+]                              [m[1;1HTwo                                        
Three                                      
[1m[34m~                                          
~                                          
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   
~   [m[1;45HOne[1;48H[K[2;45H[K[3;45HTwo[3;48H[K[4;45HThree[4;50H[K[5;45H[1m[34m~   [6;45H~   [7;45H~   [8;45H~   [9;45H~   [10;45H~   [11;45H~   [12;45H~   [13;45H~   [14;45H~   [15;45H~   [16;45H~   [17;45H~   [18;45H~   [19;45H~   [20;45H~   [21;45H~   [22;45H~   [23;45H~   [24;45H~   [25;45H~   [26;45H~   [27;45H~   [28;45H~   [29;45H~   [30;45H~   [31;45H~   [32;45H~   [33;45H~   [34;45H~   [35;45H~   [36;45H~   [37;45H~   [38;45H~   [39;45H~   [40;45H~   [41;45H~   [42;45H~   [43;45H~   [44;45H~   [45;45H~   [46;45H~   [47;45H~   [48;45H~   [49;45H~   [50;45H~   [51;45H~   [52;45H~   [53;45H~   [54;45H~   [55;45H~   [m

Executing Test_filler_lines()
7 more lines
10 more lines
Executing Test_setting_cursor()"Xtest1" [New File][57;20H[K[57;1H
90 more lines"Xtest1" [57;10H[K[57;10H[New] 91L, 262C written[57;7H2" [New File][57;21H[K[57;1H
100 more lines"Xtest2"[57;10H[K[57;10H[New] 101L, 293C written[57;10H[K[57;10H101L, 293C[57;7H1[57;10H[K[57;10H91L, 262C
Executing Test_vert_split()"Xtest" [57;9H[K[57;9H[New] 5L, 25C written[57;1H[K[57;1H"Xtest2" [New] 6L, 29C written
"Nop" [Modified][Not edited] line 4 of 6 --66%-- col 3[57;1H[K[57;1H"Xtest" 5L, 25C[57;7H2" [57;10H[K[57;10H6L, 29C"test_diffmode.vim" 237L, 4954C[57;16Hres" [New File][57;31H[K[57;21H[K[57;21H[New] 0L, 0C written
Executed 6 tests"messages"[57;12H[K[57;12H79L, 1781C[57;12H[K[57;12H88L, 2003C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_digraph.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_digraph.vim" 461 lines, 14928 characters
Executing Test_digraph_cmndline()Executing T
Executing Test_digraphs()[57;1H[K[57;1H
Executing Test_digraphs_option()[57;1H[K[57;1H
Executing Test_digraphs_output()
Executing Test_loadkeymap()[57;1H[K[57;1H"test_digraph.res" [New File][57;20H[K[57;20H[New] 0L, 0C written
Executed 5 tests"messages"[57;12H[K[57;12H88L, 2003C[57;12H[K[57;12H96L, 2198C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_farsi.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_farsi.vim" 84 lines, 2881 characters
Executing Test_farsi_map()[57;1H[K[57;1HExecuting Test_farsi_toggle()[57;1H[K[57;1H[1m[7m͂  ˜  ͘ ނ[57;7HVIM  ͘ ނ [m[57;24H[K[57;1H"test_farsi.res" [New File][57;18H[K[57;18H[New] 0L, 0C written
Executed 2 tests"messages"[57;12H[K[57;12H[converted] 96L, 2198C[57;12H[K[57;12H[converted] 101L, 2294C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_fnameescape.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_fnameescape.vim" 21 lines, 467 characters
Executing Test_fnameescape()"Xspa ce"[57;11H[K[57;11H[New] 21L, 467C written"Xemark![57;11H[K[57;11H[New] 21L, 467C written"test_fnameescape.res" [New File][57;24H[K[57;24H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H101L, 2294C[57;12H[K[57;12H105L, 2367C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_gf.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_gf.vim" 33 lines, 1138 characters
Executing Test_gf_url()"test_gf.res" [New File][57;15H[K[57;15H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H105L, 2367C[57;12H[K[57;12H109L, 2426C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_gn.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_gn.vim" 93 lines, 2821 characters
Executing Test_gn_command()[57;1H[K[57;1H/[u]niquepattern/s[57;17H[K[57;1H[57;1H[K[57;1H/a:0\@!\zs\d\+[57;1H[K[57;1H"test_gn.res" [New File][57;15H[K[57;15H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H109L, 2426C[57;12H[K[57;12H113L, 2489C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_gui.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_gui.vim" 36 lines, 838 characters"test_gui.res" [New File][57;16H[K[57;16H[New] 0L, 0C written
Executed 0 test"messages"[57;12H[K[57;12H113L, 2489C[57;12H[K[57;12H116L, 2525C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_hardcopy.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_hardcopy.vim" 62 lines, 2001 characters
Executing Test_printheader_parsing()
Executing Test_printmbfont_parsing()
Executing Test_printoptions_parsing()
Executing Test_with_syntax()[57;1H[K[57;1H[32mPrinting page 1 (0%)[m[57;1H[K[57;1H[32mPrinted: test_hardcopy.vim[m"test_hardcopy.res" [New File][57;21H[K[57;21H[New] 0L, 0C written
Executed 4 tests"messages"[57;12H[K[57;12H116L, 2525C[57;12H[K[57;12H123L, 2708C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_history.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_history.vim" 65 lines, 1978 characters
Executing Test_History()
"test_history.res" [New File][57;20H[K[57;20H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H123L, 2708C[57;12H[K[57;12H127L, 2773C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_hlsearch.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_hlsearch.vim" 34 lines, 1013 characters
Executing Test_hlsearch()[57;1H[K[57;1H/aaa[27m[23m[m[H[2J[1;1H[30m[43maaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa[m
[1m[34m~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name] [+]                                                                          [m[29;1H" Test for v:hlsearch

function! Test_hlsearch()
  new
  call setline(1, repeat(['[30m[43maaa[m'], 10))
  set hlsearch nolazyredraw
  let r=[]
  " redraw is needed to make hlsearch highlight the matches
  exe "normal! /[30m[43maaa[m\<CR>" | redraw
  let r1 = screenattr(1, 1)
  nohlsearch | redraw
  call assert_notequal(r1, screenattr(1,1))
  let v:hlsearch=1 | redraw
  call assert_equal(r1, screenattr(1,1))
  let v:hlsearch=0 | redraw
  call assert_notequal(r1, screenattr(1,1))
  set hlsearch | redraw
  call assert_equal(r1, screenattr(1,1))
  let v:hlsearch=0 | redraw
  call assert_notequal(r1, screenattr(1,1))
  exe "normal! n" | redraw
  call assert_equal(r1, screenattr(1,1))
  let v:hlsearch=0 | redraw
  call assert_notequal(r1, screenattr(1,1))
  exe "normal! /\<CR>" | redraw
  call assert_equal(r1, screenattr(1,1))
  set nohls
[7mtest_hlsearch.vim                                                                      [m[1;1Haaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa[33;28Haaa[37;17Haaa[1;1H[30m[43maaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa[33;28Haaa[37;17Haaa[m[1;1Haaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa[33;28Haaa[37;17Haaa[1;1H[30m[43maaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa[33;28Haaa[37;17Haaa[m[1;1Haaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa[33;28Haaa[37;17Haaa[57;1H/aaa[1;1H[30m[43maaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa[33;28Haaa[37;17Haaa[m[1;1Haaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa[33;28Haaa[37;17Haaa[57;1H[K[57;1H//aaa[1;1H[30m[43maaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa[33;28Haaa[37;17Haaa[m[57;1H[K[57;1H//aaa[1;1Haaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa
aaa[33;28Haaa[37;17Haaa[57;1H"test_hlsearch.res" [New File][57;21H[K[57;21H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H127L, 2773C[57;12H[K[57;12H131L, 2840C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_increment.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_increment.vim" 760 lines, 19011 characters
Executing Test_normal_increment_01()"dummy" [New File][57;19H[K[57;1H
Executing Test_normal_increment_02()"dummy" [New File][57;19H[K[57;1H
Executing Test_normal_increment_03()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_01()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_02()"dummy" [New File][57;19H[K[57;1H4 lines changed[57;16H[K[57;1H
Executing Test_visual_increment_03()"dummy" [New File][57;19H[K[57;1H4 lines changed[57;16H[K[57;1H
Executing Test_visual_increment_04()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_05()"dummy" [New File][57;19H[K[57;1H4 lines changed[57;16H[K[57;1H
Executing Test_visual_increment_06()"dummy" [New File][57;19H[K[57;1H4 lines changed[57;16H[K[57;1H
Executing Test_visual_increment_07()"dummy" [New File][57;19H[K[57;1H5 lines changed[57;16H[K[57;1H
Executing Test_visual_increment_08()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_09()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_10()"dummy" [New File][57;19H[K[57;1H4 lines changed[57;16H[K[57;1H
Executing Test_visual_increment_11()"dummy" [New File][57;19H[K[57;1H3 lines changed[57;16H[K[57;1H
Executing Test_visual_increment_12()"dummy" [New File][57;19H[K[57;1H3 lines changed[57;16H[K[57;1H
Executing Test_visual_increment_13()"dummy" [New File][57;19H[K[57;1H3 lines changed[57;16H[K[57;1H
Executing Test_visual_increment_14()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_15()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_16()"dummy" [New File][57;19H[K[57;1H3 lines changed[57;16H[K[57;1H
Executing Test_visual_increment_17()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_18()"dummy" [New File][57;19H[K[57;1H4 lines changed[57;16H[K[57;1H
Executing Test_visual_increment_19()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_20()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_21()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_22()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_23()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_24()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_25()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_26()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_27()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_28()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_29()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_30()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_31()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_32()"dummy" [New File][57;19H[K[57;7H_31" [New File]
Executing Test_visual_increment_33()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_34()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_35()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_36()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_37()"dummy" [New File][57;19H[K[57;1H
Executing Test_visual_increment_38()"dummy" [New File][57;19H[K[57;1H[K[57;1H"test_increment.res" [New File][57;22H[K[57;22H[New] 0L, 0C written
Executed 41 tests"messages" [57;13H[K[57;12H131L, 2840C[57;12H[K[57;12H175L, 4401C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_increment_dbcs.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_increment_dbcs.vim" 30 lines, 604 characters
Executing Test_increment_dbcs_1()"test_increment_dbcs.res" [New File][57;27H[K[57;27H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H[converted] 175L, 4401C[57;12H[K[57;12H[converted] 179L, 4482C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_job_fails.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_job_fails.vim" 19 lines, 598 characters
Executing Test_job_start_fails()[?12l[?25h[?25l"test_job_fails.res" [New File][57;32H[K[57;22H[K[57;22H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H179L, 4482C[57;12H[K[57;12H183L, 4557C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_json.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_json.vim" 281 lines, 10366 characters
Executing Test_js_decode()
Executing Test_js_encode()
Executing Test_json_decode()
Executing Test_json_encode()
"test_json.res" [New File][57;17H[K[57;17H[New] 0L, 0C written
Executed 4 tests"messages"[57;12H[K[57;12H183L, 4557C[57;12H[K[57;12H190L, 4707C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_langmap.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_langmap.vim" 28 lines, 628 characters
Executing Test_langmap()"test_langmap.res" [New File][57;20H[K[57;20H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H190L, 4707C[57;12H[K[57;12H194L, 4772C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_man.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_man.vim" 60 lines, 1358 characters
Executing Test_g_ft_man_open_mode()

Cannot find a 'vim'.
Executing Test_nomodifiable()

Cannot find a 'vim'."test_man.res" [New File][57;16H[K[57;16H[New] 0L, 0C written
Executed 2 tests"messages"[57;12H[K[57;12H194L, 4772C[57;12H[K[57;12H199L, 4875C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_marks.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_marks.vim" 26 lines, 775 characters
Executing Test_Incr_Marks()
Executing Test_Restore_DelMark()[57;1H[K[57;1H1 more line; before #2  0 seconds ago1 line less; after #2  0 seconds ago[57;37H[K[57;3Hmore line; before #2  0 seconds ago"test_marks.res" [New File][57;28H[K[57;18H[K[57;18H[New] 0L, 0C written
Executed 2 tests"messages"[57;12H[K[57;12H199L, 4875C[57;12H[K[57;12H204L, 4975C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_matchadd_conceal.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_matchadd_conceal.vim" 289 lines, 9276 characters[?1l>[?12l[?25h[?1049l[m[m[0m[H[2J[m[0m[57;1HExecuting Test_clearmatches()[m[m[0m[H[2J[2;1H# This is a Test
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H" Test for matchadd() and conceal feature
if !has('conceal')
  finish
endif

if !has('gui_running') && has('unix')
  set term=ansi
endif

function! s:screenline(lnum) abort
  let line = []
  for c in range(1, winwidth(0))
    call add(line, nr2char(screenchar(a:lnum, c)))
  endfor
  return s:trim(join(line, ''))
endfunction

function! s:trim(str) abort
  return matchstr(a:str,'^\s*\zs.\{-}\ze\s*$')
endfunction

function! Test_simple_matchadd()
  new

  1put='# This is a Test'
  "[13C1234567890123456
  let expect = '# This is a Test'
[7mtest_matchadd_conceal.vim                                                              [m[m[0m[H[2J[2;1H#[37m[40mZ[0mThis[37m[40mZ[0mis[37m[40mZ[0ma[37m[40mZ[0mTest
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H" Test for matchadd() and conceal feature
if !has('conceal')
  finish
endif

if !has('gui_running') && has('unix')
  set term=ansi
endif

function! s:screenline(lnum) abort
  let line = []
  for c in range(1, winwidth(0))
    call add(line, nr2char(screenchar(a:lnum, c)))
  endfor
  return s:trim(join(line, ''))
endfunction

function! s:trim(str) abort
  return matchstr(a:str,'^\s*\zs.\{-}\ze\s*$')
endfunction

function! Test_simple_matchadd()
  new

  1put='# This is a Test'
  "[13C1234567890123456
  let expect = '# This is a Test'
[7mtest_matchadd_conceal.vim                                                              [0m[57;1HExecuting Test_default_conceal_char()[m[m[0m[H[2J[2;1H#[37m[40m [0mThis[37m[40m [0mis[37m[40m [0ma[37m[40m [0mTest
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H" Test for matchadd() and conceal feature
if !has('conceal')
  finish
endif

if !has('gui_running') && has('unix')
  set term=ansi
endif

function! s:screenline(lnum) abort
  let line = []
  for c in range(1, winwidth(0))
    call add(line, nr2char(screenchar(a:lnum, c)))
  endfor
  return s:trim(join(line, ''))
endfunction

function! s:trim(str) abort
  return matchstr(a:str,'^\s*\zs.\{-}\ze\s*$')
endfunction

function! Test_simple_matchadd()
  new

  1put='# This is a Test'
  "[13C1234567890123456
  let expect = '# This is a Test'
[7mtest_matchadd_conceal.vim                                                              [m[m[0m[H[2J[2;1H#[37m[40m+[0mThis[37m[40m+[0mis[37m[40m+[0ma[37m[40m+[0mTest
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H" Test for matchadd() and conceal feature
if !has('conceal')
  finish
endif

if !has('gui_running') && has('unix')
  set term=ansi
endif

function! s:screenline(lnum) abort
  let line = []
  for c in range(1, winwidth(0))
    call add(line, nr2char(screenchar(a:lnum, c)))
  endfor
  return s:trim(join(line, ''))
endfunction

function! s:trim(str) abort
  return matchstr(a:str,'^\s*\zs.\{-}\ze\s*$')
endfunction

function! Test_simple_matchadd()
  new

  1put='# This is a Test'
  "[13C1234567890123456
  let expect = '# This is a Test'
[7mtest_matchadd_conceal.vim                                                              [0m[57;1HExecuting Test_matchadd_and_conceallevel_3()[m[m[0m[H[2J[2;1H[34m#ThisisaTest[0m
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H[34m" Test for matchadd() and conceal feature[0m
[33mif[0m ![36mhas[0m[35m([0m[31m'conceal'[0m[35m)[0m
  [33mfinish
endif

if[0m ![36mhas[0m[35m([0m[31m'gui_running'[0m[35m)[0m [33m&&[0m [36mhas[0m[35m([0m[31m'unix'[0m[35m)[0m
  [33mset[0m [35mterm[0m=ansi
[33mendif

function[0m! [35ms:[0mscreenline[35m([0mlnum[35m)[0m abort
  [33mlet[0m [36mline[0m [33m=[0m []
  [33mfor[0m [33mc[0m [33min[0m [36mrange[0m[35m([0m[31m1[0m, [36mwinwidth[0m[35m([0m[31m0[0m[35m))[0m
    [33mcall[0m [36madd[0m[35m([0mline, [36mnr2char[0m[35m([0m[36mscreenchar[0m[35m([0m[36ma:lnum[0m, c[35m)))[0m
  [33mendfor
[0m  [33mreturn[0m s:trim[35m([0m[36mjoin[0m[35m([0mline, [31m''[0m[35m))[0m
[33mendfunction

function[0m! [35ms:[0mtrim[35m([0mstr[35m)[0m abort
  [33mreturn[0m [36mmatchstr[0m[35m([0m[36ma:str[0m,[31m'^\s*\zs.\{-}\ze\s*$'[0m[35m)[0m
[33mendfunction

function[0m! Test_simple_matchadd[35m()[0m
  [33mnew[0m

  [31m1[0mput[33m=[0m[31m'# This is a Test'[0m
[34m  "             1234567890123456[0m
  [33mlet[0m [36mexpect[0m [33m=[0m [31m'# This is a Test'[0m
[7mtest_matchadd_conceal.vim                                                              [m[m[0m[H[2J[2;1H[34m#Thisisa[0m[1m[37m[41m Test[0m
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H[34m" Test for matchadd() and conceal feature[0m
[33mif[0m ![36mhas[0m[35m([0m[31m'conceal'[0m[35m)[0m
  [33mfinish
endif

if[0m ![36mhas[0m[35m([0m[31m'gui_running'[0m[35m)[0m [33m&&[0m [36mhas[0m[35m([0m[31m'unix'[0m[35m)[0m
  [33mset[0m [35mterm[0m=ansi
[33mendif

function[0m! [35ms:[0mscreenline[35m([0mlnum[35m)[0m abort
  [33mlet[0m [36mline[0m [33m=[0m []
  [33mfor[0m [33mc[0m [33min[0m [36mrange[0m[35m([0m[31m1[0m, [36mwinwidth[0m[35m([0m[31m0[0m[35m))[0m
    [33mcall[0m [36madd[0m[35m([0mline, [36mnr2char[0m[35m([0m[36mscreenchar[0m[35m([0m[36ma:lnum[0m, c[35m)))[0m
  [33mendfor
[0m  [33mreturn[0m s:trim[35m([0m[36mjoin[0m[35m([0mline, [31m''[0m[35m))[0m
[33mendfunction

function[0m! [35ms:[0mtrim[35m([0mstr[35m)[0m abort
  [33mreturn[0m [36mmatchstr[0m[35m([0m[36ma:str[0m,[31m'^\s*\zs.\{-}\ze\s*$'[0m[35m)[0m
[33mendfunction

function[0m! Test_simple_matchadd[35m()[0m
  [33mnew[0m

  [31m1[0mput[33m=[0m[31m'# This is a Test'[0m
[34m  "             1234567890123456[0m
  [33mlet[0m [36mexpect[0m [33m=[0m [31m'# This is a Test'[0m
[7mtest_matchadd_conceal.vim                                                              [0m[57;1HExecuting Test_matchadd_and_syn_conceal()[m[m[0m[H[2J[1;1HInductive [37m[40m-[0m : Type := | true : [37m[40m-[0m | false : [37m[40m-[0m.

[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H[34m" Test for matchadd() and conceal feature[0m
[33mif[0m ![36mhas[0m[35m([0m[31m'conceal'[0m[35m)[0m
  [33mfinish
endif

if[0m ![36mhas[0m[35m([0m[31m'gui_running'[0m[35m)[0m [33m&&[0m [36mhas[0m[35m([0m[31m'unix'[0m[35m)[0m
  [33mset[0m [35mterm[0m=ansi
[33mendif

function[0m! [35ms:[0mscreenline[35m([0mlnum[35m)[0m abort
  [33mlet[0m [36mline[0m [33m=[0m []
  [33mfor[0m [33mc[0m [33min[0m [36mrange[0m[35m([0m[31m1[0m, [36mwinwidth[0m[35m([0m[31m0[0m[35m))[0m
    [33mcall[0m [36madd[0m[35m([0mline, [36mnr2char[0m[35m([0m[36mscreenchar[0m[35m([0m[36ma:lnum[0m, c[35m)))[0m
  [33mendfor
[0m  [33mreturn[0m s:trim[35m([0m[36mjoin[0m[35m([0mline, [31m''[0m[35m))[0m
[33mendfunction

function[0m! [35ms:[0mtrim[35m([0mstr[35m)[0m abort
  [33mreturn[0m [36mmatchstr[0m[35m([0m[36ma:str[0m,[31m'^\s*\zs.\{-}\ze\s*$'[0m[35m)[0m
[33mendfunction

function[0m! Test_simple_matchadd[35m()[0m
  [33mnew[0m

  [31m1[0mput[33m=[0m[31m'# This is a Test'[0m
[34m  "             1234567890123456[0m
  [33mlet[0m [36mexpect[0m [33m=[0m [31m'# This is a Test'[0m
[7mtest_matchadd_conceal.vim                                                              [m[m[0m[H[2J[1;1HInductive[31m [0m[37m[40m-[0m[31m [0m: Type := | true : [37m[40m-[0m | false : [37m[40m-[0m.

[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H[34m" Test for matchadd() and conceal feature[0m
[33mif[0m ![36mhas[0m[35m([0m[31m'conceal'[0m[35m)[0m
  [33mfinish
endif

if[0m ![36mhas[0m[35m([0m[31m'gui_running'[0m[35m)[0m [33m&&[0m [36mhas[0m[35m([0m[31m'unix'[0m[35m)[0m
  [33mset[0m [35mterm[0m=ansi
[33mendif

function[0m! [35ms:[0mscreenline[35m([0mlnum[35m)[0m abort
  [33mlet[0m [36mline[0m [33m=[0m []
  [33mfor[0m [33mc[0m [33min[0m [36mrange[0m[35m([0m[31m1[0m, [36mwinwidth[0m[35m([0m[31m0[0m[35m))[0m
    [33mcall[0m [36madd[0m[35m([0mline, [36mnr2char[0m[35m([0m[36mscreenchar[0m[35m([0m[36ma:lnum[0m, c[35m)))[0m
  [33mendfor
[0m  [33mreturn[0m s:trim[35m([0m[36mjoin[0m[35m([0mline, [31m''[0m[35m))[0m
[33mendfunction

function[0m! [35ms:[0mtrim[35m([0mstr[35m)[0m abort
  [33mreturn[0m [36mmatchstr[0m[35m([0m[36ma:str[0m,[31m'^\s*\zs.\{-}\ze\s*$'[0m[35m)[0m
[33mendfunction

function[0m! Test_simple_matchadd[35m()[0m
  [33mnew[0m

  [31m1[0mput[33m=[0m[31m'# This is a Test'[0m
[34m  "             1234567890123456[0m
  [33mlet[0m [36mexpect[0m [33m=[0m [31m'# This is a Test'[0m
[7mtest_matchadd_conceal.vim                                                              [0m[57;1HExecuting Test_matchadd_repeat_conceal_with_syntax_off()[1;1H[K[2;1HTARGET_TARGETTARGET[37m[40mt[0m_[37m[40mtt[0m[2;5H[K[57;16Hsimple_matchadd()[57;33H[K[m[m[0m[H[2J[2;1H#[37m[40m [0mThis[37m[40m [0mis[37m[40m [0ma[37m[40m [0mTest
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H[34m" Test for matchadd() and conceal feature[0m
[33mif[0m ![36mhas[0m[35m([0m[31m'conceal'[0m[35m)[0m
  [33mfinish
endif

if[0m ![36mhas[0m[35m([0m[31m'gui_running'[0m[35m)[0m [33m&&[0m [36mhas[0m[35m([0m[31m'unix'[0m[35m)[0m
  [33mset[0m [35mterm[0m=ansi
[33mendif

function[0m! [35ms:[0mscreenline[35m([0mlnum[35m)[0m abort
  [33mlet[0m [36mline[0m [33m=[0m []
  [33mfor[0m [33mc[0m [33min[0m [36mrange[0m[35m([0m[31m1[0m, [36mwinwidth[0m[35m([0m[31m0[0m[35m))[0m
    [33mcall[0m [36madd[0m[35m([0mline, [36mnr2char[0m[35m([0m[36mscreenchar[0m[35m([0m[36ma:lnum[0m, c[35m)))[0m
  [33mendfor
[0m  [33mreturn[0m s:trim[35m([0m[36mjoin[0m[35m([0mline, [31m''[0m[35m))[0m
[33mendfunction

function[0m! [35ms:[0mtrim[35m([0mstr[35m)[0m abort
  [33mreturn[0m [36mmatchstr[0m[35m([0m[36ma:str[0m,[31m'^\s*\zs.\{-}\ze\s*$'[0m[35m)[0m
[33mendfunction

function[0m! Test_simple_matchadd[35m()[0m
  [33mnew[0m

  [31m1[0mput[33m=[0m[31m'# This is a Test'[0m
[34m  "             1234567890123456[0m
  [33mlet[0m [36mexpect[0m [33m=[0m [31m'# This is a Test'[0m
[7mtest_matchadd_conceal.vim                                                              [0m[57;1HExecuting Test_simple_matchadd_and_conceal()[m[m[0m[H[2J[2;1H#[37m[40mX[0mThis[37m[40mX[0mis[37m[40mX[0ma[37m[40mX[0mTest
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H[34m" Test for matchadd() and conceal feature[0m
[33mif[0m ![36mhas[0m[35m([0m[31m'conceal'[0m[35m)[0m
  [33mfinish
endif

if[0m ![36mhas[0m[35m([0m[31m'gui_running'[0m[35m)[0m [33m&&[0m [36mhas[0m[35m([0m[31m'unix'[0m[35m)[0m
  [33mset[0m [35mterm[0m=ansi
[33mendif

function[0m! [35ms:[0mscreenline[35m([0mlnum[35m)[0m abort
  [33mlet[0m [36mline[0m [33m=[0m []
  [33mfor[0m [33mc[0m [33min[0m [36mrange[0m[35m([0m[31m1[0m, [36mwinwidth[0m[35m([0m[31m0[0m[35m))[0m
    [33mcall[0m [36madd[0m[35m([0mline, [36mnr2char[0m[35m([0m[36mscreenchar[0m[35m([0m[36ma:lnum[0m, c[35m)))[0m
  [33mendfor
[0m  [33mreturn[0m s:trim[35m([0m[36mjoin[0m[35m([0mline, [31m''[0m[35m))[0m
[33mendfunction

function[0m! [35ms:[0mtrim[35m([0mstr[35m)[0m abort
  [33mreturn[0m [36mmatchstr[0m[35m([0m[36ma:str[0m,[31m'^\s*\zs.\{-}\ze\s*$'[0m[35m)[0m
[33mendfunction

function[0m! Test_simple_matchadd[35m()[0m
  [33mnew[0m

  [31m1[0mput[33m=[0m[31m'# This is a Test'[0m
[34m  "             1234567890123456[0m
  [33mlet[0m [36mexpect[0m [33m=[0m [31m'# This is a Test'[0m
[7mtest_matchadd_conceal.vim                                                              [0m[57;1HExecuting Test_syn_and_match_conceal()[m[m[0m[H[2J[2;1H#[37m[40mZ[0mThis[37m[40mZ[0mis[37m[40mZ[0ma[37m[40mZ[0mTest
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H[34m" Test for matchadd() and conceal feature[0m
[33mif[0m ![36mhas[0m[35m([0m[31m'conceal'[0m[35m)[0m
  [33mfinish
endif

if[0m ![36mhas[0m[35m([0m[31m'gui_running'[0m[35m)[0m [33m&&[0m [36mhas[0m[35m([0m[31m'unix'[0m[35m)[0m
  [33mset[0m [35mterm[0m=ansi
[33mendif

function[0m! [35ms:[0mscreenline[35m([0mlnum[35m)[0m abort
  [33mlet[0m [36mline[0m [33m=[0m []
  [33mfor[0m [33mc[0m [33min[0m [36mrange[0m[35m([0m[31m1[0m, [36mwinwidth[0m[35m([0m[31m0[0m[35m))[0m
    [33mcall[0m [36madd[0m[35m([0mline, [36mnr2char[0m[35m([0m[36mscreenchar[0m[35m([0m[36ma:lnum[0m, c[35m)))[0m
  [33mendfor
[0m  [33mreturn[0m s:trim[35m([0m[36mjoin[0m[35m([0mline, [31m''[0m[35m))[0m
[33mendfunction

function[0m! [35ms:[0mtrim[35m([0mstr[35m)[0m abort
  [33mreturn[0m [36mmatchstr[0m[35m([0m[36ma:str[0m,[31m'^\s*\zs.\{-}\ze\s*$'[0m[35m)[0m
[33mendfunction

function[0m! Test_simple_matchadd[35m()[0m
  [33mnew[0m

  [31m1[0mput[33m=[0m[31m'# This is a Test'[0m
[34m  "             1234567890123456[0m
  [33mlet[0m [36mexpect[0m [33m=[0m [31m'# This is a Test'[0m
[7mtest_matchadd_conceal.vim                                                              [m[m[0m[H[2J[2;1H#[37m[40m*[0mThis[37m[40m*[0mis[37m[40m*[0ma[37m[40m*[0mTest
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H[34m" Test for matchadd() and conceal feature[0m
[33mif[0m ![36mhas[0m[35m([0m[31m'conceal'[0m[35m)[0m
  [33mfinish
endif

if[0m ![36mhas[0m[35m([0m[31m'gui_running'[0m[35m)[0m [33m&&[0m [36mhas[0m[35m([0m[31m'unix'[0m[35m)[0m
  [33mset[0m [35mterm[0m=ansi
[33mendif

function[0m! [35ms:[0mscreenline[35m([0mlnum[35m)[0m abort
  [33mlet[0m [36mline[0m [33m=[0m []
  [33mfor[0m [33mc[0m [33min[0m [36mrange[0m[35m([0m[31m1[0m, [36mwinwidth[0m[35m([0m[31m0[0m[35m))[0m
    [33mcall[0m [36madd[0m[35m([0mline, [36mnr2char[0m[35m([0m[36mscreenchar[0m[35m([0m[36ma:lnum[0m, c[35m)))[0m
  [33mendfor
[0m  [33mreturn[0m s:trim[35m([0m[36mjoin[0m[35m([0mline, [31m''[0m[35m))[0m
[33mendfunction

function[0m! [35ms:[0mtrim[35m([0mstr[35m)[0m abort
  [33mreturn[0m [36mmatchstr[0m[35m([0m[36ma:str[0m,[31m'^\s*\zs.\{-}\ze\s*$'[0m[35m)[0m
[33mendfunction

function[0m! Test_simple_matchadd[35m()[0m
  [33mnew[0m

  [31m1[0mput[33m=[0m[31m'# This is a Test'[0m
[34m  "             1234567890123456[0m
  [33mlet[0m [36mexpect[0m [33m=[0m [31m'# This is a Test'[0m
[7mtest_matchadd_conceal.vim                                                              [0m[57;1HExecuting Test_using_matchaddpos()[m[m[0m[H[2J[2;1H[34m#[0m[37m[40mP[0m[34mis a Test[0m
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H[34m" Test for matchadd() and conceal feature[0m
[33mif[0m ![36mhas[0m[35m([0m[31m'conceal'[0m[35m)[0m
  [33mfinish
endif

if[0m ![36mhas[0m[35m([0m[31m'gui_running'[0m[35m)[0m [33m&&[0m [36mhas[0m[35m([0m[31m'unix'[0m[35m)[0m
  [33mset[0m [35mterm[0m=ansi
[33mendif

function[0m! [35ms:[0mscreenline[35m([0mlnum[35m)[0m abort
  [33mlet[0m [36mline[0m [33m=[0m []
  [33mfor[0m [33mc[0m [33min[0m [36mrange[0m[35m([0m[31m1[0m, [36mwinwidth[0m[35m([0m[31m0[0m[35m))[0m
    [33mcall[0m [36madd[0m[35m([0mline, [36mnr2char[0m[35m([0m[36mscreenchar[0m[35m([0m[36ma:lnum[0m, c[35m)))[0m
  [33mendfor
[0m  [33mreturn[0m s:trim[35m([0m[36mjoin[0m[35m([0mline, [31m''[0m[35m))[0m
[33mendfunction

function[0m! [35ms:[0mtrim[35m([0mstr[35m)[0m abort
  [33mreturn[0m [36mmatchstr[0m[35m([0m[36ma:str[0m,[31m'^\s*\zs.\{-}\ze\s*$'[0m[35m)[0m
[33mendfunction

function[0m! Test_simple_matchadd[35m()[0m
  [33mnew[0m

  [31m1[0mput[33m=[0m[31m'# This is a Test'[0m
[34m  "             1234567890123456[0m
  [33mlet[0m [36mexpect[0m [33m=[0m [31m'# This is a Test'[0m
[7mtest_matchadd_conceal.vim                                                              [0m[57;1H"test_matchadd_conceal.res" [New File][57;29H[K[57;29H[New] 0L, 0C written
Executed 9 tests"messages"[57;12H[K[57;12H204L, 4975C[57;12H[K[57;12H216L, 5389C written
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_nested_function.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_nested_function.vim" 32 lines, 622 characters
Executing Test_nested_functions()"test_nested_function.res" [New File][57;28H[K[57;28H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H216L, 5389C[57;12H[K[57;12H220L, 5471C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_netbeans.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_netbeans.vim" 80 lines, 2145 characters"test_netbeans.res" [New File][57;21H[K[57;21H[New] 0L, 0C written
Executed 0 test"messages"[57;12H[K[57;12H220L, 5471C[57;12H[K[57;12H223L, 5512C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_normal.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_normal.vim" 2268 lines, 58553 characters
Executing Test_normal00_optrans()[57;1H[K[57;1H
Executing Test_normal01_keymodel()4 lines yanked[57;15H[K[57;1HExecuting Test_normal02_selectmode()[57;1H[K[57;1H10 fewer lines[57;1H[K[57;1H
Executing Test_normal02_selectmode2()[57;1H[K[57;1H:set im[?12l[?25h[?25l[57;1H[K[57;1H:set noim
Executing Test_normal03_join()
Executing Test_normal04_filter()[57;1H[K[57;1H:.!sed -e 's/^/|    /'[?12l[?25h[22C[?1l>[?1049lone
[?1049h[?1h=[?25l[57;1H[K[57;1H:.!sed -e 's/^/|    /'[?12l[?25h[?25l[57;1H[K[57;1H:.![57;1H[K[57;1H:!echo one[10C[?1l>[?12l[?25h[?1049l
[No write since last change]
one

Press ENTER or type command to continue[?1049h[?1h=[?25l[57;1H[K[57;1H:.!![?12l[?25h
[?25lExecuting Test_normal05_formatexpr()
Executing Test_normal05_formatexpr_newbuf()"another" [New File][57;21H[K[57;1H
Executing Test_normal05_formatexpr_setopt()
Executing Test_normal06_formatprg()[57;1H[K[57;1H:.,$!./Xsed_format.sh[?12l[?25h[?25l7 lines filtered[57;17H[K[57;1H
Executing Test_normal07_internalfmt()7 fewer lin[57;14H[K[57;1H
Executing Test_normal08_fold()
Executing Test_normal09_operatorfunc()
11 substitutions on 11 lines
Executing Test_normal09a_operatorfunc()
11 substitutions on 11 lines
Executing Test_normal10_expand()
Executing Test_normal11_showcmd()[57;1H[K[57;1H
Executing Test_normal12_nv_error()
Executing Test_normal13_help()"help.txt" [57;12H[K[57;12H[readonly] 225L, 8437C
Executing Test_normal14_page()
Executing Test_normal14_page_eol()[57;1H[K[57;1H
Executing Test_normal15_z_scroll_vert()
Executing Test_normal16_z_scroll_hor()
Executing Test_normal17_z_scroll_hor2()
Executing Test_normal18_z_fold()
Executing Test_normal19_z_spell()Word 'goood' added to ./Xspellfile.add[31msearch hit BOTTOM, continuing at TOP[m[57;37H[K[57;1HWord 'goood' added to ./Xspellfile.add[57;7H2 goood' added to ./Xspellfile.add[57;25H/tmp/vfsXaZZ/9[57;39H[K[57;16Hremoved from /tmp/vfsXaZZ/9[57;7Hgoood' added to /tmp/vfsXaZZ/9[57;37H[K[57;14Hremoved from /tmp/vfsXaZZ/9[57;14Hadded to ./Xspellfile.add[57;39H[K[57;14Hremoved from ./Xspellfile.add[57;7H2 goood' added to ./Xspellfile.add[57;41H[K[57;16Hremoved from ./Xspellfile.add[57;7Hgoood' added to ./Xspellfile2.add[57;40H[K[57;1H
Executing Test_normal20_exmode()
Executing Test_normal21_nv_hat()"Xfoobar" [New File][57;21H[K[57;4Hile2" [New File][57;20H[K[57;1H
Executing Test_normal22_zet()
Executing Test_normal23_K()"version8.txt" [57;16H[K[57;16H[readonly] 14926L, 562750C[57;27Hline 1 of 14926 --0%-- col 1"man" [New File][57;17H[K[57;2Haa%bb" [New File]"cc|dd:! man --pager=cat 'man'[?1l>[?12l[?25h[?1049l
[No write since last change]
MAN(1)                           Manual pager utils                           MAN(1)

NAME
       man - an interface to the on-line reference manuals

SYNOPSIS
       man [-C file] [-d] [-D] [--warnings[=warnings]] [-R encoding] [-L locale] [-m
       system[,...]] [-M path] [-S list] [-e extension] [-i|-I] [--regex|--wildcard]
       [--names-only]  [-a]  [-u]  [--no-subpages]  [-P  pager] [-r prompt] [-7] [-E
       encoding]   [--no-hyphenation]   [--no-justification]   [-p   string]    [-t]
       [-T[device]] [-H[browser]] [-X[dpi]] [-Z] [[section] page[.section] ...] ...
       man -k [apropos options] regexp ...
       man -K [-w|-W] [-S list] [-i|-I] [--regex] [section] term ...
       man -f [whatis options] page ...
       man  -l [-C file] [-d] [-D] [--warnings[=warnings]] [-R encoding] [-L locale]
       [-P pager] [-r prompt] [-7]  [-E  encoding]  [-p  string]  [-t]  [-T[device]]
       [-H[browser]] [-X[dpi]] [-Z] file ...
       man -w|-W [-C file] [-d] [-D] page ...
       man -c [-C file] [-d] [-D] page ...
       man [-?V]

DESCRIPTION
       man  is  the  system's manual pager.  Each page argument given to man is nor-
       mally the name of a program, utility or function.  The manual page associated
       with each of these arguments is then found and displayed.  A section, if pro-
       vided, will direct man to look only in  that  section  of  the  manual.   The
       default action is to search in all of the available sections following a pre-
       defined order ("1 n l 8 3 2 5 4 9 6 7" by default, unless overridden  by  the
       SECTION  directive  in  /etc/man_db.conf),  and  to  show only the first page
       found, even if page exists in several sections.

       The table below shows the section numbers of the manual followed by the types
       of pages they contain.

       1   Executable programs or shell commands
       2   System calls (functions provided by the kernel)
       3   Library calls (functions within program libraries)
       4   Special files (usually found in /dev)
       5   File formats and conventions eg /etc/passwd
       6   Games
       7   Miscellaneous  (including  macro  packages and conventions), e.g. man(7),
           groff(7)
       8   System administration commands (usually only for root)
       9   Kernel routines [Non standard]

       A manual page consists of several sections.

       Conventional section names include NAME,  SYNOPSIS,  CONFIGURATION,  DESCRIP-
       TION,  OPTIONS,  EXIT STATUS,  RETURN VALUE, ERRORS, ENVIRONMENT, FILES, VER-
       SIONS, CONFORMING TO, NOTES, BUGS, EXAMPLE, AUTHORS, and SEE ALSO.

       The following conventions apply to the SYNOPSIS section and can be used as  a
       guide in other sections.

       bold text          type exactly as shown.
       italic text        replace with appropriate argument.
       [-abc]             any or all arguments within [ ] are optional.
       -a|-b              options delimited by | cannot be used together.
       argument ...       argument is repeatable.
       [expression] ...   entire expression within [ ] is repeatable.

       Exact  rendering  may vary depending on the output device.  For instance, man
       will usually not be able to render italics when running in  a  terminal,  and
       will typically use underlined or coloured text instead.

       The  command or function illustration is a pattern that should match all pos-
       sible invocations.  In some cases  it  is  advisable  to  illustrate  several
       exclusive  invocations  as  is  shown  in the SYNOPSIS section of this manual
       page.

EXAMPLES
       man ls
           Display the manual page for the item (program) ls.

       man man.7
           Display the manual page for macro package man from section 7.

       man -a intro
           Display, in succession, all of the available intro manual pages contained
           within the manual.  It is possible to quit between successive displays or
           skip any of them.

       man -t alias | lpr -Pps
           Format the manual page referenced by  `alias',  usually  a  shell  manual
           page,  into  the default troff or groff format and pipe it to the printer
           named ps.  The default output  for  groff  is  usually  PostScript.   man
           --help should advise as to which processor is bound to the -t option.

       man -l -Tdvi ./foo.1x.gz > ./foo.1x.dvi
           This  command  will  decompress  and  format the nroff source manual page
           ./foo.1x.gz into a device independent (dvi)  file.   The  redirection  is
           necessary  as  the -T flag causes output to be directed to stdout with no
           pager.  The output could be viewed with a program such as xdvi or further
           processed into PostScript using a program such as dvips.

       man -k printf
           Search  the  short  descriptions  and  manual  page names for the keyword
           printf as regular expression.  Print  out  any  matches.   Equivalent  to
           apropos printf.

       man -f smail
           Lookup  the  manual  pages  referenced  by  smail and print out the short
           descriptions of any found.  Equivalent to whatis smail.

OVERVIEW
       Many options are available to man in order to give  as  much  flexibility  as
       possible to the user.  Changes can be made to the search path, section order,
       output processor, and other behaviours and operations detailed below.

       If set, various environment variables are interrogated to determine the oper-
       ation  of man.  It is possible to set the `catch all' variable $MANOPT to any
       string in command line format with the exception that any spaces used as part
       of  an option's argument must be escaped (preceded by a backslash).  man will
       parse $MANOPT prior to parsing its own command line.  Those options requiring
       an argument will be overridden by the same options found on the command line.
       To reset all of the options set in $MANOPT, -D can be specified as  the  ini-
       tial  command line option.  This will allow man to `forget' about the options
       specified in $MANOPT although they must still have been valid.

       The manual pager utilities packaged as man-db make  extensive  use  of  index
       database  caches.  These caches contain information such as where each manual
       page can be found on the filesystem and  what  its  whatis  (short  one  line
       description of the man page) contains, and allow man to run faster than if it
       had to search the filesystem each time to find the appropriate  manual  page.
       If requested using the -u option, man will ensure that the caches remain con-
       sistent, which can obviate the need to manually run software to update tradi-
       tional whatis text databases.

       If  man  cannot find a mandb initiated index database for a particular manual
       page hierarchy, it will still search for the requested manual pages, although
       file  globbing  will be necessary to search within that hierarchy.  If whatis
       or apropos fails to find an index it will try to extract information  from  a
       traditional whatis database instead.

       These utilities support compressed source nroff files having, by default, the
       extensions of .Z, .z and .gz.  It is possible to deal  with  any  compression
       extension,  but  this  information  must  be known at compile time.  Also, by
       default, any cat pages produced are compressed  using  gzip.   Each  `global'
       manual  page  hierarchy such as /usr/share/man or /usr/X11R6/man may have any
       directory as its cat page hierarchy.  Traditionally the cat pages are  stored
       under  the  same  hierarchy  as  the man pages, but for reasons such as those
       specified in the File Hierarchy Standard (FHS), it may  be  better  to  store
       them  elsewhere.  For details on how to do this, please read manpath(5).  For
       details on why to do this, read the standard.

       International support is available with this package.  Native language manual
       pages  are  accessible  (if available on your system) via use of locale func-
       tions.  To activate such support, it is necessary to set either $LC_MESSAGES,
       $LANG  or  another  system  dependent  environment  variable to your language
       locale, usually specified in the POSIX 1003.1 based format:

       <language>[_<territory>[.<character-set>[,<version>]]]

       If the desired page is available in your locale, it will be displayed in lieu
       of the standard (usually American English) page.

       Support for international message catalogues is also featured in this package
       and can be activated in the same way, again if available.  If you  find  that
       the  manual  pages  and message catalogues supplied with this package are not
       available in your native language and you would like to supply  them,  please
       contact the maintainer who will be coordinating such activity.

       For  information  regarding other features and extensions available with this
       manual pager, please read the documents supplied with the package.

DEFAULTS
       man will search for the  desired  manual  pages  within  the  index  database
       caches.  If the -u option is given, a cache consistency check is performed to
       ensure the databases accurately reflect the filesystem.  If  this  option  is
       always given, it is not generally necessary to run mandb after the caches are
       initially created, unless a cache becomes corrupt.  However, the  cache  con-
       sistency check can be slow on systems with many manual pages installed, so it
       is not performed by default, and system administrators may wish to run  mandb
       every  week  or  so to keep the database caches fresh.  To forestall problems
       caused by outdated caches, man will fall back to file  globbing  if  a  cache
       lookup fails, just as it would if no cache was present.

       Once  a  manual  page has been located, a check is performed to find out if a
       relative preformatted `cat' file already exists and is newer than  the  nroff
       file.   If  it  does and is, this preformatted file is (usually) decompressed
       and then displayed, via use of a pager.  The pager can be specified in a num-
       ber  of  ways, or else will fall back to a default is used (see option -P for
       details).  If no cat is found or is older than the nroff file, the  nroff  is
       filtered through various programs and is shown immediately.

       If a cat file can be produced (a relative cat directory exists and has appro-
       priate permissions), man will compress and store the cat file  in  the  back-
       ground.

       The  filters  are deciphered by a number of means.  Firstly, the command line
       option -p or the environment variable $MANROFFSEQ is interrogated.  If -p was
       not  used  and  the environment variable was not set, the initial line of the
       nroff file is parsed for a preprocessor string.   To  contain  a  valid  pre-
       processor string, the first line must resemble

       '\" <string>

       where string can be any combination of letters described by option -p below.

       If none of the above methods provide any filter information, a default set is
       used.

       A formatting pipeline is formed from the filters and  the  primary  formatter
       (nroff  or  [tg]roff  with -t) and executed.  Alternatively, if an executable
       program mandb_nfmt (or mandb_tfmt with -t) exists in the man tree root, it is
       executed  instead.   It  gets passed the manual source file, the preprocessor
       string, and optionally the device specified with -T or -E as arguments.

OPTIONS
       Non argument options that are duplicated  either  on  the  command  line,  in
       $MANOPT,  or  both,  are  not harmful.  For options that require an argument,
       each duplication will override the previous argument value.

   General options
       -C file, --config-file=file
              Use this user configuration file rather than the  default  of  ~/.man-
              path.

       -d, --debug
              Print debugging information.

       -D, --default
              This  option  is  normally  issued as the very first option and resets
              man's behaviour to its default.  Its use is  to  reset  those  options
              that  may  have  been set in $MANOPT.  Any options that follow -D will
              have their usual effect.

       --warnings[=warnings]
              Enable warnings from groff.  This may be used to perform sanity checks
              on  the  source  text  of manual pages.  warnings is a comma-separated
              list of warning names; if it is not supplied, the  default  is  "mac".
              See  the "Warnings" node in info groff for a list of available warning
              names.

   Main modes of operation
       -f, --whatis
              Equivalent to whatis.  Display a short  description  from  the  manual
              page, if available.  See whatis(1) for details.

       -k, --apropos
              Equivalent  to apropos.  Search the short manual page descriptions for
              keywords and display any matches.  See apropos(1) for details.

       -K, --global-apropos
              Search for text in all manual pages.  This is  a  brute-force  search,
              and is likely to take some time; if you can, you should specify a sec-
              tion to reduce the number of pages that need to be  searched.   Search
              terms  may  be simple strings (the default), or regular expressions if
              the --regex option is used.

              Note that this searches the sources of the manual pages, not the  ren-
              dered text, and so may include false positives due to things like com-
              ments in source files.  Searching the  rendered  text  would  be  much
              slower.

       -l, --local-file
              Activate  `local' mode.  Format and display local manual files instead
              of searching through the system's manual collection.  Each manual page
              argument  will  be  interpreted as an nroff source file in the correct
              format.  No cat file is produced.  If '-' is  listed  as  one  of  the
              arguments,  input  will  be taken from stdin.  When this option is not
              used, and man fails to find the page required, before  displaying  the
              error  message,  it  attempts  to  act as if this option was supplied,
              using the name as a filename and looking for an exact match.

       -w, --where, --path, --location
              Don't actually display the manual pages, but do print the  location(s)
              of the source nroff files that would be formatted.

       -W, --where-cat, --location-cat
              Don't  actually display the manual pages, but do print the location(s)
              of the cat files that would be displayed.  If -w and -W are both spec-
              ified, print both separated by a space.

       -c, --catman
              This option is not for general use and should only be used by the cat-
              man program.

       -R encoding, --recode=encoding
              Instead of formatting the manual page in the  usual  way,  output  its
              source  converted  to the specified encoding.  If you already know the
              encoding of the source file, you can  also  use  manconv(1)  directly.
              However,  this  option allows you to convert several manual pages to a
              single encoding without having to explicitly  state  the  encoding  of
              each, provided that they were already installed in a structure similar
              to a manual page hierarchy.

   Finding manual pages
       -L locale, --locale=locale
              man will normally determine your current locale by a  call  to  the  C
              function  setlocale(3)  which  interrogates  various environment vari-
              ables, possibly including  $LC_MESSAGES  and  $LANG.   To  temporarily
              override  the  determined  value,  use  this option to supply a locale
              string directly to man.  Note that it will not take effect  until  the
              search  for  pages  actually  begins.  Output such as the help message
              will always be displayed in the initially determined locale.

       -m system[,...], --systems=system[,...]
              If this system has access to other operating  system's  manual  pages,
              they  can  be accessed using this option.  To search for a manual page
              from NewOS's manual page collection, use the option -m NewOS.

              The system specified can be a combination of comma delimited operating
              system  names.   To  include a search of the native operating system's
              manual pages, include the system name  man  in  the  argument  string.
              This option will override the $SYSTEM environment variable.

       -M path, --manpath=path
              Specify  an  alternate  manpath  to use.  By default, man uses manpath
              derived code to determine the path to search.  This  option  overrides
              the $MANPATH environment variable and causes option -m to be ignored.

              A  path specified as a manpath must be the root of a manual page hier-
              archy structured into sections  as  described  in  the  man-db  manual
              (under  "The  manual page system").  To view manual pages outside such
              hierarchies, see the -l option.

       -S list, -s list, --sections=list
              List is a colon- or comma-separated list of  `order  specific'  manual
              sections  to  search.   This option overrides the $MANSECT environment
              variable.  (The -s spelling is for compatibility with System V.)

       -e sub-extension, --extension=sub-extension
              Some systems incorporate large packages of manual pages, such as those
              that  accompany  the Tcl package, into the main manual page hierarchy.
              To get around the problem of having two manual  pages  with  the  same
              name  such as exit(3), the Tcl pages were usually all assigned to sec-
              tion l.  As this is unfortunate, it is now possible to put  the  pages
              in  the correct section, and to assign a specific `extension' to them,
              in this case, exit(3tcl).  Under normal operation,  man  will  display
              exit(3)  in preference to exit(3tcl).  To negotiate this situation and
              to avoid having to know which section the page you require resides in,
              it is now possible to give man a sub-extension string indicating which
              package the page must belong to.  Using the above  example,  supplying
              the  option  -e tcl to man will restrict the search to pages having an
              extension of *tcl.

       -i, --ignore-case
              Ignore case when searching for manual pages.  This is the default.

       -I, --match-case
              Search for manual pages case-sensitively.

       --regex
              Show all pages with any part of either their names or  their  descrip-
              tions  matching  each  page  argument as a regular expression, as with
              apropos(1).  Since there is usually no reasonable way to pick a "best"
              page when searching for a regular expression, this option implies -a.

       --wildcard
              Show  all  pages with any part of either their names or their descrip-
              tions matching each page argument using shell-style wildcards, as with
              apropos(1)  --wildcard.   The page argument must match the entire name
              or description, or match on word boundaries in the description.  Since
              there  is usually no reasonable way to pick a "best" page when search-
              ing for a wildcard, this option implies -a.

       --names-only
              If the --regex or --wildcard option is used, match  only  page  names,
              not page descriptions, as with whatis(1).  Otherwise, no effect.

       -a, --all
              By  default,  man  will exit after displaying the most suitable manual
              page it finds.  Using this option forces man to display all the manual
              pages with names that match the search criteria.

       -u, --update
              This  option  causes man to perform an `inode level' consistency check
              on its database caches to ensure that they are an accurate representa-
              tion  of  the filesystem.  It will only have a useful effect if man is
              installed with the setuid bit set.

       --no-subpages
              By default, man will try to interpret pairs of manual page names given
              on  the  command  line as equivalent to a single manual page name con-
              taining a hyphen or an underscore.  This supports the  common  pattern
              of  programs  that implement a number of subcommands, allowing them to
              provide manual pages for each that can be accessed using similar  syn-
              tax  as would be used to invoke the subcommands themselves.  For exam-
              ple:

                $ man -aw git diff
                /usr/share/man/man1/git-diff.1.gz

              To disable this behaviour, use the --no-subpages option.

                $ man -aw --no-subpages git diff
                /usr/share/man/man1/git.1.gz
                /usr/share/man/man3/Git.3pm.gz
                /usr/share/man/man1/diff.1.gz

   Controlling formatted output
       -P pager, --pager=pager
              Specify which output pager to use.  By default, man uses  less.   This
              option  overrides  the  $MANPAGER  environment variable, which in turn
              overrides the $PAGER environment variable.  It is not used in conjunc-
              tion with -f or -k.

              The  value  may  be a simple command name or a command with arguments,
              and may use shell  quoting  (backslashes,  single  quotes,  or  double
              quotes).   It  may  not use pipes to connect multiple commands; if you
              need that, use a wrapper script, which may take the  file  to  display
              either as an argument or on standard input.

       -r prompt, --prompt=prompt
              If  a recent version of less is used as the pager, man will attempt to
              set its prompt and some sensible options.  The  default  prompt  looks
              like

               Manual page name(sec) line x

              where  name  denotes  the manual page name, sec denotes the section it
              was found under and x the current line number.  This  is  achieved  by
              using the $LESS environment variable.

              Supplying -r with a string will override this default.  The string may
              contain the text $MAN_PN which will be expanded to  the  name  of  the
              current  manual  page  and its section name surrounded by `(' and `)'.
              The string used to produce the default could be expressed as

              \ Manual\ page\ \$MAN_PN\ ?ltline\ %lt?L/%L.:
              byte\ %bB?s/%s..?\ (END):?pB\ %pB\\%..
              (press h for help or q to quit)

              It is broken into three lines here for the sake of  readability  only.
              For  its  meaning  see  the less(1) manual page.  The prompt string is
              first evaluated by the shell.   All  double  quotes,  back-quotes  and
              backslashes  in  the  prompt must be escaped by a preceding backslash.
              The prompt string may end in an escaped $ which  may  be  followed  by
              further options for less.  By default man sets the -ix8 options.

              The $MANLESS environment variable described below may be used to set a
              default prompt string if none is supplied on the command line.

       -7, --ascii
              When viewing a pure ascii(7) manual page on a 7 bit terminal or termi-
              nal emulator, some characters may not display correctly when using the
              latin1(7) device description with GNU nroff.  This option allows  pure
              ascii  manual  pages  to be displayed in ascii with the latin1 device.
              It will not translate any latin1 text.  The following table shows  the
              translations  performed:  some parts of it may only be displayed prop-
              erly when using GNU nroff's latin1(7) device.

              Description      Octal   latin1   ascii
              ----------------------------------------
              continuation      255      -        -
              hyphen
              bullet (middle    267      o        o
              dot)
              acute accent      264      '        '
              multiplication    327      x        x
              sign

              If  the  latin1 column displays correctly, your terminal may be set up
              for latin1 characters and this option is not necessary.  If the latin1
              and  ascii columns are identical, you are reading this page using this
              option or man did  not  format  this  page  using  the  latin1  device
              description.  If the latin1 column is missing or corrupt, you may need
              to view manual pages with this option.

              This option is ignored when using options -t, -H, -T, or -Z and may be
              useless for nroff other than GNU's.

       -E encoding, --encoding=encoding
              Generate  output for a character encoding other than the default.  For
              backward compatibility, encoding may be an nroff device such as ascii,
              latin1, or utf8 as well as a true character encoding such as UTF-8.

       --no-hyphenation, --nh
              Normally,  nroff will automatically hyphenate text at line breaks even
              in words that do not contain hyphens, if it is necessary to do  so  to
              lay  out  words on a line without excessive spacing.  This option dis-
              ables automatic hyphenation, so words will only be hyphenated if  they
              already contain hyphens.

              If you are writing a manual page and simply want to prevent nroff from
              hyphenating a word at an inappropriate point, do not use this  option,
              but consult the nroff documentation instead; for instance, you can put
              "\%" inside a word to indicate that  it  may  be  hyphenated  at  that
              point,  or  put  "\%"  at the start of a word to prevent it from being
              hyphenated.

       --no-justification, --nj
              Normally, nroff will automatically justify text to both margins.  This
              option disables full justification, leaving justified only to the left
              margin, sometimes called "ragged-right" text.

              If you are writing a manual page and simply want to prevent nroff from
              justifying certain paragraphs, do not use this option, but consult the
              nroff documentation instead; for instance,  you  can  use  the  ".na",
              ".nf",  ".fi", and ".ad" requests to temporarily disable adjusting and
              filling.

       -p string, --preprocessor=string
              Specify  the  sequence  of  preprocessors  to  run  before  nroff   or
              troff/groff.  Not all installations will have a full set of preproces-
              sors.  Some of the preprocessors and the  letters  used  to  designate
              them  are: eqn (e), grap (g), pic (p), tbl (t), vgrind (v), refer (r).
              This option overrides the $MANROFFSEQ environment  variable.   zsoelim
              is always run as the very first preprocessor.

       -t, --troff
              Use groff -mandoc to format the manual page to stdout.  This option is
              not required in conjunction with -H, -T, or -Z.

       -T[device], --troff-device[=device]
              This option is used to change groff (or possibly troff's) output to be
              suitable  for  a device other than the default.  It implies -t.  Exam-
              ples (provided with Groff-1.17) include dvi, latin1, ps, utf8, X75 and
              X100.

       -H[browser], --html[=browser]
              This  option will cause groff to produce HTML output, and will display
              that output in a web browser.  The choice of browser is determined  by
              the  optional  browser  argument  if  one is provided, by the $BROWSER
              environment variable, or by a compile-time default if  that  is  unset
              (usually  lynx).   This option implies -t, and will only work with GNU
              troff.

       -X[dpi], --gxditview[=dpi]
              This option displays the output of groff in a graphical  window  using
              the gxditview program.  The dpi (dots per inch) may be 75, 75-12, 100,
              or 100-12, defaulting to 75; the -12  variants  use  a  12-point  base
              font.   This  option implies -T with the X75, X75-12, X100, or X100-12
              device respectively.

       -Z, --ditroff
              groff will run troff and then use  an  appropriate  post-processor  to
              produce  output  suitable  for the chosen device.  If groff -mandoc is
              groff, this option is passed to groff and will suppress the use  of  a
              post-processor.  It implies -t.

   Getting help
       -?, --help
              Print a help message and exit.

       --usage
              Print a short usage message and exit.

       -V, --version
              Display version information.

EXIT STATUS
       0      Successful program execution.

       1      Usage, syntax or configuration file error.

       2      Operational error.

       3      A child process returned a non-zero exit status.

       16     At  least  one  of  the  pages/files/keywords  didn't  exist or wasn't
              matched.

ENVIRONMENT
       MANPATH
              If $MANPATH is set, its value is used as the path to search for manual
              pages.

       MANROFFOPT
              The  contents  of $MANROFFOPT are added to the command line every time
              man invokes the formatter (nroff, troff, or groff).

       MANROFFSEQ
              If $MANROFFSEQ is set, its value is used to determine the set of  pre-
              processors to pass each manual page through.  The default preprocessor
              list is system dependent.

       MANSECT
              If $MANSECT is set, its value is a colon-delimited  list  of  sections
              and  it  is  used  to determine which manual sections to search and in
              what order.  The default is "1 n l 8 3 2 5 4 9 6 7", unless overridden
              by the SECTION directive in /etc/man_db.conf.

       MANPAGER, PAGER
              If  $MANPAGER  or $PAGER is set ($MANPAGER is used in preference), its
              value is used as the name of the program used to  display  the  manual
              page.  By default, less is used.

              The  value  may  be a simple command name or a command with arguments,
              and may use shell  quoting  (backslashes,  single  quotes,  or  double
              quotes).   It  may  not use pipes to connect multiple commands; if you
              need that, use a wrapper script, which may take the  file  to  display
              either as an argument or on standard input.

       MANLESS
              If  $MANLESS  is  set,  its  value  will be used as the default prompt
              string for the less pager, as if it  had  been  passed  using  the  -r
              option (so any occurrences of the text $MAN_PN will be expanded in the
              same way).  For example, if you want to set the prompt string uncondi-
              tionally to "my prompt string", set $MANLESS to `-Psmy prompt string'.
              Using the -r option overrides this environment variable.

       BROWSER
              If $BROWSER is set, its value is a colon-delimited list  of  commands,
              each  of  which  in turn is used to try to start a web browser for man
              --html.  In each command, %s is replaced by a filename containing  the
              HTML  output  from groff, %% is replaced by a single percent sign (%),
              and %c is replaced by a colon (:).

       SYSTEM If $SYSTEM is set, it will have the same effect  as  if  it  had  been
              specified as the argument to the -m option.

       MANOPT If  $MANOPT  is set, it will be parsed prior to man's command line and
              is expected to be in a similar format.  As all of the other  man  spe-
              cific  environment variables can be expressed as command line options,
              and are thus candidates for being included in $MANOPT it  is  expected
              that  they  will  become  obsolete.   N.B.   All spaces that should be
              interpreted as part of an option's argument must be escaped.

       MANWIDTH
              If $MANWIDTH is set, its value is used as the line  length  for  which
              manual pages should be formatted.  If it is not set, manual pages will
              be formatted with a line length appropriate to  the  current  terminal
              (using  the  value  of  $COLUMNS, an ioctl(2) if available, or falling
              back to 80 characters if neither is available).  Cat pages  will  only
              be  saved  when  the  default formatting can be used, that is when the
              terminal line length is between 66 and 80 characters.

       MAN_KEEP_FORMATTING
              Normally, when output is not being directed to a terminal (such as  to
              a file or a pipe), formatting characters are discarded to make it eas-
              ier  to  read  the  result  without  special   tools.    However,   if
              $MAN_KEEP_FORMATTING  is  set to any non-empty value, these formatting
              characters are retained.  This may be useful for wrappers  around  man
              that can interpret formatting characters.

       MAN_KEEP_STDERR
              Normally,  when  output  is being directed to a terminal (usually to a
              pager), any error output from the command used  to  produce  formatted
              versions  of  manual  pages is discarded to avoid interfering with the
              pager's display.  Programs such  as  groff  often  produce  relatively
              minor  error messages about typographical problems such as poor align-
              ment, which are unsightly and generally confusing when displayed along
              with  the  manual  page.  However, some users want to see them anyway,
              so, if $MAN_KEEP_STDERR is set to any non-empty  value,  error  output
              will be displayed as usual.

       LANG, LC_MESSAGES
              Depending  on  system  and implementation, either or both of $LANG and
              $LC_MESSAGES will be interrogated for the current message locale.  man
              will  display  its messages in that locale (if available).  See setlo-
              cale(3) for precise details.

FILES
       /etc/man_db.conf
              man-db configuration file.

       /usr/share/man
              A global manual page hierarchy.

       /usr/share/man/index.(bt|db|dir|pag)
              A traditional global index database cache.

       /var/cache/man/index.(bt|db|dir|pag)
              An FHS compliant global index database cache.

SEE ALSO
       apropos(1), groff(1), less(1),  manpath(1),  nroff(1),  troff(1),  whatis(1),
       zsoelim(1), setlocale(3), manpath(5), ascii(7), latin1(7), man(7), catman(8),
       mandb(8), the man-db package manual, FSSTND

HISTORY
       1990, 1991 - Originally written by John W. Eaton (jwe@che.utexas.edu).

       Dec 23 1992: Rik Faith  (faith@cs.unc.edu)  applied  bug  fixes  supplied  by
       Willem Kasdorp (wkasdo@nikhefk.nikef.nl).

       30th  April  1994 - 23rd February 2000: Wilf. (G.Wilford@ee.surrey.ac.uk) has
       been developing and maintaining this package with the help of a few dedicated
       people.

       30th  October  1996 - 30th March 2001: Fabrizio Polacco <fpolacco@debian.org>
       maintained and enhanced this package for the Debian project, with the help of
       all the community.

       31st  March  2001  -  present  day: Colin Watson <cjwatson@debian.org> is now
       developing and maintaining man-db.

2.7.6.1                              2016-12-12                               MAN(1)

Press ENTER or type command to continue[?1049h[?1h=[57;1H
[?25lExecuting Test_normal24_rot13()
Executing Test_normal25_tag()"help.txt" [57;12H[K[57;12H[readonly] 225L, 8437C"change.txt" [57;14H[K[57;14H[readonly] 1829L, 74755C"help.txt" [57;12H[K[57;12H[readonly] 225L, 8437C"change.txt" [57;14H[K[57;14H[readonly] 1829L, 74755C"help.txt" [57;12H[K[57;12H[readonly] 225L, 8437C"insert.txt" [57;14H[K[57;14H[readonly] 2003L, 82815C[57;25Hline 49 of 2003 --2%-- col 7-49
Executing Test_normal26_put()
Executing Test_normal27_bracket()
21 substitutions on 21 lines
Executing Test_normal28_parenthesis()
Executing Test_normal29_brace()17 fewer lines[57;15H[K[57;1H4 fewer lines[57;14H[K[57;1H3
Executing Test_normal30_changecase()
Executing Test_normal31_r_cmd()[57;1H[K[57;1H
Executing Test_normal32_g_cmd1()/x_foo[57;7H[K[57;1H?abc[57;5H[K[57;1H
Executing Test_normal33_g_cmd2()[57;1H[K[57;1H/[1-8][31msearch hit BOTTOM, continuing at TOP[m9 substitutions on 9 lines[57;27H[K[57;1Hblock of 3 lines yanked[57;24H[K[57;10H5[57;1H[K[57;1H
Executing Test_normal34_g_cmd3()
Executing Test_normal35_g_cmd4()
Executing Test_normal36_g_cmd5()
Executing Test_normal37_g_cmd6()"1.txt" [New File][57;19H[K[57;2H23
Executing Test_normal38_nvhome()
Executing Test_normal39_cw()[57;1H[K[57;1H
Executing Test_normal40_ctrl_bsl()[57;1H[K[57;1H
Executing Test_normal41_insert_reg()[57;1H[K[57;1H=a[57;1H[K[57;1H=a[57;1H[K[57;1H=a[57;1H[K[57;1H
Executing Test_normal42_halfpage()
Executing Test_normal43_textobject1()
Executing Test_normal44_textobjects2()
Executing Test_normal45_drop()
Executing Test_normal46_ignore()
Executing Test_normal47_autocmd()
Executing Test_normal47_visual_buf_wipe()
Executing Test_normal48_wincmd()
Executing Test_normal49_counts()
Executing Test_normal50_commandline()[39Cq:  [57;1H[K[57;1H:[27m[23m[m[H[2J[1;1Hxxx
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [m[48;1H[7m[No Name]                                                                              [m[49;1H[1m[34m:[mset im
[1m[34m:[mset noim
[1m[34m:[m.!sed -e 's/^/|    /'
[1m[34m:[m.!
[1m[34m:[m!echo one
[1m[34m:[m.!!
[1m[34m:[m
[1m[7m[Command Line]                                                                         [55;2H[?12l[?25h[?25l[?12l[?25h[?25l[m[57;77H:^M[55;2H[57;77H   [55;2H

Executing Test_normal51_FileChangedRO()"Xreadonly.log" [57;17H[K[57;17H1L, 4C[31mError detected while processing func...est[9]..Test_normal51_FileChangedRO:[m[33mline    8:[m[57;11H[K[57;11H[31mW10: Warning: Changing a readonly file[m[57;1H[K[57;1H
Executing Test_normal52_rl()3_digraph()
Executing Test_normal54_Ctrl_bsl()"test_normal.res" [New File][57;29H[K[57;19H[K[57;19H[New] 0L, 0C written
Executed 61 tests"messages" [57;13H[K[57;12H223L, 5512C[57;12H[K[57;12H291L, 7876C written[?1l>[?12l[?25h[?1049l
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_packadd.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_packadd.vim" 238 lines, 8288 characters
Executing Test_colorscheme()
Executing Test_colorscheme_completion()[57;1H[K[57;1H:colorscheme ...one'):ccolorscheme one'):cacolorscheme one'):calcolorscheme one'):callcolorscheme one'):call colorscheme one')[57;7Hacolorscheme one')[57;8Hdcolorscheme one')[57;9Hdcolorscheme one')[57;10H(colorscheme one')[57;11Hlcolorscheme one')[57;12Hicolorscheme one')[57;13H,colorscheme one')[57;14H colorscheme one')[57;15H'colorscheme one')[57;16H[57;1H[K[57;1H:colorscheme ...one...three[57;19H[K[57;19H'):ccolorscheme three'):cacolorscheme three'):calcolorscheme three'):callcolorscheme three'):call colorscheme three')[57;7Hacolorscheme three')[57;8Hdcolorscheme three')[57;9Hdcolorscheme three')[57;10H(colorscheme three')[57;11Hlcolorscheme three')[57;12Hicolorscheme three')[57;13H,colorscheme three')[57;14H colorscheme three')[57;15H'colorscheme three')[57;16H[57;1H[K[57;1H:colorscheme ...one...three[57;19H[K[57;19H...[57;15Hwo[57;17H[K[57;17H'):ccolorscheme two'):cacolorscheme two'):calcolorscheme two'):callcolorscheme two'):call colorscheme two')[57;7Hacolorscheme two')[57;8Hdcolorscheme two')[57;9Hdcolorscheme two')[57;10H(colorscheme two')[57;11Hlcolorscheme two')[57;12Hicolorscheme two')[57;13H,colorscheme two')[57;14H colorscheme two')[57;15H'colorscheme two')[57;16H[57;1H[K[57;1H:colorscheme ...one...three[57;19H[K[57;19H...[57;15Hwo[57;17H[K[57;17H...[57;14H[K[57;14H'):ccolorscheme '):cacolorscheme '):calcolorscheme '):callcolorscheme '):call colorscheme ')[57;7Hacolorscheme ')[57;8Hdcolorscheme ')[57;9Hdcolorscheme ')[57;10H(colorscheme ')[57;11Hlcolorscheme ')[57;12Hicolorscheme ')[57;13H,colorscheme ')[57;14H colorscheme ')[57;15H'colorscheme ')[57;16H
Executing Test_helptags()
Executing Test_packadd()"./Xdir/pack/mine/opt/mytest/plugin/test.vim" [New File][57;47H[K[57;47H[New] 1L, 24C written[57;37Halso/loaded.vim" [New File][57;64H[K[57;54H[K[57;54H[New] 1L, 29C written[57;30Hftdetect/test.vim" [New File[57;60H[K[57;49H[K[57;49H[New] 1L, 26C written
Executing Test_packadd_completion()[57;1H[K[57;1H:packadd ...pluginA'):cpackadd pluginA'):capackadd pluginA'):calpackadd pluginA'):callpackadd pluginA'):call packadd pluginA')[57;7Hapackadd pluginA')[57;8Hdpackadd pluginA')[57;9Hdpackadd pluginA')[57;10H(packadd pluginA')[57;11Hlpackadd pluginA')[57;12Hipackadd pluginA')[57;13H,packadd pluginA')[57;14H packadd pluginA')[57;15H'packadd pluginA')[57;16H[57;1H[K[57;1H:packadd ...pluginA...B[57;17H[K[57;17H'):cpackadd pluginB'):capackadd pluginB'):calpackadd pluginB'):callpackadd pluginB'):call packadd pluginB')[57;7Hapackadd pluginB')[57;8Hdpackadd pluginB')[57;9Hdpackadd pluginB')[57;10H(packadd pluginB')[57;11Hlpackadd pluginB')[57;12Hipackadd pluginB')[57;13H,packadd pluginB')[57;14H packadd pluginB')[57;15H'packadd pluginB')[57;16H[57;1H[K[57;1H:packadd ...pluginA...B[57;17H[K[57;17H...C[57;17H[K[57;17H'):cpackadd pluginC'):capackadd pluginC'):calpackadd pluginC'):callpackadd pluginC'):call packadd pluginC')[57;7Hapackadd pluginC')[57;8Hdpackadd pluginC')[57;9Hdpackadd pluginC')[57;10H(packadd pluginC')[57;11Hlpackadd pluginC')[57;12Hipackadd pluginC')[57;13H,packadd pluginC')[57;14H packadd pluginC')[57;15H'packadd pluginC')[57;16H[57;1H[K[57;1H:packadd ...pluginA...B[57;17H[K[57;17H...C[57;17H[K[57;17H...[57;10H[K[57;10H'):cpackadd '):capackadd '):calpackadd '):callpackadd '):call packadd ')[57;7Hapackadd ')[57;8Hdpackadd ')[57;9Hdpackadd ')[57;10H(packadd ')[57;11Hlpackadd ')[57;12Hipackadd ')[57;13H,packadd ')[57;14H packadd ')[57;15H'packadd ')[57;16H
Executing Test_packadd_noload()"./Xdir/pack/mine/opt/mytest/plugin/test.vim" [New File][57;47H[K[57;47H[New] 1L, 24C written
Executing Test_packloadall()
Executing Test_runtime()"test_packadd.res" [New File][57;20H[K[57;20H[New] 0L, 0C written
Executed 8 tests"messages"[57;12H[K[57;12H291L, 7876C[57;12H[K[57;12H302L, 8159C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_perl.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_perl.vim" 123 lines, 3037 characters"test_perl.res" [New File][57;17H[K[57;17H[New] 0L, 0C written
Executed 0 test"messages"[57;12H[K[57;12H302L, 8159C[57;12H[K[57;12H305L, 8196C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_quickfix.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_quickfix.vim" 1650 lines, 45982 characters
Executing Test_Autocmd()"F1" [New File][57;16H[K[57;1H
(1 of 1): Line 10"F2" [New File][57;16H[K[57;1H
(1 of 2): Line 10
Executing Test_Autocmd_Exception()
Executing Test_adjust_lnum()
Already only one window"Xqftestfilec" [57;16H[K[57;16H20L, 131C
9 fewer lines
Already only one window"Xqftestfilel" [57;16H[K[57;16H20L, 131C
9 fewer lines
Executing Test_browse()"Xqftestfile1" [57;16H[K[57;16H20L, 131C
(1 of 4): Line5
"Xqftestfile2" 20L, 131C
(3 of 4): Line10"Xqftestfile1" [57;16H[K[57;16H20L, 131C
(2 of 4): Line6"Xqftestfile2" 20L, 131C
(4 of 4): Line11
"Xqftestfile1" 20L, 131C
(1 of 4): Line5
(1 of 4): Line5
"Xqftestfile2" 20L, 131C
(3 of 4): Line10"Xqftestfile1" [57;16H[K[57;16H20L, 131C
(2 of 4): Line6"Xqftestfile2" 20L, 131C
(4 of 4): Line11
"Xqftestfile1" 20L, 131C
(1 of 4): Line5
Executing Test_caddbuffer_to_empty()"autocmd.txt" [57;15H[K[57;15H[readonly] 1486L, 61530C
(1 of 482): |QuickFixCmdPre|[34m^I[mbefore a quickfix command is run
(2 of 1486):
Executing Test_cage()
error list 9 of 10; 1 errors      :cgetexpr ['Xtestfile2:2:2:Line2']
error list 10 of 10; 1 errors     :cgetexpr ['Xtestfile3:3:1:Line3']
error list 8 of 10; 1 errors      :cgetexpr ['Xtestfile1:1:3:Line1']
error list 10 of 10; 1 errors     :cgetexpr ['Xtestfile3:3:1:Line3']
error list 9 of 10; 1 errors      :lgetexpr ['Xtestfile2:2:2:Line2']
error list 10 of 10; 1 errors     :lgetexpr ['Xtestfile3:3:1:Line3']
error list 8 of 10; 1 errors      :lgetexpr ['Xtestfile1:1:3:Line1']
error list 10 of 10; 1 errors     :lgetexpr ['Xtestfile3:3:1:Line3']
Executing Test_cbottom()
Executing Test_cbuffer()"Xtestfile7" [New File][57;24H[K[57;1H
(1 of 2): Line 700"Xtestfile7" [New File]
(1 of 2): Line 700
Executing Test_cexpr()
Executing Test_cfile()"Xtestfile1" [New File]
(1 of 2): Line 700
"Xtestfile1" [New File]
(1 of 2): Line 700
Executing Test_cgetexpr_works()
Executing Test_clist()
[30m[43m 2 Xtestfile1[m[33m:1 col 3:[m Line1
[34m 4 Xtestfile2[m[33m:2 col 2:[m Line2
[34m 6 Xtestfile3[m[33m:3 col 1:[m Line3
[34m 1[m[33m:[m non-error 1
[30m[43m 2 Xtestfile1[m[33m:1 col 3:[m Line1
[34m 3[m[33m:[m non-error 2
[34m 4 Xtestfile2[m[33m:2 col 2:[m Line2
[34m 5[m[33m:[m non-error 3
[34m 6 Xtestfile3[m[33m:3 col 1:[m Line3
[34m 4 Xtestfile2[m[33m:2 col 2:[m Line2
[34m 6 Xtestfile3[m[33m:3 col 1:[m Line3
[34m 3[m[33m:[m non-error 2
[34m 4 Xtestfile2[m[33m:2 col 2:[m Line2
[30m[43m 2 Xtestfile1[m[33m:1 col 3:[m Line1
[30m[43m 2 Xtestfile1[m[33m:1 col 3:[m Line1
[34m 3[m[33m:[m non-error 2
[34m 4 Xtestfile2[m[33m:2 col 2:[m Line2
[30m[43m 2 Xtestfile1[m[33m:1 col 3:[m Line1
[34m 4 Xtestfile2[m[33m:2 col 2:[m Line2
[34m 6 Xtestfile3[m[33m:3 col 1:[m Line3
[34m 1[m[33m:[m non-error 1
[30m[43m 2 Xtestfile1[m[33m:1 col 3:[m Line1
[34m 3[m[33m:[m non-error 2
[34m 4 Xtestfile2[m[33m:2 col 2:[m Line2
[34m 5[m[33m:[m non-error 3
[34m 6 Xtestfile3[m[33m:3 col 1:[m Line3
[34m 4 Xtestfile2[m[33m:2 col 2:[m Line2
[34m 6 Xtestfile3[m[33m:3 col 1:[m Line3
[34m 3[m[33m:[m non-error 2
[34m 4 Xtestfile2[m[33m:2 col 2:[m Line2
[30m[43m 2 Xtestfile1[m[33m:1 col 3:[m Line1
[30m[43m 2 Xtestfile1[m[33m:1 col 3:[m Line1
[34m 3[m[33m:[m non-error 2
[34m 4 Xtestfile2[m[33m:2 col 2:[m Line2
Executing Test_cwindow()[27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [m[45;1H[7m[No Name]                                                                              [m[46;1H[30m[43mXtestfile1|1 col 3| Line1                                                              [m[47;1HXtestfile2|2 col 2| Line2
Xtestfile3|3 col 1| Line3
[1m[34m~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[Quickfix List]                                                                        [27m[23m[m[H[2J[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [m[45;1H[7m[No Name]                                                                              [m[46;1H[30m[43mXtestfile1|1 col 3| Line1                                                              [m[47;1HXtestfile2|2 col 2| Line2
Xtestfile3|3 col 1| Line3
[1m[34m~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[Location List]                                                                        [m[57;1HExecuting Test_duplicate_buf()"DoesNotExist" [New File][57;26H[K[57;14H2" [New File]
Xgrepthis"Xgrepthis" line 1 of 2 --50%-- col 1
(1 of 2): this one
Xgrepthis(1 of 2): this one
Executing Test_efm()
Executing Test_efm1()"Xtestfile" [57;13H[K[57;13H21L, 903C
(1 of 20): 1506-045 (S) Undeclared identifier fd_set.
(20 of 20): What is the title of the quickfix window?
Executing Test_efm2()"Xtestfile" [New File]
Executing Test_efm_dirstack()
Executing Test_efm_ignore_continuations()
Executing Test_errortitle()
Executing Test_grep()
Already only one window[?1l>[?12l[?25h[?1049ltest_quickfix.vim:1418:  " Grep_Test_Text: Match 1
test_quickfix.vim:1419:  " Grep_Test_Text: Match 2
test_quickfix.vim:1424:  silent Xgrep Grep_Test_Text: test_quickfix.vim
[?1049h[?1h=[?1l>[?1049ltest_quickfix.vim:1420:  " GrepAdd_Test_Text: Match 1
test_quickfix.vim:1421:  " GrepAdd_Test_Text: Match 2
test_quickfix.vim:1431:  silent Xgrepadd GrepAdd_Test_Text: test_quickfix.vim
[?1049h[?1h=[?25l[56;1HAlready only one window[57;1H[K[?1l>[?12l[?25h[?1049ltest_quickfix.vim:1418:  " Grep_Test_Text: Match 1
test_quickfix.vim:1419:  " Grep_Test_Text: Match 2
test_quickfix.vim:1424:  silent Xgrep Grep_Test_Text: test_quickfix.vim
[?1049h[?1h=[?1l>[?1049ltest_quickfix.vim:1420:  " GrepAdd_Test_Text: Match 1
test_quickfix.vim:1421:  " GrepAdd_Test_Text: Match 2
test_quickfix.vim:1431:  silent Xgrepadd GrepAdd_Test_Text: test_quickfix.vim
[?1049h[?1h=[?25l[56;1HExecuting Test_helpgrep()
"autocmd.txt" [readonly] 1486L, 61530C
(1 of 482): |QuickFixCmdPre|[34m^I[mbefore a quickfix command is run"autocmd.txt" [readonly] line 1 of 1486 --0%-- col 1[57;53H[K[57;1H
(1 of 482): |QuickFixCmdPre|[34m^I[mbefore a quickfix command is runExecuting Test_history()[57;25H[K[57;1H
error list 1 of 10; 1 errors      :  cexpr 'Xtestfile:Line search text'
error list 1 of 2; 1 errors[7C:  cexpr 'Xtestfile:Line search text'
error list 1 of 3; 13 errors      :lexpr ""
error list 1 of 2; 13 errors      :lexpr ""
Executing Test_invalid_efm()
Executing Test_locationlist()
No matching autocommands
(1 of 7): file foo.txtNo matching autocommands
No matching autocommands
No matching autocommands
No matching autocommands
No matching autocommands
No matching autocommands
(1 of 7): file foo.txtNo matching autocommands
No matching autocommands
(1 of 7): file foo.txtNo matching autocommands
[31mW19: Deleting augroup that is still in use[mExecuting Test_locationlist_cross_tab_jump()"loclistfoo" [57;14H[K[57;14H1L, 11C[57;9Hbar[57;14H[K[57;14H1L, 11C[?1l>[?12l[?25h[?1049lloclistfoo:1:loclistfoo
[?1049h[?1h=[57;1H
[?25lAlready only one window
Executing Test_locationlist_curwin_was_closed()
[31mW19: Deleting augroup that is still in use[mExecuting Test_long_lines()[57;28H[K[57;1H"samples/quickfix.txt" [57;24H[K[57;24H4L, 22089C
(1 of 4): aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
(1 of 4): aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"samples/quickfix.txt" [57;24H[K[57;24H4L, 22089C
(1 of 4): aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
(1 of 4): aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
(1 of 4): aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"samples/quickfix.txt" [57;24H[K[57;24H4L, 22089C
(1 of 4): aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[56;87Ha[57;1Haaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
Executing Test_nomem()"/sources/vim80/src/alloc.h" 21L, 485C
[1m[37m[41mError detected while processing function RunTheTest[9]..Test_nomem:[m
[33mline    2:[m
[1m[37m[41mE342: Out of memory!  (allocating 4096 bytes)[m"/sources/vim80/src/alloc.h" [1m[37m[41mt[m[57;30H[K[57;30H21L, 485C
[33mline    5:[m
[1m[37m[41mE342: Out of memory!  (allocating 4096 bytes)[m"/sources/vim80/src/alloc.h" [1m[37m[41mt[m[57;30H[K[57;30H21L, 485C
[33mline    8:[m
[1m[37m[41mE342: Out of memory!  (allocating 1025 bytes)[m"/sources/vim80/src/alloc.h" [1m[37m[41mt[m[57;30H[K[57;30H21L, 485C
[33mline   11:[m
[1m[37m[41mE342: Out of memory!  (allocating 1025 bytes)[m"/sources/vim80/src/alloc.h" [1m[37m[41mt[m[57;30H[K[57;30H21L, 485C
[33mline   14:[m
[1m[37m[41mE342: Out of memory!  (allocating 1025 bytes)[m
Executing Test_qf_property()
Executing Test_qf_title()
Executing Test_quickfix_set_list_with_act()
Executing Test_quickfix_was_changed_by_autocmd()
error list 9 of 10; 1 errors      :setqflist()
[31mW19: Deleting augroup that is still in use[merror list 9 of 10; 1 errors      :setloclist()
error list 9 of 10; 1 errors      :setloclist()
[31mW19: Deleting augroup that is still in use[mExecuting Test_setqflist()[57;27H[K[57;1H"Xtestfile" [New File][57;23H[K[57;1H
(2 of 2):
(3 of 3):
(2 of 2):
(3 of 3):
Executing Test_setqflist_empty_middle()
test_quickfix.vim"test_quickfix.vim" 1650L, 45982C
(1 of 46): function Test_clist()
test_quickfix.vim(1 of 13): " With an empty list, command should return error
test_quickfix.vim(1 of 2): " number of matches is unknown
error list 9 of 10; 13 errors     :vimgrep empty test_quickfix.vim
error list 8 of 10; 46 errors     :vimgrep Test_ test_quickfix.vim
error list 9 of 10; 0 errors      :setqflist()
error list 10 of 10; 2 errors     :vimgrep matches test_quickfix.vim
test_quickfix.vim(1 of 46): function Test_clist()
test_quickfix.vim(1 of 13): " With an empty list, command should return error
test_quickfix.vim(1 of 2): " number of matches is unknown
error list 9 of 10; 13 errors     :lvimgrep empty test_quickfix.vim
error list 8 of 10; 46 errors     :lvimgrep Test_ test_quickfix.vim
error list 9 of 10; 0 errors      :setloclist()
error list 10 of 10; 2 errors     :lvimgrep matches test_quickfix.vim
Executing Test_setqflist_empty_older()
test_quickfix.vim(1 of 24): \ 'Does anyone know what is the problem and how to correction it?',
test_quickfix.vim(1 of 21): " Go back two lists
test_quickfix.vim(1 of 7): " Add three quickfix/location lists
error list 8 of 10; 24 errors     :vimgrep one test_quickfix.vim
error list 9 of 10; 21 errors     :vimgrep two test_quickfix.vim
error list 10 of 10; 7 errors     :vimgrep three test_quickfix.vim
test_quickfix.vim(1 of 24): \ 'Does anyone know what is the problem and how to correction it?',
test_quickfix.vim(1 of 21): " Go back two lists
test_quickfix.vim(1 of 7): " Add three quickfix/location lists
error list 8 of 10; 24 errors     :lvimgrep one test_quickfix.vim
error list 9 of 10; 21 errors     :lvimgrep two test_quickfix.vim
error list 10 of 10; 7 errors     :lvimgrep three test_quickfix.vim
Executing Test_switchbuf()"Xqftestfile1" [57;16H[K[57;16H20L, 131C[57;13H2[57;16H[K[57;16H20L, 131C[57;13H1" line 1 of 20 --5%-- col 1
(1 of 6): Line5
(2 of 6): Line6"Xqftestfile2" line 1 of 20 --5%-- col 1
(3 of 6): Line10
(4 of 6): Line11"Xqftestfile3" [57;16H[K[57;16H20L, 131C
(5 of 6): Line15
(6 of 6): Line16
(1 of 6): Line5
(2 of 6): Line6
(3 of 6): Line10
(4 of 6): Line11"Xqftestfile3" [57;16H[K[57;16H20L, 131C
(5 of 6): Line15
(6 of 6): Line16"Xqftestfile1" [57;16H[K[57;16H20L, 131C[57;13H2[57;16H[K[57;16H20L, 131C
(1 of 6): Line5
(2 of 6): Line6
(3 of 6): Line10
(4 of 6): Line11"Xqftestfile3" [57;16H[K[57;16H20L, 131C
(5 of 6): Line15
(6 of 6): Line16"Xqftestfile1" [57;16H[K[57;16H20L, 131C
(1 of 6): Line5
(2 of 6): Line6"Xqftestfile2" 20L, 131C
(3 of 6): Line10
(4 of 6): Line11"Xqftestfile3" [57;16H[K[57;16H20L, 131C
(5 of 6): Line15
(6 of 6): Line16"Xqftestfile1" [57;16H[K[57;16H20L, 131C
(1 of 6): Line5
(2 of 6): Line6"Xqftestfile2" 20L, 131C
(3 of 6): Line10
(4 of 6): Line11"Xqftestfile3" [57;16H[K[57;16H20L, 131C
(5 of 6): Line15
(6 of 6): Line16
Already only one window"Xqftestfile1" [57;16H[K[57;16H20L, 131C[57;13H2[57;16H[K[57;16H20L, 131C[57;13H3[57;16H[K[57;16H20L, 131C
Executing Test_two_windows()"one" [New File][57;17H[K[57;2Htwo
Executing Test_vimgreptitle()
file"file" [New File]
Cannot open file "file""test_quickfix.res" [New File][57;21H[K[57;21H[New] 0L, 0C written
Executed 39 tests"messages" [57;13H[K[57;12H305L, 8196C[57;12H[K[57;12H347L, 9399C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_ruby.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_ruby.vim" 34 lines, 820 characters"test_ruby.res" [New File][57;17H[K[57;17H[New] 0L, 0C written
Executed 0 test"messages"[57;12H[K[57;12H347L, 9399C[57;12H[K[57;12H350L, 9436C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_search.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_search.vim" 281 lines, 8457 characters
Executing Test_search_cmdline()[57;1H[K[57;1H/foobar[57;1H[K[57;1H/the[31msearch hit BOTTOM, continuing at TOP[m[57;1H[K[57;1H/thes[57;5H[K[57;5H/foobar[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H?the[57;1H[K[57;1H?the[57;1H[K[57;1H?the[57;1H[K[57;1H?the[57;1H[K[57;1H?the[57;1H[K[57;1H?the[57;1H[K[57;1H?the[57;1H[K[57;1H?the[57;1H[K[57;1H?the[57;1H[K[57;1H?the[31msearch hit TOP, continuing at BOTTOM[m[57;1H[K[57;1H/thes[57;1H[K[57;1H/thes[57;1H[K[57;1H/thes[57;1H[K[57;1H/thes[57;1H[K[57;1H/thei[57;1H[K[57;1H/thei[57;5H[K[57;5Hs[57;1H[K[57;1H/thei[57;5H[K[57;5Hs[57;5H[K[57;5Hs[57;1H[K[57;1H/them[57;5H[K[57;5H[57;4H[K[57;4H[57;3H[K[57;3H[57;2H[K[57;2Hthe\>Executing Test_search_cmdline2()[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/the[57;1H[K[57;1H/foo[57;4H[K[57;4H[27m[23m[m[H[2J[1;3H6 their
  7 the
  8 them
  9 these
 10 foobar
[1m[7m[No Name] [+]                                                                          [m[7;1H" Test for the search command

func Test_search_cmdline()
  if !exists('+incsearch')
    return
  endif
  " need to disable char_avail,
  " so that expansion of commandline works
  call test_disable_char_avail(1)
  new
  call setline(1, ['  1', '  2 these', '  3 the', '  4 their', '  5 there', '  6 their''[18;1H, '  7 the', '  8 them', '  9 these', ' 10 foobar'])
  " Test 1
  " CTRL-N / CTRL-P skips through the previous search history
  set noincsearch
  :1
  call feedkeys("/foobar\<cr>", 'tx')
  call feedkeys("/the\<cr>",'tx')
  call assert_equal('the', @/)
  call feedkeys("/thes\<C-P>\<C-P>\<cr>",'tx')
  call assert_equal('foobar', @/)

  " Test 2
  " Ctrl-G goes from one match to the next
  " until the end of the buffer
  set incsearch nowrapscan
  :1
  " first match
  call feedkeys("/the\<cr>", 'tx')
  call assert_equal('  2 these', getline('.'))
  :1
  " second match
  call feedkeys("/the\<C-G>\<cr>", 'tx')
  call assert_equal('  3 the', getline('.'))
  call assert_equal([0, 0, 0, 0], getpos('"'))
  :1
  " third match
  call feedkeys("/the".repeat("\<C-G>", 2)."\<cr>", 'tx')
  call assert_equal('  4 their', getline('.'))
  :1
  " fourth match
  call feedkeys("/the".repeat("\<C-G>", 3)."\<cr>", 'tx')
  call assert_equal('  5 there', getline('.'))
  :1
  " fifth match
  call feedkeys("/the".repeat("\<C-G>", 4)."\<cr>", 'tx')
  call assert_equal('  6 their', getline('.'))
  :1
  " sixth match
[7mtest_search.vim                                                                        [m[57;1HExecuting Test_use_sub_pat()"test_search.res" [New File][57;19H[K[57;19H[New] 0L, 0C written
Executed 3 tests"messages"[57;12H[K[57;12H350L, 9436C[57;12H[K[57;12H356L, 9570C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_signs.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_signs.vim" 199 lines, 6383 characters
Executing Test_sign()"foo" [New File][57;17H[K[27m[23m[m[H[2J[1;85Ha[34m[47m  [m[2;85Hb[34m[47m  [m[3;85Hc x[4;85Hd[34m[47m  [5;86H  [6;86H  [7;86H  [8;86H  [9;86H  [10;86H  [11;86H  [12;86H  [13;86H  [m[5;1H[1m[34m                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    [5;85H~[6;85H~[7;85H~[8;85H~[9;85H~[10;85H~[11;85H~[12;85H~[13;85H~[m
[1m[7m[No Name] [+]                                                                          [m[15;1H" Test for signs

if !has('signs')
  finish
endif

func Test_sign()
  new
  call setline(1, ['a', 'b', 'c', 'd'])

  " Define some signs.
  " We can specify icons even if not all versions of vim support icons as
  " icon is ignored when not supported.  "(not supported)" is shown after
[7mtest_signs.vim                                                                         [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [m[42;1H[7mfoo                                                                                    [m[43;1H[34m[47m  [ma
[34m[47m  [mb
x c
[34m[47m  [md
[34m[47m  
  
  
  
  
  
  
  
  [m[47;3H[1m[34m~                                                                                    [48;3H~                                                                                    [49;3H~                                                                                    [50;3H~                                                                                    [51;3H~                                                                                    [52;3H~                                                                                    [53;3H~                                                                                    [54;3H~                                                                                    [55;3H~                                                                                    [m[56;1H[7m[No Name] [+]                                                                          [m[1;1H[34m[47m  [ma[1;85H[K[2;1H[34m[47m  [mb[2;85H[K[3;1Hx c[3;85H[K[4;1H[34m[47m  [md[4;85H[K[5;1H[34m[47m  
  
  
  
  
  
  
  
  [m[5;3H[1m[34m~[81C   [6;3H~[81C   [7;3H~[81C   [8;3H~[81C   [9;3H~[81C   [10;3H~[81C   [11;3H~[81C   [12;3H~[81C   [13;3H~[81C   [m[57;1H"foo" [New file] --No lines in buffer--"bar[7CF[57;18H[K[57;1H
Executing Test_sign_completion()[57;1H[K[57;1H:sign ...define jump list place undefine unplace:"sign define jump list place undefine unplace:"[57;1H[K[57;1H:sign define Sign ...icon= linehl= text= texthl=:"sign define Sign icon= linehl= text= texthl=:"[57;1H[K[57;1H:sign define Sign linehl=Spell...Bad SpellCap SpellLocal SpellRare:"sign define Sign linehl=SpellBad SpellCap SpellLocal SpellRare:"[57;1H[K[57;1H:sign define Sign icon=Xsig...nOne XsignTwo:"sign define Sign icon=XsignOne XsignTwo:"[57;1H[K[57;1H:sign undefine ...Sign1 Sign2:"sign undefine Sign1 Sign2:"[57;1H[K[57;1H:sign place 1 ...buffer= file= line= name=:"sign place 1 buffer= file= line= name=:"[57;1H[K[57;1H:sign place 1 name=...Sign1 Sign2:"sign place 1 name=Sign1 Sign2:"[57;1H[K[57;1H:sign unplace 1 ...buffer= file=:"sign unplace 1 buffer= file=:"[57;1H[K[57;1H:sign list ...Sign1 Sign2:"sign list Sign1 Sign2:"[57;1H[K[57;1H:sign jump 1 ...buffer= file=:"sign jump 1 buffer= file=:"
Executing Test_sign_delete_buffer()
Executing Test_sign_invalid_commands()
Executing Test_sign_undefine_still_placed()"foobar" [New File][57;20H[K[57;2Htest_signs.res" [New File][57;18H[K[57;18H[New] 0L, 0C written
Executed 5 tests"messages"[57;12H[K[57;12H356L, 9570C[57;12H[K[57;12H364L, 9783C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_smartindent.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_smartindent.vim" 14 lines, 376 characters
Executing Test_nosmartindent()[57;1H[K[57;1H/some[31msearch hit BOTTOM, continuing at TOP[m[57;1H[K[57;1H"test_smartindent.res" [New File][57;24H[K[57;24H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H364L, 9783C[57;12H[K[57;12H368L, 9858C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_startup.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_startup.vim" 185 lines, 4581 characters
Executing Test_after_comes_later()[?1l>[?12l[?25h[?1049l[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;3H1: /sources/vim80/src/testdir/Xbefore.vim
  2: /sources/vim80/src/testdir/Xhere/plugin/here.vim
  3: /sources/vim80/src/testdir/Xhere/pack/foo/start/foobar/plugin/foo.vim
  4: /sources/vim80/src/testdir/Xafter/plugin/later.vim
  5: /sources/vim80/src/testdir/Xafter.vim
[?1l>[?12l[?25h[?1049l[?1049h[?1h=[57;1H
[?25lExecuting Test_compatible_args()[?1l>[?12l[?25h[?1049l[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1HError detected while processing /sources/vim80/src/testdir/Xafter.vim:
line    2:
E528: Must specify a ' value: viminfo+=nviminfo
[?1l>[?12l[?25h[?1049l[?1049h[?1h=[57;33H[?1l>[?1049l[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[57;1H[?1l>[?1049l[?1049h[?1h=[57;1H
[?25lExecuting Test_file_args()[?1l>[?12l[?25h[?1049l[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[57;1H[?1l>[?1049l[?1049h[?1h=[57;27H[?1l>[?1049l[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"one" [New File]
[?1l>[?12l[?25h[?1049l[?1049h[?1h=[57;27H[?1l>[?1049l[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"one" [New File]
[?1l>[?12l[?25h[?1049l3 files to edit
[?1049h[?1h=[57;27H[?1l>[?1049l[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"one" [New File]
[?1l>[?12l[?25h[?1049l2 files to edit
[?1049h[?1h=[57;27H[?1l>[?1049l[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"one" [New File]
[?1l>[?12l[?25h[?1049l4 files to edit
[?1049h[?1h=[57;1H
[?25lExecuting Test_help_arg()[?1l>[?12l[?25h[?1049l[?1049h[?1h=[57;1H
[?25lExecuting Test_read_stdin()[?1l>[?12l[?25h[?1049l[?1049h[?1h=[27m[23m[m[H[2J[?25l[24;1H"-stdin-" 1 line, 10 characters[1;24r[?12;25h[?12l[?25h[27m[23m[m[H[2J[24;1H"Xtestout" [New File] 1 line, 10 characters written[?1l>[?12l[?25h[?1049l
Vim: Reading from stdin...
[?1049h[?1h=[57;1H
[?25lExecuting Test_startup_script()[?1000h
Executing Test_startuptime()[?1l>[?12l[?25h[?1049l[?1000l[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"one" [New File]
[?1l>[?12l[?25h[?1049l[?1000h[?1049h[?1h=[?25l[57;1H"test_startup.res" [New File][57;20H[K[57;20H[New] 0L, 0C written
Executed 7 tests"messages"[57;12H[K[57;12H368L, 9858C[57;12H[K[57;12H378L, 10109C written[?1000l
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_startup_utf8.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_startup_utf8.vim" 64 lines, 1366 characters
Executing Test_read_fifo_utf8()[?1l>[?12l[?25h[?1049l[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"/dev/fd/63" [readonly] 2 lines, 24 characters
"Xtestout" [New File] 2 lines, 24 characters written
[?1l>[?12l[?25h[?1049l[?1049h[?1h=[57;1H
[?25lExecuting Test_read_stdin_utf8()[?1l>[?12l[?25h[?1049l[?1049h[?1h=[27m[23m[m[H[2J[?25l[24;1H"-stdin-" 2 lines, 24 characters[1;24r[?12;25h[?12l[?25h[27m[23m[m[H[2J[24;1H"Xtestout" [New File] 2 lines, 24 characters written[?1l>[?12l[?25h[?1049l
Vim: Reading from stdin...
[?1049h[?1h=[?25l[57;1H"test_startup_utf8.res" [New File][57;25H[K[57;25H[New] 0L, 0C written
Executed 2 tests"messages"[57;12H[K[57;12H378L, 10109C[57;12H[K[57;12H383L, 10220C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_stat.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_stat.vim" 64 lines, 1598 characters
Executing Test_checktime()"Xtest.tmp" [57;13H[K[57;13H1L, 13C[?12l[?25h[?25l[57;13H[K[57;13H1L, 25C
Executing Test_existent_directory()
Executing Test_existent_file()[?12l[?25h
[?25lExecuting Test_nonexistent_file()
Executing Test_win32_symlink_dir()"test_stat.res" [New File][57;27H[K[57;17H[K[57;17H[New] 0L, 0C written
Executed 5 tests"messages"[57;12H[K[57;12H383L, 10220C[57;12H[K[57;12H391L, 10421C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_substitute.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_substitute.vim" 41 lines, 1151 characters
Executing Test_multiline_subst()
[31msearch hit BOTTOM, continuing at TOP[m3 substitutions on 3 lines[57;27H[K[57;1H
3 substitutions on 2 lines"test_substitute.res" [New File][57;23H[K[57;23H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H391L, 10421C[57;12H[K[57;12H395L, 10497C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_syntax.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_syntax.vim" 82 lines, 1624 characters
Executing Test_syn_iskeyword()[27m[23m[m[H[2J[1;1H[1m[37m[41mCREATE[m [35mTABLE[m FOOBAR(
    DLTD_BY [32mVARCHAR2[m([31m100[m)
);

[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name] [+]                                                                          [m[29;1H[34m" Test for syntax and syntax iskeyword option[m

[33mif[m ![36mhas[m[35m([m[31m"syntax"[m[35m)[m
  [33mfinish
endif

func[m GetSyntaxItem[35m([mpat[35m)[m
  [33mlet[m [36mc[m [33m=[m [31m''[m
  [33mlet[m [36ma[m [33m=[m [[31m'a'[m, [36mgetreg[m[35m([m[31m'a'[m[35m)[m, [36mgetregtype[m[35m([m[31m'a'[m[35m)[m]
  [31m0[m
  [33mredraw[m!
  [33mcall[m [36msearch[m[35m([m[36ma:pat[m, [31m'W'[m[35m)[m
  [33mlet[m [36msynid[m [33m=[m [36msynID[m[35m([m[36mline[m[35m([m[31m'.'[m[35m)[m, [36mcol[m[35m([m[31m'.'[m[35m)[m, [31m1[m[35m)[m
  [33mwhile[m synid [33m==[m [36msynID[m[35m([m[36mline[m[35m([m[31m'.'[m[35m)[m, [36mcol[m[35m([m[31m'.'[m[35m)[m, [31m1[m[35m)[m
    [33mnorm![m v"ay
[34m    " stop at whitespace[m
    [33mif[m @[33ma[m [33m=~#[m [31m'\s'[m[46;7H[33mbreak
[m    [33mendif
[m    [33mlet[m [36mc[m [33m.=[m [35m@a[m
    [33mnorm![m l
  [33mendw
[m  [33mcall[m [36mcall[m[35m([m[31m'setreg'[m, a[35m)[m
  [31m0[m
  [33mreturn[m [33mc
endfunc[m

[7mtest_syntax.vim                                                                        [m[57;1H
syntax iskeyword not set
syntax iskeyword @,48-57,_,192-255[27m[23m[m[H[2J[1;1H[1m[37m[41mCREATE[m [35mTABLE[m FOOBAR(
    DLTD_BY [32mVARCHAR2[m([31m100[m)
);

[1m[34m~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name] [+]                                                                          [m[29;1H[34m" Test for syntax and syntax iskeyword option[m

[33mif[m ![36mhas[m[35m([m[31m"syntax"[m[35m)[m
  [33mfinish
endif

func[m GetSyntaxItem[35m([mpat[35m)[m
  [33mlet[m [36mc[m [33m=[m [31m''[m
  [33mlet[m [36ma[m [33m=[m [[31m'a'[m, [36mgetreg[m[35m([m[31m'a'[m[35m)[m, [36mgetregtype[m[35m([m[31m'a'[m[35m)[m]
  [31m0[m
  [33mredraw[m!
  [33mcall[m [36msearch[m[35m([m[36ma:pat[m, [31m'W'[m[35m)[m
  [33mlet[m [36msynid[m [33m=[m [36msynID[m[35m([m[36mline[m[35m([m[31m'.'[m[35m)[m, [36mcol[m[35m([m[31m'.'[m[35m)[m, [31m1[m[35m)[m
  [33mwhile[m synid [33m==[m [36msynID[m[35m([m[36mline[m[35m([m[31m'.'[m[35m)[m, [36mcol[m[35m([m[31m'.'[m[35m)[m, [31m1[m[35m)[m
    [33mnorm![m v"ay
[34m    " stop at whitespace[m
    [33mif[m @[33ma[m [33m=~#[m [31m'\s'[m[46;7H[33mbreak
[m    [33mendif
[m    [33mlet[m [36mc[m [33m.=[m [35m@a[m
    [33mnorm![m l
  [33mendw
[m  [33mcall[m [36mcall[m[35m([m[31m'setreg'[m, a[35m)[m
  [31m0[m
  [33mreturn[m [33mc
endfunc[m

[7mtest_syntax.vim                                                                        [m[57;1H
syntax iskeyword not set
Executing Test_syntax_after_reload()"Xsomefile" [New File][57;23H[K[57;13H[K[57;13H[New] 2L, 12C written"other" [New File][57;19H[K[57;2HXsomefile" [57;14H[K[57;13H2L, 12C"test_syntax.res" [New File][57;19H[K[57;19H[New] 0L, 0C written
Executed 2 tests"messages"[57;12H[K[57;12H395L, 10497C[57;12H[K[57;12H400L, 10605C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_textobjects.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_textobjects.vim" 43 lines, 946 characters
Executing Test_inner_block_with_cpo_M_left_backslash()
Executing Test_inner_block_with_cpo_M_right_backslash()
Executing Test_inner_block_without_cpo_M()"test_textobjects.res" [New File][57;34H[K[57;24H[K[57;24H[New] 0L, 0C written
Executed 3 tests"messages"[57;12H[K[57;12H400L, 10605C[57;12H[K[57;12H406L, 10804C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_undo.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_undo.vim" 237 lines, 6322 characters
Executing Test_U_command()[57;1H[K[57;1HExecuting Test_global_local_undolevels()"one" [New File][57;17H[K[57;1H
6 fewer lines; before #8  0 seconds ago"two" [New File][57;17H[K[57;1H
3 fewer lines; before #11  0 seconds ago"three" [New File][57;19H[K[57;1H
Executing Test_insert_expr()[57;1H[K[57;1H=setline('.','1234')[57;1H[K[57;1H1 line less; before #4  0 seconds ago[57;22H3[57;1H[K[57;1H=setline('.','1234')[57;1H[K[57;1H1 line less; before #7  0 seconds ago[57;1H[K[57;1H=string(123)[57;1H[K[57;1H1 line less; before #9  0 seconds ago
Executing Test_undo_del_chars()1 change; before #3  0 seconds ago[57;19H21
1 change; before #6  1 seconds ago[57;19H54[7Cs; after #31[7C; before #21
3 changes; after #6  1 seconds ago[57;1H[K[57;1H3 changes; before #7  0 seconds ago
3 changes; before #1  3 seconds ago
3 changes; after #6  3 seconds ago
3 changes; after #9  0 seconds ago
Executing Test_undo_write()"Xtest" [New File][57;19H[K[57;1H[K[57;1H"Xtest" [New] 1L, 12C written[57;1H[K[57;1H"Xtest" 3L, 20C written[57;1H[K[57;1H1 line less; before #4  0 seconds ago
2 fewer lines; before #2  0 seconds ago
1 line less; before #1  0 seconds ago
1 more line; after #1  0 seconds ago
2 more lines; after #3  0 seconds ago
1 more line; after #4  0 seconds ago
Executing Test_undojoin()[57;1H[K[57;1H1 line less; before #2  0 seconds ago[57;1H[K[57;1H2 fewer lines; before #3  0 seconds ago
Executing Test_undolist()[57;1H[K[57;1H1 change; before #2  0 seconds ago[57;1H[K[57;1HExecuting Test_undotree()[57;1H[K[57;1H
1 change; before #2  0 seconds ago"Xtest" [57;9H[K[57;9H[New] 1L, 4C written"test_undo.res" [New File][57;27H[K[57;17H[K[57;17H[New] 0L, 0C written
Executed 8 tests"messages"[57;12H[K[57;12H406L, 10804C[57;12H[K[57;12H417L, 11077C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_usercommands.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_usercommands.vim" 104 lines, 2527 characters
Executing Test_Ambiguous()
Executing Test_CmdUndefined()
Executing Test_cmdmods()"test_usercommands.res" [New File][57;25H[K[57;25H[New] 0L, 0C written
Executed 3 tests"messages"[57;12H[K[57;12H417L, 11077C[57;12H[K[57;12H423L, 11205C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_viminfo.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_viminfo.vim" 515 lines, 13496 characters
Executing Test_cmdline_history()
Executing Test_cmdline_history_order()
Executing Test_global_vars()
Executing Test_viminfo_bad_syntax()
Executing Test_viminfo_encoding()"Xviminfo" [converted] 73L, 2862C
Executing Test_viminfo_file_mark_tabclose()"Xtestfileintab" [New File][57;28H[K[57;3Hviminfo" [57;12H[K[57;12H83L, 2989C
Executing Test_viminfo_file_mark_zero_time()
Executing Test_viminfo_file_marks()"ten" [New File][57;17H[K[57;2Hagain" [New File]"thirty" [New File]"twen"again" [New File][57;19H[K[57;2Hfourty" [New File]"Xviminfo" [57;12H[K[57;12H90L, 2787C
Executing Test_viminfo_jumplist()"testbuf" [New File][57;21H[K[57;1H[K[57;1H/20[57;1H[K[57;1H/30[57;1H[K[57;1H/last pos[57;1H[K[57;1H/15[57;1H[K[57;1H/last pos[57;1H[K[57;1H?30[57;1H[K[57;1H/15[57;1H[K[57;1H/last pos[57;1H[K[57;1H?30[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here[57;1H[K[57;1H/here
Executing Test_viminfo_marks()"bufa" [New File][57;18H[K[57;5Hb
Executing Test_viminfo_oldfiles()
Executing Test_viminfo_read_and_write()
Executing Test_viminfo_registers()"test_viminfo.res" [New File][57;30H[K[57;20H[K[57;20H[New] 0L, 0C written
Executed 13 tests"messages" [57;13H[K[57;12H423L, 11205C[57;12H[K[57;12H439L, 11717C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_viml.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_viml.vim" 1245 lines, 29827 characters
[1m[37m[41mError detected while processing /sources/vim80/src/testdir/test_viml.vim:[m
[33mline  432:[m
[1m[37m[41mE492: Not an editor command: ^Iasdf[m
[33mline  444:[m
[1m[37m[41mE492: Not an editor command: ^Iasdf[m
[33mline  452:[m
[1m[37m[41mE492: Not an editor command: asdf[m
[33mline  455:[m
[1m[37m[41mE492: Not an editor command: asdf | Xpath 'p'[m
[1m[37m[41mError detected while processing function T8_F:[m
[33mline    5:[m
[1m[37m[41mE492: Not an editor command: ^I    asdf[m
[33mline    7:[m
[1m[37m[41mE492: Not an editor command: ^I    asdf | Xpath 'd'[m
[33mline   19:[m
[1m[37m[41mE492: Not an editor command: ^I    asdf[m
[33mline   21:[m
[1m[37m[41mE492: Not an editor command: ^I    asdf | Xpath 'l'[m
[33mline   29:[m
[1m[37m[41mE121: Undefined variable: novar[m
[1m[37m[41mE15: Invalid expression: novar^I^I" returns (default return value 0)[m
[1m[37m[41mError detected while processing function T8_G:[m
[33mline    5:[m
[1m[37m[41mE492: Not an editor command: ^I    asdf^I^I" returns -1[m
[1m[37m[41mError detected while processing function T8_H:[m
[33mline    5:[m
[1m[37m[41mE492: Not an editor command: ^I    asdf^I^I" returns -1[m
[1m[37m[41mError detected while processing function F[2]..G[2]..H[2]..I:[m
[33mline    2:[m
[1m[37m[41mE492: Not an editor command:     asdf^I^I" error[m
[1m[37m[41mError detected while processing /sources/vim80/src/testdir/test_viml.vim:[m
[33mline  663:[m
[1m[37m[41mE15: Invalid expression: | strlen("\"") | Xpath 'j'[m
[1m[37m[41mE15: Invalid expression: 1 ||| strlen("\"") | Xpath 'j'[m
[33mline  673:[m
[1m[37m[41mE15: Invalid expression: | strlen("\"") | Xpath 'n'[m
[1m[37m[41mE15: Invalid expression: 1 ||| strlen("\"") | Xpath 'n'[m
[33mline  682:[m
[1m[37m[41mE15: Invalid expression: | strlen("\"") | Xpath 'r'[m
[1m[37m[41mE15: Invalid expression: 1 ||| strlen("\"") | Xpath 'r'[m
[33mline  717:[m
[1m[37m[41mE492: Not an editor command:     asdf^I^I" error[m
1
[33mline  787:[m
[1m[37m[41mE492: Not an editor command:     asdf^I^I" error[m
[33mline  794:[m
[1m[37m[41mE492: Not an editor command:     asdf^I^I" error[m
[33mline  817:[m
[1m[37m[41mE121: Undefined variable: asdf[m
[1m[37m[41mE15: Invalid expression: asdf[m
[33mline  828:[m
[1m[37m[41mE121: Undefined variable: asdf[m
[1m[37m[41mE15: Invalid expression: asdf | Xpath 'f' | endwhile | Xpath 'g'[m
[1m[37m[41mError detected while processing function F:[m
[33mline    8:[m
[1m[37m[41mE121: Undefined variable: g:boolvar[m
[1m[37m[41mE15: Invalid expression: g:boolvar^I" possibly undefined[m
[1m[37m[41mE121: Undefined variable: g:boolvar[m
[1m[37m[41mE15: Invalid expression: g:boolvar | Xpath 'd' | else | Xpath 'e' | endif[m
Executing Test_arg_abort()
Executing Test_braces_skipped()
Executing Test_curlies()
Executing Test_defining_functions()
Executing Test_echo_and_string()
foo bar
'foo bar'
-1.2
-1.2
string
function('string')
{'a': {...}}
{'a': {...}}
[[...]]
[[...]]
[{}, {}, {}]
[{}, {}, {}]
{'a': {}, 'b': {}}
{'a': {}, 'b': {}}
[[], [], []]
[[], [], []]
{'a': [], 'b': []}
{'a': [], 'b': []}
[{'one': 'yes', 'two': 'yes', 'three': 'yes'}, {...}, {...}]
[{'one': 'yes', 'two': 'yes', 'three': 'yes'}, {'one': 'yes', 'two': 'yes', 'three': '
[56;87Hy[57;1Hes'}, {'one': 'yes', 'two': 'yes', 'three': 'yes'}]
{'a': {'one': 'yes', 'two': 'yes', 'three': 'yes'}, 'b': {...}}
{'a': {'one': 'yes', 'two': 'yes', 'three': 'yes'}, 'b': {'one': 'yes', 'two': 'yes',
[56;87H'[57;1Hthree': 'yes'}}
[[1, 2, 3], [...], [...]]
[[1, 2, 3], [1, 2, 3], [1, 2, 3]]
{'a': [1, 2, 3], 'b': [...]}
{'a': [1, 2, 3], 'b': [1, 2, 3]}
Executing Test_endwhile_function()
Executing Test_endwhile_script()
   function T1_F()
1      Xpath 'a'
2      let first = 1
3      while 1
4[10CXpath 'b'
5[10Cif first
6[14CXpath 'c'
7[14Clet first = 0
8[14Cbreak
9[10Celse
10[13CXpath 'd'
11[13Creturn
12[9Cendif
13     endwhile
   endfunction[43;1H"/tmp/vFEn9z4/0" [43;18H[K[44;1H[K[45;1H[K[46;1H[K[47;1H[K[48;1H[K[49;1H[K[50;1H[K[51;1H[K[52;1H[K[53;1H[K[54;1H[K[55;1H[K[56;1H[K[57;4H[K[43;18H[noeol] 16L, 299C
13 substitutions on 13 lines
Pattern not found: ^\s*$"/tmp/vFEn9z4/0" [45;18H[K[45;18H13L, 248C written"test_viml.vim" [45;18H[K[45;17H1245L, 29827C
   function T1_G()
1      Xpath 'h'
2      let first = 1
3      while 1
4[10CXpath 'i'
5[10Cif first
6[14CXpath 'j'
7[14Clet first = 0
8[14Cbreak
9[10Celse
10[13CXpath 'k'
11[13Creturn
12[9Cendif
13[9Cif 1    " unmatched :if
14     endwhile
   endfunction[42;1H"/tmp/vFEn9z4/1" [42;18H[K[43;1H[K[44;1H[K[45;1H[K[46;1H[K[47;1H[K[48;1H[K[49;1H[K[50;1H[K[51;1H[K[52;1H[K[53;1H[K[54;1H[K[55;1H[K[56;1H[K[57;4H[K[42;18H[noeol] 17L, 334C
14 substitutions on 14 lines
Pattern not found: ^\s*$"/tmp/vFEn9z4/1" [44;18H[K[44;18H14L, 281C written"test_viml.vim" [44;18H[K[44;17H1245L, 29827C
Executing Test_error_in_function()
Executing Test_error_in_script()
Executing Test_expr_parsing()
Executing Test_finish()
   function T4_F()
1      if 1
2[10CXpath 'a'
3[10Clet loops = 3
4[10Cwhile loops > 0[25C"    3:  2:     1:
5[14CXpath 'b' . loops
6[14Cif (loops == 2)
7[18CXpath 'c' . loops
8[18Creturn
9[18CXpath 'd' . loops
10[13Cendif
11[13CXpath 'e' . loops
12[13Clet loops = loops - 1
13[9Cendwhile
14[9CXpath 'f'
15     else
16[9CXpath 'g'
17     endif
   endfunction[39;1H"/tmp/vFEn9z4/2" [39;18H[K[40;1H[K[41;1H[K[42;1H[K[43;1H[K[44;1H[K[45;1H[K[46;1H[K[47;1H[K[48;1H[K[49;1H[K[50;1H[K[51;1H[K[52;1H[K[53;1H[K[54;1H[K[55;1H[K[56;1H[K[57;4H[K[39;18H[noeol] 20L, 504C
17 substitutions on 17 lines
Pattern not found: ^\s*$"/tmp/vFEn9z4/2" [41;18H[K[41;18H17L, 445C written"test_viml.vim" [41;18H[K[41;17H1245L, 29827C
Executing Test_func_abort()
Executing Test_if_bar_fail()
Executing Test_if_fail()
Executing Test_if_while()
Executing Test_num64()
Executing Test_return()
Executing Test_skip()
Executing Test_type()
Executing Test_while_fail()"test_viml.res" [New File][50;27H[K[50;17H[K[50;17H[New] 0L, 0C written
Executed 20 tests"messages" [51;13H[K[51;12H439L, 11717C[51;12H[K[51;12H462L, 12326C written[57;1H
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_visual.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_visual.vim" 17 lines, 339 characters
Executing Test_block_shift_multibyte()"test_visual.res" [New File][57;29H[K[57;19H[K[57;19H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H462L, 12326C[57;12H[K[57;12H466L, 12404C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_window_id.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_window_id.vim" 94 lines, 2575 characters
Executing Test_win_getid()"one" [New File][57;17H[K[57;2Htwohree" [New File]"four" [New File][57;18H[K[57;3Hive"test_window_id.res" [New File][57;22H[K[57;22H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H466L, 12404C[57;12H[K[57;12H470L, 12473C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_writefile.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_writefile.vim" 16 lines, 490 characters
Executing Test_WriteFile()"test_writefile.res" [New File][57;22H[K[57;22H[New] 0L, 0C written
Executed 1 test"messages"[57;12H[K[57;12H470L, 12473C[57;12H[K[57;12H474L, 12542C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_alot_latin.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_alot_latin.vim" 7 lines, 280 characters
Executing Test_eow_with_optional()
Executing Test_equivalence_re1()
Executing Test_equivalence_re2()
Executing Test_nested_backrefs()
Executing Test_recursive_substitute()"test_alot_latin.res" [New File][57;33H[K[57;23H[K[57;23H[New] 0L, 0C written
Executed 5 tests"messages"[57;12H[K[57;12H[converted] 474L, 12542C[57;12H[K[57;12H[converted] 482L, 12758C written
[?1l>[?12l[?25h[?1049lVIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_alot_utf8.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_alot_utf8.vim" 11 lines, 440 characters[?1l>[?12l[?25h[?1049l[m[m[0m[H[2J[m[0m[57;1HExecuting Test_classes_re1()
Executing Test_classes_re2()
Executing Test_equivalence_re1()
Executing Test_equivalence_re2()
Executing Test_match_using_multibyte_conceal_char()[m[m[0m[H[2J[2;1H#[37m[40mˑ[0mThis[37m[40mˑ[0mis[37m[40mˑ[0ma[37m[40mˑ[0mTest
[1m[34m~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [0m[28;1H[1m[7m[No Name] [+]                                                                          [0m[29;1H" A series of tests that can run in one Vim invocation.
" This makes testing go faster, since Vim doesn't need to restart.

" These tests use utf8 'encoding'.  Setting 'encoding' is already done in
" runtest.vim.  Checking for the multi_byte feature is in the individual
" files, so that they can be run by themselves.

source test_expr_utf8.vim
source test_matchadd_conceal_utf8.vim
source test_regexp_utf8.vim
source test_source_utf8.vim
[1m[34m~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [0m[56;1H[7mtest_alot_utf8.vim                                                                     [0m[57;1HExecuting Test_source_latin()"Xscript"[57;11H[K[57;11H[New] 2L, 44C writtenExecuting Test_source_utf8()[57;29H[K[57;1H"Xscript"[57;11H[K[57;11H[New] 2L, 42C written[57;1H[K[57;1H:%s/à[57;6Hx/--à[57;11H1234--/g[57;1H[K[57;1H:%s/Àx/--À1234--/g
Executing Test_strcharpart()
Executing Test_strgetchar()"test_alot_utf8.res" [New File][57;22H[K[57;22H[New] 0L, 0C written
Executed 9 tests"messages"[57;12H[K[57;12H482L, 12758C[57;12H[K[57;12H494L, 13093C written
VIMRUNTIME=../../runtime; export VIMRUNTIME;  ../vim -f  -u unix.vim -U NONE --noplugin --not-a-term -U NONE -S runtest.vim test_alot.vim
[?1049h[?1h=[1;57r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[57;1H"test_alot.vim" 47 lines, 1210 characters
Executing Test_abbreviation()[57;1H[K[57;1HExecuting Test_augroup_deleted()
[31mW19: Deleting augroup that is still in use[mExecuting Test_augroup_warning()[57;33H[K[57;1H
[31mW19: Deleting augroup that is still in use[m[57;1H[K[57;1Hentering
Executing Test_auto_partial_rebind()
Executing Test_autocmd_bufunload_avoiding_SEGV_01()"aa.txt" [New File][57;20H[K[57;1H
"bb.txt" [New File]
Executing Test_autocmd_bufunload_avoiding_SEGV_02()[57;1H[K[57;1H
"a.txt" [New File]"test_alot.vim" [57;17H[K[57;17H47L, 1210C
Executing Test_autocmd_bufunload_with_tabnext()
Executing Test_autocmd_bufwinleave_with_tabfirst()"a.txt" [New File][57;19H[K[57;1H
Executing Test_bind_in_python()
Executing Test_break_undo()[57;1H[K[57;1HExecuting Test_bufunload()
Executing Test_cancel_ptjump()
Already only one window[57;1H[K[57;1H:ptjump word[35m  # pri kind tag[15Cfile[m
  1 F[8C[35mword[m[14C[34mfile1[m
[15Ccmd1
  2 F[8C[35mword[m[14C[34mfile2[m
[15Ccmd2
Type number and <Enter> (empty cancels): [56;1H"help.txt"[56;16H[K[57;1H[K[56;12H[readonly] 225L, 8437C
Executing Test_caught_error_in_statusline()[27m[23m[m[H[2J[1;1H" This makes testing go faster, since Vim doesn't need to restart.

source test_assign.vim
source test_autocmd.vim
source test_command_count.vim
source test_cursor_func.vim
source test_delete.vim
source test_execute_func.vim
source test_ex_undo.vim
source test_expand.vim
source test_expr.vim
source test_expand_dllpath.vim
source test_feedkeys.vim
source test_file_perm.vim
source test_fileformat.vim
source test_filter_cmd.vim
source test_filter_map.vim
source test_fnamemodify.vim
source test_glob2regpat.vim
source test_goto.vim
source test_help_tagjump.vim
source test_join.vim
source test_jumps.vim
source test_lambda.vim
source test_lispwords.vim
source test_match.vim
source test_menu.vim
source test_mapping.vim
source test_messages.vim
source test_partial.vim
source test_popup.vim
source test_reltime.vim
source test_searchpos.vim
source test_set.vim
source test_sort.vim
source test_statusline.vim
source test_syn_attr.vim
source test_tabline.vim
source test_tabpage.vim
source test_tagcase.vim
source test_tagjump.vim
source test_timers.vim
source test_true_false.vim
source test_unlet.vim
source test_window_cmd.vim
source test_options.vim
new line here
Test3: text with a (parenthesis here
new line here

[1m[34m~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m                                                                                       [m[57;1HExecuting Test_caught_error_in_tabline()[27m[23m[m[H[2J[1;1H[7m                                                                                       [m[3;1Hsource test_assign.vim
source test_autocmd.vim
source test_command_count.vim
source test_cursor_func.vim
source test_delete.vim
source test_execute_func.vim
source test_ex_undo.vim
source test_expand.vim
source test_expr.vim
source test_expand_dllpath.vim
source test_feedkeys.vim
source test_file_perm.vim
source test_fileformat.vim
source test_filter_cmd.vim
source test_filter_map.vim
source test_fnamemodify.vim
source test_glob2regpat.vim
source test_goto.vim
source test_help_tagjump.vim
source test_join.vim
source test_jumps.vim
source test_lambda.vim
source test_lispwords.vim
source test_match.vim
source test_menu.vim
source test_mapping.vim
source test_messages.vim
source test_partial.vim
source test_popup.vim
source test_reltime.vim
source test_searchpos.vim
source test_set.vim
source test_sort.vim
source test_statusline.vim
source test_syn_attr.vim
source test_tabline.vim
source test_tabpage.vim
source test_tagcase.vim
source test_tagjump.vim
source test_timers.vim
source test_true_false.vim
source test_unlet.vim
source test_window_cmd.vim
source test_options.vim
new line here
Test3: text with a (parenthesis here
new line here

[1m[34m~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7mtest_alot.vim                                                                          [m[57;1HExecuting Test_closure_counter()
Executing Test_closure_refcount()
Executing Test_closure_unlet()
Executing Test_color_names()
Executing Test_command_count_0()"DoesNotExistEver" [New File][57;30H[K[57;1H
Executing Test_command_count_1()
"a" [New File]
loading buffers
"b" [New File]
loading buffers
"c" [New File]
loading buffers
"d" [New File]
loading buffers
"e" [New File]
loading buffers"c" [New File][57;15H[K[57;2Hbeb
Executing Test_command_count_2()
"d" [New File]"a
Already only one window"x" [New File][57;15H[K[57;1H
Already only one window
Executing Test_command_count_3()"aaa" [New File][57;17H[K[57;2Hbbb"ccc"test_alot.vim" 47L, 1210C
2 buffers deleted
Executing Test_command_count_4()"cc" [New File][57;16H[K[57;1H
"dd" [New File]
"ee" [New File]"aa
"bb" [New File]
"cc" [New File]
"dd" [New File]
"ee" [New File]"cc
"ee" [New File]
"ff" [New File]
Executing Test_compare_null_dict()
Executing Test_compare_partials()
Executing Test_compl_vim_cmds_after_register_expr()[57;1H[K[57;1H=s:test_func()[2;8H[30m[47m AAAAA_Group           [m[40m [m[3;8H[30m[45m BufAdd                [m[40m [m[4;8H[30m[45m BufCreate             [m[40m [m[5;8H[30m[45m BufDelete             [m[40m [m[6;8H[30m[45m BufEnter              [m[40m [m[7;8H[30m[45m BufFilePost           [m[40m [m[8;8H[30m[45m BufFilePre            [m[40m [m[9;8H[30m[45m BufHidden             [m[40m [m[10;8H[30m[45m BufLeave              [m[40m [m[11;8H[30m[45m BufNew                [m[40m [m[12;8H[30m[45m BufNewFile            [m[40m [m[13;8H[30m[45m BufRead               [m[40m [m[14;8H[30m[45m BufReadCmd            [m[40m [m[15;8H[30m[45m BufReadPost           [m[40m [m[16;8H[30m[45m BufReadPre            [m[40m [m[17;8H[30m[45m BufUnload             [m[40m [m[18;8H[30m[45m BufWinEnter           [m[40m [m[19;8H[30m[45m BufWinLeave           [m[40m [m[20;8H[30m[45m BufWipeout            [m[40m [m[21;8H[30m[45m BufWrite              [m[40m [m[22;8H[30m[45m BufWriteCmd           [m[40m [m[23;8H[30m[45m [m[1m[7mt[m[30m[45mBufWritePost          [m[40m [m[24;8H[30m[45m BufWritePre           [m[40m [m[25;8H[30m[45m CmdUndefined          [m[40m [m[26;8H[30m[45m CmdwinEnter           [m[40m [m[27;8H[30m[45m CmdwinLeave           [m[40m [m[28;8H[30m[45m ColorScheme           [m[40m [m[29;8H[30m[45m CompleteDone          [m[40m [m[30;8H[30m[45m CursorHold            [m[40m [m[31;8H[30m[45m CursorHoldI           [m[40m [m[32;8H[30m[45m CursorMoved           [m[40m [m[33;8H[30m[45m CursorMovedI          [m[40m [m[34;8H[30m[45m EncodingChanged       [m[47m [m[35;8H[30m[45m FileAppendCmd         [m[47m [m[36;8H[30m[45m FileAppendPost        [m[47m [m[37;8H[30m[45m FileAppendPre         [m[47m [m[38;8H[30m[45m FileChangedRO         [m[47m [m[39;8H[30m[45m FileChangedShell      [m[47m [m[40;8H[30m[45m FileChangedShellPost  [m[47m [m[41;8H[30m[45m FileEncoding          [m[47m [m[42;8H[30m[45m FileReadCmd           [m[47m [m[43;8H[30m[45m FileReadPost          [m[47m [m[44;8H[30m[45m FileReadPre           [m[47m [m[45;8H[30m[45m FileType              [m[47m [m[46;8H[30m[45m FileWriteCmd          [m[47m [m[47;8H[30m[45m FileWritePost         [m[47m [m[48;8H[30m[45m FileWritePre          [m[47m [m[49;8H[30m[45m FilterReadPost        [m[47m [m[50;8H[30m[45m FilterReadPre         [m[47m [m[51;8H[30m[45m FilterWritePost       [m[47m [m[52;8H[30m[45m FilterWritePre        [m[47m [m[53;8H[30m[45m FocusGained           [m[47m [m[54;8H[30m[45m FocusLost             [m[47m [m[55;8H[30m[45m FuncUndefined         [m[47m [m[56;8H[30m[45m GUIEnter              [m[47m [m[57;1H[K[57;1HExecuting Test_complete_no_undo()[57;1H[K[57;1H=UndoComplete()[2;1H[27m[23m[m[H[2J[1;1Hxxx
aaa
yyy
[1m[34m~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [m[28;1H[1m[7m[No Name] [+]                                                                          [m[30;1H[1m[34m~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[7mff                                                                                     [m[3;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [2;1H[m[57;1H1 change; before #2  0 seconds ago[57;1H[K[57;1H=UndoComplete()[2;4Hbbb
yyy[3;4H[K[4;1H[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[3;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [2;4H[m[57;1H[1m-- INSERT --[m[57;13H[K[3;1H[30m[47mJanuary        [2;4H[m[57;1H[K[57;1H1 change; before #4  0 seconds ago[57;1H[K[57;1H=UndoComplete()[2;4H
yyy[3;4H[K[4;1H[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[3;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [2;4H[m    January

[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[4;1H[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [m[57;1H[1m-- INSERT --[m[57;13H[K[3;1H[30m[47mJanuary        [2;8H[m[57;1H[K[57;1H1 change; before #5  0 seconds ago
Executing Test_completefunc_opens_new_window_one()
[31msearch hit BOTTOM, continuing at TOP[1;4H[m[57;1H[K[57;1HExecuting Test_completefunc_opens_new_window_two()
[31msearch hit BOTTOM, continuing at TOP[m[57;1H[K[57;1HExecuting Test_completefunc_with_scratch_buffer()[6;1H[30m[47mJanuary        [m
[30m[45mFebruary
March     
April   
May      [6;1HJanuary        [m
[30m[47mFebruary       [5;9H[27m[23m[m[H[2J[1;1Hinfo2-1
2-2
2-3

February
[1m[34m~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [20;1H~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[6;1H[30m[45mJanuary        [m
[30m[47mFebruary       [m
[30m[45mMarch          
April          
May            [m[28;1H[7m[Scratch]                                                                              [56;1Hff                                                                                     [4;1H[Scratch] [Preview]                                                                    [m[28;1H[1m[7m[Scratch]                                                                              [5;9H[mMarch[5;6H[K[6;1H[1m[34m~              
~              
~              
~              
~              [m[6;1H[30m[45mJanuary        [m
[30m[47mFebruary       [m
[30m[45mMarch          
April          
May            [m[1;5H3
3
3[28;1H[7m[Scratch][m[1m[7m [m[7m                                                                              [m[28;1H[1m[7m[Scratch]                                                                              [m[7;1H[30m[45mFebruary       [m
[30m[47mMarch          [5;6H[mApril
[1m[34m~              
~              
~              
~              
~              [m[6;1H[30m[45mJanuary        
February       [m
[30m[47mMarch          [m
[30m[45mApril          
May            [m[1;5H4
4
4[28;1H[7m[Scratch][m[1m[7m [m[7m                                                                              [m[28;1H[1m[7m[Scratch]                                                                              [m[8;1H[30m[45mMarch          [m
[30m[47mApril          [5;6H[m[57;1HExecuting Test_completefunc_works()
[31msearch hit BOTTOM, continuing at TOP[m[2;1H[30m[47mthreedef       [m
[30m[45mthreeDEF       [2;1Hthreedef       [m
[30m[47mthreeDEF       [1;9H[m[L[1;1HthreeDEF
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~              
~              
~              
~              
~              [m[2;1H[30m[45mthreedef       [m
[30m[47mthreeDEF       [1;9H[m[57;1H[K[57;1HExecuting Test_cursorhold_insert()[?12l[?25h[?25l[57;1H[K[57;1HExecuting Test_cursorhold_insert_ctrl_x()[?12l[?25h[?25l[57;1H[K[57;1HExecuting Test_curswant_with_autocommand()[57;1H[K[57;1H
Executing Test_cycle_partial_job()
Executing Test_cyclic_dict_arg()
Executing Test_cyclic_list_arg()
Executing Test_delete_myself()[?12l[?25h
[?25lExecuting Test_dict()
Executing Test_dir_delete()
Executing Test_early_bar()
Executing Test_empty_buffer()
Executing Test_equal()
Executing Test_ex_undo()"ex-undo" [New File][57;21H[K[57;1H[K[57;1H
1 line less; before #3  0 seconds ago
1 line less; after #1  0 seconds ago
2 fewer lines; before #1  0 seconds ago
Executing Test_execute_list()
Executing Test_execute_string()
this
theend
something
Executing Test_existing()
Executing Test_expand()
Executing Test_feedkeys_x_with_empty_string()[57;1H[K[57;1HExecuting Test_file_delete()"Xfile" [New File][57;19H[K[57;9H[K[57;9H[New] 2L, 4C written
Executing Test_file_perm()
Executing Test_fileformat_after_bw()"ee" [New File][57;16H[K[57;2Hcc
Executing Test_filetype_valid()
Executing Test_filter()"Xdoesnotmatch" [New File]"Xwillmatch" [New File][57;24H[K[57;2Hcc" [New File][57;16H[K[57;1H
Executing Test_filter_fails()
Executing Test_filter_map_dict_expr_funcref()
Executing Test_filter_map_dict_expr_string()
Executing Test_filter_map_list_expr_funcref()
Executing Test_filter_map_list_expr_string()
Executing Test_fnamemodify()"test_alot.vim" [57;17H[K[57;17H47L, 1210C
Executing Test_func_unref()
Executing Test_funcref()
0
Executing Test_function_in_dict()
Executing Test_function_with_funcref()
Executing Test_gD()
Executing Test_gD_char()
Executing Test_gD_comment()
Executing Test_gD_inline_comment()
Executing Test_gD_string()
Executing Test_gD_string_same_line()
Executing Test_gD_too()
Executing Test_gd()
Executing Test_gd_comment()
Executing Test_gd_comment_in_string()
Executing Test_gd_inline_comment()
Executing Test_gd_inline_comment_body()
Executing Test_gd_inline_comment_only()
Executing Test_gd_kr_style()
Executing Test_gd_missing_braces()
Executing Test_gd_not_local()
Executing Test_gd_string()
Executing Test_gd_string_in_comment()
Executing Test_gd_string_only()
Executing Test_gd_trailing_comment()
Executing Test_gd_trailing_multiline_comment()
Executing Test_get_partial_items()
Executing Test_getreg_empty_list()
Executing Test_global_local_lispwords()
Executing Test_help_complete()[57;1H[K[57;1H:h test...-col':lh test-col':leh test-col':leth test-col':let h test-col':let sh test-col'[57;7Hth test-col'[57;8Hrh test-col'[57;9H=h test-col'[57;10H'h test-col'[57;11H[57;1H[K[57;1H:h test...-col...har[57;13H[K[57;13H':lh test-char':leh test-char':leth test-char':let h test-char':let sh test-char'[57;7Hth test-char'[57;8Hrh test-char'[57;9H=h test-char'[57;10H'h test-char'[57;11H[57;1H[K[57;1H:h test...-col...har[57;13H[K[57;13H...[57;8H[K[57;8H':lh test':leh test':leth test':let h test':let sh test'[57;7Hth test'[57;8Hrh test'[57;9H=h test'[57;10H'h test'[57;11H[57;1H[K[57;1H:h test...-col':lh test-col':leh test-col':leth test-col':let h test-col':let sh test-col'[57;7Hth test-col'[57;8Hrh test-col'[57;9H=h test-col'[57;10H'h test-col'[57;11H[57;1H[K[57;1H:h test...-col...har[57;13H[K[57;13H':lh test-char':leh test-char':leth test-char':let h test-char':let sh test-char'[57;7Hth test-char'[57;8Hrh test-char'[57;9H=h test-char'[57;10H'h test-char'[57;11H[57;1H[K[57;1H:h test...-col...har[57;13H[K[57;13H...[57;8H[K[57;8H':lh test':leh test':leth test':let h test':let sh test'[57;7Hth test'[57;8Hrh test'[57;9H=h test'[57;10H'h test'[57;11H[57;1H[K[57;1H:h test...-col@en':lh test-col@en':leh test-col@en':leth test-col@en':let h test-col@en':let sh test-col@en'[57;7Hth test-col@en'[57;8Hrh test-col@en'[57;9H=h test-col@en'[57;10H'h test-col@en'[57;11H[57;1H[K[57;1H:h test...-col@en...ab[57;15H[K[57;15H':lh test-col@ab':leh test-col@ab':leth test-col@ab':let h test-col@ab':let sh test-col@ab'[57;7Hth test-col@ab'[57;8Hrh test-col@ab'[57;9H=h test-col@ab'[57;10H'h test-col@ab'[57;11H[57;1H[K[57;1H:h test...-col@en...ab[57;15H[K[57;15H...[57;10Hhar@en[57;16H[K[57;16H':lh test-char@en':leh test-char@en':leth test-char@en':let h test-char@en':let sh test-char@en'[57;7Hth test-char@en'[57;8Hrh test-char@en'[57;9H=h test-char@en'[57;10H'h test-char@en'[57;11H[57;1H[K[57;1H:h test...-col@en...ab[57;15H[K[57;15H...[57;10Hhar@en[57;16H[K[57;16H...ab[57;16H[K[57;16H':lh test-char@ab':leh test-char@ab':leth test-char@ab':let h test-char@ab':let sh test-char@ab'[57;7Hth test-char@ab'[57;8Hrh test-char@ab'[57;9H=h test-char@ab'[57;10H'h test-char@ab'[57;11H[57;1H[K[57;1H:h test...-col@en...ab[57;15H[K[57;15H...[57;10Hhar@en[57;16H[K[57;16H...ab[57;16H[K[57;16H...[57;8H[K[57;8H':lh test':leh test':leth test':let h test':let sh test'[57;7Hth test'[57;8Hrh test'[57;9H=h test'[57;10H'h test'[57;11H[57;1H[K[57;1H:h test...-col':lh test-col':leh test-col':leth test-col':let h test-col':let sh test-col'[57;7Hth test-col'[57;8Hrh test-col'[57;9H=h test-col'[57;10H'h test-col'[57;11H[57;1H[K[57;1H:h test...-col...@en':lh test-col@en':leh test-col@en':leth test-col@en':let h test-col@en':let sh test-col@en'[57;7Hth test-col@en'[57;8Hrh test-col@en'[57;9H=h test-col@en'[57;10H'h test-col@en'[57;11H[57;1H[K[57;1H:h test...-col...@en...[57;10Hhar[57;13H[K[57;13H':lh test-char':leh test-char':leth test-char':let h test-char':let sh test-char'[57;7Hth test-char'[57;8Hrh test-char'[57;9H=h test-char'[57;10H'h test-char'[57;11H[57;1H[K[57;1H:h test...-col...@en...[57;10Hhar[57;13H[K[57;13H...@en':lh test-char@en':leh test-char@en':leth test-char@en':let h test-char@en':let sh test-char@en'[57;7Hth test-char@en'[57;8Hrh test-char@en'[57;9H=h test-char@en'[57;10H'h test-char@en'[57;11H[57;1H[K[57;1H:h test...-col...@en...[57;10Hhar[57;13H[K[57;13H...@en...[57;8H[K[57;8H':lh test':leh test':leth test':let h test':let sh test'[57;7Hth test'[57;8Hrh test'[57;9H=h test'[57;10H'h test'[57;11H[57;1H[K[57;1H:h test...-col@en':lh test-col@en':leh test-col@en':leth test-col@en':let h test-col@en':let sh test-col@en'[57;7Hth test-col@en'[57;8Hrh test-col@en'[57;9H=h test-col@en'[57;10H'h test-col@en'[57;11H[57;1H[K[57;1H:h test...-col@en...ab[57;15H[K[57;15H':lh test-col@ab':leh test-col@ab':leth test-col@ab':let h test-col@ab':let sh test-col@ab'[57;7Hth test-col@ab'[57;8Hrh test-col@ab'[57;9H=h test-col@ab'[57;10H'h test-col@ab'[57;11H[57;1H[K[57;1H:h test...-col@en...ab[57;15H[K[57;15H...ja[57;15H[K[57;15H':lh test-col@ja':leh test-col@ja':leth test-col@ja':let h test-col@ja':let sh test-col@ja'[57;7Hth test-col@ja'[57;8Hrh test-col@ja'[57;9H=h test-col@ja'[57;10H'h test-col@ja'[57;11H[57;1H[K[57;1H:h test...-col@en...ab[57;15H[K[57;15H...ja[57;15H[K[57;15H...[57;10Hhar@en[57;16H[K[57;16H':lh test-char@en':leh test-char@en':leth test-char@en':let h test-char@en':let sh test-char@en'[57;7Hth test-char@en'[57;8Hrh test-char@en'[57;9H=h test-char@en'[57;10H'h test-char@en'[57;11H[57;1H[K[57;1H:h test...-col@en...ab[57;15H[K[57;15H...ja[57;15H[K[57;15H...[57;10Hhar@en[57;16H[K[57;16H...ab[57;16H[K[57;16H':lh test-char@ab':leh test-char@ab':leth test-char@ab':let h test-char@ab':let sh test-char@ab'[57;7Hth test-char@ab'[57;8Hrh test-char@ab'[57;9H=h test-char@ab'[57;10H'h test-char@ab'[57;11H[57;1H[K[57;1H:h test...-col@en...ab[57;15H[K[57;15H...ja[57;15H[K[57;15H...[57;10Hhar@en[57;16H[K[57;16H...ab[57;16H[K[57;16H...ja[57;16H[K[57;16H':lh test-char@ja':leh test-char@ja':leth test-char@ja':let h test-char@ja':let sh test-char@ja'[57;7Hth test-char@ja'[57;8Hrh test-char@ja'[57;9H=h test-char@ja'[57;10H'h test-char@ja'[57;11H[57;1H[K[57;1H:h test...-col@en...ab[57;15H[K[57;15H...ja[57;15H[K[57;15H...[57;10Hhar@en[57;16H[K[57;16H...ab[57;16H[K[57;16H...ja[57;16H[K[57;16H...[57;8H[K[57;8H':lh test':leh test':leth test':let h test':let sh test'[57;7Hth test'[57;8Hrh test'[57;9H=h test'[57;10H'h test'[57;11H[57;1H[K[57;1H:h test...-col':lh test-col':leh test-col':leth test-col':let h test-col':let sh test-col'[57;7Hth test-col'[57;8Hrh test-col'[57;9H=h test-col'[57;10H'h test-col'[57;11H[57;1H[K[57;1H:h test...-col...@en':lh test-col@en':leh test-col@en':leth test-col@en':let h test-col@en':let sh test-col@en'[57;7Hth test-col@en'[57;8Hrh test-col@en'[57;9H=h test-col@en'[57;10H'h test-col@en'[57;11H[57;1H[K[57;1H:h test...-col...@en...ja[57;15H[K[57;15H':lh test-col@ja':leh test-col@ja':leth test-col@ja':let h test-col@ja':let sh test-col@ja'[57;7Hth test-col@ja'[57;8Hrh test-col@ja'[57;9H=h test-col@ja'[57;10H'h test-col@ja'[57;11H[57;1H[K[57;1H:h test...-col...@en...ja[57;15H[K[57;15H...[57;10Hhar[57;13H[K[57;13H':lh test-char':leh test-char':leth test-char':let h test-char':let sh test-char'[57;7Hth test-char'[57;8Hrh test-char'[57;9H=h test-char'[57;10H'h test-char'[57;11H[57;1H[K[57;1H:h test...-col...@en...ja[57;15H[K[57;15H...[57;10Hhar[57;13H[K[57;13H...@en':lh test-char@en':leh test-char@en':leth test-char@en':let h test-char@en':let sh test-char@en'[57;7Hth test-char@en'[57;8Hrh test-char@en'[57;9H=h test-char@en'[57;10H'h test-char@en'[57;11H[57;1H[K[57;1H:h test...-col...@en...ja[57;15H[K[57;15H...[57;10Hhar[57;13H[K[57;13H...@en...ja[57;16H[K[57;16H':lh test-char@ja':leh test-char@ja':leth test-char@ja':let h test-char@ja':let sh test-char@ja'[57;7Hth test-char@ja'[57;8Hrh test-char@ja'[57;9H=h test-char@ja'[57;10H'h test-char@ja'[57;11H[57;1H[K[57;1H:h test...-col...@en...ja[57;15H[K[57;15H...[57;10Hhar[57;13H[K[57;13H...@en...ja[57;16H[K[57;16H...[57;8H[K[57;8H':lh test':leh test':leth test':let h test':let sh test'[57;7Hth test'[57;8Hrh test'[57;9H=h test'[57;10H'h test'[57;11H[57;1H[K[57;1H:h test...-col':lh test-col':leh test-col':leth test-col':let h test-col':let sh test-col'[57;7Hth test-col'[57;8Hrh test-col'[57;9H=h test-col'[57;10H'h test-col'[57;11H[57;1H[K[57;1H:h test...-col...@ja':lh test-col@ja':leh test-col@ja':leth test-col@ja':let h test-col@ja':let sh test-col@ja'[57;7Hth test-col@ja'[57;8Hrh test-col@ja'[57;9H=h test-col@ja'[57;10H'h test-col@ja'[57;11H[57;1H[K[57;1H:h test...-col...@ja...en[57;15H[K[57;15H':lh test-col@en':leh test-col@en':leth test-col@en':let h test-col@en':let sh test-col@en'[57;7Hth test-col@en'[57;8Hrh test-col@en'[57;9H=h test-col@en'[57;10H'h test-col@en'[57;11H[57;1H[K[57;1H:h test...-col...@ja...en[57;15H[K[57;15H...[57;10Hhar[57;13H[K[57;13H':lh test-char':leh test-char':leth test-char':let h test-char':let sh test-char'[57;7Hth test-char'[57;8Hrh test-char'[57;9H=h test-char'[57;10H'h test-char'[57;11H[57;1H[K[57;1H:h test...-col...@ja...en[57;15H[K[57;15H...[57;10Hhar[57;13H[K[57;13H...@ja':lh test-char@ja':leh test-char@ja':leth test-char@ja':let h test-char@ja':let sh test-char@ja'[57;7Hth test-char@ja'[57;8Hrh test-char@ja'[57;9H=h test-char@ja'[57;10H'h test-char@ja'[57;11H[57;1H[K[57;1H:h test...-col...@ja...en[57;15H[K[57;15H...[57;10Hhar[57;13H[K[57;13H...@ja...en[57;16H[K[57;16H':lh test-char@en':leh test-char@en':leth test-char@en':let h test-char@en':let sh test-char@en'[57;7Hth test-char@en'[57;8Hrh test-char@en'[57;9H=h test-char@en'[57;10H'h test-char@en'[57;11H[57;1H[K[57;1H:h test...-col...@ja...en[57;15H[K[57;15H...[57;10Hhar[57;13H[K[57;13H...@ja...en[57;16H[K[57;16H...[57;8H[K[57;8H':lh test':leh test':leth test':let h test':let sh test'[57;7Hth test'[57;8Hrh test'[57;9H=h test'[57;10H'h test'[57;11H
Executing Test_help_tagjump()"help.txt" [57;12H[K[57;12H[readonly] 225L, 8437C"options.txt" [57;15H[K[57;15H[readonly] 8733L, 369919C[57;26Hline 7646 of 8733 --87%-- col 7-49 ((5) of 6)"eval.txt" [57;12H[K[57;12H[readonly][converted] 10592L, 407321C[57;22H line 2405 of 10592 --22%-- col 1 ((5) of 6)"options.txt" [readonly] line 1320 of 8733 --15%-- col 4-25 ((5) of 6)"cmdline[57;15H[K[57;15H[readonly] 1144L, 46758C
Executing Test_if()
Executing Test_info()
Executing Test_invalid()
Executing Test_invalid_submatch()
Executing Test_join_with_count()
Executing Test_keymap_valid()
Executing Test_keyword_jump()"Xtestfile" [57;13H[K[57;13H9L, 141C
Executing Test_lambda_call_lambda_from_lambda()
Executing Test_lambda_capture_by_reference()
Executing Test_lambda_circular_reference()
Executing Test_lambda_closure_counter()
Executing Test_lambda_combination()
Executing Test_lambda_delfunc()
Executing Test_lambda_do_not_share_local_variable()
Executing Test_lambda_fails()
Executing Test_lambda_feature()
Executing Test_lambda_refer_local_variable_from_other_scope()
Executing Test_lambda_scope()
Executing Test_lambda_share_scope()
Executing Test_lambda_side_effect()
Executing Test_lambda_with_a_var()
Executing Test_lambda_with_filter()
Executing Test_lambda_with_map()
Executing Test_lambda_with_partial()
Executing Test_lambda_with_sort()
Executing Test_lambda_with_timer()[?12l[?25h
[?25l1[?12l[?25h
[?25l2[?12l[?25h
[?25l3[?12l[?25h
[?25l4[?12l[?25h
[?25l5[?12l[?25h
[?25l6[?12l[?25h
[?25l7[?12l[?25h
[?25l8[?12l[?25h
[?25lExecuting Test_load_menu()
Executing Test_loop_over_null_list()
Executing Test_map_ctrl_c_insert()[57;1H[K[57;1HExecuting Test_map_ctrl_c_visual()[57;1H[K[57;1H:'<,'>[57;2H[K[57;2H$put ='vmap works'
Executing Test_map_cursor()[57;1H[K[57;1H1 line less; before #8  0 seconds ago
Executing Test_map_feedkeys()[57;1H[K[57;1H:call feedkeys(".", "in")[57;1H[K[57;1H:call feedkeys(".", "in")[57;1H[K[57;1HExecuting Test_map_langmap()[57;1H[K[57;1H:call append(line('$'), '+')
Executing Test_map_meta_quotes()[57;1H[K[57;1HExecuting Test_match()
[27m[23m[m[H[2J[1;1Habcd[41me[mfg[41mhij[mklmnopq
TEST2: CTRL-C |<ctrl-c>A|
vmap works

Test1: text with a (here some more text)
Test1: text with a (here some more text)


Test2: text wit a (here some more text [und undo])
fooc d
fooc d
+
+
bbbb
bbbb
cccc
bbbb
+
-foo-
[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name] [+]                                                                          [27m[23m[m[H[2J[1;1Habc[41mdΣ[m[1;6Hab[41mcd[mef
TEST2: CTRL-C |<ctrl-c>A|
vmap works

Test1: text with a (here some more text)
Test1: text with a (here some more text)


Test2: text wit a (here some more text [und undo])
fooc d
fooc d
+
+
bbbb
bbbb
cccc
bbbb
+
-foo-
[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name] [+]                                                                          [m[57;1HExecuting Test_matchaddpos()[27m[23m[m[H[2J[1;1H1[1m[37m[41m2[m345
N[1m[37m[41mP[m
vmap works

Test1: text with a (here some more text)
Test1: text with a (here some more text)


Test2: text wit a (here some more text [und undo])
fooc d
fooc d
+
+
bbbb
bbbb
cccc
bbbb
+
-foo-
[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name] [+]                                                                          [27m[23m[m[H[2J[1;1H1[1m[37m[41m2[m345[30m[43m 
N[m[1m[37m[41mP[m[30m[43m [m
vmap works[30m[43m 
 [m
Test1: text with a (here some more text)[30m[43m [m
Test1: text with a (here some more text)[30m[43m 
 
 [m
Test2: text wit a (here some more text [und undo])[30m[43m [m
fooc d[30m[43m [m
fooc d[30m[43m [m
+[30m[43m [m
+[30m[43m [m
bbbb[30m[43m [m
bbbb[30m[43m [m
cccc[30m[43m [m
bbbb[30m[43m [m
+[30m[43m [m
-foo-[30m[43m [m
[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name] [+]                                                                          [27m[23m[m[H[2J[1;1H0[1m[37m[41m1[m234[1m[37m[41m5[m[30m[43m 
N[m[1m[37m[41mP[m[30m[43m [m
vmap works[30m[43m 
 [m
Test1: text with a (here some more text)[30m[43m [m
Test1: text with a (here some more text)[30m[43m 
 
 [m
Test2: text wit a (here some more text [und undo])[30m[43m [m
fooc d[30m[43m [m
fooc d[30m[43m [m
+[30m[43m [m
+[30m[43m [m
bbbb[30m[43m [m
bbbb[30m[43m [m
cccc[30m[43m [m
bbbb[30m[43m [m
+[30m[43m [m
-foo-[30m[43m [m
[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name] [+]                                                                          [27m[23m[m[H[2J[1;1H[1m[37m[41m1234567[m890
N[1m[37m[41mH[m
vmap works

Test1: text with a (here some more text)
Test1: text with a (here some more text)


Test2: text wit a (here some more text [und undo])
fooc d
fooc d
+
+
bbbb
bbbb
cccc
bbbb
+
-foo-
[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name] [+]                                                                          [27m[23m[m[H[2J[1;1H[1m[37m[41m1234567890[m
N[1m[37m[41mH[m
vmap works

Test1: text with a (here some more text)
Test1: text with a (here some more text)


Test2: text wit a (here some more text [und undo])
fooc d
fooc d
+
+
bbbb
bbbb
cccc
bbbb
+
-foo-
[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name] [+]                                                                          [m[57;1HExecuting Test_matchaddpos_using_negative_priority()[27m[23m[m[H[2J[1;1H[30m[43mx[m
NH
vmap works

Test1: te[30m[43mx[mt with a (here some more te[30m[43mx[mt)
Test1: te[30m[43mx[mt with a (here some more te[30m[43mx[mt)


Test2: te[30m[43mx[mt wit a (here some more te[30m[43mx[mt [und undo])
fooc d
fooc d
+
+
bbbb
bbbb
cccc
bbbb
+
-foo-
[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name] [+]                                                                          [27m[23m[m[H[2J[1;1H[1m[37m[41mx[m
NH
vmap works

Test1: text with a (here some more text)
Test1: text with a (here some more text)


Test2: text wit a (here some more text [und undo])
fooc d
fooc d
+
+
bbbb
bbbb
cccc
bbbb
+
-foo-
[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name] [+]                                                                          [27m[23m[m[H[2J[1;1H[1m[37m[41mx
-1 match priority[m
vmap works

Test1: text with a (here some more text)
Test1: text with a (here some more text)


Test2: text wit a (here some more text [und undo])
fooc d
fooc d
+
+
bbbb
bbbb
cccc
bbbb
+
-foo-
[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name] [+]                                                                          [m[57;1HExecuting Test_matchstrpos()
Executing Test_max_min_errors()
Executing Test_messages()
hello0[1;1H[3L[1;1H[1m[37m[41mx
-1 match priority[m
vmap works[56;11H[1m[7m    [m[57;1H[K[57;1Hhello1234567898
hello9[1;1H[L[1;1H[1m[37m[41mx[m[57;1H[K[57;1Hhello9Executing Test_missing_attr()
Executing Test_move_cursor()
Executing Test_named_function_closure()
Executing Test_no_type_checking()
Executing Test_noinsert_complete()[57;1H[K[57;1H=s:complTest1()[1;1H[4L[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [11;1H~                                                                                      [12;1H~                                                                                      [13;1H~                                                                                      [14;1H~                                                                                      [15;1H~                                                                                      [16;1H~                                                                                      [17;1H~                                                                                      [18;1H~                                                                                      [19;1H~                                                                                      [m[28;1H[1m[7m[No Name]                                                                              [m[29;1H[1m[37m[41mx[m[29;2H[K[30;1H[1m[37m[41m-1 match priority[m[30;18H[K[31;1Hvmap works[31;11H[K[32;1H[K[33;1HTest1: text with a (here some more text)[33;41H[K[34;1HTest1: text with a (here some more text)[34;41H[K[35;1H[K[36;1H[K[37;1HTest2: text wit a (here some more text [und undo])[37;51H[K[38;1Hfooc d[38;7H[K[39;1Hfooc d[39;7H[K[40;1H+[40;2H[K[41;1H+[41;2H[K[42;1Hbbbb[42;5H[K[43;1Hbbbb[43;5H[K[44;1Hcccc[44;5H[K[45;1Hbbbb[45;5H[K[46;1H+[46;2H[K[47;1H-foo-[47;6H[K[56;1H[7m[No Name][m[1m[7m [m[7m                                                                              [m[2;1H[30m[47msource         [m
[30m[45msoundfold      [1;1H[m[2;4H[30m[47mndfold[m[57;1H[K[57;1H=s:complTest2()[1;1H
[1m[34m~              
~              [m[2;1H[30m[47msource         [m
[30m[45msoundfold      [1;1H[m[57;1H[K[57;1HExecuting Test_non_zero_arg()
Executing Test_not_existing()
Executing Test_not_lamda()
Executing Test_omnifunc_with_check()
[31msearch hit BOTTOM, continuing at TOP[m[1;1H[4L[1;1Hfour1
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [m[28;11H[1m[7m[+][m[2;1H[30m[47mfour1          [m
[30m[45mfour2          [m[1;5H2
[1m[34m~              
~              [m[2;1H[30m[47mfour1          [m
[30m[45mfour2          [2;1Hfour1          [m
[30m[47mfour2          [1;6H[m
[1m[34m~              
~              [m[2;1H[30m[45mfour1          [m
[30m[47mfour2          [m
[30m[45mfour3          
four4          
four5          
four6          [1;6H[m[57;1H[K[57;1H[31msearch hit BOTTOM, continuing at TOP[m[1;5H1
[1m[34m~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mfour1          [m
[30m[45mfour2          [m[1;5H2
[1m[34m~              
~              [m[2;1H[30m[47mfour1          [m
[30m[45mfour2          [2;1Hfour1          [m
[30m[47mfour2          [m[1;5H3
[1m[34m~              
~              [m[2;1H[30m[45mfour1          
four2          [m
[30m[47mfour3          [m
[30m[45mfour4          [1;6H[m
[1m[34m~              
~              
~              
~              [m[2;1H[30m[45mfour1          
four2          [m
[30m[47mfour3          [m
[30m[45mfour4          
four5          
four6          [1;6H[m[57;1H[K[57;1H[31msearch hit BOTTOM, continuing at TOP[m[1;5H1
[1m[34m~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mfour1          [m
[30m[45mfour2          [m[1;5H2
[1m[34m~              
~              [m[2;1H[30m[47mfour1          [m
[30m[45mfour2          [2;1Hfour1          [m
[30m[47mfour2          [m[1;5H3
[1m[34m~              
~              [m[2;1H[30m[45mfour1          
four2          [m
[30m[47mfour3          [m
[30m[45mfour4          [4;1Hfour3          [m
[30m[47mfour4          [m
[30m[45mfour5          
four6          [1;6H[m4
[1m[34m~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mfour1          
four2          
four3          [m
[30m[47mfour4          [m
[30m[45mfour5          
four6          [1;6H[m5
[1m[34m~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mfour1          
four2          
four3          [m
[30m[47mfour4          [m
[30m[45mfour5          
four6          [5;1Hfour4          [m
[30m[47mfour5          [1;6H[m[57;1H[K[57;1HExecuting Test_oneshot()[?12l[?25h
[?25lExecuting Test_option_value()
Executing Test_options()"option-window" [New File]
Executing Test_partial_args()
Executing Test_partial_dict()
Executing Test_partial_exists()
Executing Test_partial_implicit()
Executing Test_partial_string()
Executing Test_path_keep_commas()
Executing Test_paused()[?12l[?25h
[?25lExecuting Test_popup_complete()[57;1H[K[57;1H=ListMonths()[1;5H[10L[1;1HJune
[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~                                                                                      [5;1H~                                                                                      [6;1H~                                                                                      [7;1H~                                                                                      [8;1H~                                                                                      [9;1H~                                                                                      [10;1H~                                                                                      [m[2;1H[30m[47mJune           [m
[30m[45mJuly           [1;5H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJune           [m
[30m[47mJuly           [1;5H[m[57;1H[K[57;1H=ListMonths()[1;8HJanuary
[1m[34m~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [m
[30m[47mFebruary       [1;8H[m

[30m[45mFebruary       [m
[30m[47mMarch          [1;8H[m


[30m[45mMarch          [m
[30m[47mApril          [1;8H[m[5;1H[30m[45mApril          [m
[30m[47mMay            [1;8H[m[6;1H[30m[45mMay            [m
[30m[47mJune           [1;8H[m[7;1H[30m[45mJune           [m
[30m[47mJuly           [1;8H[m[8;1H[30m[45mJuly           [m
[30m[47mAugust         [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mJune           
July           [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[K[57;1H=ListMonths()[1;5HJune[1;5H[K[2;1H[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJune           [m
[30m[45mJuly           [1;5H[m[1;3H[K[2;1H[1m[34m~              
~              [m[2;1H[30m[47mJune           [m
[30m[45mJuly           [m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJune           [1;3H
July[m[57;1H[K[57;1H=ListMonths()[1;5Hne
[1m[34m~              
~              [m[2;1H[30m[47mJune           [m
[30m[45mJuly           [1;5H[m[1;3H[K[2;1H[1m[34m~              
~              [m[2;1H[30m[47mJune           [m
[30m[45mJuly           [m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJune           [1;3H
July[1;5H[mly
[1m[34m~              
~              [m[2;1H[30m[45mJuly           [m[30m[47mJuly           [1;5H[m[57;1H[K[57;1H=ListMonths()[1;5Hne
[1m[34m~              [m[30m[47mJune           [m
[30m[45mJuly           [1;5H[m[1;3H[K[2;1H[1m[34m~              
~              [m[2;1H[30m[47mJune           [m
[30m[45mJuly           [m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJune           [1;3H
July[m[57;1H[K[57;1H=ListMonths()[1;8HJanuary
[1m[34m~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m February
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [m
[30m[47mFebruary       [1;9H[m[57;1H[K[57;1H=ListMonths()[1;8HJanuary[1;8H[K[2;1H[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mJune           
July           [1;8H[mJune[1;5H[K[2;1H[1m[34m~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mJune           
July           [m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [m
[30m[47mJune           [1;5H[mly
[1m[34m~              
~              
~              [m[2;1H[30m[45mJanuary        [m
[30m[47mJune           [m
[30m[45mJuly           [3;1HJune           [m
[30m[47mJuly           [1;5H[mJ[1;2H[K[2;1H[1m[34m~              
~              
~              [m[2;1H[30m[45mJanuary        
June           [m
[30m[47mJuly           [m[30m[45mJuly           [1;2H[m[57;1H[K[57;1H=ListMonths()[1;8HJanuary
[1m[34m~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mJune           
July           [1;8H[mJune[1;5H[K[2;1H[1m[34m~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mJune           
July           [m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [m
[30m[47mJune           [1;5H[mly
[1m[34m~              
~              
~              [m[2;1H[30m[45mJanuary        [m
[30m[47mJune           [m
[30m[45mJuly           [3;1HJune           [m
[30m[47mJuly           [1;5H[mJ[1;2H[K[2;1H[1m[34m~              
~              
~              [m[2;1H[30m[45mJanuary        
June           [m
[30m[47mJuly           [m[30m[45mJuly           [1;2H[m      January
[1m[34m~              
~              
~              [m[2;1H[30m[45mJanuary        
June           
July           [m[2;1H[30m[47mJanuary        [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mJune           
July           [1;8H[m[57;1H[K[57;1H=ListMonths()[1;5HJune[1;5H[K[2;1H[1m[34m~              
~              
~              [m[2;1H[30m[47mJune           [m
[30m[45mJuly           [1;5H[m[57;1H[K[57;1H=ListMonths()[1;8HJanuary
[1m[34m~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [1;8H[m[13;1H[30m[47mDecember       [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [1;8H[m[13;1H[30m[47mDecember       [1;8H

February       [m[13;1H[30m[45mDecember       [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [m[12;1H[30m[47mNovember       [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [m[12;1H[30m[47mNovember       [1;8H[m[12;1H[30m[45mNovember       [m
[30m[47mDecember       [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [m[12;1H[30m[47mNovember       [1;8H[m[12;1H[30m[45mNovember       [m
[30m[47mDecember       [1;8H[m[13;1H[30m[45mDecember       [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [m[12;1H[30m[47mNovember       [1;8H[m[12;1H[30m[45mNovember       [m
[30m[47mDecember       [1;8H[m[13;1H[30m[45mDecember       [1;8H[m[11;1H[30m[47mOctober        [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [1;8H[m[13;1H[30m[47mDecember       [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [1;8H[m[13;1H[30m[47mDecember       [1;8H[12;1HNovember       [m
[30m[45mDecember       [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[1;1H[K[2;1H[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [1;1H[8C[mDecember
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [m[30m[47mDecember       [1;9H[mNov
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           
August         
September      
October        
November       [m
[30m[47mDecember       [12;1HNovember       [m
[30m[45mDecember       [1;9H[mOctober[1;8H[K[2;1H[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           
August         
September      
October        [m
[30m[47mNovember       [m
[30m[45mDecember       [m[11;1H[30m[47mOctober        [m
[30m[45mNovember       [1;8H[m  September
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           
August         
September      [m
[30m[47mOctober        [m
[30m[45mNovember       
December       [m[10;1H[30m[47mSeptember      [m
[30m[45mOctober        [1;10H[m[57;1H[K[57;1H=ListMonths()[1;8HJanuary[1;8H[K[2;1H[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[K[57;1H=ListMonths()[1;8H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;8H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [1;8H[m[13;1H[30m[47mDecember       [1;8H[12;1HNovember       [m
[30m[45mDecember       [1;8H[m[11;1H[30m[47mOctober        [m
[30m[45mNovember       [1;8H[m[10;1H[30m[47mSeptember      [m
[30m[45mOctober        [1;8H[m[57;1H[K[57;1H=ListMonths()[2;9H[57;1H[K[57;1H=ListMonths()[2;9H[1;1HDecember2015
December[2;9H[K[3;1H[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[3;1H[30m[47mDecember       [2;9H[m[57;1H[K[57;1H=ListMonths()[1;6HMarch[1;6H[K[2;1H[1m[34m~                                                                                      [3;1H~              [m[2;1H[30m[47mMarch          [m
[30m[45mMay            [1;6H[my[1;4H[K[2;1H[1m[34m~              
~              [m[2;1H[30m[47mMarch          [m
[30m[45mMay            [m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mMarch          [m
[30m[47mMay            [1;4H[m  rch
[1m[34m~              
~              [m[2;1H[30m[45mMarch          [m
[30m[47mMay            [2;1HMarch          [m
[30m[45mMay            [1;6H[m[57;1H[K[57;1H=ListMonths()[2;6H[1;2H[K[2;1HMarch[2;6H[K[3;1H[1m[34m~              [m[30m[47mMarch          [m
[30m[45mMay            [2;6H[my[2;4H[K[3;1H[1m[34m~              
~              [m[3;1H[30m[47mMarch          [m
[30m[45mMay            [m[57;1H[1m-- INSERT --[m[57;13H[K[3;1H[30m[45mMarch          [m
[30m[47mMay            [2;4H[m  rch
[1m[34m~              
~              [m[3;1H[30m[45mMarch          [m
[30m[47mMay            [3;1HMarch          [m
[30m[45mMay            [2;6H[m[57;1H[K[57;1H=ListMonths()[1;6HMarch
[1m[34m~                                                                                      [3;1H~              
~              [m[2;1H[30m[47mMarch          [m
[30m[45mMay            [1;6H[m[57;1H[K[57;1H=ListMonths()[2;2HM[2;2H[K[3;1H[1m[34m~              [m[30m[45mMarch          
May            [2;2H[m[57;1H[K[57;1H=ListMonths()[3;2HM[3;2H[K[4;1H[1m[34m~              [m[30m[47mMarch          [m
[30m[45mMay            [3;2H[m[57;1H[K[57;1HExecuting Test_popup_complete2()[57;1H[K[57;1H=ListMonths()[1;2H[57;1H[K[57;1HExecuting Test_popup_completion_insertmode()[57;1H[K[57;1H=ListMonths()[1;1H[1;1H[K[2;1H[1m[34m~                                                                                      [3;1H~                                                                                      [4;1H~              
~              [m[28;11H[1m[7m    [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;1H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [m
[30m[47mFebruary       [1;1H[m[57;1H[K[57;1H=ListMonths()[1;1H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[28;11H[1m[7m[+][m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;1H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [m
[30m[47mFebruary       [1;1H[m[57;1H[K[57;1H=ListMonths()[1;1H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;1H[8C[mFebruary
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [m
[30m[47mFebruary       [1;9H[mMarch[1;6H[K[2;1H[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        [m
[30m[47mFebruary       [m
[30m[45mMarch          
April          
May            
June           
July           
August         
September      
October        
November       
December       [3;1HFebruary       [m
[30m[47mMarch          [1;6H[mApril
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       [m
[30m[47mMarch          [m
[30m[45mApril          
May            
June           
July           
August         
September      
October        
November       
December       [4;1HMarch          [m
[30m[47mApril          [1;6H[mMay[1;4H[K[2;1H[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          [m
[30m[47mApril          [m
[30m[45mMay            
June           
July           
August         
September      
October        
November       
December       [5;1HApril          [m
[30m[47mMay            [1;4H[m June
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          [m
[30m[47mMay            [m
[30m[45mJune           
July           
August         
September      
October        
November       
December       [6;1HMay            [m
[30m[47mJune           [1;5H[mly
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          
May            [m
[30m[47mJune           [m
[30m[45mJuly           
August         
September      
October        
November       
December       [7;1HJune           [m
[30m[47mJuly           [1;5H[m  August
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          
May            
June           [m
[30m[47mJuly           [m
[30m[45mAugust         
September      
October        
November       
December       [8;1HJuly           [m
[30m[47mAugust         [1;7H[m   September
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           [m
[30m[47mAugust         [m
[30m[45mSeptember      
October        
November       
December       [9;1HAugust         [m
[30m[47mSeptember      [1;10H[mOctober[1;8H[K[2;1H[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           
August         [m
[30m[47mSeptember      [m
[30m[45mOctober        
November       
December       [10;1HSeptember      [m
[30m[47mOctober        [1;8H[m November
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           
August         
September      [m
[30m[47mOctober        [m
[30m[45mNovember       
December       [11;1HOctober        [m
[30m[47mNovember       [1;9H[mDec
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           
August         
September      
October        [m
[30m[47mNovember       [m
[30m[45mDecember       [12;1HNovember       [m
[30m[47mDecember       [1;9H[m[1;1H[K[2;1H[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           
August         
September      
October        
November       [m
[30m[47mDecember       [m[30m[45mDecember       [1;1H[m[57;1H[K[57;1H=ListMonths()[1;1H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;1H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [1;1H[m[57;1H[K[57;1H=ListMonths()[1;1H
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[47mJanuary        [m
[30m[45mFebruary       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [1;1H[m[57;1H[1m-- INSERT --[m[57;13H[K[2;1H[30m[45mJanuary        [1;1H[8C[mDecember
[1m[34m~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              
~              [m[2;1H[30m[45mJanuary        
February       
March          
April          
May            
June           
July           
August         
September      
October        
November       
December       [m[30m[47mDecember       [1;9H[m[57;1H[K[57;1HExecuting Test_printf_64bit()
Executing Test_printf_errors()
0
0
1
0
0
Executing Test_printf_float()
0.000000
Executing Test_printf_misc()
Executing Test_printf_spec_b()
Executing Test_printf_spec_s()
Executing Test_ptag_with_notagstack()
Executing Test_read_only()
Executing Test_recursive_delete()"Xdir1/Xfile" [New File][57;25H[K[57;15H[K[57;15H[New] 2L, 4C written[57;8Hsubdir/Xfile" [57;22H[K[57;22H[New] 2L, 4C written
Executing Test_redefine_dict_func()
Executing Test_ref_job_partial_dict()
Executing Test_reltime()[?12l[?25h
[?25lExecuting Test_repeat_many()[?12l[?25h
[?25lExecuting Test_repeat_three()[?12l[?25h
[?25lExecuting Test_retain_partial()[?12l[?25h
[?25lExecuting Test_script_function_in_dict()
Executing Test_script_function_in_dict_arg()
Executing Test_searchpos()"one" [New File][57;17H[K[57;1H
Executing Test_set_add()
Executing Test_set_backslash()
Executing Test_set_reg_null_list()
Executing Test_set_tagcase()
Executing Test_setmatches()
Executing Test_signcolumn()
Executing Test_sort_default()
Executing Test_sort_float()
Executing Test_sort_nested()
Executing Test_sort_numbers()
Executing Test_sort_numeric()
Executing Test_sort_strings()
Executing Test_special_char()
Executing Test_statusline_will_be_disabled_with_error()[1;1H[37L[1;1Hx
-1 match priority
vmap works

Test1: text with a (here some more text)
Test1: text with a (here some more text)


Test[34m2[m: text wit a (here some more text [und undo])
fooc d
fooc d
+
+
bbbb
bbbb
cccc
bbbb
+
-foo-
[1m[34m~                                                                                      [21;1H~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [m[56;1H[1m[7m                                                                                       [m[57;1H[K[57;1H
Executing Test_stop_all_in_callback()[?12l[?25h
[?25lExecuting Test_stop_in_callback()[?12l[?25h
[?25lExecuting Test_stopall()
Executing Test_strcharpart()
Executing Test_strgetchar()
Executing Test_substitute_expr()
Executing Test_substitute_expr_arg()
Executing Test_symlink_delete()"Xfile" [New File][57;19H[K[57;9H[K[57;9H[New] 2L, 4C written[?1l>[?12l[?25h[?1049l[?1049h[?1h=[57;1H
[?25lExecuting Test_symlink_dir_delete()[?1l>[?12l[?25h[?1049l[?1049h[?1h=[57;1H
[?25lExecuting Test_symlink_recursive_delete()"Xdir3/Xfile" [New File][57;25H[K[57;15H[K[57;15H[New] 2L, 4C written[57;8Hsubdir/Xfile" [57;22H[K[57;22H[New] 2L, 4C written"Xdir4/Xfile" [57;15H[K[57;15H[New] 2L, 4C written[?1l>[?12l[?25h[?1049l[?1049h[?1h=[57;1H
[?25lExecuting Test_syntax_valid()
Executing Test_tabline_will_be_disabled_with_error()[27m[23m[m[H[2J[1;1H[7m                                                                                       [m[2;1Hx
-1 match priority
vmap works

Test1: text with a (here some more text)
Test1: text with a (here some more text)


Test[34m2[m: text wit a (here some more text [und undo])
fooc d
fooc d
+
+
bbbb
bbbb
cccc
bbbb
+
-foo-
[1m[34m~                                                                                      [22;1H~                                                                                      [23;1H~                                                                                      [24;1H~                                                                                      [25;1H~                                                                                      [26;1H~                                                                                      [27;1H~                                                                                      [28;1H~                                                                                      [29;1H~                                                                                      [30;1H~                                                                                      [31;1H~                                                                                      [32;1H~                                                                                      [33;1H~                                                                                      [34;1H~                                                                                      [35;1H~                                                                                      [36;1H~                                                                                      [37;1H~                                                                                      [38;1H~                                                                                      [39;1H~                                                                                      [40;1H~                                                                                      [41;1H~                                                                                      [42;1H~                                                                                      [43;1H~                                                                                      [44;1H~                                                                                      [45;1H~                                                                                      [46;1H~                                                                                      [47;1H~                                                                                      [48;1H~                                                                                      [49;1H~                                                                                      [50;1H~                                                                                      [51;1H~                                                                                      [52;1H~                                                                                      [53;1H~                                                                                      [54;1H~                                                                                      [55;1H~                                                                                      [m[56;1H[1m[7m[No Name]                                                                              [m[57;1HExecuting Test_tabnext_on_buf_unload1()
Executing Test_tabnext_on_buf_unload2()
"x" [Not edited] --No lines in buffer-- ((5) of 6)"y" [New File][57;15H[K[57;1H
Executing Test_tabpage()"Xtestfile" [New File][57;23H[K[57;1H
2 fewer lines; before #1  0 seconds ago
Executing Test_tabpage_with_autocmd()
Executing Test_tabpage_with_tab_modifier()"help.txt" [readonly] line 1 of 225 --0%-- col 1 ((5) of 6)
"cc" [New File]
Executing Test_tagcase()"Xtext" [New File][57;19H[K[57;1H
Executing Test_three_windows()"Xtestje1" [New File][57;22H[K[57;12H[K[57;12H[New] 1L, 8C written[57;9H2" [New File][57;22H[K[57;12H[K[57;12H[New] 1L, 8C written[57;9H3" [New File][57;22H[K[57;12H[K[57;12H[New] 1L, 8C written[57;9H1[57;12H[K[57;12H1L, 8C
"Xtestje3" 1L, 8C[57;9H2[57;12H[K[57;12H1L, 8C[57;9H1[57;12H[K[57;12H1L, 8C
"Xanother" [New File]"Xtestje1[57;12H[K[57;12H1L, 8C"Xanother" [New File]
Already only one window"help.txt" [57;12H[K[57;12H[readonly] 225L, 8437C
Executing Test_tostring()
Executing Test_true_false_arg()[?1l>[?12l[?25h[?1049l[?1049h[?1h=[57;32H[?1l>[?1049l[?1049h[?1h=[57;32H[?1l>[?1049l[?1049h[?1h=[57;32H[?1l>[?1049l[?1049h[?1h=[57;1H
[?25l"colored" [New File]
Executing Test_valid()
Executing Test_version()
Executing Test_vim_did_enter()
Executing Test_whichwrap()
Executing Test_win_tab_autocmd()
"somefile" [New File]
Executing Test_window_cmd_cmdwin_with_vsp()
Executing Test_window_cmd_ls0_with_split()
Executing Test_window_cmd_wincmd_gf()"test_gf.txt" [57;15H[K[57;15H0L, 0C[31mW19: Deleting augroup that is still in use[mExecuting Test_with_directories()[57;34H[K[57;1H"Xdir1/file" [New File][57;24H[K[57;1H
"Xdir1/file" [New] 2L, 4C written
"Xdir3/Xdir4/file" [New] 2L, 4C written[57;20H[K[57;20H2L, 4C"Xdir?/*/nofile" [New DIRECTORY]"foo" [New File][57;18H[K[57;1HExecuting Test_with_partial_callback()[?12l[?25h[?25l[57;21Htilde()[57;28H[K[57;17Hrong_arguments()"test_alot.res" [New File][57;27H[K[57;1H
"test_alot.res" [New] 0L, 0C writtenExecuted 217 tests[57;19H[K[57;1H"messages" [57;12H[K[57;12H494L, 13093C
"messages" 714L, 20439C written
[?1l>[?12l[?25h[?1049l

From test_arglist.vim:
Executing Test_argadd()
Executing Test_argc()
Executing Test_argdelete()
Executing Test_argedit()
Executing Test_argidx()
Executing Test_arglist_autocmd()
Executing Test_arglistid()
Executing Test_argpos()
Executing Test_argument()
Executing Test_argv()
Executing Test_zero_argadd()
Executed 11 tests

From test_assert.vim:
Executing Test_assert_equal()
Executing Test_assert_exception()
Executing Test_assert_fail_fails()
Executing Test_assert_false()
Executing Test_assert_inrange()
Executing Test_assert_notequal()
Executing Test_assert_true()
Executing Test_compare_fail()
Executing Test_match()
Executing Test_notmatch()
Executing Test_user_is_happy()
Executing Test_wrong_error_type()
Executed 12 tests

From test_autochdir.vim:
Executing Test_set_filename()
Executed 1 test

From test_backspace_opt.vim:
Executing Test_backspace_option()
Executed 1 test

From test_bufwintabinfo.vim:
Executing Test_get_buf_options()
Executing Test_get_win_options()
Executing Test_getbufwintabinfo()
Executed 3 tests

From test_cdo.vim:
Executing Test_cdo()
Executing Test_ldo()
Executed 2 tests

From test_channel.vim:
Executed 0 test

From test_charsearch.vim:
Executing Test_charsearch()
Executing Test_search_cmds()
Executed 2 tests

From test_cmdline.vim:
Executing Test_complete_list()
Executing Test_complete_tab()
Executing Test_complete_wildmenu()
Executing Test_expand_star_star()
Executing Test_getcompletion()
Executed 5 tests

From test_crypt.vim:
Executing Test_crypt_blowfish()
Executing Test_crypt_blowfish2()
Executing Test_crypt_zip()
Executing Test_head_only_2()
Executing Test_head_only_3()
Executing Test_uncrypt_blowfish()
Executing Test_uncrypt_blowfish2()
Executing Test_uncrypt_zip()
Executed 8 tests

From test_cscope.vim:
Executed 0 test

From test_diffmode.vim:
Executing Test_diff_fold_sync()
Executing Test_diffget_diffput()
Executing Test_diffoff()
Executing Test_filler_lines()
Executing Test_setting_cursor()
Executing Test_vert_split()
Executed 6 tests

From test_digraph.vim:
Executing Test_digraph_cmndline()
Executing Test_digraphs()
Executing Test_digraphs_option()
Executing Test_digraphs_output()
Executing Test_loadkeymap()
Executed 5 tests

From test_farsi.vim:
Executing Test_farsi_map()
Executing Test_farsi_toggle()
Executed 2 tests

From test_fnameescape.vim:
Executing Test_fnameescape()
Executed 1 test

From test_gf.vim:
Executing Test_gf_url()
Executed 1 test

From test_gn.vim:
Executing Test_gn_command()
Executed 1 test

From test_gui.vim:
Executed 0 test

From test_hardcopy.vim:
Executing Test_printheader_parsing()
Executing Test_printmbfont_parsing()
Executing Test_printoptions_parsing()
Executing Test_with_syntax()
Executed 4 tests

From test_history.vim:
Executing Test_History()
Executed 1 test

From test_hlsearch.vim:
Executing Test_hlsearch()
Executed 1 test

From test_increment.vim:
Executing Test_normal_increment_01()
Executing Test_normal_increment_02()
Executing Test_normal_increment_03()
Executing Test_visual_increment_01()
Executing Test_visual_increment_02()
Executing Test_visual_increment_03()
Executing Test_visual_increment_04()
Executing Test_visual_increment_05()
Executing Test_visual_increment_06()
Executing Test_visual_increment_07()
Executing Test_visual_increment_08()
Executing Test_visual_increment_09()
Executing Test_visual_increment_10()
Executing Test_visual_increment_11()
Executing Test_visual_increment_12()
Executing Test_visual_increment_13()
Executing Test_visual_increment_14()
Executing Test_visual_increment_15()
Executing Test_visual_increment_16()
Executing Test_visual_increment_17()
Executing Test_visual_increment_18()
Executing Test_visual_increment_19()
Executing Test_visual_increment_20()
Executing Test_visual_increment_21()
Executing Test_visual_increment_22()
Executing Test_visual_increment_23()
Executing Test_visual_increment_24()
Executing Test_visual_increment_25()
Executing Test_visual_increment_26()
Executing Test_visual_increment_27()
Executing Test_visual_increment_28()
Executing Test_visual_increment_29()
Executing Test_visual_increment_30()
Executing Test_visual_increment_31()
Executing Test_visual_increment_32()
Executing Test_visual_increment_33()
Executing Test_visual_increment_34()
Executing Test_visual_increment_35()
Executing Test_visual_increment_36()
Executing Test_visual_increment_37()
Executing Test_visual_increment_38()
Executed 41 tests

From test_increment_dbcs.vim:
Executing Test_increment_dbcs_1()
Executed 1 test

From test_job_fails.vim:
Executing Test_job_start_fails()
Executed 1 test

From test_json.vim:
Executing Test_js_decode()
Executing Test_js_encode()
Executing Test_json_decode()
Executing Test_json_encode()
Executed 4 tests

From test_langmap.vim:
Executing Test_langmap()
Executed 1 test

From test_man.vim:
Executing Test_g_ft_man_open_mode()
Executing Test_nomodifiable()
Executed 2 tests

From test_marks.vim:
Executing Test_Incr_Marks()
Executing Test_Restore_DelMark()
Executed 2 tests

From test_matchadd_conceal.vim:
Executing Test_clearmatches()
Executing Test_default_conceal_char()
Executing Test_matchadd_and_conceallevel_3()
Executing Test_matchadd_and_syn_conceal()
Executing Test_matchadd_repeat_conceal_with_syntax_off()
Executing Test_simple_matchadd()
Executing Test_simple_matchadd_and_conceal()
Executing Test_syn_and_match_conceal()
Executing Test_using_matchaddpos()
Executed 9 tests

From test_nested_function.vim:
Executing Test_nested_functions()
Executed 1 test

From test_netbeans.vim:
Executed 0 test

From test_normal.vim:
Executing Test_normal00_optrans()
Executing Test_normal01_keymodel()
Executing Test_normal02_selectmode()
Executing Test_normal02_selectmode2()
Executing Test_normal03_join()
Executing Test_normal04_filter()
Executing Test_normal05_formatexpr()
Executing Test_normal05_formatexpr_newbuf()
Executing Test_normal05_formatexpr_setopt()
Executing Test_normal06_formatprg()
Executing Test_normal07_internalfmt()
Executing Test_normal08_fold()
Executing Test_normal09_operatorfunc()
Executing Test_normal09a_operatorfunc()
Executing Test_normal10_expand()
Executing Test_normal11_showcmd()
Executing Test_normal12_nv_error()
Executing Test_normal13_help()
Executing Test_normal14_page()
Executing Test_normal14_page_eol()
Executing Test_normal15_z_scroll_vert()
Executing Test_normal16_z_scroll_hor()
Executing Test_normal17_z_scroll_hor2()
Executing Test_normal18_z_fold()
Executing Test_normal19_z_spell()
Executing Test_normal20_exmode()
Executing Test_normal21_nv_hat()
Executing Test_normal22_zet()
Executing Test_normal23_K()
Executing Test_normal24_rot13()
Executing Test_normal25_tag()
Executing Test_normal26_put()
Executing Test_normal27_bracket()
Executing Test_normal28_parenthesis()
Executing Test_normal29_brace()
Executing Test_normal30_changecase()
Executing Test_normal31_r_cmd()
Executing Test_normal32_g_cmd1()
Executing Test_normal33_g_cmd2()
Executing Test_normal34_g_cmd3()
Executing Test_normal35_g_cmd4()
    Skipped
Executing Test_normal36_g_cmd5()
Executing Test_normal37_g_cmd6()
Executing Test_normal38_nvhome()
Executing Test_normal39_cw()
Executing Test_normal40_ctrl_bsl()
Executing Test_normal41_insert_reg()
Executing Test_normal42_halfpage()
Executing Test_normal43_textobject1()
Executing Test_normal44_textobjects2()
Executing Test_normal45_drop()
Executing Test_normal46_ignore()
Executing Test_normal47_autocmd()
    Skipped
Executing Test_normal47_visual_buf_wipe()
Executing Test_normal48_wincmd()
Executing Test_normal49_counts()
Executing Test_normal50_commandline()
Executing Test_normal51_FileChangedRO()
Executing Test_normal52_rl()
Executing Test_normal53_digraph()
Executing Test_normal54_Ctrl_bsl()
Executed 61 tests
SKIPPED Test_normal35_g_cmd4(): output of g< can't be tested currently
SKIPPED Test_normal47_autocmd(): not possible to test cursorhold autocmd while waiting for input in normal_cmd

From test_packadd.vim:
Executing Test_colorscheme()
Executing Test_colorscheme_completion()
Executing Test_helptags()
Executing Test_packadd()
Executing Test_packadd_completion()
Executing Test_packadd_noload()
Executing Test_packloadall()
Executing Test_runtime()
Executed 8 tests

From test_perl.vim:
Executed 0 test

From test_quickfix.vim:
Executing Test_Autocmd()
Executing Test_Autocmd_Exception()
Executing Test_adjust_lnum()
Executing Test_browse()
Executing Test_caddbuffer_to_empty()
Executing Test_cage()
Executing Test_cbottom()
Executing Test_cbuffer()
Executing Test_cexpr()
Executing Test_cfile()
Executing Test_cgetexpr_works()
Executing Test_clist()
Executing Test_cwindow()
Executing Test_duplicate_buf()
Executing Test_efm()
Executing Test_efm1()
Executing Test_efm2()
Executing Test_efm_dirstack()
Executing Test_efm_ignore_continuations()
Executing Test_errortitle()
Executing Test_grep()
Executing Test_helpgrep()
Executing Test_history()
Executing Test_invalid_efm()
Executing Test_locationlist()
Executing Test_locationlist_cross_tab_jump()
Executing Test_locationlist_curwin_was_closed()
Executing Test_long_lines()
Executing Test_nomem()
Executing Test_qf_property()
Executing Test_qf_title()
Executing Test_quickfix_set_list_with_act()
Executing Test_quickfix_was_changed_by_autocmd()
Executing Test_setqflist()
Executing Test_setqflist_empty_middle()
Executing Test_setqflist_empty_older()
Executing Test_switchbuf()
Executing Test_two_windows()
Executing Test_vimgreptitle()
Executed 39 tests

From test_ruby.vim:
Executed 0 test

From test_search.vim:
Executing Test_search_cmdline()
Executing Test_search_cmdline2()
Executing Test_use_sub_pat()
Executed 3 tests

From test_signs.vim:
Executing Test_sign()
Executing Test_sign_completion()
Executing Test_sign_delete_buffer()
Executing Test_sign_invalid_commands()
Executing Test_sign_undefine_still_placed()
Executed 5 tests

From test_smartindent.vim:
Executing Test_nosmartindent()
Executed 1 test

From test_startup.vim:
Executing Test_after_comes_later()
Executing Test_compatible_args()
Executing Test_file_args()
Executing Test_help_arg()
Executing Test_read_stdin()
Executing Test_startup_script()
Executing Test_startuptime()
Executed 7 tests

From test_startup_utf8.vim:
Executing Test_read_fifo_utf8()
Executing Test_read_stdin_utf8()
Executed 2 tests

From test_stat.vim:
Executing Test_checktime()
Executing Test_existent_directory()
Executing Test_existent_file()
Executing Test_nonexistent_file()
Executing Test_win32_symlink_dir()
Executed 5 tests

From test_substitute.vim:
Executing Test_multiline_subst()
Executed 1 test

From test_syntax.vim:
Executing Test_syn_iskeyword()
Executing Test_syntax_after_reload()
Executed 2 tests

From test_textobjects.vim:
Executing Test_inner_block_with_cpo_M_left_backslash()
Executing Test_inner_block_with_cpo_M_right_backslash()
Executing Test_inner_block_without_cpo_M()
Executed 3 tests

From test_undo.vim:
Executing Test_U_command()
Executing Test_global_local_undolevels()
Executing Test_insert_expr()
Executing Test_undo_del_chars()
Executing Test_undo_write()
Executing Test_undojoin()
Executing Test_undolist()
Executing Test_undotree()
Executed 8 tests

From test_usercommands.vim:
Executing Test_Ambiguous()
Executing Test_CmdUndefined()
Executing Test_cmdmods()
Executed 3 tests

From test_viminfo.vim:
Executing Test_cmdline_history()
Executing Test_cmdline_history_order()
Executing Test_global_vars()
Executing Test_viminfo_bad_syntax()
Executing Test_viminfo_encoding()
Executing Test_viminfo_file_mark_tabclose()
Executing Test_viminfo_file_mark_zero_time()
Executing Test_viminfo_file_marks()
Executing Test_viminfo_jumplist()
Executing Test_viminfo_marks()
Executing Test_viminfo_oldfiles()
Executing Test_viminfo_read_and_write()
Executing Test_viminfo_registers()
Executed 13 tests

From test_viml.vim:
Executing Test_arg_abort()
Executing Test_braces_skipped()
Executing Test_curlies()
Executing Test_defining_functions()
Executing Test_echo_and_string()
Executing Test_endwhile_function()
Executing Test_endwhile_script()
Executing Test_error_in_function()
Executing Test_error_in_script()
Executing Test_expr_parsing()
Executing Test_finish()
Executing Test_func_abort()
Executing Test_if_bar_fail()
Executing Test_if_fail()
Executing Test_if_while()
Executing Test_num64()
Executing Test_return()
Executing Test_skip()
Executing Test_type()
Executing Test_while_fail()
Executed 20 tests

From test_visual.vim:
Executing Test_block_shift_multibyte()
Executed 1 test

From test_window_id.vim:
Executing Test_win_getid()
Executed 1 test

From test_writefile.vim:
Executing Test_WriteFile()
Executed 1 test

From test_alot_latin.vim:
Executing Test_eow_with_optional()
Executing Test_equivalence_re1()
Executing Test_equivalence_re2()
Executing Test_nested_backrefs()
Executing Test_recursive_substitute()
Executed 5 tests

From test_alot_utf8.vim:
Executing Test_classes_re1()
Executing Test_classes_re2()
Executing Test_equivalence_re1()
Executing Test_equivalence_re2()
Executing Test_match_using_multibyte_conceal_char()
Executing Test_source_latin()
Executing Test_source_utf8()
Executing Test_strcharpart()
Executing Test_strgetchar()
Executed 9 tests

From test_alot.vim:
Executing Test_abbreviation()
Executing Test_augroup_deleted()
Executing Test_augroup_warning()
Executing Test_auto_partial_rebind()
Executing Test_autocmd_bufunload_avoiding_SEGV_01()
Executing Test_autocmd_bufunload_avoiding_SEGV_02()
Executing Test_autocmd_bufunload_with_tabnext()
Executing Test_autocmd_bufwinleave_with_tabfirst()
Executing Test_bind_in_python()
Executing Test_break_undo()
Executing Test_bufunload()
Executing Test_cancel_ptjump()
Executing Test_caught_error_in_statusline()
Executing Test_caught_error_in_tabline()
Executing Test_closure_counter()
Executing Test_closure_refcount()
Executing Test_closure_unlet()
Executing Test_color_names()
Executing Test_command_count_0()
Executing Test_command_count_1()
Executing Test_command_count_2()
Executing Test_command_count_3()
Executing Test_command_count_4()
Executing Test_compare_null_dict()
Executing Test_compare_partials()
Executing Test_compl_vim_cmds_after_register_expr()
Executing Test_complete_no_undo()
Executing Test_completefunc_opens_new_window_one()
Executing Test_completefunc_opens_new_window_two()
Executing Test_completefunc_with_scratch_buffer()
Executing Test_completefunc_works()
Executing Test_cursorhold_insert()
Executing Test_cursorhold_insert_ctrl_x()
Executing Test_curswant_with_autocommand()
Executing Test_cycle_partial_job()
Executing Test_cyclic_dict_arg()
Executing Test_cyclic_list_arg()
Executing Test_delete_myself()
Executing Test_dict()
Executing Test_dir_delete()
Executing Test_early_bar()
Executing Test_empty_buffer()
Executing Test_equal()
Executing Test_ex_undo()
Executing Test_execute_list()
Executing Test_execute_string()
Executing Test_existing()
Executing Test_expand()
Executing Test_feedkeys_x_with_empty_string()
Executing Test_file_delete()
Executing Test_file_perm()
Executing Test_fileformat_after_bw()
Executing Test_filetype_valid()
Executing Test_filter()
Executing Test_filter_fails()
Executing Test_filter_map_dict_expr_funcref()
Executing Test_filter_map_dict_expr_string()
Executing Test_filter_map_list_expr_funcref()
Executing Test_filter_map_list_expr_string()
Executing Test_fnamemodify()
Executing Test_func_unref()
Executing Test_funcref()
Executing Test_function_in_dict()
Executing Test_function_with_funcref()
Executing Test_gD()
Executing Test_gD_char()
Executing Test_gD_comment()
Executing Test_gD_inline_comment()
Executing Test_gD_string()
Executing Test_gD_string_same_line()
Executing Test_gD_too()
Executing Test_gd()
Executing Test_gd_comment()
Executing Test_gd_comment_in_string()
Executing Test_gd_inline_comment()
Executing Test_gd_inline_comment_body()
Executing Test_gd_inline_comment_only()
Executing Test_gd_kr_style()
Executing Test_gd_missing_braces()
Executing Test_gd_not_local()
Executing Test_gd_string()
Executing Test_gd_string_in_comment()
Executing Test_gd_string_only()
Executing Test_gd_trailing_comment()
Executing Test_gd_trailing_multiline_comment()
Executing Test_get_partial_items()
Executing Test_getreg_empty_list()
Executing Test_global_local_lispwords()
Executing Test_help_complete()
Executing Test_help_tagjump()
Executing Test_if()
Executing Test_info()
Executing Test_invalid()
Executing Test_invalid_submatch()
Executing Test_join_with_count()
Executing Test_keymap_valid()
Executing Test_keyword_jump()
Executing Test_lambda_call_lambda_from_lambda()
Executing Test_lambda_capture_by_reference()
Executing Test_lambda_circular_reference()
Executing Test_lambda_closure_counter()
Executing Test_lambda_combination()
Executing Test_lambda_delfunc()
Executing Test_lambda_do_not_share_local_variable()
Executing Test_lambda_fails()
Executing Test_lambda_feature()
Executing Test_lambda_refer_local_variable_from_other_scope()
Executing Test_lambda_scope()
Executing Test_lambda_share_scope()
Executing Test_lambda_side_effect()
Executing Test_lambda_with_a_var()
Executing Test_lambda_with_filter()
Executing Test_lambda_with_map()
Executing Test_lambda_with_partial()
Executing Test_lambda_with_sort()
Executing Test_lambda_with_timer()
Executing Test_load_menu()
Executing Test_loop_over_null_list()
Executing Test_map_ctrl_c_insert()
Executing Test_map_ctrl_c_visual()
Executing Test_map_cursor()
Executing Test_map_feedkeys()
Executing Test_map_langmap()
Executing Test_map_meta_quotes()
Executing Test_match()
Executing Test_matchaddpos()
Executing Test_matchaddpos_using_negative_priority()
Executing Test_matchstrpos()
Executing Test_max_min_errors()
Executing Test_messages()
Executing Test_missing_attr()
Executing Test_move_cursor()
Executing Test_named_function_closure()
Executing Test_no_type_checking()
Executing Test_noinsert_complete()
Executing Test_non_zero_arg()
Executing Test_not_existing()
Executing Test_not_lamda()
Executing Test_omnifunc_with_check()
Executing Test_oneshot()
Executing Test_option_value()
Executing Test_options()
Executing Test_partial_args()
Executing Test_partial_dict()
Executing Test_partial_exists()
Executing Test_partial_implicit()
Executing Test_partial_string()
Executing Test_path_keep_commas()
Executing Test_paused()
Executing Test_popup_complete()
Executing Test_popup_complete2()
Executing Test_popup_completion_insertmode()
Executing Test_printf_64bit()
Executing Test_printf_errors()
Executing Test_printf_float()
Executing Test_printf_misc()
Executing Test_printf_spec_b()
Executing Test_printf_spec_s()
Executing Test_ptag_with_notagstack()
Executing Test_read_only()
Executing Test_recursive_delete()
Executing Test_redefine_dict_func()
Executing Test_ref_job_partial_dict()
Executing Test_reltime()
Executing Test_repeat_many()
Executing Test_repeat_three()
Executing Test_retain_partial()
Executing Test_script_function_in_dict()
Executing Test_script_function_in_dict_arg()
Executing Test_searchpos()
Executing Test_set_add()
Executing Test_set_backslash()
Executing Test_set_reg_null_list()
Executing Test_set_tagcase()
Executing Test_setmatches()
Executing Test_signcolumn()
Executing Test_sort_default()
Executing Test_sort_float()
Executing Test_sort_nested()
Executing Test_sort_numbers()
Executing Test_sort_numeric()
Executing Test_sort_strings()
Executing Test_special_char()
Executing Test_statusline_will_be_disabled_with_error()
Executing Test_stop_all_in_callback()
Executing Test_stop_in_callback()
Executing Test_stopall()
Executing Test_strcharpart()
Executing Test_strgetchar()
Executing Test_substitute_expr()
Executing Test_substitute_expr_arg()
Executing Test_symlink_delete()
Executing Test_symlink_dir_delete()
Executing Test_symlink_recursive_delete()
Executing Test_syntax_valid()
Executing Test_tabline_will_be_disabled_with_error()
Executing Test_tabnext_on_buf_unload1()
Executing Test_tabnext_on_buf_unload2()
Executing Test_tabpage()
Executing Test_tabpage_with_autocmd()
Executing Test_tabpage_with_tab_modifier()
Executing Test_tagcase()
Executing Test_three_windows()
Executing Test_tostring()
Executing Test_true_false_arg()
Executing Test_valid()
Executing Test_version()
Executing Test_vim_did_enter()
Executing Test_whichwrap()
Executing Test_win_tab_autocmd()
Executing Test_window_cmd_cmdwin_with_vsp()
Executing Test_window_cmd_ls0_with_split()
Executing Test_window_cmd_wincmd_gf()
Executing Test_with_directories()
Executing Test_with_partial_callback()
Executing Test_with_tilde()
Executing Test_wrong_arguments()
Executed 217 tests

Test results:
ALL DONE
make[3]: Leaving directory '/sources/vim80/src/testdir'
gcc -c -I. -Iproto -DHAVE_CONFIG_H     -g -O2 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1       -o objects/json_test.o json_test.c
gcc -c -I. -Iproto -DHAVE_CONFIG_H     -g -O2 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1       version.c -o objects/version.o
link.sh: $LINK_AS_NEEDED set to 'yes': invoking linker directly.
  gcc   -L/usr/local/lib -Wl,--as-needed 	-o json_test objects/arabic.o objects/buffer.o objects/blowfish.o objects/charset.o objects/crypt.o objects/crypt_zip.o objects/dict.o objects/diff.o objects/digraph.o objects/edit.o objects/eval.o objects/evalfunc.o objects/ex_cmds.o objects/ex_cmds2.o objects/ex_docmd.o objects/ex_eval.o objects/ex_getln.o objects/farsi.o objects/fileio.o objects/fold.o objects/getchar.o objects/hardcopy.o objects/hashtab.o  objects/if_cscope.o objects/if_xcmdsrv.o objects/list.o objects/mark.o objects/memline.o objects/menu.o objects/misc1.o objects/misc2.o objects/move.o objects/mbyte.o objects/normal.o objects/ops.o objects/option.o objects/os_unix.o objects/pathdef.o objects/popupmnu.o objects/quickfix.o objects/regexp.o objects/screen.o objects/search.o objects/sha256.o objects/spell.o objects/spellfile.o objects/syntax.o objects/tag.o objects/term.o objects/ui.o objects/undo.o objects/userfunc.o objects/version.o objects/window.o           objects/netbeans.o objects/channel.o  objects/memfile.o objects/message.o objects/json_test.o        -lm -lncurses -lnsl  -lacl -lattr -ldl           
link.sh: Linked fine
./json_test || exit 1; echo  passed;
passed
gcc -c -I. -Iproto -DHAVE_CONFIG_H     -g -O2 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1       -o objects/memfile_test.o memfile_test.c
gcc -c -I. -Iproto -DHAVE_CONFIG_H     -g -O2 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1       version.c -o objects/version.o
link.sh: $LINK_AS_NEEDED set to 'yes': invoking linker directly.
  gcc   -L/usr/local/lib -Wl,--as-needed 	-o memfile_test objects/arabic.o objects/buffer.o objects/blowfish.o objects/charset.o objects/crypt.o objects/crypt_zip.o objects/dict.o objects/diff.o objects/digraph.o objects/edit.o objects/eval.o objects/evalfunc.o objects/ex_cmds.o objects/ex_cmds2.o objects/ex_docmd.o objects/ex_eval.o objects/ex_getln.o objects/farsi.o objects/fileio.o objects/fold.o objects/getchar.o objects/hardcopy.o objects/hashtab.o  objects/if_cscope.o objects/if_xcmdsrv.o objects/list.o objects/mark.o objects/memline.o objects/menu.o objects/misc1.o objects/misc2.o objects/move.o objects/mbyte.o objects/normal.o objects/ops.o objects/option.o objects/os_unix.o objects/pathdef.o objects/popupmnu.o objects/quickfix.o objects/regexp.o objects/screen.o objects/search.o objects/sha256.o objects/spell.o objects/spellfile.o objects/syntax.o objects/tag.o objects/term.o objects/ui.o objects/undo.o objects/userfunc.o objects/version.o objects/window.o           objects/netbeans.o objects/channel.o  objects/json.o objects/message.o objects/memfile_test.o        -lm -lncurses -lnsl  -lacl -lattr -ldl           
link.sh: Linked fine
./memfile_test || exit 1; echo  passed;
passed
gcc -c -I. -Iproto -DHAVE_CONFIG_H     -g -O2 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1       -o objects/message_test.o message_test.c
gcc -c -I. -Iproto -DHAVE_CONFIG_H     -g -O2 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1       version.c -o objects/version.o
link.sh: $LINK_AS_NEEDED set to 'yes': invoking linker directly.
  gcc   -L/usr/local/lib -Wl,--as-needed 	-o message_test objects/arabic.o objects/buffer.o objects/blowfish.o objects/charset.o objects/crypt.o objects/crypt_zip.o objects/dict.o objects/diff.o objects/digraph.o objects/edit.o objects/eval.o objects/evalfunc.o objects/ex_cmds.o objects/ex_cmds2.o objects/ex_docmd.o objects/ex_eval.o objects/ex_getln.o objects/farsi.o objects/fileio.o objects/fold.o objects/getchar.o objects/hardcopy.o objects/hashtab.o  objects/if_cscope.o objects/if_xcmdsrv.o objects/list.o objects/mark.o objects/memline.o objects/menu.o objects/misc1.o objects/misc2.o objects/move.o objects/mbyte.o objects/normal.o objects/ops.o objects/option.o objects/os_unix.o objects/pathdef.o objects/popupmnu.o objects/quickfix.o objects/regexp.o objects/screen.o objects/search.o objects/sha256.o objects/spell.o objects/spellfile.o objects/syntax.o objects/tag.o objects/term.o objects/ui.o objects/undo.o objects/userfunc.o objects/version.o objects/window.o           objects/netbeans.o objects/channel.o  objects/json.o objects/memfile.o objects/message_test.o        -lm -lncurses -lnsl  -lacl -lattr -ldl           
link.sh: Linked fine
./message_test || exit 1; echo  passed;
passed
make[2]: Leaving directory '/sources/vim80/src'
make[1]: Leaving directory '/sources/vim80'
